
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="GIS package">
      
      
      
        <link rel="canonical" href="https://serapieum-of-alex.github.io/pyramids/develop/reference/dataset/">
      
      
        <link rel="prev" href="../../architecture/diagrams/">
      
      
        <link rel="next" href="../featurecollection/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Dataset - pyramids</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../assets/stylesheets/panzoom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  <meta name="panzoom-theme" content="material">
<meta name="panzoom-data" content='{"selectors": [".d2", ".mermaid"], "initial_zoom_level": 1.0}'> </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dataset-class" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="pyramids" class="md-header__button md-logo" aria-label="pyramids" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            pyramids
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Dataset
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="lime"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Serapieum-of-alex/pyramids" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Serapieum-of-alex/pyramids
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../installation/" class="md-tabs__link">
        
  
  
    
  
  Installation

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../overview/codebase-map/" class="md-tabs__link">
          
  
  
    
  
  Overview

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../architecture/diagrams/" class="md-tabs__link">
          
  
  
    
  
  Architecture

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
    
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorials/dataset/" class="md-tabs__link">
          
  
  
    
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../how-to/devcontainer/" class="md-tabs__link">
          
  
  
    
  
  How-to

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../change-log/" class="md-tabs__link">
          
  
  
    
  
  About

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="pyramids" class="md-nav__button md-logo" aria-label="pyramids" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    pyramids
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Serapieum-of-alex/pyramids" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Serapieum-of-alex/pyramids
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/codebase-map/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Codebase Map
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/how-it-works/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How it works
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/diagrams/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Diagrams
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Dataset
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Dataset
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Dataset
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dataset">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.access" class="md-nav__link">
    <span class="md-ellipsis">
      access
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.raster" class="md-nav__link">
    <span class="md-ellipsis">
      raster
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.values" class="md-nav__link">
    <span class="md-ellipsis">
      values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.rows" class="md-nav__link">
    <span class="md-ellipsis">
      rows
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.columns" class="md-nav__link">
    <span class="md-ellipsis">
      columns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.shape" class="md-nav__link">
    <span class="md-ellipsis">
      shape
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.geotransform" class="md-nav__link">
    <span class="md-ellipsis">
      geotransform
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.epsg" class="md-nav__link">
    <span class="md-ellipsis">
      epsg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.crs" class="md-nav__link">
    <span class="md-ellipsis">
      crs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.cell_size" class="md-nav__link">
    <span class="md-ellipsis">
      cell_size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.band_count" class="md-nav__link">
    <span class="md-ellipsis">
      band_count
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.band_names" class="md-nav__link">
    <span class="md-ellipsis">
      band_names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.band_units" class="md-nav__link">
    <span class="md-ellipsis">
      band_units
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.no_data_value" class="md-nav__link">
    <span class="md-ellipsis">
      no_data_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.meta_data" class="md-nav__link">
    <span class="md-ellipsis">
      meta_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.block_size" class="md-nav__link">
    <span class="md-ellipsis">
      block_size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.file_name" class="md-nav__link">
    <span class="md-ellipsis">
      file_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.driver_type" class="md-nav__link">
    <span class="md-ellipsis">
      driver_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.scale" class="md-nav__link">
    <span class="md-ellipsis">
      scale
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.offset" class="md-nav__link">
    <span class="md-ellipsis">
      offset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.top_left_corner" class="md-nav__link">
    <span class="md-ellipsis">
      top_left_corner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.bounds" class="md-nav__link">
    <span class="md-ellipsis">
      bounds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.bbox" class="md-nav__link">
    <span class="md-ellipsis">
      bbox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.lon" class="md-nav__link">
    <span class="md-ellipsis">
      lon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.lat" class="md-nav__link">
    <span class="md-ellipsis">
      lat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.x" class="md-nav__link">
    <span class="md-ellipsis">
      x
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.y" class="md-nav__link">
    <span class="md-ellipsis">
      y
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.gdal_dtype" class="md-nav__link">
    <span class="md-ellipsis">
      gdal_dtype
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.numpy_dtype" class="md-nav__link">
    <span class="md-ellipsis">
      numpy_dtype
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.dtype" class="md-nav__link">
    <span class="md-ellipsis">
      dtype
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.overview_count" class="md-nav__link">
    <span class="md-ellipsis">
      overview_count
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.band_color" class="md-nav__link">
    <span class="md-ellipsis">
      band_color
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.color_table" class="md-nav__link">
    <span class="md-ellipsis">
      color_table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      __repr__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.read_file" class="md-nav__link">
    <span class="md-ellipsis">
      read_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.read_array" class="md-nav__link">
    <span class="md-ellipsis">
      read_array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_x_lon_dimension_array" class="md-nav__link">
    <span class="md-ellipsis">
      get_x_lon_dimension_array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_y_lat_dimension_array" class="md-nav__link">
    <span class="md-ellipsis">
      get_y_lat_dimension_array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_block_arrangement" class="md-nav__link">
    <span class="md-ellipsis">
      get_block_arrangement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.copy" class="md-nav__link">
    <span class="md-ellipsis">
      copy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.close" class="md-nav__link">
    <span class="md-ellipsis">
      close
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_attribute_table" class="md-nav__link">
    <span class="md-ellipsis">
      get_attribute_table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.set_attribute_table" class="md-nav__link">
    <span class="md-ellipsis">
      set_attribute_table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.add_band" class="md-nav__link">
    <span class="md-ellipsis">
      add_band
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.stats" class="md-nav__link">
    <span class="md-ellipsis">
      stats
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.plot" class="md-nav__link">
    <span class="md-ellipsis">
      plot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.translate" class="md-nav__link">
    <span class="md-ellipsis">
      translate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.create" class="md-nav__link">
    <span class="md-ellipsis">
      create
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.create_from_array" class="md-nav__link">
    <span class="md-ellipsis">
      create_from_array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.dataset_like" class="md-nav__link">
    <span class="md-ellipsis">
      dataset_like
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.write_array" class="md-nav__link">
    <span class="md-ellipsis">
      write_array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.set_crs" class="md-nav__link">
    <span class="md-ellipsis">
      set_crs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.to_crs" class="md-nav__link">
    <span class="md-ellipsis">
      to_crs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.count_domain_cells" class="md-nav__link">
    <span class="md-ellipsis">
      count_domain_cells
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.change_no_data_value" class="md-nav__link">
    <span class="md-ellipsis">
      change_no_data_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_cell_coords" class="md-nav__link">
    <span class="md-ellipsis">
      get_cell_coords
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_cell_polygons" class="md-nav__link">
    <span class="md-ellipsis">
      get_cell_polygons
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_cell_points" class="md-nav__link">
    <span class="md-ellipsis">
      get_cell_points
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.to_file" class="md-nav__link">
    <span class="md-ellipsis">
      to_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.convert_longitude" class="md-nav__link">
    <span class="md-ellipsis">
      convert_longitude
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.to_feature_collection" class="md-nav__link">
    <span class="md-ellipsis">
      to_feature_collection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.apply" class="md-nav__link">
    <span class="md-ellipsis">
      apply
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.fill" class="md-nav__link">
    <span class="md-ellipsis">
      fill
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.resample" class="md-nav__link">
    <span class="md-ellipsis">
      resample
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.fill_gaps" class="md-nav__link">
    <span class="md-ellipsis">
      fill_gaps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.align" class="md-nav__link">
    <span class="md-ellipsis">
      align
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.correct_wrap_cutline_error" class="md-nav__link">
    <span class="md-ellipsis">
      correct_wrap_cutline_error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.crop" class="md-nav__link">
    <span class="md-ellipsis">
      crop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.map_to_array_coordinates" class="md-nav__link">
    <span class="md-ellipsis">
      map_to_array_coordinates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.array_to_map_coordinates" class="md-nav__link">
    <span class="md-ellipsis">
      array_to_map_coordinates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.extract" class="md-nav__link">
    <span class="md-ellipsis">
      extract
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.overlay" class="md-nav__link">
    <span class="md-ellipsis">
      overlay
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_mask" class="md-nav__link">
    <span class="md-ellipsis">
      get_mask
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.footprint" class="md-nav__link">
    <span class="md-ellipsis">
      footprint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.normalize" class="md-nav__link">
    <span class="md-ellipsis">
      normalize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_tile" class="md-nav__link">
    <span class="md-ellipsis">
      get_tile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.cluster" class="md-nav__link">
    <span class="md-ellipsis">
      cluster
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.cluster2" class="md-nav__link">
    <span class="md-ellipsis">
      cluster2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.create_overviews" class="md-nav__link">
    <span class="md-ellipsis">
      create_overviews
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.recreate_overviews" class="md-nav__link">
    <span class="md-ellipsis">
      recreate_overviews
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_overview" class="md-nav__link">
    <span class="md-ellipsis">
      get_overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.read_overview_array" class="md-nav__link">
    <span class="md-ellipsis">
      read_overview_array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_band_by_color" class="md-nav__link">
    <span class="md-ellipsis">
      get_band_by_color
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_histogram" class="md-nav__link">
    <span class="md-ellipsis">
      get_histogram
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.to_xyz" class="md-nav__link">
    <span class="md-ellipsis">
      to_xyz
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datacube.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Datacube
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../featurecollection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Feature Collection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    config
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/dataset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dataset
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/datacube/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Datacube
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/raster-basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Raster basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/datacube-basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Datacube basics
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    How-to
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            How-to
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/devcontainer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dev Container
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker & GHCR
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/recipes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Recipes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ & Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../change-log/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Change-log
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CODE_OF_CONDUCT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code of Conduct
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LICENSE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AUTHORS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../adr/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    ADRs
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8_6" id="__nav_8_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_6">
            <span class="md-nav__icon md-icon"></span>
            ADRs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adr/0001-docs-stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-0001 Docs stack
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adr/0002-type-checking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-0002 Type checking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adr/0003-io-formats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-0003 IO formats
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adr/0004-dependency-graphing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-0004 Dependency graphing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adr/0005-versioning-docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-0005 Versioning docs
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Dataset
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dataset">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.access" class="md-nav__link">
    <span class="md-ellipsis">
      access
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.raster" class="md-nav__link">
    <span class="md-ellipsis">
      raster
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.values" class="md-nav__link">
    <span class="md-ellipsis">
      values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.rows" class="md-nav__link">
    <span class="md-ellipsis">
      rows
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.columns" class="md-nav__link">
    <span class="md-ellipsis">
      columns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.shape" class="md-nav__link">
    <span class="md-ellipsis">
      shape
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.geotransform" class="md-nav__link">
    <span class="md-ellipsis">
      geotransform
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.epsg" class="md-nav__link">
    <span class="md-ellipsis">
      epsg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.crs" class="md-nav__link">
    <span class="md-ellipsis">
      crs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.cell_size" class="md-nav__link">
    <span class="md-ellipsis">
      cell_size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.band_count" class="md-nav__link">
    <span class="md-ellipsis">
      band_count
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.band_names" class="md-nav__link">
    <span class="md-ellipsis">
      band_names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.band_units" class="md-nav__link">
    <span class="md-ellipsis">
      band_units
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.no_data_value" class="md-nav__link">
    <span class="md-ellipsis">
      no_data_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.meta_data" class="md-nav__link">
    <span class="md-ellipsis">
      meta_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.block_size" class="md-nav__link">
    <span class="md-ellipsis">
      block_size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.file_name" class="md-nav__link">
    <span class="md-ellipsis">
      file_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.driver_type" class="md-nav__link">
    <span class="md-ellipsis">
      driver_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.scale" class="md-nav__link">
    <span class="md-ellipsis">
      scale
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.offset" class="md-nav__link">
    <span class="md-ellipsis">
      offset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.top_left_corner" class="md-nav__link">
    <span class="md-ellipsis">
      top_left_corner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.bounds" class="md-nav__link">
    <span class="md-ellipsis">
      bounds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.bbox" class="md-nav__link">
    <span class="md-ellipsis">
      bbox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.lon" class="md-nav__link">
    <span class="md-ellipsis">
      lon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.lat" class="md-nav__link">
    <span class="md-ellipsis">
      lat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.x" class="md-nav__link">
    <span class="md-ellipsis">
      x
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.y" class="md-nav__link">
    <span class="md-ellipsis">
      y
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.gdal_dtype" class="md-nav__link">
    <span class="md-ellipsis">
      gdal_dtype
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.numpy_dtype" class="md-nav__link">
    <span class="md-ellipsis">
      numpy_dtype
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.dtype" class="md-nav__link">
    <span class="md-ellipsis">
      dtype
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.overview_count" class="md-nav__link">
    <span class="md-ellipsis">
      overview_count
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.band_color" class="md-nav__link">
    <span class="md-ellipsis">
      band_color
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.color_table" class="md-nav__link">
    <span class="md-ellipsis">
      color_table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      __repr__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.read_file" class="md-nav__link">
    <span class="md-ellipsis">
      read_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.read_array" class="md-nav__link">
    <span class="md-ellipsis">
      read_array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_x_lon_dimension_array" class="md-nav__link">
    <span class="md-ellipsis">
      get_x_lon_dimension_array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_y_lat_dimension_array" class="md-nav__link">
    <span class="md-ellipsis">
      get_y_lat_dimension_array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_block_arrangement" class="md-nav__link">
    <span class="md-ellipsis">
      get_block_arrangement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.copy" class="md-nav__link">
    <span class="md-ellipsis">
      copy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.close" class="md-nav__link">
    <span class="md-ellipsis">
      close
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_attribute_table" class="md-nav__link">
    <span class="md-ellipsis">
      get_attribute_table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.set_attribute_table" class="md-nav__link">
    <span class="md-ellipsis">
      set_attribute_table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.add_band" class="md-nav__link">
    <span class="md-ellipsis">
      add_band
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.stats" class="md-nav__link">
    <span class="md-ellipsis">
      stats
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.plot" class="md-nav__link">
    <span class="md-ellipsis">
      plot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.translate" class="md-nav__link">
    <span class="md-ellipsis">
      translate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.create" class="md-nav__link">
    <span class="md-ellipsis">
      create
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.create_from_array" class="md-nav__link">
    <span class="md-ellipsis">
      create_from_array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.dataset_like" class="md-nav__link">
    <span class="md-ellipsis">
      dataset_like
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.write_array" class="md-nav__link">
    <span class="md-ellipsis">
      write_array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.set_crs" class="md-nav__link">
    <span class="md-ellipsis">
      set_crs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.to_crs" class="md-nav__link">
    <span class="md-ellipsis">
      to_crs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.count_domain_cells" class="md-nav__link">
    <span class="md-ellipsis">
      count_domain_cells
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.change_no_data_value" class="md-nav__link">
    <span class="md-ellipsis">
      change_no_data_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_cell_coords" class="md-nav__link">
    <span class="md-ellipsis">
      get_cell_coords
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_cell_polygons" class="md-nav__link">
    <span class="md-ellipsis">
      get_cell_polygons
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_cell_points" class="md-nav__link">
    <span class="md-ellipsis">
      get_cell_points
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.to_file" class="md-nav__link">
    <span class="md-ellipsis">
      to_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.convert_longitude" class="md-nav__link">
    <span class="md-ellipsis">
      convert_longitude
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.to_feature_collection" class="md-nav__link">
    <span class="md-ellipsis">
      to_feature_collection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.apply" class="md-nav__link">
    <span class="md-ellipsis">
      apply
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.fill" class="md-nav__link">
    <span class="md-ellipsis">
      fill
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.resample" class="md-nav__link">
    <span class="md-ellipsis">
      resample
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.fill_gaps" class="md-nav__link">
    <span class="md-ellipsis">
      fill_gaps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.align" class="md-nav__link">
    <span class="md-ellipsis">
      align
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.correct_wrap_cutline_error" class="md-nav__link">
    <span class="md-ellipsis">
      correct_wrap_cutline_error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.crop" class="md-nav__link">
    <span class="md-ellipsis">
      crop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.map_to_array_coordinates" class="md-nav__link">
    <span class="md-ellipsis">
      map_to_array_coordinates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.array_to_map_coordinates" class="md-nav__link">
    <span class="md-ellipsis">
      array_to_map_coordinates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.extract" class="md-nav__link">
    <span class="md-ellipsis">
      extract
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.overlay" class="md-nav__link">
    <span class="md-ellipsis">
      overlay
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_mask" class="md-nav__link">
    <span class="md-ellipsis">
      get_mask
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.footprint" class="md-nav__link">
    <span class="md-ellipsis">
      footprint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.normalize" class="md-nav__link">
    <span class="md-ellipsis">
      normalize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_tile" class="md-nav__link">
    <span class="md-ellipsis">
      get_tile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.cluster" class="md-nav__link">
    <span class="md-ellipsis">
      cluster
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.cluster2" class="md-nav__link">
    <span class="md-ellipsis">
      cluster2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.create_overviews" class="md-nav__link">
    <span class="md-ellipsis">
      create_overviews
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.recreate_overviews" class="md-nav__link">
    <span class="md-ellipsis">
      recreate_overviews
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_overview" class="md-nav__link">
    <span class="md-ellipsis">
      get_overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.read_overview_array" class="md-nav__link">
    <span class="md-ellipsis">
      read_overview_array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_band_by_color" class="md-nav__link">
    <span class="md-ellipsis">
      get_band_by_color
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.get_histogram" class="md-nav__link">
    <span class="md-ellipsis">
      get_histogram
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyramids.dataset.Dataset.to_xyz" class="md-nav__link">
    <span class="md-ellipsis">
      to_xyz
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/Serapieum-of-alex/pyramids/edit/master/docs/reference/dataset.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/Serapieum-of-alex/pyramids/raw/master/docs/reference/dataset.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="dataset-class"><a class="toclink" href="#dataset-class">Dataset Class</a><a class="headerlink" href="#dataset-class" title="Permanent link">#</a></h1>
<ul>
<li>Detailed class diagram for the <code>Dataset</code> class and related components:</li>
</ul>
<div class="panzoom-box" data-key="ctrl" id="panzoom0" oncontextmenu="return false;">
    <div class="panzoom-info-box panzoom-info-box-top panzoom-hidden">
Hold "Ctrl" to enable pan &amp; zoom
</div>
    <nav class="panzoom-nav panzoom-top-nav">
    <button class="panzoom-info panzoom-button">
    <svg class="panzoom-icon" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
        <path d="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm169.8-90.7c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"></path>
    </svg>
</button><button class="panzoom-reset panzoom-button">
    <svg class="panzoom-icon" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
        <path d="M125.7 160l50.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L48 224c-17.7 0-32-14.3-32-32L16 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 51.2L97.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L125.7 160z"></path>
    </svg>
</button><button class="panzoom-max panzoom-button">
    <svg class="panzoom-icon" viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
        <path d="M32 32C14.3 32 0 46.3 0 64l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96z"></path>
    </svg>
</button><button class="panzoom-min panzoom-button panzoom-hidden">
    <svg class="panzoom-icon" viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
        <path d="M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 320c-17.7 0-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0z"></path>
    </svg>
</button>
    </nav>
    <pre class="mermaid"><code>classDiagram
    %% configuration class
    class Config {
    }

    %% abstract base class for rasters
    class AbstractDataset {
        +__init__(src, access)
        +__str__()
        +__repr__()
        +access()
        +raster()
        +raster(value)
        +values()
        +rows()
        +columns()
        +shape()
        +geotransform()
        +top_left_corner()
        +epsg()
        +epsg(value)
        +crs()
        +crs(value)
        +cell_size()
        +no_data_value()
        +no_data_value(value)
        +meta_data()
        +meta_data(value)
        +block_size()
        +block_size(value)
        +file_name()
        +driver_type()
        +read_file(path, read_only)
        +read_array(band, window)
        +_read_block(band, window)
        +plot(band, exclude_value, rgb, surface_reflectance, cutoff, overview, overview_index, **kwargs)
    }

    %% concrete raster class
    class Dataset {
        +__init__(src, access)
        +__str__()
        +__repr__()
        +access()
        +raster()
        +raster(value)
        +values()
        +rows()
        +columns()
        +shape()
        +geotransform()
        +epsg()
        +epsg(value)
        +crs()
        +crs(value)
        +cell_size()
        +band_count()
        +band_names()
        +band_names(name_list)
        +band_units()
        +band_units(value)
        +no_data_value()
        +no_data_value(value)
        +meta_data()
        +meta_data(value)
        +block_size()
        +block_size(value)
        +file_name()
        +driver_type()
        +scale()
        +scale(value)
        +offset()
        +offset(value)
        +read_file(path, read_only)
        +create_from_array(arr, top_left_corner, cell_size, epsg)
        +read_array(band, window)
        +_read_block(band, window)
        +plot(band, exclude_value, rgb, surface_reflectance, cutoff, overview, overview_index, **kwargs)
        +to_file(path, driver, band)
        +to_crs(to_epsg, method, maintain_alignment)
        +resample(cell_size, method)
        +align(alignment_src)
        +crop(mask, touch)
        +merge(src, dst, no_data_value, init, n)
        +apply(ufunc)
        +overlay(classes_map, exclude_value)
    }



    %% Driver catalog
    class _utils_Catalog {
    }

    %% NetCDF
    class NetCDF {
    }

    %% error classes
    class _errors_ReadOnlyError
    class _errors_DatasetNoFoundError
    class _errors_NoDataValueError
    class _errors_AlignmentError
    class _errors_DriverNotExistError
    class _errors_FileFormatNotSupported
    class _errors_OptionalPackageDoesNotExist
    class _errors_FailedToSaveError
    class _errors_OutOfBoundsError

    %% inheritance relations
    AbstractDataset &lt;|-- Dataset
    Dataset &lt;|-- NetCDF

    %% composition/usage relations
    AbstractDataset ..&gt; _utils_Catalog : "uses Catalog constant"
    AbstractDataset ..&gt; featurecollection_FeatureCollection : "vector ops"
    Dataset ..&gt; featurecollection_FeatureCollection : "vector ops"
    Dataset ..&gt; _errors_ReadOnlyError : "raises"
    Dataset ..&gt; _errors_AlignmentError : "raises"
    Dataset ..&gt; _errors_NoDataValueError : "raises"
    Dataset ..&gt; _errors_FailedToSaveError : "raises"
    Dataset ..&gt; _errors_OutOfBoundsError : "raises"
    NetCDF ..&gt; _errors_OptionalPackageDoesNotExist : "raises"
    Config ..&gt; Dataset : "initialises raster settings"
</code></pre> 
    
</div>
<div class="panzoom-box" data-key="ctrl" id="panzoom0" oncontextmenu="return false;">
    <div class="panzoom-info-box panzoom-info-box-top panzoom-hidden">
Hold "Ctrl" to enable pan &amp; zoom
</div>
    <nav class="panzoom-nav panzoom-top-nav">
    <button class="panzoom-info panzoom-button">
    <svg class="panzoom-icon" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
        <path d="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm169.8-90.7c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"></path>
    </svg>
</button><button class="panzoom-reset panzoom-button">
    <svg class="panzoom-icon" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
        <path d="M125.7 160l50.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L48 224c-17.7 0-32-14.3-32-32L16 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 51.2L97.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L125.7 160z"></path>
    </svg>
</button><button class="panzoom-max panzoom-button">
    <svg class="panzoom-icon" viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
        <path d="M32 32C14.3 32 0 46.3 0 64l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96z"></path>
    </svg>
</button><button class="panzoom-min panzoom-button panzoom-hidden">
    <svg class="panzoom-icon" viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
        <path d="M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 320c-17.7 0-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0z"></path>
    </svg>
</button>
    </nav>
    <pre class="mermaid"><code>classDiagram

    %% Central dataset class with its main attributes
    class Dataset {
        +raster
        +cell_size
        +values
        +shape
        +rows
        +columns
        +pivot_point
        +geotransform
        +bounds
        +bbox
        +epsg
        +crs
        +lon
        +lat
        +x
        +y
        +band_count
        +band_names
        +variables
        +no_data_value
        +meta_data
        +dtype
        +gdal_dtype
        +numpy_dtype
        +file_name
        +time_stamp
        +driver_type
    }

    %% Group: visualisation functionality
    class Visualization {
        +plot()
        +overview_count()
        +read_overview_array()
        +create_overviews()
        +recreate_overviews()
        +get_overview()
    }
    Dataset --&gt; Visualization : visualisation

    %% Group: data access methods
    class AccessData {
        +read_array()
        +get_variables()
        +count_domain_cells()
        +get_band_names()
        +extract()
        +stats()
    }
    Dataset --&gt; AccessData : data access

    %% Group: mathematical operations on raster values
    class MathOperations {
        +apply()
        +fill()
        +normalize()
        +cluster()
        +cluster2()
        +get_tile()
        +groupNeighbours()
    }
    Dataset --&gt; MathOperations : math ops

    %% Group: spatial operations and reprojection
    class SpatialOperations {
        +to_crs()
        +resample()
        +align()
        +crop()
        +locate_points()
        +overlay()
        +extract()
        +footprint()
    }
    Dataset --&gt; SpatialOperations : spatial ops

    %% Group: conversion to other data types
    class Conversion {
        +to_feature_collection()
    }
    Dataset --&gt; Conversion : conversion

    %% Group: coordinate system handling
    class OSR {
        +create_sr_from_epsg()
    }
    Dataset --&gt; OSR : osr

    %% Group: boundingbox and bounds calculations
    class BBoxBounds {
        +calculate_bbox()
        +calculate_bounds()
    }
    Dataset --&gt; BBoxBounds : bbox/bounds

    %% Group: CRS/EPSG getters
    class CrsEpsg {
        +get_crs()
        +get_epsg()
    }
    Dataset --&gt; CrsEpsg : crs/epsg

    %% Group: latitude/longitude getters
    class LatLon {
        +get_lat_lon()
    }
    Dataset --&gt; LatLon : lat/lon

    %% Group: band names management
    class BandNames {
        +get_band_names_internal()
        +set_band_names()
    }
    Dataset --&gt; BandNames : band names

    %% Group: timestamp handling
    class TimeStamp {
        +get_time_variable()
        +read_variable()
    }
    Dataset --&gt; TimeStamp : time

    %% Group: handling of nodata values
    class NoDataValue {
        +set_no_data_value()
        +set_no_data_value_backend()
        +change_no_data_value_attr()
    }
    Dataset --&gt; NoDataValue : no data value

    %% Group: helpers for creating GDAL datasets
    class GdalDataset {
        +create_empty_driver()
        +create_driver_from_scratch()
        +create_mem_gtiff_dataset()
    }
    Dataset --&gt; GdalDataset : gdal creation

    %% Group: factory methods for creating Dataset objects
    class CreateObject {
        +from_gdal_dataset()
        +read_file()
        +create_from_array()
        +dataset_like()
    }
    Dataset --&gt; CreateObject : object factory
</code></pre> 
    
</div>


<div class="doc doc-object doc-class">



<h3 id="pyramids.dataset.Dataset" class="doc doc-heading"><a href="#pyramids.dataset.Dataset" class="toclink">
            <code>pyramids.dataset.Dataset</code>


</a><a href="#pyramids.dataset.Dataset" class="headerlink" title="Permanent link">#</a></h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pyramids.abstract_dataset.AbstractDataset">AbstractDataset</span></code></p>


        <p>Dataset.</p>
<p>The Dataset class contains methods to deal with raster and netcdf files, change projection and coordinate systems.</p>








              <details class="quote">
                <summary>Source code in <code>pyramids/dataset.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-51">  51</a></span>
<span class="normal"><a href="#__codelineno-0-52">  52</a></span>
<span class="normal"><a href="#__codelineno-0-53">  53</a></span>
<span class="normal"><a href="#__codelineno-0-54">  54</a></span>
<span class="normal"><a href="#__codelineno-0-55">  55</a></span>
<span class="normal"><a href="#__codelineno-0-56">  56</a></span>
<span class="normal"><a href="#__codelineno-0-57">  57</a></span>
<span class="normal"><a href="#__codelineno-0-58">  58</a></span>
<span class="normal"><a href="#__codelineno-0-59">  59</a></span>
<span class="normal"><a href="#__codelineno-0-60">  60</a></span>
<span class="normal"><a href="#__codelineno-0-61">  61</a></span>
<span class="normal"><a href="#__codelineno-0-62">  62</a></span>
<span class="normal"><a href="#__codelineno-0-63">  63</a></span>
<span class="normal"><a href="#__codelineno-0-64">  64</a></span>
<span class="normal"><a href="#__codelineno-0-65">  65</a></span>
<span class="normal"><a href="#__codelineno-0-66">  66</a></span>
<span class="normal"><a href="#__codelineno-0-67">  67</a></span>
<span class="normal"><a href="#__codelineno-0-68">  68</a></span>
<span class="normal"><a href="#__codelineno-0-69">  69</a></span>
<span class="normal"><a href="#__codelineno-0-70">  70</a></span>
<span class="normal"><a href="#__codelineno-0-71">  71</a></span>
<span class="normal"><a href="#__codelineno-0-72">  72</a></span>
<span class="normal"><a href="#__codelineno-0-73">  73</a></span>
<span class="normal"><a href="#__codelineno-0-74">  74</a></span>
<span class="normal"><a href="#__codelineno-0-75">  75</a></span>
<span class="normal"><a href="#__codelineno-0-76">  76</a></span>
<span class="normal"><a href="#__codelineno-0-77">  77</a></span>
<span class="normal"><a href="#__codelineno-0-78">  78</a></span>
<span class="normal"><a href="#__codelineno-0-79">  79</a></span>
<span class="normal"><a href="#__codelineno-0-80">  80</a></span>
<span class="normal"><a href="#__codelineno-0-81">  81</a></span>
<span class="normal"><a href="#__codelineno-0-82">  82</a></span>
<span class="normal"><a href="#__codelineno-0-83">  83</a></span>
<span class="normal"><a href="#__codelineno-0-84">  84</a></span>
<span class="normal"><a href="#__codelineno-0-85">  85</a></span>
<span class="normal"><a href="#__codelineno-0-86">  86</a></span>
<span class="normal"><a href="#__codelineno-0-87">  87</a></span>
<span class="normal"><a href="#__codelineno-0-88">  88</a></span>
<span class="normal"><a href="#__codelineno-0-89">  89</a></span>
<span class="normal"><a href="#__codelineno-0-90">  90</a></span>
<span class="normal"><a href="#__codelineno-0-91">  91</a></span>
<span class="normal"><a href="#__codelineno-0-92">  92</a></span>
<span class="normal"><a href="#__codelineno-0-93">  93</a></span>
<span class="normal"><a href="#__codelineno-0-94">  94</a></span>
<span class="normal"><a href="#__codelineno-0-95">  95</a></span>
<span class="normal"><a href="#__codelineno-0-96">  96</a></span>
<span class="normal"><a href="#__codelineno-0-97">  97</a></span>
<span class="normal"><a href="#__codelineno-0-98">  98</a></span>
<span class="normal"><a href="#__codelineno-0-99">  99</a></span>
<span class="normal"><a href="#__codelineno-0-100"> 100</a></span>
<span class="normal"><a href="#__codelineno-0-101"> 101</a></span>
<span class="normal"><a href="#__codelineno-0-102"> 102</a></span>
<span class="normal"><a href="#__codelineno-0-103"> 103</a></span>
<span class="normal"><a href="#__codelineno-0-104"> 104</a></span>
<span class="normal"><a href="#__codelineno-0-105"> 105</a></span>
<span class="normal"><a href="#__codelineno-0-106"> 106</a></span>
<span class="normal"><a href="#__codelineno-0-107"> 107</a></span>
<span class="normal"><a href="#__codelineno-0-108"> 108</a></span>
<span class="normal"><a href="#__codelineno-0-109"> 109</a></span>
<span class="normal"><a href="#__codelineno-0-110"> 110</a></span>
<span class="normal"><a href="#__codelineno-0-111"> 111</a></span>
<span class="normal"><a href="#__codelineno-0-112"> 112</a></span>
<span class="normal"><a href="#__codelineno-0-113"> 113</a></span>
<span class="normal"><a href="#__codelineno-0-114"> 114</a></span>
<span class="normal"><a href="#__codelineno-0-115"> 115</a></span>
<span class="normal"><a href="#__codelineno-0-116"> 116</a></span>
<span class="normal"><a href="#__codelineno-0-117"> 117</a></span>
<span class="normal"><a href="#__codelineno-0-118"> 118</a></span>
<span class="normal"><a href="#__codelineno-0-119"> 119</a></span>
<span class="normal"><a href="#__codelineno-0-120"> 120</a></span>
<span class="normal"><a href="#__codelineno-0-121"> 121</a></span>
<span class="normal"><a href="#__codelineno-0-122"> 122</a></span>
<span class="normal"><a href="#__codelineno-0-123"> 123</a></span>
<span class="normal"><a href="#__codelineno-0-124"> 124</a></span>
<span class="normal"><a href="#__codelineno-0-125"> 125</a></span>
<span class="normal"><a href="#__codelineno-0-126"> 126</a></span>
<span class="normal"><a href="#__codelineno-0-127"> 127</a></span>
<span class="normal"><a href="#__codelineno-0-128"> 128</a></span>
<span class="normal"><a href="#__codelineno-0-129"> 129</a></span>
<span class="normal"><a href="#__codelineno-0-130"> 130</a></span>
<span class="normal"><a href="#__codelineno-0-131"> 131</a></span>
<span class="normal"><a href="#__codelineno-0-132"> 132</a></span>
<span class="normal"><a href="#__codelineno-0-133"> 133</a></span>
<span class="normal"><a href="#__codelineno-0-134"> 134</a></span>
<span class="normal"><a href="#__codelineno-0-135"> 135</a></span>
<span class="normal"><a href="#__codelineno-0-136"> 136</a></span>
<span class="normal"><a href="#__codelineno-0-137"> 137</a></span>
<span class="normal"><a href="#__codelineno-0-138"> 138</a></span>
<span class="normal"><a href="#__codelineno-0-139"> 139</a></span>
<span class="normal"><a href="#__codelineno-0-140"> 140</a></span>
<span class="normal"><a href="#__codelineno-0-141"> 141</a></span>
<span class="normal"><a href="#__codelineno-0-142"> 142</a></span>
<span class="normal"><a href="#__codelineno-0-143"> 143</a></span>
<span class="normal"><a href="#__codelineno-0-144"> 144</a></span>
<span class="normal"><a href="#__codelineno-0-145"> 145</a></span>
<span class="normal"><a href="#__codelineno-0-146"> 146</a></span>
<span class="normal"><a href="#__codelineno-0-147"> 147</a></span>
<span class="normal"><a href="#__codelineno-0-148"> 148</a></span>
<span class="normal"><a href="#__codelineno-0-149"> 149</a></span>
<span class="normal"><a href="#__codelineno-0-150"> 150</a></span>
<span class="normal"><a href="#__codelineno-0-151"> 151</a></span>
<span class="normal"><a href="#__codelineno-0-152"> 152</a></span>
<span class="normal"><a href="#__codelineno-0-153"> 153</a></span>
<span class="normal"><a href="#__codelineno-0-154"> 154</a></span>
<span class="normal"><a href="#__codelineno-0-155"> 155</a></span>
<span class="normal"><a href="#__codelineno-0-156"> 156</a></span>
<span class="normal"><a href="#__codelineno-0-157"> 157</a></span>
<span class="normal"><a href="#__codelineno-0-158"> 158</a></span>
<span class="normal"><a href="#__codelineno-0-159"> 159</a></span>
<span class="normal"><a href="#__codelineno-0-160"> 160</a></span>
<span class="normal"><a href="#__codelineno-0-161"> 161</a></span>
<span class="normal"><a href="#__codelineno-0-162"> 162</a></span>
<span class="normal"><a href="#__codelineno-0-163"> 163</a></span>
<span class="normal"><a href="#__codelineno-0-164"> 164</a></span>
<span class="normal"><a href="#__codelineno-0-165"> 165</a></span>
<span class="normal"><a href="#__codelineno-0-166"> 166</a></span>
<span class="normal"><a href="#__codelineno-0-167"> 167</a></span>
<span class="normal"><a href="#__codelineno-0-168"> 168</a></span>
<span class="normal"><a href="#__codelineno-0-169"> 169</a></span>
<span class="normal"><a href="#__codelineno-0-170"> 170</a></span>
<span class="normal"><a href="#__codelineno-0-171"> 171</a></span>
<span class="normal"><a href="#__codelineno-0-172"> 172</a></span>
<span class="normal"><a href="#__codelineno-0-173"> 173</a></span>
<span class="normal"><a href="#__codelineno-0-174"> 174</a></span>
<span class="normal"><a href="#__codelineno-0-175"> 175</a></span>
<span class="normal"><a href="#__codelineno-0-176"> 176</a></span>
<span class="normal"><a href="#__codelineno-0-177"> 177</a></span>
<span class="normal"><a href="#__codelineno-0-178"> 178</a></span>
<span class="normal"><a href="#__codelineno-0-179"> 179</a></span>
<span class="normal"><a href="#__codelineno-0-180"> 180</a></span>
<span class="normal"><a href="#__codelineno-0-181"> 181</a></span>
<span class="normal"><a href="#__codelineno-0-182"> 182</a></span>
<span class="normal"><a href="#__codelineno-0-183"> 183</a></span>
<span class="normal"><a href="#__codelineno-0-184"> 184</a></span>
<span class="normal"><a href="#__codelineno-0-185"> 185</a></span>
<span class="normal"><a href="#__codelineno-0-186"> 186</a></span>
<span class="normal"><a href="#__codelineno-0-187"> 187</a></span>
<span class="normal"><a href="#__codelineno-0-188"> 188</a></span>
<span class="normal"><a href="#__codelineno-0-189"> 189</a></span>
<span class="normal"><a href="#__codelineno-0-190"> 190</a></span>
<span class="normal"><a href="#__codelineno-0-191"> 191</a></span>
<span class="normal"><a href="#__codelineno-0-192"> 192</a></span>
<span class="normal"><a href="#__codelineno-0-193"> 193</a></span>
<span class="normal"><a href="#__codelineno-0-194"> 194</a></span>
<span class="normal"><a href="#__codelineno-0-195"> 195</a></span>
<span class="normal"><a href="#__codelineno-0-196"> 196</a></span>
<span class="normal"><a href="#__codelineno-0-197"> 197</a></span>
<span class="normal"><a href="#__codelineno-0-198"> 198</a></span>
<span class="normal"><a href="#__codelineno-0-199"> 199</a></span>
<span class="normal"><a href="#__codelineno-0-200"> 200</a></span>
<span class="normal"><a href="#__codelineno-0-201"> 201</a></span>
<span class="normal"><a href="#__codelineno-0-202"> 202</a></span>
<span class="normal"><a href="#__codelineno-0-203"> 203</a></span>
<span class="normal"><a href="#__codelineno-0-204"> 204</a></span>
<span class="normal"><a href="#__codelineno-0-205"> 205</a></span>
<span class="normal"><a href="#__codelineno-0-206"> 206</a></span>
<span class="normal"><a href="#__codelineno-0-207"> 207</a></span>
<span class="normal"><a href="#__codelineno-0-208"> 208</a></span>
<span class="normal"><a href="#__codelineno-0-209"> 209</a></span>
<span class="normal"><a href="#__codelineno-0-210"> 210</a></span>
<span class="normal"><a href="#__codelineno-0-211"> 211</a></span>
<span class="normal"><a href="#__codelineno-0-212"> 212</a></span>
<span class="normal"><a href="#__codelineno-0-213"> 213</a></span>
<span class="normal"><a href="#__codelineno-0-214"> 214</a></span>
<span class="normal"><a href="#__codelineno-0-215"> 215</a></span>
<span class="normal"><a href="#__codelineno-0-216"> 216</a></span>
<span class="normal"><a href="#__codelineno-0-217"> 217</a></span>
<span class="normal"><a href="#__codelineno-0-218"> 218</a></span>
<span class="normal"><a href="#__codelineno-0-219"> 219</a></span>
<span class="normal"><a href="#__codelineno-0-220"> 220</a></span>
<span class="normal"><a href="#__codelineno-0-221"> 221</a></span>
<span class="normal"><a href="#__codelineno-0-222"> 222</a></span>
<span class="normal"><a href="#__codelineno-0-223"> 223</a></span>
<span class="normal"><a href="#__codelineno-0-224"> 224</a></span>
<span class="normal"><a href="#__codelineno-0-225"> 225</a></span>
<span class="normal"><a href="#__codelineno-0-226"> 226</a></span>
<span class="normal"><a href="#__codelineno-0-227"> 227</a></span>
<span class="normal"><a href="#__codelineno-0-228"> 228</a></span>
<span class="normal"><a href="#__codelineno-0-229"> 229</a></span>
<span class="normal"><a href="#__codelineno-0-230"> 230</a></span>
<span class="normal"><a href="#__codelineno-0-231"> 231</a></span>
<span class="normal"><a href="#__codelineno-0-232"> 232</a></span>
<span class="normal"><a href="#__codelineno-0-233"> 233</a></span>
<span class="normal"><a href="#__codelineno-0-234"> 234</a></span>
<span class="normal"><a href="#__codelineno-0-235"> 235</a></span>
<span class="normal"><a href="#__codelineno-0-236"> 236</a></span>
<span class="normal"><a href="#__codelineno-0-237"> 237</a></span>
<span class="normal"><a href="#__codelineno-0-238"> 238</a></span>
<span class="normal"><a href="#__codelineno-0-239"> 239</a></span>
<span class="normal"><a href="#__codelineno-0-240"> 240</a></span>
<span class="normal"><a href="#__codelineno-0-241"> 241</a></span>
<span class="normal"><a href="#__codelineno-0-242"> 242</a></span>
<span class="normal"><a href="#__codelineno-0-243"> 243</a></span>
<span class="normal"><a href="#__codelineno-0-244"> 244</a></span>
<span class="normal"><a href="#__codelineno-0-245"> 245</a></span>
<span class="normal"><a href="#__codelineno-0-246"> 246</a></span>
<span class="normal"><a href="#__codelineno-0-247"> 247</a></span>
<span class="normal"><a href="#__codelineno-0-248"> 248</a></span>
<span class="normal"><a href="#__codelineno-0-249"> 249</a></span>
<span class="normal"><a href="#__codelineno-0-250"> 250</a></span>
<span class="normal"><a href="#__codelineno-0-251"> 251</a></span>
<span class="normal"><a href="#__codelineno-0-252"> 252</a></span>
<span class="normal"><a href="#__codelineno-0-253"> 253</a></span>
<span class="normal"><a href="#__codelineno-0-254"> 254</a></span>
<span class="normal"><a href="#__codelineno-0-255"> 255</a></span>
<span class="normal"><a href="#__codelineno-0-256"> 256</a></span>
<span class="normal"><a href="#__codelineno-0-257"> 257</a></span>
<span class="normal"><a href="#__codelineno-0-258"> 258</a></span>
<span class="normal"><a href="#__codelineno-0-259"> 259</a></span>
<span class="normal"><a href="#__codelineno-0-260"> 260</a></span>
<span class="normal"><a href="#__codelineno-0-261"> 261</a></span>
<span class="normal"><a href="#__codelineno-0-262"> 262</a></span>
<span class="normal"><a href="#__codelineno-0-263"> 263</a></span>
<span class="normal"><a href="#__codelineno-0-264"> 264</a></span>
<span class="normal"><a href="#__codelineno-0-265"> 265</a></span>
<span class="normal"><a href="#__codelineno-0-266"> 266</a></span>
<span class="normal"><a href="#__codelineno-0-267"> 267</a></span>
<span class="normal"><a href="#__codelineno-0-268"> 268</a></span>
<span class="normal"><a href="#__codelineno-0-269"> 269</a></span>
<span class="normal"><a href="#__codelineno-0-270"> 270</a></span>
<span class="normal"><a href="#__codelineno-0-271"> 271</a></span>
<span class="normal"><a href="#__codelineno-0-272"> 272</a></span>
<span class="normal"><a href="#__codelineno-0-273"> 273</a></span>
<span class="normal"><a href="#__codelineno-0-274"> 274</a></span>
<span class="normal"><a href="#__codelineno-0-275"> 275</a></span>
<span class="normal"><a href="#__codelineno-0-276"> 276</a></span>
<span class="normal"><a href="#__codelineno-0-277"> 277</a></span>
<span class="normal"><a href="#__codelineno-0-278"> 278</a></span>
<span class="normal"><a href="#__codelineno-0-279"> 279</a></span>
<span class="normal"><a href="#__codelineno-0-280"> 280</a></span>
<span class="normal"><a href="#__codelineno-0-281"> 281</a></span>
<span class="normal"><a href="#__codelineno-0-282"> 282</a></span>
<span class="normal"><a href="#__codelineno-0-283"> 283</a></span>
<span class="normal"><a href="#__codelineno-0-284"> 284</a></span>
<span class="normal"><a href="#__codelineno-0-285"> 285</a></span>
<span class="normal"><a href="#__codelineno-0-286"> 286</a></span>
<span class="normal"><a href="#__codelineno-0-287"> 287</a></span>
<span class="normal"><a href="#__codelineno-0-288"> 288</a></span>
<span class="normal"><a href="#__codelineno-0-289"> 289</a></span>
<span class="normal"><a href="#__codelineno-0-290"> 290</a></span>
<span class="normal"><a href="#__codelineno-0-291"> 291</a></span>
<span class="normal"><a href="#__codelineno-0-292"> 292</a></span>
<span class="normal"><a href="#__codelineno-0-293"> 293</a></span>
<span class="normal"><a href="#__codelineno-0-294"> 294</a></span>
<span class="normal"><a href="#__codelineno-0-295"> 295</a></span>
<span class="normal"><a href="#__codelineno-0-296"> 296</a></span>
<span class="normal"><a href="#__codelineno-0-297"> 297</a></span>
<span class="normal"><a href="#__codelineno-0-298"> 298</a></span>
<span class="normal"><a href="#__codelineno-0-299"> 299</a></span>
<span class="normal"><a href="#__codelineno-0-300"> 300</a></span>
<span class="normal"><a href="#__codelineno-0-301"> 301</a></span>
<span class="normal"><a href="#__codelineno-0-302"> 302</a></span>
<span class="normal"><a href="#__codelineno-0-303"> 303</a></span>
<span class="normal"><a href="#__codelineno-0-304"> 304</a></span>
<span class="normal"><a href="#__codelineno-0-305"> 305</a></span>
<span class="normal"><a href="#__codelineno-0-306"> 306</a></span>
<span class="normal"><a href="#__codelineno-0-307"> 307</a></span>
<span class="normal"><a href="#__codelineno-0-308"> 308</a></span>
<span class="normal"><a href="#__codelineno-0-309"> 309</a></span>
<span class="normal"><a href="#__codelineno-0-310"> 310</a></span>
<span class="normal"><a href="#__codelineno-0-311"> 311</a></span>
<span class="normal"><a href="#__codelineno-0-312"> 312</a></span>
<span class="normal"><a href="#__codelineno-0-313"> 313</a></span>
<span class="normal"><a href="#__codelineno-0-314"> 314</a></span>
<span class="normal"><a href="#__codelineno-0-315"> 315</a></span>
<span class="normal"><a href="#__codelineno-0-316"> 316</a></span>
<span class="normal"><a href="#__codelineno-0-317"> 317</a></span>
<span class="normal"><a href="#__codelineno-0-318"> 318</a></span>
<span class="normal"><a href="#__codelineno-0-319"> 319</a></span>
<span class="normal"><a href="#__codelineno-0-320"> 320</a></span>
<span class="normal"><a href="#__codelineno-0-321"> 321</a></span>
<span class="normal"><a href="#__codelineno-0-322"> 322</a></span>
<span class="normal"><a href="#__codelineno-0-323"> 323</a></span>
<span class="normal"><a href="#__codelineno-0-324"> 324</a></span>
<span class="normal"><a href="#__codelineno-0-325"> 325</a></span>
<span class="normal"><a href="#__codelineno-0-326"> 326</a></span>
<span class="normal"><a href="#__codelineno-0-327"> 327</a></span>
<span class="normal"><a href="#__codelineno-0-328"> 328</a></span>
<span class="normal"><a href="#__codelineno-0-329"> 329</a></span>
<span class="normal"><a href="#__codelineno-0-330"> 330</a></span>
<span class="normal"><a href="#__codelineno-0-331"> 331</a></span>
<span class="normal"><a href="#__codelineno-0-332"> 332</a></span>
<span class="normal"><a href="#__codelineno-0-333"> 333</a></span>
<span class="normal"><a href="#__codelineno-0-334"> 334</a></span>
<span class="normal"><a href="#__codelineno-0-335"> 335</a></span>
<span class="normal"><a href="#__codelineno-0-336"> 336</a></span>
<span class="normal"><a href="#__codelineno-0-337"> 337</a></span>
<span class="normal"><a href="#__codelineno-0-338"> 338</a></span>
<span class="normal"><a href="#__codelineno-0-339"> 339</a></span>
<span class="normal"><a href="#__codelineno-0-340"> 340</a></span>
<span class="normal"><a href="#__codelineno-0-341"> 341</a></span>
<span class="normal"><a href="#__codelineno-0-342"> 342</a></span>
<span class="normal"><a href="#__codelineno-0-343"> 343</a></span>
<span class="normal"><a href="#__codelineno-0-344"> 344</a></span>
<span class="normal"><a href="#__codelineno-0-345"> 345</a></span>
<span class="normal"><a href="#__codelineno-0-346"> 346</a></span>
<span class="normal"><a href="#__codelineno-0-347"> 347</a></span>
<span class="normal"><a href="#__codelineno-0-348"> 348</a></span>
<span class="normal"><a href="#__codelineno-0-349"> 349</a></span>
<span class="normal"><a href="#__codelineno-0-350"> 350</a></span>
<span class="normal"><a href="#__codelineno-0-351"> 351</a></span>
<span class="normal"><a href="#__codelineno-0-352"> 352</a></span>
<span class="normal"><a href="#__codelineno-0-353"> 353</a></span>
<span class="normal"><a href="#__codelineno-0-354"> 354</a></span>
<span class="normal"><a href="#__codelineno-0-355"> 355</a></span>
<span class="normal"><a href="#__codelineno-0-356"> 356</a></span>
<span class="normal"><a href="#__codelineno-0-357"> 357</a></span>
<span class="normal"><a href="#__codelineno-0-358"> 358</a></span>
<span class="normal"><a href="#__codelineno-0-359"> 359</a></span>
<span class="normal"><a href="#__codelineno-0-360"> 360</a></span>
<span class="normal"><a href="#__codelineno-0-361"> 361</a></span>
<span class="normal"><a href="#__codelineno-0-362"> 362</a></span>
<span class="normal"><a href="#__codelineno-0-363"> 363</a></span>
<span class="normal"><a href="#__codelineno-0-364"> 364</a></span>
<span class="normal"><a href="#__codelineno-0-365"> 365</a></span>
<span class="normal"><a href="#__codelineno-0-366"> 366</a></span>
<span class="normal"><a href="#__codelineno-0-367"> 367</a></span>
<span class="normal"><a href="#__codelineno-0-368"> 368</a></span>
<span class="normal"><a href="#__codelineno-0-369"> 369</a></span>
<span class="normal"><a href="#__codelineno-0-370"> 370</a></span>
<span class="normal"><a href="#__codelineno-0-371"> 371</a></span>
<span class="normal"><a href="#__codelineno-0-372"> 372</a></span>
<span class="normal"><a href="#__codelineno-0-373"> 373</a></span>
<span class="normal"><a href="#__codelineno-0-374"> 374</a></span>
<span class="normal"><a href="#__codelineno-0-375"> 375</a></span>
<span class="normal"><a href="#__codelineno-0-376"> 376</a></span>
<span class="normal"><a href="#__codelineno-0-377"> 377</a></span>
<span class="normal"><a href="#__codelineno-0-378"> 378</a></span>
<span class="normal"><a href="#__codelineno-0-379"> 379</a></span>
<span class="normal"><a href="#__codelineno-0-380"> 380</a></span>
<span class="normal"><a href="#__codelineno-0-381"> 381</a></span>
<span class="normal"><a href="#__codelineno-0-382"> 382</a></span>
<span class="normal"><a href="#__codelineno-0-383"> 383</a></span>
<span class="normal"><a href="#__codelineno-0-384"> 384</a></span>
<span class="normal"><a href="#__codelineno-0-385"> 385</a></span>
<span class="normal"><a href="#__codelineno-0-386"> 386</a></span>
<span class="normal"><a href="#__codelineno-0-387"> 387</a></span>
<span class="normal"><a href="#__codelineno-0-388"> 388</a></span>
<span class="normal"><a href="#__codelineno-0-389"> 389</a></span>
<span class="normal"><a href="#__codelineno-0-390"> 390</a></span>
<span class="normal"><a href="#__codelineno-0-391"> 391</a></span>
<span class="normal"><a href="#__codelineno-0-392"> 392</a></span>
<span class="normal"><a href="#__codelineno-0-393"> 393</a></span>
<span class="normal"><a href="#__codelineno-0-394"> 394</a></span>
<span class="normal"><a href="#__codelineno-0-395"> 395</a></span>
<span class="normal"><a href="#__codelineno-0-396"> 396</a></span>
<span class="normal"><a href="#__codelineno-0-397"> 397</a></span>
<span class="normal"><a href="#__codelineno-0-398"> 398</a></span>
<span class="normal"><a href="#__codelineno-0-399"> 399</a></span>
<span class="normal"><a href="#__codelineno-0-400"> 400</a></span>
<span class="normal"><a href="#__codelineno-0-401"> 401</a></span>
<span class="normal"><a href="#__codelineno-0-402"> 402</a></span>
<span class="normal"><a href="#__codelineno-0-403"> 403</a></span>
<span class="normal"><a href="#__codelineno-0-404"> 404</a></span>
<span class="normal"><a href="#__codelineno-0-405"> 405</a></span>
<span class="normal"><a href="#__codelineno-0-406"> 406</a></span>
<span class="normal"><a href="#__codelineno-0-407"> 407</a></span>
<span class="normal"><a href="#__codelineno-0-408"> 408</a></span>
<span class="normal"><a href="#__codelineno-0-409"> 409</a></span>
<span class="normal"><a href="#__codelineno-0-410"> 410</a></span>
<span class="normal"><a href="#__codelineno-0-411"> 411</a></span>
<span class="normal"><a href="#__codelineno-0-412"> 412</a></span>
<span class="normal"><a href="#__codelineno-0-413"> 413</a></span>
<span class="normal"><a href="#__codelineno-0-414"> 414</a></span>
<span class="normal"><a href="#__codelineno-0-415"> 415</a></span>
<span class="normal"><a href="#__codelineno-0-416"> 416</a></span>
<span class="normal"><a href="#__codelineno-0-417"> 417</a></span>
<span class="normal"><a href="#__codelineno-0-418"> 418</a></span>
<span class="normal"><a href="#__codelineno-0-419"> 419</a></span>
<span class="normal"><a href="#__codelineno-0-420"> 420</a></span>
<span class="normal"><a href="#__codelineno-0-421"> 421</a></span>
<span class="normal"><a href="#__codelineno-0-422"> 422</a></span>
<span class="normal"><a href="#__codelineno-0-423"> 423</a></span>
<span class="normal"><a href="#__codelineno-0-424"> 424</a></span>
<span class="normal"><a href="#__codelineno-0-425"> 425</a></span>
<span class="normal"><a href="#__codelineno-0-426"> 426</a></span>
<span class="normal"><a href="#__codelineno-0-427"> 427</a></span>
<span class="normal"><a href="#__codelineno-0-428"> 428</a></span>
<span class="normal"><a href="#__codelineno-0-429"> 429</a></span>
<span class="normal"><a href="#__codelineno-0-430"> 430</a></span>
<span class="normal"><a href="#__codelineno-0-431"> 431</a></span>
<span class="normal"><a href="#__codelineno-0-432"> 432</a></span>
<span class="normal"><a href="#__codelineno-0-433"> 433</a></span>
<span class="normal"><a href="#__codelineno-0-434"> 434</a></span>
<span class="normal"><a href="#__codelineno-0-435"> 435</a></span>
<span class="normal"><a href="#__codelineno-0-436"> 436</a></span>
<span class="normal"><a href="#__codelineno-0-437"> 437</a></span>
<span class="normal"><a href="#__codelineno-0-438"> 438</a></span>
<span class="normal"><a href="#__codelineno-0-439"> 439</a></span>
<span class="normal"><a href="#__codelineno-0-440"> 440</a></span>
<span class="normal"><a href="#__codelineno-0-441"> 441</a></span>
<span class="normal"><a href="#__codelineno-0-442"> 442</a></span>
<span class="normal"><a href="#__codelineno-0-443"> 443</a></span>
<span class="normal"><a href="#__codelineno-0-444"> 444</a></span>
<span class="normal"><a href="#__codelineno-0-445"> 445</a></span>
<span class="normal"><a href="#__codelineno-0-446"> 446</a></span>
<span class="normal"><a href="#__codelineno-0-447"> 447</a></span>
<span class="normal"><a href="#__codelineno-0-448"> 448</a></span>
<span class="normal"><a href="#__codelineno-0-449"> 449</a></span>
<span class="normal"><a href="#__codelineno-0-450"> 450</a></span>
<span class="normal"><a href="#__codelineno-0-451"> 451</a></span>
<span class="normal"><a href="#__codelineno-0-452"> 452</a></span>
<span class="normal"><a href="#__codelineno-0-453"> 453</a></span>
<span class="normal"><a href="#__codelineno-0-454"> 454</a></span>
<span class="normal"><a href="#__codelineno-0-455"> 455</a></span>
<span class="normal"><a href="#__codelineno-0-456"> 456</a></span>
<span class="normal"><a href="#__codelineno-0-457"> 457</a></span>
<span class="normal"><a href="#__codelineno-0-458"> 458</a></span>
<span class="normal"><a href="#__codelineno-0-459"> 459</a></span>
<span class="normal"><a href="#__codelineno-0-460"> 460</a></span>
<span class="normal"><a href="#__codelineno-0-461"> 461</a></span>
<span class="normal"><a href="#__codelineno-0-462"> 462</a></span>
<span class="normal"><a href="#__codelineno-0-463"> 463</a></span>
<span class="normal"><a href="#__codelineno-0-464"> 464</a></span>
<span class="normal"><a href="#__codelineno-0-465"> 465</a></span>
<span class="normal"><a href="#__codelineno-0-466"> 466</a></span>
<span class="normal"><a href="#__codelineno-0-467"> 467</a></span>
<span class="normal"><a href="#__codelineno-0-468"> 468</a></span>
<span class="normal"><a href="#__codelineno-0-469"> 469</a></span>
<span class="normal"><a href="#__codelineno-0-470"> 470</a></span>
<span class="normal"><a href="#__codelineno-0-471"> 471</a></span>
<span class="normal"><a href="#__codelineno-0-472"> 472</a></span>
<span class="normal"><a href="#__codelineno-0-473"> 473</a></span>
<span class="normal"><a href="#__codelineno-0-474"> 474</a></span>
<span class="normal"><a href="#__codelineno-0-475"> 475</a></span>
<span class="normal"><a href="#__codelineno-0-476"> 476</a></span>
<span class="normal"><a href="#__codelineno-0-477"> 477</a></span>
<span class="normal"><a href="#__codelineno-0-478"> 478</a></span>
<span class="normal"><a href="#__codelineno-0-479"> 479</a></span>
<span class="normal"><a href="#__codelineno-0-480"> 480</a></span>
<span class="normal"><a href="#__codelineno-0-481"> 481</a></span>
<span class="normal"><a href="#__codelineno-0-482"> 482</a></span>
<span class="normal"><a href="#__codelineno-0-483"> 483</a></span>
<span class="normal"><a href="#__codelineno-0-484"> 484</a></span>
<span class="normal"><a href="#__codelineno-0-485"> 485</a></span>
<span class="normal"><a href="#__codelineno-0-486"> 486</a></span>
<span class="normal"><a href="#__codelineno-0-487"> 487</a></span>
<span class="normal"><a href="#__codelineno-0-488"> 488</a></span>
<span class="normal"><a href="#__codelineno-0-489"> 489</a></span>
<span class="normal"><a href="#__codelineno-0-490"> 490</a></span>
<span class="normal"><a href="#__codelineno-0-491"> 491</a></span>
<span class="normal"><a href="#__codelineno-0-492"> 492</a></span>
<span class="normal"><a href="#__codelineno-0-493"> 493</a></span>
<span class="normal"><a href="#__codelineno-0-494"> 494</a></span>
<span class="normal"><a href="#__codelineno-0-495"> 495</a></span>
<span class="normal"><a href="#__codelineno-0-496"> 496</a></span>
<span class="normal"><a href="#__codelineno-0-497"> 497</a></span>
<span class="normal"><a href="#__codelineno-0-498"> 498</a></span>
<span class="normal"><a href="#__codelineno-0-499"> 499</a></span>
<span class="normal"><a href="#__codelineno-0-500"> 500</a></span>
<span class="normal"><a href="#__codelineno-0-501"> 501</a></span>
<span class="normal"><a href="#__codelineno-0-502"> 502</a></span>
<span class="normal"><a href="#__codelineno-0-503"> 503</a></span>
<span class="normal"><a href="#__codelineno-0-504"> 504</a></span>
<span class="normal"><a href="#__codelineno-0-505"> 505</a></span>
<span class="normal"><a href="#__codelineno-0-506"> 506</a></span>
<span class="normal"><a href="#__codelineno-0-507"> 507</a></span>
<span class="normal"><a href="#__codelineno-0-508"> 508</a></span>
<span class="normal"><a href="#__codelineno-0-509"> 509</a></span>
<span class="normal"><a href="#__codelineno-0-510"> 510</a></span>
<span class="normal"><a href="#__codelineno-0-511"> 511</a></span>
<span class="normal"><a href="#__codelineno-0-512"> 512</a></span>
<span class="normal"><a href="#__codelineno-0-513"> 513</a></span>
<span class="normal"><a href="#__codelineno-0-514"> 514</a></span>
<span class="normal"><a href="#__codelineno-0-515"> 515</a></span>
<span class="normal"><a href="#__codelineno-0-516"> 516</a></span>
<span class="normal"><a href="#__codelineno-0-517"> 517</a></span>
<span class="normal"><a href="#__codelineno-0-518"> 518</a></span>
<span class="normal"><a href="#__codelineno-0-519"> 519</a></span>
<span class="normal"><a href="#__codelineno-0-520"> 520</a></span>
<span class="normal"><a href="#__codelineno-0-521"> 521</a></span>
<span class="normal"><a href="#__codelineno-0-522"> 522</a></span>
<span class="normal"><a href="#__codelineno-0-523"> 523</a></span>
<span class="normal"><a href="#__codelineno-0-524"> 524</a></span>
<span class="normal"><a href="#__codelineno-0-525"> 525</a></span>
<span class="normal"><a href="#__codelineno-0-526"> 526</a></span>
<span class="normal"><a href="#__codelineno-0-527"> 527</a></span>
<span class="normal"><a href="#__codelineno-0-528"> 528</a></span>
<span class="normal"><a href="#__codelineno-0-529"> 529</a></span>
<span class="normal"><a href="#__codelineno-0-530"> 530</a></span>
<span class="normal"><a href="#__codelineno-0-531"> 531</a></span>
<span class="normal"><a href="#__codelineno-0-532"> 532</a></span>
<span class="normal"><a href="#__codelineno-0-533"> 533</a></span>
<span class="normal"><a href="#__codelineno-0-534"> 534</a></span>
<span class="normal"><a href="#__codelineno-0-535"> 535</a></span>
<span class="normal"><a href="#__codelineno-0-536"> 536</a></span>
<span class="normal"><a href="#__codelineno-0-537"> 537</a></span>
<span class="normal"><a href="#__codelineno-0-538"> 538</a></span>
<span class="normal"><a href="#__codelineno-0-539"> 539</a></span>
<span class="normal"><a href="#__codelineno-0-540"> 540</a></span>
<span class="normal"><a href="#__codelineno-0-541"> 541</a></span>
<span class="normal"><a href="#__codelineno-0-542"> 542</a></span>
<span class="normal"><a href="#__codelineno-0-543"> 543</a></span>
<span class="normal"><a href="#__codelineno-0-544"> 544</a></span>
<span class="normal"><a href="#__codelineno-0-545"> 545</a></span>
<span class="normal"><a href="#__codelineno-0-546"> 546</a></span>
<span class="normal"><a href="#__codelineno-0-547"> 547</a></span>
<span class="normal"><a href="#__codelineno-0-548"> 548</a></span>
<span class="normal"><a href="#__codelineno-0-549"> 549</a></span>
<span class="normal"><a href="#__codelineno-0-550"> 550</a></span>
<span class="normal"><a href="#__codelineno-0-551"> 551</a></span>
<span class="normal"><a href="#__codelineno-0-552"> 552</a></span>
<span class="normal"><a href="#__codelineno-0-553"> 553</a></span>
<span class="normal"><a href="#__codelineno-0-554"> 554</a></span>
<span class="normal"><a href="#__codelineno-0-555"> 555</a></span>
<span class="normal"><a href="#__codelineno-0-556"> 556</a></span>
<span class="normal"><a href="#__codelineno-0-557"> 557</a></span>
<span class="normal"><a href="#__codelineno-0-558"> 558</a></span>
<span class="normal"><a href="#__codelineno-0-559"> 559</a></span>
<span class="normal"><a href="#__codelineno-0-560"> 560</a></span>
<span class="normal"><a href="#__codelineno-0-561"> 561</a></span>
<span class="normal"><a href="#__codelineno-0-562"> 562</a></span>
<span class="normal"><a href="#__codelineno-0-563"> 563</a></span>
<span class="normal"><a href="#__codelineno-0-564"> 564</a></span>
<span class="normal"><a href="#__codelineno-0-565"> 565</a></span>
<span class="normal"><a href="#__codelineno-0-566"> 566</a></span>
<span class="normal"><a href="#__codelineno-0-567"> 567</a></span>
<span class="normal"><a href="#__codelineno-0-568"> 568</a></span>
<span class="normal"><a href="#__codelineno-0-569"> 569</a></span>
<span class="normal"><a href="#__codelineno-0-570"> 570</a></span>
<span class="normal"><a href="#__codelineno-0-571"> 571</a></span>
<span class="normal"><a href="#__codelineno-0-572"> 572</a></span>
<span class="normal"><a href="#__codelineno-0-573"> 573</a></span>
<span class="normal"><a href="#__codelineno-0-574"> 574</a></span>
<span class="normal"><a href="#__codelineno-0-575"> 575</a></span>
<span class="normal"><a href="#__codelineno-0-576"> 576</a></span>
<span class="normal"><a href="#__codelineno-0-577"> 577</a></span>
<span class="normal"><a href="#__codelineno-0-578"> 578</a></span>
<span class="normal"><a href="#__codelineno-0-579"> 579</a></span>
<span class="normal"><a href="#__codelineno-0-580"> 580</a></span>
<span class="normal"><a href="#__codelineno-0-581"> 581</a></span>
<span class="normal"><a href="#__codelineno-0-582"> 582</a></span>
<span class="normal"><a href="#__codelineno-0-583"> 583</a></span>
<span class="normal"><a href="#__codelineno-0-584"> 584</a></span>
<span class="normal"><a href="#__codelineno-0-585"> 585</a></span>
<span class="normal"><a href="#__codelineno-0-586"> 586</a></span>
<span class="normal"><a href="#__codelineno-0-587"> 587</a></span>
<span class="normal"><a href="#__codelineno-0-588"> 588</a></span>
<span class="normal"><a href="#__codelineno-0-589"> 589</a></span>
<span class="normal"><a href="#__codelineno-0-590"> 590</a></span>
<span class="normal"><a href="#__codelineno-0-591"> 591</a></span>
<span class="normal"><a href="#__codelineno-0-592"> 592</a></span>
<span class="normal"><a href="#__codelineno-0-593"> 593</a></span>
<span class="normal"><a href="#__codelineno-0-594"> 594</a></span>
<span class="normal"><a href="#__codelineno-0-595"> 595</a></span>
<span class="normal"><a href="#__codelineno-0-596"> 596</a></span>
<span class="normal"><a href="#__codelineno-0-597"> 597</a></span>
<span class="normal"><a href="#__codelineno-0-598"> 598</a></span>
<span class="normal"><a href="#__codelineno-0-599"> 599</a></span>
<span class="normal"><a href="#__codelineno-0-600"> 600</a></span>
<span class="normal"><a href="#__codelineno-0-601"> 601</a></span>
<span class="normal"><a href="#__codelineno-0-602"> 602</a></span>
<span class="normal"><a href="#__codelineno-0-603"> 603</a></span>
<span class="normal"><a href="#__codelineno-0-604"> 604</a></span>
<span class="normal"><a href="#__codelineno-0-605"> 605</a></span>
<span class="normal"><a href="#__codelineno-0-606"> 606</a></span>
<span class="normal"><a href="#__codelineno-0-607"> 607</a></span>
<span class="normal"><a href="#__codelineno-0-608"> 608</a></span>
<span class="normal"><a href="#__codelineno-0-609"> 609</a></span>
<span class="normal"><a href="#__codelineno-0-610"> 610</a></span>
<span class="normal"><a href="#__codelineno-0-611"> 611</a></span>
<span class="normal"><a href="#__codelineno-0-612"> 612</a></span>
<span class="normal"><a href="#__codelineno-0-613"> 613</a></span>
<span class="normal"><a href="#__codelineno-0-614"> 614</a></span>
<span class="normal"><a href="#__codelineno-0-615"> 615</a></span>
<span class="normal"><a href="#__codelineno-0-616"> 616</a></span>
<span class="normal"><a href="#__codelineno-0-617"> 617</a></span>
<span class="normal"><a href="#__codelineno-0-618"> 618</a></span>
<span class="normal"><a href="#__codelineno-0-619"> 619</a></span>
<span class="normal"><a href="#__codelineno-0-620"> 620</a></span>
<span class="normal"><a href="#__codelineno-0-621"> 621</a></span>
<span class="normal"><a href="#__codelineno-0-622"> 622</a></span>
<span class="normal"><a href="#__codelineno-0-623"> 623</a></span>
<span class="normal"><a href="#__codelineno-0-624"> 624</a></span>
<span class="normal"><a href="#__codelineno-0-625"> 625</a></span>
<span class="normal"><a href="#__codelineno-0-626"> 626</a></span>
<span class="normal"><a href="#__codelineno-0-627"> 627</a></span>
<span class="normal"><a href="#__codelineno-0-628"> 628</a></span>
<span class="normal"><a href="#__codelineno-0-629"> 629</a></span>
<span class="normal"><a href="#__codelineno-0-630"> 630</a></span>
<span class="normal"><a href="#__codelineno-0-631"> 631</a></span>
<span class="normal"><a href="#__codelineno-0-632"> 632</a></span>
<span class="normal"><a href="#__codelineno-0-633"> 633</a></span>
<span class="normal"><a href="#__codelineno-0-634"> 634</a></span>
<span class="normal"><a href="#__codelineno-0-635"> 635</a></span>
<span class="normal"><a href="#__codelineno-0-636"> 636</a></span>
<span class="normal"><a href="#__codelineno-0-637"> 637</a></span>
<span class="normal"><a href="#__codelineno-0-638"> 638</a></span>
<span class="normal"><a href="#__codelineno-0-639"> 639</a></span>
<span class="normal"><a href="#__codelineno-0-640"> 640</a></span>
<span class="normal"><a href="#__codelineno-0-641"> 641</a></span>
<span class="normal"><a href="#__codelineno-0-642"> 642</a></span>
<span class="normal"><a href="#__codelineno-0-643"> 643</a></span>
<span class="normal"><a href="#__codelineno-0-644"> 644</a></span>
<span class="normal"><a href="#__codelineno-0-645"> 645</a></span>
<span class="normal"><a href="#__codelineno-0-646"> 646</a></span>
<span class="normal"><a href="#__codelineno-0-647"> 647</a></span>
<span class="normal"><a href="#__codelineno-0-648"> 648</a></span>
<span class="normal"><a href="#__codelineno-0-649"> 649</a></span>
<span class="normal"><a href="#__codelineno-0-650"> 650</a></span>
<span class="normal"><a href="#__codelineno-0-651"> 651</a></span>
<span class="normal"><a href="#__codelineno-0-652"> 652</a></span>
<span class="normal"><a href="#__codelineno-0-653"> 653</a></span>
<span class="normal"><a href="#__codelineno-0-654"> 654</a></span>
<span class="normal"><a href="#__codelineno-0-655"> 655</a></span>
<span class="normal"><a href="#__codelineno-0-656"> 656</a></span>
<span class="normal"><a href="#__codelineno-0-657"> 657</a></span>
<span class="normal"><a href="#__codelineno-0-658"> 658</a></span>
<span class="normal"><a href="#__codelineno-0-659"> 659</a></span>
<span class="normal"><a href="#__codelineno-0-660"> 660</a></span>
<span class="normal"><a href="#__codelineno-0-661"> 661</a></span>
<span class="normal"><a href="#__codelineno-0-662"> 662</a></span>
<span class="normal"><a href="#__codelineno-0-663"> 663</a></span>
<span class="normal"><a href="#__codelineno-0-664"> 664</a></span>
<span class="normal"><a href="#__codelineno-0-665"> 665</a></span>
<span class="normal"><a href="#__codelineno-0-666"> 666</a></span>
<span class="normal"><a href="#__codelineno-0-667"> 667</a></span>
<span class="normal"><a href="#__codelineno-0-668"> 668</a></span>
<span class="normal"><a href="#__codelineno-0-669"> 669</a></span>
<span class="normal"><a href="#__codelineno-0-670"> 670</a></span>
<span class="normal"><a href="#__codelineno-0-671"> 671</a></span>
<span class="normal"><a href="#__codelineno-0-672"> 672</a></span>
<span class="normal"><a href="#__codelineno-0-673"> 673</a></span>
<span class="normal"><a href="#__codelineno-0-674"> 674</a></span>
<span class="normal"><a href="#__codelineno-0-675"> 675</a></span>
<span class="normal"><a href="#__codelineno-0-676"> 676</a></span>
<span class="normal"><a href="#__codelineno-0-677"> 677</a></span>
<span class="normal"><a href="#__codelineno-0-678"> 678</a></span>
<span class="normal"><a href="#__codelineno-0-679"> 679</a></span>
<span class="normal"><a href="#__codelineno-0-680"> 680</a></span>
<span class="normal"><a href="#__codelineno-0-681"> 681</a></span>
<span class="normal"><a href="#__codelineno-0-682"> 682</a></span>
<span class="normal"><a href="#__codelineno-0-683"> 683</a></span>
<span class="normal"><a href="#__codelineno-0-684"> 684</a></span>
<span class="normal"><a href="#__codelineno-0-685"> 685</a></span>
<span class="normal"><a href="#__codelineno-0-686"> 686</a></span>
<span class="normal"><a href="#__codelineno-0-687"> 687</a></span>
<span class="normal"><a href="#__codelineno-0-688"> 688</a></span>
<span class="normal"><a href="#__codelineno-0-689"> 689</a></span>
<span class="normal"><a href="#__codelineno-0-690"> 690</a></span>
<span class="normal"><a href="#__codelineno-0-691"> 691</a></span>
<span class="normal"><a href="#__codelineno-0-692"> 692</a></span>
<span class="normal"><a href="#__codelineno-0-693"> 693</a></span>
<span class="normal"><a href="#__codelineno-0-694"> 694</a></span>
<span class="normal"><a href="#__codelineno-0-695"> 695</a></span>
<span class="normal"><a href="#__codelineno-0-696"> 696</a></span>
<span class="normal"><a href="#__codelineno-0-697"> 697</a></span>
<span class="normal"><a href="#__codelineno-0-698"> 698</a></span>
<span class="normal"><a href="#__codelineno-0-699"> 699</a></span>
<span class="normal"><a href="#__codelineno-0-700"> 700</a></span>
<span class="normal"><a href="#__codelineno-0-701"> 701</a></span>
<span class="normal"><a href="#__codelineno-0-702"> 702</a></span>
<span class="normal"><a href="#__codelineno-0-703"> 703</a></span>
<span class="normal"><a href="#__codelineno-0-704"> 704</a></span>
<span class="normal"><a href="#__codelineno-0-705"> 705</a></span>
<span class="normal"><a href="#__codelineno-0-706"> 706</a></span>
<span class="normal"><a href="#__codelineno-0-707"> 707</a></span>
<span class="normal"><a href="#__codelineno-0-708"> 708</a></span>
<span class="normal"><a href="#__codelineno-0-709"> 709</a></span>
<span class="normal"><a href="#__codelineno-0-710"> 710</a></span>
<span class="normal"><a href="#__codelineno-0-711"> 711</a></span>
<span class="normal"><a href="#__codelineno-0-712"> 712</a></span>
<span class="normal"><a href="#__codelineno-0-713"> 713</a></span>
<span class="normal"><a href="#__codelineno-0-714"> 714</a></span>
<span class="normal"><a href="#__codelineno-0-715"> 715</a></span>
<span class="normal"><a href="#__codelineno-0-716"> 716</a></span>
<span class="normal"><a href="#__codelineno-0-717"> 717</a></span>
<span class="normal"><a href="#__codelineno-0-718"> 718</a></span>
<span class="normal"><a href="#__codelineno-0-719"> 719</a></span>
<span class="normal"><a href="#__codelineno-0-720"> 720</a></span>
<span class="normal"><a href="#__codelineno-0-721"> 721</a></span>
<span class="normal"><a href="#__codelineno-0-722"> 722</a></span>
<span class="normal"><a href="#__codelineno-0-723"> 723</a></span>
<span class="normal"><a href="#__codelineno-0-724"> 724</a></span>
<span class="normal"><a href="#__codelineno-0-725"> 725</a></span>
<span class="normal"><a href="#__codelineno-0-726"> 726</a></span>
<span class="normal"><a href="#__codelineno-0-727"> 727</a></span>
<span class="normal"><a href="#__codelineno-0-728"> 728</a></span>
<span class="normal"><a href="#__codelineno-0-729"> 729</a></span>
<span class="normal"><a href="#__codelineno-0-730"> 730</a></span>
<span class="normal"><a href="#__codelineno-0-731"> 731</a></span>
<span class="normal"><a href="#__codelineno-0-732"> 732</a></span>
<span class="normal"><a href="#__codelineno-0-733"> 733</a></span>
<span class="normal"><a href="#__codelineno-0-734"> 734</a></span>
<span class="normal"><a href="#__codelineno-0-735"> 735</a></span>
<span class="normal"><a href="#__codelineno-0-736"> 736</a></span>
<span class="normal"><a href="#__codelineno-0-737"> 737</a></span>
<span class="normal"><a href="#__codelineno-0-738"> 738</a></span>
<span class="normal"><a href="#__codelineno-0-739"> 739</a></span>
<span class="normal"><a href="#__codelineno-0-740"> 740</a></span>
<span class="normal"><a href="#__codelineno-0-741"> 741</a></span>
<span class="normal"><a href="#__codelineno-0-742"> 742</a></span>
<span class="normal"><a href="#__codelineno-0-743"> 743</a></span>
<span class="normal"><a href="#__codelineno-0-744"> 744</a></span>
<span class="normal"><a href="#__codelineno-0-745"> 745</a></span>
<span class="normal"><a href="#__codelineno-0-746"> 746</a></span>
<span class="normal"><a href="#__codelineno-0-747"> 747</a></span>
<span class="normal"><a href="#__codelineno-0-748"> 748</a></span>
<span class="normal"><a href="#__codelineno-0-749"> 749</a></span>
<span class="normal"><a href="#__codelineno-0-750"> 750</a></span>
<span class="normal"><a href="#__codelineno-0-751"> 751</a></span>
<span class="normal"><a href="#__codelineno-0-752"> 752</a></span>
<span class="normal"><a href="#__codelineno-0-753"> 753</a></span>
<span class="normal"><a href="#__codelineno-0-754"> 754</a></span>
<span class="normal"><a href="#__codelineno-0-755"> 755</a></span>
<span class="normal"><a href="#__codelineno-0-756"> 756</a></span>
<span class="normal"><a href="#__codelineno-0-757"> 757</a></span>
<span class="normal"><a href="#__codelineno-0-758"> 758</a></span>
<span class="normal"><a href="#__codelineno-0-759"> 759</a></span>
<span class="normal"><a href="#__codelineno-0-760"> 760</a></span>
<span class="normal"><a href="#__codelineno-0-761"> 761</a></span>
<span class="normal"><a href="#__codelineno-0-762"> 762</a></span>
<span class="normal"><a href="#__codelineno-0-763"> 763</a></span>
<span class="normal"><a href="#__codelineno-0-764"> 764</a></span>
<span class="normal"><a href="#__codelineno-0-765"> 765</a></span>
<span class="normal"><a href="#__codelineno-0-766"> 766</a></span>
<span class="normal"><a href="#__codelineno-0-767"> 767</a></span>
<span class="normal"><a href="#__codelineno-0-768"> 768</a></span>
<span class="normal"><a href="#__codelineno-0-769"> 769</a></span>
<span class="normal"><a href="#__codelineno-0-770"> 770</a></span>
<span class="normal"><a href="#__codelineno-0-771"> 771</a></span>
<span class="normal"><a href="#__codelineno-0-772"> 772</a></span>
<span class="normal"><a href="#__codelineno-0-773"> 773</a></span>
<span class="normal"><a href="#__codelineno-0-774"> 774</a></span>
<span class="normal"><a href="#__codelineno-0-775"> 775</a></span>
<span class="normal"><a href="#__codelineno-0-776"> 776</a></span>
<span class="normal"><a href="#__codelineno-0-777"> 777</a></span>
<span class="normal"><a href="#__codelineno-0-778"> 778</a></span>
<span class="normal"><a href="#__codelineno-0-779"> 779</a></span>
<span class="normal"><a href="#__codelineno-0-780"> 780</a></span>
<span class="normal"><a href="#__codelineno-0-781"> 781</a></span>
<span class="normal"><a href="#__codelineno-0-782"> 782</a></span>
<span class="normal"><a href="#__codelineno-0-783"> 783</a></span>
<span class="normal"><a href="#__codelineno-0-784"> 784</a></span>
<span class="normal"><a href="#__codelineno-0-785"> 785</a></span>
<span class="normal"><a href="#__codelineno-0-786"> 786</a></span>
<span class="normal"><a href="#__codelineno-0-787"> 787</a></span>
<span class="normal"><a href="#__codelineno-0-788"> 788</a></span>
<span class="normal"><a href="#__codelineno-0-789"> 789</a></span>
<span class="normal"><a href="#__codelineno-0-790"> 790</a></span>
<span class="normal"><a href="#__codelineno-0-791"> 791</a></span>
<span class="normal"><a href="#__codelineno-0-792"> 792</a></span>
<span class="normal"><a href="#__codelineno-0-793"> 793</a></span>
<span class="normal"><a href="#__codelineno-0-794"> 794</a></span>
<span class="normal"><a href="#__codelineno-0-795"> 795</a></span>
<span class="normal"><a href="#__codelineno-0-796"> 796</a></span>
<span class="normal"><a href="#__codelineno-0-797"> 797</a></span>
<span class="normal"><a href="#__codelineno-0-798"> 798</a></span>
<span class="normal"><a href="#__codelineno-0-799"> 799</a></span>
<span class="normal"><a href="#__codelineno-0-800"> 800</a></span>
<span class="normal"><a href="#__codelineno-0-801"> 801</a></span>
<span class="normal"><a href="#__codelineno-0-802"> 802</a></span>
<span class="normal"><a href="#__codelineno-0-803"> 803</a></span>
<span class="normal"><a href="#__codelineno-0-804"> 804</a></span>
<span class="normal"><a href="#__codelineno-0-805"> 805</a></span>
<span class="normal"><a href="#__codelineno-0-806"> 806</a></span>
<span class="normal"><a href="#__codelineno-0-807"> 807</a></span>
<span class="normal"><a href="#__codelineno-0-808"> 808</a></span>
<span class="normal"><a href="#__codelineno-0-809"> 809</a></span>
<span class="normal"><a href="#__codelineno-0-810"> 810</a></span>
<span class="normal"><a href="#__codelineno-0-811"> 811</a></span>
<span class="normal"><a href="#__codelineno-0-812"> 812</a></span>
<span class="normal"><a href="#__codelineno-0-813"> 813</a></span>
<span class="normal"><a href="#__codelineno-0-814"> 814</a></span>
<span class="normal"><a href="#__codelineno-0-815"> 815</a></span>
<span class="normal"><a href="#__codelineno-0-816"> 816</a></span>
<span class="normal"><a href="#__codelineno-0-817"> 817</a></span>
<span class="normal"><a href="#__codelineno-0-818"> 818</a></span>
<span class="normal"><a href="#__codelineno-0-819"> 819</a></span>
<span class="normal"><a href="#__codelineno-0-820"> 820</a></span>
<span class="normal"><a href="#__codelineno-0-821"> 821</a></span>
<span class="normal"><a href="#__codelineno-0-822"> 822</a></span>
<span class="normal"><a href="#__codelineno-0-823"> 823</a></span>
<span class="normal"><a href="#__codelineno-0-824"> 824</a></span>
<span class="normal"><a href="#__codelineno-0-825"> 825</a></span>
<span class="normal"><a href="#__codelineno-0-826"> 826</a></span>
<span class="normal"><a href="#__codelineno-0-827"> 827</a></span>
<span class="normal"><a href="#__codelineno-0-828"> 828</a></span>
<span class="normal"><a href="#__codelineno-0-829"> 829</a></span>
<span class="normal"><a href="#__codelineno-0-830"> 830</a></span>
<span class="normal"><a href="#__codelineno-0-831"> 831</a></span>
<span class="normal"><a href="#__codelineno-0-832"> 832</a></span>
<span class="normal"><a href="#__codelineno-0-833"> 833</a></span>
<span class="normal"><a href="#__codelineno-0-834"> 834</a></span>
<span class="normal"><a href="#__codelineno-0-835"> 835</a></span>
<span class="normal"><a href="#__codelineno-0-836"> 836</a></span>
<span class="normal"><a href="#__codelineno-0-837"> 837</a></span>
<span class="normal"><a href="#__codelineno-0-838"> 838</a></span>
<span class="normal"><a href="#__codelineno-0-839"> 839</a></span>
<span class="normal"><a href="#__codelineno-0-840"> 840</a></span>
<span class="normal"><a href="#__codelineno-0-841"> 841</a></span>
<span class="normal"><a href="#__codelineno-0-842"> 842</a></span>
<span class="normal"><a href="#__codelineno-0-843"> 843</a></span>
<span class="normal"><a href="#__codelineno-0-844"> 844</a></span>
<span class="normal"><a href="#__codelineno-0-845"> 845</a></span>
<span class="normal"><a href="#__codelineno-0-846"> 846</a></span>
<span class="normal"><a href="#__codelineno-0-847"> 847</a></span>
<span class="normal"><a href="#__codelineno-0-848"> 848</a></span>
<span class="normal"><a href="#__codelineno-0-849"> 849</a></span>
<span class="normal"><a href="#__codelineno-0-850"> 850</a></span>
<span class="normal"><a href="#__codelineno-0-851"> 851</a></span>
<span class="normal"><a href="#__codelineno-0-852"> 852</a></span>
<span class="normal"><a href="#__codelineno-0-853"> 853</a></span>
<span class="normal"><a href="#__codelineno-0-854"> 854</a></span>
<span class="normal"><a href="#__codelineno-0-855"> 855</a></span>
<span class="normal"><a href="#__codelineno-0-856"> 856</a></span>
<span class="normal"><a href="#__codelineno-0-857"> 857</a></span>
<span class="normal"><a href="#__codelineno-0-858"> 858</a></span>
<span class="normal"><a href="#__codelineno-0-859"> 859</a></span>
<span class="normal"><a href="#__codelineno-0-860"> 860</a></span>
<span class="normal"><a href="#__codelineno-0-861"> 861</a></span>
<span class="normal"><a href="#__codelineno-0-862"> 862</a></span>
<span class="normal"><a href="#__codelineno-0-863"> 863</a></span>
<span class="normal"><a href="#__codelineno-0-864"> 864</a></span>
<span class="normal"><a href="#__codelineno-0-865"> 865</a></span>
<span class="normal"><a href="#__codelineno-0-866"> 866</a></span>
<span class="normal"><a href="#__codelineno-0-867"> 867</a></span>
<span class="normal"><a href="#__codelineno-0-868"> 868</a></span>
<span class="normal"><a href="#__codelineno-0-869"> 869</a></span>
<span class="normal"><a href="#__codelineno-0-870"> 870</a></span>
<span class="normal"><a href="#__codelineno-0-871"> 871</a></span>
<span class="normal"><a href="#__codelineno-0-872"> 872</a></span>
<span class="normal"><a href="#__codelineno-0-873"> 873</a></span>
<span class="normal"><a href="#__codelineno-0-874"> 874</a></span>
<span class="normal"><a href="#__codelineno-0-875"> 875</a></span>
<span class="normal"><a href="#__codelineno-0-876"> 876</a></span>
<span class="normal"><a href="#__codelineno-0-877"> 877</a></span>
<span class="normal"><a href="#__codelineno-0-878"> 878</a></span>
<span class="normal"><a href="#__codelineno-0-879"> 879</a></span>
<span class="normal"><a href="#__codelineno-0-880"> 880</a></span>
<span class="normal"><a href="#__codelineno-0-881"> 881</a></span>
<span class="normal"><a href="#__codelineno-0-882"> 882</a></span>
<span class="normal"><a href="#__codelineno-0-883"> 883</a></span>
<span class="normal"><a href="#__codelineno-0-884"> 884</a></span>
<span class="normal"><a href="#__codelineno-0-885"> 885</a></span>
<span class="normal"><a href="#__codelineno-0-886"> 886</a></span>
<span class="normal"><a href="#__codelineno-0-887"> 887</a></span>
<span class="normal"><a href="#__codelineno-0-888"> 888</a></span>
<span class="normal"><a href="#__codelineno-0-889"> 889</a></span>
<span class="normal"><a href="#__codelineno-0-890"> 890</a></span>
<span class="normal"><a href="#__codelineno-0-891"> 891</a></span>
<span class="normal"><a href="#__codelineno-0-892"> 892</a></span>
<span class="normal"><a href="#__codelineno-0-893"> 893</a></span>
<span class="normal"><a href="#__codelineno-0-894"> 894</a></span>
<span class="normal"><a href="#__codelineno-0-895"> 895</a></span>
<span class="normal"><a href="#__codelineno-0-896"> 896</a></span>
<span class="normal"><a href="#__codelineno-0-897"> 897</a></span>
<span class="normal"><a href="#__codelineno-0-898"> 898</a></span>
<span class="normal"><a href="#__codelineno-0-899"> 899</a></span>
<span class="normal"><a href="#__codelineno-0-900"> 900</a></span>
<span class="normal"><a href="#__codelineno-0-901"> 901</a></span>
<span class="normal"><a href="#__codelineno-0-902"> 902</a></span>
<span class="normal"><a href="#__codelineno-0-903"> 903</a></span>
<span class="normal"><a href="#__codelineno-0-904"> 904</a></span>
<span class="normal"><a href="#__codelineno-0-905"> 905</a></span>
<span class="normal"><a href="#__codelineno-0-906"> 906</a></span>
<span class="normal"><a href="#__codelineno-0-907"> 907</a></span>
<span class="normal"><a href="#__codelineno-0-908"> 908</a></span>
<span class="normal"><a href="#__codelineno-0-909"> 909</a></span>
<span class="normal"><a href="#__codelineno-0-910"> 910</a></span>
<span class="normal"><a href="#__codelineno-0-911"> 911</a></span>
<span class="normal"><a href="#__codelineno-0-912"> 912</a></span>
<span class="normal"><a href="#__codelineno-0-913"> 913</a></span>
<span class="normal"><a href="#__codelineno-0-914"> 914</a></span>
<span class="normal"><a href="#__codelineno-0-915"> 915</a></span>
<span class="normal"><a href="#__codelineno-0-916"> 916</a></span>
<span class="normal"><a href="#__codelineno-0-917"> 917</a></span>
<span class="normal"><a href="#__codelineno-0-918"> 918</a></span>
<span class="normal"><a href="#__codelineno-0-919"> 919</a></span>
<span class="normal"><a href="#__codelineno-0-920"> 920</a></span>
<span class="normal"><a href="#__codelineno-0-921"> 921</a></span>
<span class="normal"><a href="#__codelineno-0-922"> 922</a></span>
<span class="normal"><a href="#__codelineno-0-923"> 923</a></span>
<span class="normal"><a href="#__codelineno-0-924"> 924</a></span>
<span class="normal"><a href="#__codelineno-0-925"> 925</a></span>
<span class="normal"><a href="#__codelineno-0-926"> 926</a></span>
<span class="normal"><a href="#__codelineno-0-927"> 927</a></span>
<span class="normal"><a href="#__codelineno-0-928"> 928</a></span>
<span class="normal"><a href="#__codelineno-0-929"> 929</a></span>
<span class="normal"><a href="#__codelineno-0-930"> 930</a></span>
<span class="normal"><a href="#__codelineno-0-931"> 931</a></span>
<span class="normal"><a href="#__codelineno-0-932"> 932</a></span>
<span class="normal"><a href="#__codelineno-0-933"> 933</a></span>
<span class="normal"><a href="#__codelineno-0-934"> 934</a></span>
<span class="normal"><a href="#__codelineno-0-935"> 935</a></span>
<span class="normal"><a href="#__codelineno-0-936"> 936</a></span>
<span class="normal"><a href="#__codelineno-0-937"> 937</a></span>
<span class="normal"><a href="#__codelineno-0-938"> 938</a></span>
<span class="normal"><a href="#__codelineno-0-939"> 939</a></span>
<span class="normal"><a href="#__codelineno-0-940"> 940</a></span>
<span class="normal"><a href="#__codelineno-0-941"> 941</a></span>
<span class="normal"><a href="#__codelineno-0-942"> 942</a></span>
<span class="normal"><a href="#__codelineno-0-943"> 943</a></span>
<span class="normal"><a href="#__codelineno-0-944"> 944</a></span>
<span class="normal"><a href="#__codelineno-0-945"> 945</a></span>
<span class="normal"><a href="#__codelineno-0-946"> 946</a></span>
<span class="normal"><a href="#__codelineno-0-947"> 947</a></span>
<span class="normal"><a href="#__codelineno-0-948"> 948</a></span>
<span class="normal"><a href="#__codelineno-0-949"> 949</a></span>
<span class="normal"><a href="#__codelineno-0-950"> 950</a></span>
<span class="normal"><a href="#__codelineno-0-951"> 951</a></span>
<span class="normal"><a href="#__codelineno-0-952"> 952</a></span>
<span class="normal"><a href="#__codelineno-0-953"> 953</a></span>
<span class="normal"><a href="#__codelineno-0-954"> 954</a></span>
<span class="normal"><a href="#__codelineno-0-955"> 955</a></span>
<span class="normal"><a href="#__codelineno-0-956"> 956</a></span>
<span class="normal"><a href="#__codelineno-0-957"> 957</a></span>
<span class="normal"><a href="#__codelineno-0-958"> 958</a></span>
<span class="normal"><a href="#__codelineno-0-959"> 959</a></span>
<span class="normal"><a href="#__codelineno-0-960"> 960</a></span>
<span class="normal"><a href="#__codelineno-0-961"> 961</a></span>
<span class="normal"><a href="#__codelineno-0-962"> 962</a></span>
<span class="normal"><a href="#__codelineno-0-963"> 963</a></span>
<span class="normal"><a href="#__codelineno-0-964"> 964</a></span>
<span class="normal"><a href="#__codelineno-0-965"> 965</a></span>
<span class="normal"><a href="#__codelineno-0-966"> 966</a></span>
<span class="normal"><a href="#__codelineno-0-967"> 967</a></span>
<span class="normal"><a href="#__codelineno-0-968"> 968</a></span>
<span class="normal"><a href="#__codelineno-0-969"> 969</a></span>
<span class="normal"><a href="#__codelineno-0-970"> 970</a></span>
<span class="normal"><a href="#__codelineno-0-971"> 971</a></span>
<span class="normal"><a href="#__codelineno-0-972"> 972</a></span>
<span class="normal"><a href="#__codelineno-0-973"> 973</a></span>
<span class="normal"><a href="#__codelineno-0-974"> 974</a></span>
<span class="normal"><a href="#__codelineno-0-975"> 975</a></span>
<span class="normal"><a href="#__codelineno-0-976"> 976</a></span>
<span class="normal"><a href="#__codelineno-0-977"> 977</a></span>
<span class="normal"><a href="#__codelineno-0-978"> 978</a></span>
<span class="normal"><a href="#__codelineno-0-979"> 979</a></span>
<span class="normal"><a href="#__codelineno-0-980"> 980</a></span>
<span class="normal"><a href="#__codelineno-0-981"> 981</a></span>
<span class="normal"><a href="#__codelineno-0-982"> 982</a></span>
<span class="normal"><a href="#__codelineno-0-983"> 983</a></span>
<span class="normal"><a href="#__codelineno-0-984"> 984</a></span>
<span class="normal"><a href="#__codelineno-0-985"> 985</a></span>
<span class="normal"><a href="#__codelineno-0-986"> 986</a></span>
<span class="normal"><a href="#__codelineno-0-987"> 987</a></span>
<span class="normal"><a href="#__codelineno-0-988"> 988</a></span>
<span class="normal"><a href="#__codelineno-0-989"> 989</a></span>
<span class="normal"><a href="#__codelineno-0-990"> 990</a></span>
<span class="normal"><a href="#__codelineno-0-991"> 991</a></span>
<span class="normal"><a href="#__codelineno-0-992"> 992</a></span>
<span class="normal"><a href="#__codelineno-0-993"> 993</a></span>
<span class="normal"><a href="#__codelineno-0-994"> 994</a></span>
<span class="normal"><a href="#__codelineno-0-995"> 995</a></span>
<span class="normal"><a href="#__codelineno-0-996"> 996</a></span>
<span class="normal"><a href="#__codelineno-0-997"> 997</a></span>
<span class="normal"><a href="#__codelineno-0-998"> 998</a></span>
<span class="normal"><a href="#__codelineno-0-999"> 999</a></span>
<span class="normal"><a href="#__codelineno-0-1000">1000</a></span>
<span class="normal"><a href="#__codelineno-0-1001">1001</a></span>
<span class="normal"><a href="#__codelineno-0-1002">1002</a></span>
<span class="normal"><a href="#__codelineno-0-1003">1003</a></span>
<span class="normal"><a href="#__codelineno-0-1004">1004</a></span>
<span class="normal"><a href="#__codelineno-0-1005">1005</a></span>
<span class="normal"><a href="#__codelineno-0-1006">1006</a></span>
<span class="normal"><a href="#__codelineno-0-1007">1007</a></span>
<span class="normal"><a href="#__codelineno-0-1008">1008</a></span>
<span class="normal"><a href="#__codelineno-0-1009">1009</a></span>
<span class="normal"><a href="#__codelineno-0-1010">1010</a></span>
<span class="normal"><a href="#__codelineno-0-1011">1011</a></span>
<span class="normal"><a href="#__codelineno-0-1012">1012</a></span>
<span class="normal"><a href="#__codelineno-0-1013">1013</a></span>
<span class="normal"><a href="#__codelineno-0-1014">1014</a></span>
<span class="normal"><a href="#__codelineno-0-1015">1015</a></span>
<span class="normal"><a href="#__codelineno-0-1016">1016</a></span>
<span class="normal"><a href="#__codelineno-0-1017">1017</a></span>
<span class="normal"><a href="#__codelineno-0-1018">1018</a></span>
<span class="normal"><a href="#__codelineno-0-1019">1019</a></span>
<span class="normal"><a href="#__codelineno-0-1020">1020</a></span>
<span class="normal"><a href="#__codelineno-0-1021">1021</a></span>
<span class="normal"><a href="#__codelineno-0-1022">1022</a></span>
<span class="normal"><a href="#__codelineno-0-1023">1023</a></span>
<span class="normal"><a href="#__codelineno-0-1024">1024</a></span>
<span class="normal"><a href="#__codelineno-0-1025">1025</a></span>
<span class="normal"><a href="#__codelineno-0-1026">1026</a></span>
<span class="normal"><a href="#__codelineno-0-1027">1027</a></span>
<span class="normal"><a href="#__codelineno-0-1028">1028</a></span>
<span class="normal"><a href="#__codelineno-0-1029">1029</a></span>
<span class="normal"><a href="#__codelineno-0-1030">1030</a></span>
<span class="normal"><a href="#__codelineno-0-1031">1031</a></span>
<span class="normal"><a href="#__codelineno-0-1032">1032</a></span>
<span class="normal"><a href="#__codelineno-0-1033">1033</a></span>
<span class="normal"><a href="#__codelineno-0-1034">1034</a></span>
<span class="normal"><a href="#__codelineno-0-1035">1035</a></span>
<span class="normal"><a href="#__codelineno-0-1036">1036</a></span>
<span class="normal"><a href="#__codelineno-0-1037">1037</a></span>
<span class="normal"><a href="#__codelineno-0-1038">1038</a></span>
<span class="normal"><a href="#__codelineno-0-1039">1039</a></span>
<span class="normal"><a href="#__codelineno-0-1040">1040</a></span>
<span class="normal"><a href="#__codelineno-0-1041">1041</a></span>
<span class="normal"><a href="#__codelineno-0-1042">1042</a></span>
<span class="normal"><a href="#__codelineno-0-1043">1043</a></span>
<span class="normal"><a href="#__codelineno-0-1044">1044</a></span>
<span class="normal"><a href="#__codelineno-0-1045">1045</a></span>
<span class="normal"><a href="#__codelineno-0-1046">1046</a></span>
<span class="normal"><a href="#__codelineno-0-1047">1047</a></span>
<span class="normal"><a href="#__codelineno-0-1048">1048</a></span>
<span class="normal"><a href="#__codelineno-0-1049">1049</a></span>
<span class="normal"><a href="#__codelineno-0-1050">1050</a></span>
<span class="normal"><a href="#__codelineno-0-1051">1051</a></span>
<span class="normal"><a href="#__codelineno-0-1052">1052</a></span>
<span class="normal"><a href="#__codelineno-0-1053">1053</a></span>
<span class="normal"><a href="#__codelineno-0-1054">1054</a></span>
<span class="normal"><a href="#__codelineno-0-1055">1055</a></span>
<span class="normal"><a href="#__codelineno-0-1056">1056</a></span>
<span class="normal"><a href="#__codelineno-0-1057">1057</a></span>
<span class="normal"><a href="#__codelineno-0-1058">1058</a></span>
<span class="normal"><a href="#__codelineno-0-1059">1059</a></span>
<span class="normal"><a href="#__codelineno-0-1060">1060</a></span>
<span class="normal"><a href="#__codelineno-0-1061">1061</a></span>
<span class="normal"><a href="#__codelineno-0-1062">1062</a></span>
<span class="normal"><a href="#__codelineno-0-1063">1063</a></span>
<span class="normal"><a href="#__codelineno-0-1064">1064</a></span>
<span class="normal"><a href="#__codelineno-0-1065">1065</a></span>
<span class="normal"><a href="#__codelineno-0-1066">1066</a></span>
<span class="normal"><a href="#__codelineno-0-1067">1067</a></span>
<span class="normal"><a href="#__codelineno-0-1068">1068</a></span>
<span class="normal"><a href="#__codelineno-0-1069">1069</a></span>
<span class="normal"><a href="#__codelineno-0-1070">1070</a></span>
<span class="normal"><a href="#__codelineno-0-1071">1071</a></span>
<span class="normal"><a href="#__codelineno-0-1072">1072</a></span>
<span class="normal"><a href="#__codelineno-0-1073">1073</a></span>
<span class="normal"><a href="#__codelineno-0-1074">1074</a></span>
<span class="normal"><a href="#__codelineno-0-1075">1075</a></span>
<span class="normal"><a href="#__codelineno-0-1076">1076</a></span>
<span class="normal"><a href="#__codelineno-0-1077">1077</a></span>
<span class="normal"><a href="#__codelineno-0-1078">1078</a></span>
<span class="normal"><a href="#__codelineno-0-1079">1079</a></span>
<span class="normal"><a href="#__codelineno-0-1080">1080</a></span>
<span class="normal"><a href="#__codelineno-0-1081">1081</a></span>
<span class="normal"><a href="#__codelineno-0-1082">1082</a></span>
<span class="normal"><a href="#__codelineno-0-1083">1083</a></span>
<span class="normal"><a href="#__codelineno-0-1084">1084</a></span>
<span class="normal"><a href="#__codelineno-0-1085">1085</a></span>
<span class="normal"><a href="#__codelineno-0-1086">1086</a></span>
<span class="normal"><a href="#__codelineno-0-1087">1087</a></span>
<span class="normal"><a href="#__codelineno-0-1088">1088</a></span>
<span class="normal"><a href="#__codelineno-0-1089">1089</a></span>
<span class="normal"><a href="#__codelineno-0-1090">1090</a></span>
<span class="normal"><a href="#__codelineno-0-1091">1091</a></span>
<span class="normal"><a href="#__codelineno-0-1092">1092</a></span>
<span class="normal"><a href="#__codelineno-0-1093">1093</a></span>
<span class="normal"><a href="#__codelineno-0-1094">1094</a></span>
<span class="normal"><a href="#__codelineno-0-1095">1095</a></span>
<span class="normal"><a href="#__codelineno-0-1096">1096</a></span>
<span class="normal"><a href="#__codelineno-0-1097">1097</a></span>
<span class="normal"><a href="#__codelineno-0-1098">1098</a></span>
<span class="normal"><a href="#__codelineno-0-1099">1099</a></span>
<span class="normal"><a href="#__codelineno-0-1100">1100</a></span>
<span class="normal"><a href="#__codelineno-0-1101">1101</a></span>
<span class="normal"><a href="#__codelineno-0-1102">1102</a></span>
<span class="normal"><a href="#__codelineno-0-1103">1103</a></span>
<span class="normal"><a href="#__codelineno-0-1104">1104</a></span>
<span class="normal"><a href="#__codelineno-0-1105">1105</a></span>
<span class="normal"><a href="#__codelineno-0-1106">1106</a></span>
<span class="normal"><a href="#__codelineno-0-1107">1107</a></span>
<span class="normal"><a href="#__codelineno-0-1108">1108</a></span>
<span class="normal"><a href="#__codelineno-0-1109">1109</a></span>
<span class="normal"><a href="#__codelineno-0-1110">1110</a></span>
<span class="normal"><a href="#__codelineno-0-1111">1111</a></span>
<span class="normal"><a href="#__codelineno-0-1112">1112</a></span>
<span class="normal"><a href="#__codelineno-0-1113">1113</a></span>
<span class="normal"><a href="#__codelineno-0-1114">1114</a></span>
<span class="normal"><a href="#__codelineno-0-1115">1115</a></span>
<span class="normal"><a href="#__codelineno-0-1116">1116</a></span>
<span class="normal"><a href="#__codelineno-0-1117">1117</a></span>
<span class="normal"><a href="#__codelineno-0-1118">1118</a></span>
<span class="normal"><a href="#__codelineno-0-1119">1119</a></span>
<span class="normal"><a href="#__codelineno-0-1120">1120</a></span>
<span class="normal"><a href="#__codelineno-0-1121">1121</a></span>
<span class="normal"><a href="#__codelineno-0-1122">1122</a></span>
<span class="normal"><a href="#__codelineno-0-1123">1123</a></span>
<span class="normal"><a href="#__codelineno-0-1124">1124</a></span>
<span class="normal"><a href="#__codelineno-0-1125">1125</a></span>
<span class="normal"><a href="#__codelineno-0-1126">1126</a></span>
<span class="normal"><a href="#__codelineno-0-1127">1127</a></span>
<span class="normal"><a href="#__codelineno-0-1128">1128</a></span>
<span class="normal"><a href="#__codelineno-0-1129">1129</a></span>
<span class="normal"><a href="#__codelineno-0-1130">1130</a></span>
<span class="normal"><a href="#__codelineno-0-1131">1131</a></span>
<span class="normal"><a href="#__codelineno-0-1132">1132</a></span>
<span class="normal"><a href="#__codelineno-0-1133">1133</a></span>
<span class="normal"><a href="#__codelineno-0-1134">1134</a></span>
<span class="normal"><a href="#__codelineno-0-1135">1135</a></span>
<span class="normal"><a href="#__codelineno-0-1136">1136</a></span>
<span class="normal"><a href="#__codelineno-0-1137">1137</a></span>
<span class="normal"><a href="#__codelineno-0-1138">1138</a></span>
<span class="normal"><a href="#__codelineno-0-1139">1139</a></span>
<span class="normal"><a href="#__codelineno-0-1140">1140</a></span>
<span class="normal"><a href="#__codelineno-0-1141">1141</a></span>
<span class="normal"><a href="#__codelineno-0-1142">1142</a></span>
<span class="normal"><a href="#__codelineno-0-1143">1143</a></span>
<span class="normal"><a href="#__codelineno-0-1144">1144</a></span>
<span class="normal"><a href="#__codelineno-0-1145">1145</a></span>
<span class="normal"><a href="#__codelineno-0-1146">1146</a></span>
<span class="normal"><a href="#__codelineno-0-1147">1147</a></span>
<span class="normal"><a href="#__codelineno-0-1148">1148</a></span>
<span class="normal"><a href="#__codelineno-0-1149">1149</a></span>
<span class="normal"><a href="#__codelineno-0-1150">1150</a></span>
<span class="normal"><a href="#__codelineno-0-1151">1151</a></span>
<span class="normal"><a href="#__codelineno-0-1152">1152</a></span>
<span class="normal"><a href="#__codelineno-0-1153">1153</a></span>
<span class="normal"><a href="#__codelineno-0-1154">1154</a></span>
<span class="normal"><a href="#__codelineno-0-1155">1155</a></span>
<span class="normal"><a href="#__codelineno-0-1156">1156</a></span>
<span class="normal"><a href="#__codelineno-0-1157">1157</a></span>
<span class="normal"><a href="#__codelineno-0-1158">1158</a></span>
<span class="normal"><a href="#__codelineno-0-1159">1159</a></span>
<span class="normal"><a href="#__codelineno-0-1160">1160</a></span>
<span class="normal"><a href="#__codelineno-0-1161">1161</a></span>
<span class="normal"><a href="#__codelineno-0-1162">1162</a></span>
<span class="normal"><a href="#__codelineno-0-1163">1163</a></span>
<span class="normal"><a href="#__codelineno-0-1164">1164</a></span>
<span class="normal"><a href="#__codelineno-0-1165">1165</a></span>
<span class="normal"><a href="#__codelineno-0-1166">1166</a></span>
<span class="normal"><a href="#__codelineno-0-1167">1167</a></span>
<span class="normal"><a href="#__codelineno-0-1168">1168</a></span>
<span class="normal"><a href="#__codelineno-0-1169">1169</a></span>
<span class="normal"><a href="#__codelineno-0-1170">1170</a></span>
<span class="normal"><a href="#__codelineno-0-1171">1171</a></span>
<span class="normal"><a href="#__codelineno-0-1172">1172</a></span>
<span class="normal"><a href="#__codelineno-0-1173">1173</a></span>
<span class="normal"><a href="#__codelineno-0-1174">1174</a></span>
<span class="normal"><a href="#__codelineno-0-1175">1175</a></span>
<span class="normal"><a href="#__codelineno-0-1176">1176</a></span>
<span class="normal"><a href="#__codelineno-0-1177">1177</a></span>
<span class="normal"><a href="#__codelineno-0-1178">1178</a></span>
<span class="normal"><a href="#__codelineno-0-1179">1179</a></span>
<span class="normal"><a href="#__codelineno-0-1180">1180</a></span>
<span class="normal"><a href="#__codelineno-0-1181">1181</a></span>
<span class="normal"><a href="#__codelineno-0-1182">1182</a></span>
<span class="normal"><a href="#__codelineno-0-1183">1183</a></span>
<span class="normal"><a href="#__codelineno-0-1184">1184</a></span>
<span class="normal"><a href="#__codelineno-0-1185">1185</a></span>
<span class="normal"><a href="#__codelineno-0-1186">1186</a></span>
<span class="normal"><a href="#__codelineno-0-1187">1187</a></span>
<span class="normal"><a href="#__codelineno-0-1188">1188</a></span>
<span class="normal"><a href="#__codelineno-0-1189">1189</a></span>
<span class="normal"><a href="#__codelineno-0-1190">1190</a></span>
<span class="normal"><a href="#__codelineno-0-1191">1191</a></span>
<span class="normal"><a href="#__codelineno-0-1192">1192</a></span>
<span class="normal"><a href="#__codelineno-0-1193">1193</a></span>
<span class="normal"><a href="#__codelineno-0-1194">1194</a></span>
<span class="normal"><a href="#__codelineno-0-1195">1195</a></span>
<span class="normal"><a href="#__codelineno-0-1196">1196</a></span>
<span class="normal"><a href="#__codelineno-0-1197">1197</a></span>
<span class="normal"><a href="#__codelineno-0-1198">1198</a></span>
<span class="normal"><a href="#__codelineno-0-1199">1199</a></span>
<span class="normal"><a href="#__codelineno-0-1200">1200</a></span>
<span class="normal"><a href="#__codelineno-0-1201">1201</a></span>
<span class="normal"><a href="#__codelineno-0-1202">1202</a></span>
<span class="normal"><a href="#__codelineno-0-1203">1203</a></span>
<span class="normal"><a href="#__codelineno-0-1204">1204</a></span>
<span class="normal"><a href="#__codelineno-0-1205">1205</a></span>
<span class="normal"><a href="#__codelineno-0-1206">1206</a></span>
<span class="normal"><a href="#__codelineno-0-1207">1207</a></span>
<span class="normal"><a href="#__codelineno-0-1208">1208</a></span>
<span class="normal"><a href="#__codelineno-0-1209">1209</a></span>
<span class="normal"><a href="#__codelineno-0-1210">1210</a></span>
<span class="normal"><a href="#__codelineno-0-1211">1211</a></span>
<span class="normal"><a href="#__codelineno-0-1212">1212</a></span>
<span class="normal"><a href="#__codelineno-0-1213">1213</a></span>
<span class="normal"><a href="#__codelineno-0-1214">1214</a></span>
<span class="normal"><a href="#__codelineno-0-1215">1215</a></span>
<span class="normal"><a href="#__codelineno-0-1216">1216</a></span>
<span class="normal"><a href="#__codelineno-0-1217">1217</a></span>
<span class="normal"><a href="#__codelineno-0-1218">1218</a></span>
<span class="normal"><a href="#__codelineno-0-1219">1219</a></span>
<span class="normal"><a href="#__codelineno-0-1220">1220</a></span>
<span class="normal"><a href="#__codelineno-0-1221">1221</a></span>
<span class="normal"><a href="#__codelineno-0-1222">1222</a></span>
<span class="normal"><a href="#__codelineno-0-1223">1223</a></span>
<span class="normal"><a href="#__codelineno-0-1224">1224</a></span>
<span class="normal"><a href="#__codelineno-0-1225">1225</a></span>
<span class="normal"><a href="#__codelineno-0-1226">1226</a></span>
<span class="normal"><a href="#__codelineno-0-1227">1227</a></span>
<span class="normal"><a href="#__codelineno-0-1228">1228</a></span>
<span class="normal"><a href="#__codelineno-0-1229">1229</a></span>
<span class="normal"><a href="#__codelineno-0-1230">1230</a></span>
<span class="normal"><a href="#__codelineno-0-1231">1231</a></span>
<span class="normal"><a href="#__codelineno-0-1232">1232</a></span>
<span class="normal"><a href="#__codelineno-0-1233">1233</a></span>
<span class="normal"><a href="#__codelineno-0-1234">1234</a></span>
<span class="normal"><a href="#__codelineno-0-1235">1235</a></span>
<span class="normal"><a href="#__codelineno-0-1236">1236</a></span>
<span class="normal"><a href="#__codelineno-0-1237">1237</a></span>
<span class="normal"><a href="#__codelineno-0-1238">1238</a></span>
<span class="normal"><a href="#__codelineno-0-1239">1239</a></span>
<span class="normal"><a href="#__codelineno-0-1240">1240</a></span>
<span class="normal"><a href="#__codelineno-0-1241">1241</a></span>
<span class="normal"><a href="#__codelineno-0-1242">1242</a></span>
<span class="normal"><a href="#__codelineno-0-1243">1243</a></span>
<span class="normal"><a href="#__codelineno-0-1244">1244</a></span>
<span class="normal"><a href="#__codelineno-0-1245">1245</a></span>
<span class="normal"><a href="#__codelineno-0-1246">1246</a></span>
<span class="normal"><a href="#__codelineno-0-1247">1247</a></span>
<span class="normal"><a href="#__codelineno-0-1248">1248</a></span>
<span class="normal"><a href="#__codelineno-0-1249">1249</a></span>
<span class="normal"><a href="#__codelineno-0-1250">1250</a></span>
<span class="normal"><a href="#__codelineno-0-1251">1251</a></span>
<span class="normal"><a href="#__codelineno-0-1252">1252</a></span>
<span class="normal"><a href="#__codelineno-0-1253">1253</a></span>
<span class="normal"><a href="#__codelineno-0-1254">1254</a></span>
<span class="normal"><a href="#__codelineno-0-1255">1255</a></span>
<span class="normal"><a href="#__codelineno-0-1256">1256</a></span>
<span class="normal"><a href="#__codelineno-0-1257">1257</a></span>
<span class="normal"><a href="#__codelineno-0-1258">1258</a></span>
<span class="normal"><a href="#__codelineno-0-1259">1259</a></span>
<span class="normal"><a href="#__codelineno-0-1260">1260</a></span>
<span class="normal"><a href="#__codelineno-0-1261">1261</a></span>
<span class="normal"><a href="#__codelineno-0-1262">1262</a></span>
<span class="normal"><a href="#__codelineno-0-1263">1263</a></span>
<span class="normal"><a href="#__codelineno-0-1264">1264</a></span>
<span class="normal"><a href="#__codelineno-0-1265">1265</a></span>
<span class="normal"><a href="#__codelineno-0-1266">1266</a></span>
<span class="normal"><a href="#__codelineno-0-1267">1267</a></span>
<span class="normal"><a href="#__codelineno-0-1268">1268</a></span>
<span class="normal"><a href="#__codelineno-0-1269">1269</a></span>
<span class="normal"><a href="#__codelineno-0-1270">1270</a></span>
<span class="normal"><a href="#__codelineno-0-1271">1271</a></span>
<span class="normal"><a href="#__codelineno-0-1272">1272</a></span>
<span class="normal"><a href="#__codelineno-0-1273">1273</a></span>
<span class="normal"><a href="#__codelineno-0-1274">1274</a></span>
<span class="normal"><a href="#__codelineno-0-1275">1275</a></span>
<span class="normal"><a href="#__codelineno-0-1276">1276</a></span>
<span class="normal"><a href="#__codelineno-0-1277">1277</a></span>
<span class="normal"><a href="#__codelineno-0-1278">1278</a></span>
<span class="normal"><a href="#__codelineno-0-1279">1279</a></span>
<span class="normal"><a href="#__codelineno-0-1280">1280</a></span>
<span class="normal"><a href="#__codelineno-0-1281">1281</a></span>
<span class="normal"><a href="#__codelineno-0-1282">1282</a></span>
<span class="normal"><a href="#__codelineno-0-1283">1283</a></span>
<span class="normal"><a href="#__codelineno-0-1284">1284</a></span>
<span class="normal"><a href="#__codelineno-0-1285">1285</a></span>
<span class="normal"><a href="#__codelineno-0-1286">1286</a></span>
<span class="normal"><a href="#__codelineno-0-1287">1287</a></span>
<span class="normal"><a href="#__codelineno-0-1288">1288</a></span>
<span class="normal"><a href="#__codelineno-0-1289">1289</a></span>
<span class="normal"><a href="#__codelineno-0-1290">1290</a></span>
<span class="normal"><a href="#__codelineno-0-1291">1291</a></span>
<span class="normal"><a href="#__codelineno-0-1292">1292</a></span>
<span class="normal"><a href="#__codelineno-0-1293">1293</a></span>
<span class="normal"><a href="#__codelineno-0-1294">1294</a></span>
<span class="normal"><a href="#__codelineno-0-1295">1295</a></span>
<span class="normal"><a href="#__codelineno-0-1296">1296</a></span>
<span class="normal"><a href="#__codelineno-0-1297">1297</a></span>
<span class="normal"><a href="#__codelineno-0-1298">1298</a></span>
<span class="normal"><a href="#__codelineno-0-1299">1299</a></span>
<span class="normal"><a href="#__codelineno-0-1300">1300</a></span>
<span class="normal"><a href="#__codelineno-0-1301">1301</a></span>
<span class="normal"><a href="#__codelineno-0-1302">1302</a></span>
<span class="normal"><a href="#__codelineno-0-1303">1303</a></span>
<span class="normal"><a href="#__codelineno-0-1304">1304</a></span>
<span class="normal"><a href="#__codelineno-0-1305">1305</a></span>
<span class="normal"><a href="#__codelineno-0-1306">1306</a></span>
<span class="normal"><a href="#__codelineno-0-1307">1307</a></span>
<span class="normal"><a href="#__codelineno-0-1308">1308</a></span>
<span class="normal"><a href="#__codelineno-0-1309">1309</a></span>
<span class="normal"><a href="#__codelineno-0-1310">1310</a></span>
<span class="normal"><a href="#__codelineno-0-1311">1311</a></span>
<span class="normal"><a href="#__codelineno-0-1312">1312</a></span>
<span class="normal"><a href="#__codelineno-0-1313">1313</a></span>
<span class="normal"><a href="#__codelineno-0-1314">1314</a></span>
<span class="normal"><a href="#__codelineno-0-1315">1315</a></span>
<span class="normal"><a href="#__codelineno-0-1316">1316</a></span>
<span class="normal"><a href="#__codelineno-0-1317">1317</a></span>
<span class="normal"><a href="#__codelineno-0-1318">1318</a></span>
<span class="normal"><a href="#__codelineno-0-1319">1319</a></span>
<span class="normal"><a href="#__codelineno-0-1320">1320</a></span>
<span class="normal"><a href="#__codelineno-0-1321">1321</a></span>
<span class="normal"><a href="#__codelineno-0-1322">1322</a></span>
<span class="normal"><a href="#__codelineno-0-1323">1323</a></span>
<span class="normal"><a href="#__codelineno-0-1324">1324</a></span>
<span class="normal"><a href="#__codelineno-0-1325">1325</a></span>
<span class="normal"><a href="#__codelineno-0-1326">1326</a></span>
<span class="normal"><a href="#__codelineno-0-1327">1327</a></span>
<span class="normal"><a href="#__codelineno-0-1328">1328</a></span>
<span class="normal"><a href="#__codelineno-0-1329">1329</a></span>
<span class="normal"><a href="#__codelineno-0-1330">1330</a></span>
<span class="normal"><a href="#__codelineno-0-1331">1331</a></span>
<span class="normal"><a href="#__codelineno-0-1332">1332</a></span>
<span class="normal"><a href="#__codelineno-0-1333">1333</a></span>
<span class="normal"><a href="#__codelineno-0-1334">1334</a></span>
<span class="normal"><a href="#__codelineno-0-1335">1335</a></span>
<span class="normal"><a href="#__codelineno-0-1336">1336</a></span>
<span class="normal"><a href="#__codelineno-0-1337">1337</a></span>
<span class="normal"><a href="#__codelineno-0-1338">1338</a></span>
<span class="normal"><a href="#__codelineno-0-1339">1339</a></span>
<span class="normal"><a href="#__codelineno-0-1340">1340</a></span>
<span class="normal"><a href="#__codelineno-0-1341">1341</a></span>
<span class="normal"><a href="#__codelineno-0-1342">1342</a></span>
<span class="normal"><a href="#__codelineno-0-1343">1343</a></span>
<span class="normal"><a href="#__codelineno-0-1344">1344</a></span>
<span class="normal"><a href="#__codelineno-0-1345">1345</a></span>
<span class="normal"><a href="#__codelineno-0-1346">1346</a></span>
<span class="normal"><a href="#__codelineno-0-1347">1347</a></span>
<span class="normal"><a href="#__codelineno-0-1348">1348</a></span>
<span class="normal"><a href="#__codelineno-0-1349">1349</a></span>
<span class="normal"><a href="#__codelineno-0-1350">1350</a></span>
<span class="normal"><a href="#__codelineno-0-1351">1351</a></span>
<span class="normal"><a href="#__codelineno-0-1352">1352</a></span>
<span class="normal"><a href="#__codelineno-0-1353">1353</a></span>
<span class="normal"><a href="#__codelineno-0-1354">1354</a></span>
<span class="normal"><a href="#__codelineno-0-1355">1355</a></span>
<span class="normal"><a href="#__codelineno-0-1356">1356</a></span>
<span class="normal"><a href="#__codelineno-0-1357">1357</a></span>
<span class="normal"><a href="#__codelineno-0-1358">1358</a></span>
<span class="normal"><a href="#__codelineno-0-1359">1359</a></span>
<span class="normal"><a href="#__codelineno-0-1360">1360</a></span>
<span class="normal"><a href="#__codelineno-0-1361">1361</a></span>
<span class="normal"><a href="#__codelineno-0-1362">1362</a></span>
<span class="normal"><a href="#__codelineno-0-1363">1363</a></span>
<span class="normal"><a href="#__codelineno-0-1364">1364</a></span>
<span class="normal"><a href="#__codelineno-0-1365">1365</a></span>
<span class="normal"><a href="#__codelineno-0-1366">1366</a></span>
<span class="normal"><a href="#__codelineno-0-1367">1367</a></span>
<span class="normal"><a href="#__codelineno-0-1368">1368</a></span>
<span class="normal"><a href="#__codelineno-0-1369">1369</a></span>
<span class="normal"><a href="#__codelineno-0-1370">1370</a></span>
<span class="normal"><a href="#__codelineno-0-1371">1371</a></span>
<span class="normal"><a href="#__codelineno-0-1372">1372</a></span>
<span class="normal"><a href="#__codelineno-0-1373">1373</a></span>
<span class="normal"><a href="#__codelineno-0-1374">1374</a></span>
<span class="normal"><a href="#__codelineno-0-1375">1375</a></span>
<span class="normal"><a href="#__codelineno-0-1376">1376</a></span>
<span class="normal"><a href="#__codelineno-0-1377">1377</a></span>
<span class="normal"><a href="#__codelineno-0-1378">1378</a></span>
<span class="normal"><a href="#__codelineno-0-1379">1379</a></span>
<span class="normal"><a href="#__codelineno-0-1380">1380</a></span>
<span class="normal"><a href="#__codelineno-0-1381">1381</a></span>
<span class="normal"><a href="#__codelineno-0-1382">1382</a></span>
<span class="normal"><a href="#__codelineno-0-1383">1383</a></span>
<span class="normal"><a href="#__codelineno-0-1384">1384</a></span>
<span class="normal"><a href="#__codelineno-0-1385">1385</a></span>
<span class="normal"><a href="#__codelineno-0-1386">1386</a></span>
<span class="normal"><a href="#__codelineno-0-1387">1387</a></span>
<span class="normal"><a href="#__codelineno-0-1388">1388</a></span>
<span class="normal"><a href="#__codelineno-0-1389">1389</a></span>
<span class="normal"><a href="#__codelineno-0-1390">1390</a></span>
<span class="normal"><a href="#__codelineno-0-1391">1391</a></span>
<span class="normal"><a href="#__codelineno-0-1392">1392</a></span>
<span class="normal"><a href="#__codelineno-0-1393">1393</a></span>
<span class="normal"><a href="#__codelineno-0-1394">1394</a></span>
<span class="normal"><a href="#__codelineno-0-1395">1395</a></span>
<span class="normal"><a href="#__codelineno-0-1396">1396</a></span>
<span class="normal"><a href="#__codelineno-0-1397">1397</a></span>
<span class="normal"><a href="#__codelineno-0-1398">1398</a></span>
<span class="normal"><a href="#__codelineno-0-1399">1399</a></span>
<span class="normal"><a href="#__codelineno-0-1400">1400</a></span>
<span class="normal"><a href="#__codelineno-0-1401">1401</a></span>
<span class="normal"><a href="#__codelineno-0-1402">1402</a></span>
<span class="normal"><a href="#__codelineno-0-1403">1403</a></span>
<span class="normal"><a href="#__codelineno-0-1404">1404</a></span>
<span class="normal"><a href="#__codelineno-0-1405">1405</a></span>
<span class="normal"><a href="#__codelineno-0-1406">1406</a></span>
<span class="normal"><a href="#__codelineno-0-1407">1407</a></span>
<span class="normal"><a href="#__codelineno-0-1408">1408</a></span>
<span class="normal"><a href="#__codelineno-0-1409">1409</a></span>
<span class="normal"><a href="#__codelineno-0-1410">1410</a></span>
<span class="normal"><a href="#__codelineno-0-1411">1411</a></span>
<span class="normal"><a href="#__codelineno-0-1412">1412</a></span>
<span class="normal"><a href="#__codelineno-0-1413">1413</a></span>
<span class="normal"><a href="#__codelineno-0-1414">1414</a></span>
<span class="normal"><a href="#__codelineno-0-1415">1415</a></span>
<span class="normal"><a href="#__codelineno-0-1416">1416</a></span>
<span class="normal"><a href="#__codelineno-0-1417">1417</a></span>
<span class="normal"><a href="#__codelineno-0-1418">1418</a></span>
<span class="normal"><a href="#__codelineno-0-1419">1419</a></span>
<span class="normal"><a href="#__codelineno-0-1420">1420</a></span>
<span class="normal"><a href="#__codelineno-0-1421">1421</a></span>
<span class="normal"><a href="#__codelineno-0-1422">1422</a></span>
<span class="normal"><a href="#__codelineno-0-1423">1423</a></span>
<span class="normal"><a href="#__codelineno-0-1424">1424</a></span>
<span class="normal"><a href="#__codelineno-0-1425">1425</a></span>
<span class="normal"><a href="#__codelineno-0-1426">1426</a></span>
<span class="normal"><a href="#__codelineno-0-1427">1427</a></span>
<span class="normal"><a href="#__codelineno-0-1428">1428</a></span>
<span class="normal"><a href="#__codelineno-0-1429">1429</a></span>
<span class="normal"><a href="#__codelineno-0-1430">1430</a></span>
<span class="normal"><a href="#__codelineno-0-1431">1431</a></span>
<span class="normal"><a href="#__codelineno-0-1432">1432</a></span>
<span class="normal"><a href="#__codelineno-0-1433">1433</a></span>
<span class="normal"><a href="#__codelineno-0-1434">1434</a></span>
<span class="normal"><a href="#__codelineno-0-1435">1435</a></span>
<span class="normal"><a href="#__codelineno-0-1436">1436</a></span>
<span class="normal"><a href="#__codelineno-0-1437">1437</a></span>
<span class="normal"><a href="#__codelineno-0-1438">1438</a></span>
<span class="normal"><a href="#__codelineno-0-1439">1439</a></span>
<span class="normal"><a href="#__codelineno-0-1440">1440</a></span>
<span class="normal"><a href="#__codelineno-0-1441">1441</a></span>
<span class="normal"><a href="#__codelineno-0-1442">1442</a></span>
<span class="normal"><a href="#__codelineno-0-1443">1443</a></span>
<span class="normal"><a href="#__codelineno-0-1444">1444</a></span>
<span class="normal"><a href="#__codelineno-0-1445">1445</a></span>
<span class="normal"><a href="#__codelineno-0-1446">1446</a></span>
<span class="normal"><a href="#__codelineno-0-1447">1447</a></span>
<span class="normal"><a href="#__codelineno-0-1448">1448</a></span>
<span class="normal"><a href="#__codelineno-0-1449">1449</a></span>
<span class="normal"><a href="#__codelineno-0-1450">1450</a></span>
<span class="normal"><a href="#__codelineno-0-1451">1451</a></span>
<span class="normal"><a href="#__codelineno-0-1452">1452</a></span>
<span class="normal"><a href="#__codelineno-0-1453">1453</a></span>
<span class="normal"><a href="#__codelineno-0-1454">1454</a></span>
<span class="normal"><a href="#__codelineno-0-1455">1455</a></span>
<span class="normal"><a href="#__codelineno-0-1456">1456</a></span>
<span class="normal"><a href="#__codelineno-0-1457">1457</a></span>
<span class="normal"><a href="#__codelineno-0-1458">1458</a></span>
<span class="normal"><a href="#__codelineno-0-1459">1459</a></span>
<span class="normal"><a href="#__codelineno-0-1460">1460</a></span>
<span class="normal"><a href="#__codelineno-0-1461">1461</a></span>
<span class="normal"><a href="#__codelineno-0-1462">1462</a></span>
<span class="normal"><a href="#__codelineno-0-1463">1463</a></span>
<span class="normal"><a href="#__codelineno-0-1464">1464</a></span>
<span class="normal"><a href="#__codelineno-0-1465">1465</a></span>
<span class="normal"><a href="#__codelineno-0-1466">1466</a></span>
<span class="normal"><a href="#__codelineno-0-1467">1467</a></span>
<span class="normal"><a href="#__codelineno-0-1468">1468</a></span>
<span class="normal"><a href="#__codelineno-0-1469">1469</a></span>
<span class="normal"><a href="#__codelineno-0-1470">1470</a></span>
<span class="normal"><a href="#__codelineno-0-1471">1471</a></span>
<span class="normal"><a href="#__codelineno-0-1472">1472</a></span>
<span class="normal"><a href="#__codelineno-0-1473">1473</a></span>
<span class="normal"><a href="#__codelineno-0-1474">1474</a></span>
<span class="normal"><a href="#__codelineno-0-1475">1475</a></span>
<span class="normal"><a href="#__codelineno-0-1476">1476</a></span>
<span class="normal"><a href="#__codelineno-0-1477">1477</a></span>
<span class="normal"><a href="#__codelineno-0-1478">1478</a></span>
<span class="normal"><a href="#__codelineno-0-1479">1479</a></span>
<span class="normal"><a href="#__codelineno-0-1480">1480</a></span>
<span class="normal"><a href="#__codelineno-0-1481">1481</a></span>
<span class="normal"><a href="#__codelineno-0-1482">1482</a></span>
<span class="normal"><a href="#__codelineno-0-1483">1483</a></span>
<span class="normal"><a href="#__codelineno-0-1484">1484</a></span>
<span class="normal"><a href="#__codelineno-0-1485">1485</a></span>
<span class="normal"><a href="#__codelineno-0-1486">1486</a></span>
<span class="normal"><a href="#__codelineno-0-1487">1487</a></span>
<span class="normal"><a href="#__codelineno-0-1488">1488</a></span>
<span class="normal"><a href="#__codelineno-0-1489">1489</a></span>
<span class="normal"><a href="#__codelineno-0-1490">1490</a></span>
<span class="normal"><a href="#__codelineno-0-1491">1491</a></span>
<span class="normal"><a href="#__codelineno-0-1492">1492</a></span>
<span class="normal"><a href="#__codelineno-0-1493">1493</a></span>
<span class="normal"><a href="#__codelineno-0-1494">1494</a></span>
<span class="normal"><a href="#__codelineno-0-1495">1495</a></span>
<span class="normal"><a href="#__codelineno-0-1496">1496</a></span>
<span class="normal"><a href="#__codelineno-0-1497">1497</a></span>
<span class="normal"><a href="#__codelineno-0-1498">1498</a></span>
<span class="normal"><a href="#__codelineno-0-1499">1499</a></span>
<span class="normal"><a href="#__codelineno-0-1500">1500</a></span>
<span class="normal"><a href="#__codelineno-0-1501">1501</a></span>
<span class="normal"><a href="#__codelineno-0-1502">1502</a></span>
<span class="normal"><a href="#__codelineno-0-1503">1503</a></span>
<span class="normal"><a href="#__codelineno-0-1504">1504</a></span>
<span class="normal"><a href="#__codelineno-0-1505">1505</a></span>
<span class="normal"><a href="#__codelineno-0-1506">1506</a></span>
<span class="normal"><a href="#__codelineno-0-1507">1507</a></span>
<span class="normal"><a href="#__codelineno-0-1508">1508</a></span>
<span class="normal"><a href="#__codelineno-0-1509">1509</a></span>
<span class="normal"><a href="#__codelineno-0-1510">1510</a></span>
<span class="normal"><a href="#__codelineno-0-1511">1511</a></span>
<span class="normal"><a href="#__codelineno-0-1512">1512</a></span>
<span class="normal"><a href="#__codelineno-0-1513">1513</a></span>
<span class="normal"><a href="#__codelineno-0-1514">1514</a></span>
<span class="normal"><a href="#__codelineno-0-1515">1515</a></span>
<span class="normal"><a href="#__codelineno-0-1516">1516</a></span>
<span class="normal"><a href="#__codelineno-0-1517">1517</a></span>
<span class="normal"><a href="#__codelineno-0-1518">1518</a></span>
<span class="normal"><a href="#__codelineno-0-1519">1519</a></span>
<span class="normal"><a href="#__codelineno-0-1520">1520</a></span>
<span class="normal"><a href="#__codelineno-0-1521">1521</a></span>
<span class="normal"><a href="#__codelineno-0-1522">1522</a></span>
<span class="normal"><a href="#__codelineno-0-1523">1523</a></span>
<span class="normal"><a href="#__codelineno-0-1524">1524</a></span>
<span class="normal"><a href="#__codelineno-0-1525">1525</a></span>
<span class="normal"><a href="#__codelineno-0-1526">1526</a></span>
<span class="normal"><a href="#__codelineno-0-1527">1527</a></span>
<span class="normal"><a href="#__codelineno-0-1528">1528</a></span>
<span class="normal"><a href="#__codelineno-0-1529">1529</a></span>
<span class="normal"><a href="#__codelineno-0-1530">1530</a></span>
<span class="normal"><a href="#__codelineno-0-1531">1531</a></span>
<span class="normal"><a href="#__codelineno-0-1532">1532</a></span>
<span class="normal"><a href="#__codelineno-0-1533">1533</a></span>
<span class="normal"><a href="#__codelineno-0-1534">1534</a></span>
<span class="normal"><a href="#__codelineno-0-1535">1535</a></span>
<span class="normal"><a href="#__codelineno-0-1536">1536</a></span>
<span class="normal"><a href="#__codelineno-0-1537">1537</a></span>
<span class="normal"><a href="#__codelineno-0-1538">1538</a></span>
<span class="normal"><a href="#__codelineno-0-1539">1539</a></span>
<span class="normal"><a href="#__codelineno-0-1540">1540</a></span>
<span class="normal"><a href="#__codelineno-0-1541">1541</a></span>
<span class="normal"><a href="#__codelineno-0-1542">1542</a></span>
<span class="normal"><a href="#__codelineno-0-1543">1543</a></span>
<span class="normal"><a href="#__codelineno-0-1544">1544</a></span>
<span class="normal"><a href="#__codelineno-0-1545">1545</a></span>
<span class="normal"><a href="#__codelineno-0-1546">1546</a></span>
<span class="normal"><a href="#__codelineno-0-1547">1547</a></span>
<span class="normal"><a href="#__codelineno-0-1548">1548</a></span>
<span class="normal"><a href="#__codelineno-0-1549">1549</a></span>
<span class="normal"><a href="#__codelineno-0-1550">1550</a></span>
<span class="normal"><a href="#__codelineno-0-1551">1551</a></span>
<span class="normal"><a href="#__codelineno-0-1552">1552</a></span>
<span class="normal"><a href="#__codelineno-0-1553">1553</a></span>
<span class="normal"><a href="#__codelineno-0-1554">1554</a></span>
<span class="normal"><a href="#__codelineno-0-1555">1555</a></span>
<span class="normal"><a href="#__codelineno-0-1556">1556</a></span>
<span class="normal"><a href="#__codelineno-0-1557">1557</a></span>
<span class="normal"><a href="#__codelineno-0-1558">1558</a></span>
<span class="normal"><a href="#__codelineno-0-1559">1559</a></span>
<span class="normal"><a href="#__codelineno-0-1560">1560</a></span>
<span class="normal"><a href="#__codelineno-0-1561">1561</a></span>
<span class="normal"><a href="#__codelineno-0-1562">1562</a></span>
<span class="normal"><a href="#__codelineno-0-1563">1563</a></span>
<span class="normal"><a href="#__codelineno-0-1564">1564</a></span>
<span class="normal"><a href="#__codelineno-0-1565">1565</a></span>
<span class="normal"><a href="#__codelineno-0-1566">1566</a></span>
<span class="normal"><a href="#__codelineno-0-1567">1567</a></span>
<span class="normal"><a href="#__codelineno-0-1568">1568</a></span>
<span class="normal"><a href="#__codelineno-0-1569">1569</a></span>
<span class="normal"><a href="#__codelineno-0-1570">1570</a></span>
<span class="normal"><a href="#__codelineno-0-1571">1571</a></span>
<span class="normal"><a href="#__codelineno-0-1572">1572</a></span>
<span class="normal"><a href="#__codelineno-0-1573">1573</a></span>
<span class="normal"><a href="#__codelineno-0-1574">1574</a></span>
<span class="normal"><a href="#__codelineno-0-1575">1575</a></span>
<span class="normal"><a href="#__codelineno-0-1576">1576</a></span>
<span class="normal"><a href="#__codelineno-0-1577">1577</a></span>
<span class="normal"><a href="#__codelineno-0-1578">1578</a></span>
<span class="normal"><a href="#__codelineno-0-1579">1579</a></span>
<span class="normal"><a href="#__codelineno-0-1580">1580</a></span>
<span class="normal"><a href="#__codelineno-0-1581">1581</a></span>
<span class="normal"><a href="#__codelineno-0-1582">1582</a></span>
<span class="normal"><a href="#__codelineno-0-1583">1583</a></span>
<span class="normal"><a href="#__codelineno-0-1584">1584</a></span>
<span class="normal"><a href="#__codelineno-0-1585">1585</a></span>
<span class="normal"><a href="#__codelineno-0-1586">1586</a></span>
<span class="normal"><a href="#__codelineno-0-1587">1587</a></span>
<span class="normal"><a href="#__codelineno-0-1588">1588</a></span>
<span class="normal"><a href="#__codelineno-0-1589">1589</a></span>
<span class="normal"><a href="#__codelineno-0-1590">1590</a></span>
<span class="normal"><a href="#__codelineno-0-1591">1591</a></span>
<span class="normal"><a href="#__codelineno-0-1592">1592</a></span>
<span class="normal"><a href="#__codelineno-0-1593">1593</a></span>
<span class="normal"><a href="#__codelineno-0-1594">1594</a></span>
<span class="normal"><a href="#__codelineno-0-1595">1595</a></span>
<span class="normal"><a href="#__codelineno-0-1596">1596</a></span>
<span class="normal"><a href="#__codelineno-0-1597">1597</a></span>
<span class="normal"><a href="#__codelineno-0-1598">1598</a></span>
<span class="normal"><a href="#__codelineno-0-1599">1599</a></span>
<span class="normal"><a href="#__codelineno-0-1600">1600</a></span>
<span class="normal"><a href="#__codelineno-0-1601">1601</a></span>
<span class="normal"><a href="#__codelineno-0-1602">1602</a></span>
<span class="normal"><a href="#__codelineno-0-1603">1603</a></span>
<span class="normal"><a href="#__codelineno-0-1604">1604</a></span>
<span class="normal"><a href="#__codelineno-0-1605">1605</a></span>
<span class="normal"><a href="#__codelineno-0-1606">1606</a></span>
<span class="normal"><a href="#__codelineno-0-1607">1607</a></span>
<span class="normal"><a href="#__codelineno-0-1608">1608</a></span>
<span class="normal"><a href="#__codelineno-0-1609">1609</a></span>
<span class="normal"><a href="#__codelineno-0-1610">1610</a></span>
<span class="normal"><a href="#__codelineno-0-1611">1611</a></span>
<span class="normal"><a href="#__codelineno-0-1612">1612</a></span>
<span class="normal"><a href="#__codelineno-0-1613">1613</a></span>
<span class="normal"><a href="#__codelineno-0-1614">1614</a></span>
<span class="normal"><a href="#__codelineno-0-1615">1615</a></span>
<span class="normal"><a href="#__codelineno-0-1616">1616</a></span>
<span class="normal"><a href="#__codelineno-0-1617">1617</a></span>
<span class="normal"><a href="#__codelineno-0-1618">1618</a></span>
<span class="normal"><a href="#__codelineno-0-1619">1619</a></span>
<span class="normal"><a href="#__codelineno-0-1620">1620</a></span>
<span class="normal"><a href="#__codelineno-0-1621">1621</a></span>
<span class="normal"><a href="#__codelineno-0-1622">1622</a></span>
<span class="normal"><a href="#__codelineno-0-1623">1623</a></span>
<span class="normal"><a href="#__codelineno-0-1624">1624</a></span>
<span class="normal"><a href="#__codelineno-0-1625">1625</a></span>
<span class="normal"><a href="#__codelineno-0-1626">1626</a></span>
<span class="normal"><a href="#__codelineno-0-1627">1627</a></span>
<span class="normal"><a href="#__codelineno-0-1628">1628</a></span>
<span class="normal"><a href="#__codelineno-0-1629">1629</a></span>
<span class="normal"><a href="#__codelineno-0-1630">1630</a></span>
<span class="normal"><a href="#__codelineno-0-1631">1631</a></span>
<span class="normal"><a href="#__codelineno-0-1632">1632</a></span>
<span class="normal"><a href="#__codelineno-0-1633">1633</a></span>
<span class="normal"><a href="#__codelineno-0-1634">1634</a></span>
<span class="normal"><a href="#__codelineno-0-1635">1635</a></span>
<span class="normal"><a href="#__codelineno-0-1636">1636</a></span>
<span class="normal"><a href="#__codelineno-0-1637">1637</a></span>
<span class="normal"><a href="#__codelineno-0-1638">1638</a></span>
<span class="normal"><a href="#__codelineno-0-1639">1639</a></span>
<span class="normal"><a href="#__codelineno-0-1640">1640</a></span>
<span class="normal"><a href="#__codelineno-0-1641">1641</a></span>
<span class="normal"><a href="#__codelineno-0-1642">1642</a></span>
<span class="normal"><a href="#__codelineno-0-1643">1643</a></span>
<span class="normal"><a href="#__codelineno-0-1644">1644</a></span>
<span class="normal"><a href="#__codelineno-0-1645">1645</a></span>
<span class="normal"><a href="#__codelineno-0-1646">1646</a></span>
<span class="normal"><a href="#__codelineno-0-1647">1647</a></span>
<span class="normal"><a href="#__codelineno-0-1648">1648</a></span>
<span class="normal"><a href="#__codelineno-0-1649">1649</a></span>
<span class="normal"><a href="#__codelineno-0-1650">1650</a></span>
<span class="normal"><a href="#__codelineno-0-1651">1651</a></span>
<span class="normal"><a href="#__codelineno-0-1652">1652</a></span>
<span class="normal"><a href="#__codelineno-0-1653">1653</a></span>
<span class="normal"><a href="#__codelineno-0-1654">1654</a></span>
<span class="normal"><a href="#__codelineno-0-1655">1655</a></span>
<span class="normal"><a href="#__codelineno-0-1656">1656</a></span>
<span class="normal"><a href="#__codelineno-0-1657">1657</a></span>
<span class="normal"><a href="#__codelineno-0-1658">1658</a></span>
<span class="normal"><a href="#__codelineno-0-1659">1659</a></span>
<span class="normal"><a href="#__codelineno-0-1660">1660</a></span>
<span class="normal"><a href="#__codelineno-0-1661">1661</a></span>
<span class="normal"><a href="#__codelineno-0-1662">1662</a></span>
<span class="normal"><a href="#__codelineno-0-1663">1663</a></span>
<span class="normal"><a href="#__codelineno-0-1664">1664</a></span>
<span class="normal"><a href="#__codelineno-0-1665">1665</a></span>
<span class="normal"><a href="#__codelineno-0-1666">1666</a></span>
<span class="normal"><a href="#__codelineno-0-1667">1667</a></span>
<span class="normal"><a href="#__codelineno-0-1668">1668</a></span>
<span class="normal"><a href="#__codelineno-0-1669">1669</a></span>
<span class="normal"><a href="#__codelineno-0-1670">1670</a></span>
<span class="normal"><a href="#__codelineno-0-1671">1671</a></span>
<span class="normal"><a href="#__codelineno-0-1672">1672</a></span>
<span class="normal"><a href="#__codelineno-0-1673">1673</a></span>
<span class="normal"><a href="#__codelineno-0-1674">1674</a></span>
<span class="normal"><a href="#__codelineno-0-1675">1675</a></span>
<span class="normal"><a href="#__codelineno-0-1676">1676</a></span>
<span class="normal"><a href="#__codelineno-0-1677">1677</a></span>
<span class="normal"><a href="#__codelineno-0-1678">1678</a></span>
<span class="normal"><a href="#__codelineno-0-1679">1679</a></span>
<span class="normal"><a href="#__codelineno-0-1680">1680</a></span>
<span class="normal"><a href="#__codelineno-0-1681">1681</a></span>
<span class="normal"><a href="#__codelineno-0-1682">1682</a></span>
<span class="normal"><a href="#__codelineno-0-1683">1683</a></span>
<span class="normal"><a href="#__codelineno-0-1684">1684</a></span>
<span class="normal"><a href="#__codelineno-0-1685">1685</a></span>
<span class="normal"><a href="#__codelineno-0-1686">1686</a></span>
<span class="normal"><a href="#__codelineno-0-1687">1687</a></span>
<span class="normal"><a href="#__codelineno-0-1688">1688</a></span>
<span class="normal"><a href="#__codelineno-0-1689">1689</a></span>
<span class="normal"><a href="#__codelineno-0-1690">1690</a></span>
<span class="normal"><a href="#__codelineno-0-1691">1691</a></span>
<span class="normal"><a href="#__codelineno-0-1692">1692</a></span>
<span class="normal"><a href="#__codelineno-0-1693">1693</a></span>
<span class="normal"><a href="#__codelineno-0-1694">1694</a></span>
<span class="normal"><a href="#__codelineno-0-1695">1695</a></span>
<span class="normal"><a href="#__codelineno-0-1696">1696</a></span>
<span class="normal"><a href="#__codelineno-0-1697">1697</a></span>
<span class="normal"><a href="#__codelineno-0-1698">1698</a></span>
<span class="normal"><a href="#__codelineno-0-1699">1699</a></span>
<span class="normal"><a href="#__codelineno-0-1700">1700</a></span>
<span class="normal"><a href="#__codelineno-0-1701">1701</a></span>
<span class="normal"><a href="#__codelineno-0-1702">1702</a></span>
<span class="normal"><a href="#__codelineno-0-1703">1703</a></span>
<span class="normal"><a href="#__codelineno-0-1704">1704</a></span>
<span class="normal"><a href="#__codelineno-0-1705">1705</a></span>
<span class="normal"><a href="#__codelineno-0-1706">1706</a></span>
<span class="normal"><a href="#__codelineno-0-1707">1707</a></span>
<span class="normal"><a href="#__codelineno-0-1708">1708</a></span>
<span class="normal"><a href="#__codelineno-0-1709">1709</a></span>
<span class="normal"><a href="#__codelineno-0-1710">1710</a></span>
<span class="normal"><a href="#__codelineno-0-1711">1711</a></span>
<span class="normal"><a href="#__codelineno-0-1712">1712</a></span>
<span class="normal"><a href="#__codelineno-0-1713">1713</a></span>
<span class="normal"><a href="#__codelineno-0-1714">1714</a></span>
<span class="normal"><a href="#__codelineno-0-1715">1715</a></span>
<span class="normal"><a href="#__codelineno-0-1716">1716</a></span>
<span class="normal"><a href="#__codelineno-0-1717">1717</a></span>
<span class="normal"><a href="#__codelineno-0-1718">1718</a></span>
<span class="normal"><a href="#__codelineno-0-1719">1719</a></span>
<span class="normal"><a href="#__codelineno-0-1720">1720</a></span>
<span class="normal"><a href="#__codelineno-0-1721">1721</a></span>
<span class="normal"><a href="#__codelineno-0-1722">1722</a></span>
<span class="normal"><a href="#__codelineno-0-1723">1723</a></span>
<span class="normal"><a href="#__codelineno-0-1724">1724</a></span>
<span class="normal"><a href="#__codelineno-0-1725">1725</a></span>
<span class="normal"><a href="#__codelineno-0-1726">1726</a></span>
<span class="normal"><a href="#__codelineno-0-1727">1727</a></span>
<span class="normal"><a href="#__codelineno-0-1728">1728</a></span>
<span class="normal"><a href="#__codelineno-0-1729">1729</a></span>
<span class="normal"><a href="#__codelineno-0-1730">1730</a></span>
<span class="normal"><a href="#__codelineno-0-1731">1731</a></span>
<span class="normal"><a href="#__codelineno-0-1732">1732</a></span>
<span class="normal"><a href="#__codelineno-0-1733">1733</a></span>
<span class="normal"><a href="#__codelineno-0-1734">1734</a></span>
<span class="normal"><a href="#__codelineno-0-1735">1735</a></span>
<span class="normal"><a href="#__codelineno-0-1736">1736</a></span>
<span class="normal"><a href="#__codelineno-0-1737">1737</a></span>
<span class="normal"><a href="#__codelineno-0-1738">1738</a></span>
<span class="normal"><a href="#__codelineno-0-1739">1739</a></span>
<span class="normal"><a href="#__codelineno-0-1740">1740</a></span>
<span class="normal"><a href="#__codelineno-0-1741">1741</a></span>
<span class="normal"><a href="#__codelineno-0-1742">1742</a></span>
<span class="normal"><a href="#__codelineno-0-1743">1743</a></span>
<span class="normal"><a href="#__codelineno-0-1744">1744</a></span>
<span class="normal"><a href="#__codelineno-0-1745">1745</a></span>
<span class="normal"><a href="#__codelineno-0-1746">1746</a></span>
<span class="normal"><a href="#__codelineno-0-1747">1747</a></span>
<span class="normal"><a href="#__codelineno-0-1748">1748</a></span>
<span class="normal"><a href="#__codelineno-0-1749">1749</a></span>
<span class="normal"><a href="#__codelineno-0-1750">1750</a></span>
<span class="normal"><a href="#__codelineno-0-1751">1751</a></span>
<span class="normal"><a href="#__codelineno-0-1752">1752</a></span>
<span class="normal"><a href="#__codelineno-0-1753">1753</a></span>
<span class="normal"><a href="#__codelineno-0-1754">1754</a></span>
<span class="normal"><a href="#__codelineno-0-1755">1755</a></span>
<span class="normal"><a href="#__codelineno-0-1756">1756</a></span>
<span class="normal"><a href="#__codelineno-0-1757">1757</a></span>
<span class="normal"><a href="#__codelineno-0-1758">1758</a></span>
<span class="normal"><a href="#__codelineno-0-1759">1759</a></span>
<span class="normal"><a href="#__codelineno-0-1760">1760</a></span>
<span class="normal"><a href="#__codelineno-0-1761">1761</a></span>
<span class="normal"><a href="#__codelineno-0-1762">1762</a></span>
<span class="normal"><a href="#__codelineno-0-1763">1763</a></span>
<span class="normal"><a href="#__codelineno-0-1764">1764</a></span>
<span class="normal"><a href="#__codelineno-0-1765">1765</a></span>
<span class="normal"><a href="#__codelineno-0-1766">1766</a></span>
<span class="normal"><a href="#__codelineno-0-1767">1767</a></span>
<span class="normal"><a href="#__codelineno-0-1768">1768</a></span>
<span class="normal"><a href="#__codelineno-0-1769">1769</a></span>
<span class="normal"><a href="#__codelineno-0-1770">1770</a></span>
<span class="normal"><a href="#__codelineno-0-1771">1771</a></span>
<span class="normal"><a href="#__codelineno-0-1772">1772</a></span>
<span class="normal"><a href="#__codelineno-0-1773">1773</a></span>
<span class="normal"><a href="#__codelineno-0-1774">1774</a></span>
<span class="normal"><a href="#__codelineno-0-1775">1775</a></span>
<span class="normal"><a href="#__codelineno-0-1776">1776</a></span>
<span class="normal"><a href="#__codelineno-0-1777">1777</a></span>
<span class="normal"><a href="#__codelineno-0-1778">1778</a></span>
<span class="normal"><a href="#__codelineno-0-1779">1779</a></span>
<span class="normal"><a href="#__codelineno-0-1780">1780</a></span>
<span class="normal"><a href="#__codelineno-0-1781">1781</a></span>
<span class="normal"><a href="#__codelineno-0-1782">1782</a></span>
<span class="normal"><a href="#__codelineno-0-1783">1783</a></span>
<span class="normal"><a href="#__codelineno-0-1784">1784</a></span>
<span class="normal"><a href="#__codelineno-0-1785">1785</a></span>
<span class="normal"><a href="#__codelineno-0-1786">1786</a></span>
<span class="normal"><a href="#__codelineno-0-1787">1787</a></span>
<span class="normal"><a href="#__codelineno-0-1788">1788</a></span>
<span class="normal"><a href="#__codelineno-0-1789">1789</a></span>
<span class="normal"><a href="#__codelineno-0-1790">1790</a></span>
<span class="normal"><a href="#__codelineno-0-1791">1791</a></span>
<span class="normal"><a href="#__codelineno-0-1792">1792</a></span>
<span class="normal"><a href="#__codelineno-0-1793">1793</a></span>
<span class="normal"><a href="#__codelineno-0-1794">1794</a></span>
<span class="normal"><a href="#__codelineno-0-1795">1795</a></span>
<span class="normal"><a href="#__codelineno-0-1796">1796</a></span>
<span class="normal"><a href="#__codelineno-0-1797">1797</a></span>
<span class="normal"><a href="#__codelineno-0-1798">1798</a></span>
<span class="normal"><a href="#__codelineno-0-1799">1799</a></span>
<span class="normal"><a href="#__codelineno-0-1800">1800</a></span>
<span class="normal"><a href="#__codelineno-0-1801">1801</a></span>
<span class="normal"><a href="#__codelineno-0-1802">1802</a></span>
<span class="normal"><a href="#__codelineno-0-1803">1803</a></span>
<span class="normal"><a href="#__codelineno-0-1804">1804</a></span>
<span class="normal"><a href="#__codelineno-0-1805">1805</a></span>
<span class="normal"><a href="#__codelineno-0-1806">1806</a></span>
<span class="normal"><a href="#__codelineno-0-1807">1807</a></span>
<span class="normal"><a href="#__codelineno-0-1808">1808</a></span>
<span class="normal"><a href="#__codelineno-0-1809">1809</a></span>
<span class="normal"><a href="#__codelineno-0-1810">1810</a></span>
<span class="normal"><a href="#__codelineno-0-1811">1811</a></span>
<span class="normal"><a href="#__codelineno-0-1812">1812</a></span>
<span class="normal"><a href="#__codelineno-0-1813">1813</a></span>
<span class="normal"><a href="#__codelineno-0-1814">1814</a></span>
<span class="normal"><a href="#__codelineno-0-1815">1815</a></span>
<span class="normal"><a href="#__codelineno-0-1816">1816</a></span>
<span class="normal"><a href="#__codelineno-0-1817">1817</a></span>
<span class="normal"><a href="#__codelineno-0-1818">1818</a></span>
<span class="normal"><a href="#__codelineno-0-1819">1819</a></span>
<span class="normal"><a href="#__codelineno-0-1820">1820</a></span>
<span class="normal"><a href="#__codelineno-0-1821">1821</a></span>
<span class="normal"><a href="#__codelineno-0-1822">1822</a></span>
<span class="normal"><a href="#__codelineno-0-1823">1823</a></span>
<span class="normal"><a href="#__codelineno-0-1824">1824</a></span>
<span class="normal"><a href="#__codelineno-0-1825">1825</a></span>
<span class="normal"><a href="#__codelineno-0-1826">1826</a></span>
<span class="normal"><a href="#__codelineno-0-1827">1827</a></span>
<span class="normal"><a href="#__codelineno-0-1828">1828</a></span>
<span class="normal"><a href="#__codelineno-0-1829">1829</a></span>
<span class="normal"><a href="#__codelineno-0-1830">1830</a></span>
<span class="normal"><a href="#__codelineno-0-1831">1831</a></span>
<span class="normal"><a href="#__codelineno-0-1832">1832</a></span>
<span class="normal"><a href="#__codelineno-0-1833">1833</a></span>
<span class="normal"><a href="#__codelineno-0-1834">1834</a></span>
<span class="normal"><a href="#__codelineno-0-1835">1835</a></span>
<span class="normal"><a href="#__codelineno-0-1836">1836</a></span>
<span class="normal"><a href="#__codelineno-0-1837">1837</a></span>
<span class="normal"><a href="#__codelineno-0-1838">1838</a></span>
<span class="normal"><a href="#__codelineno-0-1839">1839</a></span>
<span class="normal"><a href="#__codelineno-0-1840">1840</a></span>
<span class="normal"><a href="#__codelineno-0-1841">1841</a></span>
<span class="normal"><a href="#__codelineno-0-1842">1842</a></span>
<span class="normal"><a href="#__codelineno-0-1843">1843</a></span>
<span class="normal"><a href="#__codelineno-0-1844">1844</a></span>
<span class="normal"><a href="#__codelineno-0-1845">1845</a></span>
<span class="normal"><a href="#__codelineno-0-1846">1846</a></span>
<span class="normal"><a href="#__codelineno-0-1847">1847</a></span>
<span class="normal"><a href="#__codelineno-0-1848">1848</a></span>
<span class="normal"><a href="#__codelineno-0-1849">1849</a></span>
<span class="normal"><a href="#__codelineno-0-1850">1850</a></span>
<span class="normal"><a href="#__codelineno-0-1851">1851</a></span>
<span class="normal"><a href="#__codelineno-0-1852">1852</a></span>
<span class="normal"><a href="#__codelineno-0-1853">1853</a></span>
<span class="normal"><a href="#__codelineno-0-1854">1854</a></span>
<span class="normal"><a href="#__codelineno-0-1855">1855</a></span>
<span class="normal"><a href="#__codelineno-0-1856">1856</a></span>
<span class="normal"><a href="#__codelineno-0-1857">1857</a></span>
<span class="normal"><a href="#__codelineno-0-1858">1858</a></span>
<span class="normal"><a href="#__codelineno-0-1859">1859</a></span>
<span class="normal"><a href="#__codelineno-0-1860">1860</a></span>
<span class="normal"><a href="#__codelineno-0-1861">1861</a></span>
<span class="normal"><a href="#__codelineno-0-1862">1862</a></span>
<span class="normal"><a href="#__codelineno-0-1863">1863</a></span>
<span class="normal"><a href="#__codelineno-0-1864">1864</a></span>
<span class="normal"><a href="#__codelineno-0-1865">1865</a></span>
<span class="normal"><a href="#__codelineno-0-1866">1866</a></span>
<span class="normal"><a href="#__codelineno-0-1867">1867</a></span>
<span class="normal"><a href="#__codelineno-0-1868">1868</a></span>
<span class="normal"><a href="#__codelineno-0-1869">1869</a></span>
<span class="normal"><a href="#__codelineno-0-1870">1870</a></span>
<span class="normal"><a href="#__codelineno-0-1871">1871</a></span>
<span class="normal"><a href="#__codelineno-0-1872">1872</a></span>
<span class="normal"><a href="#__codelineno-0-1873">1873</a></span>
<span class="normal"><a href="#__codelineno-0-1874">1874</a></span>
<span class="normal"><a href="#__codelineno-0-1875">1875</a></span>
<span class="normal"><a href="#__codelineno-0-1876">1876</a></span>
<span class="normal"><a href="#__codelineno-0-1877">1877</a></span>
<span class="normal"><a href="#__codelineno-0-1878">1878</a></span>
<span class="normal"><a href="#__codelineno-0-1879">1879</a></span>
<span class="normal"><a href="#__codelineno-0-1880">1880</a></span>
<span class="normal"><a href="#__codelineno-0-1881">1881</a></span>
<span class="normal"><a href="#__codelineno-0-1882">1882</a></span>
<span class="normal"><a href="#__codelineno-0-1883">1883</a></span>
<span class="normal"><a href="#__codelineno-0-1884">1884</a></span>
<span class="normal"><a href="#__codelineno-0-1885">1885</a></span>
<span class="normal"><a href="#__codelineno-0-1886">1886</a></span>
<span class="normal"><a href="#__codelineno-0-1887">1887</a></span>
<span class="normal"><a href="#__codelineno-0-1888">1888</a></span>
<span class="normal"><a href="#__codelineno-0-1889">1889</a></span>
<span class="normal"><a href="#__codelineno-0-1890">1890</a></span>
<span class="normal"><a href="#__codelineno-0-1891">1891</a></span>
<span class="normal"><a href="#__codelineno-0-1892">1892</a></span>
<span class="normal"><a href="#__codelineno-0-1893">1893</a></span>
<span class="normal"><a href="#__codelineno-0-1894">1894</a></span>
<span class="normal"><a href="#__codelineno-0-1895">1895</a></span>
<span class="normal"><a href="#__codelineno-0-1896">1896</a></span>
<span class="normal"><a href="#__codelineno-0-1897">1897</a></span>
<span class="normal"><a href="#__codelineno-0-1898">1898</a></span>
<span class="normal"><a href="#__codelineno-0-1899">1899</a></span>
<span class="normal"><a href="#__codelineno-0-1900">1900</a></span>
<span class="normal"><a href="#__codelineno-0-1901">1901</a></span>
<span class="normal"><a href="#__codelineno-0-1902">1902</a></span>
<span class="normal"><a href="#__codelineno-0-1903">1903</a></span>
<span class="normal"><a href="#__codelineno-0-1904">1904</a></span>
<span class="normal"><a href="#__codelineno-0-1905">1905</a></span>
<span class="normal"><a href="#__codelineno-0-1906">1906</a></span>
<span class="normal"><a href="#__codelineno-0-1907">1907</a></span>
<span class="normal"><a href="#__codelineno-0-1908">1908</a></span>
<span class="normal"><a href="#__codelineno-0-1909">1909</a></span>
<span class="normal"><a href="#__codelineno-0-1910">1910</a></span>
<span class="normal"><a href="#__codelineno-0-1911">1911</a></span>
<span class="normal"><a href="#__codelineno-0-1912">1912</a></span>
<span class="normal"><a href="#__codelineno-0-1913">1913</a></span>
<span class="normal"><a href="#__codelineno-0-1914">1914</a></span>
<span class="normal"><a href="#__codelineno-0-1915">1915</a></span>
<span class="normal"><a href="#__codelineno-0-1916">1916</a></span>
<span class="normal"><a href="#__codelineno-0-1917">1917</a></span>
<span class="normal"><a href="#__codelineno-0-1918">1918</a></span>
<span class="normal"><a href="#__codelineno-0-1919">1919</a></span>
<span class="normal"><a href="#__codelineno-0-1920">1920</a></span>
<span class="normal"><a href="#__codelineno-0-1921">1921</a></span>
<span class="normal"><a href="#__codelineno-0-1922">1922</a></span>
<span class="normal"><a href="#__codelineno-0-1923">1923</a></span>
<span class="normal"><a href="#__codelineno-0-1924">1924</a></span>
<span class="normal"><a href="#__codelineno-0-1925">1925</a></span>
<span class="normal"><a href="#__codelineno-0-1926">1926</a></span>
<span class="normal"><a href="#__codelineno-0-1927">1927</a></span>
<span class="normal"><a href="#__codelineno-0-1928">1928</a></span>
<span class="normal"><a href="#__codelineno-0-1929">1929</a></span>
<span class="normal"><a href="#__codelineno-0-1930">1930</a></span>
<span class="normal"><a href="#__codelineno-0-1931">1931</a></span>
<span class="normal"><a href="#__codelineno-0-1932">1932</a></span>
<span class="normal"><a href="#__codelineno-0-1933">1933</a></span>
<span class="normal"><a href="#__codelineno-0-1934">1934</a></span>
<span class="normal"><a href="#__codelineno-0-1935">1935</a></span>
<span class="normal"><a href="#__codelineno-0-1936">1936</a></span>
<span class="normal"><a href="#__codelineno-0-1937">1937</a></span>
<span class="normal"><a href="#__codelineno-0-1938">1938</a></span>
<span class="normal"><a href="#__codelineno-0-1939">1939</a></span>
<span class="normal"><a href="#__codelineno-0-1940">1940</a></span>
<span class="normal"><a href="#__codelineno-0-1941">1941</a></span>
<span class="normal"><a href="#__codelineno-0-1942">1942</a></span>
<span class="normal"><a href="#__codelineno-0-1943">1943</a></span>
<span class="normal"><a href="#__codelineno-0-1944">1944</a></span>
<span class="normal"><a href="#__codelineno-0-1945">1945</a></span>
<span class="normal"><a href="#__codelineno-0-1946">1946</a></span>
<span class="normal"><a href="#__codelineno-0-1947">1947</a></span>
<span class="normal"><a href="#__codelineno-0-1948">1948</a></span>
<span class="normal"><a href="#__codelineno-0-1949">1949</a></span>
<span class="normal"><a href="#__codelineno-0-1950">1950</a></span>
<span class="normal"><a href="#__codelineno-0-1951">1951</a></span>
<span class="normal"><a href="#__codelineno-0-1952">1952</a></span>
<span class="normal"><a href="#__codelineno-0-1953">1953</a></span>
<span class="normal"><a href="#__codelineno-0-1954">1954</a></span>
<span class="normal"><a href="#__codelineno-0-1955">1955</a></span>
<span class="normal"><a href="#__codelineno-0-1956">1956</a></span>
<span class="normal"><a href="#__codelineno-0-1957">1957</a></span>
<span class="normal"><a href="#__codelineno-0-1958">1958</a></span>
<span class="normal"><a href="#__codelineno-0-1959">1959</a></span>
<span class="normal"><a href="#__codelineno-0-1960">1960</a></span>
<span class="normal"><a href="#__codelineno-0-1961">1961</a></span>
<span class="normal"><a href="#__codelineno-0-1962">1962</a></span>
<span class="normal"><a href="#__codelineno-0-1963">1963</a></span>
<span class="normal"><a href="#__codelineno-0-1964">1964</a></span>
<span class="normal"><a href="#__codelineno-0-1965">1965</a></span>
<span class="normal"><a href="#__codelineno-0-1966">1966</a></span>
<span class="normal"><a href="#__codelineno-0-1967">1967</a></span>
<span class="normal"><a href="#__codelineno-0-1968">1968</a></span>
<span class="normal"><a href="#__codelineno-0-1969">1969</a></span>
<span class="normal"><a href="#__codelineno-0-1970">1970</a></span>
<span class="normal"><a href="#__codelineno-0-1971">1971</a></span>
<span class="normal"><a href="#__codelineno-0-1972">1972</a></span>
<span class="normal"><a href="#__codelineno-0-1973">1973</a></span>
<span class="normal"><a href="#__codelineno-0-1974">1974</a></span>
<span class="normal"><a href="#__codelineno-0-1975">1975</a></span>
<span class="normal"><a href="#__codelineno-0-1976">1976</a></span>
<span class="normal"><a href="#__codelineno-0-1977">1977</a></span>
<span class="normal"><a href="#__codelineno-0-1978">1978</a></span>
<span class="normal"><a href="#__codelineno-0-1979">1979</a></span>
<span class="normal"><a href="#__codelineno-0-1980">1980</a></span>
<span class="normal"><a href="#__codelineno-0-1981">1981</a></span>
<span class="normal"><a href="#__codelineno-0-1982">1982</a></span>
<span class="normal"><a href="#__codelineno-0-1983">1983</a></span>
<span class="normal"><a href="#__codelineno-0-1984">1984</a></span>
<span class="normal"><a href="#__codelineno-0-1985">1985</a></span>
<span class="normal"><a href="#__codelineno-0-1986">1986</a></span>
<span class="normal"><a href="#__codelineno-0-1987">1987</a></span>
<span class="normal"><a href="#__codelineno-0-1988">1988</a></span>
<span class="normal"><a href="#__codelineno-0-1989">1989</a></span>
<span class="normal"><a href="#__codelineno-0-1990">1990</a></span>
<span class="normal"><a href="#__codelineno-0-1991">1991</a></span>
<span class="normal"><a href="#__codelineno-0-1992">1992</a></span>
<span class="normal"><a href="#__codelineno-0-1993">1993</a></span>
<span class="normal"><a href="#__codelineno-0-1994">1994</a></span>
<span class="normal"><a href="#__codelineno-0-1995">1995</a></span>
<span class="normal"><a href="#__codelineno-0-1996">1996</a></span>
<span class="normal"><a href="#__codelineno-0-1997">1997</a></span>
<span class="normal"><a href="#__codelineno-0-1998">1998</a></span>
<span class="normal"><a href="#__codelineno-0-1999">1999</a></span>
<span class="normal"><a href="#__codelineno-0-2000">2000</a></span>
<span class="normal"><a href="#__codelineno-0-2001">2001</a></span>
<span class="normal"><a href="#__codelineno-0-2002">2002</a></span>
<span class="normal"><a href="#__codelineno-0-2003">2003</a></span>
<span class="normal"><a href="#__codelineno-0-2004">2004</a></span>
<span class="normal"><a href="#__codelineno-0-2005">2005</a></span>
<span class="normal"><a href="#__codelineno-0-2006">2006</a></span>
<span class="normal"><a href="#__codelineno-0-2007">2007</a></span>
<span class="normal"><a href="#__codelineno-0-2008">2008</a></span>
<span class="normal"><a href="#__codelineno-0-2009">2009</a></span>
<span class="normal"><a href="#__codelineno-0-2010">2010</a></span>
<span class="normal"><a href="#__codelineno-0-2011">2011</a></span>
<span class="normal"><a href="#__codelineno-0-2012">2012</a></span>
<span class="normal"><a href="#__codelineno-0-2013">2013</a></span>
<span class="normal"><a href="#__codelineno-0-2014">2014</a></span>
<span class="normal"><a href="#__codelineno-0-2015">2015</a></span>
<span class="normal"><a href="#__codelineno-0-2016">2016</a></span>
<span class="normal"><a href="#__codelineno-0-2017">2017</a></span>
<span class="normal"><a href="#__codelineno-0-2018">2018</a></span>
<span class="normal"><a href="#__codelineno-0-2019">2019</a></span>
<span class="normal"><a href="#__codelineno-0-2020">2020</a></span>
<span class="normal"><a href="#__codelineno-0-2021">2021</a></span>
<span class="normal"><a href="#__codelineno-0-2022">2022</a></span>
<span class="normal"><a href="#__codelineno-0-2023">2023</a></span>
<span class="normal"><a href="#__codelineno-0-2024">2024</a></span>
<span class="normal"><a href="#__codelineno-0-2025">2025</a></span>
<span class="normal"><a href="#__codelineno-0-2026">2026</a></span>
<span class="normal"><a href="#__codelineno-0-2027">2027</a></span>
<span class="normal"><a href="#__codelineno-0-2028">2028</a></span>
<span class="normal"><a href="#__codelineno-0-2029">2029</a></span>
<span class="normal"><a href="#__codelineno-0-2030">2030</a></span>
<span class="normal"><a href="#__codelineno-0-2031">2031</a></span>
<span class="normal"><a href="#__codelineno-0-2032">2032</a></span>
<span class="normal"><a href="#__codelineno-0-2033">2033</a></span>
<span class="normal"><a href="#__codelineno-0-2034">2034</a></span>
<span class="normal"><a href="#__codelineno-0-2035">2035</a></span>
<span class="normal"><a href="#__codelineno-0-2036">2036</a></span>
<span class="normal"><a href="#__codelineno-0-2037">2037</a></span>
<span class="normal"><a href="#__codelineno-0-2038">2038</a></span>
<span class="normal"><a href="#__codelineno-0-2039">2039</a></span>
<span class="normal"><a href="#__codelineno-0-2040">2040</a></span>
<span class="normal"><a href="#__codelineno-0-2041">2041</a></span>
<span class="normal"><a href="#__codelineno-0-2042">2042</a></span>
<span class="normal"><a href="#__codelineno-0-2043">2043</a></span>
<span class="normal"><a href="#__codelineno-0-2044">2044</a></span>
<span class="normal"><a href="#__codelineno-0-2045">2045</a></span>
<span class="normal"><a href="#__codelineno-0-2046">2046</a></span>
<span class="normal"><a href="#__codelineno-0-2047">2047</a></span>
<span class="normal"><a href="#__codelineno-0-2048">2048</a></span>
<span class="normal"><a href="#__codelineno-0-2049">2049</a></span>
<span class="normal"><a href="#__codelineno-0-2050">2050</a></span>
<span class="normal"><a href="#__codelineno-0-2051">2051</a></span>
<span class="normal"><a href="#__codelineno-0-2052">2052</a></span>
<span class="normal"><a href="#__codelineno-0-2053">2053</a></span>
<span class="normal"><a href="#__codelineno-0-2054">2054</a></span>
<span class="normal"><a href="#__codelineno-0-2055">2055</a></span>
<span class="normal"><a href="#__codelineno-0-2056">2056</a></span>
<span class="normal"><a href="#__codelineno-0-2057">2057</a></span>
<span class="normal"><a href="#__codelineno-0-2058">2058</a></span>
<span class="normal"><a href="#__codelineno-0-2059">2059</a></span>
<span class="normal"><a href="#__codelineno-0-2060">2060</a></span>
<span class="normal"><a href="#__codelineno-0-2061">2061</a></span>
<span class="normal"><a href="#__codelineno-0-2062">2062</a></span>
<span class="normal"><a href="#__codelineno-0-2063">2063</a></span>
<span class="normal"><a href="#__codelineno-0-2064">2064</a></span>
<span class="normal"><a href="#__codelineno-0-2065">2065</a></span>
<span class="normal"><a href="#__codelineno-0-2066">2066</a></span>
<span class="normal"><a href="#__codelineno-0-2067">2067</a></span>
<span class="normal"><a href="#__codelineno-0-2068">2068</a></span>
<span class="normal"><a href="#__codelineno-0-2069">2069</a></span>
<span class="normal"><a href="#__codelineno-0-2070">2070</a></span>
<span class="normal"><a href="#__codelineno-0-2071">2071</a></span>
<span class="normal"><a href="#__codelineno-0-2072">2072</a></span>
<span class="normal"><a href="#__codelineno-0-2073">2073</a></span>
<span class="normal"><a href="#__codelineno-0-2074">2074</a></span>
<span class="normal"><a href="#__codelineno-0-2075">2075</a></span>
<span class="normal"><a href="#__codelineno-0-2076">2076</a></span>
<span class="normal"><a href="#__codelineno-0-2077">2077</a></span>
<span class="normal"><a href="#__codelineno-0-2078">2078</a></span>
<span class="normal"><a href="#__codelineno-0-2079">2079</a></span>
<span class="normal"><a href="#__codelineno-0-2080">2080</a></span>
<span class="normal"><a href="#__codelineno-0-2081">2081</a></span>
<span class="normal"><a href="#__codelineno-0-2082">2082</a></span>
<span class="normal"><a href="#__codelineno-0-2083">2083</a></span>
<span class="normal"><a href="#__codelineno-0-2084">2084</a></span>
<span class="normal"><a href="#__codelineno-0-2085">2085</a></span>
<span class="normal"><a href="#__codelineno-0-2086">2086</a></span>
<span class="normal"><a href="#__codelineno-0-2087">2087</a></span>
<span class="normal"><a href="#__codelineno-0-2088">2088</a></span>
<span class="normal"><a href="#__codelineno-0-2089">2089</a></span>
<span class="normal"><a href="#__codelineno-0-2090">2090</a></span>
<span class="normal"><a href="#__codelineno-0-2091">2091</a></span>
<span class="normal"><a href="#__codelineno-0-2092">2092</a></span>
<span class="normal"><a href="#__codelineno-0-2093">2093</a></span>
<span class="normal"><a href="#__codelineno-0-2094">2094</a></span>
<span class="normal"><a href="#__codelineno-0-2095">2095</a></span>
<span class="normal"><a href="#__codelineno-0-2096">2096</a></span>
<span class="normal"><a href="#__codelineno-0-2097">2097</a></span>
<span class="normal"><a href="#__codelineno-0-2098">2098</a></span>
<span class="normal"><a href="#__codelineno-0-2099">2099</a></span>
<span class="normal"><a href="#__codelineno-0-2100">2100</a></span>
<span class="normal"><a href="#__codelineno-0-2101">2101</a></span>
<span class="normal"><a href="#__codelineno-0-2102">2102</a></span>
<span class="normal"><a href="#__codelineno-0-2103">2103</a></span>
<span class="normal"><a href="#__codelineno-0-2104">2104</a></span>
<span class="normal"><a href="#__codelineno-0-2105">2105</a></span>
<span class="normal"><a href="#__codelineno-0-2106">2106</a></span>
<span class="normal"><a href="#__codelineno-0-2107">2107</a></span>
<span class="normal"><a href="#__codelineno-0-2108">2108</a></span>
<span class="normal"><a href="#__codelineno-0-2109">2109</a></span>
<span class="normal"><a href="#__codelineno-0-2110">2110</a></span>
<span class="normal"><a href="#__codelineno-0-2111">2111</a></span>
<span class="normal"><a href="#__codelineno-0-2112">2112</a></span>
<span class="normal"><a href="#__codelineno-0-2113">2113</a></span>
<span class="normal"><a href="#__codelineno-0-2114">2114</a></span>
<span class="normal"><a href="#__codelineno-0-2115">2115</a></span>
<span class="normal"><a href="#__codelineno-0-2116">2116</a></span>
<span class="normal"><a href="#__codelineno-0-2117">2117</a></span>
<span class="normal"><a href="#__codelineno-0-2118">2118</a></span>
<span class="normal"><a href="#__codelineno-0-2119">2119</a></span>
<span class="normal"><a href="#__codelineno-0-2120">2120</a></span>
<span class="normal"><a href="#__codelineno-0-2121">2121</a></span>
<span class="normal"><a href="#__codelineno-0-2122">2122</a></span>
<span class="normal"><a href="#__codelineno-0-2123">2123</a></span>
<span class="normal"><a href="#__codelineno-0-2124">2124</a></span>
<span class="normal"><a href="#__codelineno-0-2125">2125</a></span>
<span class="normal"><a href="#__codelineno-0-2126">2126</a></span>
<span class="normal"><a href="#__codelineno-0-2127">2127</a></span>
<span class="normal"><a href="#__codelineno-0-2128">2128</a></span>
<span class="normal"><a href="#__codelineno-0-2129">2129</a></span>
<span class="normal"><a href="#__codelineno-0-2130">2130</a></span>
<span class="normal"><a href="#__codelineno-0-2131">2131</a></span>
<span class="normal"><a href="#__codelineno-0-2132">2132</a></span>
<span class="normal"><a href="#__codelineno-0-2133">2133</a></span>
<span class="normal"><a href="#__codelineno-0-2134">2134</a></span>
<span class="normal"><a href="#__codelineno-0-2135">2135</a></span>
<span class="normal"><a href="#__codelineno-0-2136">2136</a></span>
<span class="normal"><a href="#__codelineno-0-2137">2137</a></span>
<span class="normal"><a href="#__codelineno-0-2138">2138</a></span>
<span class="normal"><a href="#__codelineno-0-2139">2139</a></span>
<span class="normal"><a href="#__codelineno-0-2140">2140</a></span>
<span class="normal"><a href="#__codelineno-0-2141">2141</a></span>
<span class="normal"><a href="#__codelineno-0-2142">2142</a></span>
<span class="normal"><a href="#__codelineno-0-2143">2143</a></span>
<span class="normal"><a href="#__codelineno-0-2144">2144</a></span>
<span class="normal"><a href="#__codelineno-0-2145">2145</a></span>
<span class="normal"><a href="#__codelineno-0-2146">2146</a></span>
<span class="normal"><a href="#__codelineno-0-2147">2147</a></span>
<span class="normal"><a href="#__codelineno-0-2148">2148</a></span>
<span class="normal"><a href="#__codelineno-0-2149">2149</a></span>
<span class="normal"><a href="#__codelineno-0-2150">2150</a></span>
<span class="normal"><a href="#__codelineno-0-2151">2151</a></span>
<span class="normal"><a href="#__codelineno-0-2152">2152</a></span>
<span class="normal"><a href="#__codelineno-0-2153">2153</a></span>
<span class="normal"><a href="#__codelineno-0-2154">2154</a></span>
<span class="normal"><a href="#__codelineno-0-2155">2155</a></span>
<span class="normal"><a href="#__codelineno-0-2156">2156</a></span>
<span class="normal"><a href="#__codelineno-0-2157">2157</a></span>
<span class="normal"><a href="#__codelineno-0-2158">2158</a></span>
<span class="normal"><a href="#__codelineno-0-2159">2159</a></span>
<span class="normal"><a href="#__codelineno-0-2160">2160</a></span>
<span class="normal"><a href="#__codelineno-0-2161">2161</a></span>
<span class="normal"><a href="#__codelineno-0-2162">2162</a></span>
<span class="normal"><a href="#__codelineno-0-2163">2163</a></span>
<span class="normal"><a href="#__codelineno-0-2164">2164</a></span>
<span class="normal"><a href="#__codelineno-0-2165">2165</a></span>
<span class="normal"><a href="#__codelineno-0-2166">2166</a></span>
<span class="normal"><a href="#__codelineno-0-2167">2167</a></span>
<span class="normal"><a href="#__codelineno-0-2168">2168</a></span>
<span class="normal"><a href="#__codelineno-0-2169">2169</a></span>
<span class="normal"><a href="#__codelineno-0-2170">2170</a></span>
<span class="normal"><a href="#__codelineno-0-2171">2171</a></span>
<span class="normal"><a href="#__codelineno-0-2172">2172</a></span>
<span class="normal"><a href="#__codelineno-0-2173">2173</a></span>
<span class="normal"><a href="#__codelineno-0-2174">2174</a></span>
<span class="normal"><a href="#__codelineno-0-2175">2175</a></span>
<span class="normal"><a href="#__codelineno-0-2176">2176</a></span>
<span class="normal"><a href="#__codelineno-0-2177">2177</a></span>
<span class="normal"><a href="#__codelineno-0-2178">2178</a></span>
<span class="normal"><a href="#__codelineno-0-2179">2179</a></span>
<span class="normal"><a href="#__codelineno-0-2180">2180</a></span>
<span class="normal"><a href="#__codelineno-0-2181">2181</a></span>
<span class="normal"><a href="#__codelineno-0-2182">2182</a></span>
<span class="normal"><a href="#__codelineno-0-2183">2183</a></span>
<span class="normal"><a href="#__codelineno-0-2184">2184</a></span>
<span class="normal"><a href="#__codelineno-0-2185">2185</a></span>
<span class="normal"><a href="#__codelineno-0-2186">2186</a></span>
<span class="normal"><a href="#__codelineno-0-2187">2187</a></span>
<span class="normal"><a href="#__codelineno-0-2188">2188</a></span>
<span class="normal"><a href="#__codelineno-0-2189">2189</a></span>
<span class="normal"><a href="#__codelineno-0-2190">2190</a></span>
<span class="normal"><a href="#__codelineno-0-2191">2191</a></span>
<span class="normal"><a href="#__codelineno-0-2192">2192</a></span>
<span class="normal"><a href="#__codelineno-0-2193">2193</a></span>
<span class="normal"><a href="#__codelineno-0-2194">2194</a></span>
<span class="normal"><a href="#__codelineno-0-2195">2195</a></span>
<span class="normal"><a href="#__codelineno-0-2196">2196</a></span>
<span class="normal"><a href="#__codelineno-0-2197">2197</a></span>
<span class="normal"><a href="#__codelineno-0-2198">2198</a></span>
<span class="normal"><a href="#__codelineno-0-2199">2199</a></span>
<span class="normal"><a href="#__codelineno-0-2200">2200</a></span>
<span class="normal"><a href="#__codelineno-0-2201">2201</a></span>
<span class="normal"><a href="#__codelineno-0-2202">2202</a></span>
<span class="normal"><a href="#__codelineno-0-2203">2203</a></span>
<span class="normal"><a href="#__codelineno-0-2204">2204</a></span>
<span class="normal"><a href="#__codelineno-0-2205">2205</a></span>
<span class="normal"><a href="#__codelineno-0-2206">2206</a></span>
<span class="normal"><a href="#__codelineno-0-2207">2207</a></span>
<span class="normal"><a href="#__codelineno-0-2208">2208</a></span>
<span class="normal"><a href="#__codelineno-0-2209">2209</a></span>
<span class="normal"><a href="#__codelineno-0-2210">2210</a></span>
<span class="normal"><a href="#__codelineno-0-2211">2211</a></span>
<span class="normal"><a href="#__codelineno-0-2212">2212</a></span>
<span class="normal"><a href="#__codelineno-0-2213">2213</a></span>
<span class="normal"><a href="#__codelineno-0-2214">2214</a></span>
<span class="normal"><a href="#__codelineno-0-2215">2215</a></span>
<span class="normal"><a href="#__codelineno-0-2216">2216</a></span>
<span class="normal"><a href="#__codelineno-0-2217">2217</a></span>
<span class="normal"><a href="#__codelineno-0-2218">2218</a></span>
<span class="normal"><a href="#__codelineno-0-2219">2219</a></span>
<span class="normal"><a href="#__codelineno-0-2220">2220</a></span>
<span class="normal"><a href="#__codelineno-0-2221">2221</a></span>
<span class="normal"><a href="#__codelineno-0-2222">2222</a></span>
<span class="normal"><a href="#__codelineno-0-2223">2223</a></span>
<span class="normal"><a href="#__codelineno-0-2224">2224</a></span>
<span class="normal"><a href="#__codelineno-0-2225">2225</a></span>
<span class="normal"><a href="#__codelineno-0-2226">2226</a></span>
<span class="normal"><a href="#__codelineno-0-2227">2227</a></span>
<span class="normal"><a href="#__codelineno-0-2228">2228</a></span>
<span class="normal"><a href="#__codelineno-0-2229">2229</a></span>
<span class="normal"><a href="#__codelineno-0-2230">2230</a></span>
<span class="normal"><a href="#__codelineno-0-2231">2231</a></span>
<span class="normal"><a href="#__codelineno-0-2232">2232</a></span>
<span class="normal"><a href="#__codelineno-0-2233">2233</a></span>
<span class="normal"><a href="#__codelineno-0-2234">2234</a></span>
<span class="normal"><a href="#__codelineno-0-2235">2235</a></span>
<span class="normal"><a href="#__codelineno-0-2236">2236</a></span>
<span class="normal"><a href="#__codelineno-0-2237">2237</a></span>
<span class="normal"><a href="#__codelineno-0-2238">2238</a></span>
<span class="normal"><a href="#__codelineno-0-2239">2239</a></span>
<span class="normal"><a href="#__codelineno-0-2240">2240</a></span>
<span class="normal"><a href="#__codelineno-0-2241">2241</a></span>
<span class="normal"><a href="#__codelineno-0-2242">2242</a></span>
<span class="normal"><a href="#__codelineno-0-2243">2243</a></span>
<span class="normal"><a href="#__codelineno-0-2244">2244</a></span>
<span class="normal"><a href="#__codelineno-0-2245">2245</a></span>
<span class="normal"><a href="#__codelineno-0-2246">2246</a></span>
<span class="normal"><a href="#__codelineno-0-2247">2247</a></span>
<span class="normal"><a href="#__codelineno-0-2248">2248</a></span>
<span class="normal"><a href="#__codelineno-0-2249">2249</a></span>
<span class="normal"><a href="#__codelineno-0-2250">2250</a></span>
<span class="normal"><a href="#__codelineno-0-2251">2251</a></span>
<span class="normal"><a href="#__codelineno-0-2252">2252</a></span>
<span class="normal"><a href="#__codelineno-0-2253">2253</a></span>
<span class="normal"><a href="#__codelineno-0-2254">2254</a></span>
<span class="normal"><a href="#__codelineno-0-2255">2255</a></span>
<span class="normal"><a href="#__codelineno-0-2256">2256</a></span>
<span class="normal"><a href="#__codelineno-0-2257">2257</a></span>
<span class="normal"><a href="#__codelineno-0-2258">2258</a></span>
<span class="normal"><a href="#__codelineno-0-2259">2259</a></span>
<span class="normal"><a href="#__codelineno-0-2260">2260</a></span>
<span class="normal"><a href="#__codelineno-0-2261">2261</a></span>
<span class="normal"><a href="#__codelineno-0-2262">2262</a></span>
<span class="normal"><a href="#__codelineno-0-2263">2263</a></span>
<span class="normal"><a href="#__codelineno-0-2264">2264</a></span>
<span class="normal"><a href="#__codelineno-0-2265">2265</a></span>
<span class="normal"><a href="#__codelineno-0-2266">2266</a></span>
<span class="normal"><a href="#__codelineno-0-2267">2267</a></span>
<span class="normal"><a href="#__codelineno-0-2268">2268</a></span>
<span class="normal"><a href="#__codelineno-0-2269">2269</a></span>
<span class="normal"><a href="#__codelineno-0-2270">2270</a></span>
<span class="normal"><a href="#__codelineno-0-2271">2271</a></span>
<span class="normal"><a href="#__codelineno-0-2272">2272</a></span>
<span class="normal"><a href="#__codelineno-0-2273">2273</a></span>
<span class="normal"><a href="#__codelineno-0-2274">2274</a></span>
<span class="normal"><a href="#__codelineno-0-2275">2275</a></span>
<span class="normal"><a href="#__codelineno-0-2276">2276</a></span>
<span class="normal"><a href="#__codelineno-0-2277">2277</a></span>
<span class="normal"><a href="#__codelineno-0-2278">2278</a></span>
<span class="normal"><a href="#__codelineno-0-2279">2279</a></span>
<span class="normal"><a href="#__codelineno-0-2280">2280</a></span>
<span class="normal"><a href="#__codelineno-0-2281">2281</a></span>
<span class="normal"><a href="#__codelineno-0-2282">2282</a></span>
<span class="normal"><a href="#__codelineno-0-2283">2283</a></span>
<span class="normal"><a href="#__codelineno-0-2284">2284</a></span>
<span class="normal"><a href="#__codelineno-0-2285">2285</a></span>
<span class="normal"><a href="#__codelineno-0-2286">2286</a></span>
<span class="normal"><a href="#__codelineno-0-2287">2287</a></span>
<span class="normal"><a href="#__codelineno-0-2288">2288</a></span>
<span class="normal"><a href="#__codelineno-0-2289">2289</a></span>
<span class="normal"><a href="#__codelineno-0-2290">2290</a></span>
<span class="normal"><a href="#__codelineno-0-2291">2291</a></span>
<span class="normal"><a href="#__codelineno-0-2292">2292</a></span>
<span class="normal"><a href="#__codelineno-0-2293">2293</a></span>
<span class="normal"><a href="#__codelineno-0-2294">2294</a></span>
<span class="normal"><a href="#__codelineno-0-2295">2295</a></span>
<span class="normal"><a href="#__codelineno-0-2296">2296</a></span>
<span class="normal"><a href="#__codelineno-0-2297">2297</a></span>
<span class="normal"><a href="#__codelineno-0-2298">2298</a></span>
<span class="normal"><a href="#__codelineno-0-2299">2299</a></span>
<span class="normal"><a href="#__codelineno-0-2300">2300</a></span>
<span class="normal"><a href="#__codelineno-0-2301">2301</a></span>
<span class="normal"><a href="#__codelineno-0-2302">2302</a></span>
<span class="normal"><a href="#__codelineno-0-2303">2303</a></span>
<span class="normal"><a href="#__codelineno-0-2304">2304</a></span>
<span class="normal"><a href="#__codelineno-0-2305">2305</a></span>
<span class="normal"><a href="#__codelineno-0-2306">2306</a></span>
<span class="normal"><a href="#__codelineno-0-2307">2307</a></span>
<span class="normal"><a href="#__codelineno-0-2308">2308</a></span>
<span class="normal"><a href="#__codelineno-0-2309">2309</a></span>
<span class="normal"><a href="#__codelineno-0-2310">2310</a></span>
<span class="normal"><a href="#__codelineno-0-2311">2311</a></span>
<span class="normal"><a href="#__codelineno-0-2312">2312</a></span>
<span class="normal"><a href="#__codelineno-0-2313">2313</a></span>
<span class="normal"><a href="#__codelineno-0-2314">2314</a></span>
<span class="normal"><a href="#__codelineno-0-2315">2315</a></span>
<span class="normal"><a href="#__codelineno-0-2316">2316</a></span>
<span class="normal"><a href="#__codelineno-0-2317">2317</a></span>
<span class="normal"><a href="#__codelineno-0-2318">2318</a></span>
<span class="normal"><a href="#__codelineno-0-2319">2319</a></span>
<span class="normal"><a href="#__codelineno-0-2320">2320</a></span>
<span class="normal"><a href="#__codelineno-0-2321">2321</a></span>
<span class="normal"><a href="#__codelineno-0-2322">2322</a></span>
<span class="normal"><a href="#__codelineno-0-2323">2323</a></span>
<span class="normal"><a href="#__codelineno-0-2324">2324</a></span>
<span class="normal"><a href="#__codelineno-0-2325">2325</a></span>
<span class="normal"><a href="#__codelineno-0-2326">2326</a></span>
<span class="normal"><a href="#__codelineno-0-2327">2327</a></span>
<span class="normal"><a href="#__codelineno-0-2328">2328</a></span>
<span class="normal"><a href="#__codelineno-0-2329">2329</a></span>
<span class="normal"><a href="#__codelineno-0-2330">2330</a></span>
<span class="normal"><a href="#__codelineno-0-2331">2331</a></span>
<span class="normal"><a href="#__codelineno-0-2332">2332</a></span>
<span class="normal"><a href="#__codelineno-0-2333">2333</a></span>
<span class="normal"><a href="#__codelineno-0-2334">2334</a></span>
<span class="normal"><a href="#__codelineno-0-2335">2335</a></span>
<span class="normal"><a href="#__codelineno-0-2336">2336</a></span>
<span class="normal"><a href="#__codelineno-0-2337">2337</a></span>
<span class="normal"><a href="#__codelineno-0-2338">2338</a></span>
<span class="normal"><a href="#__codelineno-0-2339">2339</a></span>
<span class="normal"><a href="#__codelineno-0-2340">2340</a></span>
<span class="normal"><a href="#__codelineno-0-2341">2341</a></span>
<span class="normal"><a href="#__codelineno-0-2342">2342</a></span>
<span class="normal"><a href="#__codelineno-0-2343">2343</a></span>
<span class="normal"><a href="#__codelineno-0-2344">2344</a></span>
<span class="normal"><a href="#__codelineno-0-2345">2345</a></span>
<span class="normal"><a href="#__codelineno-0-2346">2346</a></span>
<span class="normal"><a href="#__codelineno-0-2347">2347</a></span>
<span class="normal"><a href="#__codelineno-0-2348">2348</a></span>
<span class="normal"><a href="#__codelineno-0-2349">2349</a></span>
<span class="normal"><a href="#__codelineno-0-2350">2350</a></span>
<span class="normal"><a href="#__codelineno-0-2351">2351</a></span>
<span class="normal"><a href="#__codelineno-0-2352">2352</a></span>
<span class="normal"><a href="#__codelineno-0-2353">2353</a></span>
<span class="normal"><a href="#__codelineno-0-2354">2354</a></span>
<span class="normal"><a href="#__codelineno-0-2355">2355</a></span>
<span class="normal"><a href="#__codelineno-0-2356">2356</a></span>
<span class="normal"><a href="#__codelineno-0-2357">2357</a></span>
<span class="normal"><a href="#__codelineno-0-2358">2358</a></span>
<span class="normal"><a href="#__codelineno-0-2359">2359</a></span>
<span class="normal"><a href="#__codelineno-0-2360">2360</a></span>
<span class="normal"><a href="#__codelineno-0-2361">2361</a></span>
<span class="normal"><a href="#__codelineno-0-2362">2362</a></span>
<span class="normal"><a href="#__codelineno-0-2363">2363</a></span>
<span class="normal"><a href="#__codelineno-0-2364">2364</a></span>
<span class="normal"><a href="#__codelineno-0-2365">2365</a></span>
<span class="normal"><a href="#__codelineno-0-2366">2366</a></span>
<span class="normal"><a href="#__codelineno-0-2367">2367</a></span>
<span class="normal"><a href="#__codelineno-0-2368">2368</a></span>
<span class="normal"><a href="#__codelineno-0-2369">2369</a></span>
<span class="normal"><a href="#__codelineno-0-2370">2370</a></span>
<span class="normal"><a href="#__codelineno-0-2371">2371</a></span>
<span class="normal"><a href="#__codelineno-0-2372">2372</a></span>
<span class="normal"><a href="#__codelineno-0-2373">2373</a></span>
<span class="normal"><a href="#__codelineno-0-2374">2374</a></span>
<span class="normal"><a href="#__codelineno-0-2375">2375</a></span>
<span class="normal"><a href="#__codelineno-0-2376">2376</a></span>
<span class="normal"><a href="#__codelineno-0-2377">2377</a></span>
<span class="normal"><a href="#__codelineno-0-2378">2378</a></span>
<span class="normal"><a href="#__codelineno-0-2379">2379</a></span>
<span class="normal"><a href="#__codelineno-0-2380">2380</a></span>
<span class="normal"><a href="#__codelineno-0-2381">2381</a></span>
<span class="normal"><a href="#__codelineno-0-2382">2382</a></span>
<span class="normal"><a href="#__codelineno-0-2383">2383</a></span>
<span class="normal"><a href="#__codelineno-0-2384">2384</a></span>
<span class="normal"><a href="#__codelineno-0-2385">2385</a></span>
<span class="normal"><a href="#__codelineno-0-2386">2386</a></span>
<span class="normal"><a href="#__codelineno-0-2387">2387</a></span>
<span class="normal"><a href="#__codelineno-0-2388">2388</a></span>
<span class="normal"><a href="#__codelineno-0-2389">2389</a></span>
<span class="normal"><a href="#__codelineno-0-2390">2390</a></span>
<span class="normal"><a href="#__codelineno-0-2391">2391</a></span>
<span class="normal"><a href="#__codelineno-0-2392">2392</a></span>
<span class="normal"><a href="#__codelineno-0-2393">2393</a></span>
<span class="normal"><a href="#__codelineno-0-2394">2394</a></span>
<span class="normal"><a href="#__codelineno-0-2395">2395</a></span>
<span class="normal"><a href="#__codelineno-0-2396">2396</a></span>
<span class="normal"><a href="#__codelineno-0-2397">2397</a></span>
<span class="normal"><a href="#__codelineno-0-2398">2398</a></span>
<span class="normal"><a href="#__codelineno-0-2399">2399</a></span>
<span class="normal"><a href="#__codelineno-0-2400">2400</a></span>
<span class="normal"><a href="#__codelineno-0-2401">2401</a></span>
<span class="normal"><a href="#__codelineno-0-2402">2402</a></span>
<span class="normal"><a href="#__codelineno-0-2403">2403</a></span>
<span class="normal"><a href="#__codelineno-0-2404">2404</a></span>
<span class="normal"><a href="#__codelineno-0-2405">2405</a></span>
<span class="normal"><a href="#__codelineno-0-2406">2406</a></span>
<span class="normal"><a href="#__codelineno-0-2407">2407</a></span>
<span class="normal"><a href="#__codelineno-0-2408">2408</a></span>
<span class="normal"><a href="#__codelineno-0-2409">2409</a></span>
<span class="normal"><a href="#__codelineno-0-2410">2410</a></span>
<span class="normal"><a href="#__codelineno-0-2411">2411</a></span>
<span class="normal"><a href="#__codelineno-0-2412">2412</a></span>
<span class="normal"><a href="#__codelineno-0-2413">2413</a></span>
<span class="normal"><a href="#__codelineno-0-2414">2414</a></span>
<span class="normal"><a href="#__codelineno-0-2415">2415</a></span>
<span class="normal"><a href="#__codelineno-0-2416">2416</a></span>
<span class="normal"><a href="#__codelineno-0-2417">2417</a></span>
<span class="normal"><a href="#__codelineno-0-2418">2418</a></span>
<span class="normal"><a href="#__codelineno-0-2419">2419</a></span>
<span class="normal"><a href="#__codelineno-0-2420">2420</a></span>
<span class="normal"><a href="#__codelineno-0-2421">2421</a></span>
<span class="normal"><a href="#__codelineno-0-2422">2422</a></span>
<span class="normal"><a href="#__codelineno-0-2423">2423</a></span>
<span class="normal"><a href="#__codelineno-0-2424">2424</a></span>
<span class="normal"><a href="#__codelineno-0-2425">2425</a></span>
<span class="normal"><a href="#__codelineno-0-2426">2426</a></span>
<span class="normal"><a href="#__codelineno-0-2427">2427</a></span>
<span class="normal"><a href="#__codelineno-0-2428">2428</a></span>
<span class="normal"><a href="#__codelineno-0-2429">2429</a></span>
<span class="normal"><a href="#__codelineno-0-2430">2430</a></span>
<span class="normal"><a href="#__codelineno-0-2431">2431</a></span>
<span class="normal"><a href="#__codelineno-0-2432">2432</a></span>
<span class="normal"><a href="#__codelineno-0-2433">2433</a></span>
<span class="normal"><a href="#__codelineno-0-2434">2434</a></span>
<span class="normal"><a href="#__codelineno-0-2435">2435</a></span>
<span class="normal"><a href="#__codelineno-0-2436">2436</a></span>
<span class="normal"><a href="#__codelineno-0-2437">2437</a></span>
<span class="normal"><a href="#__codelineno-0-2438">2438</a></span>
<span class="normal"><a href="#__codelineno-0-2439">2439</a></span>
<span class="normal"><a href="#__codelineno-0-2440">2440</a></span>
<span class="normal"><a href="#__codelineno-0-2441">2441</a></span>
<span class="normal"><a href="#__codelineno-0-2442">2442</a></span>
<span class="normal"><a href="#__codelineno-0-2443">2443</a></span>
<span class="normal"><a href="#__codelineno-0-2444">2444</a></span>
<span class="normal"><a href="#__codelineno-0-2445">2445</a></span>
<span class="normal"><a href="#__codelineno-0-2446">2446</a></span>
<span class="normal"><a href="#__codelineno-0-2447">2447</a></span>
<span class="normal"><a href="#__codelineno-0-2448">2448</a></span>
<span class="normal"><a href="#__codelineno-0-2449">2449</a></span>
<span class="normal"><a href="#__codelineno-0-2450">2450</a></span>
<span class="normal"><a href="#__codelineno-0-2451">2451</a></span>
<span class="normal"><a href="#__codelineno-0-2452">2452</a></span>
<span class="normal"><a href="#__codelineno-0-2453">2453</a></span>
<span class="normal"><a href="#__codelineno-0-2454">2454</a></span>
<span class="normal"><a href="#__codelineno-0-2455">2455</a></span>
<span class="normal"><a href="#__codelineno-0-2456">2456</a></span>
<span class="normal"><a href="#__codelineno-0-2457">2457</a></span>
<span class="normal"><a href="#__codelineno-0-2458">2458</a></span>
<span class="normal"><a href="#__codelineno-0-2459">2459</a></span>
<span class="normal"><a href="#__codelineno-0-2460">2460</a></span>
<span class="normal"><a href="#__codelineno-0-2461">2461</a></span>
<span class="normal"><a href="#__codelineno-0-2462">2462</a></span>
<span class="normal"><a href="#__codelineno-0-2463">2463</a></span>
<span class="normal"><a href="#__codelineno-0-2464">2464</a></span>
<span class="normal"><a href="#__codelineno-0-2465">2465</a></span>
<span class="normal"><a href="#__codelineno-0-2466">2466</a></span>
<span class="normal"><a href="#__codelineno-0-2467">2467</a></span>
<span class="normal"><a href="#__codelineno-0-2468">2468</a></span>
<span class="normal"><a href="#__codelineno-0-2469">2469</a></span>
<span class="normal"><a href="#__codelineno-0-2470">2470</a></span>
<span class="normal"><a href="#__codelineno-0-2471">2471</a></span>
<span class="normal"><a href="#__codelineno-0-2472">2472</a></span>
<span class="normal"><a href="#__codelineno-0-2473">2473</a></span>
<span class="normal"><a href="#__codelineno-0-2474">2474</a></span>
<span class="normal"><a href="#__codelineno-0-2475">2475</a></span>
<span class="normal"><a href="#__codelineno-0-2476">2476</a></span>
<span class="normal"><a href="#__codelineno-0-2477">2477</a></span>
<span class="normal"><a href="#__codelineno-0-2478">2478</a></span>
<span class="normal"><a href="#__codelineno-0-2479">2479</a></span>
<span class="normal"><a href="#__codelineno-0-2480">2480</a></span>
<span class="normal"><a href="#__codelineno-0-2481">2481</a></span>
<span class="normal"><a href="#__codelineno-0-2482">2482</a></span>
<span class="normal"><a href="#__codelineno-0-2483">2483</a></span>
<span class="normal"><a href="#__codelineno-0-2484">2484</a></span>
<span class="normal"><a href="#__codelineno-0-2485">2485</a></span>
<span class="normal"><a href="#__codelineno-0-2486">2486</a></span>
<span class="normal"><a href="#__codelineno-0-2487">2487</a></span>
<span class="normal"><a href="#__codelineno-0-2488">2488</a></span>
<span class="normal"><a href="#__codelineno-0-2489">2489</a></span>
<span class="normal"><a href="#__codelineno-0-2490">2490</a></span>
<span class="normal"><a href="#__codelineno-0-2491">2491</a></span>
<span class="normal"><a href="#__codelineno-0-2492">2492</a></span>
<span class="normal"><a href="#__codelineno-0-2493">2493</a></span>
<span class="normal"><a href="#__codelineno-0-2494">2494</a></span>
<span class="normal"><a href="#__codelineno-0-2495">2495</a></span>
<span class="normal"><a href="#__codelineno-0-2496">2496</a></span>
<span class="normal"><a href="#__codelineno-0-2497">2497</a></span>
<span class="normal"><a href="#__codelineno-0-2498">2498</a></span>
<span class="normal"><a href="#__codelineno-0-2499">2499</a></span>
<span class="normal"><a href="#__codelineno-0-2500">2500</a></span>
<span class="normal"><a href="#__codelineno-0-2501">2501</a></span>
<span class="normal"><a href="#__codelineno-0-2502">2502</a></span>
<span class="normal"><a href="#__codelineno-0-2503">2503</a></span>
<span class="normal"><a href="#__codelineno-0-2504">2504</a></span>
<span class="normal"><a href="#__codelineno-0-2505">2505</a></span>
<span class="normal"><a href="#__codelineno-0-2506">2506</a></span>
<span class="normal"><a href="#__codelineno-0-2507">2507</a></span>
<span class="normal"><a href="#__codelineno-0-2508">2508</a></span>
<span class="normal"><a href="#__codelineno-0-2509">2509</a></span>
<span class="normal"><a href="#__codelineno-0-2510">2510</a></span>
<span class="normal"><a href="#__codelineno-0-2511">2511</a></span>
<span class="normal"><a href="#__codelineno-0-2512">2512</a></span>
<span class="normal"><a href="#__codelineno-0-2513">2513</a></span>
<span class="normal"><a href="#__codelineno-0-2514">2514</a></span>
<span class="normal"><a href="#__codelineno-0-2515">2515</a></span>
<span class="normal"><a href="#__codelineno-0-2516">2516</a></span>
<span class="normal"><a href="#__codelineno-0-2517">2517</a></span>
<span class="normal"><a href="#__codelineno-0-2518">2518</a></span>
<span class="normal"><a href="#__codelineno-0-2519">2519</a></span>
<span class="normal"><a href="#__codelineno-0-2520">2520</a></span>
<span class="normal"><a href="#__codelineno-0-2521">2521</a></span>
<span class="normal"><a href="#__codelineno-0-2522">2522</a></span>
<span class="normal"><a href="#__codelineno-0-2523">2523</a></span>
<span class="normal"><a href="#__codelineno-0-2524">2524</a></span>
<span class="normal"><a href="#__codelineno-0-2525">2525</a></span>
<span class="normal"><a href="#__codelineno-0-2526">2526</a></span>
<span class="normal"><a href="#__codelineno-0-2527">2527</a></span>
<span class="normal"><a href="#__codelineno-0-2528">2528</a></span>
<span class="normal"><a href="#__codelineno-0-2529">2529</a></span>
<span class="normal"><a href="#__codelineno-0-2530">2530</a></span>
<span class="normal"><a href="#__codelineno-0-2531">2531</a></span>
<span class="normal"><a href="#__codelineno-0-2532">2532</a></span>
<span class="normal"><a href="#__codelineno-0-2533">2533</a></span>
<span class="normal"><a href="#__codelineno-0-2534">2534</a></span>
<span class="normal"><a href="#__codelineno-0-2535">2535</a></span>
<span class="normal"><a href="#__codelineno-0-2536">2536</a></span>
<span class="normal"><a href="#__codelineno-0-2537">2537</a></span>
<span class="normal"><a href="#__codelineno-0-2538">2538</a></span>
<span class="normal"><a href="#__codelineno-0-2539">2539</a></span>
<span class="normal"><a href="#__codelineno-0-2540">2540</a></span>
<span class="normal"><a href="#__codelineno-0-2541">2541</a></span>
<span class="normal"><a href="#__codelineno-0-2542">2542</a></span>
<span class="normal"><a href="#__codelineno-0-2543">2543</a></span>
<span class="normal"><a href="#__codelineno-0-2544">2544</a></span>
<span class="normal"><a href="#__codelineno-0-2545">2545</a></span>
<span class="normal"><a href="#__codelineno-0-2546">2546</a></span>
<span class="normal"><a href="#__codelineno-0-2547">2547</a></span>
<span class="normal"><a href="#__codelineno-0-2548">2548</a></span>
<span class="normal"><a href="#__codelineno-0-2549">2549</a></span>
<span class="normal"><a href="#__codelineno-0-2550">2550</a></span>
<span class="normal"><a href="#__codelineno-0-2551">2551</a></span>
<span class="normal"><a href="#__codelineno-0-2552">2552</a></span>
<span class="normal"><a href="#__codelineno-0-2553">2553</a></span>
<span class="normal"><a href="#__codelineno-0-2554">2554</a></span>
<span class="normal"><a href="#__codelineno-0-2555">2555</a></span>
<span class="normal"><a href="#__codelineno-0-2556">2556</a></span>
<span class="normal"><a href="#__codelineno-0-2557">2557</a></span>
<span class="normal"><a href="#__codelineno-0-2558">2558</a></span>
<span class="normal"><a href="#__codelineno-0-2559">2559</a></span>
<span class="normal"><a href="#__codelineno-0-2560">2560</a></span>
<span class="normal"><a href="#__codelineno-0-2561">2561</a></span>
<span class="normal"><a href="#__codelineno-0-2562">2562</a></span>
<span class="normal"><a href="#__codelineno-0-2563">2563</a></span>
<span class="normal"><a href="#__codelineno-0-2564">2564</a></span>
<span class="normal"><a href="#__codelineno-0-2565">2565</a></span>
<span class="normal"><a href="#__codelineno-0-2566">2566</a></span>
<span class="normal"><a href="#__codelineno-0-2567">2567</a></span>
<span class="normal"><a href="#__codelineno-0-2568">2568</a></span>
<span class="normal"><a href="#__codelineno-0-2569">2569</a></span>
<span class="normal"><a href="#__codelineno-0-2570">2570</a></span>
<span class="normal"><a href="#__codelineno-0-2571">2571</a></span>
<span class="normal"><a href="#__codelineno-0-2572">2572</a></span>
<span class="normal"><a href="#__codelineno-0-2573">2573</a></span>
<span class="normal"><a href="#__codelineno-0-2574">2574</a></span>
<span class="normal"><a href="#__codelineno-0-2575">2575</a></span>
<span class="normal"><a href="#__codelineno-0-2576">2576</a></span>
<span class="normal"><a href="#__codelineno-0-2577">2577</a></span>
<span class="normal"><a href="#__codelineno-0-2578">2578</a></span>
<span class="normal"><a href="#__codelineno-0-2579">2579</a></span>
<span class="normal"><a href="#__codelineno-0-2580">2580</a></span>
<span class="normal"><a href="#__codelineno-0-2581">2581</a></span>
<span class="normal"><a href="#__codelineno-0-2582">2582</a></span>
<span class="normal"><a href="#__codelineno-0-2583">2583</a></span>
<span class="normal"><a href="#__codelineno-0-2584">2584</a></span>
<span class="normal"><a href="#__codelineno-0-2585">2585</a></span>
<span class="normal"><a href="#__codelineno-0-2586">2586</a></span>
<span class="normal"><a href="#__codelineno-0-2587">2587</a></span>
<span class="normal"><a href="#__codelineno-0-2588">2588</a></span>
<span class="normal"><a href="#__codelineno-0-2589">2589</a></span>
<span class="normal"><a href="#__codelineno-0-2590">2590</a></span>
<span class="normal"><a href="#__codelineno-0-2591">2591</a></span>
<span class="normal"><a href="#__codelineno-0-2592">2592</a></span>
<span class="normal"><a href="#__codelineno-0-2593">2593</a></span>
<span class="normal"><a href="#__codelineno-0-2594">2594</a></span>
<span class="normal"><a href="#__codelineno-0-2595">2595</a></span>
<span class="normal"><a href="#__codelineno-0-2596">2596</a></span>
<span class="normal"><a href="#__codelineno-0-2597">2597</a></span>
<span class="normal"><a href="#__codelineno-0-2598">2598</a></span>
<span class="normal"><a href="#__codelineno-0-2599">2599</a></span>
<span class="normal"><a href="#__codelineno-0-2600">2600</a></span>
<span class="normal"><a href="#__codelineno-0-2601">2601</a></span>
<span class="normal"><a href="#__codelineno-0-2602">2602</a></span>
<span class="normal"><a href="#__codelineno-0-2603">2603</a></span>
<span class="normal"><a href="#__codelineno-0-2604">2604</a></span>
<span class="normal"><a href="#__codelineno-0-2605">2605</a></span>
<span class="normal"><a href="#__codelineno-0-2606">2606</a></span>
<span class="normal"><a href="#__codelineno-0-2607">2607</a></span>
<span class="normal"><a href="#__codelineno-0-2608">2608</a></span>
<span class="normal"><a href="#__codelineno-0-2609">2609</a></span>
<span class="normal"><a href="#__codelineno-0-2610">2610</a></span>
<span class="normal"><a href="#__codelineno-0-2611">2611</a></span>
<span class="normal"><a href="#__codelineno-0-2612">2612</a></span>
<span class="normal"><a href="#__codelineno-0-2613">2613</a></span>
<span class="normal"><a href="#__codelineno-0-2614">2614</a></span>
<span class="normal"><a href="#__codelineno-0-2615">2615</a></span>
<span class="normal"><a href="#__codelineno-0-2616">2616</a></span>
<span class="normal"><a href="#__codelineno-0-2617">2617</a></span>
<span class="normal"><a href="#__codelineno-0-2618">2618</a></span>
<span class="normal"><a href="#__codelineno-0-2619">2619</a></span>
<span class="normal"><a href="#__codelineno-0-2620">2620</a></span>
<span class="normal"><a href="#__codelineno-0-2621">2621</a></span>
<span class="normal"><a href="#__codelineno-0-2622">2622</a></span>
<span class="normal"><a href="#__codelineno-0-2623">2623</a></span>
<span class="normal"><a href="#__codelineno-0-2624">2624</a></span>
<span class="normal"><a href="#__codelineno-0-2625">2625</a></span>
<span class="normal"><a href="#__codelineno-0-2626">2626</a></span>
<span class="normal"><a href="#__codelineno-0-2627">2627</a></span>
<span class="normal"><a href="#__codelineno-0-2628">2628</a></span>
<span class="normal"><a href="#__codelineno-0-2629">2629</a></span>
<span class="normal"><a href="#__codelineno-0-2630">2630</a></span>
<span class="normal"><a href="#__codelineno-0-2631">2631</a></span>
<span class="normal"><a href="#__codelineno-0-2632">2632</a></span>
<span class="normal"><a href="#__codelineno-0-2633">2633</a></span>
<span class="normal"><a href="#__codelineno-0-2634">2634</a></span>
<span class="normal"><a href="#__codelineno-0-2635">2635</a></span>
<span class="normal"><a href="#__codelineno-0-2636">2636</a></span>
<span class="normal"><a href="#__codelineno-0-2637">2637</a></span>
<span class="normal"><a href="#__codelineno-0-2638">2638</a></span>
<span class="normal"><a href="#__codelineno-0-2639">2639</a></span>
<span class="normal"><a href="#__codelineno-0-2640">2640</a></span>
<span class="normal"><a href="#__codelineno-0-2641">2641</a></span>
<span class="normal"><a href="#__codelineno-0-2642">2642</a></span>
<span class="normal"><a href="#__codelineno-0-2643">2643</a></span>
<span class="normal"><a href="#__codelineno-0-2644">2644</a></span>
<span class="normal"><a href="#__codelineno-0-2645">2645</a></span>
<span class="normal"><a href="#__codelineno-0-2646">2646</a></span>
<span class="normal"><a href="#__codelineno-0-2647">2647</a></span>
<span class="normal"><a href="#__codelineno-0-2648">2648</a></span>
<span class="normal"><a href="#__codelineno-0-2649">2649</a></span>
<span class="normal"><a href="#__codelineno-0-2650">2650</a></span>
<span class="normal"><a href="#__codelineno-0-2651">2651</a></span>
<span class="normal"><a href="#__codelineno-0-2652">2652</a></span>
<span class="normal"><a href="#__codelineno-0-2653">2653</a></span>
<span class="normal"><a href="#__codelineno-0-2654">2654</a></span>
<span class="normal"><a href="#__codelineno-0-2655">2655</a></span>
<span class="normal"><a href="#__codelineno-0-2656">2656</a></span>
<span class="normal"><a href="#__codelineno-0-2657">2657</a></span>
<span class="normal"><a href="#__codelineno-0-2658">2658</a></span>
<span class="normal"><a href="#__codelineno-0-2659">2659</a></span>
<span class="normal"><a href="#__codelineno-0-2660">2660</a></span>
<span class="normal"><a href="#__codelineno-0-2661">2661</a></span>
<span class="normal"><a href="#__codelineno-0-2662">2662</a></span>
<span class="normal"><a href="#__codelineno-0-2663">2663</a></span>
<span class="normal"><a href="#__codelineno-0-2664">2664</a></span>
<span class="normal"><a href="#__codelineno-0-2665">2665</a></span>
<span class="normal"><a href="#__codelineno-0-2666">2666</a></span>
<span class="normal"><a href="#__codelineno-0-2667">2667</a></span>
<span class="normal"><a href="#__codelineno-0-2668">2668</a></span>
<span class="normal"><a href="#__codelineno-0-2669">2669</a></span>
<span class="normal"><a href="#__codelineno-0-2670">2670</a></span>
<span class="normal"><a href="#__codelineno-0-2671">2671</a></span>
<span class="normal"><a href="#__codelineno-0-2672">2672</a></span>
<span class="normal"><a href="#__codelineno-0-2673">2673</a></span>
<span class="normal"><a href="#__codelineno-0-2674">2674</a></span>
<span class="normal"><a href="#__codelineno-0-2675">2675</a></span>
<span class="normal"><a href="#__codelineno-0-2676">2676</a></span>
<span class="normal"><a href="#__codelineno-0-2677">2677</a></span>
<span class="normal"><a href="#__codelineno-0-2678">2678</a></span>
<span class="normal"><a href="#__codelineno-0-2679">2679</a></span>
<span class="normal"><a href="#__codelineno-0-2680">2680</a></span>
<span class="normal"><a href="#__codelineno-0-2681">2681</a></span>
<span class="normal"><a href="#__codelineno-0-2682">2682</a></span>
<span class="normal"><a href="#__codelineno-0-2683">2683</a></span>
<span class="normal"><a href="#__codelineno-0-2684">2684</a></span>
<span class="normal"><a href="#__codelineno-0-2685">2685</a></span>
<span class="normal"><a href="#__codelineno-0-2686">2686</a></span>
<span class="normal"><a href="#__codelineno-0-2687">2687</a></span>
<span class="normal"><a href="#__codelineno-0-2688">2688</a></span>
<span class="normal"><a href="#__codelineno-0-2689">2689</a></span>
<span class="normal"><a href="#__codelineno-0-2690">2690</a></span>
<span class="normal"><a href="#__codelineno-0-2691">2691</a></span>
<span class="normal"><a href="#__codelineno-0-2692">2692</a></span>
<span class="normal"><a href="#__codelineno-0-2693">2693</a></span>
<span class="normal"><a href="#__codelineno-0-2694">2694</a></span>
<span class="normal"><a href="#__codelineno-0-2695">2695</a></span>
<span class="normal"><a href="#__codelineno-0-2696">2696</a></span>
<span class="normal"><a href="#__codelineno-0-2697">2697</a></span>
<span class="normal"><a href="#__codelineno-0-2698">2698</a></span>
<span class="normal"><a href="#__codelineno-0-2699">2699</a></span>
<span class="normal"><a href="#__codelineno-0-2700">2700</a></span>
<span class="normal"><a href="#__codelineno-0-2701">2701</a></span>
<span class="normal"><a href="#__codelineno-0-2702">2702</a></span>
<span class="normal"><a href="#__codelineno-0-2703">2703</a></span>
<span class="normal"><a href="#__codelineno-0-2704">2704</a></span>
<span class="normal"><a href="#__codelineno-0-2705">2705</a></span>
<span class="normal"><a href="#__codelineno-0-2706">2706</a></span>
<span class="normal"><a href="#__codelineno-0-2707">2707</a></span>
<span class="normal"><a href="#__codelineno-0-2708">2708</a></span>
<span class="normal"><a href="#__codelineno-0-2709">2709</a></span>
<span class="normal"><a href="#__codelineno-0-2710">2710</a></span>
<span class="normal"><a href="#__codelineno-0-2711">2711</a></span>
<span class="normal"><a href="#__codelineno-0-2712">2712</a></span>
<span class="normal"><a href="#__codelineno-0-2713">2713</a></span>
<span class="normal"><a href="#__codelineno-0-2714">2714</a></span>
<span class="normal"><a href="#__codelineno-0-2715">2715</a></span>
<span class="normal"><a href="#__codelineno-0-2716">2716</a></span>
<span class="normal"><a href="#__codelineno-0-2717">2717</a></span>
<span class="normal"><a href="#__codelineno-0-2718">2718</a></span>
<span class="normal"><a href="#__codelineno-0-2719">2719</a></span>
<span class="normal"><a href="#__codelineno-0-2720">2720</a></span>
<span class="normal"><a href="#__codelineno-0-2721">2721</a></span>
<span class="normal"><a href="#__codelineno-0-2722">2722</a></span>
<span class="normal"><a href="#__codelineno-0-2723">2723</a></span>
<span class="normal"><a href="#__codelineno-0-2724">2724</a></span>
<span class="normal"><a href="#__codelineno-0-2725">2725</a></span>
<span class="normal"><a href="#__codelineno-0-2726">2726</a></span>
<span class="normal"><a href="#__codelineno-0-2727">2727</a></span>
<span class="normal"><a href="#__codelineno-0-2728">2728</a></span>
<span class="normal"><a href="#__codelineno-0-2729">2729</a></span>
<span class="normal"><a href="#__codelineno-0-2730">2730</a></span>
<span class="normal"><a href="#__codelineno-0-2731">2731</a></span>
<span class="normal"><a href="#__codelineno-0-2732">2732</a></span>
<span class="normal"><a href="#__codelineno-0-2733">2733</a></span>
<span class="normal"><a href="#__codelineno-0-2734">2734</a></span>
<span class="normal"><a href="#__codelineno-0-2735">2735</a></span>
<span class="normal"><a href="#__codelineno-0-2736">2736</a></span>
<span class="normal"><a href="#__codelineno-0-2737">2737</a></span>
<span class="normal"><a href="#__codelineno-0-2738">2738</a></span>
<span class="normal"><a href="#__codelineno-0-2739">2739</a></span>
<span class="normal"><a href="#__codelineno-0-2740">2740</a></span>
<span class="normal"><a href="#__codelineno-0-2741">2741</a></span>
<span class="normal"><a href="#__codelineno-0-2742">2742</a></span>
<span class="normal"><a href="#__codelineno-0-2743">2743</a></span>
<span class="normal"><a href="#__codelineno-0-2744">2744</a></span>
<span class="normal"><a href="#__codelineno-0-2745">2745</a></span>
<span class="normal"><a href="#__codelineno-0-2746">2746</a></span>
<span class="normal"><a href="#__codelineno-0-2747">2747</a></span>
<span class="normal"><a href="#__codelineno-0-2748">2748</a></span>
<span class="normal"><a href="#__codelineno-0-2749">2749</a></span>
<span class="normal"><a href="#__codelineno-0-2750">2750</a></span>
<span class="normal"><a href="#__codelineno-0-2751">2751</a></span>
<span class="normal"><a href="#__codelineno-0-2752">2752</a></span>
<span class="normal"><a href="#__codelineno-0-2753">2753</a></span>
<span class="normal"><a href="#__codelineno-0-2754">2754</a></span>
<span class="normal"><a href="#__codelineno-0-2755">2755</a></span>
<span class="normal"><a href="#__codelineno-0-2756">2756</a></span>
<span class="normal"><a href="#__codelineno-0-2757">2757</a></span>
<span class="normal"><a href="#__codelineno-0-2758">2758</a></span>
<span class="normal"><a href="#__codelineno-0-2759">2759</a></span>
<span class="normal"><a href="#__codelineno-0-2760">2760</a></span>
<span class="normal"><a href="#__codelineno-0-2761">2761</a></span>
<span class="normal"><a href="#__codelineno-0-2762">2762</a></span>
<span class="normal"><a href="#__codelineno-0-2763">2763</a></span>
<span class="normal"><a href="#__codelineno-0-2764">2764</a></span>
<span class="normal"><a href="#__codelineno-0-2765">2765</a></span>
<span class="normal"><a href="#__codelineno-0-2766">2766</a></span>
<span class="normal"><a href="#__codelineno-0-2767">2767</a></span>
<span class="normal"><a href="#__codelineno-0-2768">2768</a></span>
<span class="normal"><a href="#__codelineno-0-2769">2769</a></span>
<span class="normal"><a href="#__codelineno-0-2770">2770</a></span>
<span class="normal"><a href="#__codelineno-0-2771">2771</a></span>
<span class="normal"><a href="#__codelineno-0-2772">2772</a></span>
<span class="normal"><a href="#__codelineno-0-2773">2773</a></span>
<span class="normal"><a href="#__codelineno-0-2774">2774</a></span>
<span class="normal"><a href="#__codelineno-0-2775">2775</a></span>
<span class="normal"><a href="#__codelineno-0-2776">2776</a></span>
<span class="normal"><a href="#__codelineno-0-2777">2777</a></span>
<span class="normal"><a href="#__codelineno-0-2778">2778</a></span>
<span class="normal"><a href="#__codelineno-0-2779">2779</a></span>
<span class="normal"><a href="#__codelineno-0-2780">2780</a></span>
<span class="normal"><a href="#__codelineno-0-2781">2781</a></span>
<span class="normal"><a href="#__codelineno-0-2782">2782</a></span>
<span class="normal"><a href="#__codelineno-0-2783">2783</a></span>
<span class="normal"><a href="#__codelineno-0-2784">2784</a></span>
<span class="normal"><a href="#__codelineno-0-2785">2785</a></span>
<span class="normal"><a href="#__codelineno-0-2786">2786</a></span>
<span class="normal"><a href="#__codelineno-0-2787">2787</a></span>
<span class="normal"><a href="#__codelineno-0-2788">2788</a></span>
<span class="normal"><a href="#__codelineno-0-2789">2789</a></span>
<span class="normal"><a href="#__codelineno-0-2790">2790</a></span>
<span class="normal"><a href="#__codelineno-0-2791">2791</a></span>
<span class="normal"><a href="#__codelineno-0-2792">2792</a></span>
<span class="normal"><a href="#__codelineno-0-2793">2793</a></span>
<span class="normal"><a href="#__codelineno-0-2794">2794</a></span>
<span class="normal"><a href="#__codelineno-0-2795">2795</a></span>
<span class="normal"><a href="#__codelineno-0-2796">2796</a></span>
<span class="normal"><a href="#__codelineno-0-2797">2797</a></span>
<span class="normal"><a href="#__codelineno-0-2798">2798</a></span>
<span class="normal"><a href="#__codelineno-0-2799">2799</a></span>
<span class="normal"><a href="#__codelineno-0-2800">2800</a></span>
<span class="normal"><a href="#__codelineno-0-2801">2801</a></span>
<span class="normal"><a href="#__codelineno-0-2802">2802</a></span>
<span class="normal"><a href="#__codelineno-0-2803">2803</a></span>
<span class="normal"><a href="#__codelineno-0-2804">2804</a></span>
<span class="normal"><a href="#__codelineno-0-2805">2805</a></span>
<span class="normal"><a href="#__codelineno-0-2806">2806</a></span>
<span class="normal"><a href="#__codelineno-0-2807">2807</a></span>
<span class="normal"><a href="#__codelineno-0-2808">2808</a></span>
<span class="normal"><a href="#__codelineno-0-2809">2809</a></span>
<span class="normal"><a href="#__codelineno-0-2810">2810</a></span>
<span class="normal"><a href="#__codelineno-0-2811">2811</a></span>
<span class="normal"><a href="#__codelineno-0-2812">2812</a></span>
<span class="normal"><a href="#__codelineno-0-2813">2813</a></span>
<span class="normal"><a href="#__codelineno-0-2814">2814</a></span>
<span class="normal"><a href="#__codelineno-0-2815">2815</a></span>
<span class="normal"><a href="#__codelineno-0-2816">2816</a></span>
<span class="normal"><a href="#__codelineno-0-2817">2817</a></span>
<span class="normal"><a href="#__codelineno-0-2818">2818</a></span>
<span class="normal"><a href="#__codelineno-0-2819">2819</a></span>
<span class="normal"><a href="#__codelineno-0-2820">2820</a></span>
<span class="normal"><a href="#__codelineno-0-2821">2821</a></span>
<span class="normal"><a href="#__codelineno-0-2822">2822</a></span>
<span class="normal"><a href="#__codelineno-0-2823">2823</a></span>
<span class="normal"><a href="#__codelineno-0-2824">2824</a></span>
<span class="normal"><a href="#__codelineno-0-2825">2825</a></span>
<span class="normal"><a href="#__codelineno-0-2826">2826</a></span>
<span class="normal"><a href="#__codelineno-0-2827">2827</a></span>
<span class="normal"><a href="#__codelineno-0-2828">2828</a></span>
<span class="normal"><a href="#__codelineno-0-2829">2829</a></span>
<span class="normal"><a href="#__codelineno-0-2830">2830</a></span>
<span class="normal"><a href="#__codelineno-0-2831">2831</a></span>
<span class="normal"><a href="#__codelineno-0-2832">2832</a></span>
<span class="normal"><a href="#__codelineno-0-2833">2833</a></span>
<span class="normal"><a href="#__codelineno-0-2834">2834</a></span>
<span class="normal"><a href="#__codelineno-0-2835">2835</a></span>
<span class="normal"><a href="#__codelineno-0-2836">2836</a></span>
<span class="normal"><a href="#__codelineno-0-2837">2837</a></span>
<span class="normal"><a href="#__codelineno-0-2838">2838</a></span>
<span class="normal"><a href="#__codelineno-0-2839">2839</a></span>
<span class="normal"><a href="#__codelineno-0-2840">2840</a></span>
<span class="normal"><a href="#__codelineno-0-2841">2841</a></span>
<span class="normal"><a href="#__codelineno-0-2842">2842</a></span>
<span class="normal"><a href="#__codelineno-0-2843">2843</a></span>
<span class="normal"><a href="#__codelineno-0-2844">2844</a></span>
<span class="normal"><a href="#__codelineno-0-2845">2845</a></span>
<span class="normal"><a href="#__codelineno-0-2846">2846</a></span>
<span class="normal"><a href="#__codelineno-0-2847">2847</a></span>
<span class="normal"><a href="#__codelineno-0-2848">2848</a></span>
<span class="normal"><a href="#__codelineno-0-2849">2849</a></span>
<span class="normal"><a href="#__codelineno-0-2850">2850</a></span>
<span class="normal"><a href="#__codelineno-0-2851">2851</a></span>
<span class="normal"><a href="#__codelineno-0-2852">2852</a></span>
<span class="normal"><a href="#__codelineno-0-2853">2853</a></span>
<span class="normal"><a href="#__codelineno-0-2854">2854</a></span>
<span class="normal"><a href="#__codelineno-0-2855">2855</a></span>
<span class="normal"><a href="#__codelineno-0-2856">2856</a></span>
<span class="normal"><a href="#__codelineno-0-2857">2857</a></span>
<span class="normal"><a href="#__codelineno-0-2858">2858</a></span>
<span class="normal"><a href="#__codelineno-0-2859">2859</a></span>
<span class="normal"><a href="#__codelineno-0-2860">2860</a></span>
<span class="normal"><a href="#__codelineno-0-2861">2861</a></span>
<span class="normal"><a href="#__codelineno-0-2862">2862</a></span>
<span class="normal"><a href="#__codelineno-0-2863">2863</a></span>
<span class="normal"><a href="#__codelineno-0-2864">2864</a></span>
<span class="normal"><a href="#__codelineno-0-2865">2865</a></span>
<span class="normal"><a href="#__codelineno-0-2866">2866</a></span>
<span class="normal"><a href="#__codelineno-0-2867">2867</a></span>
<span class="normal"><a href="#__codelineno-0-2868">2868</a></span>
<span class="normal"><a href="#__codelineno-0-2869">2869</a></span>
<span class="normal"><a href="#__codelineno-0-2870">2870</a></span>
<span class="normal"><a href="#__codelineno-0-2871">2871</a></span>
<span class="normal"><a href="#__codelineno-0-2872">2872</a></span>
<span class="normal"><a href="#__codelineno-0-2873">2873</a></span>
<span class="normal"><a href="#__codelineno-0-2874">2874</a></span>
<span class="normal"><a href="#__codelineno-0-2875">2875</a></span>
<span class="normal"><a href="#__codelineno-0-2876">2876</a></span>
<span class="normal"><a href="#__codelineno-0-2877">2877</a></span>
<span class="normal"><a href="#__codelineno-0-2878">2878</a></span>
<span class="normal"><a href="#__codelineno-0-2879">2879</a></span>
<span class="normal"><a href="#__codelineno-0-2880">2880</a></span>
<span class="normal"><a href="#__codelineno-0-2881">2881</a></span>
<span class="normal"><a href="#__codelineno-0-2882">2882</a></span>
<span class="normal"><a href="#__codelineno-0-2883">2883</a></span>
<span class="normal"><a href="#__codelineno-0-2884">2884</a></span>
<span class="normal"><a href="#__codelineno-0-2885">2885</a></span>
<span class="normal"><a href="#__codelineno-0-2886">2886</a></span>
<span class="normal"><a href="#__codelineno-0-2887">2887</a></span>
<span class="normal"><a href="#__codelineno-0-2888">2888</a></span>
<span class="normal"><a href="#__codelineno-0-2889">2889</a></span>
<span class="normal"><a href="#__codelineno-0-2890">2890</a></span>
<span class="normal"><a href="#__codelineno-0-2891">2891</a></span>
<span class="normal"><a href="#__codelineno-0-2892">2892</a></span>
<span class="normal"><a href="#__codelineno-0-2893">2893</a></span>
<span class="normal"><a href="#__codelineno-0-2894">2894</a></span>
<span class="normal"><a href="#__codelineno-0-2895">2895</a></span>
<span class="normal"><a href="#__codelineno-0-2896">2896</a></span>
<span class="normal"><a href="#__codelineno-0-2897">2897</a></span>
<span class="normal"><a href="#__codelineno-0-2898">2898</a></span>
<span class="normal"><a href="#__codelineno-0-2899">2899</a></span>
<span class="normal"><a href="#__codelineno-0-2900">2900</a></span>
<span class="normal"><a href="#__codelineno-0-2901">2901</a></span>
<span class="normal"><a href="#__codelineno-0-2902">2902</a></span>
<span class="normal"><a href="#__codelineno-0-2903">2903</a></span>
<span class="normal"><a href="#__codelineno-0-2904">2904</a></span>
<span class="normal"><a href="#__codelineno-0-2905">2905</a></span>
<span class="normal"><a href="#__codelineno-0-2906">2906</a></span>
<span class="normal"><a href="#__codelineno-0-2907">2907</a></span>
<span class="normal"><a href="#__codelineno-0-2908">2908</a></span>
<span class="normal"><a href="#__codelineno-0-2909">2909</a></span>
<span class="normal"><a href="#__codelineno-0-2910">2910</a></span>
<span class="normal"><a href="#__codelineno-0-2911">2911</a></span>
<span class="normal"><a href="#__codelineno-0-2912">2912</a></span>
<span class="normal"><a href="#__codelineno-0-2913">2913</a></span>
<span class="normal"><a href="#__codelineno-0-2914">2914</a></span>
<span class="normal"><a href="#__codelineno-0-2915">2915</a></span>
<span class="normal"><a href="#__codelineno-0-2916">2916</a></span>
<span class="normal"><a href="#__codelineno-0-2917">2917</a></span>
<span class="normal"><a href="#__codelineno-0-2918">2918</a></span>
<span class="normal"><a href="#__codelineno-0-2919">2919</a></span>
<span class="normal"><a href="#__codelineno-0-2920">2920</a></span>
<span class="normal"><a href="#__codelineno-0-2921">2921</a></span>
<span class="normal"><a href="#__codelineno-0-2922">2922</a></span>
<span class="normal"><a href="#__codelineno-0-2923">2923</a></span>
<span class="normal"><a href="#__codelineno-0-2924">2924</a></span>
<span class="normal"><a href="#__codelineno-0-2925">2925</a></span>
<span class="normal"><a href="#__codelineno-0-2926">2926</a></span>
<span class="normal"><a href="#__codelineno-0-2927">2927</a></span>
<span class="normal"><a href="#__codelineno-0-2928">2928</a></span>
<span class="normal"><a href="#__codelineno-0-2929">2929</a></span>
<span class="normal"><a href="#__codelineno-0-2930">2930</a></span>
<span class="normal"><a href="#__codelineno-0-2931">2931</a></span>
<span class="normal"><a href="#__codelineno-0-2932">2932</a></span>
<span class="normal"><a href="#__codelineno-0-2933">2933</a></span>
<span class="normal"><a href="#__codelineno-0-2934">2934</a></span>
<span class="normal"><a href="#__codelineno-0-2935">2935</a></span>
<span class="normal"><a href="#__codelineno-0-2936">2936</a></span>
<span class="normal"><a href="#__codelineno-0-2937">2937</a></span>
<span class="normal"><a href="#__codelineno-0-2938">2938</a></span>
<span class="normal"><a href="#__codelineno-0-2939">2939</a></span>
<span class="normal"><a href="#__codelineno-0-2940">2940</a></span>
<span class="normal"><a href="#__codelineno-0-2941">2941</a></span>
<span class="normal"><a href="#__codelineno-0-2942">2942</a></span>
<span class="normal"><a href="#__codelineno-0-2943">2943</a></span>
<span class="normal"><a href="#__codelineno-0-2944">2944</a></span>
<span class="normal"><a href="#__codelineno-0-2945">2945</a></span>
<span class="normal"><a href="#__codelineno-0-2946">2946</a></span>
<span class="normal"><a href="#__codelineno-0-2947">2947</a></span>
<span class="normal"><a href="#__codelineno-0-2948">2948</a></span>
<span class="normal"><a href="#__codelineno-0-2949">2949</a></span>
<span class="normal"><a href="#__codelineno-0-2950">2950</a></span>
<span class="normal"><a href="#__codelineno-0-2951">2951</a></span>
<span class="normal"><a href="#__codelineno-0-2952">2952</a></span>
<span class="normal"><a href="#__codelineno-0-2953">2953</a></span>
<span class="normal"><a href="#__codelineno-0-2954">2954</a></span>
<span class="normal"><a href="#__codelineno-0-2955">2955</a></span>
<span class="normal"><a href="#__codelineno-0-2956">2956</a></span>
<span class="normal"><a href="#__codelineno-0-2957">2957</a></span>
<span class="normal"><a href="#__codelineno-0-2958">2958</a></span>
<span class="normal"><a href="#__codelineno-0-2959">2959</a></span>
<span class="normal"><a href="#__codelineno-0-2960">2960</a></span>
<span class="normal"><a href="#__codelineno-0-2961">2961</a></span>
<span class="normal"><a href="#__codelineno-0-2962">2962</a></span>
<span class="normal"><a href="#__codelineno-0-2963">2963</a></span>
<span class="normal"><a href="#__codelineno-0-2964">2964</a></span>
<span class="normal"><a href="#__codelineno-0-2965">2965</a></span>
<span class="normal"><a href="#__codelineno-0-2966">2966</a></span>
<span class="normal"><a href="#__codelineno-0-2967">2967</a></span>
<span class="normal"><a href="#__codelineno-0-2968">2968</a></span>
<span class="normal"><a href="#__codelineno-0-2969">2969</a></span>
<span class="normal"><a href="#__codelineno-0-2970">2970</a></span>
<span class="normal"><a href="#__codelineno-0-2971">2971</a></span>
<span class="normal"><a href="#__codelineno-0-2972">2972</a></span>
<span class="normal"><a href="#__codelineno-0-2973">2973</a></span>
<span class="normal"><a href="#__codelineno-0-2974">2974</a></span>
<span class="normal"><a href="#__codelineno-0-2975">2975</a></span>
<span class="normal"><a href="#__codelineno-0-2976">2976</a></span>
<span class="normal"><a href="#__codelineno-0-2977">2977</a></span>
<span class="normal"><a href="#__codelineno-0-2978">2978</a></span>
<span class="normal"><a href="#__codelineno-0-2979">2979</a></span>
<span class="normal"><a href="#__codelineno-0-2980">2980</a></span>
<span class="normal"><a href="#__codelineno-0-2981">2981</a></span>
<span class="normal"><a href="#__codelineno-0-2982">2982</a></span>
<span class="normal"><a href="#__codelineno-0-2983">2983</a></span>
<span class="normal"><a href="#__codelineno-0-2984">2984</a></span>
<span class="normal"><a href="#__codelineno-0-2985">2985</a></span>
<span class="normal"><a href="#__codelineno-0-2986">2986</a></span>
<span class="normal"><a href="#__codelineno-0-2987">2987</a></span>
<span class="normal"><a href="#__codelineno-0-2988">2988</a></span>
<span class="normal"><a href="#__codelineno-0-2989">2989</a></span>
<span class="normal"><a href="#__codelineno-0-2990">2990</a></span>
<span class="normal"><a href="#__codelineno-0-2991">2991</a></span>
<span class="normal"><a href="#__codelineno-0-2992">2992</a></span>
<span class="normal"><a href="#__codelineno-0-2993">2993</a></span>
<span class="normal"><a href="#__codelineno-0-2994">2994</a></span>
<span class="normal"><a href="#__codelineno-0-2995">2995</a></span>
<span class="normal"><a href="#__codelineno-0-2996">2996</a></span>
<span class="normal"><a href="#__codelineno-0-2997">2997</a></span>
<span class="normal"><a href="#__codelineno-0-2998">2998</a></span>
<span class="normal"><a href="#__codelineno-0-2999">2999</a></span>
<span class="normal"><a href="#__codelineno-0-3000">3000</a></span>
<span class="normal"><a href="#__codelineno-0-3001">3001</a></span>
<span class="normal"><a href="#__codelineno-0-3002">3002</a></span>
<span class="normal"><a href="#__codelineno-0-3003">3003</a></span>
<span class="normal"><a href="#__codelineno-0-3004">3004</a></span>
<span class="normal"><a href="#__codelineno-0-3005">3005</a></span>
<span class="normal"><a href="#__codelineno-0-3006">3006</a></span>
<span class="normal"><a href="#__codelineno-0-3007">3007</a></span>
<span class="normal"><a href="#__codelineno-0-3008">3008</a></span>
<span class="normal"><a href="#__codelineno-0-3009">3009</a></span>
<span class="normal"><a href="#__codelineno-0-3010">3010</a></span>
<span class="normal"><a href="#__codelineno-0-3011">3011</a></span>
<span class="normal"><a href="#__codelineno-0-3012">3012</a></span>
<span class="normal"><a href="#__codelineno-0-3013">3013</a></span>
<span class="normal"><a href="#__codelineno-0-3014">3014</a></span>
<span class="normal"><a href="#__codelineno-0-3015">3015</a></span>
<span class="normal"><a href="#__codelineno-0-3016">3016</a></span>
<span class="normal"><a href="#__codelineno-0-3017">3017</a></span>
<span class="normal"><a href="#__codelineno-0-3018">3018</a></span>
<span class="normal"><a href="#__codelineno-0-3019">3019</a></span>
<span class="normal"><a href="#__codelineno-0-3020">3020</a></span>
<span class="normal"><a href="#__codelineno-0-3021">3021</a></span>
<span class="normal"><a href="#__codelineno-0-3022">3022</a></span>
<span class="normal"><a href="#__codelineno-0-3023">3023</a></span>
<span class="normal"><a href="#__codelineno-0-3024">3024</a></span>
<span class="normal"><a href="#__codelineno-0-3025">3025</a></span>
<span class="normal"><a href="#__codelineno-0-3026">3026</a></span>
<span class="normal"><a href="#__codelineno-0-3027">3027</a></span>
<span class="normal"><a href="#__codelineno-0-3028">3028</a></span>
<span class="normal"><a href="#__codelineno-0-3029">3029</a></span>
<span class="normal"><a href="#__codelineno-0-3030">3030</a></span>
<span class="normal"><a href="#__codelineno-0-3031">3031</a></span>
<span class="normal"><a href="#__codelineno-0-3032">3032</a></span>
<span class="normal"><a href="#__codelineno-0-3033">3033</a></span>
<span class="normal"><a href="#__codelineno-0-3034">3034</a></span>
<span class="normal"><a href="#__codelineno-0-3035">3035</a></span>
<span class="normal"><a href="#__codelineno-0-3036">3036</a></span>
<span class="normal"><a href="#__codelineno-0-3037">3037</a></span>
<span class="normal"><a href="#__codelineno-0-3038">3038</a></span>
<span class="normal"><a href="#__codelineno-0-3039">3039</a></span>
<span class="normal"><a href="#__codelineno-0-3040">3040</a></span>
<span class="normal"><a href="#__codelineno-0-3041">3041</a></span>
<span class="normal"><a href="#__codelineno-0-3042">3042</a></span>
<span class="normal"><a href="#__codelineno-0-3043">3043</a></span>
<span class="normal"><a href="#__codelineno-0-3044">3044</a></span>
<span class="normal"><a href="#__codelineno-0-3045">3045</a></span>
<span class="normal"><a href="#__codelineno-0-3046">3046</a></span>
<span class="normal"><a href="#__codelineno-0-3047">3047</a></span>
<span class="normal"><a href="#__codelineno-0-3048">3048</a></span>
<span class="normal"><a href="#__codelineno-0-3049">3049</a></span>
<span class="normal"><a href="#__codelineno-0-3050">3050</a></span>
<span class="normal"><a href="#__codelineno-0-3051">3051</a></span>
<span class="normal"><a href="#__codelineno-0-3052">3052</a></span>
<span class="normal"><a href="#__codelineno-0-3053">3053</a></span>
<span class="normal"><a href="#__codelineno-0-3054">3054</a></span>
<span class="normal"><a href="#__codelineno-0-3055">3055</a></span>
<span class="normal"><a href="#__codelineno-0-3056">3056</a></span>
<span class="normal"><a href="#__codelineno-0-3057">3057</a></span>
<span class="normal"><a href="#__codelineno-0-3058">3058</a></span>
<span class="normal"><a href="#__codelineno-0-3059">3059</a></span>
<span class="normal"><a href="#__codelineno-0-3060">3060</a></span>
<span class="normal"><a href="#__codelineno-0-3061">3061</a></span>
<span class="normal"><a href="#__codelineno-0-3062">3062</a></span>
<span class="normal"><a href="#__codelineno-0-3063">3063</a></span>
<span class="normal"><a href="#__codelineno-0-3064">3064</a></span>
<span class="normal"><a href="#__codelineno-0-3065">3065</a></span>
<span class="normal"><a href="#__codelineno-0-3066">3066</a></span>
<span class="normal"><a href="#__codelineno-0-3067">3067</a></span>
<span class="normal"><a href="#__codelineno-0-3068">3068</a></span>
<span class="normal"><a href="#__codelineno-0-3069">3069</a></span>
<span class="normal"><a href="#__codelineno-0-3070">3070</a></span>
<span class="normal"><a href="#__codelineno-0-3071">3071</a></span>
<span class="normal"><a href="#__codelineno-0-3072">3072</a></span>
<span class="normal"><a href="#__codelineno-0-3073">3073</a></span>
<span class="normal"><a href="#__codelineno-0-3074">3074</a></span>
<span class="normal"><a href="#__codelineno-0-3075">3075</a></span>
<span class="normal"><a href="#__codelineno-0-3076">3076</a></span>
<span class="normal"><a href="#__codelineno-0-3077">3077</a></span>
<span class="normal"><a href="#__codelineno-0-3078">3078</a></span>
<span class="normal"><a href="#__codelineno-0-3079">3079</a></span>
<span class="normal"><a href="#__codelineno-0-3080">3080</a></span>
<span class="normal"><a href="#__codelineno-0-3081">3081</a></span>
<span class="normal"><a href="#__codelineno-0-3082">3082</a></span>
<span class="normal"><a href="#__codelineno-0-3083">3083</a></span>
<span class="normal"><a href="#__codelineno-0-3084">3084</a></span>
<span class="normal"><a href="#__codelineno-0-3085">3085</a></span>
<span class="normal"><a href="#__codelineno-0-3086">3086</a></span>
<span class="normal"><a href="#__codelineno-0-3087">3087</a></span>
<span class="normal"><a href="#__codelineno-0-3088">3088</a></span>
<span class="normal"><a href="#__codelineno-0-3089">3089</a></span>
<span class="normal"><a href="#__codelineno-0-3090">3090</a></span>
<span class="normal"><a href="#__codelineno-0-3091">3091</a></span>
<span class="normal"><a href="#__codelineno-0-3092">3092</a></span>
<span class="normal"><a href="#__codelineno-0-3093">3093</a></span>
<span class="normal"><a href="#__codelineno-0-3094">3094</a></span>
<span class="normal"><a href="#__codelineno-0-3095">3095</a></span>
<span class="normal"><a href="#__codelineno-0-3096">3096</a></span>
<span class="normal"><a href="#__codelineno-0-3097">3097</a></span>
<span class="normal"><a href="#__codelineno-0-3098">3098</a></span>
<span class="normal"><a href="#__codelineno-0-3099">3099</a></span>
<span class="normal"><a href="#__codelineno-0-3100">3100</a></span>
<span class="normal"><a href="#__codelineno-0-3101">3101</a></span>
<span class="normal"><a href="#__codelineno-0-3102">3102</a></span>
<span class="normal"><a href="#__codelineno-0-3103">3103</a></span>
<span class="normal"><a href="#__codelineno-0-3104">3104</a></span>
<span class="normal"><a href="#__codelineno-0-3105">3105</a></span>
<span class="normal"><a href="#__codelineno-0-3106">3106</a></span>
<span class="normal"><a href="#__codelineno-0-3107">3107</a></span>
<span class="normal"><a href="#__codelineno-0-3108">3108</a></span>
<span class="normal"><a href="#__codelineno-0-3109">3109</a></span>
<span class="normal"><a href="#__codelineno-0-3110">3110</a></span>
<span class="normal"><a href="#__codelineno-0-3111">3111</a></span>
<span class="normal"><a href="#__codelineno-0-3112">3112</a></span>
<span class="normal"><a href="#__codelineno-0-3113">3113</a></span>
<span class="normal"><a href="#__codelineno-0-3114">3114</a></span>
<span class="normal"><a href="#__codelineno-0-3115">3115</a></span>
<span class="normal"><a href="#__codelineno-0-3116">3116</a></span>
<span class="normal"><a href="#__codelineno-0-3117">3117</a></span>
<span class="normal"><a href="#__codelineno-0-3118">3118</a></span>
<span class="normal"><a href="#__codelineno-0-3119">3119</a></span>
<span class="normal"><a href="#__codelineno-0-3120">3120</a></span>
<span class="normal"><a href="#__codelineno-0-3121">3121</a></span>
<span class="normal"><a href="#__codelineno-0-3122">3122</a></span>
<span class="normal"><a href="#__codelineno-0-3123">3123</a></span>
<span class="normal"><a href="#__codelineno-0-3124">3124</a></span>
<span class="normal"><a href="#__codelineno-0-3125">3125</a></span>
<span class="normal"><a href="#__codelineno-0-3126">3126</a></span>
<span class="normal"><a href="#__codelineno-0-3127">3127</a></span>
<span class="normal"><a href="#__codelineno-0-3128">3128</a></span>
<span class="normal"><a href="#__codelineno-0-3129">3129</a></span>
<span class="normal"><a href="#__codelineno-0-3130">3130</a></span>
<span class="normal"><a href="#__codelineno-0-3131">3131</a></span>
<span class="normal"><a href="#__codelineno-0-3132">3132</a></span>
<span class="normal"><a href="#__codelineno-0-3133">3133</a></span>
<span class="normal"><a href="#__codelineno-0-3134">3134</a></span>
<span class="normal"><a href="#__codelineno-0-3135">3135</a></span>
<span class="normal"><a href="#__codelineno-0-3136">3136</a></span>
<span class="normal"><a href="#__codelineno-0-3137">3137</a></span>
<span class="normal"><a href="#__codelineno-0-3138">3138</a></span>
<span class="normal"><a href="#__codelineno-0-3139">3139</a></span>
<span class="normal"><a href="#__codelineno-0-3140">3140</a></span>
<span class="normal"><a href="#__codelineno-0-3141">3141</a></span>
<span class="normal"><a href="#__codelineno-0-3142">3142</a></span>
<span class="normal"><a href="#__codelineno-0-3143">3143</a></span>
<span class="normal"><a href="#__codelineno-0-3144">3144</a></span>
<span class="normal"><a href="#__codelineno-0-3145">3145</a></span>
<span class="normal"><a href="#__codelineno-0-3146">3146</a></span>
<span class="normal"><a href="#__codelineno-0-3147">3147</a></span>
<span class="normal"><a href="#__codelineno-0-3148">3148</a></span>
<span class="normal"><a href="#__codelineno-0-3149">3149</a></span>
<span class="normal"><a href="#__codelineno-0-3150">3150</a></span>
<span class="normal"><a href="#__codelineno-0-3151">3151</a></span>
<span class="normal"><a href="#__codelineno-0-3152">3152</a></span>
<span class="normal"><a href="#__codelineno-0-3153">3153</a></span>
<span class="normal"><a href="#__codelineno-0-3154">3154</a></span>
<span class="normal"><a href="#__codelineno-0-3155">3155</a></span>
<span class="normal"><a href="#__codelineno-0-3156">3156</a></span>
<span class="normal"><a href="#__codelineno-0-3157">3157</a></span>
<span class="normal"><a href="#__codelineno-0-3158">3158</a></span>
<span class="normal"><a href="#__codelineno-0-3159">3159</a></span>
<span class="normal"><a href="#__codelineno-0-3160">3160</a></span>
<span class="normal"><a href="#__codelineno-0-3161">3161</a></span>
<span class="normal"><a href="#__codelineno-0-3162">3162</a></span>
<span class="normal"><a href="#__codelineno-0-3163">3163</a></span>
<span class="normal"><a href="#__codelineno-0-3164">3164</a></span>
<span class="normal"><a href="#__codelineno-0-3165">3165</a></span>
<span class="normal"><a href="#__codelineno-0-3166">3166</a></span>
<span class="normal"><a href="#__codelineno-0-3167">3167</a></span>
<span class="normal"><a href="#__codelineno-0-3168">3168</a></span>
<span class="normal"><a href="#__codelineno-0-3169">3169</a></span>
<span class="normal"><a href="#__codelineno-0-3170">3170</a></span>
<span class="normal"><a href="#__codelineno-0-3171">3171</a></span>
<span class="normal"><a href="#__codelineno-0-3172">3172</a></span>
<span class="normal"><a href="#__codelineno-0-3173">3173</a></span>
<span class="normal"><a href="#__codelineno-0-3174">3174</a></span>
<span class="normal"><a href="#__codelineno-0-3175">3175</a></span>
<span class="normal"><a href="#__codelineno-0-3176">3176</a></span>
<span class="normal"><a href="#__codelineno-0-3177">3177</a></span>
<span class="normal"><a href="#__codelineno-0-3178">3178</a></span>
<span class="normal"><a href="#__codelineno-0-3179">3179</a></span>
<span class="normal"><a href="#__codelineno-0-3180">3180</a></span>
<span class="normal"><a href="#__codelineno-0-3181">3181</a></span>
<span class="normal"><a href="#__codelineno-0-3182">3182</a></span>
<span class="normal"><a href="#__codelineno-0-3183">3183</a></span>
<span class="normal"><a href="#__codelineno-0-3184">3184</a></span>
<span class="normal"><a href="#__codelineno-0-3185">3185</a></span>
<span class="normal"><a href="#__codelineno-0-3186">3186</a></span>
<span class="normal"><a href="#__codelineno-0-3187">3187</a></span>
<span class="normal"><a href="#__codelineno-0-3188">3188</a></span>
<span class="normal"><a href="#__codelineno-0-3189">3189</a></span>
<span class="normal"><a href="#__codelineno-0-3190">3190</a></span>
<span class="normal"><a href="#__codelineno-0-3191">3191</a></span>
<span class="normal"><a href="#__codelineno-0-3192">3192</a></span>
<span class="normal"><a href="#__codelineno-0-3193">3193</a></span>
<span class="normal"><a href="#__codelineno-0-3194">3194</a></span>
<span class="normal"><a href="#__codelineno-0-3195">3195</a></span>
<span class="normal"><a href="#__codelineno-0-3196">3196</a></span>
<span class="normal"><a href="#__codelineno-0-3197">3197</a></span>
<span class="normal"><a href="#__codelineno-0-3198">3198</a></span>
<span class="normal"><a href="#__codelineno-0-3199">3199</a></span>
<span class="normal"><a href="#__codelineno-0-3200">3200</a></span>
<span class="normal"><a href="#__codelineno-0-3201">3201</a></span>
<span class="normal"><a href="#__codelineno-0-3202">3202</a></span>
<span class="normal"><a href="#__codelineno-0-3203">3203</a></span>
<span class="normal"><a href="#__codelineno-0-3204">3204</a></span>
<span class="normal"><a href="#__codelineno-0-3205">3205</a></span>
<span class="normal"><a href="#__codelineno-0-3206">3206</a></span>
<span class="normal"><a href="#__codelineno-0-3207">3207</a></span>
<span class="normal"><a href="#__codelineno-0-3208">3208</a></span>
<span class="normal"><a href="#__codelineno-0-3209">3209</a></span>
<span class="normal"><a href="#__codelineno-0-3210">3210</a></span>
<span class="normal"><a href="#__codelineno-0-3211">3211</a></span>
<span class="normal"><a href="#__codelineno-0-3212">3212</a></span>
<span class="normal"><a href="#__codelineno-0-3213">3213</a></span>
<span class="normal"><a href="#__codelineno-0-3214">3214</a></span>
<span class="normal"><a href="#__codelineno-0-3215">3215</a></span>
<span class="normal"><a href="#__codelineno-0-3216">3216</a></span>
<span class="normal"><a href="#__codelineno-0-3217">3217</a></span>
<span class="normal"><a href="#__codelineno-0-3218">3218</a></span>
<span class="normal"><a href="#__codelineno-0-3219">3219</a></span>
<span class="normal"><a href="#__codelineno-0-3220">3220</a></span>
<span class="normal"><a href="#__codelineno-0-3221">3221</a></span>
<span class="normal"><a href="#__codelineno-0-3222">3222</a></span>
<span class="normal"><a href="#__codelineno-0-3223">3223</a></span>
<span class="normal"><a href="#__codelineno-0-3224">3224</a></span>
<span class="normal"><a href="#__codelineno-0-3225">3225</a></span>
<span class="normal"><a href="#__codelineno-0-3226">3226</a></span>
<span class="normal"><a href="#__codelineno-0-3227">3227</a></span>
<span class="normal"><a href="#__codelineno-0-3228">3228</a></span>
<span class="normal"><a href="#__codelineno-0-3229">3229</a></span>
<span class="normal"><a href="#__codelineno-0-3230">3230</a></span>
<span class="normal"><a href="#__codelineno-0-3231">3231</a></span>
<span class="normal"><a href="#__codelineno-0-3232">3232</a></span>
<span class="normal"><a href="#__codelineno-0-3233">3233</a></span>
<span class="normal"><a href="#__codelineno-0-3234">3234</a></span>
<span class="normal"><a href="#__codelineno-0-3235">3235</a></span>
<span class="normal"><a href="#__codelineno-0-3236">3236</a></span>
<span class="normal"><a href="#__codelineno-0-3237">3237</a></span>
<span class="normal"><a href="#__codelineno-0-3238">3238</a></span>
<span class="normal"><a href="#__codelineno-0-3239">3239</a></span>
<span class="normal"><a href="#__codelineno-0-3240">3240</a></span>
<span class="normal"><a href="#__codelineno-0-3241">3241</a></span>
<span class="normal"><a href="#__codelineno-0-3242">3242</a></span>
<span class="normal"><a href="#__codelineno-0-3243">3243</a></span>
<span class="normal"><a href="#__codelineno-0-3244">3244</a></span>
<span class="normal"><a href="#__codelineno-0-3245">3245</a></span>
<span class="normal"><a href="#__codelineno-0-3246">3246</a></span>
<span class="normal"><a href="#__codelineno-0-3247">3247</a></span>
<span class="normal"><a href="#__codelineno-0-3248">3248</a></span>
<span class="normal"><a href="#__codelineno-0-3249">3249</a></span>
<span class="normal"><a href="#__codelineno-0-3250">3250</a></span>
<span class="normal"><a href="#__codelineno-0-3251">3251</a></span>
<span class="normal"><a href="#__codelineno-0-3252">3252</a></span>
<span class="normal"><a href="#__codelineno-0-3253">3253</a></span>
<span class="normal"><a href="#__codelineno-0-3254">3254</a></span>
<span class="normal"><a href="#__codelineno-0-3255">3255</a></span>
<span class="normal"><a href="#__codelineno-0-3256">3256</a></span>
<span class="normal"><a href="#__codelineno-0-3257">3257</a></span>
<span class="normal"><a href="#__codelineno-0-3258">3258</a></span>
<span class="normal"><a href="#__codelineno-0-3259">3259</a></span>
<span class="normal"><a href="#__codelineno-0-3260">3260</a></span>
<span class="normal"><a href="#__codelineno-0-3261">3261</a></span>
<span class="normal"><a href="#__codelineno-0-3262">3262</a></span>
<span class="normal"><a href="#__codelineno-0-3263">3263</a></span>
<span class="normal"><a href="#__codelineno-0-3264">3264</a></span>
<span class="normal"><a href="#__codelineno-0-3265">3265</a></span>
<span class="normal"><a href="#__codelineno-0-3266">3266</a></span>
<span class="normal"><a href="#__codelineno-0-3267">3267</a></span>
<span class="normal"><a href="#__codelineno-0-3268">3268</a></span>
<span class="normal"><a href="#__codelineno-0-3269">3269</a></span>
<span class="normal"><a href="#__codelineno-0-3270">3270</a></span>
<span class="normal"><a href="#__codelineno-0-3271">3271</a></span>
<span class="normal"><a href="#__codelineno-0-3272">3272</a></span>
<span class="normal"><a href="#__codelineno-0-3273">3273</a></span>
<span class="normal"><a href="#__codelineno-0-3274">3274</a></span>
<span class="normal"><a href="#__codelineno-0-3275">3275</a></span>
<span class="normal"><a href="#__codelineno-0-3276">3276</a></span>
<span class="normal"><a href="#__codelineno-0-3277">3277</a></span>
<span class="normal"><a href="#__codelineno-0-3278">3278</a></span>
<span class="normal"><a href="#__codelineno-0-3279">3279</a></span>
<span class="normal"><a href="#__codelineno-0-3280">3280</a></span>
<span class="normal"><a href="#__codelineno-0-3281">3281</a></span>
<span class="normal"><a href="#__codelineno-0-3282">3282</a></span>
<span class="normal"><a href="#__codelineno-0-3283">3283</a></span>
<span class="normal"><a href="#__codelineno-0-3284">3284</a></span>
<span class="normal"><a href="#__codelineno-0-3285">3285</a></span>
<span class="normal"><a href="#__codelineno-0-3286">3286</a></span>
<span class="normal"><a href="#__codelineno-0-3287">3287</a></span>
<span class="normal"><a href="#__codelineno-0-3288">3288</a></span>
<span class="normal"><a href="#__codelineno-0-3289">3289</a></span>
<span class="normal"><a href="#__codelineno-0-3290">3290</a></span>
<span class="normal"><a href="#__codelineno-0-3291">3291</a></span>
<span class="normal"><a href="#__codelineno-0-3292">3292</a></span>
<span class="normal"><a href="#__codelineno-0-3293">3293</a></span>
<span class="normal"><a href="#__codelineno-0-3294">3294</a></span>
<span class="normal"><a href="#__codelineno-0-3295">3295</a></span>
<span class="normal"><a href="#__codelineno-0-3296">3296</a></span>
<span class="normal"><a href="#__codelineno-0-3297">3297</a></span>
<span class="normal"><a href="#__codelineno-0-3298">3298</a></span>
<span class="normal"><a href="#__codelineno-0-3299">3299</a></span>
<span class="normal"><a href="#__codelineno-0-3300">3300</a></span>
<span class="normal"><a href="#__codelineno-0-3301">3301</a></span>
<span class="normal"><a href="#__codelineno-0-3302">3302</a></span>
<span class="normal"><a href="#__codelineno-0-3303">3303</a></span>
<span class="normal"><a href="#__codelineno-0-3304">3304</a></span>
<span class="normal"><a href="#__codelineno-0-3305">3305</a></span>
<span class="normal"><a href="#__codelineno-0-3306">3306</a></span>
<span class="normal"><a href="#__codelineno-0-3307">3307</a></span>
<span class="normal"><a href="#__codelineno-0-3308">3308</a></span>
<span class="normal"><a href="#__codelineno-0-3309">3309</a></span>
<span class="normal"><a href="#__codelineno-0-3310">3310</a></span>
<span class="normal"><a href="#__codelineno-0-3311">3311</a></span>
<span class="normal"><a href="#__codelineno-0-3312">3312</a></span>
<span class="normal"><a href="#__codelineno-0-3313">3313</a></span>
<span class="normal"><a href="#__codelineno-0-3314">3314</a></span>
<span class="normal"><a href="#__codelineno-0-3315">3315</a></span>
<span class="normal"><a href="#__codelineno-0-3316">3316</a></span>
<span class="normal"><a href="#__codelineno-0-3317">3317</a></span>
<span class="normal"><a href="#__codelineno-0-3318">3318</a></span>
<span class="normal"><a href="#__codelineno-0-3319">3319</a></span>
<span class="normal"><a href="#__codelineno-0-3320">3320</a></span>
<span class="normal"><a href="#__codelineno-0-3321">3321</a></span>
<span class="normal"><a href="#__codelineno-0-3322">3322</a></span>
<span class="normal"><a href="#__codelineno-0-3323">3323</a></span>
<span class="normal"><a href="#__codelineno-0-3324">3324</a></span>
<span class="normal"><a href="#__codelineno-0-3325">3325</a></span>
<span class="normal"><a href="#__codelineno-0-3326">3326</a></span>
<span class="normal"><a href="#__codelineno-0-3327">3327</a></span>
<span class="normal"><a href="#__codelineno-0-3328">3328</a></span>
<span class="normal"><a href="#__codelineno-0-3329">3329</a></span>
<span class="normal"><a href="#__codelineno-0-3330">3330</a></span>
<span class="normal"><a href="#__codelineno-0-3331">3331</a></span>
<span class="normal"><a href="#__codelineno-0-3332">3332</a></span>
<span class="normal"><a href="#__codelineno-0-3333">3333</a></span>
<span class="normal"><a href="#__codelineno-0-3334">3334</a></span>
<span class="normal"><a href="#__codelineno-0-3335">3335</a></span>
<span class="normal"><a href="#__codelineno-0-3336">3336</a></span>
<span class="normal"><a href="#__codelineno-0-3337">3337</a></span>
<span class="normal"><a href="#__codelineno-0-3338">3338</a></span>
<span class="normal"><a href="#__codelineno-0-3339">3339</a></span>
<span class="normal"><a href="#__codelineno-0-3340">3340</a></span>
<span class="normal"><a href="#__codelineno-0-3341">3341</a></span>
<span class="normal"><a href="#__codelineno-0-3342">3342</a></span>
<span class="normal"><a href="#__codelineno-0-3343">3343</a></span>
<span class="normal"><a href="#__codelineno-0-3344">3344</a></span>
<span class="normal"><a href="#__codelineno-0-3345">3345</a></span>
<span class="normal"><a href="#__codelineno-0-3346">3346</a></span>
<span class="normal"><a href="#__codelineno-0-3347">3347</a></span>
<span class="normal"><a href="#__codelineno-0-3348">3348</a></span>
<span class="normal"><a href="#__codelineno-0-3349">3349</a></span>
<span class="normal"><a href="#__codelineno-0-3350">3350</a></span>
<span class="normal"><a href="#__codelineno-0-3351">3351</a></span>
<span class="normal"><a href="#__codelineno-0-3352">3352</a></span>
<span class="normal"><a href="#__codelineno-0-3353">3353</a></span>
<span class="normal"><a href="#__codelineno-0-3354">3354</a></span>
<span class="normal"><a href="#__codelineno-0-3355">3355</a></span>
<span class="normal"><a href="#__codelineno-0-3356">3356</a></span>
<span class="normal"><a href="#__codelineno-0-3357">3357</a></span>
<span class="normal"><a href="#__codelineno-0-3358">3358</a></span>
<span class="normal"><a href="#__codelineno-0-3359">3359</a></span>
<span class="normal"><a href="#__codelineno-0-3360">3360</a></span>
<span class="normal"><a href="#__codelineno-0-3361">3361</a></span>
<span class="normal"><a href="#__codelineno-0-3362">3362</a></span>
<span class="normal"><a href="#__codelineno-0-3363">3363</a></span>
<span class="normal"><a href="#__codelineno-0-3364">3364</a></span>
<span class="normal"><a href="#__codelineno-0-3365">3365</a></span>
<span class="normal"><a href="#__codelineno-0-3366">3366</a></span>
<span class="normal"><a href="#__codelineno-0-3367">3367</a></span>
<span class="normal"><a href="#__codelineno-0-3368">3368</a></span>
<span class="normal"><a href="#__codelineno-0-3369">3369</a></span>
<span class="normal"><a href="#__codelineno-0-3370">3370</a></span>
<span class="normal"><a href="#__codelineno-0-3371">3371</a></span>
<span class="normal"><a href="#__codelineno-0-3372">3372</a></span>
<span class="normal"><a href="#__codelineno-0-3373">3373</a></span>
<span class="normal"><a href="#__codelineno-0-3374">3374</a></span>
<span class="normal"><a href="#__codelineno-0-3375">3375</a></span>
<span class="normal"><a href="#__codelineno-0-3376">3376</a></span>
<span class="normal"><a href="#__codelineno-0-3377">3377</a></span>
<span class="normal"><a href="#__codelineno-0-3378">3378</a></span>
<span class="normal"><a href="#__codelineno-0-3379">3379</a></span>
<span class="normal"><a href="#__codelineno-0-3380">3380</a></span>
<span class="normal"><a href="#__codelineno-0-3381">3381</a></span>
<span class="normal"><a href="#__codelineno-0-3382">3382</a></span>
<span class="normal"><a href="#__codelineno-0-3383">3383</a></span>
<span class="normal"><a href="#__codelineno-0-3384">3384</a></span>
<span class="normal"><a href="#__codelineno-0-3385">3385</a></span>
<span class="normal"><a href="#__codelineno-0-3386">3386</a></span>
<span class="normal"><a href="#__codelineno-0-3387">3387</a></span>
<span class="normal"><a href="#__codelineno-0-3388">3388</a></span>
<span class="normal"><a href="#__codelineno-0-3389">3389</a></span>
<span class="normal"><a href="#__codelineno-0-3390">3390</a></span>
<span class="normal"><a href="#__codelineno-0-3391">3391</a></span>
<span class="normal"><a href="#__codelineno-0-3392">3392</a></span>
<span class="normal"><a href="#__codelineno-0-3393">3393</a></span>
<span class="normal"><a href="#__codelineno-0-3394">3394</a></span>
<span class="normal"><a href="#__codelineno-0-3395">3395</a></span>
<span class="normal"><a href="#__codelineno-0-3396">3396</a></span>
<span class="normal"><a href="#__codelineno-0-3397">3397</a></span>
<span class="normal"><a href="#__codelineno-0-3398">3398</a></span>
<span class="normal"><a href="#__codelineno-0-3399">3399</a></span>
<span class="normal"><a href="#__codelineno-0-3400">3400</a></span>
<span class="normal"><a href="#__codelineno-0-3401">3401</a></span>
<span class="normal"><a href="#__codelineno-0-3402">3402</a></span>
<span class="normal"><a href="#__codelineno-0-3403">3403</a></span>
<span class="normal"><a href="#__codelineno-0-3404">3404</a></span>
<span class="normal"><a href="#__codelineno-0-3405">3405</a></span>
<span class="normal"><a href="#__codelineno-0-3406">3406</a></span>
<span class="normal"><a href="#__codelineno-0-3407">3407</a></span>
<span class="normal"><a href="#__codelineno-0-3408">3408</a></span>
<span class="normal"><a href="#__codelineno-0-3409">3409</a></span>
<span class="normal"><a href="#__codelineno-0-3410">3410</a></span>
<span class="normal"><a href="#__codelineno-0-3411">3411</a></span>
<span class="normal"><a href="#__codelineno-0-3412">3412</a></span>
<span class="normal"><a href="#__codelineno-0-3413">3413</a></span>
<span class="normal"><a href="#__codelineno-0-3414">3414</a></span>
<span class="normal"><a href="#__codelineno-0-3415">3415</a></span>
<span class="normal"><a href="#__codelineno-0-3416">3416</a></span>
<span class="normal"><a href="#__codelineno-0-3417">3417</a></span>
<span class="normal"><a href="#__codelineno-0-3418">3418</a></span>
<span class="normal"><a href="#__codelineno-0-3419">3419</a></span>
<span class="normal"><a href="#__codelineno-0-3420">3420</a></span>
<span class="normal"><a href="#__codelineno-0-3421">3421</a></span>
<span class="normal"><a href="#__codelineno-0-3422">3422</a></span>
<span class="normal"><a href="#__codelineno-0-3423">3423</a></span>
<span class="normal"><a href="#__codelineno-0-3424">3424</a></span>
<span class="normal"><a href="#__codelineno-0-3425">3425</a></span>
<span class="normal"><a href="#__codelineno-0-3426">3426</a></span>
<span class="normal"><a href="#__codelineno-0-3427">3427</a></span>
<span class="normal"><a href="#__codelineno-0-3428">3428</a></span>
<span class="normal"><a href="#__codelineno-0-3429">3429</a></span>
<span class="normal"><a href="#__codelineno-0-3430">3430</a></span>
<span class="normal"><a href="#__codelineno-0-3431">3431</a></span>
<span class="normal"><a href="#__codelineno-0-3432">3432</a></span>
<span class="normal"><a href="#__codelineno-0-3433">3433</a></span>
<span class="normal"><a href="#__codelineno-0-3434">3434</a></span>
<span class="normal"><a href="#__codelineno-0-3435">3435</a></span>
<span class="normal"><a href="#__codelineno-0-3436">3436</a></span>
<span class="normal"><a href="#__codelineno-0-3437">3437</a></span>
<span class="normal"><a href="#__codelineno-0-3438">3438</a></span>
<span class="normal"><a href="#__codelineno-0-3439">3439</a></span>
<span class="normal"><a href="#__codelineno-0-3440">3440</a></span>
<span class="normal"><a href="#__codelineno-0-3441">3441</a></span>
<span class="normal"><a href="#__codelineno-0-3442">3442</a></span>
<span class="normal"><a href="#__codelineno-0-3443">3443</a></span>
<span class="normal"><a href="#__codelineno-0-3444">3444</a></span>
<span class="normal"><a href="#__codelineno-0-3445">3445</a></span>
<span class="normal"><a href="#__codelineno-0-3446">3446</a></span>
<span class="normal"><a href="#__codelineno-0-3447">3447</a></span>
<span class="normal"><a href="#__codelineno-0-3448">3448</a></span>
<span class="normal"><a href="#__codelineno-0-3449">3449</a></span>
<span class="normal"><a href="#__codelineno-0-3450">3450</a></span>
<span class="normal"><a href="#__codelineno-0-3451">3451</a></span>
<span class="normal"><a href="#__codelineno-0-3452">3452</a></span>
<span class="normal"><a href="#__codelineno-0-3453">3453</a></span>
<span class="normal"><a href="#__codelineno-0-3454">3454</a></span>
<span class="normal"><a href="#__codelineno-0-3455">3455</a></span>
<span class="normal"><a href="#__codelineno-0-3456">3456</a></span>
<span class="normal"><a href="#__codelineno-0-3457">3457</a></span>
<span class="normal"><a href="#__codelineno-0-3458">3458</a></span>
<span class="normal"><a href="#__codelineno-0-3459">3459</a></span>
<span class="normal"><a href="#__codelineno-0-3460">3460</a></span>
<span class="normal"><a href="#__codelineno-0-3461">3461</a></span>
<span class="normal"><a href="#__codelineno-0-3462">3462</a></span>
<span class="normal"><a href="#__codelineno-0-3463">3463</a></span>
<span class="normal"><a href="#__codelineno-0-3464">3464</a></span>
<span class="normal"><a href="#__codelineno-0-3465">3465</a></span>
<span class="normal"><a href="#__codelineno-0-3466">3466</a></span>
<span class="normal"><a href="#__codelineno-0-3467">3467</a></span>
<span class="normal"><a href="#__codelineno-0-3468">3468</a></span>
<span class="normal"><a href="#__codelineno-0-3469">3469</a></span>
<span class="normal"><a href="#__codelineno-0-3470">3470</a></span>
<span class="normal"><a href="#__codelineno-0-3471">3471</a></span>
<span class="normal"><a href="#__codelineno-0-3472">3472</a></span>
<span class="normal"><a href="#__codelineno-0-3473">3473</a></span>
<span class="normal"><a href="#__codelineno-0-3474">3474</a></span>
<span class="normal"><a href="#__codelineno-0-3475">3475</a></span>
<span class="normal"><a href="#__codelineno-0-3476">3476</a></span>
<span class="normal"><a href="#__codelineno-0-3477">3477</a></span>
<span class="normal"><a href="#__codelineno-0-3478">3478</a></span>
<span class="normal"><a href="#__codelineno-0-3479">3479</a></span>
<span class="normal"><a href="#__codelineno-0-3480">3480</a></span>
<span class="normal"><a href="#__codelineno-0-3481">3481</a></span>
<span class="normal"><a href="#__codelineno-0-3482">3482</a></span>
<span class="normal"><a href="#__codelineno-0-3483">3483</a></span>
<span class="normal"><a href="#__codelineno-0-3484">3484</a></span>
<span class="normal"><a href="#__codelineno-0-3485">3485</a></span>
<span class="normal"><a href="#__codelineno-0-3486">3486</a></span>
<span class="normal"><a href="#__codelineno-0-3487">3487</a></span>
<span class="normal"><a href="#__codelineno-0-3488">3488</a></span>
<span class="normal"><a href="#__codelineno-0-3489">3489</a></span>
<span class="normal"><a href="#__codelineno-0-3490">3490</a></span>
<span class="normal"><a href="#__codelineno-0-3491">3491</a></span>
<span class="normal"><a href="#__codelineno-0-3492">3492</a></span>
<span class="normal"><a href="#__codelineno-0-3493">3493</a></span>
<span class="normal"><a href="#__codelineno-0-3494">3494</a></span>
<span class="normal"><a href="#__codelineno-0-3495">3495</a></span>
<span class="normal"><a href="#__codelineno-0-3496">3496</a></span>
<span class="normal"><a href="#__codelineno-0-3497">3497</a></span>
<span class="normal"><a href="#__codelineno-0-3498">3498</a></span>
<span class="normal"><a href="#__codelineno-0-3499">3499</a></span>
<span class="normal"><a href="#__codelineno-0-3500">3500</a></span>
<span class="normal"><a href="#__codelineno-0-3501">3501</a></span>
<span class="normal"><a href="#__codelineno-0-3502">3502</a></span>
<span class="normal"><a href="#__codelineno-0-3503">3503</a></span>
<span class="normal"><a href="#__codelineno-0-3504">3504</a></span>
<span class="normal"><a href="#__codelineno-0-3505">3505</a></span>
<span class="normal"><a href="#__codelineno-0-3506">3506</a></span>
<span class="normal"><a href="#__codelineno-0-3507">3507</a></span>
<span class="normal"><a href="#__codelineno-0-3508">3508</a></span>
<span class="normal"><a href="#__codelineno-0-3509">3509</a></span>
<span class="normal"><a href="#__codelineno-0-3510">3510</a></span>
<span class="normal"><a href="#__codelineno-0-3511">3511</a></span>
<span class="normal"><a href="#__codelineno-0-3512">3512</a></span>
<span class="normal"><a href="#__codelineno-0-3513">3513</a></span>
<span class="normal"><a href="#__codelineno-0-3514">3514</a></span>
<span class="normal"><a href="#__codelineno-0-3515">3515</a></span>
<span class="normal"><a href="#__codelineno-0-3516">3516</a></span>
<span class="normal"><a href="#__codelineno-0-3517">3517</a></span>
<span class="normal"><a href="#__codelineno-0-3518">3518</a></span>
<span class="normal"><a href="#__codelineno-0-3519">3519</a></span>
<span class="normal"><a href="#__codelineno-0-3520">3520</a></span>
<span class="normal"><a href="#__codelineno-0-3521">3521</a></span>
<span class="normal"><a href="#__codelineno-0-3522">3522</a></span>
<span class="normal"><a href="#__codelineno-0-3523">3523</a></span>
<span class="normal"><a href="#__codelineno-0-3524">3524</a></span>
<span class="normal"><a href="#__codelineno-0-3525">3525</a></span>
<span class="normal"><a href="#__codelineno-0-3526">3526</a></span>
<span class="normal"><a href="#__codelineno-0-3527">3527</a></span>
<span class="normal"><a href="#__codelineno-0-3528">3528</a></span>
<span class="normal"><a href="#__codelineno-0-3529">3529</a></span>
<span class="normal"><a href="#__codelineno-0-3530">3530</a></span>
<span class="normal"><a href="#__codelineno-0-3531">3531</a></span>
<span class="normal"><a href="#__codelineno-0-3532">3532</a></span>
<span class="normal"><a href="#__codelineno-0-3533">3533</a></span>
<span class="normal"><a href="#__codelineno-0-3534">3534</a></span>
<span class="normal"><a href="#__codelineno-0-3535">3535</a></span>
<span class="normal"><a href="#__codelineno-0-3536">3536</a></span>
<span class="normal"><a href="#__codelineno-0-3537">3537</a></span>
<span class="normal"><a href="#__codelineno-0-3538">3538</a></span>
<span class="normal"><a href="#__codelineno-0-3539">3539</a></span>
<span class="normal"><a href="#__codelineno-0-3540">3540</a></span>
<span class="normal"><a href="#__codelineno-0-3541">3541</a></span>
<span class="normal"><a href="#__codelineno-0-3542">3542</a></span>
<span class="normal"><a href="#__codelineno-0-3543">3543</a></span>
<span class="normal"><a href="#__codelineno-0-3544">3544</a></span>
<span class="normal"><a href="#__codelineno-0-3545">3545</a></span>
<span class="normal"><a href="#__codelineno-0-3546">3546</a></span>
<span class="normal"><a href="#__codelineno-0-3547">3547</a></span>
<span class="normal"><a href="#__codelineno-0-3548">3548</a></span>
<span class="normal"><a href="#__codelineno-0-3549">3549</a></span>
<span class="normal"><a href="#__codelineno-0-3550">3550</a></span>
<span class="normal"><a href="#__codelineno-0-3551">3551</a></span>
<span class="normal"><a href="#__codelineno-0-3552">3552</a></span>
<span class="normal"><a href="#__codelineno-0-3553">3553</a></span>
<span class="normal"><a href="#__codelineno-0-3554">3554</a></span>
<span class="normal"><a href="#__codelineno-0-3555">3555</a></span>
<span class="normal"><a href="#__codelineno-0-3556">3556</a></span>
<span class="normal"><a href="#__codelineno-0-3557">3557</a></span>
<span class="normal"><a href="#__codelineno-0-3558">3558</a></span>
<span class="normal"><a href="#__codelineno-0-3559">3559</a></span>
<span class="normal"><a href="#__codelineno-0-3560">3560</a></span>
<span class="normal"><a href="#__codelineno-0-3561">3561</a></span>
<span class="normal"><a href="#__codelineno-0-3562">3562</a></span>
<span class="normal"><a href="#__codelineno-0-3563">3563</a></span>
<span class="normal"><a href="#__codelineno-0-3564">3564</a></span>
<span class="normal"><a href="#__codelineno-0-3565">3565</a></span>
<span class="normal"><a href="#__codelineno-0-3566">3566</a></span>
<span class="normal"><a href="#__codelineno-0-3567">3567</a></span>
<span class="normal"><a href="#__codelineno-0-3568">3568</a></span>
<span class="normal"><a href="#__codelineno-0-3569">3569</a></span>
<span class="normal"><a href="#__codelineno-0-3570">3570</a></span>
<span class="normal"><a href="#__codelineno-0-3571">3571</a></span>
<span class="normal"><a href="#__codelineno-0-3572">3572</a></span>
<span class="normal"><a href="#__codelineno-0-3573">3573</a></span>
<span class="normal"><a href="#__codelineno-0-3574">3574</a></span>
<span class="normal"><a href="#__codelineno-0-3575">3575</a></span>
<span class="normal"><a href="#__codelineno-0-3576">3576</a></span>
<span class="normal"><a href="#__codelineno-0-3577">3577</a></span>
<span class="normal"><a href="#__codelineno-0-3578">3578</a></span>
<span class="normal"><a href="#__codelineno-0-3579">3579</a></span>
<span class="normal"><a href="#__codelineno-0-3580">3580</a></span>
<span class="normal"><a href="#__codelineno-0-3581">3581</a></span>
<span class="normal"><a href="#__codelineno-0-3582">3582</a></span>
<span class="normal"><a href="#__codelineno-0-3583">3583</a></span>
<span class="normal"><a href="#__codelineno-0-3584">3584</a></span>
<span class="normal"><a href="#__codelineno-0-3585">3585</a></span>
<span class="normal"><a href="#__codelineno-0-3586">3586</a></span>
<span class="normal"><a href="#__codelineno-0-3587">3587</a></span>
<span class="normal"><a href="#__codelineno-0-3588">3588</a></span>
<span class="normal"><a href="#__codelineno-0-3589">3589</a></span>
<span class="normal"><a href="#__codelineno-0-3590">3590</a></span>
<span class="normal"><a href="#__codelineno-0-3591">3591</a></span>
<span class="normal"><a href="#__codelineno-0-3592">3592</a></span>
<span class="normal"><a href="#__codelineno-0-3593">3593</a></span>
<span class="normal"><a href="#__codelineno-0-3594">3594</a></span>
<span class="normal"><a href="#__codelineno-0-3595">3595</a></span>
<span class="normal"><a href="#__codelineno-0-3596">3596</a></span>
<span class="normal"><a href="#__codelineno-0-3597">3597</a></span>
<span class="normal"><a href="#__codelineno-0-3598">3598</a></span>
<span class="normal"><a href="#__codelineno-0-3599">3599</a></span>
<span class="normal"><a href="#__codelineno-0-3600">3600</a></span>
<span class="normal"><a href="#__codelineno-0-3601">3601</a></span>
<span class="normal"><a href="#__codelineno-0-3602">3602</a></span>
<span class="normal"><a href="#__codelineno-0-3603">3603</a></span>
<span class="normal"><a href="#__codelineno-0-3604">3604</a></span>
<span class="normal"><a href="#__codelineno-0-3605">3605</a></span>
<span class="normal"><a href="#__codelineno-0-3606">3606</a></span>
<span class="normal"><a href="#__codelineno-0-3607">3607</a></span>
<span class="normal"><a href="#__codelineno-0-3608">3608</a></span>
<span class="normal"><a href="#__codelineno-0-3609">3609</a></span>
<span class="normal"><a href="#__codelineno-0-3610">3610</a></span>
<span class="normal"><a href="#__codelineno-0-3611">3611</a></span>
<span class="normal"><a href="#__codelineno-0-3612">3612</a></span>
<span class="normal"><a href="#__codelineno-0-3613">3613</a></span>
<span class="normal"><a href="#__codelineno-0-3614">3614</a></span>
<span class="normal"><a href="#__codelineno-0-3615">3615</a></span>
<span class="normal"><a href="#__codelineno-0-3616">3616</a></span>
<span class="normal"><a href="#__codelineno-0-3617">3617</a></span>
<span class="normal"><a href="#__codelineno-0-3618">3618</a></span>
<span class="normal"><a href="#__codelineno-0-3619">3619</a></span>
<span class="normal"><a href="#__codelineno-0-3620">3620</a></span>
<span class="normal"><a href="#__codelineno-0-3621">3621</a></span>
<span class="normal"><a href="#__codelineno-0-3622">3622</a></span>
<span class="normal"><a href="#__codelineno-0-3623">3623</a></span>
<span class="normal"><a href="#__codelineno-0-3624">3624</a></span>
<span class="normal"><a href="#__codelineno-0-3625">3625</a></span>
<span class="normal"><a href="#__codelineno-0-3626">3626</a></span>
<span class="normal"><a href="#__codelineno-0-3627">3627</a></span>
<span class="normal"><a href="#__codelineno-0-3628">3628</a></span>
<span class="normal"><a href="#__codelineno-0-3629">3629</a></span>
<span class="normal"><a href="#__codelineno-0-3630">3630</a></span>
<span class="normal"><a href="#__codelineno-0-3631">3631</a></span>
<span class="normal"><a href="#__codelineno-0-3632">3632</a></span>
<span class="normal"><a href="#__codelineno-0-3633">3633</a></span>
<span class="normal"><a href="#__codelineno-0-3634">3634</a></span>
<span class="normal"><a href="#__codelineno-0-3635">3635</a></span>
<span class="normal"><a href="#__codelineno-0-3636">3636</a></span>
<span class="normal"><a href="#__codelineno-0-3637">3637</a></span>
<span class="normal"><a href="#__codelineno-0-3638">3638</a></span>
<span class="normal"><a href="#__codelineno-0-3639">3639</a></span>
<span class="normal"><a href="#__codelineno-0-3640">3640</a></span>
<span class="normal"><a href="#__codelineno-0-3641">3641</a></span>
<span class="normal"><a href="#__codelineno-0-3642">3642</a></span>
<span class="normal"><a href="#__codelineno-0-3643">3643</a></span>
<span class="normal"><a href="#__codelineno-0-3644">3644</a></span>
<span class="normal"><a href="#__codelineno-0-3645">3645</a></span>
<span class="normal"><a href="#__codelineno-0-3646">3646</a></span>
<span class="normal"><a href="#__codelineno-0-3647">3647</a></span>
<span class="normal"><a href="#__codelineno-0-3648">3648</a></span>
<span class="normal"><a href="#__codelineno-0-3649">3649</a></span>
<span class="normal"><a href="#__codelineno-0-3650">3650</a></span>
<span class="normal"><a href="#__codelineno-0-3651">3651</a></span>
<span class="normal"><a href="#__codelineno-0-3652">3652</a></span>
<span class="normal"><a href="#__codelineno-0-3653">3653</a></span>
<span class="normal"><a href="#__codelineno-0-3654">3654</a></span>
<span class="normal"><a href="#__codelineno-0-3655">3655</a></span>
<span class="normal"><a href="#__codelineno-0-3656">3656</a></span>
<span class="normal"><a href="#__codelineno-0-3657">3657</a></span>
<span class="normal"><a href="#__codelineno-0-3658">3658</a></span>
<span class="normal"><a href="#__codelineno-0-3659">3659</a></span>
<span class="normal"><a href="#__codelineno-0-3660">3660</a></span>
<span class="normal"><a href="#__codelineno-0-3661">3661</a></span>
<span class="normal"><a href="#__codelineno-0-3662">3662</a></span>
<span class="normal"><a href="#__codelineno-0-3663">3663</a></span>
<span class="normal"><a href="#__codelineno-0-3664">3664</a></span>
<span class="normal"><a href="#__codelineno-0-3665">3665</a></span>
<span class="normal"><a href="#__codelineno-0-3666">3666</a></span>
<span class="normal"><a href="#__codelineno-0-3667">3667</a></span>
<span class="normal"><a href="#__codelineno-0-3668">3668</a></span>
<span class="normal"><a href="#__codelineno-0-3669">3669</a></span>
<span class="normal"><a href="#__codelineno-0-3670">3670</a></span>
<span class="normal"><a href="#__codelineno-0-3671">3671</a></span>
<span class="normal"><a href="#__codelineno-0-3672">3672</a></span>
<span class="normal"><a href="#__codelineno-0-3673">3673</a></span>
<span class="normal"><a href="#__codelineno-0-3674">3674</a></span>
<span class="normal"><a href="#__codelineno-0-3675">3675</a></span>
<span class="normal"><a href="#__codelineno-0-3676">3676</a></span>
<span class="normal"><a href="#__codelineno-0-3677">3677</a></span>
<span class="normal"><a href="#__codelineno-0-3678">3678</a></span>
<span class="normal"><a href="#__codelineno-0-3679">3679</a></span>
<span class="normal"><a href="#__codelineno-0-3680">3680</a></span>
<span class="normal"><a href="#__codelineno-0-3681">3681</a></span>
<span class="normal"><a href="#__codelineno-0-3682">3682</a></span>
<span class="normal"><a href="#__codelineno-0-3683">3683</a></span>
<span class="normal"><a href="#__codelineno-0-3684">3684</a></span>
<span class="normal"><a href="#__codelineno-0-3685">3685</a></span>
<span class="normal"><a href="#__codelineno-0-3686">3686</a></span>
<span class="normal"><a href="#__codelineno-0-3687">3687</a></span>
<span class="normal"><a href="#__codelineno-0-3688">3688</a></span>
<span class="normal"><a href="#__codelineno-0-3689">3689</a></span>
<span class="normal"><a href="#__codelineno-0-3690">3690</a></span>
<span class="normal"><a href="#__codelineno-0-3691">3691</a></span>
<span class="normal"><a href="#__codelineno-0-3692">3692</a></span>
<span class="normal"><a href="#__codelineno-0-3693">3693</a></span>
<span class="normal"><a href="#__codelineno-0-3694">3694</a></span>
<span class="normal"><a href="#__codelineno-0-3695">3695</a></span>
<span class="normal"><a href="#__codelineno-0-3696">3696</a></span>
<span class="normal"><a href="#__codelineno-0-3697">3697</a></span>
<span class="normal"><a href="#__codelineno-0-3698">3698</a></span>
<span class="normal"><a href="#__codelineno-0-3699">3699</a></span>
<span class="normal"><a href="#__codelineno-0-3700">3700</a></span>
<span class="normal"><a href="#__codelineno-0-3701">3701</a></span>
<span class="normal"><a href="#__codelineno-0-3702">3702</a></span>
<span class="normal"><a href="#__codelineno-0-3703">3703</a></span>
<span class="normal"><a href="#__codelineno-0-3704">3704</a></span>
<span class="normal"><a href="#__codelineno-0-3705">3705</a></span>
<span class="normal"><a href="#__codelineno-0-3706">3706</a></span>
<span class="normal"><a href="#__codelineno-0-3707">3707</a></span>
<span class="normal"><a href="#__codelineno-0-3708">3708</a></span>
<span class="normal"><a href="#__codelineno-0-3709">3709</a></span>
<span class="normal"><a href="#__codelineno-0-3710">3710</a></span>
<span class="normal"><a href="#__codelineno-0-3711">3711</a></span>
<span class="normal"><a href="#__codelineno-0-3712">3712</a></span>
<span class="normal"><a href="#__codelineno-0-3713">3713</a></span>
<span class="normal"><a href="#__codelineno-0-3714">3714</a></span>
<span class="normal"><a href="#__codelineno-0-3715">3715</a></span>
<span class="normal"><a href="#__codelineno-0-3716">3716</a></span>
<span class="normal"><a href="#__codelineno-0-3717">3717</a></span>
<span class="normal"><a href="#__codelineno-0-3718">3718</a></span>
<span class="normal"><a href="#__codelineno-0-3719">3719</a></span>
<span class="normal"><a href="#__codelineno-0-3720">3720</a></span>
<span class="normal"><a href="#__codelineno-0-3721">3721</a></span>
<span class="normal"><a href="#__codelineno-0-3722">3722</a></span>
<span class="normal"><a href="#__codelineno-0-3723">3723</a></span>
<span class="normal"><a href="#__codelineno-0-3724">3724</a></span>
<span class="normal"><a href="#__codelineno-0-3725">3725</a></span>
<span class="normal"><a href="#__codelineno-0-3726">3726</a></span>
<span class="normal"><a href="#__codelineno-0-3727">3727</a></span>
<span class="normal"><a href="#__codelineno-0-3728">3728</a></span>
<span class="normal"><a href="#__codelineno-0-3729">3729</a></span>
<span class="normal"><a href="#__codelineno-0-3730">3730</a></span>
<span class="normal"><a href="#__codelineno-0-3731">3731</a></span>
<span class="normal"><a href="#__codelineno-0-3732">3732</a></span>
<span class="normal"><a href="#__codelineno-0-3733">3733</a></span>
<span class="normal"><a href="#__codelineno-0-3734">3734</a></span>
<span class="normal"><a href="#__codelineno-0-3735">3735</a></span>
<span class="normal"><a href="#__codelineno-0-3736">3736</a></span>
<span class="normal"><a href="#__codelineno-0-3737">3737</a></span>
<span class="normal"><a href="#__codelineno-0-3738">3738</a></span>
<span class="normal"><a href="#__codelineno-0-3739">3739</a></span>
<span class="normal"><a href="#__codelineno-0-3740">3740</a></span>
<span class="normal"><a href="#__codelineno-0-3741">3741</a></span>
<span class="normal"><a href="#__codelineno-0-3742">3742</a></span>
<span class="normal"><a href="#__codelineno-0-3743">3743</a></span>
<span class="normal"><a href="#__codelineno-0-3744">3744</a></span>
<span class="normal"><a href="#__codelineno-0-3745">3745</a></span>
<span class="normal"><a href="#__codelineno-0-3746">3746</a></span>
<span class="normal"><a href="#__codelineno-0-3747">3747</a></span>
<span class="normal"><a href="#__codelineno-0-3748">3748</a></span>
<span class="normal"><a href="#__codelineno-0-3749">3749</a></span>
<span class="normal"><a href="#__codelineno-0-3750">3750</a></span>
<span class="normal"><a href="#__codelineno-0-3751">3751</a></span>
<span class="normal"><a href="#__codelineno-0-3752">3752</a></span>
<span class="normal"><a href="#__codelineno-0-3753">3753</a></span>
<span class="normal"><a href="#__codelineno-0-3754">3754</a></span>
<span class="normal"><a href="#__codelineno-0-3755">3755</a></span>
<span class="normal"><a href="#__codelineno-0-3756">3756</a></span>
<span class="normal"><a href="#__codelineno-0-3757">3757</a></span>
<span class="normal"><a href="#__codelineno-0-3758">3758</a></span>
<span class="normal"><a href="#__codelineno-0-3759">3759</a></span>
<span class="normal"><a href="#__codelineno-0-3760">3760</a></span>
<span class="normal"><a href="#__codelineno-0-3761">3761</a></span>
<span class="normal"><a href="#__codelineno-0-3762">3762</a></span>
<span class="normal"><a href="#__codelineno-0-3763">3763</a></span>
<span class="normal"><a href="#__codelineno-0-3764">3764</a></span>
<span class="normal"><a href="#__codelineno-0-3765">3765</a></span>
<span class="normal"><a href="#__codelineno-0-3766">3766</a></span>
<span class="normal"><a href="#__codelineno-0-3767">3767</a></span>
<span class="normal"><a href="#__codelineno-0-3768">3768</a></span>
<span class="normal"><a href="#__codelineno-0-3769">3769</a></span>
<span class="normal"><a href="#__codelineno-0-3770">3770</a></span>
<span class="normal"><a href="#__codelineno-0-3771">3771</a></span>
<span class="normal"><a href="#__codelineno-0-3772">3772</a></span>
<span class="normal"><a href="#__codelineno-0-3773">3773</a></span>
<span class="normal"><a href="#__codelineno-0-3774">3774</a></span>
<span class="normal"><a href="#__codelineno-0-3775">3775</a></span>
<span class="normal"><a href="#__codelineno-0-3776">3776</a></span>
<span class="normal"><a href="#__codelineno-0-3777">3777</a></span>
<span class="normal"><a href="#__codelineno-0-3778">3778</a></span>
<span class="normal"><a href="#__codelineno-0-3779">3779</a></span>
<span class="normal"><a href="#__codelineno-0-3780">3780</a></span>
<span class="normal"><a href="#__codelineno-0-3781">3781</a></span>
<span class="normal"><a href="#__codelineno-0-3782">3782</a></span>
<span class="normal"><a href="#__codelineno-0-3783">3783</a></span>
<span class="normal"><a href="#__codelineno-0-3784">3784</a></span>
<span class="normal"><a href="#__codelineno-0-3785">3785</a></span>
<span class="normal"><a href="#__codelineno-0-3786">3786</a></span>
<span class="normal"><a href="#__codelineno-0-3787">3787</a></span>
<span class="normal"><a href="#__codelineno-0-3788">3788</a></span>
<span class="normal"><a href="#__codelineno-0-3789">3789</a></span>
<span class="normal"><a href="#__codelineno-0-3790">3790</a></span>
<span class="normal"><a href="#__codelineno-0-3791">3791</a></span>
<span class="normal"><a href="#__codelineno-0-3792">3792</a></span>
<span class="normal"><a href="#__codelineno-0-3793">3793</a></span>
<span class="normal"><a href="#__codelineno-0-3794">3794</a></span>
<span class="normal"><a href="#__codelineno-0-3795">3795</a></span>
<span class="normal"><a href="#__codelineno-0-3796">3796</a></span>
<span class="normal"><a href="#__codelineno-0-3797">3797</a></span>
<span class="normal"><a href="#__codelineno-0-3798">3798</a></span>
<span class="normal"><a href="#__codelineno-0-3799">3799</a></span>
<span class="normal"><a href="#__codelineno-0-3800">3800</a></span>
<span class="normal"><a href="#__codelineno-0-3801">3801</a></span>
<span class="normal"><a href="#__codelineno-0-3802">3802</a></span>
<span class="normal"><a href="#__codelineno-0-3803">3803</a></span>
<span class="normal"><a href="#__codelineno-0-3804">3804</a></span>
<span class="normal"><a href="#__codelineno-0-3805">3805</a></span>
<span class="normal"><a href="#__codelineno-0-3806">3806</a></span>
<span class="normal"><a href="#__codelineno-0-3807">3807</a></span>
<span class="normal"><a href="#__codelineno-0-3808">3808</a></span>
<span class="normal"><a href="#__codelineno-0-3809">3809</a></span>
<span class="normal"><a href="#__codelineno-0-3810">3810</a></span>
<span class="normal"><a href="#__codelineno-0-3811">3811</a></span>
<span class="normal"><a href="#__codelineno-0-3812">3812</a></span>
<span class="normal"><a href="#__codelineno-0-3813">3813</a></span>
<span class="normal"><a href="#__codelineno-0-3814">3814</a></span>
<span class="normal"><a href="#__codelineno-0-3815">3815</a></span>
<span class="normal"><a href="#__codelineno-0-3816">3816</a></span>
<span class="normal"><a href="#__codelineno-0-3817">3817</a></span>
<span class="normal"><a href="#__codelineno-0-3818">3818</a></span>
<span class="normal"><a href="#__codelineno-0-3819">3819</a></span>
<span class="normal"><a href="#__codelineno-0-3820">3820</a></span>
<span class="normal"><a href="#__codelineno-0-3821">3821</a></span>
<span class="normal"><a href="#__codelineno-0-3822">3822</a></span>
<span class="normal"><a href="#__codelineno-0-3823">3823</a></span>
<span class="normal"><a href="#__codelineno-0-3824">3824</a></span>
<span class="normal"><a href="#__codelineno-0-3825">3825</a></span>
<span class="normal"><a href="#__codelineno-0-3826">3826</a></span>
<span class="normal"><a href="#__codelineno-0-3827">3827</a></span>
<span class="normal"><a href="#__codelineno-0-3828">3828</a></span>
<span class="normal"><a href="#__codelineno-0-3829">3829</a></span>
<span class="normal"><a href="#__codelineno-0-3830">3830</a></span>
<span class="normal"><a href="#__codelineno-0-3831">3831</a></span>
<span class="normal"><a href="#__codelineno-0-3832">3832</a></span>
<span class="normal"><a href="#__codelineno-0-3833">3833</a></span>
<span class="normal"><a href="#__codelineno-0-3834">3834</a></span>
<span class="normal"><a href="#__codelineno-0-3835">3835</a></span>
<span class="normal"><a href="#__codelineno-0-3836">3836</a></span>
<span class="normal"><a href="#__codelineno-0-3837">3837</a></span>
<span class="normal"><a href="#__codelineno-0-3838">3838</a></span>
<span class="normal"><a href="#__codelineno-0-3839">3839</a></span>
<span class="normal"><a href="#__codelineno-0-3840">3840</a></span>
<span class="normal"><a href="#__codelineno-0-3841">3841</a></span>
<span class="normal"><a href="#__codelineno-0-3842">3842</a></span>
<span class="normal"><a href="#__codelineno-0-3843">3843</a></span>
<span class="normal"><a href="#__codelineno-0-3844">3844</a></span>
<span class="normal"><a href="#__codelineno-0-3845">3845</a></span>
<span class="normal"><a href="#__codelineno-0-3846">3846</a></span>
<span class="normal"><a href="#__codelineno-0-3847">3847</a></span>
<span class="normal"><a href="#__codelineno-0-3848">3848</a></span>
<span class="normal"><a href="#__codelineno-0-3849">3849</a></span>
<span class="normal"><a href="#__codelineno-0-3850">3850</a></span>
<span class="normal"><a href="#__codelineno-0-3851">3851</a></span>
<span class="normal"><a href="#__codelineno-0-3852">3852</a></span>
<span class="normal"><a href="#__codelineno-0-3853">3853</a></span>
<span class="normal"><a href="#__codelineno-0-3854">3854</a></span>
<span class="normal"><a href="#__codelineno-0-3855">3855</a></span>
<span class="normal"><a href="#__codelineno-0-3856">3856</a></span>
<span class="normal"><a href="#__codelineno-0-3857">3857</a></span>
<span class="normal"><a href="#__codelineno-0-3858">3858</a></span>
<span class="normal"><a href="#__codelineno-0-3859">3859</a></span>
<span class="normal"><a href="#__codelineno-0-3860">3860</a></span>
<span class="normal"><a href="#__codelineno-0-3861">3861</a></span>
<span class="normal"><a href="#__codelineno-0-3862">3862</a></span>
<span class="normal"><a href="#__codelineno-0-3863">3863</a></span>
<span class="normal"><a href="#__codelineno-0-3864">3864</a></span>
<span class="normal"><a href="#__codelineno-0-3865">3865</a></span>
<span class="normal"><a href="#__codelineno-0-3866">3866</a></span>
<span class="normal"><a href="#__codelineno-0-3867">3867</a></span>
<span class="normal"><a href="#__codelineno-0-3868">3868</a></span>
<span class="normal"><a href="#__codelineno-0-3869">3869</a></span>
<span class="normal"><a href="#__codelineno-0-3870">3870</a></span>
<span class="normal"><a href="#__codelineno-0-3871">3871</a></span>
<span class="normal"><a href="#__codelineno-0-3872">3872</a></span>
<span class="normal"><a href="#__codelineno-0-3873">3873</a></span>
<span class="normal"><a href="#__codelineno-0-3874">3874</a></span>
<span class="normal"><a href="#__codelineno-0-3875">3875</a></span>
<span class="normal"><a href="#__codelineno-0-3876">3876</a></span>
<span class="normal"><a href="#__codelineno-0-3877">3877</a></span>
<span class="normal"><a href="#__codelineno-0-3878">3878</a></span>
<span class="normal"><a href="#__codelineno-0-3879">3879</a></span>
<span class="normal"><a href="#__codelineno-0-3880">3880</a></span>
<span class="normal"><a href="#__codelineno-0-3881">3881</a></span>
<span class="normal"><a href="#__codelineno-0-3882">3882</a></span>
<span class="normal"><a href="#__codelineno-0-3883">3883</a></span>
<span class="normal"><a href="#__codelineno-0-3884">3884</a></span>
<span class="normal"><a href="#__codelineno-0-3885">3885</a></span>
<span class="normal"><a href="#__codelineno-0-3886">3886</a></span>
<span class="normal"><a href="#__codelineno-0-3887">3887</a></span>
<span class="normal"><a href="#__codelineno-0-3888">3888</a></span>
<span class="normal"><a href="#__codelineno-0-3889">3889</a></span>
<span class="normal"><a href="#__codelineno-0-3890">3890</a></span>
<span class="normal"><a href="#__codelineno-0-3891">3891</a></span>
<span class="normal"><a href="#__codelineno-0-3892">3892</a></span>
<span class="normal"><a href="#__codelineno-0-3893">3893</a></span>
<span class="normal"><a href="#__codelineno-0-3894">3894</a></span>
<span class="normal"><a href="#__codelineno-0-3895">3895</a></span>
<span class="normal"><a href="#__codelineno-0-3896">3896</a></span>
<span class="normal"><a href="#__codelineno-0-3897">3897</a></span>
<span class="normal"><a href="#__codelineno-0-3898">3898</a></span>
<span class="normal"><a href="#__codelineno-0-3899">3899</a></span>
<span class="normal"><a href="#__codelineno-0-3900">3900</a></span>
<span class="normal"><a href="#__codelineno-0-3901">3901</a></span>
<span class="normal"><a href="#__codelineno-0-3902">3902</a></span>
<span class="normal"><a href="#__codelineno-0-3903">3903</a></span>
<span class="normal"><a href="#__codelineno-0-3904">3904</a></span>
<span class="normal"><a href="#__codelineno-0-3905">3905</a></span>
<span class="normal"><a href="#__codelineno-0-3906">3906</a></span>
<span class="normal"><a href="#__codelineno-0-3907">3907</a></span>
<span class="normal"><a href="#__codelineno-0-3908">3908</a></span>
<span class="normal"><a href="#__codelineno-0-3909">3909</a></span>
<span class="normal"><a href="#__codelineno-0-3910">3910</a></span>
<span class="normal"><a href="#__codelineno-0-3911">3911</a></span>
<span class="normal"><a href="#__codelineno-0-3912">3912</a></span>
<span class="normal"><a href="#__codelineno-0-3913">3913</a></span>
<span class="normal"><a href="#__codelineno-0-3914">3914</a></span>
<span class="normal"><a href="#__codelineno-0-3915">3915</a></span>
<span class="normal"><a href="#__codelineno-0-3916">3916</a></span>
<span class="normal"><a href="#__codelineno-0-3917">3917</a></span>
<span class="normal"><a href="#__codelineno-0-3918">3918</a></span>
<span class="normal"><a href="#__codelineno-0-3919">3919</a></span>
<span class="normal"><a href="#__codelineno-0-3920">3920</a></span>
<span class="normal"><a href="#__codelineno-0-3921">3921</a></span>
<span class="normal"><a href="#__codelineno-0-3922">3922</a></span>
<span class="normal"><a href="#__codelineno-0-3923">3923</a></span>
<span class="normal"><a href="#__codelineno-0-3924">3924</a></span>
<span class="normal"><a href="#__codelineno-0-3925">3925</a></span>
<span class="normal"><a href="#__codelineno-0-3926">3926</a></span>
<span class="normal"><a href="#__codelineno-0-3927">3927</a></span>
<span class="normal"><a href="#__codelineno-0-3928">3928</a></span>
<span class="normal"><a href="#__codelineno-0-3929">3929</a></span>
<span class="normal"><a href="#__codelineno-0-3930">3930</a></span>
<span class="normal"><a href="#__codelineno-0-3931">3931</a></span>
<span class="normal"><a href="#__codelineno-0-3932">3932</a></span>
<span class="normal"><a href="#__codelineno-0-3933">3933</a></span>
<span class="normal"><a href="#__codelineno-0-3934">3934</a></span>
<span class="normal"><a href="#__codelineno-0-3935">3935</a></span>
<span class="normal"><a href="#__codelineno-0-3936">3936</a></span>
<span class="normal"><a href="#__codelineno-0-3937">3937</a></span>
<span class="normal"><a href="#__codelineno-0-3938">3938</a></span>
<span class="normal"><a href="#__codelineno-0-3939">3939</a></span>
<span class="normal"><a href="#__codelineno-0-3940">3940</a></span>
<span class="normal"><a href="#__codelineno-0-3941">3941</a></span>
<span class="normal"><a href="#__codelineno-0-3942">3942</a></span>
<span class="normal"><a href="#__codelineno-0-3943">3943</a></span>
<span class="normal"><a href="#__codelineno-0-3944">3944</a></span>
<span class="normal"><a href="#__codelineno-0-3945">3945</a></span>
<span class="normal"><a href="#__codelineno-0-3946">3946</a></span>
<span class="normal"><a href="#__codelineno-0-3947">3947</a></span>
<span class="normal"><a href="#__codelineno-0-3948">3948</a></span>
<span class="normal"><a href="#__codelineno-0-3949">3949</a></span>
<span class="normal"><a href="#__codelineno-0-3950">3950</a></span>
<span class="normal"><a href="#__codelineno-0-3951">3951</a></span>
<span class="normal"><a href="#__codelineno-0-3952">3952</a></span>
<span class="normal"><a href="#__codelineno-0-3953">3953</a></span>
<span class="normal"><a href="#__codelineno-0-3954">3954</a></span>
<span class="normal"><a href="#__codelineno-0-3955">3955</a></span>
<span class="normal"><a href="#__codelineno-0-3956">3956</a></span>
<span class="normal"><a href="#__codelineno-0-3957">3957</a></span>
<span class="normal"><a href="#__codelineno-0-3958">3958</a></span>
<span class="normal"><a href="#__codelineno-0-3959">3959</a></span>
<span class="normal"><a href="#__codelineno-0-3960">3960</a></span>
<span class="normal"><a href="#__codelineno-0-3961">3961</a></span>
<span class="normal"><a href="#__codelineno-0-3962">3962</a></span>
<span class="normal"><a href="#__codelineno-0-3963">3963</a></span>
<span class="normal"><a href="#__codelineno-0-3964">3964</a></span>
<span class="normal"><a href="#__codelineno-0-3965">3965</a></span>
<span class="normal"><a href="#__codelineno-0-3966">3966</a></span>
<span class="normal"><a href="#__codelineno-0-3967">3967</a></span>
<span class="normal"><a href="#__codelineno-0-3968">3968</a></span>
<span class="normal"><a href="#__codelineno-0-3969">3969</a></span>
<span class="normal"><a href="#__codelineno-0-3970">3970</a></span>
<span class="normal"><a href="#__codelineno-0-3971">3971</a></span>
<span class="normal"><a href="#__codelineno-0-3972">3972</a></span>
<span class="normal"><a href="#__codelineno-0-3973">3973</a></span>
<span class="normal"><a href="#__codelineno-0-3974">3974</a></span>
<span class="normal"><a href="#__codelineno-0-3975">3975</a></span>
<span class="normal"><a href="#__codelineno-0-3976">3976</a></span>
<span class="normal"><a href="#__codelineno-0-3977">3977</a></span>
<span class="normal"><a href="#__codelineno-0-3978">3978</a></span>
<span class="normal"><a href="#__codelineno-0-3979">3979</a></span>
<span class="normal"><a href="#__codelineno-0-3980">3980</a></span>
<span class="normal"><a href="#__codelineno-0-3981">3981</a></span>
<span class="normal"><a href="#__codelineno-0-3982">3982</a></span>
<span class="normal"><a href="#__codelineno-0-3983">3983</a></span>
<span class="normal"><a href="#__codelineno-0-3984">3984</a></span>
<span class="normal"><a href="#__codelineno-0-3985">3985</a></span>
<span class="normal"><a href="#__codelineno-0-3986">3986</a></span>
<span class="normal"><a href="#__codelineno-0-3987">3987</a></span>
<span class="normal"><a href="#__codelineno-0-3988">3988</a></span>
<span class="normal"><a href="#__codelineno-0-3989">3989</a></span>
<span class="normal"><a href="#__codelineno-0-3990">3990</a></span>
<span class="normal"><a href="#__codelineno-0-3991">3991</a></span>
<span class="normal"><a href="#__codelineno-0-3992">3992</a></span>
<span class="normal"><a href="#__codelineno-0-3993">3993</a></span>
<span class="normal"><a href="#__codelineno-0-3994">3994</a></span>
<span class="normal"><a href="#__codelineno-0-3995">3995</a></span>
<span class="normal"><a href="#__codelineno-0-3996">3996</a></span>
<span class="normal"><a href="#__codelineno-0-3997">3997</a></span>
<span class="normal"><a href="#__codelineno-0-3998">3998</a></span>
<span class="normal"><a href="#__codelineno-0-3999">3999</a></span>
<span class="normal"><a href="#__codelineno-0-4000">4000</a></span>
<span class="normal"><a href="#__codelineno-0-4001">4001</a></span>
<span class="normal"><a href="#__codelineno-0-4002">4002</a></span>
<span class="normal"><a href="#__codelineno-0-4003">4003</a></span>
<span class="normal"><a href="#__codelineno-0-4004">4004</a></span>
<span class="normal"><a href="#__codelineno-0-4005">4005</a></span>
<span class="normal"><a href="#__codelineno-0-4006">4006</a></span>
<span class="normal"><a href="#__codelineno-0-4007">4007</a></span>
<span class="normal"><a href="#__codelineno-0-4008">4008</a></span>
<span class="normal"><a href="#__codelineno-0-4009">4009</a></span>
<span class="normal"><a href="#__codelineno-0-4010">4010</a></span>
<span class="normal"><a href="#__codelineno-0-4011">4011</a></span>
<span class="normal"><a href="#__codelineno-0-4012">4012</a></span>
<span class="normal"><a href="#__codelineno-0-4013">4013</a></span>
<span class="normal"><a href="#__codelineno-0-4014">4014</a></span>
<span class="normal"><a href="#__codelineno-0-4015">4015</a></span>
<span class="normal"><a href="#__codelineno-0-4016">4016</a></span>
<span class="normal"><a href="#__codelineno-0-4017">4017</a></span>
<span class="normal"><a href="#__codelineno-0-4018">4018</a></span>
<span class="normal"><a href="#__codelineno-0-4019">4019</a></span>
<span class="normal"><a href="#__codelineno-0-4020">4020</a></span>
<span class="normal"><a href="#__codelineno-0-4021">4021</a></span>
<span class="normal"><a href="#__codelineno-0-4022">4022</a></span>
<span class="normal"><a href="#__codelineno-0-4023">4023</a></span>
<span class="normal"><a href="#__codelineno-0-4024">4024</a></span>
<span class="normal"><a href="#__codelineno-0-4025">4025</a></span>
<span class="normal"><a href="#__codelineno-0-4026">4026</a></span>
<span class="normal"><a href="#__codelineno-0-4027">4027</a></span>
<span class="normal"><a href="#__codelineno-0-4028">4028</a></span>
<span class="normal"><a href="#__codelineno-0-4029">4029</a></span>
<span class="normal"><a href="#__codelineno-0-4030">4030</a></span>
<span class="normal"><a href="#__codelineno-0-4031">4031</a></span>
<span class="normal"><a href="#__codelineno-0-4032">4032</a></span>
<span class="normal"><a href="#__codelineno-0-4033">4033</a></span>
<span class="normal"><a href="#__codelineno-0-4034">4034</a></span>
<span class="normal"><a href="#__codelineno-0-4035">4035</a></span>
<span class="normal"><a href="#__codelineno-0-4036">4036</a></span>
<span class="normal"><a href="#__codelineno-0-4037">4037</a></span>
<span class="normal"><a href="#__codelineno-0-4038">4038</a></span>
<span class="normal"><a href="#__codelineno-0-4039">4039</a></span>
<span class="normal"><a href="#__codelineno-0-4040">4040</a></span>
<span class="normal"><a href="#__codelineno-0-4041">4041</a></span>
<span class="normal"><a href="#__codelineno-0-4042">4042</a></span>
<span class="normal"><a href="#__codelineno-0-4043">4043</a></span>
<span class="normal"><a href="#__codelineno-0-4044">4044</a></span>
<span class="normal"><a href="#__codelineno-0-4045">4045</a></span>
<span class="normal"><a href="#__codelineno-0-4046">4046</a></span>
<span class="normal"><a href="#__codelineno-0-4047">4047</a></span>
<span class="normal"><a href="#__codelineno-0-4048">4048</a></span>
<span class="normal"><a href="#__codelineno-0-4049">4049</a></span>
<span class="normal"><a href="#__codelineno-0-4050">4050</a></span>
<span class="normal"><a href="#__codelineno-0-4051">4051</a></span>
<span class="normal"><a href="#__codelineno-0-4052">4052</a></span>
<span class="normal"><a href="#__codelineno-0-4053">4053</a></span>
<span class="normal"><a href="#__codelineno-0-4054">4054</a></span>
<span class="normal"><a href="#__codelineno-0-4055">4055</a></span>
<span class="normal"><a href="#__codelineno-0-4056">4056</a></span>
<span class="normal"><a href="#__codelineno-0-4057">4057</a></span>
<span class="normal"><a href="#__codelineno-0-4058">4058</a></span>
<span class="normal"><a href="#__codelineno-0-4059">4059</a></span>
<span class="normal"><a href="#__codelineno-0-4060">4060</a></span>
<span class="normal"><a href="#__codelineno-0-4061">4061</a></span>
<span class="normal"><a href="#__codelineno-0-4062">4062</a></span>
<span class="normal"><a href="#__codelineno-0-4063">4063</a></span>
<span class="normal"><a href="#__codelineno-0-4064">4064</a></span>
<span class="normal"><a href="#__codelineno-0-4065">4065</a></span>
<span class="normal"><a href="#__codelineno-0-4066">4066</a></span>
<span class="normal"><a href="#__codelineno-0-4067">4067</a></span>
<span class="normal"><a href="#__codelineno-0-4068">4068</a></span>
<span class="normal"><a href="#__codelineno-0-4069">4069</a></span>
<span class="normal"><a href="#__codelineno-0-4070">4070</a></span>
<span class="normal"><a href="#__codelineno-0-4071">4071</a></span>
<span class="normal"><a href="#__codelineno-0-4072">4072</a></span>
<span class="normal"><a href="#__codelineno-0-4073">4073</a></span>
<span class="normal"><a href="#__codelineno-0-4074">4074</a></span>
<span class="normal"><a href="#__codelineno-0-4075">4075</a></span>
<span class="normal"><a href="#__codelineno-0-4076">4076</a></span>
<span class="normal"><a href="#__codelineno-0-4077">4077</a></span>
<span class="normal"><a href="#__codelineno-0-4078">4078</a></span>
<span class="normal"><a href="#__codelineno-0-4079">4079</a></span>
<span class="normal"><a href="#__codelineno-0-4080">4080</a></span>
<span class="normal"><a href="#__codelineno-0-4081">4081</a></span>
<span class="normal"><a href="#__codelineno-0-4082">4082</a></span>
<span class="normal"><a href="#__codelineno-0-4083">4083</a></span>
<span class="normal"><a href="#__codelineno-0-4084">4084</a></span>
<span class="normal"><a href="#__codelineno-0-4085">4085</a></span>
<span class="normal"><a href="#__codelineno-0-4086">4086</a></span>
<span class="normal"><a href="#__codelineno-0-4087">4087</a></span>
<span class="normal"><a href="#__codelineno-0-4088">4088</a></span>
<span class="normal"><a href="#__codelineno-0-4089">4089</a></span>
<span class="normal"><a href="#__codelineno-0-4090">4090</a></span>
<span class="normal"><a href="#__codelineno-0-4091">4091</a></span>
<span class="normal"><a href="#__codelineno-0-4092">4092</a></span>
<span class="normal"><a href="#__codelineno-0-4093">4093</a></span>
<span class="normal"><a href="#__codelineno-0-4094">4094</a></span>
<span class="normal"><a href="#__codelineno-0-4095">4095</a></span>
<span class="normal"><a href="#__codelineno-0-4096">4096</a></span>
<span class="normal"><a href="#__codelineno-0-4097">4097</a></span>
<span class="normal"><a href="#__codelineno-0-4098">4098</a></span>
<span class="normal"><a href="#__codelineno-0-4099">4099</a></span>
<span class="normal"><a href="#__codelineno-0-4100">4100</a></span>
<span class="normal"><a href="#__codelineno-0-4101">4101</a></span>
<span class="normal"><a href="#__codelineno-0-4102">4102</a></span>
<span class="normal"><a href="#__codelineno-0-4103">4103</a></span>
<span class="normal"><a href="#__codelineno-0-4104">4104</a></span>
<span class="normal"><a href="#__codelineno-0-4105">4105</a></span>
<span class="normal"><a href="#__codelineno-0-4106">4106</a></span>
<span class="normal"><a href="#__codelineno-0-4107">4107</a></span>
<span class="normal"><a href="#__codelineno-0-4108">4108</a></span>
<span class="normal"><a href="#__codelineno-0-4109">4109</a></span>
<span class="normal"><a href="#__codelineno-0-4110">4110</a></span>
<span class="normal"><a href="#__codelineno-0-4111">4111</a></span>
<span class="normal"><a href="#__codelineno-0-4112">4112</a></span>
<span class="normal"><a href="#__codelineno-0-4113">4113</a></span>
<span class="normal"><a href="#__codelineno-0-4114">4114</a></span>
<span class="normal"><a href="#__codelineno-0-4115">4115</a></span>
<span class="normal"><a href="#__codelineno-0-4116">4116</a></span>
<span class="normal"><a href="#__codelineno-0-4117">4117</a></span>
<span class="normal"><a href="#__codelineno-0-4118">4118</a></span>
<span class="normal"><a href="#__codelineno-0-4119">4119</a></span>
<span class="normal"><a href="#__codelineno-0-4120">4120</a></span>
<span class="normal"><a href="#__codelineno-0-4121">4121</a></span>
<span class="normal"><a href="#__codelineno-0-4122">4122</a></span>
<span class="normal"><a href="#__codelineno-0-4123">4123</a></span>
<span class="normal"><a href="#__codelineno-0-4124">4124</a></span>
<span class="normal"><a href="#__codelineno-0-4125">4125</a></span>
<span class="normal"><a href="#__codelineno-0-4126">4126</a></span>
<span class="normal"><a href="#__codelineno-0-4127">4127</a></span>
<span class="normal"><a href="#__codelineno-0-4128">4128</a></span>
<span class="normal"><a href="#__codelineno-0-4129">4129</a></span>
<span class="normal"><a href="#__codelineno-0-4130">4130</a></span>
<span class="normal"><a href="#__codelineno-0-4131">4131</a></span>
<span class="normal"><a href="#__codelineno-0-4132">4132</a></span>
<span class="normal"><a href="#__codelineno-0-4133">4133</a></span>
<span class="normal"><a href="#__codelineno-0-4134">4134</a></span>
<span class="normal"><a href="#__codelineno-0-4135">4135</a></span>
<span class="normal"><a href="#__codelineno-0-4136">4136</a></span>
<span class="normal"><a href="#__codelineno-0-4137">4137</a></span>
<span class="normal"><a href="#__codelineno-0-4138">4138</a></span>
<span class="normal"><a href="#__codelineno-0-4139">4139</a></span>
<span class="normal"><a href="#__codelineno-0-4140">4140</a></span>
<span class="normal"><a href="#__codelineno-0-4141">4141</a></span>
<span class="normal"><a href="#__codelineno-0-4142">4142</a></span>
<span class="normal"><a href="#__codelineno-0-4143">4143</a></span>
<span class="normal"><a href="#__codelineno-0-4144">4144</a></span>
<span class="normal"><a href="#__codelineno-0-4145">4145</a></span>
<span class="normal"><a href="#__codelineno-0-4146">4146</a></span>
<span class="normal"><a href="#__codelineno-0-4147">4147</a></span>
<span class="normal"><a href="#__codelineno-0-4148">4148</a></span>
<span class="normal"><a href="#__codelineno-0-4149">4149</a></span>
<span class="normal"><a href="#__codelineno-0-4150">4150</a></span>
<span class="normal"><a href="#__codelineno-0-4151">4151</a></span>
<span class="normal"><a href="#__codelineno-0-4152">4152</a></span>
<span class="normal"><a href="#__codelineno-0-4153">4153</a></span>
<span class="normal"><a href="#__codelineno-0-4154">4154</a></span>
<span class="normal"><a href="#__codelineno-0-4155">4155</a></span>
<span class="normal"><a href="#__codelineno-0-4156">4156</a></span>
<span class="normal"><a href="#__codelineno-0-4157">4157</a></span>
<span class="normal"><a href="#__codelineno-0-4158">4158</a></span>
<span class="normal"><a href="#__codelineno-0-4159">4159</a></span>
<span class="normal"><a href="#__codelineno-0-4160">4160</a></span>
<span class="normal"><a href="#__codelineno-0-4161">4161</a></span>
<span class="normal"><a href="#__codelineno-0-4162">4162</a></span>
<span class="normal"><a href="#__codelineno-0-4163">4163</a></span>
<span class="normal"><a href="#__codelineno-0-4164">4164</a></span>
<span class="normal"><a href="#__codelineno-0-4165">4165</a></span>
<span class="normal"><a href="#__codelineno-0-4166">4166</a></span>
<span class="normal"><a href="#__codelineno-0-4167">4167</a></span>
<span class="normal"><a href="#__codelineno-0-4168">4168</a></span>
<span class="normal"><a href="#__codelineno-0-4169">4169</a></span>
<span class="normal"><a href="#__codelineno-0-4170">4170</a></span>
<span class="normal"><a href="#__codelineno-0-4171">4171</a></span>
<span class="normal"><a href="#__codelineno-0-4172">4172</a></span>
<span class="normal"><a href="#__codelineno-0-4173">4173</a></span>
<span class="normal"><a href="#__codelineno-0-4174">4174</a></span>
<span class="normal"><a href="#__codelineno-0-4175">4175</a></span>
<span class="normal"><a href="#__codelineno-0-4176">4176</a></span>
<span class="normal"><a href="#__codelineno-0-4177">4177</a></span>
<span class="normal"><a href="#__codelineno-0-4178">4178</a></span>
<span class="normal"><a href="#__codelineno-0-4179">4179</a></span>
<span class="normal"><a href="#__codelineno-0-4180">4180</a></span>
<span class="normal"><a href="#__codelineno-0-4181">4181</a></span>
<span class="normal"><a href="#__codelineno-0-4182">4182</a></span>
<span class="normal"><a href="#__codelineno-0-4183">4183</a></span>
<span class="normal"><a href="#__codelineno-0-4184">4184</a></span>
<span class="normal"><a href="#__codelineno-0-4185">4185</a></span>
<span class="normal"><a href="#__codelineno-0-4186">4186</a></span>
<span class="normal"><a href="#__codelineno-0-4187">4187</a></span>
<span class="normal"><a href="#__codelineno-0-4188">4188</a></span>
<span class="normal"><a href="#__codelineno-0-4189">4189</a></span>
<span class="normal"><a href="#__codelineno-0-4190">4190</a></span>
<span class="normal"><a href="#__codelineno-0-4191">4191</a></span>
<span class="normal"><a href="#__codelineno-0-4192">4192</a></span>
<span class="normal"><a href="#__codelineno-0-4193">4193</a></span>
<span class="normal"><a href="#__codelineno-0-4194">4194</a></span>
<span class="normal"><a href="#__codelineno-0-4195">4195</a></span>
<span class="normal"><a href="#__codelineno-0-4196">4196</a></span>
<span class="normal"><a href="#__codelineno-0-4197">4197</a></span>
<span class="normal"><a href="#__codelineno-0-4198">4198</a></span>
<span class="normal"><a href="#__codelineno-0-4199">4199</a></span>
<span class="normal"><a href="#__codelineno-0-4200">4200</a></span>
<span class="normal"><a href="#__codelineno-0-4201">4201</a></span>
<span class="normal"><a href="#__codelineno-0-4202">4202</a></span>
<span class="normal"><a href="#__codelineno-0-4203">4203</a></span>
<span class="normal"><a href="#__codelineno-0-4204">4204</a></span>
<span class="normal"><a href="#__codelineno-0-4205">4205</a></span>
<span class="normal"><a href="#__codelineno-0-4206">4206</a></span>
<span class="normal"><a href="#__codelineno-0-4207">4207</a></span>
<span class="normal"><a href="#__codelineno-0-4208">4208</a></span>
<span class="normal"><a href="#__codelineno-0-4209">4209</a></span>
<span class="normal"><a href="#__codelineno-0-4210">4210</a></span>
<span class="normal"><a href="#__codelineno-0-4211">4211</a></span>
<span class="normal"><a href="#__codelineno-0-4212">4212</a></span>
<span class="normal"><a href="#__codelineno-0-4213">4213</a></span>
<span class="normal"><a href="#__codelineno-0-4214">4214</a></span>
<span class="normal"><a href="#__codelineno-0-4215">4215</a></span>
<span class="normal"><a href="#__codelineno-0-4216">4216</a></span>
<span class="normal"><a href="#__codelineno-0-4217">4217</a></span>
<span class="normal"><a href="#__codelineno-0-4218">4218</a></span>
<span class="normal"><a href="#__codelineno-0-4219">4219</a></span>
<span class="normal"><a href="#__codelineno-0-4220">4220</a></span>
<span class="normal"><a href="#__codelineno-0-4221">4221</a></span>
<span class="normal"><a href="#__codelineno-0-4222">4222</a></span>
<span class="normal"><a href="#__codelineno-0-4223">4223</a></span>
<span class="normal"><a href="#__codelineno-0-4224">4224</a></span>
<span class="normal"><a href="#__codelineno-0-4225">4225</a></span>
<span class="normal"><a href="#__codelineno-0-4226">4226</a></span>
<span class="normal"><a href="#__codelineno-0-4227">4227</a></span>
<span class="normal"><a href="#__codelineno-0-4228">4228</a></span>
<span class="normal"><a href="#__codelineno-0-4229">4229</a></span>
<span class="normal"><a href="#__codelineno-0-4230">4230</a></span>
<span class="normal"><a href="#__codelineno-0-4231">4231</a></span>
<span class="normal"><a href="#__codelineno-0-4232">4232</a></span>
<span class="normal"><a href="#__codelineno-0-4233">4233</a></span>
<span class="normal"><a href="#__codelineno-0-4234">4234</a></span>
<span class="normal"><a href="#__codelineno-0-4235">4235</a></span>
<span class="normal"><a href="#__codelineno-0-4236">4236</a></span>
<span class="normal"><a href="#__codelineno-0-4237">4237</a></span>
<span class="normal"><a href="#__codelineno-0-4238">4238</a></span>
<span class="normal"><a href="#__codelineno-0-4239">4239</a></span>
<span class="normal"><a href="#__codelineno-0-4240">4240</a></span>
<span class="normal"><a href="#__codelineno-0-4241">4241</a></span>
<span class="normal"><a href="#__codelineno-0-4242">4242</a></span>
<span class="normal"><a href="#__codelineno-0-4243">4243</a></span>
<span class="normal"><a href="#__codelineno-0-4244">4244</a></span>
<span class="normal"><a href="#__codelineno-0-4245">4245</a></span>
<span class="normal"><a href="#__codelineno-0-4246">4246</a></span>
<span class="normal"><a href="#__codelineno-0-4247">4247</a></span>
<span class="normal"><a href="#__codelineno-0-4248">4248</a></span>
<span class="normal"><a href="#__codelineno-0-4249">4249</a></span>
<span class="normal"><a href="#__codelineno-0-4250">4250</a></span>
<span class="normal"><a href="#__codelineno-0-4251">4251</a></span>
<span class="normal"><a href="#__codelineno-0-4252">4252</a></span>
<span class="normal"><a href="#__codelineno-0-4253">4253</a></span>
<span class="normal"><a href="#__codelineno-0-4254">4254</a></span>
<span class="normal"><a href="#__codelineno-0-4255">4255</a></span>
<span class="normal"><a href="#__codelineno-0-4256">4256</a></span>
<span class="normal"><a href="#__codelineno-0-4257">4257</a></span>
<span class="normal"><a href="#__codelineno-0-4258">4258</a></span>
<span class="normal"><a href="#__codelineno-0-4259">4259</a></span>
<span class="normal"><a href="#__codelineno-0-4260">4260</a></span>
<span class="normal"><a href="#__codelineno-0-4261">4261</a></span>
<span class="normal"><a href="#__codelineno-0-4262">4262</a></span>
<span class="normal"><a href="#__codelineno-0-4263">4263</a></span>
<span class="normal"><a href="#__codelineno-0-4264">4264</a></span>
<span class="normal"><a href="#__codelineno-0-4265">4265</a></span>
<span class="normal"><a href="#__codelineno-0-4266">4266</a></span>
<span class="normal"><a href="#__codelineno-0-4267">4267</a></span>
<span class="normal"><a href="#__codelineno-0-4268">4268</a></span>
<span class="normal"><a href="#__codelineno-0-4269">4269</a></span>
<span class="normal"><a href="#__codelineno-0-4270">4270</a></span>
<span class="normal"><a href="#__codelineno-0-4271">4271</a></span>
<span class="normal"><a href="#__codelineno-0-4272">4272</a></span>
<span class="normal"><a href="#__codelineno-0-4273">4273</a></span>
<span class="normal"><a href="#__codelineno-0-4274">4274</a></span>
<span class="normal"><a href="#__codelineno-0-4275">4275</a></span>
<span class="normal"><a href="#__codelineno-0-4276">4276</a></span>
<span class="normal"><a href="#__codelineno-0-4277">4277</a></span>
<span class="normal"><a href="#__codelineno-0-4278">4278</a></span>
<span class="normal"><a href="#__codelineno-0-4279">4279</a></span>
<span class="normal"><a href="#__codelineno-0-4280">4280</a></span>
<span class="normal"><a href="#__codelineno-0-4281">4281</a></span>
<span class="normal"><a href="#__codelineno-0-4282">4282</a></span>
<span class="normal"><a href="#__codelineno-0-4283">4283</a></span>
<span class="normal"><a href="#__codelineno-0-4284">4284</a></span>
<span class="normal"><a href="#__codelineno-0-4285">4285</a></span>
<span class="normal"><a href="#__codelineno-0-4286">4286</a></span>
<span class="normal"><a href="#__codelineno-0-4287">4287</a></span>
<span class="normal"><a href="#__codelineno-0-4288">4288</a></span>
<span class="normal"><a href="#__codelineno-0-4289">4289</a></span>
<span class="normal"><a href="#__codelineno-0-4290">4290</a></span>
<span class="normal"><a href="#__codelineno-0-4291">4291</a></span>
<span class="normal"><a href="#__codelineno-0-4292">4292</a></span>
<span class="normal"><a href="#__codelineno-0-4293">4293</a></span>
<span class="normal"><a href="#__codelineno-0-4294">4294</a></span>
<span class="normal"><a href="#__codelineno-0-4295">4295</a></span>
<span class="normal"><a href="#__codelineno-0-4296">4296</a></span>
<span class="normal"><a href="#__codelineno-0-4297">4297</a></span>
<span class="normal"><a href="#__codelineno-0-4298">4298</a></span>
<span class="normal"><a href="#__codelineno-0-4299">4299</a></span>
<span class="normal"><a href="#__codelineno-0-4300">4300</a></span>
<span class="normal"><a href="#__codelineno-0-4301">4301</a></span>
<span class="normal"><a href="#__codelineno-0-4302">4302</a></span>
<span class="normal"><a href="#__codelineno-0-4303">4303</a></span>
<span class="normal"><a href="#__codelineno-0-4304">4304</a></span>
<span class="normal"><a href="#__codelineno-0-4305">4305</a></span>
<span class="normal"><a href="#__codelineno-0-4306">4306</a></span>
<span class="normal"><a href="#__codelineno-0-4307">4307</a></span>
<span class="normal"><a href="#__codelineno-0-4308">4308</a></span>
<span class="normal"><a href="#__codelineno-0-4309">4309</a></span>
<span class="normal"><a href="#__codelineno-0-4310">4310</a></span>
<span class="normal"><a href="#__codelineno-0-4311">4311</a></span>
<span class="normal"><a href="#__codelineno-0-4312">4312</a></span>
<span class="normal"><a href="#__codelineno-0-4313">4313</a></span>
<span class="normal"><a href="#__codelineno-0-4314">4314</a></span>
<span class="normal"><a href="#__codelineno-0-4315">4315</a></span>
<span class="normal"><a href="#__codelineno-0-4316">4316</a></span>
<span class="normal"><a href="#__codelineno-0-4317">4317</a></span>
<span class="normal"><a href="#__codelineno-0-4318">4318</a></span>
<span class="normal"><a href="#__codelineno-0-4319">4319</a></span>
<span class="normal"><a href="#__codelineno-0-4320">4320</a></span>
<span class="normal"><a href="#__codelineno-0-4321">4321</a></span>
<span class="normal"><a href="#__codelineno-0-4322">4322</a></span>
<span class="normal"><a href="#__codelineno-0-4323">4323</a></span>
<span class="normal"><a href="#__codelineno-0-4324">4324</a></span>
<span class="normal"><a href="#__codelineno-0-4325">4325</a></span>
<span class="normal"><a href="#__codelineno-0-4326">4326</a></span>
<span class="normal"><a href="#__codelineno-0-4327">4327</a></span>
<span class="normal"><a href="#__codelineno-0-4328">4328</a></span>
<span class="normal"><a href="#__codelineno-0-4329">4329</a></span>
<span class="normal"><a href="#__codelineno-0-4330">4330</a></span>
<span class="normal"><a href="#__codelineno-0-4331">4331</a></span>
<span class="normal"><a href="#__codelineno-0-4332">4332</a></span>
<span class="normal"><a href="#__codelineno-0-4333">4333</a></span>
<span class="normal"><a href="#__codelineno-0-4334">4334</a></span>
<span class="normal"><a href="#__codelineno-0-4335">4335</a></span>
<span class="normal"><a href="#__codelineno-0-4336">4336</a></span>
<span class="normal"><a href="#__codelineno-0-4337">4337</a></span>
<span class="normal"><a href="#__codelineno-0-4338">4338</a></span>
<span class="normal"><a href="#__codelineno-0-4339">4339</a></span>
<span class="normal"><a href="#__codelineno-0-4340">4340</a></span>
<span class="normal"><a href="#__codelineno-0-4341">4341</a></span>
<span class="normal"><a href="#__codelineno-0-4342">4342</a></span>
<span class="normal"><a href="#__codelineno-0-4343">4343</a></span>
<span class="normal"><a href="#__codelineno-0-4344">4344</a></span>
<span class="normal"><a href="#__codelineno-0-4345">4345</a></span>
<span class="normal"><a href="#__codelineno-0-4346">4346</a></span>
<span class="normal"><a href="#__codelineno-0-4347">4347</a></span>
<span class="normal"><a href="#__codelineno-0-4348">4348</a></span>
<span class="normal"><a href="#__codelineno-0-4349">4349</a></span>
<span class="normal"><a href="#__codelineno-0-4350">4350</a></span>
<span class="normal"><a href="#__codelineno-0-4351">4351</a></span>
<span class="normal"><a href="#__codelineno-0-4352">4352</a></span>
<span class="normal"><a href="#__codelineno-0-4353">4353</a></span>
<span class="normal"><a href="#__codelineno-0-4354">4354</a></span>
<span class="normal"><a href="#__codelineno-0-4355">4355</a></span>
<span class="normal"><a href="#__codelineno-0-4356">4356</a></span>
<span class="normal"><a href="#__codelineno-0-4357">4357</a></span>
<span class="normal"><a href="#__codelineno-0-4358">4358</a></span>
<span class="normal"><a href="#__codelineno-0-4359">4359</a></span>
<span class="normal"><a href="#__codelineno-0-4360">4360</a></span>
<span class="normal"><a href="#__codelineno-0-4361">4361</a></span>
<span class="normal"><a href="#__codelineno-0-4362">4362</a></span>
<span class="normal"><a href="#__codelineno-0-4363">4363</a></span>
<span class="normal"><a href="#__codelineno-0-4364">4364</a></span>
<span class="normal"><a href="#__codelineno-0-4365">4365</a></span>
<span class="normal"><a href="#__codelineno-0-4366">4366</a></span>
<span class="normal"><a href="#__codelineno-0-4367">4367</a></span>
<span class="normal"><a href="#__codelineno-0-4368">4368</a></span>
<span class="normal"><a href="#__codelineno-0-4369">4369</a></span>
<span class="normal"><a href="#__codelineno-0-4370">4370</a></span>
<span class="normal"><a href="#__codelineno-0-4371">4371</a></span>
<span class="normal"><a href="#__codelineno-0-4372">4372</a></span>
<span class="normal"><a href="#__codelineno-0-4373">4373</a></span>
<span class="normal"><a href="#__codelineno-0-4374">4374</a></span>
<span class="normal"><a href="#__codelineno-0-4375">4375</a></span>
<span class="normal"><a href="#__codelineno-0-4376">4376</a></span>
<span class="normal"><a href="#__codelineno-0-4377">4377</a></span>
<span class="normal"><a href="#__codelineno-0-4378">4378</a></span>
<span class="normal"><a href="#__codelineno-0-4379">4379</a></span>
<span class="normal"><a href="#__codelineno-0-4380">4380</a></span>
<span class="normal"><a href="#__codelineno-0-4381">4381</a></span>
<span class="normal"><a href="#__codelineno-0-4382">4382</a></span>
<span class="normal"><a href="#__codelineno-0-4383">4383</a></span>
<span class="normal"><a href="#__codelineno-0-4384">4384</a></span>
<span class="normal"><a href="#__codelineno-0-4385">4385</a></span>
<span class="normal"><a href="#__codelineno-0-4386">4386</a></span>
<span class="normal"><a href="#__codelineno-0-4387">4387</a></span>
<span class="normal"><a href="#__codelineno-0-4388">4388</a></span>
<span class="normal"><a href="#__codelineno-0-4389">4389</a></span>
<span class="normal"><a href="#__codelineno-0-4390">4390</a></span>
<span class="normal"><a href="#__codelineno-0-4391">4391</a></span>
<span class="normal"><a href="#__codelineno-0-4392">4392</a></span>
<span class="normal"><a href="#__codelineno-0-4393">4393</a></span>
<span class="normal"><a href="#__codelineno-0-4394">4394</a></span>
<span class="normal"><a href="#__codelineno-0-4395">4395</a></span>
<span class="normal"><a href="#__codelineno-0-4396">4396</a></span>
<span class="normal"><a href="#__codelineno-0-4397">4397</a></span>
<span class="normal"><a href="#__codelineno-0-4398">4398</a></span>
<span class="normal"><a href="#__codelineno-0-4399">4399</a></span>
<span class="normal"><a href="#__codelineno-0-4400">4400</a></span>
<span class="normal"><a href="#__codelineno-0-4401">4401</a></span>
<span class="normal"><a href="#__codelineno-0-4402">4402</a></span>
<span class="normal"><a href="#__codelineno-0-4403">4403</a></span>
<span class="normal"><a href="#__codelineno-0-4404">4404</a></span>
<span class="normal"><a href="#__codelineno-0-4405">4405</a></span>
<span class="normal"><a href="#__codelineno-0-4406">4406</a></span>
<span class="normal"><a href="#__codelineno-0-4407">4407</a></span>
<span class="normal"><a href="#__codelineno-0-4408">4408</a></span>
<span class="normal"><a href="#__codelineno-0-4409">4409</a></span>
<span class="normal"><a href="#__codelineno-0-4410">4410</a></span>
<span class="normal"><a href="#__codelineno-0-4411">4411</a></span>
<span class="normal"><a href="#__codelineno-0-4412">4412</a></span>
<span class="normal"><a href="#__codelineno-0-4413">4413</a></span>
<span class="normal"><a href="#__codelineno-0-4414">4414</a></span>
<span class="normal"><a href="#__codelineno-0-4415">4415</a></span>
<span class="normal"><a href="#__codelineno-0-4416">4416</a></span>
<span class="normal"><a href="#__codelineno-0-4417">4417</a></span>
<span class="normal"><a href="#__codelineno-0-4418">4418</a></span>
<span class="normal"><a href="#__codelineno-0-4419">4419</a></span>
<span class="normal"><a href="#__codelineno-0-4420">4420</a></span>
<span class="normal"><a href="#__codelineno-0-4421">4421</a></span>
<span class="normal"><a href="#__codelineno-0-4422">4422</a></span>
<span class="normal"><a href="#__codelineno-0-4423">4423</a></span>
<span class="normal"><a href="#__codelineno-0-4424">4424</a></span>
<span class="normal"><a href="#__codelineno-0-4425">4425</a></span>
<span class="normal"><a href="#__codelineno-0-4426">4426</a></span>
<span class="normal"><a href="#__codelineno-0-4427">4427</a></span>
<span class="normal"><a href="#__codelineno-0-4428">4428</a></span>
<span class="normal"><a href="#__codelineno-0-4429">4429</a></span>
<span class="normal"><a href="#__codelineno-0-4430">4430</a></span>
<span class="normal"><a href="#__codelineno-0-4431">4431</a></span>
<span class="normal"><a href="#__codelineno-0-4432">4432</a></span>
<span class="normal"><a href="#__codelineno-0-4433">4433</a></span>
<span class="normal"><a href="#__codelineno-0-4434">4434</a></span>
<span class="normal"><a href="#__codelineno-0-4435">4435</a></span>
<span class="normal"><a href="#__codelineno-0-4436">4436</a></span>
<span class="normal"><a href="#__codelineno-0-4437">4437</a></span>
<span class="normal"><a href="#__codelineno-0-4438">4438</a></span>
<span class="normal"><a href="#__codelineno-0-4439">4439</a></span>
<span class="normal"><a href="#__codelineno-0-4440">4440</a></span>
<span class="normal"><a href="#__codelineno-0-4441">4441</a></span>
<span class="normal"><a href="#__codelineno-0-4442">4442</a></span>
<span class="normal"><a href="#__codelineno-0-4443">4443</a></span>
<span class="normal"><a href="#__codelineno-0-4444">4444</a></span>
<span class="normal"><a href="#__codelineno-0-4445">4445</a></span>
<span class="normal"><a href="#__codelineno-0-4446">4446</a></span>
<span class="normal"><a href="#__codelineno-0-4447">4447</a></span>
<span class="normal"><a href="#__codelineno-0-4448">4448</a></span>
<span class="normal"><a href="#__codelineno-0-4449">4449</a></span>
<span class="normal"><a href="#__codelineno-0-4450">4450</a></span>
<span class="normal"><a href="#__codelineno-0-4451">4451</a></span>
<span class="normal"><a href="#__codelineno-0-4452">4452</a></span>
<span class="normal"><a href="#__codelineno-0-4453">4453</a></span>
<span class="normal"><a href="#__codelineno-0-4454">4454</a></span>
<span class="normal"><a href="#__codelineno-0-4455">4455</a></span>
<span class="normal"><a href="#__codelineno-0-4456">4456</a></span>
<span class="normal"><a href="#__codelineno-0-4457">4457</a></span>
<span class="normal"><a href="#__codelineno-0-4458">4458</a></span>
<span class="normal"><a href="#__codelineno-0-4459">4459</a></span>
<span class="normal"><a href="#__codelineno-0-4460">4460</a></span>
<span class="normal"><a href="#__codelineno-0-4461">4461</a></span>
<span class="normal"><a href="#__codelineno-0-4462">4462</a></span>
<span class="normal"><a href="#__codelineno-0-4463">4463</a></span>
<span class="normal"><a href="#__codelineno-0-4464">4464</a></span>
<span class="normal"><a href="#__codelineno-0-4465">4465</a></span>
<span class="normal"><a href="#__codelineno-0-4466">4466</a></span>
<span class="normal"><a href="#__codelineno-0-4467">4467</a></span>
<span class="normal"><a href="#__codelineno-0-4468">4468</a></span>
<span class="normal"><a href="#__codelineno-0-4469">4469</a></span>
<span class="normal"><a href="#__codelineno-0-4470">4470</a></span>
<span class="normal"><a href="#__codelineno-0-4471">4471</a></span>
<span class="normal"><a href="#__codelineno-0-4472">4472</a></span>
<span class="normal"><a href="#__codelineno-0-4473">4473</a></span>
<span class="normal"><a href="#__codelineno-0-4474">4474</a></span>
<span class="normal"><a href="#__codelineno-0-4475">4475</a></span>
<span class="normal"><a href="#__codelineno-0-4476">4476</a></span>
<span class="normal"><a href="#__codelineno-0-4477">4477</a></span>
<span class="normal"><a href="#__codelineno-0-4478">4478</a></span>
<span class="normal"><a href="#__codelineno-0-4479">4479</a></span>
<span class="normal"><a href="#__codelineno-0-4480">4480</a></span>
<span class="normal"><a href="#__codelineno-0-4481">4481</a></span>
<span class="normal"><a href="#__codelineno-0-4482">4482</a></span>
<span class="normal"><a href="#__codelineno-0-4483">4483</a></span>
<span class="normal"><a href="#__codelineno-0-4484">4484</a></span>
<span class="normal"><a href="#__codelineno-0-4485">4485</a></span>
<span class="normal"><a href="#__codelineno-0-4486">4486</a></span>
<span class="normal"><a href="#__codelineno-0-4487">4487</a></span>
<span class="normal"><a href="#__codelineno-0-4488">4488</a></span>
<span class="normal"><a href="#__codelineno-0-4489">4489</a></span>
<span class="normal"><a href="#__codelineno-0-4490">4490</a></span>
<span class="normal"><a href="#__codelineno-0-4491">4491</a></span>
<span class="normal"><a href="#__codelineno-0-4492">4492</a></span>
<span class="normal"><a href="#__codelineno-0-4493">4493</a></span>
<span class="normal"><a href="#__codelineno-0-4494">4494</a></span>
<span class="normal"><a href="#__codelineno-0-4495">4495</a></span>
<span class="normal"><a href="#__codelineno-0-4496">4496</a></span>
<span class="normal"><a href="#__codelineno-0-4497">4497</a></span>
<span class="normal"><a href="#__codelineno-0-4498">4498</a></span>
<span class="normal"><a href="#__codelineno-0-4499">4499</a></span>
<span class="normal"><a href="#__codelineno-0-4500">4500</a></span>
<span class="normal"><a href="#__codelineno-0-4501">4501</a></span>
<span class="normal"><a href="#__codelineno-0-4502">4502</a></span>
<span class="normal"><a href="#__codelineno-0-4503">4503</a></span>
<span class="normal"><a href="#__codelineno-0-4504">4504</a></span>
<span class="normal"><a href="#__codelineno-0-4505">4505</a></span>
<span class="normal"><a href="#__codelineno-0-4506">4506</a></span>
<span class="normal"><a href="#__codelineno-0-4507">4507</a></span>
<span class="normal"><a href="#__codelineno-0-4508">4508</a></span>
<span class="normal"><a href="#__codelineno-0-4509">4509</a></span>
<span class="normal"><a href="#__codelineno-0-4510">4510</a></span>
<span class="normal"><a href="#__codelineno-0-4511">4511</a></span>
<span class="normal"><a href="#__codelineno-0-4512">4512</a></span>
<span class="normal"><a href="#__codelineno-0-4513">4513</a></span>
<span class="normal"><a href="#__codelineno-0-4514">4514</a></span>
<span class="normal"><a href="#__codelineno-0-4515">4515</a></span>
<span class="normal"><a href="#__codelineno-0-4516">4516</a></span>
<span class="normal"><a href="#__codelineno-0-4517">4517</a></span>
<span class="normal"><a href="#__codelineno-0-4518">4518</a></span>
<span class="normal"><a href="#__codelineno-0-4519">4519</a></span>
<span class="normal"><a href="#__codelineno-0-4520">4520</a></span>
<span class="normal"><a href="#__codelineno-0-4521">4521</a></span>
<span class="normal"><a href="#__codelineno-0-4522">4522</a></span>
<span class="normal"><a href="#__codelineno-0-4523">4523</a></span>
<span class="normal"><a href="#__codelineno-0-4524">4524</a></span>
<span class="normal"><a href="#__codelineno-0-4525">4525</a></span>
<span class="normal"><a href="#__codelineno-0-4526">4526</a></span>
<span class="normal"><a href="#__codelineno-0-4527">4527</a></span>
<span class="normal"><a href="#__codelineno-0-4528">4528</a></span>
<span class="normal"><a href="#__codelineno-0-4529">4529</a></span>
<span class="normal"><a href="#__codelineno-0-4530">4530</a></span>
<span class="normal"><a href="#__codelineno-0-4531">4531</a></span>
<span class="normal"><a href="#__codelineno-0-4532">4532</a></span>
<span class="normal"><a href="#__codelineno-0-4533">4533</a></span>
<span class="normal"><a href="#__codelineno-0-4534">4534</a></span>
<span class="normal"><a href="#__codelineno-0-4535">4535</a></span>
<span class="normal"><a href="#__codelineno-0-4536">4536</a></span>
<span class="normal"><a href="#__codelineno-0-4537">4537</a></span>
<span class="normal"><a href="#__codelineno-0-4538">4538</a></span>
<span class="normal"><a href="#__codelineno-0-4539">4539</a></span>
<span class="normal"><a href="#__codelineno-0-4540">4540</a></span>
<span class="normal"><a href="#__codelineno-0-4541">4541</a></span>
<span class="normal"><a href="#__codelineno-0-4542">4542</a></span>
<span class="normal"><a href="#__codelineno-0-4543">4543</a></span>
<span class="normal"><a href="#__codelineno-0-4544">4544</a></span>
<span class="normal"><a href="#__codelineno-0-4545">4545</a></span>
<span class="normal"><a href="#__codelineno-0-4546">4546</a></span>
<span class="normal"><a href="#__codelineno-0-4547">4547</a></span>
<span class="normal"><a href="#__codelineno-0-4548">4548</a></span>
<span class="normal"><a href="#__codelineno-0-4549">4549</a></span>
<span class="normal"><a href="#__codelineno-0-4550">4550</a></span>
<span class="normal"><a href="#__codelineno-0-4551">4551</a></span>
<span class="normal"><a href="#__codelineno-0-4552">4552</a></span>
<span class="normal"><a href="#__codelineno-0-4553">4553</a></span>
<span class="normal"><a href="#__codelineno-0-4554">4554</a></span>
<span class="normal"><a href="#__codelineno-0-4555">4555</a></span>
<span class="normal"><a href="#__codelineno-0-4556">4556</a></span>
<span class="normal"><a href="#__codelineno-0-4557">4557</a></span>
<span class="normal"><a href="#__codelineno-0-4558">4558</a></span>
<span class="normal"><a href="#__codelineno-0-4559">4559</a></span>
<span class="normal"><a href="#__codelineno-0-4560">4560</a></span>
<span class="normal"><a href="#__codelineno-0-4561">4561</a></span>
<span class="normal"><a href="#__codelineno-0-4562">4562</a></span>
<span class="normal"><a href="#__codelineno-0-4563">4563</a></span>
<span class="normal"><a href="#__codelineno-0-4564">4564</a></span>
<span class="normal"><a href="#__codelineno-0-4565">4565</a></span>
<span class="normal"><a href="#__codelineno-0-4566">4566</a></span>
<span class="normal"><a href="#__codelineno-0-4567">4567</a></span>
<span class="normal"><a href="#__codelineno-0-4568">4568</a></span>
<span class="normal"><a href="#__codelineno-0-4569">4569</a></span>
<span class="normal"><a href="#__codelineno-0-4570">4570</a></span>
<span class="normal"><a href="#__codelineno-0-4571">4571</a></span>
<span class="normal"><a href="#__codelineno-0-4572">4572</a></span>
<span class="normal"><a href="#__codelineno-0-4573">4573</a></span>
<span class="normal"><a href="#__codelineno-0-4574">4574</a></span>
<span class="normal"><a href="#__codelineno-0-4575">4575</a></span>
<span class="normal"><a href="#__codelineno-0-4576">4576</a></span>
<span class="normal"><a href="#__codelineno-0-4577">4577</a></span>
<span class="normal"><a href="#__codelineno-0-4578">4578</a></span>
<span class="normal"><a href="#__codelineno-0-4579">4579</a></span>
<span class="normal"><a href="#__codelineno-0-4580">4580</a></span>
<span class="normal"><a href="#__codelineno-0-4581">4581</a></span>
<span class="normal"><a href="#__codelineno-0-4582">4582</a></span>
<span class="normal"><a href="#__codelineno-0-4583">4583</a></span>
<span class="normal"><a href="#__codelineno-0-4584">4584</a></span>
<span class="normal"><a href="#__codelineno-0-4585">4585</a></span>
<span class="normal"><a href="#__codelineno-0-4586">4586</a></span>
<span class="normal"><a href="#__codelineno-0-4587">4587</a></span>
<span class="normal"><a href="#__codelineno-0-4588">4588</a></span>
<span class="normal"><a href="#__codelineno-0-4589">4589</a></span>
<span class="normal"><a href="#__codelineno-0-4590">4590</a></span>
<span class="normal"><a href="#__codelineno-0-4591">4591</a></span>
<span class="normal"><a href="#__codelineno-0-4592">4592</a></span>
<span class="normal"><a href="#__codelineno-0-4593">4593</a></span>
<span class="normal"><a href="#__codelineno-0-4594">4594</a></span>
<span class="normal"><a href="#__codelineno-0-4595">4595</a></span>
<span class="normal"><a href="#__codelineno-0-4596">4596</a></span>
<span class="normal"><a href="#__codelineno-0-4597">4597</a></span>
<span class="normal"><a href="#__codelineno-0-4598">4598</a></span>
<span class="normal"><a href="#__codelineno-0-4599">4599</a></span>
<span class="normal"><a href="#__codelineno-0-4600">4600</a></span>
<span class="normal"><a href="#__codelineno-0-4601">4601</a></span>
<span class="normal"><a href="#__codelineno-0-4602">4602</a></span>
<span class="normal"><a href="#__codelineno-0-4603">4603</a></span>
<span class="normal"><a href="#__codelineno-0-4604">4604</a></span>
<span class="normal"><a href="#__codelineno-0-4605">4605</a></span>
<span class="normal"><a href="#__codelineno-0-4606">4606</a></span>
<span class="normal"><a href="#__codelineno-0-4607">4607</a></span>
<span class="normal"><a href="#__codelineno-0-4608">4608</a></span>
<span class="normal"><a href="#__codelineno-0-4609">4609</a></span>
<span class="normal"><a href="#__codelineno-0-4610">4610</a></span>
<span class="normal"><a href="#__codelineno-0-4611">4611</a></span>
<span class="normal"><a href="#__codelineno-0-4612">4612</a></span>
<span class="normal"><a href="#__codelineno-0-4613">4613</a></span>
<span class="normal"><a href="#__codelineno-0-4614">4614</a></span>
<span class="normal"><a href="#__codelineno-0-4615">4615</a></span>
<span class="normal"><a href="#__codelineno-0-4616">4616</a></span>
<span class="normal"><a href="#__codelineno-0-4617">4617</a></span>
<span class="normal"><a href="#__codelineno-0-4618">4618</a></span>
<span class="normal"><a href="#__codelineno-0-4619">4619</a></span>
<span class="normal"><a href="#__codelineno-0-4620">4620</a></span>
<span class="normal"><a href="#__codelineno-0-4621">4621</a></span>
<span class="normal"><a href="#__codelineno-0-4622">4622</a></span>
<span class="normal"><a href="#__codelineno-0-4623">4623</a></span>
<span class="normal"><a href="#__codelineno-0-4624">4624</a></span>
<span class="normal"><a href="#__codelineno-0-4625">4625</a></span>
<span class="normal"><a href="#__codelineno-0-4626">4626</a></span>
<span class="normal"><a href="#__codelineno-0-4627">4627</a></span>
<span class="normal"><a href="#__codelineno-0-4628">4628</a></span>
<span class="normal"><a href="#__codelineno-0-4629">4629</a></span>
<span class="normal"><a href="#__codelineno-0-4630">4630</a></span>
<span class="normal"><a href="#__codelineno-0-4631">4631</a></span>
<span class="normal"><a href="#__codelineno-0-4632">4632</a></span>
<span class="normal"><a href="#__codelineno-0-4633">4633</a></span>
<span class="normal"><a href="#__codelineno-0-4634">4634</a></span>
<span class="normal"><a href="#__codelineno-0-4635">4635</a></span>
<span class="normal"><a href="#__codelineno-0-4636">4636</a></span>
<span class="normal"><a href="#__codelineno-0-4637">4637</a></span>
<span class="normal"><a href="#__codelineno-0-4638">4638</a></span>
<span class="normal"><a href="#__codelineno-0-4639">4639</a></span>
<span class="normal"><a href="#__codelineno-0-4640">4640</a></span>
<span class="normal"><a href="#__codelineno-0-4641">4641</a></span>
<span class="normal"><a href="#__codelineno-0-4642">4642</a></span>
<span class="normal"><a href="#__codelineno-0-4643">4643</a></span>
<span class="normal"><a href="#__codelineno-0-4644">4644</a></span>
<span class="normal"><a href="#__codelineno-0-4645">4645</a></span>
<span class="normal"><a href="#__codelineno-0-4646">4646</a></span>
<span class="normal"><a href="#__codelineno-0-4647">4647</a></span>
<span class="normal"><a href="#__codelineno-0-4648">4648</a></span>
<span class="normal"><a href="#__codelineno-0-4649">4649</a></span>
<span class="normal"><a href="#__codelineno-0-4650">4650</a></span>
<span class="normal"><a href="#__codelineno-0-4651">4651</a></span>
<span class="normal"><a href="#__codelineno-0-4652">4652</a></span>
<span class="normal"><a href="#__codelineno-0-4653">4653</a></span>
<span class="normal"><a href="#__codelineno-0-4654">4654</a></span>
<span class="normal"><a href="#__codelineno-0-4655">4655</a></span>
<span class="normal"><a href="#__codelineno-0-4656">4656</a></span>
<span class="normal"><a href="#__codelineno-0-4657">4657</a></span>
<span class="normal"><a href="#__codelineno-0-4658">4658</a></span>
<span class="normal"><a href="#__codelineno-0-4659">4659</a></span>
<span class="normal"><a href="#__codelineno-0-4660">4660</a></span>
<span class="normal"><a href="#__codelineno-0-4661">4661</a></span>
<span class="normal"><a href="#__codelineno-0-4662">4662</a></span>
<span class="normal"><a href="#__codelineno-0-4663">4663</a></span>
<span class="normal"><a href="#__codelineno-0-4664">4664</a></span>
<span class="normal"><a href="#__codelineno-0-4665">4665</a></span>
<span class="normal"><a href="#__codelineno-0-4666">4666</a></span>
<span class="normal"><a href="#__codelineno-0-4667">4667</a></span>
<span class="normal"><a href="#__codelineno-0-4668">4668</a></span>
<span class="normal"><a href="#__codelineno-0-4669">4669</a></span>
<span class="normal"><a href="#__codelineno-0-4670">4670</a></span>
<span class="normal"><a href="#__codelineno-0-4671">4671</a></span>
<span class="normal"><a href="#__codelineno-0-4672">4672</a></span>
<span class="normal"><a href="#__codelineno-0-4673">4673</a></span>
<span class="normal"><a href="#__codelineno-0-4674">4674</a></span>
<span class="normal"><a href="#__codelineno-0-4675">4675</a></span>
<span class="normal"><a href="#__codelineno-0-4676">4676</a></span>
<span class="normal"><a href="#__codelineno-0-4677">4677</a></span>
<span class="normal"><a href="#__codelineno-0-4678">4678</a></span>
<span class="normal"><a href="#__codelineno-0-4679">4679</a></span>
<span class="normal"><a href="#__codelineno-0-4680">4680</a></span>
<span class="normal"><a href="#__codelineno-0-4681">4681</a></span>
<span class="normal"><a href="#__codelineno-0-4682">4682</a></span>
<span class="normal"><a href="#__codelineno-0-4683">4683</a></span>
<span class="normal"><a href="#__codelineno-0-4684">4684</a></span>
<span class="normal"><a href="#__codelineno-0-4685">4685</a></span>
<span class="normal"><a href="#__codelineno-0-4686">4686</a></span>
<span class="normal"><a href="#__codelineno-0-4687">4687</a></span>
<span class="normal"><a href="#__codelineno-0-4688">4688</a></span>
<span class="normal"><a href="#__codelineno-0-4689">4689</a></span>
<span class="normal"><a href="#__codelineno-0-4690">4690</a></span>
<span class="normal"><a href="#__codelineno-0-4691">4691</a></span>
<span class="normal"><a href="#__codelineno-0-4692">4692</a></span>
<span class="normal"><a href="#__codelineno-0-4693">4693</a></span>
<span class="normal"><a href="#__codelineno-0-4694">4694</a></span>
<span class="normal"><a href="#__codelineno-0-4695">4695</a></span>
<span class="normal"><a href="#__codelineno-0-4696">4696</a></span>
<span class="normal"><a href="#__codelineno-0-4697">4697</a></span>
<span class="normal"><a href="#__codelineno-0-4698">4698</a></span>
<span class="normal"><a href="#__codelineno-0-4699">4699</a></span>
<span class="normal"><a href="#__codelineno-0-4700">4700</a></span>
<span class="normal"><a href="#__codelineno-0-4701">4701</a></span>
<span class="normal"><a href="#__codelineno-0-4702">4702</a></span>
<span class="normal"><a href="#__codelineno-0-4703">4703</a></span>
<span class="normal"><a href="#__codelineno-0-4704">4704</a></span>
<span class="normal"><a href="#__codelineno-0-4705">4705</a></span>
<span class="normal"><a href="#__codelineno-0-4706">4706</a></span>
<span class="normal"><a href="#__codelineno-0-4707">4707</a></span>
<span class="normal"><a href="#__codelineno-0-4708">4708</a></span>
<span class="normal"><a href="#__codelineno-0-4709">4709</a></span>
<span class="normal"><a href="#__codelineno-0-4710">4710</a></span>
<span class="normal"><a href="#__codelineno-0-4711">4711</a></span>
<span class="normal"><a href="#__codelineno-0-4712">4712</a></span>
<span class="normal"><a href="#__codelineno-0-4713">4713</a></span>
<span class="normal"><a href="#__codelineno-0-4714">4714</a></span>
<span class="normal"><a href="#__codelineno-0-4715">4715</a></span>
<span class="normal"><a href="#__codelineno-0-4716">4716</a></span>
<span class="normal"><a href="#__codelineno-0-4717">4717</a></span>
<span class="normal"><a href="#__codelineno-0-4718">4718</a></span>
<span class="normal"><a href="#__codelineno-0-4719">4719</a></span>
<span class="normal"><a href="#__codelineno-0-4720">4720</a></span>
<span class="normal"><a href="#__codelineno-0-4721">4721</a></span>
<span class="normal"><a href="#__codelineno-0-4722">4722</a></span>
<span class="normal"><a href="#__codelineno-0-4723">4723</a></span>
<span class="normal"><a href="#__codelineno-0-4724">4724</a></span>
<span class="normal"><a href="#__codelineno-0-4725">4725</a></span>
<span class="normal"><a href="#__codelineno-0-4726">4726</a></span>
<span class="normal"><a href="#__codelineno-0-4727">4727</a></span>
<span class="normal"><a href="#__codelineno-0-4728">4728</a></span>
<span class="normal"><a href="#__codelineno-0-4729">4729</a></span>
<span class="normal"><a href="#__codelineno-0-4730">4730</a></span>
<span class="normal"><a href="#__codelineno-0-4731">4731</a></span>
<span class="normal"><a href="#__codelineno-0-4732">4732</a></span>
<span class="normal"><a href="#__codelineno-0-4733">4733</a></span>
<span class="normal"><a href="#__codelineno-0-4734">4734</a></span>
<span class="normal"><a href="#__codelineno-0-4735">4735</a></span>
<span class="normal"><a href="#__codelineno-0-4736">4736</a></span>
<span class="normal"><a href="#__codelineno-0-4737">4737</a></span>
<span class="normal"><a href="#__codelineno-0-4738">4738</a></span>
<span class="normal"><a href="#__codelineno-0-4739">4739</a></span>
<span class="normal"><a href="#__codelineno-0-4740">4740</a></span>
<span class="normal"><a href="#__codelineno-0-4741">4741</a></span>
<span class="normal"><a href="#__codelineno-0-4742">4742</a></span>
<span class="normal"><a href="#__codelineno-0-4743">4743</a></span>
<span class="normal"><a href="#__codelineno-0-4744">4744</a></span>
<span class="normal"><a href="#__codelineno-0-4745">4745</a></span>
<span class="normal"><a href="#__codelineno-0-4746">4746</a></span>
<span class="normal"><a href="#__codelineno-0-4747">4747</a></span>
<span class="normal"><a href="#__codelineno-0-4748">4748</a></span>
<span class="normal"><a href="#__codelineno-0-4749">4749</a></span>
<span class="normal"><a href="#__codelineno-0-4750">4750</a></span>
<span class="normal"><a href="#__codelineno-0-4751">4751</a></span>
<span class="normal"><a href="#__codelineno-0-4752">4752</a></span>
<span class="normal"><a href="#__codelineno-0-4753">4753</a></span>
<span class="normal"><a href="#__codelineno-0-4754">4754</a></span>
<span class="normal"><a href="#__codelineno-0-4755">4755</a></span>
<span class="normal"><a href="#__codelineno-0-4756">4756</a></span>
<span class="normal"><a href="#__codelineno-0-4757">4757</a></span>
<span class="normal"><a href="#__codelineno-0-4758">4758</a></span>
<span class="normal"><a href="#__codelineno-0-4759">4759</a></span>
<span class="normal"><a href="#__codelineno-0-4760">4760</a></span>
<span class="normal"><a href="#__codelineno-0-4761">4761</a></span>
<span class="normal"><a href="#__codelineno-0-4762">4762</a></span>
<span class="normal"><a href="#__codelineno-0-4763">4763</a></span>
<span class="normal"><a href="#__codelineno-0-4764">4764</a></span>
<span class="normal"><a href="#__codelineno-0-4765">4765</a></span>
<span class="normal"><a href="#__codelineno-0-4766">4766</a></span>
<span class="normal"><a href="#__codelineno-0-4767">4767</a></span>
<span class="normal"><a href="#__codelineno-0-4768">4768</a></span>
<span class="normal"><a href="#__codelineno-0-4769">4769</a></span>
<span class="normal"><a href="#__codelineno-0-4770">4770</a></span>
<span class="normal"><a href="#__codelineno-0-4771">4771</a></span>
<span class="normal"><a href="#__codelineno-0-4772">4772</a></span>
<span class="normal"><a href="#__codelineno-0-4773">4773</a></span>
<span class="normal"><a href="#__codelineno-0-4774">4774</a></span>
<span class="normal"><a href="#__codelineno-0-4775">4775</a></span>
<span class="normal"><a href="#__codelineno-0-4776">4776</a></span>
<span class="normal"><a href="#__codelineno-0-4777">4777</a></span>
<span class="normal"><a href="#__codelineno-0-4778">4778</a></span>
<span class="normal"><a href="#__codelineno-0-4779">4779</a></span>
<span class="normal"><a href="#__codelineno-0-4780">4780</a></span>
<span class="normal"><a href="#__codelineno-0-4781">4781</a></span>
<span class="normal"><a href="#__codelineno-0-4782">4782</a></span>
<span class="normal"><a href="#__codelineno-0-4783">4783</a></span>
<span class="normal"><a href="#__codelineno-0-4784">4784</a></span>
<span class="normal"><a href="#__codelineno-0-4785">4785</a></span>
<span class="normal"><a href="#__codelineno-0-4786">4786</a></span>
<span class="normal"><a href="#__codelineno-0-4787">4787</a></span>
<span class="normal"><a href="#__codelineno-0-4788">4788</a></span>
<span class="normal"><a href="#__codelineno-0-4789">4789</a></span>
<span class="normal"><a href="#__codelineno-0-4790">4790</a></span>
<span class="normal"><a href="#__codelineno-0-4791">4791</a></span>
<span class="normal"><a href="#__codelineno-0-4792">4792</a></span>
<span class="normal"><a href="#__codelineno-0-4793">4793</a></span>
<span class="normal"><a href="#__codelineno-0-4794">4794</a></span>
<span class="normal"><a href="#__codelineno-0-4795">4795</a></span>
<span class="normal"><a href="#__codelineno-0-4796">4796</a></span>
<span class="normal"><a href="#__codelineno-0-4797">4797</a></span>
<span class="normal"><a href="#__codelineno-0-4798">4798</a></span>
<span class="normal"><a href="#__codelineno-0-4799">4799</a></span>
<span class="normal"><a href="#__codelineno-0-4800">4800</a></span>
<span class="normal"><a href="#__codelineno-0-4801">4801</a></span>
<span class="normal"><a href="#__codelineno-0-4802">4802</a></span>
<span class="normal"><a href="#__codelineno-0-4803">4803</a></span>
<span class="normal"><a href="#__codelineno-0-4804">4804</a></span>
<span class="normal"><a href="#__codelineno-0-4805">4805</a></span>
<span class="normal"><a href="#__codelineno-0-4806">4806</a></span>
<span class="normal"><a href="#__codelineno-0-4807">4807</a></span>
<span class="normal"><a href="#__codelineno-0-4808">4808</a></span>
<span class="normal"><a href="#__codelineno-0-4809">4809</a></span>
<span class="normal"><a href="#__codelineno-0-4810">4810</a></span>
<span class="normal"><a href="#__codelineno-0-4811">4811</a></span>
<span class="normal"><a href="#__codelineno-0-4812">4812</a></span>
<span class="normal"><a href="#__codelineno-0-4813">4813</a></span>
<span class="normal"><a href="#__codelineno-0-4814">4814</a></span>
<span class="normal"><a href="#__codelineno-0-4815">4815</a></span>
<span class="normal"><a href="#__codelineno-0-4816">4816</a></span>
<span class="normal"><a href="#__codelineno-0-4817">4817</a></span>
<span class="normal"><a href="#__codelineno-0-4818">4818</a></span>
<span class="normal"><a href="#__codelineno-0-4819">4819</a></span>
<span class="normal"><a href="#__codelineno-0-4820">4820</a></span>
<span class="normal"><a href="#__codelineno-0-4821">4821</a></span>
<span class="normal"><a href="#__codelineno-0-4822">4822</a></span>
<span class="normal"><a href="#__codelineno-0-4823">4823</a></span>
<span class="normal"><a href="#__codelineno-0-4824">4824</a></span>
<span class="normal"><a href="#__codelineno-0-4825">4825</a></span>
<span class="normal"><a href="#__codelineno-0-4826">4826</a></span>
<span class="normal"><a href="#__codelineno-0-4827">4827</a></span>
<span class="normal"><a href="#__codelineno-0-4828">4828</a></span>
<span class="normal"><a href="#__codelineno-0-4829">4829</a></span>
<span class="normal"><a href="#__codelineno-0-4830">4830</a></span>
<span class="normal"><a href="#__codelineno-0-4831">4831</a></span>
<span class="normal"><a href="#__codelineno-0-4832">4832</a></span>
<span class="normal"><a href="#__codelineno-0-4833">4833</a></span>
<span class="normal"><a href="#__codelineno-0-4834">4834</a></span>
<span class="normal"><a href="#__codelineno-0-4835">4835</a></span>
<span class="normal"><a href="#__codelineno-0-4836">4836</a></span>
<span class="normal"><a href="#__codelineno-0-4837">4837</a></span>
<span class="normal"><a href="#__codelineno-0-4838">4838</a></span>
<span class="normal"><a href="#__codelineno-0-4839">4839</a></span>
<span class="normal"><a href="#__codelineno-0-4840">4840</a></span>
<span class="normal"><a href="#__codelineno-0-4841">4841</a></span>
<span class="normal"><a href="#__codelineno-0-4842">4842</a></span>
<span class="normal"><a href="#__codelineno-0-4843">4843</a></span>
<span class="normal"><a href="#__codelineno-0-4844">4844</a></span>
<span class="normal"><a href="#__codelineno-0-4845">4845</a></span>
<span class="normal"><a href="#__codelineno-0-4846">4846</a></span>
<span class="normal"><a href="#__codelineno-0-4847">4847</a></span>
<span class="normal"><a href="#__codelineno-0-4848">4848</a></span>
<span class="normal"><a href="#__codelineno-0-4849">4849</a></span>
<span class="normal"><a href="#__codelineno-0-4850">4850</a></span>
<span class="normal"><a href="#__codelineno-0-4851">4851</a></span>
<span class="normal"><a href="#__codelineno-0-4852">4852</a></span>
<span class="normal"><a href="#__codelineno-0-4853">4853</a></span>
<span class="normal"><a href="#__codelineno-0-4854">4854</a></span>
<span class="normal"><a href="#__codelineno-0-4855">4855</a></span>
<span class="normal"><a href="#__codelineno-0-4856">4856</a></span>
<span class="normal"><a href="#__codelineno-0-4857">4857</a></span>
<span class="normal"><a href="#__codelineno-0-4858">4858</a></span>
<span class="normal"><a href="#__codelineno-0-4859">4859</a></span>
<span class="normal"><a href="#__codelineno-0-4860">4860</a></span>
<span class="normal"><a href="#__codelineno-0-4861">4861</a></span>
<span class="normal"><a href="#__codelineno-0-4862">4862</a></span>
<span class="normal"><a href="#__codelineno-0-4863">4863</a></span>
<span class="normal"><a href="#__codelineno-0-4864">4864</a></span>
<span class="normal"><a href="#__codelineno-0-4865">4865</a></span>
<span class="normal"><a href="#__codelineno-0-4866">4866</a></span>
<span class="normal"><a href="#__codelineno-0-4867">4867</a></span>
<span class="normal"><a href="#__codelineno-0-4868">4868</a></span>
<span class="normal"><a href="#__codelineno-0-4869">4869</a></span>
<span class="normal"><a href="#__codelineno-0-4870">4870</a></span>
<span class="normal"><a href="#__codelineno-0-4871">4871</a></span>
<span class="normal"><a href="#__codelineno-0-4872">4872</a></span>
<span class="normal"><a href="#__codelineno-0-4873">4873</a></span>
<span class="normal"><a href="#__codelineno-0-4874">4874</a></span>
<span class="normal"><a href="#__codelineno-0-4875">4875</a></span>
<span class="normal"><a href="#__codelineno-0-4876">4876</a></span>
<span class="normal"><a href="#__codelineno-0-4877">4877</a></span>
<span class="normal"><a href="#__codelineno-0-4878">4878</a></span>
<span class="normal"><a href="#__codelineno-0-4879">4879</a></span>
<span class="normal"><a href="#__codelineno-0-4880">4880</a></span>
<span class="normal"><a href="#__codelineno-0-4881">4881</a></span>
<span class="normal"><a href="#__codelineno-0-4882">4882</a></span>
<span class="normal"><a href="#__codelineno-0-4883">4883</a></span>
<span class="normal"><a href="#__codelineno-0-4884">4884</a></span>
<span class="normal"><a href="#__codelineno-0-4885">4885</a></span>
<span class="normal"><a href="#__codelineno-0-4886">4886</a></span>
<span class="normal"><a href="#__codelineno-0-4887">4887</a></span>
<span class="normal"><a href="#__codelineno-0-4888">4888</a></span>
<span class="normal"><a href="#__codelineno-0-4889">4889</a></span>
<span class="normal"><a href="#__codelineno-0-4890">4890</a></span>
<span class="normal"><a href="#__codelineno-0-4891">4891</a></span>
<span class="normal"><a href="#__codelineno-0-4892">4892</a></span>
<span class="normal"><a href="#__codelineno-0-4893">4893</a></span>
<span class="normal"><a href="#__codelineno-0-4894">4894</a></span>
<span class="normal"><a href="#__codelineno-0-4895">4895</a></span>
<span class="normal"><a href="#__codelineno-0-4896">4896</a></span>
<span class="normal"><a href="#__codelineno-0-4897">4897</a></span>
<span class="normal"><a href="#__codelineno-0-4898">4898</a></span>
<span class="normal"><a href="#__codelineno-0-4899">4899</a></span>
<span class="normal"><a href="#__codelineno-0-4900">4900</a></span>
<span class="normal"><a href="#__codelineno-0-4901">4901</a></span>
<span class="normal"><a href="#__codelineno-0-4902">4902</a></span>
<span class="normal"><a href="#__codelineno-0-4903">4903</a></span>
<span class="normal"><a href="#__codelineno-0-4904">4904</a></span>
<span class="normal"><a href="#__codelineno-0-4905">4905</a></span>
<span class="normal"><a href="#__codelineno-0-4906">4906</a></span>
<span class="normal"><a href="#__codelineno-0-4907">4907</a></span>
<span class="normal"><a href="#__codelineno-0-4908">4908</a></span>
<span class="normal"><a href="#__codelineno-0-4909">4909</a></span>
<span class="normal"><a href="#__codelineno-0-4910">4910</a></span>
<span class="normal"><a href="#__codelineno-0-4911">4911</a></span>
<span class="normal"><a href="#__codelineno-0-4912">4912</a></span>
<span class="normal"><a href="#__codelineno-0-4913">4913</a></span>
<span class="normal"><a href="#__codelineno-0-4914">4914</a></span>
<span class="normal"><a href="#__codelineno-0-4915">4915</a></span>
<span class="normal"><a href="#__codelineno-0-4916">4916</a></span>
<span class="normal"><a href="#__codelineno-0-4917">4917</a></span>
<span class="normal"><a href="#__codelineno-0-4918">4918</a></span>
<span class="normal"><a href="#__codelineno-0-4919">4919</a></span>
<span class="normal"><a href="#__codelineno-0-4920">4920</a></span>
<span class="normal"><a href="#__codelineno-0-4921">4921</a></span>
<span class="normal"><a href="#__codelineno-0-4922">4922</a></span>
<span class="normal"><a href="#__codelineno-0-4923">4923</a></span>
<span class="normal"><a href="#__codelineno-0-4924">4924</a></span>
<span class="normal"><a href="#__codelineno-0-4925">4925</a></span>
<span class="normal"><a href="#__codelineno-0-4926">4926</a></span>
<span class="normal"><a href="#__codelineno-0-4927">4927</a></span>
<span class="normal"><a href="#__codelineno-0-4928">4928</a></span>
<span class="normal"><a href="#__codelineno-0-4929">4929</a></span>
<span class="normal"><a href="#__codelineno-0-4930">4930</a></span>
<span class="normal"><a href="#__codelineno-0-4931">4931</a></span>
<span class="normal"><a href="#__codelineno-0-4932">4932</a></span>
<span class="normal"><a href="#__codelineno-0-4933">4933</a></span>
<span class="normal"><a href="#__codelineno-0-4934">4934</a></span>
<span class="normal"><a href="#__codelineno-0-4935">4935</a></span>
<span class="normal"><a href="#__codelineno-0-4936">4936</a></span>
<span class="normal"><a href="#__codelineno-0-4937">4937</a></span>
<span class="normal"><a href="#__codelineno-0-4938">4938</a></span>
<span class="normal"><a href="#__codelineno-0-4939">4939</a></span>
<span class="normal"><a href="#__codelineno-0-4940">4940</a></span>
<span class="normal"><a href="#__codelineno-0-4941">4941</a></span>
<span class="normal"><a href="#__codelineno-0-4942">4942</a></span>
<span class="normal"><a href="#__codelineno-0-4943">4943</a></span>
<span class="normal"><a href="#__codelineno-0-4944">4944</a></span>
<span class="normal"><a href="#__codelineno-0-4945">4945</a></span>
<span class="normal"><a href="#__codelineno-0-4946">4946</a></span>
<span class="normal"><a href="#__codelineno-0-4947">4947</a></span>
<span class="normal"><a href="#__codelineno-0-4948">4948</a></span>
<span class="normal"><a href="#__codelineno-0-4949">4949</a></span>
<span class="normal"><a href="#__codelineno-0-4950">4950</a></span>
<span class="normal"><a href="#__codelineno-0-4951">4951</a></span>
<span class="normal"><a href="#__codelineno-0-4952">4952</a></span>
<span class="normal"><a href="#__codelineno-0-4953">4953</a></span>
<span class="normal"><a href="#__codelineno-0-4954">4954</a></span>
<span class="normal"><a href="#__codelineno-0-4955">4955</a></span>
<span class="normal"><a href="#__codelineno-0-4956">4956</a></span>
<span class="normal"><a href="#__codelineno-0-4957">4957</a></span>
<span class="normal"><a href="#__codelineno-0-4958">4958</a></span>
<span class="normal"><a href="#__codelineno-0-4959">4959</a></span>
<span class="normal"><a href="#__codelineno-0-4960">4960</a></span>
<span class="normal"><a href="#__codelineno-0-4961">4961</a></span>
<span class="normal"><a href="#__codelineno-0-4962">4962</a></span>
<span class="normal"><a href="#__codelineno-0-4963">4963</a></span>
<span class="normal"><a href="#__codelineno-0-4964">4964</a></span>
<span class="normal"><a href="#__codelineno-0-4965">4965</a></span>
<span class="normal"><a href="#__codelineno-0-4966">4966</a></span>
<span class="normal"><a href="#__codelineno-0-4967">4967</a></span>
<span class="normal"><a href="#__codelineno-0-4968">4968</a></span>
<span class="normal"><a href="#__codelineno-0-4969">4969</a></span>
<span class="normal"><a href="#__codelineno-0-4970">4970</a></span>
<span class="normal"><a href="#__codelineno-0-4971">4971</a></span>
<span class="normal"><a href="#__codelineno-0-4972">4972</a></span>
<span class="normal"><a href="#__codelineno-0-4973">4973</a></span>
<span class="normal"><a href="#__codelineno-0-4974">4974</a></span>
<span class="normal"><a href="#__codelineno-0-4975">4975</a></span>
<span class="normal"><a href="#__codelineno-0-4976">4976</a></span>
<span class="normal"><a href="#__codelineno-0-4977">4977</a></span>
<span class="normal"><a href="#__codelineno-0-4978">4978</a></span>
<span class="normal"><a href="#__codelineno-0-4979">4979</a></span>
<span class="normal"><a href="#__codelineno-0-4980">4980</a></span>
<span class="normal"><a href="#__codelineno-0-4981">4981</a></span>
<span class="normal"><a href="#__codelineno-0-4982">4982</a></span>
<span class="normal"><a href="#__codelineno-0-4983">4983</a></span>
<span class="normal"><a href="#__codelineno-0-4984">4984</a></span>
<span class="normal"><a href="#__codelineno-0-4985">4985</a></span>
<span class="normal"><a href="#__codelineno-0-4986">4986</a></span>
<span class="normal"><a href="#__codelineno-0-4987">4987</a></span>
<span class="normal"><a href="#__codelineno-0-4988">4988</a></span>
<span class="normal"><a href="#__codelineno-0-4989">4989</a></span>
<span class="normal"><a href="#__codelineno-0-4990">4990</a></span>
<span class="normal"><a href="#__codelineno-0-4991">4991</a></span>
<span class="normal"><a href="#__codelineno-0-4992">4992</a></span>
<span class="normal"><a href="#__codelineno-0-4993">4993</a></span>
<span class="normal"><a href="#__codelineno-0-4994">4994</a></span>
<span class="normal"><a href="#__codelineno-0-4995">4995</a></span>
<span class="normal"><a href="#__codelineno-0-4996">4996</a></span>
<span class="normal"><a href="#__codelineno-0-4997">4997</a></span>
<span class="normal"><a href="#__codelineno-0-4998">4998</a></span>
<span class="normal"><a href="#__codelineno-0-4999">4999</a></span>
<span class="normal"><a href="#__codelineno-0-5000">5000</a></span>
<span class="normal"><a href="#__codelineno-0-5001">5001</a></span>
<span class="normal"><a href="#__codelineno-0-5002">5002</a></span>
<span class="normal"><a href="#__codelineno-0-5003">5003</a></span>
<span class="normal"><a href="#__codelineno-0-5004">5004</a></span>
<span class="normal"><a href="#__codelineno-0-5005">5005</a></span>
<span class="normal"><a href="#__codelineno-0-5006">5006</a></span>
<span class="normal"><a href="#__codelineno-0-5007">5007</a></span>
<span class="normal"><a href="#__codelineno-0-5008">5008</a></span>
<span class="normal"><a href="#__codelineno-0-5009">5009</a></span>
<span class="normal"><a href="#__codelineno-0-5010">5010</a></span>
<span class="normal"><a href="#__codelineno-0-5011">5011</a></span>
<span class="normal"><a href="#__codelineno-0-5012">5012</a></span>
<span class="normal"><a href="#__codelineno-0-5013">5013</a></span>
<span class="normal"><a href="#__codelineno-0-5014">5014</a></span>
<span class="normal"><a href="#__codelineno-0-5015">5015</a></span>
<span class="normal"><a href="#__codelineno-0-5016">5016</a></span>
<span class="normal"><a href="#__codelineno-0-5017">5017</a></span>
<span class="normal"><a href="#__codelineno-0-5018">5018</a></span>
<span class="normal"><a href="#__codelineno-0-5019">5019</a></span>
<span class="normal"><a href="#__codelineno-0-5020">5020</a></span>
<span class="normal"><a href="#__codelineno-0-5021">5021</a></span>
<span class="normal"><a href="#__codelineno-0-5022">5022</a></span>
<span class="normal"><a href="#__codelineno-0-5023">5023</a></span>
<span class="normal"><a href="#__codelineno-0-5024">5024</a></span>
<span class="normal"><a href="#__codelineno-0-5025">5025</a></span>
<span class="normal"><a href="#__codelineno-0-5026">5026</a></span>
<span class="normal"><a href="#__codelineno-0-5027">5027</a></span>
<span class="normal"><a href="#__codelineno-0-5028">5028</a></span>
<span class="normal"><a href="#__codelineno-0-5029">5029</a></span>
<span class="normal"><a href="#__codelineno-0-5030">5030</a></span>
<span class="normal"><a href="#__codelineno-0-5031">5031</a></span>
<span class="normal"><a href="#__codelineno-0-5032">5032</a></span>
<span class="normal"><a href="#__codelineno-0-5033">5033</a></span>
<span class="normal"><a href="#__codelineno-0-5034">5034</a></span>
<span class="normal"><a href="#__codelineno-0-5035">5035</a></span>
<span class="normal"><a href="#__codelineno-0-5036">5036</a></span>
<span class="normal"><a href="#__codelineno-0-5037">5037</a></span>
<span class="normal"><a href="#__codelineno-0-5038">5038</a></span>
<span class="normal"><a href="#__codelineno-0-5039">5039</a></span>
<span class="normal"><a href="#__codelineno-0-5040">5040</a></span>
<span class="normal"><a href="#__codelineno-0-5041">5041</a></span>
<span class="normal"><a href="#__codelineno-0-5042">5042</a></span>
<span class="normal"><a href="#__codelineno-0-5043">5043</a></span>
<span class="normal"><a href="#__codelineno-0-5044">5044</a></span>
<span class="normal"><a href="#__codelineno-0-5045">5045</a></span>
<span class="normal"><a href="#__codelineno-0-5046">5046</a></span>
<span class="normal"><a href="#__codelineno-0-5047">5047</a></span>
<span class="normal"><a href="#__codelineno-0-5048">5048</a></span>
<span class="normal"><a href="#__codelineno-0-5049">5049</a></span>
<span class="normal"><a href="#__codelineno-0-5050">5050</a></span>
<span class="normal"><a href="#__codelineno-0-5051">5051</a></span>
<span class="normal"><a href="#__codelineno-0-5052">5052</a></span>
<span class="normal"><a href="#__codelineno-0-5053">5053</a></span>
<span class="normal"><a href="#__codelineno-0-5054">5054</a></span>
<span class="normal"><a href="#__codelineno-0-5055">5055</a></span>
<span class="normal"><a href="#__codelineno-0-5056">5056</a></span>
<span class="normal"><a href="#__codelineno-0-5057">5057</a></span>
<span class="normal"><a href="#__codelineno-0-5058">5058</a></span>
<span class="normal"><a href="#__codelineno-0-5059">5059</a></span>
<span class="normal"><a href="#__codelineno-0-5060">5060</a></span>
<span class="normal"><a href="#__codelineno-0-5061">5061</a></span>
<span class="normal"><a href="#__codelineno-0-5062">5062</a></span>
<span class="normal"><a href="#__codelineno-0-5063">5063</a></span>
<span class="normal"><a href="#__codelineno-0-5064">5064</a></span>
<span class="normal"><a href="#__codelineno-0-5065">5065</a></span>
<span class="normal"><a href="#__codelineno-0-5066">5066</a></span>
<span class="normal"><a href="#__codelineno-0-5067">5067</a></span>
<span class="normal"><a href="#__codelineno-0-5068">5068</a></span>
<span class="normal"><a href="#__codelineno-0-5069">5069</a></span>
<span class="normal"><a href="#__codelineno-0-5070">5070</a></span>
<span class="normal"><a href="#__codelineno-0-5071">5071</a></span>
<span class="normal"><a href="#__codelineno-0-5072">5072</a></span>
<span class="normal"><a href="#__codelineno-0-5073">5073</a></span>
<span class="normal"><a href="#__codelineno-0-5074">5074</a></span>
<span class="normal"><a href="#__codelineno-0-5075">5075</a></span>
<span class="normal"><a href="#__codelineno-0-5076">5076</a></span>
<span class="normal"><a href="#__codelineno-0-5077">5077</a></span>
<span class="normal"><a href="#__codelineno-0-5078">5078</a></span>
<span class="normal"><a href="#__codelineno-0-5079">5079</a></span>
<span class="normal"><a href="#__codelineno-0-5080">5080</a></span>
<span class="normal"><a href="#__codelineno-0-5081">5081</a></span>
<span class="normal"><a href="#__codelineno-0-5082">5082</a></span>
<span class="normal"><a href="#__codelineno-0-5083">5083</a></span>
<span class="normal"><a href="#__codelineno-0-5084">5084</a></span>
<span class="normal"><a href="#__codelineno-0-5085">5085</a></span>
<span class="normal"><a href="#__codelineno-0-5086">5086</a></span>
<span class="normal"><a href="#__codelineno-0-5087">5087</a></span>
<span class="normal"><a href="#__codelineno-0-5088">5088</a></span>
<span class="normal"><a href="#__codelineno-0-5089">5089</a></span>
<span class="normal"><a href="#__codelineno-0-5090">5090</a></span>
<span class="normal"><a href="#__codelineno-0-5091">5091</a></span>
<span class="normal"><a href="#__codelineno-0-5092">5092</a></span>
<span class="normal"><a href="#__codelineno-0-5093">5093</a></span>
<span class="normal"><a href="#__codelineno-0-5094">5094</a></span>
<span class="normal"><a href="#__codelineno-0-5095">5095</a></span>
<span class="normal"><a href="#__codelineno-0-5096">5096</a></span>
<span class="normal"><a href="#__codelineno-0-5097">5097</a></span>
<span class="normal"><a href="#__codelineno-0-5098">5098</a></span>
<span class="normal"><a href="#__codelineno-0-5099">5099</a></span>
<span class="normal"><a href="#__codelineno-0-5100">5100</a></span>
<span class="normal"><a href="#__codelineno-0-5101">5101</a></span>
<span class="normal"><a href="#__codelineno-0-5102">5102</a></span>
<span class="normal"><a href="#__codelineno-0-5103">5103</a></span>
<span class="normal"><a href="#__codelineno-0-5104">5104</a></span>
<span class="normal"><a href="#__codelineno-0-5105">5105</a></span>
<span class="normal"><a href="#__codelineno-0-5106">5106</a></span>
<span class="normal"><a href="#__codelineno-0-5107">5107</a></span>
<span class="normal"><a href="#__codelineno-0-5108">5108</a></span>
<span class="normal"><a href="#__codelineno-0-5109">5109</a></span>
<span class="normal"><a href="#__codelineno-0-5110">5110</a></span>
<span class="normal"><a href="#__codelineno-0-5111">5111</a></span>
<span class="normal"><a href="#__codelineno-0-5112">5112</a></span>
<span class="normal"><a href="#__codelineno-0-5113">5113</a></span>
<span class="normal"><a href="#__codelineno-0-5114">5114</a></span>
<span class="normal"><a href="#__codelineno-0-5115">5115</a></span>
<span class="normal"><a href="#__codelineno-0-5116">5116</a></span>
<span class="normal"><a href="#__codelineno-0-5117">5117</a></span>
<span class="normal"><a href="#__codelineno-0-5118">5118</a></span>
<span class="normal"><a href="#__codelineno-0-5119">5119</a></span>
<span class="normal"><a href="#__codelineno-0-5120">5120</a></span>
<span class="normal"><a href="#__codelineno-0-5121">5121</a></span>
<span class="normal"><a href="#__codelineno-0-5122">5122</a></span>
<span class="normal"><a href="#__codelineno-0-5123">5123</a></span>
<span class="normal"><a href="#__codelineno-0-5124">5124</a></span>
<span class="normal"><a href="#__codelineno-0-5125">5125</a></span>
<span class="normal"><a href="#__codelineno-0-5126">5126</a></span>
<span class="normal"><a href="#__codelineno-0-5127">5127</a></span>
<span class="normal"><a href="#__codelineno-0-5128">5128</a></span>
<span class="normal"><a href="#__codelineno-0-5129">5129</a></span>
<span class="normal"><a href="#__codelineno-0-5130">5130</a></span>
<span class="normal"><a href="#__codelineno-0-5131">5131</a></span>
<span class="normal"><a href="#__codelineno-0-5132">5132</a></span>
<span class="normal"><a href="#__codelineno-0-5133">5133</a></span>
<span class="normal"><a href="#__codelineno-0-5134">5134</a></span>
<span class="normal"><a href="#__codelineno-0-5135">5135</a></span>
<span class="normal"><a href="#__codelineno-0-5136">5136</a></span>
<span class="normal"><a href="#__codelineno-0-5137">5137</a></span>
<span class="normal"><a href="#__codelineno-0-5138">5138</a></span>
<span class="normal"><a href="#__codelineno-0-5139">5139</a></span>
<span class="normal"><a href="#__codelineno-0-5140">5140</a></span>
<span class="normal"><a href="#__codelineno-0-5141">5141</a></span>
<span class="normal"><a href="#__codelineno-0-5142">5142</a></span>
<span class="normal"><a href="#__codelineno-0-5143">5143</a></span>
<span class="normal"><a href="#__codelineno-0-5144">5144</a></span>
<span class="normal"><a href="#__codelineno-0-5145">5145</a></span>
<span class="normal"><a href="#__codelineno-0-5146">5146</a></span>
<span class="normal"><a href="#__codelineno-0-5147">5147</a></span>
<span class="normal"><a href="#__codelineno-0-5148">5148</a></span>
<span class="normal"><a href="#__codelineno-0-5149">5149</a></span>
<span class="normal"><a href="#__codelineno-0-5150">5150</a></span>
<span class="normal"><a href="#__codelineno-0-5151">5151</a></span>
<span class="normal"><a href="#__codelineno-0-5152">5152</a></span>
<span class="normal"><a href="#__codelineno-0-5153">5153</a></span>
<span class="normal"><a href="#__codelineno-0-5154">5154</a></span>
<span class="normal"><a href="#__codelineno-0-5155">5155</a></span>
<span class="normal"><a href="#__codelineno-0-5156">5156</a></span>
<span class="normal"><a href="#__codelineno-0-5157">5157</a></span>
<span class="normal"><a href="#__codelineno-0-5158">5158</a></span>
<span class="normal"><a href="#__codelineno-0-5159">5159</a></span>
<span class="normal"><a href="#__codelineno-0-5160">5160</a></span>
<span class="normal"><a href="#__codelineno-0-5161">5161</a></span>
<span class="normal"><a href="#__codelineno-0-5162">5162</a></span>
<span class="normal"><a href="#__codelineno-0-5163">5163</a></span>
<span class="normal"><a href="#__codelineno-0-5164">5164</a></span>
<span class="normal"><a href="#__codelineno-0-5165">5165</a></span>
<span class="normal"><a href="#__codelineno-0-5166">5166</a></span>
<span class="normal"><a href="#__codelineno-0-5167">5167</a></span>
<span class="normal"><a href="#__codelineno-0-5168">5168</a></span>
<span class="normal"><a href="#__codelineno-0-5169">5169</a></span>
<span class="normal"><a href="#__codelineno-0-5170">5170</a></span>
<span class="normal"><a href="#__codelineno-0-5171">5171</a></span>
<span class="normal"><a href="#__codelineno-0-5172">5172</a></span>
<span class="normal"><a href="#__codelineno-0-5173">5173</a></span>
<span class="normal"><a href="#__codelineno-0-5174">5174</a></span>
<span class="normal"><a href="#__codelineno-0-5175">5175</a></span>
<span class="normal"><a href="#__codelineno-0-5176">5176</a></span>
<span class="normal"><a href="#__codelineno-0-5177">5177</a></span>
<span class="normal"><a href="#__codelineno-0-5178">5178</a></span>
<span class="normal"><a href="#__codelineno-0-5179">5179</a></span>
<span class="normal"><a href="#__codelineno-0-5180">5180</a></span>
<span class="normal"><a href="#__codelineno-0-5181">5181</a></span>
<span class="normal"><a href="#__codelineno-0-5182">5182</a></span>
<span class="normal"><a href="#__codelineno-0-5183">5183</a></span>
<span class="normal"><a href="#__codelineno-0-5184">5184</a></span>
<span class="normal"><a href="#__codelineno-0-5185">5185</a></span>
<span class="normal"><a href="#__codelineno-0-5186">5186</a></span>
<span class="normal"><a href="#__codelineno-0-5187">5187</a></span>
<span class="normal"><a href="#__codelineno-0-5188">5188</a></span>
<span class="normal"><a href="#__codelineno-0-5189">5189</a></span>
<span class="normal"><a href="#__codelineno-0-5190">5190</a></span>
<span class="normal"><a href="#__codelineno-0-5191">5191</a></span>
<span class="normal"><a href="#__codelineno-0-5192">5192</a></span>
<span class="normal"><a href="#__codelineno-0-5193">5193</a></span>
<span class="normal"><a href="#__codelineno-0-5194">5194</a></span>
<span class="normal"><a href="#__codelineno-0-5195">5195</a></span>
<span class="normal"><a href="#__codelineno-0-5196">5196</a></span>
<span class="normal"><a href="#__codelineno-0-5197">5197</a></span>
<span class="normal"><a href="#__codelineno-0-5198">5198</a></span>
<span class="normal"><a href="#__codelineno-0-5199">5199</a></span>
<span class="normal"><a href="#__codelineno-0-5200">5200</a></span>
<span class="normal"><a href="#__codelineno-0-5201">5201</a></span>
<span class="normal"><a href="#__codelineno-0-5202">5202</a></span>
<span class="normal"><a href="#__codelineno-0-5203">5203</a></span>
<span class="normal"><a href="#__codelineno-0-5204">5204</a></span>
<span class="normal"><a href="#__codelineno-0-5205">5205</a></span>
<span class="normal"><a href="#__codelineno-0-5206">5206</a></span>
<span class="normal"><a href="#__codelineno-0-5207">5207</a></span>
<span class="normal"><a href="#__codelineno-0-5208">5208</a></span>
<span class="normal"><a href="#__codelineno-0-5209">5209</a></span>
<span class="normal"><a href="#__codelineno-0-5210">5210</a></span>
<span class="normal"><a href="#__codelineno-0-5211">5211</a></span>
<span class="normal"><a href="#__codelineno-0-5212">5212</a></span>
<span class="normal"><a href="#__codelineno-0-5213">5213</a></span>
<span class="normal"><a href="#__codelineno-0-5214">5214</a></span>
<span class="normal"><a href="#__codelineno-0-5215">5215</a></span>
<span class="normal"><a href="#__codelineno-0-5216">5216</a></span>
<span class="normal"><a href="#__codelineno-0-5217">5217</a></span>
<span class="normal"><a href="#__codelineno-0-5218">5218</a></span>
<span class="normal"><a href="#__codelineno-0-5219">5219</a></span>
<span class="normal"><a href="#__codelineno-0-5220">5220</a></span>
<span class="normal"><a href="#__codelineno-0-5221">5221</a></span>
<span class="normal"><a href="#__codelineno-0-5222">5222</a></span>
<span class="normal"><a href="#__codelineno-0-5223">5223</a></span>
<span class="normal"><a href="#__codelineno-0-5224">5224</a></span>
<span class="normal"><a href="#__codelineno-0-5225">5225</a></span>
<span class="normal"><a href="#__codelineno-0-5226">5226</a></span>
<span class="normal"><a href="#__codelineno-0-5227">5227</a></span>
<span class="normal"><a href="#__codelineno-0-5228">5228</a></span>
<span class="normal"><a href="#__codelineno-0-5229">5229</a></span>
<span class="normal"><a href="#__codelineno-0-5230">5230</a></span>
<span class="normal"><a href="#__codelineno-0-5231">5231</a></span>
<span class="normal"><a href="#__codelineno-0-5232">5232</a></span>
<span class="normal"><a href="#__codelineno-0-5233">5233</a></span>
<span class="normal"><a href="#__codelineno-0-5234">5234</a></span>
<span class="normal"><a href="#__codelineno-0-5235">5235</a></span>
<span class="normal"><a href="#__codelineno-0-5236">5236</a></span>
<span class="normal"><a href="#__codelineno-0-5237">5237</a></span>
<span class="normal"><a href="#__codelineno-0-5238">5238</a></span>
<span class="normal"><a href="#__codelineno-0-5239">5239</a></span>
<span class="normal"><a href="#__codelineno-0-5240">5240</a></span>
<span class="normal"><a href="#__codelineno-0-5241">5241</a></span>
<span class="normal"><a href="#__codelineno-0-5242">5242</a></span>
<span class="normal"><a href="#__codelineno-0-5243">5243</a></span>
<span class="normal"><a href="#__codelineno-0-5244">5244</a></span>
<span class="normal"><a href="#__codelineno-0-5245">5245</a></span>
<span class="normal"><a href="#__codelineno-0-5246">5246</a></span>
<span class="normal"><a href="#__codelineno-0-5247">5247</a></span>
<span class="normal"><a href="#__codelineno-0-5248">5248</a></span>
<span class="normal"><a href="#__codelineno-0-5249">5249</a></span>
<span class="normal"><a href="#__codelineno-0-5250">5250</a></span>
<span class="normal"><a href="#__codelineno-0-5251">5251</a></span>
<span class="normal"><a href="#__codelineno-0-5252">5252</a></span>
<span class="normal"><a href="#__codelineno-0-5253">5253</a></span>
<span class="normal"><a href="#__codelineno-0-5254">5254</a></span>
<span class="normal"><a href="#__codelineno-0-5255">5255</a></span>
<span class="normal"><a href="#__codelineno-0-5256">5256</a></span>
<span class="normal"><a href="#__codelineno-0-5257">5257</a></span>
<span class="normal"><a href="#__codelineno-0-5258">5258</a></span>
<span class="normal"><a href="#__codelineno-0-5259">5259</a></span>
<span class="normal"><a href="#__codelineno-0-5260">5260</a></span>
<span class="normal"><a href="#__codelineno-0-5261">5261</a></span>
<span class="normal"><a href="#__codelineno-0-5262">5262</a></span>
<span class="normal"><a href="#__codelineno-0-5263">5263</a></span>
<span class="normal"><a href="#__codelineno-0-5264">5264</a></span>
<span class="normal"><a href="#__codelineno-0-5265">5265</a></span>
<span class="normal"><a href="#__codelineno-0-5266">5266</a></span>
<span class="normal"><a href="#__codelineno-0-5267">5267</a></span>
<span class="normal"><a href="#__codelineno-0-5268">5268</a></span>
<span class="normal"><a href="#__codelineno-0-5269">5269</a></span>
<span class="normal"><a href="#__codelineno-0-5270">5270</a></span>
<span class="normal"><a href="#__codelineno-0-5271">5271</a></span>
<span class="normal"><a href="#__codelineno-0-5272">5272</a></span>
<span class="normal"><a href="#__codelineno-0-5273">5273</a></span>
<span class="normal"><a href="#__codelineno-0-5274">5274</a></span>
<span class="normal"><a href="#__codelineno-0-5275">5275</a></span>
<span class="normal"><a href="#__codelineno-0-5276">5276</a></span>
<span class="normal"><a href="#__codelineno-0-5277">5277</a></span>
<span class="normal"><a href="#__codelineno-0-5278">5278</a></span>
<span class="normal"><a href="#__codelineno-0-5279">5279</a></span>
<span class="normal"><a href="#__codelineno-0-5280">5280</a></span>
<span class="normal"><a href="#__codelineno-0-5281">5281</a></span>
<span class="normal"><a href="#__codelineno-0-5282">5282</a></span>
<span class="normal"><a href="#__codelineno-0-5283">5283</a></span>
<span class="normal"><a href="#__codelineno-0-5284">5284</a></span>
<span class="normal"><a href="#__codelineno-0-5285">5285</a></span>
<span class="normal"><a href="#__codelineno-0-5286">5286</a></span>
<span class="normal"><a href="#__codelineno-0-5287">5287</a></span>
<span class="normal"><a href="#__codelineno-0-5288">5288</a></span>
<span class="normal"><a href="#__codelineno-0-5289">5289</a></span>
<span class="normal"><a href="#__codelineno-0-5290">5290</a></span>
<span class="normal"><a href="#__codelineno-0-5291">5291</a></span>
<span class="normal"><a href="#__codelineno-0-5292">5292</a></span>
<span class="normal"><a href="#__codelineno-0-5293">5293</a></span>
<span class="normal"><a href="#__codelineno-0-5294">5294</a></span>
<span class="normal"><a href="#__codelineno-0-5295">5295</a></span>
<span class="normal"><a href="#__codelineno-0-5296">5296</a></span>
<span class="normal"><a href="#__codelineno-0-5297">5297</a></span>
<span class="normal"><a href="#__codelineno-0-5298">5298</a></span>
<span class="normal"><a href="#__codelineno-0-5299">5299</a></span>
<span class="normal"><a href="#__codelineno-0-5300">5300</a></span>
<span class="normal"><a href="#__codelineno-0-5301">5301</a></span>
<span class="normal"><a href="#__codelineno-0-5302">5302</a></span>
<span class="normal"><a href="#__codelineno-0-5303">5303</a></span>
<span class="normal"><a href="#__codelineno-0-5304">5304</a></span>
<span class="normal"><a href="#__codelineno-0-5305">5305</a></span>
<span class="normal"><a href="#__codelineno-0-5306">5306</a></span>
<span class="normal"><a href="#__codelineno-0-5307">5307</a></span>
<span class="normal"><a href="#__codelineno-0-5308">5308</a></span>
<span class="normal"><a href="#__codelineno-0-5309">5309</a></span>
<span class="normal"><a href="#__codelineno-0-5310">5310</a></span>
<span class="normal"><a href="#__codelineno-0-5311">5311</a></span>
<span class="normal"><a href="#__codelineno-0-5312">5312</a></span>
<span class="normal"><a href="#__codelineno-0-5313">5313</a></span>
<span class="normal"><a href="#__codelineno-0-5314">5314</a></span>
<span class="normal"><a href="#__codelineno-0-5315">5315</a></span>
<span class="normal"><a href="#__codelineno-0-5316">5316</a></span>
<span class="normal"><a href="#__codelineno-0-5317">5317</a></span>
<span class="normal"><a href="#__codelineno-0-5318">5318</a></span>
<span class="normal"><a href="#__codelineno-0-5319">5319</a></span>
<span class="normal"><a href="#__codelineno-0-5320">5320</a></span>
<span class="normal"><a href="#__codelineno-0-5321">5321</a></span>
<span class="normal"><a href="#__codelineno-0-5322">5322</a></span>
<span class="normal"><a href="#__codelineno-0-5323">5323</a></span>
<span class="normal"><a href="#__codelineno-0-5324">5324</a></span>
<span class="normal"><a href="#__codelineno-0-5325">5325</a></span>
<span class="normal"><a href="#__codelineno-0-5326">5326</a></span>
<span class="normal"><a href="#__codelineno-0-5327">5327</a></span>
<span class="normal"><a href="#__codelineno-0-5328">5328</a></span>
<span class="normal"><a href="#__codelineno-0-5329">5329</a></span>
<span class="normal"><a href="#__codelineno-0-5330">5330</a></span>
<span class="normal"><a href="#__codelineno-0-5331">5331</a></span>
<span class="normal"><a href="#__codelineno-0-5332">5332</a></span>
<span class="normal"><a href="#__codelineno-0-5333">5333</a></span>
<span class="normal"><a href="#__codelineno-0-5334">5334</a></span>
<span class="normal"><a href="#__codelineno-0-5335">5335</a></span>
<span class="normal"><a href="#__codelineno-0-5336">5336</a></span>
<span class="normal"><a href="#__codelineno-0-5337">5337</a></span>
<span class="normal"><a href="#__codelineno-0-5338">5338</a></span>
<span class="normal"><a href="#__codelineno-0-5339">5339</a></span>
<span class="normal"><a href="#__codelineno-0-5340">5340</a></span>
<span class="normal"><a href="#__codelineno-0-5341">5341</a></span>
<span class="normal"><a href="#__codelineno-0-5342">5342</a></span>
<span class="normal"><a href="#__codelineno-0-5343">5343</a></span>
<span class="normal"><a href="#__codelineno-0-5344">5344</a></span>
<span class="normal"><a href="#__codelineno-0-5345">5345</a></span>
<span class="normal"><a href="#__codelineno-0-5346">5346</a></span>
<span class="normal"><a href="#__codelineno-0-5347">5347</a></span>
<span class="normal"><a href="#__codelineno-0-5348">5348</a></span>
<span class="normal"><a href="#__codelineno-0-5349">5349</a></span>
<span class="normal"><a href="#__codelineno-0-5350">5350</a></span>
<span class="normal"><a href="#__codelineno-0-5351">5351</a></span>
<span class="normal"><a href="#__codelineno-0-5352">5352</a></span>
<span class="normal"><a href="#__codelineno-0-5353">5353</a></span>
<span class="normal"><a href="#__codelineno-0-5354">5354</a></span>
<span class="normal"><a href="#__codelineno-0-5355">5355</a></span>
<span class="normal"><a href="#__codelineno-0-5356">5356</a></span>
<span class="normal"><a href="#__codelineno-0-5357">5357</a></span>
<span class="normal"><a href="#__codelineno-0-5358">5358</a></span>
<span class="normal"><a href="#__codelineno-0-5359">5359</a></span>
<span class="normal"><a href="#__codelineno-0-5360">5360</a></span>
<span class="normal"><a href="#__codelineno-0-5361">5361</a></span>
<span class="normal"><a href="#__codelineno-0-5362">5362</a></span>
<span class="normal"><a href="#__codelineno-0-5363">5363</a></span>
<span class="normal"><a href="#__codelineno-0-5364">5364</a></span>
<span class="normal"><a href="#__codelineno-0-5365">5365</a></span>
<span class="normal"><a href="#__codelineno-0-5366">5366</a></span>
<span class="normal"><a href="#__codelineno-0-5367">5367</a></span>
<span class="normal"><a href="#__codelineno-0-5368">5368</a></span>
<span class="normal"><a href="#__codelineno-0-5369">5369</a></span>
<span class="normal"><a href="#__codelineno-0-5370">5370</a></span>
<span class="normal"><a href="#__codelineno-0-5371">5371</a></span>
<span class="normal"><a href="#__codelineno-0-5372">5372</a></span>
<span class="normal"><a href="#__codelineno-0-5373">5373</a></span>
<span class="normal"><a href="#__codelineno-0-5374">5374</a></span>
<span class="normal"><a href="#__codelineno-0-5375">5375</a></span>
<span class="normal"><a href="#__codelineno-0-5376">5376</a></span>
<span class="normal"><a href="#__codelineno-0-5377">5377</a></span>
<span class="normal"><a href="#__codelineno-0-5378">5378</a></span>
<span class="normal"><a href="#__codelineno-0-5379">5379</a></span>
<span class="normal"><a href="#__codelineno-0-5380">5380</a></span>
<span class="normal"><a href="#__codelineno-0-5381">5381</a></span>
<span class="normal"><a href="#__codelineno-0-5382">5382</a></span>
<span class="normal"><a href="#__codelineno-0-5383">5383</a></span>
<span class="normal"><a href="#__codelineno-0-5384">5384</a></span>
<span class="normal"><a href="#__codelineno-0-5385">5385</a></span>
<span class="normal"><a href="#__codelineno-0-5386">5386</a></span>
<span class="normal"><a href="#__codelineno-0-5387">5387</a></span>
<span class="normal"><a href="#__codelineno-0-5388">5388</a></span>
<span class="normal"><a href="#__codelineno-0-5389">5389</a></span>
<span class="normal"><a href="#__codelineno-0-5390">5390</a></span>
<span class="normal"><a href="#__codelineno-0-5391">5391</a></span>
<span class="normal"><a href="#__codelineno-0-5392">5392</a></span>
<span class="normal"><a href="#__codelineno-0-5393">5393</a></span>
<span class="normal"><a href="#__codelineno-0-5394">5394</a></span>
<span class="normal"><a href="#__codelineno-0-5395">5395</a></span>
<span class="normal"><a href="#__codelineno-0-5396">5396</a></span>
<span class="normal"><a href="#__codelineno-0-5397">5397</a></span>
<span class="normal"><a href="#__codelineno-0-5398">5398</a></span>
<span class="normal"><a href="#__codelineno-0-5399">5399</a></span>
<span class="normal"><a href="#__codelineno-0-5400">5400</a></span>
<span class="normal"><a href="#__codelineno-0-5401">5401</a></span>
<span class="normal"><a href="#__codelineno-0-5402">5402</a></span>
<span class="normal"><a href="#__codelineno-0-5403">5403</a></span>
<span class="normal"><a href="#__codelineno-0-5404">5404</a></span>
<span class="normal"><a href="#__codelineno-0-5405">5405</a></span>
<span class="normal"><a href="#__codelineno-0-5406">5406</a></span>
<span class="normal"><a href="#__codelineno-0-5407">5407</a></span>
<span class="normal"><a href="#__codelineno-0-5408">5408</a></span>
<span class="normal"><a href="#__codelineno-0-5409">5409</a></span>
<span class="normal"><a href="#__codelineno-0-5410">5410</a></span>
<span class="normal"><a href="#__codelineno-0-5411">5411</a></span>
<span class="normal"><a href="#__codelineno-0-5412">5412</a></span>
<span class="normal"><a href="#__codelineno-0-5413">5413</a></span>
<span class="normal"><a href="#__codelineno-0-5414">5414</a></span>
<span class="normal"><a href="#__codelineno-0-5415">5415</a></span>
<span class="normal"><a href="#__codelineno-0-5416">5416</a></span>
<span class="normal"><a href="#__codelineno-0-5417">5417</a></span>
<span class="normal"><a href="#__codelineno-0-5418">5418</a></span>
<span class="normal"><a href="#__codelineno-0-5419">5419</a></span>
<span class="normal"><a href="#__codelineno-0-5420">5420</a></span>
<span class="normal"><a href="#__codelineno-0-5421">5421</a></span>
<span class="normal"><a href="#__codelineno-0-5422">5422</a></span>
<span class="normal"><a href="#__codelineno-0-5423">5423</a></span>
<span class="normal"><a href="#__codelineno-0-5424">5424</a></span>
<span class="normal"><a href="#__codelineno-0-5425">5425</a></span>
<span class="normal"><a href="#__codelineno-0-5426">5426</a></span>
<span class="normal"><a href="#__codelineno-0-5427">5427</a></span>
<span class="normal"><a href="#__codelineno-0-5428">5428</a></span>
<span class="normal"><a href="#__codelineno-0-5429">5429</a></span>
<span class="normal"><a href="#__codelineno-0-5430">5430</a></span>
<span class="normal"><a href="#__codelineno-0-5431">5431</a></span>
<span class="normal"><a href="#__codelineno-0-5432">5432</a></span>
<span class="normal"><a href="#__codelineno-0-5433">5433</a></span>
<span class="normal"><a href="#__codelineno-0-5434">5434</a></span>
<span class="normal"><a href="#__codelineno-0-5435">5435</a></span>
<span class="normal"><a href="#__codelineno-0-5436">5436</a></span>
<span class="normal"><a href="#__codelineno-0-5437">5437</a></span>
<span class="normal"><a href="#__codelineno-0-5438">5438</a></span>
<span class="normal"><a href="#__codelineno-0-5439">5439</a></span>
<span class="normal"><a href="#__codelineno-0-5440">5440</a></span>
<span class="normal"><a href="#__codelineno-0-5441">5441</a></span>
<span class="normal"><a href="#__codelineno-0-5442">5442</a></span>
<span class="normal"><a href="#__codelineno-0-5443">5443</a></span>
<span class="normal"><a href="#__codelineno-0-5444">5444</a></span>
<span class="normal"><a href="#__codelineno-0-5445">5445</a></span>
<span class="normal"><a href="#__codelineno-0-5446">5446</a></span>
<span class="normal"><a href="#__codelineno-0-5447">5447</a></span>
<span class="normal"><a href="#__codelineno-0-5448">5448</a></span>
<span class="normal"><a href="#__codelineno-0-5449">5449</a></span>
<span class="normal"><a href="#__codelineno-0-5450">5450</a></span>
<span class="normal"><a href="#__codelineno-0-5451">5451</a></span>
<span class="normal"><a href="#__codelineno-0-5452">5452</a></span>
<span class="normal"><a href="#__codelineno-0-5453">5453</a></span>
<span class="normal"><a href="#__codelineno-0-5454">5454</a></span>
<span class="normal"><a href="#__codelineno-0-5455">5455</a></span>
<span class="normal"><a href="#__codelineno-0-5456">5456</a></span>
<span class="normal"><a href="#__codelineno-0-5457">5457</a></span>
<span class="normal"><a href="#__codelineno-0-5458">5458</a></span>
<span class="normal"><a href="#__codelineno-0-5459">5459</a></span>
<span class="normal"><a href="#__codelineno-0-5460">5460</a></span>
<span class="normal"><a href="#__codelineno-0-5461">5461</a></span>
<span class="normal"><a href="#__codelineno-0-5462">5462</a></span>
<span class="normal"><a href="#__codelineno-0-5463">5463</a></span>
<span class="normal"><a href="#__codelineno-0-5464">5464</a></span>
<span class="normal"><a href="#__codelineno-0-5465">5465</a></span>
<span class="normal"><a href="#__codelineno-0-5466">5466</a></span>
<span class="normal"><a href="#__codelineno-0-5467">5467</a></span>
<span class="normal"><a href="#__codelineno-0-5468">5468</a></span>
<span class="normal"><a href="#__codelineno-0-5469">5469</a></span>
<span class="normal"><a href="#__codelineno-0-5470">5470</a></span>
<span class="normal"><a href="#__codelineno-0-5471">5471</a></span>
<span class="normal"><a href="#__codelineno-0-5472">5472</a></span>
<span class="normal"><a href="#__codelineno-0-5473">5473</a></span>
<span class="normal"><a href="#__codelineno-0-5474">5474</a></span>
<span class="normal"><a href="#__codelineno-0-5475">5475</a></span>
<span class="normal"><a href="#__codelineno-0-5476">5476</a></span>
<span class="normal"><a href="#__codelineno-0-5477">5477</a></span>
<span class="normal"><a href="#__codelineno-0-5478">5478</a></span>
<span class="normal"><a href="#__codelineno-0-5479">5479</a></span>
<span class="normal"><a href="#__codelineno-0-5480">5480</a></span>
<span class="normal"><a href="#__codelineno-0-5481">5481</a></span>
<span class="normal"><a href="#__codelineno-0-5482">5482</a></span>
<span class="normal"><a href="#__codelineno-0-5483">5483</a></span>
<span class="normal"><a href="#__codelineno-0-5484">5484</a></span>
<span class="normal"><a href="#__codelineno-0-5485">5485</a></span>
<span class="normal"><a href="#__codelineno-0-5486">5486</a></span>
<span class="normal"><a href="#__codelineno-0-5487">5487</a></span>
<span class="normal"><a href="#__codelineno-0-5488">5488</a></span>
<span class="normal"><a href="#__codelineno-0-5489">5489</a></span>
<span class="normal"><a href="#__codelineno-0-5490">5490</a></span>
<span class="normal"><a href="#__codelineno-0-5491">5491</a></span>
<span class="normal"><a href="#__codelineno-0-5492">5492</a></span>
<span class="normal"><a href="#__codelineno-0-5493">5493</a></span>
<span class="normal"><a href="#__codelineno-0-5494">5494</a></span>
<span class="normal"><a href="#__codelineno-0-5495">5495</a></span>
<span class="normal"><a href="#__codelineno-0-5496">5496</a></span>
<span class="normal"><a href="#__codelineno-0-5497">5497</a></span>
<span class="normal"><a href="#__codelineno-0-5498">5498</a></span>
<span class="normal"><a href="#__codelineno-0-5499">5499</a></span>
<span class="normal"><a href="#__codelineno-0-5500">5500</a></span>
<span class="normal"><a href="#__codelineno-0-5501">5501</a></span>
<span class="normal"><a href="#__codelineno-0-5502">5502</a></span>
<span class="normal"><a href="#__codelineno-0-5503">5503</a></span>
<span class="normal"><a href="#__codelineno-0-5504">5504</a></span>
<span class="normal"><a href="#__codelineno-0-5505">5505</a></span>
<span class="normal"><a href="#__codelineno-0-5506">5506</a></span>
<span class="normal"><a href="#__codelineno-0-5507">5507</a></span>
<span class="normal"><a href="#__codelineno-0-5508">5508</a></span>
<span class="normal"><a href="#__codelineno-0-5509">5509</a></span>
<span class="normal"><a href="#__codelineno-0-5510">5510</a></span>
<span class="normal"><a href="#__codelineno-0-5511">5511</a></span>
<span class="normal"><a href="#__codelineno-0-5512">5512</a></span>
<span class="normal"><a href="#__codelineno-0-5513">5513</a></span>
<span class="normal"><a href="#__codelineno-0-5514">5514</a></span>
<span class="normal"><a href="#__codelineno-0-5515">5515</a></span>
<span class="normal"><a href="#__codelineno-0-5516">5516</a></span>
<span class="normal"><a href="#__codelineno-0-5517">5517</a></span>
<span class="normal"><a href="#__codelineno-0-5518">5518</a></span>
<span class="normal"><a href="#__codelineno-0-5519">5519</a></span>
<span class="normal"><a href="#__codelineno-0-5520">5520</a></span>
<span class="normal"><a href="#__codelineno-0-5521">5521</a></span>
<span class="normal"><a href="#__codelineno-0-5522">5522</a></span>
<span class="normal"><a href="#__codelineno-0-5523">5523</a></span>
<span class="normal"><a href="#__codelineno-0-5524">5524</a></span>
<span class="normal"><a href="#__codelineno-0-5525">5525</a></span>
<span class="normal"><a href="#__codelineno-0-5526">5526</a></span>
<span class="normal"><a href="#__codelineno-0-5527">5527</a></span>
<span class="normal"><a href="#__codelineno-0-5528">5528</a></span>
<span class="normal"><a href="#__codelineno-0-5529">5529</a></span>
<span class="normal"><a href="#__codelineno-0-5530">5530</a></span>
<span class="normal"><a href="#__codelineno-0-5531">5531</a></span>
<span class="normal"><a href="#__codelineno-0-5532">5532</a></span>
<span class="normal"><a href="#__codelineno-0-5533">5533</a></span>
<span class="normal"><a href="#__codelineno-0-5534">5534</a></span>
<span class="normal"><a href="#__codelineno-0-5535">5535</a></span>
<span class="normal"><a href="#__codelineno-0-5536">5536</a></span>
<span class="normal"><a href="#__codelineno-0-5537">5537</a></span>
<span class="normal"><a href="#__codelineno-0-5538">5538</a></span>
<span class="normal"><a href="#__codelineno-0-5539">5539</a></span>
<span class="normal"><a href="#__codelineno-0-5540">5540</a></span>
<span class="normal"><a href="#__codelineno-0-5541">5541</a></span>
<span class="normal"><a href="#__codelineno-0-5542">5542</a></span>
<span class="normal"><a href="#__codelineno-0-5543">5543</a></span>
<span class="normal"><a href="#__codelineno-0-5544">5544</a></span>
<span class="normal"><a href="#__codelineno-0-5545">5545</a></span>
<span class="normal"><a href="#__codelineno-0-5546">5546</a></span>
<span class="normal"><a href="#__codelineno-0-5547">5547</a></span>
<span class="normal"><a href="#__codelineno-0-5548">5548</a></span>
<span class="normal"><a href="#__codelineno-0-5549">5549</a></span>
<span class="normal"><a href="#__codelineno-0-5550">5550</a></span>
<span class="normal"><a href="#__codelineno-0-5551">5551</a></span>
<span class="normal"><a href="#__codelineno-0-5552">5552</a></span>
<span class="normal"><a href="#__codelineno-0-5553">5553</a></span>
<span class="normal"><a href="#__codelineno-0-5554">5554</a></span>
<span class="normal"><a href="#__codelineno-0-5555">5555</a></span>
<span class="normal"><a href="#__codelineno-0-5556">5556</a></span>
<span class="normal"><a href="#__codelineno-0-5557">5557</a></span>
<span class="normal"><a href="#__codelineno-0-5558">5558</a></span>
<span class="normal"><a href="#__codelineno-0-5559">5559</a></span>
<span class="normal"><a href="#__codelineno-0-5560">5560</a></span>
<span class="normal"><a href="#__codelineno-0-5561">5561</a></span>
<span class="normal"><a href="#__codelineno-0-5562">5562</a></span>
<span class="normal"><a href="#__codelineno-0-5563">5563</a></span>
<span class="normal"><a href="#__codelineno-0-5564">5564</a></span>
<span class="normal"><a href="#__codelineno-0-5565">5565</a></span>
<span class="normal"><a href="#__codelineno-0-5566">5566</a></span>
<span class="normal"><a href="#__codelineno-0-5567">5567</a></span>
<span class="normal"><a href="#__codelineno-0-5568">5568</a></span>
<span class="normal"><a href="#__codelineno-0-5569">5569</a></span>
<span class="normal"><a href="#__codelineno-0-5570">5570</a></span>
<span class="normal"><a href="#__codelineno-0-5571">5571</a></span>
<span class="normal"><a href="#__codelineno-0-5572">5572</a></span>
<span class="normal"><a href="#__codelineno-0-5573">5573</a></span>
<span class="normal"><a href="#__codelineno-0-5574">5574</a></span>
<span class="normal"><a href="#__codelineno-0-5575">5575</a></span>
<span class="normal"><a href="#__codelineno-0-5576">5576</a></span>
<span class="normal"><a href="#__codelineno-0-5577">5577</a></span>
<span class="normal"><a href="#__codelineno-0-5578">5578</a></span>
<span class="normal"><a href="#__codelineno-0-5579">5579</a></span>
<span class="normal"><a href="#__codelineno-0-5580">5580</a></span>
<span class="normal"><a href="#__codelineno-0-5581">5581</a></span>
<span class="normal"><a href="#__codelineno-0-5582">5582</a></span>
<span class="normal"><a href="#__codelineno-0-5583">5583</a></span>
<span class="normal"><a href="#__codelineno-0-5584">5584</a></span>
<span class="normal"><a href="#__codelineno-0-5585">5585</a></span>
<span class="normal"><a href="#__codelineno-0-5586">5586</a></span>
<span class="normal"><a href="#__codelineno-0-5587">5587</a></span>
<span class="normal"><a href="#__codelineno-0-5588">5588</a></span>
<span class="normal"><a href="#__codelineno-0-5589">5589</a></span>
<span class="normal"><a href="#__codelineno-0-5590">5590</a></span>
<span class="normal"><a href="#__codelineno-0-5591">5591</a></span>
<span class="normal"><a href="#__codelineno-0-5592">5592</a></span>
<span class="normal"><a href="#__codelineno-0-5593">5593</a></span>
<span class="normal"><a href="#__codelineno-0-5594">5594</a></span>
<span class="normal"><a href="#__codelineno-0-5595">5595</a></span>
<span class="normal"><a href="#__codelineno-0-5596">5596</a></span>
<span class="normal"><a href="#__codelineno-0-5597">5597</a></span>
<span class="normal"><a href="#__codelineno-0-5598">5598</a></span>
<span class="normal"><a href="#__codelineno-0-5599">5599</a></span>
<span class="normal"><a href="#__codelineno-0-5600">5600</a></span>
<span class="normal"><a href="#__codelineno-0-5601">5601</a></span>
<span class="normal"><a href="#__codelineno-0-5602">5602</a></span>
<span class="normal"><a href="#__codelineno-0-5603">5603</a></span>
<span class="normal"><a href="#__codelineno-0-5604">5604</a></span>
<span class="normal"><a href="#__codelineno-0-5605">5605</a></span>
<span class="normal"><a href="#__codelineno-0-5606">5606</a></span>
<span class="normal"><a href="#__codelineno-0-5607">5607</a></span>
<span class="normal"><a href="#__codelineno-0-5608">5608</a></span>
<span class="normal"><a href="#__codelineno-0-5609">5609</a></span>
<span class="normal"><a href="#__codelineno-0-5610">5610</a></span>
<span class="normal"><a href="#__codelineno-0-5611">5611</a></span>
<span class="normal"><a href="#__codelineno-0-5612">5612</a></span>
<span class="normal"><a href="#__codelineno-0-5613">5613</a></span>
<span class="normal"><a href="#__codelineno-0-5614">5614</a></span>
<span class="normal"><a href="#__codelineno-0-5615">5615</a></span>
<span class="normal"><a href="#__codelineno-0-5616">5616</a></span>
<span class="normal"><a href="#__codelineno-0-5617">5617</a></span>
<span class="normal"><a href="#__codelineno-0-5618">5618</a></span>
<span class="normal"><a href="#__codelineno-0-5619">5619</a></span>
<span class="normal"><a href="#__codelineno-0-5620">5620</a></span>
<span class="normal"><a href="#__codelineno-0-5621">5621</a></span>
<span class="normal"><a href="#__codelineno-0-5622">5622</a></span>
<span class="normal"><a href="#__codelineno-0-5623">5623</a></span>
<span class="normal"><a href="#__codelineno-0-5624">5624</a></span>
<span class="normal"><a href="#__codelineno-0-5625">5625</a></span>
<span class="normal"><a href="#__codelineno-0-5626">5626</a></span>
<span class="normal"><a href="#__codelineno-0-5627">5627</a></span>
<span class="normal"><a href="#__codelineno-0-5628">5628</a></span>
<span class="normal"><a href="#__codelineno-0-5629">5629</a></span>
<span class="normal"><a href="#__codelineno-0-5630">5630</a></span>
<span class="normal"><a href="#__codelineno-0-5631">5631</a></span>
<span class="normal"><a href="#__codelineno-0-5632">5632</a></span>
<span class="normal"><a href="#__codelineno-0-5633">5633</a></span>
<span class="normal"><a href="#__codelineno-0-5634">5634</a></span>
<span class="normal"><a href="#__codelineno-0-5635">5635</a></span>
<span class="normal"><a href="#__codelineno-0-5636">5636</a></span>
<span class="normal"><a href="#__codelineno-0-5637">5637</a></span>
<span class="normal"><a href="#__codelineno-0-5638">5638</a></span>
<span class="normal"><a href="#__codelineno-0-5639">5639</a></span>
<span class="normal"><a href="#__codelineno-0-5640">5640</a></span>
<span class="normal"><a href="#__codelineno-0-5641">5641</a></span>
<span class="normal"><a href="#__codelineno-0-5642">5642</a></span>
<span class="normal"><a href="#__codelineno-0-5643">5643</a></span>
<span class="normal"><a href="#__codelineno-0-5644">5644</a></span>
<span class="normal"><a href="#__codelineno-0-5645">5645</a></span>
<span class="normal"><a href="#__codelineno-0-5646">5646</a></span>
<span class="normal"><a href="#__codelineno-0-5647">5647</a></span>
<span class="normal"><a href="#__codelineno-0-5648">5648</a></span>
<span class="normal"><a href="#__codelineno-0-5649">5649</a></span>
<span class="normal"><a href="#__codelineno-0-5650">5650</a></span>
<span class="normal"><a href="#__codelineno-0-5651">5651</a></span>
<span class="normal"><a href="#__codelineno-0-5652">5652</a></span>
<span class="normal"><a href="#__codelineno-0-5653">5653</a></span>
<span class="normal"><a href="#__codelineno-0-5654">5654</a></span>
<span class="normal"><a href="#__codelineno-0-5655">5655</a></span>
<span class="normal"><a href="#__codelineno-0-5656">5656</a></span>
<span class="normal"><a href="#__codelineno-0-5657">5657</a></span>
<span class="normal"><a href="#__codelineno-0-5658">5658</a></span>
<span class="normal"><a href="#__codelineno-0-5659">5659</a></span>
<span class="normal"><a href="#__codelineno-0-5660">5660</a></span>
<span class="normal"><a href="#__codelineno-0-5661">5661</a></span>
<span class="normal"><a href="#__codelineno-0-5662">5662</a></span>
<span class="normal"><a href="#__codelineno-0-5663">5663</a></span>
<span class="normal"><a href="#__codelineno-0-5664">5664</a></span>
<span class="normal"><a href="#__codelineno-0-5665">5665</a></span>
<span class="normal"><a href="#__codelineno-0-5666">5666</a></span>
<span class="normal"><a href="#__codelineno-0-5667">5667</a></span>
<span class="normal"><a href="#__codelineno-0-5668">5668</a></span>
<span class="normal"><a href="#__codelineno-0-5669">5669</a></span>
<span class="normal"><a href="#__codelineno-0-5670">5670</a></span>
<span class="normal"><a href="#__codelineno-0-5671">5671</a></span>
<span class="normal"><a href="#__codelineno-0-5672">5672</a></span>
<span class="normal"><a href="#__codelineno-0-5673">5673</a></span>
<span class="normal"><a href="#__codelineno-0-5674">5674</a></span>
<span class="normal"><a href="#__codelineno-0-5675">5675</a></span>
<span class="normal"><a href="#__codelineno-0-5676">5676</a></span>
<span class="normal"><a href="#__codelineno-0-5677">5677</a></span>
<span class="normal"><a href="#__codelineno-0-5678">5678</a></span>
<span class="normal"><a href="#__codelineno-0-5679">5679</a></span>
<span class="normal"><a href="#__codelineno-0-5680">5680</a></span>
<span class="normal"><a href="#__codelineno-0-5681">5681</a></span>
<span class="normal"><a href="#__codelineno-0-5682">5682</a></span>
<span class="normal"><a href="#__codelineno-0-5683">5683</a></span>
<span class="normal"><a href="#__codelineno-0-5684">5684</a></span>
<span class="normal"><a href="#__codelineno-0-5685">5685</a></span>
<span class="normal"><a href="#__codelineno-0-5686">5686</a></span>
<span class="normal"><a href="#__codelineno-0-5687">5687</a></span>
<span class="normal"><a href="#__codelineno-0-5688">5688</a></span>
<span class="normal"><a href="#__codelineno-0-5689">5689</a></span>
<span class="normal"><a href="#__codelineno-0-5690">5690</a></span>
<span class="normal"><a href="#__codelineno-0-5691">5691</a></span>
<span class="normal"><a href="#__codelineno-0-5692">5692</a></span>
<span class="normal"><a href="#__codelineno-0-5693">5693</a></span>
<span class="normal"><a href="#__codelineno-0-5694">5694</a></span>
<span class="normal"><a href="#__codelineno-0-5695">5695</a></span>
<span class="normal"><a href="#__codelineno-0-5696">5696</a></span>
<span class="normal"><a href="#__codelineno-0-5697">5697</a></span>
<span class="normal"><a href="#__codelineno-0-5698">5698</a></span>
<span class="normal"><a href="#__codelineno-0-5699">5699</a></span>
<span class="normal"><a href="#__codelineno-0-5700">5700</a></span>
<span class="normal"><a href="#__codelineno-0-5701">5701</a></span>
<span class="normal"><a href="#__codelineno-0-5702">5702</a></span>
<span class="normal"><a href="#__codelineno-0-5703">5703</a></span>
<span class="normal"><a href="#__codelineno-0-5704">5704</a></span>
<span class="normal"><a href="#__codelineno-0-5705">5705</a></span>
<span class="normal"><a href="#__codelineno-0-5706">5706</a></span>
<span class="normal"><a href="#__codelineno-0-5707">5707</a></span>
<span class="normal"><a href="#__codelineno-0-5708">5708</a></span>
<span class="normal"><a href="#__codelineno-0-5709">5709</a></span>
<span class="normal"><a href="#__codelineno-0-5710">5710</a></span>
<span class="normal"><a href="#__codelineno-0-5711">5711</a></span>
<span class="normal"><a href="#__codelineno-0-5712">5712</a></span>
<span class="normal"><a href="#__codelineno-0-5713">5713</a></span>
<span class="normal"><a href="#__codelineno-0-5714">5714</a></span>
<span class="normal"><a href="#__codelineno-0-5715">5715</a></span>
<span class="normal"><a href="#__codelineno-0-5716">5716</a></span>
<span class="normal"><a href="#__codelineno-0-5717">5717</a></span>
<span class="normal"><a href="#__codelineno-0-5718">5718</a></span>
<span class="normal"><a href="#__codelineno-0-5719">5719</a></span>
<span class="normal"><a href="#__codelineno-0-5720">5720</a></span>
<span class="normal"><a href="#__codelineno-0-5721">5721</a></span>
<span class="normal"><a href="#__codelineno-0-5722">5722</a></span>
<span class="normal"><a href="#__codelineno-0-5723">5723</a></span>
<span class="normal"><a href="#__codelineno-0-5724">5724</a></span>
<span class="normal"><a href="#__codelineno-0-5725">5725</a></span>
<span class="normal"><a href="#__codelineno-0-5726">5726</a></span>
<span class="normal"><a href="#__codelineno-0-5727">5727</a></span>
<span class="normal"><a href="#__codelineno-0-5728">5728</a></span>
<span class="normal"><a href="#__codelineno-0-5729">5729</a></span>
<span class="normal"><a href="#__codelineno-0-5730">5730</a></span>
<span class="normal"><a href="#__codelineno-0-5731">5731</a></span>
<span class="normal"><a href="#__codelineno-0-5732">5732</a></span>
<span class="normal"><a href="#__codelineno-0-5733">5733</a></span>
<span class="normal"><a href="#__codelineno-0-5734">5734</a></span>
<span class="normal"><a href="#__codelineno-0-5735">5735</a></span>
<span class="normal"><a href="#__codelineno-0-5736">5736</a></span>
<span class="normal"><a href="#__codelineno-0-5737">5737</a></span>
<span class="normal"><a href="#__codelineno-0-5738">5738</a></span>
<span class="normal"><a href="#__codelineno-0-5739">5739</a></span>
<span class="normal"><a href="#__codelineno-0-5740">5740</a></span>
<span class="normal"><a href="#__codelineno-0-5741">5741</a></span>
<span class="normal"><a href="#__codelineno-0-5742">5742</a></span>
<span class="normal"><a href="#__codelineno-0-5743">5743</a></span>
<span class="normal"><a href="#__codelineno-0-5744">5744</a></span>
<span class="normal"><a href="#__codelineno-0-5745">5745</a></span>
<span class="normal"><a href="#__codelineno-0-5746">5746</a></span>
<span class="normal"><a href="#__codelineno-0-5747">5747</a></span>
<span class="normal"><a href="#__codelineno-0-5748">5748</a></span>
<span class="normal"><a href="#__codelineno-0-5749">5749</a></span>
<span class="normal"><a href="#__codelineno-0-5750">5750</a></span>
<span class="normal"><a href="#__codelineno-0-5751">5751</a></span>
<span class="normal"><a href="#__codelineno-0-5752">5752</a></span>
<span class="normal"><a href="#__codelineno-0-5753">5753</a></span>
<span class="normal"><a href="#__codelineno-0-5754">5754</a></span>
<span class="normal"><a href="#__codelineno-0-5755">5755</a></span>
<span class="normal"><a href="#__codelineno-0-5756">5756</a></span>
<span class="normal"><a href="#__codelineno-0-5757">5757</a></span>
<span class="normal"><a href="#__codelineno-0-5758">5758</a></span>
<span class="normal"><a href="#__codelineno-0-5759">5759</a></span>
<span class="normal"><a href="#__codelineno-0-5760">5760</a></span>
<span class="normal"><a href="#__codelineno-0-5761">5761</a></span>
<span class="normal"><a href="#__codelineno-0-5762">5762</a></span>
<span class="normal"><a href="#__codelineno-0-5763">5763</a></span>
<span class="normal"><a href="#__codelineno-0-5764">5764</a></span>
<span class="normal"><a href="#__codelineno-0-5765">5765</a></span>
<span class="normal"><a href="#__codelineno-0-5766">5766</a></span>
<span class="normal"><a href="#__codelineno-0-5767">5767</a></span>
<span class="normal"><a href="#__codelineno-0-5768">5768</a></span>
<span class="normal"><a href="#__codelineno-0-5769">5769</a></span>
<span class="normal"><a href="#__codelineno-0-5770">5770</a></span>
<span class="normal"><a href="#__codelineno-0-5771">5771</a></span>
<span class="normal"><a href="#__codelineno-0-5772">5772</a></span>
<span class="normal"><a href="#__codelineno-0-5773">5773</a></span>
<span class="normal"><a href="#__codelineno-0-5774">5774</a></span>
<span class="normal"><a href="#__codelineno-0-5775">5775</a></span>
<span class="normal"><a href="#__codelineno-0-5776">5776</a></span>
<span class="normal"><a href="#__codelineno-0-5777">5777</a></span>
<span class="normal"><a href="#__codelineno-0-5778">5778</a></span>
<span class="normal"><a href="#__codelineno-0-5779">5779</a></span>
<span class="normal"><a href="#__codelineno-0-5780">5780</a></span>
<span class="normal"><a href="#__codelineno-0-5781">5781</a></span>
<span class="normal"><a href="#__codelineno-0-5782">5782</a></span>
<span class="normal"><a href="#__codelineno-0-5783">5783</a></span>
<span class="normal"><a href="#__codelineno-0-5784">5784</a></span>
<span class="normal"><a href="#__codelineno-0-5785">5785</a></span>
<span class="normal"><a href="#__codelineno-0-5786">5786</a></span>
<span class="normal"><a href="#__codelineno-0-5787">5787</a></span>
<span class="normal"><a href="#__codelineno-0-5788">5788</a></span>
<span class="normal"><a href="#__codelineno-0-5789">5789</a></span>
<span class="normal"><a href="#__codelineno-0-5790">5790</a></span>
<span class="normal"><a href="#__codelineno-0-5791">5791</a></span>
<span class="normal"><a href="#__codelineno-0-5792">5792</a></span>
<span class="normal"><a href="#__codelineno-0-5793">5793</a></span>
<span class="normal"><a href="#__codelineno-0-5794">5794</a></span>
<span class="normal"><a href="#__codelineno-0-5795">5795</a></span>
<span class="normal"><a href="#__codelineno-0-5796">5796</a></span>
<span class="normal"><a href="#__codelineno-0-5797">5797</a></span>
<span class="normal"><a href="#__codelineno-0-5798">5798</a></span>
<span class="normal"><a href="#__codelineno-0-5799">5799</a></span>
<span class="normal"><a href="#__codelineno-0-5800">5800</a></span>
<span class="normal"><a href="#__codelineno-0-5801">5801</a></span>
<span class="normal"><a href="#__codelineno-0-5802">5802</a></span>
<span class="normal"><a href="#__codelineno-0-5803">5803</a></span>
<span class="normal"><a href="#__codelineno-0-5804">5804</a></span>
<span class="normal"><a href="#__codelineno-0-5805">5805</a></span>
<span class="normal"><a href="#__codelineno-0-5806">5806</a></span>
<span class="normal"><a href="#__codelineno-0-5807">5807</a></span>
<span class="normal"><a href="#__codelineno-0-5808">5808</a></span>
<span class="normal"><a href="#__codelineno-0-5809">5809</a></span>
<span class="normal"><a href="#__codelineno-0-5810">5810</a></span>
<span class="normal"><a href="#__codelineno-0-5811">5811</a></span>
<span class="normal"><a href="#__codelineno-0-5812">5812</a></span>
<span class="normal"><a href="#__codelineno-0-5813">5813</a></span>
<span class="normal"><a href="#__codelineno-0-5814">5814</a></span>
<span class="normal"><a href="#__codelineno-0-5815">5815</a></span>
<span class="normal"><a href="#__codelineno-0-5816">5816</a></span>
<span class="normal"><a href="#__codelineno-0-5817">5817</a></span>
<span class="normal"><a href="#__codelineno-0-5818">5818</a></span>
<span class="normal"><a href="#__codelineno-0-5819">5819</a></span>
<span class="normal"><a href="#__codelineno-0-5820">5820</a></span>
<span class="normal"><a href="#__codelineno-0-5821">5821</a></span>
<span class="normal"><a href="#__codelineno-0-5822">5822</a></span>
<span class="normal"><a href="#__codelineno-0-5823">5823</a></span>
<span class="normal"><a href="#__codelineno-0-5824">5824</a></span>
<span class="normal"><a href="#__codelineno-0-5825">5825</a></span>
<span class="normal"><a href="#__codelineno-0-5826">5826</a></span>
<span class="normal"><a href="#__codelineno-0-5827">5827</a></span>
<span class="normal"><a href="#__codelineno-0-5828">5828</a></span>
<span class="normal"><a href="#__codelineno-0-5829">5829</a></span>
<span class="normal"><a href="#__codelineno-0-5830">5830</a></span>
<span class="normal"><a href="#__codelineno-0-5831">5831</a></span>
<span class="normal"><a href="#__codelineno-0-5832">5832</a></span>
<span class="normal"><a href="#__codelineno-0-5833">5833</a></span>
<span class="normal"><a href="#__codelineno-0-5834">5834</a></span>
<span class="normal"><a href="#__codelineno-0-5835">5835</a></span>
<span class="normal"><a href="#__codelineno-0-5836">5836</a></span>
<span class="normal"><a href="#__codelineno-0-5837">5837</a></span>
<span class="normal"><a href="#__codelineno-0-5838">5838</a></span>
<span class="normal"><a href="#__codelineno-0-5839">5839</a></span>
<span class="normal"><a href="#__codelineno-0-5840">5840</a></span>
<span class="normal"><a href="#__codelineno-0-5841">5841</a></span>
<span class="normal"><a href="#__codelineno-0-5842">5842</a></span>
<span class="normal"><a href="#__codelineno-0-5843">5843</a></span>
<span class="normal"><a href="#__codelineno-0-5844">5844</a></span>
<span class="normal"><a href="#__codelineno-0-5845">5845</a></span>
<span class="normal"><a href="#__codelineno-0-5846">5846</a></span>
<span class="normal"><a href="#__codelineno-0-5847">5847</a></span>
<span class="normal"><a href="#__codelineno-0-5848">5848</a></span>
<span class="normal"><a href="#__codelineno-0-5849">5849</a></span>
<span class="normal"><a href="#__codelineno-0-5850">5850</a></span>
<span class="normal"><a href="#__codelineno-0-5851">5851</a></span>
<span class="normal"><a href="#__codelineno-0-5852">5852</a></span>
<span class="normal"><a href="#__codelineno-0-5853">5853</a></span>
<span class="normal"><a href="#__codelineno-0-5854">5854</a></span>
<span class="normal"><a href="#__codelineno-0-5855">5855</a></span>
<span class="normal"><a href="#__codelineno-0-5856">5856</a></span>
<span class="normal"><a href="#__codelineno-0-5857">5857</a></span>
<span class="normal"><a href="#__codelineno-0-5858">5858</a></span>
<span class="normal"><a href="#__codelineno-0-5859">5859</a></span>
<span class="normal"><a href="#__codelineno-0-5860">5860</a></span>
<span class="normal"><a href="#__codelineno-0-5861">5861</a></span>
<span class="normal"><a href="#__codelineno-0-5862">5862</a></span>
<span class="normal"><a href="#__codelineno-0-5863">5863</a></span>
<span class="normal"><a href="#__codelineno-0-5864">5864</a></span>
<span class="normal"><a href="#__codelineno-0-5865">5865</a></span>
<span class="normal"><a href="#__codelineno-0-5866">5866</a></span>
<span class="normal"><a href="#__codelineno-0-5867">5867</a></span>
<span class="normal"><a href="#__codelineno-0-5868">5868</a></span>
<span class="normal"><a href="#__codelineno-0-5869">5869</a></span>
<span class="normal"><a href="#__codelineno-0-5870">5870</a></span>
<span class="normal"><a href="#__codelineno-0-5871">5871</a></span>
<span class="normal"><a href="#__codelineno-0-5872">5872</a></span>
<span class="normal"><a href="#__codelineno-0-5873">5873</a></span>
<span class="normal"><a href="#__codelineno-0-5874">5874</a></span>
<span class="normal"><a href="#__codelineno-0-5875">5875</a></span>
<span class="normal"><a href="#__codelineno-0-5876">5876</a></span>
<span class="normal"><a href="#__codelineno-0-5877">5877</a></span>
<span class="normal"><a href="#__codelineno-0-5878">5878</a></span>
<span class="normal"><a href="#__codelineno-0-5879">5879</a></span>
<span class="normal"><a href="#__codelineno-0-5880">5880</a></span>
<span class="normal"><a href="#__codelineno-0-5881">5881</a></span>
<span class="normal"><a href="#__codelineno-0-5882">5882</a></span>
<span class="normal"><a href="#__codelineno-0-5883">5883</a></span>
<span class="normal"><a href="#__codelineno-0-5884">5884</a></span>
<span class="normal"><a href="#__codelineno-0-5885">5885</a></span>
<span class="normal"><a href="#__codelineno-0-5886">5886</a></span>
<span class="normal"><a href="#__codelineno-0-5887">5887</a></span>
<span class="normal"><a href="#__codelineno-0-5888">5888</a></span>
<span class="normal"><a href="#__codelineno-0-5889">5889</a></span>
<span class="normal"><a href="#__codelineno-0-5890">5890</a></span>
<span class="normal"><a href="#__codelineno-0-5891">5891</a></span>
<span class="normal"><a href="#__codelineno-0-5892">5892</a></span>
<span class="normal"><a href="#__codelineno-0-5893">5893</a></span>
<span class="normal"><a href="#__codelineno-0-5894">5894</a></span>
<span class="normal"><a href="#__codelineno-0-5895">5895</a></span>
<span class="normal"><a href="#__codelineno-0-5896">5896</a></span>
<span class="normal"><a href="#__codelineno-0-5897">5897</a></span>
<span class="normal"><a href="#__codelineno-0-5898">5898</a></span>
<span class="normal"><a href="#__codelineno-0-5899">5899</a></span>
<span class="normal"><a href="#__codelineno-0-5900">5900</a></span>
<span class="normal"><a href="#__codelineno-0-5901">5901</a></span>
<span class="normal"><a href="#__codelineno-0-5902">5902</a></span>
<span class="normal"><a href="#__codelineno-0-5903">5903</a></span>
<span class="normal"><a href="#__codelineno-0-5904">5904</a></span>
<span class="normal"><a href="#__codelineno-0-5905">5905</a></span>
<span class="normal"><a href="#__codelineno-0-5906">5906</a></span>
<span class="normal"><a href="#__codelineno-0-5907">5907</a></span>
<span class="normal"><a href="#__codelineno-0-5908">5908</a></span>
<span class="normal"><a href="#__codelineno-0-5909">5909</a></span>
<span class="normal"><a href="#__codelineno-0-5910">5910</a></span>
<span class="normal"><a href="#__codelineno-0-5911">5911</a></span>
<span class="normal"><a href="#__codelineno-0-5912">5912</a></span>
<span class="normal"><a href="#__codelineno-0-5913">5913</a></span>
<span class="normal"><a href="#__codelineno-0-5914">5914</a></span>
<span class="normal"><a href="#__codelineno-0-5915">5915</a></span>
<span class="normal"><a href="#__codelineno-0-5916">5916</a></span>
<span class="normal"><a href="#__codelineno-0-5917">5917</a></span>
<span class="normal"><a href="#__codelineno-0-5918">5918</a></span>
<span class="normal"><a href="#__codelineno-0-5919">5919</a></span>
<span class="normal"><a href="#__codelineno-0-5920">5920</a></span>
<span class="normal"><a href="#__codelineno-0-5921">5921</a></span>
<span class="normal"><a href="#__codelineno-0-5922">5922</a></span>
<span class="normal"><a href="#__codelineno-0-5923">5923</a></span>
<span class="normal"><a href="#__codelineno-0-5924">5924</a></span>
<span class="normal"><a href="#__codelineno-0-5925">5925</a></span>
<span class="normal"><a href="#__codelineno-0-5926">5926</a></span>
<span class="normal"><a href="#__codelineno-0-5927">5927</a></span>
<span class="normal"><a href="#__codelineno-0-5928">5928</a></span>
<span class="normal"><a href="#__codelineno-0-5929">5929</a></span>
<span class="normal"><a href="#__codelineno-0-5930">5930</a></span>
<span class="normal"><a href="#__codelineno-0-5931">5931</a></span>
<span class="normal"><a href="#__codelineno-0-5932">5932</a></span>
<span class="normal"><a href="#__codelineno-0-5933">5933</a></span>
<span class="normal"><a href="#__codelineno-0-5934">5934</a></span>
<span class="normal"><a href="#__codelineno-0-5935">5935</a></span>
<span class="normal"><a href="#__codelineno-0-5936">5936</a></span>
<span class="normal"><a href="#__codelineno-0-5937">5937</a></span>
<span class="normal"><a href="#__codelineno-0-5938">5938</a></span>
<span class="normal"><a href="#__codelineno-0-5939">5939</a></span>
<span class="normal"><a href="#__codelineno-0-5940">5940</a></span>
<span class="normal"><a href="#__codelineno-0-5941">5941</a></span>
<span class="normal"><a href="#__codelineno-0-5942">5942</a></span>
<span class="normal"><a href="#__codelineno-0-5943">5943</a></span>
<span class="normal"><a href="#__codelineno-0-5944">5944</a></span>
<span class="normal"><a href="#__codelineno-0-5945">5945</a></span>
<span class="normal"><a href="#__codelineno-0-5946">5946</a></span>
<span class="normal"><a href="#__codelineno-0-5947">5947</a></span>
<span class="normal"><a href="#__codelineno-0-5948">5948</a></span>
<span class="normal"><a href="#__codelineno-0-5949">5949</a></span>
<span class="normal"><a href="#__codelineno-0-5950">5950</a></span>
<span class="normal"><a href="#__codelineno-0-5951">5951</a></span>
<span class="normal"><a href="#__codelineno-0-5952">5952</a></span>
<span class="normal"><a href="#__codelineno-0-5953">5953</a></span>
<span class="normal"><a href="#__codelineno-0-5954">5954</a></span>
<span class="normal"><a href="#__codelineno-0-5955">5955</a></span>
<span class="normal"><a href="#__codelineno-0-5956">5956</a></span>
<span class="normal"><a href="#__codelineno-0-5957">5957</a></span>
<span class="normal"><a href="#__codelineno-0-5958">5958</a></span>
<span class="normal"><a href="#__codelineno-0-5959">5959</a></span>
<span class="normal"><a href="#__codelineno-0-5960">5960</a></span>
<span class="normal"><a href="#__codelineno-0-5961">5961</a></span>
<span class="normal"><a href="#__codelineno-0-5962">5962</a></span>
<span class="normal"><a href="#__codelineno-0-5963">5963</a></span>
<span class="normal"><a href="#__codelineno-0-5964">5964</a></span>
<span class="normal"><a href="#__codelineno-0-5965">5965</a></span>
<span class="normal"><a href="#__codelineno-0-5966">5966</a></span>
<span class="normal"><a href="#__codelineno-0-5967">5967</a></span>
<span class="normal"><a href="#__codelineno-0-5968">5968</a></span>
<span class="normal"><a href="#__codelineno-0-5969">5969</a></span>
<span class="normal"><a href="#__codelineno-0-5970">5970</a></span>
<span class="normal"><a href="#__codelineno-0-5971">5971</a></span>
<span class="normal"><a href="#__codelineno-0-5972">5972</a></span>
<span class="normal"><a href="#__codelineno-0-5973">5973</a></span>
<span class="normal"><a href="#__codelineno-0-5974">5974</a></span>
<span class="normal"><a href="#__codelineno-0-5975">5975</a></span>
<span class="normal"><a href="#__codelineno-0-5976">5976</a></span>
<span class="normal"><a href="#__codelineno-0-5977">5977</a></span>
<span class="normal"><a href="#__codelineno-0-5978">5978</a></span>
<span class="normal"><a href="#__codelineno-0-5979">5979</a></span>
<span class="normal"><a href="#__codelineno-0-5980">5980</a></span>
<span class="normal"><a href="#__codelineno-0-5981">5981</a></span>
<span class="normal"><a href="#__codelineno-0-5982">5982</a></span>
<span class="normal"><a href="#__codelineno-0-5983">5983</a></span>
<span class="normal"><a href="#__codelineno-0-5984">5984</a></span>
<span class="normal"><a href="#__codelineno-0-5985">5985</a></span>
<span class="normal"><a href="#__codelineno-0-5986">5986</a></span>
<span class="normal"><a href="#__codelineno-0-5987">5987</a></span>
<span class="normal"><a href="#__codelineno-0-5988">5988</a></span>
<span class="normal"><a href="#__codelineno-0-5989">5989</a></span>
<span class="normal"><a href="#__codelineno-0-5990">5990</a></span>
<span class="normal"><a href="#__codelineno-0-5991">5991</a></span>
<span class="normal"><a href="#__codelineno-0-5992">5992</a></span>
<span class="normal"><a href="#__codelineno-0-5993">5993</a></span>
<span class="normal"><a href="#__codelineno-0-5994">5994</a></span>
<span class="normal"><a href="#__codelineno-0-5995">5995</a></span>
<span class="normal"><a href="#__codelineno-0-5996">5996</a></span>
<span class="normal"><a href="#__codelineno-0-5997">5997</a></span>
<span class="normal"><a href="#__codelineno-0-5998">5998</a></span>
<span class="normal"><a href="#__codelineno-0-5999">5999</a></span>
<span class="normal"><a href="#__codelineno-0-6000">6000</a></span>
<span class="normal"><a href="#__codelineno-0-6001">6001</a></span>
<span class="normal"><a href="#__codelineno-0-6002">6002</a></span>
<span class="normal"><a href="#__codelineno-0-6003">6003</a></span>
<span class="normal"><a href="#__codelineno-0-6004">6004</a></span>
<span class="normal"><a href="#__codelineno-0-6005">6005</a></span>
<span class="normal"><a href="#__codelineno-0-6006">6006</a></span>
<span class="normal"><a href="#__codelineno-0-6007">6007</a></span>
<span class="normal"><a href="#__codelineno-0-6008">6008</a></span>
<span class="normal"><a href="#__codelineno-0-6009">6009</a></span>
<span class="normal"><a href="#__codelineno-0-6010">6010</a></span>
<span class="normal"><a href="#__codelineno-0-6011">6011</a></span>
<span class="normal"><a href="#__codelineno-0-6012">6012</a></span>
<span class="normal"><a href="#__codelineno-0-6013">6013</a></span>
<span class="normal"><a href="#__codelineno-0-6014">6014</a></span>
<span class="normal"><a href="#__codelineno-0-6015">6015</a></span>
<span class="normal"><a href="#__codelineno-0-6016">6016</a></span>
<span class="normal"><a href="#__codelineno-0-6017">6017</a></span>
<span class="normal"><a href="#__codelineno-0-6018">6018</a></span>
<span class="normal"><a href="#__codelineno-0-6019">6019</a></span>
<span class="normal"><a href="#__codelineno-0-6020">6020</a></span>
<span class="normal"><a href="#__codelineno-0-6021">6021</a></span>
<span class="normal"><a href="#__codelineno-0-6022">6022</a></span>
<span class="normal"><a href="#__codelineno-0-6023">6023</a></span>
<span class="normal"><a href="#__codelineno-0-6024">6024</a></span>
<span class="normal"><a href="#__codelineno-0-6025">6025</a></span>
<span class="normal"><a href="#__codelineno-0-6026">6026</a></span>
<span class="normal"><a href="#__codelineno-0-6027">6027</a></span>
<span class="normal"><a href="#__codelineno-0-6028">6028</a></span>
<span class="normal"><a href="#__codelineno-0-6029">6029</a></span>
<span class="normal"><a href="#__codelineno-0-6030">6030</a></span>
<span class="normal"><a href="#__codelineno-0-6031">6031</a></span>
<span class="normal"><a href="#__codelineno-0-6032">6032</a></span>
<span class="normal"><a href="#__codelineno-0-6033">6033</a></span>
<span class="normal"><a href="#__codelineno-0-6034">6034</a></span>
<span class="normal"><a href="#__codelineno-0-6035">6035</a></span>
<span class="normal"><a href="#__codelineno-0-6036">6036</a></span>
<span class="normal"><a href="#__codelineno-0-6037">6037</a></span>
<span class="normal"><a href="#__codelineno-0-6038">6038</a></span>
<span class="normal"><a href="#__codelineno-0-6039">6039</a></span>
<span class="normal"><a href="#__codelineno-0-6040">6040</a></span>
<span class="normal"><a href="#__codelineno-0-6041">6041</a></span>
<span class="normal"><a href="#__codelineno-0-6042">6042</a></span>
<span class="normal"><a href="#__codelineno-0-6043">6043</a></span>
<span class="normal"><a href="#__codelineno-0-6044">6044</a></span>
<span class="normal"><a href="#__codelineno-0-6045">6045</a></span>
<span class="normal"><a href="#__codelineno-0-6046">6046</a></span>
<span class="normal"><a href="#__codelineno-0-6047">6047</a></span>
<span class="normal"><a href="#__codelineno-0-6048">6048</a></span>
<span class="normal"><a href="#__codelineno-0-6049">6049</a></span>
<span class="normal"><a href="#__codelineno-0-6050">6050</a></span>
<span class="normal"><a href="#__codelineno-0-6051">6051</a></span>
<span class="normal"><a href="#__codelineno-0-6052">6052</a></span>
<span class="normal"><a href="#__codelineno-0-6053">6053</a></span>
<span class="normal"><a href="#__codelineno-0-6054">6054</a></span>
<span class="normal"><a href="#__codelineno-0-6055">6055</a></span>
<span class="normal"><a href="#__codelineno-0-6056">6056</a></span>
<span class="normal"><a href="#__codelineno-0-6057">6057</a></span>
<span class="normal"><a href="#__codelineno-0-6058">6058</a></span>
<span class="normal"><a href="#__codelineno-0-6059">6059</a></span>
<span class="normal"><a href="#__codelineno-0-6060">6060</a></span>
<span class="normal"><a href="#__codelineno-0-6061">6061</a></span>
<span class="normal"><a href="#__codelineno-0-6062">6062</a></span>
<span class="normal"><a href="#__codelineno-0-6063">6063</a></span>
<span class="normal"><a href="#__codelineno-0-6064">6064</a></span>
<span class="normal"><a href="#__codelineno-0-6065">6065</a></span>
<span class="normal"><a href="#__codelineno-0-6066">6066</a></span>
<span class="normal"><a href="#__codelineno-0-6067">6067</a></span>
<span class="normal"><a href="#__codelineno-0-6068">6068</a></span>
<span class="normal"><a href="#__codelineno-0-6069">6069</a></span>
<span class="normal"><a href="#__codelineno-0-6070">6070</a></span>
<span class="normal"><a href="#__codelineno-0-6071">6071</a></span>
<span class="normal"><a href="#__codelineno-0-6072">6072</a></span>
<span class="normal"><a href="#__codelineno-0-6073">6073</a></span>
<span class="normal"><a href="#__codelineno-0-6074">6074</a></span>
<span class="normal"><a href="#__codelineno-0-6075">6075</a></span>
<span class="normal"><a href="#__codelineno-0-6076">6076</a></span>
<span class="normal"><a href="#__codelineno-0-6077">6077</a></span>
<span class="normal"><a href="#__codelineno-0-6078">6078</a></span>
<span class="normal"><a href="#__codelineno-0-6079">6079</a></span>
<span class="normal"><a href="#__codelineno-0-6080">6080</a></span>
<span class="normal"><a href="#__codelineno-0-6081">6081</a></span>
<span class="normal"><a href="#__codelineno-0-6082">6082</a></span>
<span class="normal"><a href="#__codelineno-0-6083">6083</a></span>
<span class="normal"><a href="#__codelineno-0-6084">6084</a></span>
<span class="normal"><a href="#__codelineno-0-6085">6085</a></span>
<span class="normal"><a href="#__codelineno-0-6086">6086</a></span>
<span class="normal"><a href="#__codelineno-0-6087">6087</a></span>
<span class="normal"><a href="#__codelineno-0-6088">6088</a></span>
<span class="normal"><a href="#__codelineno-0-6089">6089</a></span>
<span class="normal"><a href="#__codelineno-0-6090">6090</a></span>
<span class="normal"><a href="#__codelineno-0-6091">6091</a></span>
<span class="normal"><a href="#__codelineno-0-6092">6092</a></span>
<span class="normal"><a href="#__codelineno-0-6093">6093</a></span>
<span class="normal"><a href="#__codelineno-0-6094">6094</a></span>
<span class="normal"><a href="#__codelineno-0-6095">6095</a></span>
<span class="normal"><a href="#__codelineno-0-6096">6096</a></span>
<span class="normal"><a href="#__codelineno-0-6097">6097</a></span>
<span class="normal"><a href="#__codelineno-0-6098">6098</a></span>
<span class="normal"><a href="#__codelineno-0-6099">6099</a></span>
<span class="normal"><a href="#__codelineno-0-6100">6100</a></span>
<span class="normal"><a href="#__codelineno-0-6101">6101</a></span>
<span class="normal"><a href="#__codelineno-0-6102">6102</a></span>
<span class="normal"><a href="#__codelineno-0-6103">6103</a></span>
<span class="normal"><a href="#__codelineno-0-6104">6104</a></span>
<span class="normal"><a href="#__codelineno-0-6105">6105</a></span>
<span class="normal"><a href="#__codelineno-0-6106">6106</a></span>
<span class="normal"><a href="#__codelineno-0-6107">6107</a></span>
<span class="normal"><a href="#__codelineno-0-6108">6108</a></span>
<span class="normal"><a href="#__codelineno-0-6109">6109</a></span>
<span class="normal"><a href="#__codelineno-0-6110">6110</a></span>
<span class="normal"><a href="#__codelineno-0-6111">6111</a></span>
<span class="normal"><a href="#__codelineno-0-6112">6112</a></span>
<span class="normal"><a href="#__codelineno-0-6113">6113</a></span>
<span class="normal"><a href="#__codelineno-0-6114">6114</a></span>
<span class="normal"><a href="#__codelineno-0-6115">6115</a></span>
<span class="normal"><a href="#__codelineno-0-6116">6116</a></span>
<span class="normal"><a href="#__codelineno-0-6117">6117</a></span>
<span class="normal"><a href="#__codelineno-0-6118">6118</a></span>
<span class="normal"><a href="#__codelineno-0-6119">6119</a></span>
<span class="normal"><a href="#__codelineno-0-6120">6120</a></span>
<span class="normal"><a href="#__codelineno-0-6121">6121</a></span>
<span class="normal"><a href="#__codelineno-0-6122">6122</a></span>
<span class="normal"><a href="#__codelineno-0-6123">6123</a></span>
<span class="normal"><a href="#__codelineno-0-6124">6124</a></span>
<span class="normal"><a href="#__codelineno-0-6125">6125</a></span>
<span class="normal"><a href="#__codelineno-0-6126">6126</a></span>
<span class="normal"><a href="#__codelineno-0-6127">6127</a></span>
<span class="normal"><a href="#__codelineno-0-6128">6128</a></span>
<span class="normal"><a href="#__codelineno-0-6129">6129</a></span>
<span class="normal"><a href="#__codelineno-0-6130">6130</a></span>
<span class="normal"><a href="#__codelineno-0-6131">6131</a></span>
<span class="normal"><a href="#__codelineno-0-6132">6132</a></span>
<span class="normal"><a href="#__codelineno-0-6133">6133</a></span>
<span class="normal"><a href="#__codelineno-0-6134">6134</a></span>
<span class="normal"><a href="#__codelineno-0-6135">6135</a></span>
<span class="normal"><a href="#__codelineno-0-6136">6136</a></span>
<span class="normal"><a href="#__codelineno-0-6137">6137</a></span>
<span class="normal"><a href="#__codelineno-0-6138">6138</a></span>
<span class="normal"><a href="#__codelineno-0-6139">6139</a></span>
<span class="normal"><a href="#__codelineno-0-6140">6140</a></span>
<span class="normal"><a href="#__codelineno-0-6141">6141</a></span>
<span class="normal"><a href="#__codelineno-0-6142">6142</a></span>
<span class="normal"><a href="#__codelineno-0-6143">6143</a></span>
<span class="normal"><a href="#__codelineno-0-6144">6144</a></span>
<span class="normal"><a href="#__codelineno-0-6145">6145</a></span>
<span class="normal"><a href="#__codelineno-0-6146">6146</a></span>
<span class="normal"><a href="#__codelineno-0-6147">6147</a></span>
<span class="normal"><a href="#__codelineno-0-6148">6148</a></span>
<span class="normal"><a href="#__codelineno-0-6149">6149</a></span>
<span class="normal"><a href="#__codelineno-0-6150">6150</a></span>
<span class="normal"><a href="#__codelineno-0-6151">6151</a></span>
<span class="normal"><a href="#__codelineno-0-6152">6152</a></span>
<span class="normal"><a href="#__codelineno-0-6153">6153</a></span>
<span class="normal"><a href="#__codelineno-0-6154">6154</a></span>
<span class="normal"><a href="#__codelineno-0-6155">6155</a></span>
<span class="normal"><a href="#__codelineno-0-6156">6156</a></span>
<span class="normal"><a href="#__codelineno-0-6157">6157</a></span>
<span class="normal"><a href="#__codelineno-0-6158">6158</a></span>
<span class="normal"><a href="#__codelineno-0-6159">6159</a></span>
<span class="normal"><a href="#__codelineno-0-6160">6160</a></span>
<span class="normal"><a href="#__codelineno-0-6161">6161</a></span>
<span class="normal"><a href="#__codelineno-0-6162">6162</a></span>
<span class="normal"><a href="#__codelineno-0-6163">6163</a></span>
<span class="normal"><a href="#__codelineno-0-6164">6164</a></span>
<span class="normal"><a href="#__codelineno-0-6165">6165</a></span>
<span class="normal"><a href="#__codelineno-0-6166">6166</a></span>
<span class="normal"><a href="#__codelineno-0-6167">6167</a></span>
<span class="normal"><a href="#__codelineno-0-6168">6168</a></span>
<span class="normal"><a href="#__codelineno-0-6169">6169</a></span>
<span class="normal"><a href="#__codelineno-0-6170">6170</a></span>
<span class="normal"><a href="#__codelineno-0-6171">6171</a></span>
<span class="normal"><a href="#__codelineno-0-6172">6172</a></span>
<span class="normal"><a href="#__codelineno-0-6173">6173</a></span>
<span class="normal"><a href="#__codelineno-0-6174">6174</a></span>
<span class="normal"><a href="#__codelineno-0-6175">6175</a></span>
<span class="normal"><a href="#__codelineno-0-6176">6176</a></span>
<span class="normal"><a href="#__codelineno-0-6177">6177</a></span>
<span class="normal"><a href="#__codelineno-0-6178">6178</a></span>
<span class="normal"><a href="#__codelineno-0-6179">6179</a></span>
<span class="normal"><a href="#__codelineno-0-6180">6180</a></span>
<span class="normal"><a href="#__codelineno-0-6181">6181</a></span>
<span class="normal"><a href="#__codelineno-0-6182">6182</a></span>
<span class="normal"><a href="#__codelineno-0-6183">6183</a></span>
<span class="normal"><a href="#__codelineno-0-6184">6184</a></span>
<span class="normal"><a href="#__codelineno-0-6185">6185</a></span>
<span class="normal"><a href="#__codelineno-0-6186">6186</a></span>
<span class="normal"><a href="#__codelineno-0-6187">6187</a></span>
<span class="normal"><a href="#__codelineno-0-6188">6188</a></span>
<span class="normal"><a href="#__codelineno-0-6189">6189</a></span>
<span class="normal"><a href="#__codelineno-0-6190">6190</a></span>
<span class="normal"><a href="#__codelineno-0-6191">6191</a></span>
<span class="normal"><a href="#__codelineno-0-6192">6192</a></span>
<span class="normal"><a href="#__codelineno-0-6193">6193</a></span>
<span class="normal"><a href="#__codelineno-0-6194">6194</a></span>
<span class="normal"><a href="#__codelineno-0-6195">6195</a></span>
<span class="normal"><a href="#__codelineno-0-6196">6196</a></span>
<span class="normal"><a href="#__codelineno-0-6197">6197</a></span>
<span class="normal"><a href="#__codelineno-0-6198">6198</a></span>
<span class="normal"><a href="#__codelineno-0-6199">6199</a></span>
<span class="normal"><a href="#__codelineno-0-6200">6200</a></span>
<span class="normal"><a href="#__codelineno-0-6201">6201</a></span>
<span class="normal"><a href="#__codelineno-0-6202">6202</a></span>
<span class="normal"><a href="#__codelineno-0-6203">6203</a></span>
<span class="normal"><a href="#__codelineno-0-6204">6204</a></span>
<span class="normal"><a href="#__codelineno-0-6205">6205</a></span>
<span class="normal"><a href="#__codelineno-0-6206">6206</a></span>
<span class="normal"><a href="#__codelineno-0-6207">6207</a></span>
<span class="normal"><a href="#__codelineno-0-6208">6208</a></span>
<span class="normal"><a href="#__codelineno-0-6209">6209</a></span>
<span class="normal"><a href="#__codelineno-0-6210">6210</a></span>
<span class="normal"><a href="#__codelineno-0-6211">6211</a></span>
<span class="normal"><a href="#__codelineno-0-6212">6212</a></span>
<span class="normal"><a href="#__codelineno-0-6213">6213</a></span>
<span class="normal"><a href="#__codelineno-0-6214">6214</a></span>
<span class="normal"><a href="#__codelineno-0-6215">6215</a></span>
<span class="normal"><a href="#__codelineno-0-6216">6216</a></span>
<span class="normal"><a href="#__codelineno-0-6217">6217</a></span>
<span class="normal"><a href="#__codelineno-0-6218">6218</a></span>
<span class="normal"><a href="#__codelineno-0-6219">6219</a></span>
<span class="normal"><a href="#__codelineno-0-6220">6220</a></span>
<span class="normal"><a href="#__codelineno-0-6221">6221</a></span>
<span class="normal"><a href="#__codelineno-0-6222">6222</a></span>
<span class="normal"><a href="#__codelineno-0-6223">6223</a></span>
<span class="normal"><a href="#__codelineno-0-6224">6224</a></span>
<span class="normal"><a href="#__codelineno-0-6225">6225</a></span>
<span class="normal"><a href="#__codelineno-0-6226">6226</a></span>
<span class="normal"><a href="#__codelineno-0-6227">6227</a></span>
<span class="normal"><a href="#__codelineno-0-6228">6228</a></span>
<span class="normal"><a href="#__codelineno-0-6229">6229</a></span>
<span class="normal"><a href="#__codelineno-0-6230">6230</a></span>
<span class="normal"><a href="#__codelineno-0-6231">6231</a></span>
<span class="normal"><a href="#__codelineno-0-6232">6232</a></span>
<span class="normal"><a href="#__codelineno-0-6233">6233</a></span>
<span class="normal"><a href="#__codelineno-0-6234">6234</a></span>
<span class="normal"><a href="#__codelineno-0-6235">6235</a></span>
<span class="normal"><a href="#__codelineno-0-6236">6236</a></span>
<span class="normal"><a href="#__codelineno-0-6237">6237</a></span>
<span class="normal"><a href="#__codelineno-0-6238">6238</a></span>
<span class="normal"><a href="#__codelineno-0-6239">6239</a></span>
<span class="normal"><a href="#__codelineno-0-6240">6240</a></span>
<span class="normal"><a href="#__codelineno-0-6241">6241</a></span>
<span class="normal"><a href="#__codelineno-0-6242">6242</a></span>
<span class="normal"><a href="#__codelineno-0-6243">6243</a></span>
<span class="normal"><a href="#__codelineno-0-6244">6244</a></span>
<span class="normal"><a href="#__codelineno-0-6245">6245</a></span>
<span class="normal"><a href="#__codelineno-0-6246">6246</a></span>
<span class="normal"><a href="#__codelineno-0-6247">6247</a></span>
<span class="normal"><a href="#__codelineno-0-6248">6248</a></span>
<span class="normal"><a href="#__codelineno-0-6249">6249</a></span>
<span class="normal"><a href="#__codelineno-0-6250">6250</a></span>
<span class="normal"><a href="#__codelineno-0-6251">6251</a></span>
<span class="normal"><a href="#__codelineno-0-6252">6252</a></span>
<span class="normal"><a href="#__codelineno-0-6253">6253</a></span>
<span class="normal"><a href="#__codelineno-0-6254">6254</a></span>
<span class="normal"><a href="#__codelineno-0-6255">6255</a></span>
<span class="normal"><a href="#__codelineno-0-6256">6256</a></span>
<span class="normal"><a href="#__codelineno-0-6257">6257</a></span>
<span class="normal"><a href="#__codelineno-0-6258">6258</a></span>
<span class="normal"><a href="#__codelineno-0-6259">6259</a></span>
<span class="normal"><a href="#__codelineno-0-6260">6260</a></span>
<span class="normal"><a href="#__codelineno-0-6261">6261</a></span>
<span class="normal"><a href="#__codelineno-0-6262">6262</a></span>
<span class="normal"><a href="#__codelineno-0-6263">6263</a></span>
<span class="normal"><a href="#__codelineno-0-6264">6264</a></span>
<span class="normal"><a href="#__codelineno-0-6265">6265</a></span>
<span class="normal"><a href="#__codelineno-0-6266">6266</a></span>
<span class="normal"><a href="#__codelineno-0-6267">6267</a></span>
<span class="normal"><a href="#__codelineno-0-6268">6268</a></span>
<span class="normal"><a href="#__codelineno-0-6269">6269</a></span>
<span class="normal"><a href="#__codelineno-0-6270">6270</a></span>
<span class="normal"><a href="#__codelineno-0-6271">6271</a></span>
<span class="normal"><a href="#__codelineno-0-6272">6272</a></span>
<span class="normal"><a href="#__codelineno-0-6273">6273</a></span>
<span class="normal"><a href="#__codelineno-0-6274">6274</a></span>
<span class="normal"><a href="#__codelineno-0-6275">6275</a></span>
<span class="normal"><a href="#__codelineno-0-6276">6276</a></span>
<span class="normal"><a href="#__codelineno-0-6277">6277</a></span>
<span class="normal"><a href="#__codelineno-0-6278">6278</a></span>
<span class="normal"><a href="#__codelineno-0-6279">6279</a></span>
<span class="normal"><a href="#__codelineno-0-6280">6280</a></span>
<span class="normal"><a href="#__codelineno-0-6281">6281</a></span>
<span class="normal"><a href="#__codelineno-0-6282">6282</a></span>
<span class="normal"><a href="#__codelineno-0-6283">6283</a></span>
<span class="normal"><a href="#__codelineno-0-6284">6284</a></span>
<span class="normal"><a href="#__codelineno-0-6285">6285</a></span>
<span class="normal"><a href="#__codelineno-0-6286">6286</a></span>
<span class="normal"><a href="#__codelineno-0-6287">6287</a></span>
<span class="normal"><a href="#__codelineno-0-6288">6288</a></span>
<span class="normal"><a href="#__codelineno-0-6289">6289</a></span>
<span class="normal"><a href="#__codelineno-0-6290">6290</a></span>
<span class="normal"><a href="#__codelineno-0-6291">6291</a></span>
<span class="normal"><a href="#__codelineno-0-6292">6292</a></span>
<span class="normal"><a href="#__codelineno-0-6293">6293</a></span>
<span class="normal"><a href="#__codelineno-0-6294">6294</a></span>
<span class="normal"><a href="#__codelineno-0-6295">6295</a></span>
<span class="normal"><a href="#__codelineno-0-6296">6296</a></span>
<span class="normal"><a href="#__codelineno-0-6297">6297</a></span>
<span class="normal"><a href="#__codelineno-0-6298">6298</a></span>
<span class="normal"><a href="#__codelineno-0-6299">6299</a></span>
<span class="normal"><a href="#__codelineno-0-6300">6300</a></span>
<span class="normal"><a href="#__codelineno-0-6301">6301</a></span>
<span class="normal"><a href="#__codelineno-0-6302">6302</a></span>
<span class="normal"><a href="#__codelineno-0-6303">6303</a></span>
<span class="normal"><a href="#__codelineno-0-6304">6304</a></span>
<span class="normal"><a href="#__codelineno-0-6305">6305</a></span>
<span class="normal"><a href="#__codelineno-0-6306">6306</a></span>
<span class="normal"><a href="#__codelineno-0-6307">6307</a></span>
<span class="normal"><a href="#__codelineno-0-6308">6308</a></span>
<span class="normal"><a href="#__codelineno-0-6309">6309</a></span>
<span class="normal"><a href="#__codelineno-0-6310">6310</a></span>
<span class="normal"><a href="#__codelineno-0-6311">6311</a></span>
<span class="normal"><a href="#__codelineno-0-6312">6312</a></span>
<span class="normal"><a href="#__codelineno-0-6313">6313</a></span>
<span class="normal"><a href="#__codelineno-0-6314">6314</a></span>
<span class="normal"><a href="#__codelineno-0-6315">6315</a></span>
<span class="normal"><a href="#__codelineno-0-6316">6316</a></span>
<span class="normal"><a href="#__codelineno-0-6317">6317</a></span>
<span class="normal"><a href="#__codelineno-0-6318">6318</a></span>
<span class="normal"><a href="#__codelineno-0-6319">6319</a></span>
<span class="normal"><a href="#__codelineno-0-6320">6320</a></span>
<span class="normal"><a href="#__codelineno-0-6321">6321</a></span>
<span class="normal"><a href="#__codelineno-0-6322">6322</a></span>
<span class="normal"><a href="#__codelineno-0-6323">6323</a></span>
<span class="normal"><a href="#__codelineno-0-6324">6324</a></span>
<span class="normal"><a href="#__codelineno-0-6325">6325</a></span>
<span class="normal"><a href="#__codelineno-0-6326">6326</a></span>
<span class="normal"><a href="#__codelineno-0-6327">6327</a></span>
<span class="normal"><a href="#__codelineno-0-6328">6328</a></span>
<span class="normal"><a href="#__codelineno-0-6329">6329</a></span>
<span class="normal"><a href="#__codelineno-0-6330">6330</a></span>
<span class="normal"><a href="#__codelineno-0-6331">6331</a></span>
<span class="normal"><a href="#__codelineno-0-6332">6332</a></span>
<span class="normal"><a href="#__codelineno-0-6333">6333</a></span>
<span class="normal"><a href="#__codelineno-0-6334">6334</a></span>
<span class="normal"><a href="#__codelineno-0-6335">6335</a></span>
<span class="normal"><a href="#__codelineno-0-6336">6336</a></span>
<span class="normal"><a href="#__codelineno-0-6337">6337</a></span>
<span class="normal"><a href="#__codelineno-0-6338">6338</a></span>
<span class="normal"><a href="#__codelineno-0-6339">6339</a></span>
<span class="normal"><a href="#__codelineno-0-6340">6340</a></span>
<span class="normal"><a href="#__codelineno-0-6341">6341</a></span>
<span class="normal"><a href="#__codelineno-0-6342">6342</a></span>
<span class="normal"><a href="#__codelineno-0-6343">6343</a></span>
<span class="normal"><a href="#__codelineno-0-6344">6344</a></span>
<span class="normal"><a href="#__codelineno-0-6345">6345</a></span>
<span class="normal"><a href="#__codelineno-0-6346">6346</a></span>
<span class="normal"><a href="#__codelineno-0-6347">6347</a></span>
<span class="normal"><a href="#__codelineno-0-6348">6348</a></span>
<span class="normal"><a href="#__codelineno-0-6349">6349</a></span>
<span class="normal"><a href="#__codelineno-0-6350">6350</a></span>
<span class="normal"><a href="#__codelineno-0-6351">6351</a></span>
<span class="normal"><a href="#__codelineno-0-6352">6352</a></span>
<span class="normal"><a href="#__codelineno-0-6353">6353</a></span>
<span class="normal"><a href="#__codelineno-0-6354">6354</a></span>
<span class="normal"><a href="#__codelineno-0-6355">6355</a></span>
<span class="normal"><a href="#__codelineno-0-6356">6356</a></span>
<span class="normal"><a href="#__codelineno-0-6357">6357</a></span>
<span class="normal"><a href="#__codelineno-0-6358">6358</a></span>
<span class="normal"><a href="#__codelineno-0-6359">6359</a></span>
<span class="normal"><a href="#__codelineno-0-6360">6360</a></span>
<span class="normal"><a href="#__codelineno-0-6361">6361</a></span>
<span class="normal"><a href="#__codelineno-0-6362">6362</a></span>
<span class="normal"><a href="#__codelineno-0-6363">6363</a></span>
<span class="normal"><a href="#__codelineno-0-6364">6364</a></span>
<span class="normal"><a href="#__codelineno-0-6365">6365</a></span>
<span class="normal"><a href="#__codelineno-0-6366">6366</a></span>
<span class="normal"><a href="#__codelineno-0-6367">6367</a></span>
<span class="normal"><a href="#__codelineno-0-6368">6368</a></span>
<span class="normal"><a href="#__codelineno-0-6369">6369</a></span>
<span class="normal"><a href="#__codelineno-0-6370">6370</a></span>
<span class="normal"><a href="#__codelineno-0-6371">6371</a></span>
<span class="normal"><a href="#__codelineno-0-6372">6372</a></span>
<span class="normal"><a href="#__codelineno-0-6373">6373</a></span>
<span class="normal"><a href="#__codelineno-0-6374">6374</a></span>
<span class="normal"><a href="#__codelineno-0-6375">6375</a></span>
<span class="normal"><a href="#__codelineno-0-6376">6376</a></span>
<span class="normal"><a href="#__codelineno-0-6377">6377</a></span>
<span class="normal"><a href="#__codelineno-0-6378">6378</a></span>
<span class="normal"><a href="#__codelineno-0-6379">6379</a></span>
<span class="normal"><a href="#__codelineno-0-6380">6380</a></span>
<span class="normal"><a href="#__codelineno-0-6381">6381</a></span>
<span class="normal"><a href="#__codelineno-0-6382">6382</a></span>
<span class="normal"><a href="#__codelineno-0-6383">6383</a></span>
<span class="normal"><a href="#__codelineno-0-6384">6384</a></span>
<span class="normal"><a href="#__codelineno-0-6385">6385</a></span>
<span class="normal"><a href="#__codelineno-0-6386">6386</a></span>
<span class="normal"><a href="#__codelineno-0-6387">6387</a></span>
<span class="normal"><a href="#__codelineno-0-6388">6388</a></span>
<span class="normal"><a href="#__codelineno-0-6389">6389</a></span>
<span class="normal"><a href="#__codelineno-0-6390">6390</a></span>
<span class="normal"><a href="#__codelineno-0-6391">6391</a></span>
<span class="normal"><a href="#__codelineno-0-6392">6392</a></span>
<span class="normal"><a href="#__codelineno-0-6393">6393</a></span>
<span class="normal"><a href="#__codelineno-0-6394">6394</a></span>
<span class="normal"><a href="#__codelineno-0-6395">6395</a></span>
<span class="normal"><a href="#__codelineno-0-6396">6396</a></span>
<span class="normal"><a href="#__codelineno-0-6397">6397</a></span>
<span class="normal"><a href="#__codelineno-0-6398">6398</a></span>
<span class="normal"><a href="#__codelineno-0-6399">6399</a></span>
<span class="normal"><a href="#__codelineno-0-6400">6400</a></span>
<span class="normal"><a href="#__codelineno-0-6401">6401</a></span>
<span class="normal"><a href="#__codelineno-0-6402">6402</a></span>
<span class="normal"><a href="#__codelineno-0-6403">6403</a></span>
<span class="normal"><a href="#__codelineno-0-6404">6404</a></span>
<span class="normal"><a href="#__codelineno-0-6405">6405</a></span>
<span class="normal"><a href="#__codelineno-0-6406">6406</a></span>
<span class="normal"><a href="#__codelineno-0-6407">6407</a></span>
<span class="normal"><a href="#__codelineno-0-6408">6408</a></span>
<span class="normal"><a href="#__codelineno-0-6409">6409</a></span>
<span class="normal"><a href="#__codelineno-0-6410">6410</a></span>
<span class="normal"><a href="#__codelineno-0-6411">6411</a></span>
<span class="normal"><a href="#__codelineno-0-6412">6412</a></span>
<span class="normal"><a href="#__codelineno-0-6413">6413</a></span>
<span class="normal"><a href="#__codelineno-0-6414">6414</a></span>
<span class="normal"><a href="#__codelineno-0-6415">6415</a></span>
<span class="normal"><a href="#__codelineno-0-6416">6416</a></span>
<span class="normal"><a href="#__codelineno-0-6417">6417</a></span>
<span class="normal"><a href="#__codelineno-0-6418">6418</a></span>
<span class="normal"><a href="#__codelineno-0-6419">6419</a></span>
<span class="normal"><a href="#__codelineno-0-6420">6420</a></span>
<span class="normal"><a href="#__codelineno-0-6421">6421</a></span>
<span class="normal"><a href="#__codelineno-0-6422">6422</a></span>
<span class="normal"><a href="#__codelineno-0-6423">6423</a></span>
<span class="normal"><a href="#__codelineno-0-6424">6424</a></span>
<span class="normal"><a href="#__codelineno-0-6425">6425</a></span>
<span class="normal"><a href="#__codelineno-0-6426">6426</a></span>
<span class="normal"><a href="#__codelineno-0-6427">6427</a></span>
<span class="normal"><a href="#__codelineno-0-6428">6428</a></span>
<span class="normal"><a href="#__codelineno-0-6429">6429</a></span>
<span class="normal"><a href="#__codelineno-0-6430">6430</a></span>
<span class="normal"><a href="#__codelineno-0-6431">6431</a></span>
<span class="normal"><a href="#__codelineno-0-6432">6432</a></span>
<span class="normal"><a href="#__codelineno-0-6433">6433</a></span>
<span class="normal"><a href="#__codelineno-0-6434">6434</a></span>
<span class="normal"><a href="#__codelineno-0-6435">6435</a></span>
<span class="normal"><a href="#__codelineno-0-6436">6436</a></span>
<span class="normal"><a href="#__codelineno-0-6437">6437</a></span>
<span class="normal"><a href="#__codelineno-0-6438">6438</a></span>
<span class="normal"><a href="#__codelineno-0-6439">6439</a></span>
<span class="normal"><a href="#__codelineno-0-6440">6440</a></span>
<span class="normal"><a href="#__codelineno-0-6441">6441</a></span>
<span class="normal"><a href="#__codelineno-0-6442">6442</a></span>
<span class="normal"><a href="#__codelineno-0-6443">6443</a></span>
<span class="normal"><a href="#__codelineno-0-6444">6444</a></span>
<span class="normal"><a href="#__codelineno-0-6445">6445</a></span>
<span class="normal"><a href="#__codelineno-0-6446">6446</a></span>
<span class="normal"><a href="#__codelineno-0-6447">6447</a></span>
<span class="normal"><a href="#__codelineno-0-6448">6448</a></span>
<span class="normal"><a href="#__codelineno-0-6449">6449</a></span>
<span class="normal"><a href="#__codelineno-0-6450">6450</a></span>
<span class="normal"><a href="#__codelineno-0-6451">6451</a></span>
<span class="normal"><a href="#__codelineno-0-6452">6452</a></span>
<span class="normal"><a href="#__codelineno-0-6453">6453</a></span>
<span class="normal"><a href="#__codelineno-0-6454">6454</a></span>
<span class="normal"><a href="#__codelineno-0-6455">6455</a></span>
<span class="normal"><a href="#__codelineno-0-6456">6456</a></span>
<span class="normal"><a href="#__codelineno-0-6457">6457</a></span>
<span class="normal"><a href="#__codelineno-0-6458">6458</a></span>
<span class="normal"><a href="#__codelineno-0-6459">6459</a></span>
<span class="normal"><a href="#__codelineno-0-6460">6460</a></span>
<span class="normal"><a href="#__codelineno-0-6461">6461</a></span>
<span class="normal"><a href="#__codelineno-0-6462">6462</a></span>
<span class="normal"><a href="#__codelineno-0-6463">6463</a></span>
<span class="normal"><a href="#__codelineno-0-6464">6464</a></span>
<span class="normal"><a href="#__codelineno-0-6465">6465</a></span>
<span class="normal"><a href="#__codelineno-0-6466">6466</a></span>
<span class="normal"><a href="#__codelineno-0-6467">6467</a></span>
<span class="normal"><a href="#__codelineno-0-6468">6468</a></span>
<span class="normal"><a href="#__codelineno-0-6469">6469</a></span>
<span class="normal"><a href="#__codelineno-0-6470">6470</a></span>
<span class="normal"><a href="#__codelineno-0-6471">6471</a></span>
<span class="normal"><a href="#__codelineno-0-6472">6472</a></span>
<span class="normal"><a href="#__codelineno-0-6473">6473</a></span>
<span class="normal"><a href="#__codelineno-0-6474">6474</a></span>
<span class="normal"><a href="#__codelineno-0-6475">6475</a></span>
<span class="normal"><a href="#__codelineno-0-6476">6476</a></span>
<span class="normal"><a href="#__codelineno-0-6477">6477</a></span>
<span class="normal"><a href="#__codelineno-0-6478">6478</a></span>
<span class="normal"><a href="#__codelineno-0-6479">6479</a></span>
<span class="normal"><a href="#__codelineno-0-6480">6480</a></span>
<span class="normal"><a href="#__codelineno-0-6481">6481</a></span>
<span class="normal"><a href="#__codelineno-0-6482">6482</a></span>
<span class="normal"><a href="#__codelineno-0-6483">6483</a></span>
<span class="normal"><a href="#__codelineno-0-6484">6484</a></span>
<span class="normal"><a href="#__codelineno-0-6485">6485</a></span>
<span class="normal"><a href="#__codelineno-0-6486">6486</a></span>
<span class="normal"><a href="#__codelineno-0-6487">6487</a></span>
<span class="normal"><a href="#__codelineno-0-6488">6488</a></span>
<span class="normal"><a href="#__codelineno-0-6489">6489</a></span>
<span class="normal"><a href="#__codelineno-0-6490">6490</a></span>
<span class="normal"><a href="#__codelineno-0-6491">6491</a></span>
<span class="normal"><a href="#__codelineno-0-6492">6492</a></span>
<span class="normal"><a href="#__codelineno-0-6493">6493</a></span>
<span class="normal"><a href="#__codelineno-0-6494">6494</a></span>
<span class="normal"><a href="#__codelineno-0-6495">6495</a></span>
<span class="normal"><a href="#__codelineno-0-6496">6496</a></span>
<span class="normal"><a href="#__codelineno-0-6497">6497</a></span>
<span class="normal"><a href="#__codelineno-0-6498">6498</a></span>
<span class="normal"><a href="#__codelineno-0-6499">6499</a></span>
<span class="normal"><a href="#__codelineno-0-6500">6500</a></span>
<span class="normal"><a href="#__codelineno-0-6501">6501</a></span>
<span class="normal"><a href="#__codelineno-0-6502">6502</a></span>
<span class="normal"><a href="#__codelineno-0-6503">6503</a></span>
<span class="normal"><a href="#__codelineno-0-6504">6504</a></span>
<span class="normal"><a href="#__codelineno-0-6505">6505</a></span>
<span class="normal"><a href="#__codelineno-0-6506">6506</a></span>
<span class="normal"><a href="#__codelineno-0-6507">6507</a></span>
<span class="normal"><a href="#__codelineno-0-6508">6508</a></span>
<span class="normal"><a href="#__codelineno-0-6509">6509</a></span>
<span class="normal"><a href="#__codelineno-0-6510">6510</a></span>
<span class="normal"><a href="#__codelineno-0-6511">6511</a></span>
<span class="normal"><a href="#__codelineno-0-6512">6512</a></span>
<span class="normal"><a href="#__codelineno-0-6513">6513</a></span>
<span class="normal"><a href="#__codelineno-0-6514">6514</a></span>
<span class="normal"><a href="#__codelineno-0-6515">6515</a></span>
<span class="normal"><a href="#__codelineno-0-6516">6516</a></span>
<span class="normal"><a href="#__codelineno-0-6517">6517</a></span>
<span class="normal"><a href="#__codelineno-0-6518">6518</a></span>
<span class="normal"><a href="#__codelineno-0-6519">6519</a></span>
<span class="normal"><a href="#__codelineno-0-6520">6520</a></span>
<span class="normal"><a href="#__codelineno-0-6521">6521</a></span>
<span class="normal"><a href="#__codelineno-0-6522">6522</a></span>
<span class="normal"><a href="#__codelineno-0-6523">6523</a></span>
<span class="normal"><a href="#__codelineno-0-6524">6524</a></span>
<span class="normal"><a href="#__codelineno-0-6525">6525</a></span>
<span class="normal"><a href="#__codelineno-0-6526">6526</a></span>
<span class="normal"><a href="#__codelineno-0-6527">6527</a></span>
<span class="normal"><a href="#__codelineno-0-6528">6528</a></span>
<span class="normal"><a href="#__codelineno-0-6529">6529</a></span>
<span class="normal"><a href="#__codelineno-0-6530">6530</a></span>
<span class="normal"><a href="#__codelineno-0-6531">6531</a></span>
<span class="normal"><a href="#__codelineno-0-6532">6532</a></span>
<span class="normal"><a href="#__codelineno-0-6533">6533</a></span>
<span class="normal"><a href="#__codelineno-0-6534">6534</a></span>
<span class="normal"><a href="#__codelineno-0-6535">6535</a></span>
<span class="normal"><a href="#__codelineno-0-6536">6536</a></span>
<span class="normal"><a href="#__codelineno-0-6537">6537</a></span>
<span class="normal"><a href="#__codelineno-0-6538">6538</a></span>
<span class="normal"><a href="#__codelineno-0-6539">6539</a></span>
<span class="normal"><a href="#__codelineno-0-6540">6540</a></span>
<span class="normal"><a href="#__codelineno-0-6541">6541</a></span>
<span class="normal"><a href="#__codelineno-0-6542">6542</a></span>
<span class="normal"><a href="#__codelineno-0-6543">6543</a></span>
<span class="normal"><a href="#__codelineno-0-6544">6544</a></span>
<span class="normal"><a href="#__codelineno-0-6545">6545</a></span>
<span class="normal"><a href="#__codelineno-0-6546">6546</a></span>
<span class="normal"><a href="#__codelineno-0-6547">6547</a></span>
<span class="normal"><a href="#__codelineno-0-6548">6548</a></span>
<span class="normal"><a href="#__codelineno-0-6549">6549</a></span>
<span class="normal"><a href="#__codelineno-0-6550">6550</a></span>
<span class="normal"><a href="#__codelineno-0-6551">6551</a></span>
<span class="normal"><a href="#__codelineno-0-6552">6552</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="k">class</span><span class="w"> </span><span class="nc">Dataset</span><span class="p">(</span><span class="n">AbstractDataset</span><span class="p">):</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Dataset.</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">    The Dataset class contains methods to deal with raster and netcdf files, change projection and coordinate systems.</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">src</span><span class="p">:</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Dataset</span><span class="p">,</span> <span class="n">access</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;read_only&quot;</span><span class="p">):</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;__init__.&quot;&quot;&quot;</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">access</span><span class="o">=</span><span class="n">access</span><span class="p">)</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_no_data_value</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>            <span class="n">src</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">GetNoDataValue</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>        <span class="p">]</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_band_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_band_names</span><span class="p">()</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_band_units</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>            <span class="n">src</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">GetUnitType</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>        <span class="p">]</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;__str__.&quot;&quot;&quot;</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>        <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="s2">            Top Left Corner: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">top_left_corner</span><span class="si">}</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="s2">            Cell size: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cell_size</span><span class="si">}</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a><span class="s2">            Dimension: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">rows</span><span class="si">}</span><span class="s2"> * </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="si">}</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a><span class="s2">            EPSG: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">epsg</span><span class="si">}</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a><span class="s2">            Number of Bands: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="si">}</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="s2">            Band names: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">band_names</span><span class="si">}</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="s2">            Band colors: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">band_color</span><span class="si">}</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="s2">            Band units: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">band_units</span><span class="si">}</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a><span class="s2">            Scale: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="si">}</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a><span class="s2">            Offset: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="si">}</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a><span class="s2">            Mask: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="s2">            Data type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="s2">            File: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_name</span><span class="si">}</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="s2">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>        <span class="k">return</span> <span class="n">message</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;__repr__.&quot;&quot;&quot;</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>        <span class="k">return</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Info</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="p">)</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">access</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a><span class="sd">        Access mode.</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="sd">            str:</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="sd">                The access mode of the dataset (read_only/write).</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">access</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">raster</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Dataset</span><span class="p">:</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Base GDAL Dataset.&quot;&quot;&quot;</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">raster</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>    <span class="nd">@raster</span><span class="o">.</span><span class="n">setter</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">raster</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Dataset</span><span class="p">):</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Contains GDAL Dataset.&quot;&quot;&quot;</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_raster</span> <span class="o">=</span> <span class="n">value</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Values of all the bands.</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="sd">            np.ndarray:</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a><span class="sd">                the values of all the bands in the raster as a 3D numpy array (bands, rows, columns).</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">()</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">rows</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Number of rows in the raster array.&quot;&quot;&quot;</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rows</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">columns</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Number of columns in the raster array.&quot;&quot;&quot;</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_columns</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">shape</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Shape (bands, rows, columns).&quot;&quot;&quot;</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">geotransform</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;WKT projection.</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a><span class="sd">        (top left corner X/lon coordinate, cell_size, 0, top left corner y/lat coordinate, 0, -cell_size).</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="sd">            - Create a dataset:</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(4, 5, 5)</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="sd">              ```</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a><span class="sd">            - To check the geotransform of the dataset, call the `geotransform` property:</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a><span class="sd">              &gt;&gt;&gt; print(dataset.geotransform)</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="sd">              (0.0, 0.05, 0.0, 0.0, 0.0, -0.05)</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="sd">              ```</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><span class="sd">        See Also:</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a><span class="sd">            - Dataset.top_left_corner: Coordinate of the top left corner of the dataset.</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a><span class="sd">            - Dataset.epsg: EPSG number of the dataset coordinate reference system.</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">geotransform</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">epsg</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;EPSG number.&quot;&quot;&quot;</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>        <span class="n">crs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetProjection</span><span class="p">()</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>        <span class="k">return</span> <span class="n">FeatureCollection</span><span class="o">.</span><span class="n">get_epsg_from_prj</span><span class="p">(</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>    <span class="nd">@epsg</span><span class="o">.</span><span class="n">setter</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">epsg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;EPSG number.&quot;&quot;&quot;</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>        <span class="n">sr</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_create_sr_from_epsg</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">sr</span><span class="o">.</span><span class="n">ExportToWkt</span><span class="p">())</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>        <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_raster</span><span class="p">)</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">crs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Coordinate reference system.</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a><span class="sd">            str:</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a><span class="sd">                the coordinate reference system of the dataset.</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="sd">            - Create a dataset:</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(4, 5, 5)</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="sd">              ```</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="sd">            - Now, to check the coordinate reference system, call the `crs` property:</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a><span class="sd">              &gt;&gt;&gt; print(dataset.crs)</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="sd">              GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AXIS[&quot;Latitude&quot;,NORTH],AXIS[&quot;Longitude&quot;,EAST],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><span class="sd">              ```</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><span class="sd">        See Also:</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="sd">            Dataset.set_crs : Set the Coordinate Reference System (CRS).</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a><span class="sd">            Dataset.to_crs : Reproject the dataset to any projection.</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a><span class="sd">            Dataset.epsg : epsg number of the dataset coordinate reference system.</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_crs</span><span class="p">()</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>    <span class="nd">@crs</span><span class="o">.</span><span class="n">setter</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">crs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Coordinate reference system.</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a><span class="sd">            value (str):</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a><span class="sd">                WellKnownText (WKT) string. i.e.</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a><span class="sd">                    ```python</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a><span class="sd">                    &#39;GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a><span class="sd">                    298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;], AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a><span class="sd">                    AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;, 0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a><span class="sd">                    AXIS[&quot;Latitude&quot;,NORTH],AXIS[&quot;Longitude&quot;,EAST],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]&#39;</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a><span class="sd">                    ```</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a><span class="sd">        See Also:</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a><span class="sd">            - Dataset.set_crs: Set the Coordinate Reference System (CRS).</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a><span class="sd">            - Dataset.to_crs: Reproject the dataset to any projection.</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="sd">            - Dataset.epsg: EPSG number of the dataset coordinate reference system.</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_crs</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cell_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cell size.&quot;&quot;&quot;</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cell_size</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">band_count</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Number of bands in the raster.&quot;&quot;&quot;</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_band_count</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">band_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Band names.&quot;&quot;&quot;</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_band_names</span><span class="p">()</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>    <span class="nd">@band_names</span><span class="o">.</span><span class="n">setter</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">band_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name_list</span><span class="p">:</span> <span class="n">List</span><span class="p">):</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Band names.&quot;&quot;&quot;</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_set_band_names</span><span class="p">(</span><span class="n">name_list</span><span class="p">)</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">band_units</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Band units.&quot;&quot;&quot;</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_band_units</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>    <span class="nd">@band_units</span><span class="o">.</span><span class="n">setter</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">band_units</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Band units setter.&quot;&quot;&quot;</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_band_units</span> <span class="o">=</span> <span class="n">value</span>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">SetUnitType</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">no_data_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;No data value that marks the cells out of the domain.&quot;&quot;&quot;</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_no_data_value</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a>    <span class="nd">@no_data_value</span><span class="o">.</span><span class="n">setter</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">no_data_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="n">Number</span><span class="p">]):</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;no_data_value.</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a><span class="sd">        No data value that marks the cells out of the domain</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a><span class="sd">        Notes:</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a><span class="sd">            - The setter does not change the values of the cells to the new no_data_value, it only changes the</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a><span class="sd">            `no_data_value` attribute.</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a><span class="sd">            - Use this method to change the `no_data_value` attribute to match the value that is stored in the cells.</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a><span class="sd">            - To change the values of the cells, to the new no_data_value, use the `change_no_data_value` method.</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a><span class="sd">        See Also:</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a><span class="sd">            - Dataset.change_no_data_value: Change the No Data Value.</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_change_no_data_value_attr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_change_no_data_value_attr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">meta_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Meta-data.</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a><span class="sd">        Hint:</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a><span class="sd">            - This property does not need the Dataset to be opened in a write mode to be set.</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a><span class="sd">            - The value of the offset will be stored in an xml file by the name of the raster file with the extension of</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a><span class="sd">                .aux.xml,</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a><span class="sd">        the content of the file will be like the following:</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a><span class="sd">        ```xml</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a><span class="sd">            &lt;PAMDataset&gt;</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a><span class="sd">              &lt;Metadata&gt;</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="sd">                &lt;MDI key=&quot;key&quot;&gt;value&lt;/MDI&gt;</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a><span class="sd">              &lt;/Metadata&gt;</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a><span class="sd">            &lt;/PAMDataset&gt;</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a><span class="sd">        ```</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">meta_data</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a>    <span class="nd">@meta_data</span><span class="o">.</span><span class="n">setter</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">meta_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Meta-data.&quot;&quot;&quot;</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_raster</span><span class="o">.</span><span class="n">SetMetadataItem</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">block_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Block Size.</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a><span class="sd">        The block size is the size of the block that the raster is divided into, the block size is used to read and</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a><span class="sd">        write the raster data in blocks.</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a><span class="sd">            - Create a dataset and print block size:</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(5, 5)</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a><span class="sd">              &gt;&gt;&gt; print(dataset.block_size)</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a><span class="sd">              [[5, 1]]</span>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a><span class="sd">              ```</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a><span class="sd">        See Also:</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a><span class="sd">            - Dataset.get_block_arrangement: Get block arrangement to read the dataset in chunks.</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a><span class="sd">            - Dataset.get_tile: Get tiles.</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a><span class="sd">            - Dataset.read_array: Read the data stored in the dataset bands.</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_block_size</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a>    <span class="nd">@block_size</span><span class="o">.</span><span class="n">setter</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">block_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]):</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Block Size.</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a><span class="sd">            value (List[Tuple[int, int]]):</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a><span class="sd">                block size for each band in the raster(512, 512).</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;block size should be a tuple of 2 integers&quot;</span><span class="p">)</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_block_size</span> <span class="o">=</span> <span class="n">value</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">file_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;File name.&quot;&quot;&quot;</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">file_name</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">driver_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Driver Type.&quot;&quot;&quot;</span>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">driver_type</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Scale.</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a><span class="sd">        The value of the scale is used to convert the pixel values to the real-world values.</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a><span class="sd">        Hint:</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a><span class="sd">            - This property does not need the Dataset to be opened in a write mode to be set.</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a><span class="sd">            - The value of the offset will be stored in an xml file by the name of the raster file with the extension of</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a><span class="sd">                .aux.xml.</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a><span class="sd">        the content of the file will be like the following:</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a><span class="sd">        ```xml</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a><span class="sd">            &lt;PAMDataset&gt;</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a><span class="sd">              &lt;PAMRasterBand band=&quot;1&quot;&gt;</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a><span class="sd">                &lt;Description&gt;Band_1&lt;/Description&gt;</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a><span class="sd">                &lt;UnitType&gt;m&lt;/UnitType&gt;</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a><span class="sd">                &lt;Offset&gt;100&lt;/Offset&gt;</span>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a><span class="sd">                &lt;Scale&gt;2&lt;/Scale&gt;</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a><span class="sd">              &lt;/PAMRasterBand&gt;</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a><span class="sd">            &lt;/PAMDataset&gt;</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a><span class="sd">        ```</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a>        <span class="n">scale_list</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a>            <span class="n">band_scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">GetScale</span><span class="p">()</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a>            <span class="n">scale_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">band_scale</span> <span class="k">if</span> <span class="n">band_scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mf">1.0</span><span class="p">)</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a>        <span class="k">return</span> <span class="n">scale_list</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a>    <span class="nd">@scale</span><span class="o">.</span><span class="n">setter</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]):</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Scale.&quot;&quot;&quot;</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">SetScale</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Offset.</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a><span class="sd">        The value of the offset is used to convert the pixel values to the real-world values.</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a><span class="sd">        Hint:</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a><span class="sd">            - This property does not need the Dataset to be opened in a write mode to be set.</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a><span class="sd">            - The value of the offset will be stored in xml file by the name of the raster file with the extension of</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a><span class="sd">                .aux.xml.</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a><span class="sd">        the content of the file will be like the following:</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a><span class="sd">        ```xml</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a><span class="sd">            &lt;PAMDataset&gt;</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a><span class="sd">              &lt;PAMRasterBand band=&quot;1&quot;&gt;</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a><span class="sd">                &lt;Description&gt;Band_1&lt;/Description&gt;</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a><span class="sd">                &lt;UnitType&gt;m&lt;/UnitType&gt;</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a><span class="sd">                &lt;Offset&gt;100&lt;/Offset&gt;</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a><span class="sd">                &lt;Scale&gt;2&lt;/Scale&gt;</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a><span class="sd">              &lt;/PAMRasterBand&gt;</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a><span class="sd">            &lt;/PAMDataset&gt;</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a><span class="sd">        ```</span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a>        <span class="n">offset_list</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a>            <span class="n">band_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">GetOffset</span><span class="p">()</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>            <span class="n">offset_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">band_offset</span> <span class="k">if</span> <span class="n">band_offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a>        <span class="k">return</span> <span class="n">offset_list</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a>    <span class="nd">@offset</span><span class="o">.</span><span class="n">setter</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]):</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Offset.&quot;&quot;&quot;</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">SetOffset</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">read_file</span><span class="p">(</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a>        <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a>        <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a>        <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a>        <span class="n">file_i</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;read_file.</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a><span class="sd">            path (str):</span>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a><span class="sd">                Path of file to open.</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a><span class="sd">            read_only (bool):</span>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a><span class="sd">                File mode, set to False, to open in &quot;update&quot; mode.</span>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a><span class="sd">            file_i (int):</span>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a><span class="sd">                Index to the file inside the compressed file you want to read, if the compressed file has only one file. Default is 0.</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a><span class="sd">            Dataset:</span>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a><span class="sd">                Opened dataset instance.</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a><span class="sd">            Zip files:</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a><span class="sd">            - Internal Zip file path (one/multiple files inside the compressed file):</span>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a><span class="sd">                if the path contains a zip but does not end with zip (compressed-file-name.zip/1.asc), so the path contains</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a><span class="sd">                    the internal path inside the zip file, so just ad</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a><span class="sd">                ```python</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a><span class="sd">                &gt;&gt;&gt; rdir = &quot;tests/data/virtual-file-system&quot;</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a><span class="sd">                &gt;&gt;&gt; dataset = Dataset.read_file(f&quot;{rdir}/multiple_compressed_files.zip/1.asc&quot;)</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a><span class="sd">                &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a><span class="sd">                &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a><span class="sd">                            Cell size: 4000.0</span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a><span class="sd">                            Dimension: 13 * 14</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a><span class="sd">                            EPSG: 4326</span>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a><span class="sd">                            Number of Bands: 1</span>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a><span class="sd">                            Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a><span class="sd">                            Mask: -3.4028230607370965e+38</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a><span class="sd">                            Data type: float32</span>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a><span class="sd">                            File: /vsizip/tests/data/virtual-file-system/multiple_compressed_files.zip/1.asc</span>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a><span class="sd">                &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a><span class="sd">                ```</span>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a><span class="sd">            - Only the Zip file path (one/multiple files inside the compressed file):</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a><span class="sd">                If you provide the name of the zip file with multiple files inside it, it will return the path to the first</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a><span class="sd">                file.</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a><span class="sd">                ```python</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a><span class="sd">                &gt;&gt;&gt; dataset = Dataset.read_file(f&quot;{rdir}/multiple_compressed_files.zip&quot;)</span>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a><span class="sd">                &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a><span class="sd">                &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a><span class="sd">                            Cell size: 4000.0</span>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a><span class="sd">                            Dimension: 13 * 14</span>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a><span class="sd">                            EPSG: 4326</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a><span class="sd">                            Number of Bands: 1</span>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a><span class="sd">                            Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a><span class="sd">                            Mask: -3.4028230607370965e+38</span>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a><span class="sd">                            Data type: float32</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a><span class="sd">                            File: /vsizip/tests/data/virtual-file-system/multiple_compressed_files.zip/1.asc</span>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a><span class="sd">                &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a><span class="sd">                ```</span>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a><span class="sd">            - Zip file path and an index (one/multiple files inside the compressed file):</span>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a><span class="sd">                if you provide the path to the zip file and an index to the file inside the compressed file you want to</span>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a><span class="sd">                read.</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a><span class="sd">                ```python</span>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a><span class="sd">                &gt;&gt;&gt; dataset = Dataset.read_file(f&quot;{rdir}/multiple_compressed_files.zip&quot;, file_i=1)</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a><span class="sd">                &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a><span class="sd">                &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a><span class="sd">                            Cell size: 4000.0</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a><span class="sd">                            Dimension: 13 * 14</span>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a><span class="sd">                            EPSG: 4326</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a><span class="sd">                            Number of Bands: 1</span>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a><span class="sd">                            Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a><span class="sd">                            Mask: -3.4028230607370965e+38</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a><span class="sd">                            Data type: float32</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a><span class="sd">                            File: /vsizip/tests/data/virtual-file-system/multiple_compressed_files.zip/2.asc</span>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a><span class="sd">                &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a><span class="sd">                ```</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a><span class="sd">        Virtual files:</span>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a><span class="sd">            - You can open files stored online simply by using the full url to the file with the `read_file` method.</span>
<a id="__codelineno-0-539" name="__codelineno-0-539"></a><span class="sd">                ```python</span>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a><span class="sd">                &gt;&gt;&gt; url = &quot;https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/31/U/FU/2020/3/S2A_31UFU_20200328_0_L2A/B01.tif&quot;</span>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a><span class="sd">                &gt;&gt;&gt; dataset = Dataset.read_file(url)</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a><span class="sd">                &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a><span class="sd">                &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a><span class="sd">                            Top Left Corner: (600000.0, 5900040.0)</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a><span class="sd">                            Cell size: 60.0</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a><span class="sd">                            Dimension: 1830 * 1830</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a><span class="sd">                            EPSG: 32631</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a><span class="sd">                            Number of Bands: 1</span>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a><span class="sd">                            Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a><span class="sd">                            Band colors: {0: &#39;gray_index&#39;}</span>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a><span class="sd">                            Band units: [&#39;&#39;]</span>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a><span class="sd">                            Scale: [1.0]</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a><span class="sd">                            Offset: [0]</span>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a><span class="sd">                            Mask: 0.0</span>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a><span class="sd">                            Data type: uint16</span>
<a id="__codelineno-0-556" name="__codelineno-0-556"></a><span class="sd">                            File: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/31/U/FU/2020/3/S2A_31UFU_20200328_0_L2A/B01.tif</span>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a><span class="sd">                &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a><span class="sd">                ```</span>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a><span class="sd">        See Also:</span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a><span class="sd">            - Dataset.read_array: Read the values stored in a dataset band.</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a>        <span class="n">src</span> <span class="o">=</span> <span class="n">_io</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="n">read_only</span><span class="p">,</span> <span class="n">file_i</span><span class="o">=</span><span class="n">file_i</span><span class="p">)</span>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">access</span><span class="o">=</span><span class="s2">&quot;read_only&quot;</span> <span class="k">if</span> <span class="n">read_only</span> <span class="k">else</span> <span class="s2">&quot;write&quot;</span><span class="p">)</span>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">read_array</span><span class="p">(</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">GeoDataFrame</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Read the values stored in a given band.</span>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a><span class="sd">        Data Chuncks/blocks</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a><span class="sd">            When a raster dataset is stored on disk, it might not be stored as one continuous chunk of data. Instead,</span>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a><span class="sd">            it can be divided into smaller rectangular blocks or tiles. These blocks can be individually accessed,</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a><span class="sd">            which is particularly useful for large datasets:</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a><span class="sd">                - Efficiency: Reading or writing small blocks requires less memory than dealing with the entire dataset</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a><span class="sd">                      at once. This is especially beneficial when only a small portion of the data needs to be processed.</span>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a><span class="sd">                - Performance: For certain file formats and operations, working with optimal block sizes can significantly</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a><span class="sd">                      improve performance. For example, if the block size matches the reading or processing window,</span>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a><span class="sd">                      Pyramids can minimize disk access and data transfer.</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a><span class="sd">            band (int, optional):</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a><span class="sd">                The band you want to get its data. If None, data of all bands will be read. Default is None.</span>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a><span class="sd">            window (List[int] | GeoDataFrame, optional):</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a><span class="sd">                Specify a block of data to read from the dataset. The window can be specified in two ways:</span>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a><span class="sd">                - List:</span>
<a id="__codelineno-0-589" name="__codelineno-0-589"></a><span class="sd">                    Window specified as a list of 4 integers [offset_x, offset_y, window_columns, window_rows].</span>
<a id="__codelineno-0-590" name="__codelineno-0-590"></a>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a><span class="sd">                    - offset_x/column index: x offset of the block.</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a><span class="sd">                    - offset_y/row index: y offset of the block.</span>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a><span class="sd">                    - window_columns: number of columns in the block.</span>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a><span class="sd">                    - window_rows: number of rows in the block.</span>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a><span class="sd">                - GeoDataFrame:</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a><span class="sd">                    GeoDataFrame with a geometry column filled with polygon geometries; the function will get the</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a><span class="sd">                    total_bounds of the GeoDataFrame and use it as a window to read the raster.</span>
<a id="__codelineno-0-599" name="__codelineno-0-599"></a>
<a id="__codelineno-0-600" name="__codelineno-0-600"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-601" name="__codelineno-0-601"></a><span class="sd">            np.ndarray:</span>
<a id="__codelineno-0-602" name="__codelineno-0-602"></a><span class="sd">                array with all the values in the raster.</span>
<a id="__codelineno-0-603" name="__codelineno-0-603"></a>
<a id="__codelineno-0-604" name="__codelineno-0-604"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-605" name="__codelineno-0-605"></a><span class="sd">            - Create `Dataset` consisting of 4 bands, 5 rows, and 5 columns at the point lon/lat (0, 0):</span>
<a id="__codelineno-0-606" name="__codelineno-0-606"></a>
<a id="__codelineno-0-607" name="__codelineno-0-607"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-608" name="__codelineno-0-608"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-609" name="__codelineno-0-609"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(4, 5, 5)</span>
<a id="__codelineno-0-610" name="__codelineno-0-610"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-611" name="__codelineno-0-611"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-612" name="__codelineno-0-612"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-613" name="__codelineno-0-613"></a>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a><span class="sd">              ```</span>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a>
<a id="__codelineno-0-616" name="__codelineno-0-616"></a><span class="sd">            - Read all the values stored in a given band:</span>
<a id="__codelineno-0-617" name="__codelineno-0-617"></a>
<a id="__codelineno-0-618" name="__codelineno-0-618"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-619" name="__codelineno-0-619"></a><span class="sd">              &gt;&gt;&gt; arr = dataset.read_array(band=0) # doctest: +SKIP</span>
<a id="__codelineno-0-620" name="__codelineno-0-620"></a><span class="sd">              array([[0.50482225, 0.45678043, 0.53294294, 0.28862223, 0.66753579],</span>
<a id="__codelineno-0-621" name="__codelineno-0-621"></a><span class="sd">                     [0.38471912, 0.14617829, 0.05045189, 0.00761358, 0.25501918],</span>
<a id="__codelineno-0-622" name="__codelineno-0-622"></a><span class="sd">                     [0.32689036, 0.37358843, 0.32233918, 0.75450564, 0.45197608],</span>
<a id="__codelineno-0-623" name="__codelineno-0-623"></a><span class="sd">                     [0.22944676, 0.2780928 , 0.71605189, 0.71859309, 0.61896933],</span>
<a id="__codelineno-0-624" name="__codelineno-0-624"></a><span class="sd">                     [0.47740168, 0.76490779, 0.07679277, 0.16142599, 0.73630836]])</span>
<a id="__codelineno-0-625" name="__codelineno-0-625"></a>
<a id="__codelineno-0-626" name="__codelineno-0-626"></a><span class="sd">              ```</span>
<a id="__codelineno-0-627" name="__codelineno-0-627"></a>
<a id="__codelineno-0-628" name="__codelineno-0-628"></a><span class="sd">            - Read a 2x2 block from the first band. The block starts at the 2nd column (index 1) and 2nd row (index 1)</span>
<a id="__codelineno-0-629" name="__codelineno-0-629"></a><span class="sd">                (the first index is the column index):</span>
<a id="__codelineno-0-630" name="__codelineno-0-630"></a>
<a id="__codelineno-0-631" name="__codelineno-0-631"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-632" name="__codelineno-0-632"></a><span class="sd">              &gt;&gt;&gt; arr = dataset.read_array(band=0, window=[1, 1, 2, 2])</span>
<a id="__codelineno-0-633" name="__codelineno-0-633"></a><span class="sd">              &gt;&gt;&gt; print(arr) # doctest: +SKIP</span>
<a id="__codelineno-0-634" name="__codelineno-0-634"></a><span class="sd">              array([[0.14617829, 0.05045189],</span>
<a id="__codelineno-0-635" name="__codelineno-0-635"></a><span class="sd">                     [0.37358843, 0.32233918]])</span>
<a id="__codelineno-0-636" name="__codelineno-0-636"></a>
<a id="__codelineno-0-637" name="__codelineno-0-637"></a><span class="sd">              ```</span>
<a id="__codelineno-0-638" name="__codelineno-0-638"></a>
<a id="__codelineno-0-639" name="__codelineno-0-639"></a><span class="sd">            - If you check the values of the 2x2 block, you will find them the same as the values in the entire array</span>
<a id="__codelineno-0-640" name="__codelineno-0-640"></a><span class="sd">                of band 0, starting at the 2nd row and 2nd column.</span>
<a id="__codelineno-0-641" name="__codelineno-0-641"></a>
<a id="__codelineno-0-642" name="__codelineno-0-642"></a><span class="sd">            - Read a block using a GeoDataFrame polygon that covers the same area as the window above:</span>
<a id="__codelineno-0-643" name="__codelineno-0-643"></a>
<a id="__codelineno-0-644" name="__codelineno-0-644"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-645" name="__codelineno-0-645"></a><span class="sd">              &gt;&gt;&gt; import geopandas as gpd</span>
<a id="__codelineno-0-646" name="__codelineno-0-646"></a><span class="sd">              &gt;&gt;&gt; from shapely.geometry import Polygon</span>
<a id="__codelineno-0-647" name="__codelineno-0-647"></a><span class="sd">              &gt;&gt;&gt; poly = gpd.GeoDataFrame(geometry=[Polygon([(0.1, -0.1), (0.1, -0.2), (0.2, -0.2), (0.2, -0.1)])], crs=4326)</span>
<a id="__codelineno-0-648" name="__codelineno-0-648"></a><span class="sd">              &gt;&gt;&gt; arr = dataset.read_array(band=0, window=poly)</span>
<a id="__codelineno-0-649" name="__codelineno-0-649"></a><span class="sd">              &gt;&gt;&gt; print(arr) # doctest: +SKIP</span>
<a id="__codelineno-0-650" name="__codelineno-0-650"></a><span class="sd">              array([[0.14617829, 0.05045189],</span>
<a id="__codelineno-0-651" name="__codelineno-0-651"></a><span class="sd">                     [0.37358843, 0.32233918]])</span>
<a id="__codelineno-0-652" name="__codelineno-0-652"></a>
<a id="__codelineno-0-653" name="__codelineno-0-653"></a><span class="sd">              ```</span>
<a id="__codelineno-0-654" name="__codelineno-0-654"></a>
<a id="__codelineno-0-655" name="__codelineno-0-655"></a><span class="sd">        See Also:</span>
<a id="__codelineno-0-656" name="__codelineno-0-656"></a><span class="sd">            - Dataset.get_tile: Read the dataset in chunks.</span>
<a id="__codelineno-0-657" name="__codelineno-0-657"></a><span class="sd">            - Dataset.get_block_arrangement: Get block arrangement to read the dataset in chunks.</span>
<a id="__codelineno-0-658" name="__codelineno-0-658"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-659" name="__codelineno-0-659"></a>        <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-660" name="__codelineno-0-660"></a>            <span class="n">rows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="k">if</span> <span class="n">window</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">window</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-0-661" name="__codelineno-0-661"></a>            <span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">window</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">window</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<a id="__codelineno-0-662" name="__codelineno-0-662"></a>            <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span>
<a id="__codelineno-0-663" name="__codelineno-0-663"></a>                <span class="p">(</span>
<a id="__codelineno-0-664" name="__codelineno-0-664"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">,</span>
<a id="__codelineno-0-665" name="__codelineno-0-665"></a>                    <span class="n">rows</span><span class="p">,</span>
<a id="__codelineno-0-666" name="__codelineno-0-666"></a>                    <span class="n">columns</span><span class="p">,</span>
<a id="__codelineno-0-667" name="__codelineno-0-667"></a>                <span class="p">),</span>
<a id="__codelineno-0-668" name="__codelineno-0-668"></a>                <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">numpy_dtype</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-0-669" name="__codelineno-0-669"></a>            <span class="p">)</span>
<a id="__codelineno-0-670" name="__codelineno-0-670"></a>
<a id="__codelineno-0-671" name="__codelineno-0-671"></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-672" name="__codelineno-0-672"></a>                <span class="k">if</span> <span class="n">window</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-673" name="__codelineno-0-673"></a>                    <span class="c1"># this line could be replaced with the following line</span>
<a id="__codelineno-0-674" name="__codelineno-0-674"></a>                    <span class="c1"># arr[i, :, :] = self._iloc(i).ReadAsArray()</span>
<a id="__codelineno-0-675" name="__codelineno-0-675"></a>                    <span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
<a id="__codelineno-0-676" name="__codelineno-0-676"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-677" name="__codelineno-0-677"></a>                    <span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_block</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">window</span><span class="p">)</span>
<a id="__codelineno-0-678" name="__codelineno-0-678"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-679" name="__codelineno-0-679"></a>            <span class="c1"># given band number or the raster has only one band</span>
<a id="__codelineno-0-680" name="__codelineno-0-680"></a>            <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-681" name="__codelineno-0-681"></a>                <span class="n">band</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-682" name="__codelineno-0-682"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-683" name="__codelineno-0-683"></a>                <span class="k">if</span> <span class="n">band</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-684" name="__codelineno-0-684"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-685" name="__codelineno-0-685"></a>                        <span class="sa">f</span><span class="s2">&quot;band index should be between 0 and </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-686" name="__codelineno-0-686"></a>                    <span class="p">)</span>
<a id="__codelineno-0-687" name="__codelineno-0-687"></a>            <span class="k">if</span> <span class="n">window</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-688" name="__codelineno-0-688"></a>                <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">band</span><span class="p">)</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
<a id="__codelineno-0-689" name="__codelineno-0-689"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-690" name="__codelineno-0-690"></a>                <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_block</span><span class="p">(</span><span class="n">band</span><span class="p">,</span> <span class="n">window</span><span class="p">)</span>
<a id="__codelineno-0-691" name="__codelineno-0-691"></a>
<a id="__codelineno-0-692" name="__codelineno-0-692"></a>        <span class="k">return</span> <span class="n">arr</span>
<a id="__codelineno-0-693" name="__codelineno-0-693"></a>
<a id="__codelineno-0-694" name="__codelineno-0-694"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_read_block</span><span class="p">(</span>
<a id="__codelineno-0-695" name="__codelineno-0-695"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">GeoDataFrame</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span>
<a id="__codelineno-0-696" name="__codelineno-0-696"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-697" name="__codelineno-0-697"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Read block of data from the dataset.</span>
<a id="__codelineno-0-698" name="__codelineno-0-698"></a>
<a id="__codelineno-0-699" name="__codelineno-0-699"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-700" name="__codelineno-0-700"></a><span class="sd">            band (int):</span>
<a id="__codelineno-0-701" name="__codelineno-0-701"></a><span class="sd">                Band index.</span>
<a id="__codelineno-0-702" name="__codelineno-0-702"></a><span class="sd">            window (List[int] | GeoDataFrame):</span>
<a id="__codelineno-0-703" name="__codelineno-0-703"></a><span class="sd">                - List[int]: Window to specify a block of data to read from the dataset.</span>
<a id="__codelineno-0-704" name="__codelineno-0-704"></a><span class="sd">                    The window should be a list of 4 integers [offset_x, offset_y, window_columns, window_rows].</span>
<a id="__codelineno-0-705" name="__codelineno-0-705"></a><span class="sd">                    - offset_x: x offset of the block.</span>
<a id="__codelineno-0-706" name="__codelineno-0-706"></a><span class="sd">                    - offset_y: y offset of the block.</span>
<a id="__codelineno-0-707" name="__codelineno-0-707"></a><span class="sd">                    - window_columns: number of columns in the block.</span>
<a id="__codelineno-0-708" name="__codelineno-0-708"></a><span class="sd">                    - window_rows: number of rows in the block.</span>
<a id="__codelineno-0-709" name="__codelineno-0-709"></a><span class="sd">                - GeoDataFrame:</span>
<a id="__codelineno-0-710" name="__codelineno-0-710"></a><span class="sd">                    A GeoDataFrame with a polygon geometry. The function will get the total_bounds of the</span>
<a id="__codelineno-0-711" name="__codelineno-0-711"></a><span class="sd">                    GeoDataFrame and use it as a window to read the raster.</span>
<a id="__codelineno-0-712" name="__codelineno-0-712"></a>
<a id="__codelineno-0-713" name="__codelineno-0-713"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-714" name="__codelineno-0-714"></a><span class="sd">            np.ndarray:</span>
<a id="__codelineno-0-715" name="__codelineno-0-715"></a><span class="sd">                Array with the values of the block. The shape of the array is (window[2], window[3]), and the</span>
<a id="__codelineno-0-716" name="__codelineno-0-716"></a><span class="sd">                location of the block in the raster is (window[0], window[1]).</span>
<a id="__codelineno-0-717" name="__codelineno-0-717"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-718" name="__codelineno-0-718"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">GeoDataFrame</span><span class="p">):</span>
<a id="__codelineno-0-719" name="__codelineno-0-719"></a>            <span class="n">window</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_polygon_to_window</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>
<a id="__codelineno-0-720" name="__codelineno-0-720"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-721" name="__codelineno-0-721"></a>            <span class="n">block</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">band</span><span class="p">)</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">(</span>
<a id="__codelineno-0-722" name="__codelineno-0-722"></a>                <span class="n">window</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">window</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">window</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">window</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-0-723" name="__codelineno-0-723"></a>            <span class="p">)</span>
<a id="__codelineno-0-724" name="__codelineno-0-724"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-725" name="__codelineno-0-725"></a>            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="fm">__contains__</span><span class="p">(</span><span class="s2">&quot;Access window out of range in RasterIO()&quot;</span><span class="p">):</span>
<a id="__codelineno-0-726" name="__codelineno-0-726"></a>                <span class="k">raise</span> <span class="n">OutOfBoundsError</span><span class="p">(</span>
<a id="__codelineno-0-727" name="__codelineno-0-727"></a>                    <span class="sa">f</span><span class="s2">&quot;The window you entered (</span><span class="si">{</span><span class="n">window</span><span class="si">}</span><span class="s2">)is out of the raster bounds: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">rows</span><span class="p">,</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-728" name="__codelineno-0-728"></a>                <span class="p">)</span>
<a id="__codelineno-0-729" name="__codelineno-0-729"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-730" name="__codelineno-0-730"></a>                <span class="k">raise</span> <span class="n">e</span>
<a id="__codelineno-0-731" name="__codelineno-0-731"></a>        <span class="k">return</span> <span class="n">block</span>
<a id="__codelineno-0-732" name="__codelineno-0-732"></a>
<a id="__codelineno-0-733" name="__codelineno-0-733"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_convert_polygon_to_window</span><span class="p">(</span>
<a id="__codelineno-0-734" name="__codelineno-0-734"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">GeoDataFrame</span><span class="p">,</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">]</span>
<a id="__codelineno-0-735" name="__codelineno-0-735"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<a id="__codelineno-0-736" name="__codelineno-0-736"></a>        <span class="n">poly</span> <span class="o">=</span> <span class="n">FeatureCollection</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
<a id="__codelineno-0-737" name="__codelineno-0-737"></a>        <span class="n">bounds</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">total_bounds</span>
<a id="__codelineno-0-738" name="__codelineno-0-738"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">])</span>
<a id="__codelineno-0-739" name="__codelineno-0-739"></a>        <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;top_left&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-0-740" name="__codelineno-0-740"></a>        <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;bottom_right&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-741" name="__codelineno-0-741"></a>        <span class="n">arr_indeces</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">map_to_array_coordinates</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-0-742" name="__codelineno-0-742"></a>        <span class="n">xoff</span> <span class="o">=</span> <span class="n">arr_indeces</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-743" name="__codelineno-0-743"></a>        <span class="n">yoff</span> <span class="o">=</span> <span class="n">arr_indeces</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-744" name="__codelineno-0-744"></a>        <span class="n">x_size</span> <span class="o">=</span> <span class="n">arr_indeces</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">arr_indeces</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-745" name="__codelineno-0-745"></a>        <span class="n">y_size</span> <span class="o">=</span> <span class="n">arr_indeces</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">arr_indeces</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-746" name="__codelineno-0-746"></a>        <span class="k">return</span> <span class="p">[</span><span class="n">xoff</span><span class="p">,</span> <span class="n">yoff</span><span class="p">,</span> <span class="n">x_size</span><span class="p">,</span> <span class="n">y_size</span><span class="p">]</span>
<a id="__codelineno-0-747" name="__codelineno-0-747"></a>
<a id="__codelineno-0-748" name="__codelineno-0-748"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-749" name="__codelineno-0-749"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">top_left_corner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-750" name="__codelineno-0-750"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Top left corner coordinates.</span>
<a id="__codelineno-0-751" name="__codelineno-0-751"></a>
<a id="__codelineno-0-752" name="__codelineno-0-752"></a><span class="sd">        See Also:</span>
<a id="__codelineno-0-753" name="__codelineno-0-753"></a><span class="sd">            - Dataset.geotransform: Dataset geotransform.</span>
<a id="__codelineno-0-754" name="__codelineno-0-754"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-755" name="__codelineno-0-755"></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">top_left_corner</span>
<a id="__codelineno-0-756" name="__codelineno-0-756"></a>
<a id="__codelineno-0-757" name="__codelineno-0-757"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-758" name="__codelineno-0-758"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GeoDataFrame</span><span class="p">:</span>
<a id="__codelineno-0-759" name="__codelineno-0-759"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-760" name="__codelineno-0-760"></a><span class="sd">        Bounds - the bbox as a geodataframe with a polygon geometry.</span>
<a id="__codelineno-0-761" name="__codelineno-0-761"></a>
<a id="__codelineno-0-762" name="__codelineno-0-762"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-763" name="__codelineno-0-763"></a><span class="sd">            - Create a Dataset (1 band, 10 rows, 10 columns) at lon/lat (0, 0):</span>
<a id="__codelineno-0-764" name="__codelineno-0-764"></a>
<a id="__codelineno-0-765" name="__codelineno-0-765"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-766" name="__codelineno-0-766"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-767" name="__codelineno-0-767"></a><span class="sd">              &gt;&gt;&gt; import pandas as pd</span>
<a id="__codelineno-0-768" name="__codelineno-0-768"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1, 3, size=(10, 10))</span>
<a id="__codelineno-0-769" name="__codelineno-0-769"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-770" name="__codelineno-0-770"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-771" name="__codelineno-0-771"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-772" name="__codelineno-0-772"></a>
<a id="__codelineno-0-773" name="__codelineno-0-773"></a><span class="sd">              ```</span>
<a id="__codelineno-0-774" name="__codelineno-0-774"></a>
<a id="__codelineno-0-775" name="__codelineno-0-775"></a><span class="sd">            - Get the bounds of the dataset:</span>
<a id="__codelineno-0-776" name="__codelineno-0-776"></a>
<a id="__codelineno-0-777" name="__codelineno-0-777"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-778" name="__codelineno-0-778"></a><span class="sd">              &gt;&gt;&gt; bounds = dataset.bounds</span>
<a id="__codelineno-0-779" name="__codelineno-0-779"></a><span class="sd">              &gt;&gt;&gt; print(bounds) # doctest: +SKIP</span>
<a id="__codelineno-0-780" name="__codelineno-0-780"></a><span class="sd">                                                      geometry</span>
<a id="__codelineno-0-781" name="__codelineno-0-781"></a><span class="sd">              0  POLYGON ((0 0, 0 -0.5, 0.5 -0.5, 0.5 0, 0 0))</span>
<a id="__codelineno-0-782" name="__codelineno-0-782"></a>
<a id="__codelineno-0-783" name="__codelineno-0-783"></a><span class="sd">              ```</span>
<a id="__codelineno-0-784" name="__codelineno-0-784"></a>
<a id="__codelineno-0-785" name="__codelineno-0-785"></a><span class="sd">        See Also:</span>
<a id="__codelineno-0-786" name="__codelineno-0-786"></a><span class="sd">            - Dataset.bbox:</span>
<a id="__codelineno-0-787" name="__codelineno-0-787"></a><span class="sd">                Dataset bounding box.</span>
<a id="__codelineno-0-788" name="__codelineno-0-788"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-789" name="__codelineno-0-789"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_bounds</span><span class="p">()</span>
<a id="__codelineno-0-790" name="__codelineno-0-790"></a>
<a id="__codelineno-0-791" name="__codelineno-0-791"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-792" name="__codelineno-0-792"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
<a id="__codelineno-0-793" name="__codelineno-0-793"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-794" name="__codelineno-0-794"></a><span class="sd">        Bound box [xmin, ymin, xmax, ymax].</span>
<a id="__codelineno-0-795" name="__codelineno-0-795"></a>
<a id="__codelineno-0-796" name="__codelineno-0-796"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-797" name="__codelineno-0-797"></a><span class="sd">            - Create a Dataset (1 band, 10 rows, 10 columns) at lon/lat (0, 0):</span>
<a id="__codelineno-0-798" name="__codelineno-0-798"></a>
<a id="__codelineno-0-799" name="__codelineno-0-799"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-800" name="__codelineno-0-800"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-801" name="__codelineno-0-801"></a><span class="sd">              &gt;&gt;&gt; import pandas as pd</span>
<a id="__codelineno-0-802" name="__codelineno-0-802"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1, 3, size=(10, 10))</span>
<a id="__codelineno-0-803" name="__codelineno-0-803"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-804" name="__codelineno-0-804"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-805" name="__codelineno-0-805"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-806" name="__codelineno-0-806"></a>
<a id="__codelineno-0-807" name="__codelineno-0-807"></a><span class="sd">              ```</span>
<a id="__codelineno-0-808" name="__codelineno-0-808"></a>
<a id="__codelineno-0-809" name="__codelineno-0-809"></a><span class="sd">            - Get the bounding box of the dataset:</span>
<a id="__codelineno-0-810" name="__codelineno-0-810"></a>
<a id="__codelineno-0-811" name="__codelineno-0-811"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-812" name="__codelineno-0-812"></a><span class="sd">              &gt;&gt;&gt; bbox = dataset.bbox</span>
<a id="__codelineno-0-813" name="__codelineno-0-813"></a><span class="sd">              &gt;&gt;&gt; print(bbox) # doctest: +SKIP</span>
<a id="__codelineno-0-814" name="__codelineno-0-814"></a><span class="sd">              [0.0, -0.5, 0.5, 0.0]</span>
<a id="__codelineno-0-815" name="__codelineno-0-815"></a>
<a id="__codelineno-0-816" name="__codelineno-0-816"></a><span class="sd">              ```</span>
<a id="__codelineno-0-817" name="__codelineno-0-817"></a>
<a id="__codelineno-0-818" name="__codelineno-0-818"></a><span class="sd">        See Also:</span>
<a id="__codelineno-0-819" name="__codelineno-0-819"></a><span class="sd">            - Dataset.bounds: Dataset bounding polygon.</span>
<a id="__codelineno-0-820" name="__codelineno-0-820"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-821" name="__codelineno-0-821"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_bbox</span><span class="p">()</span>
<a id="__codelineno-0-822" name="__codelineno-0-822"></a>
<a id="__codelineno-0-823" name="__codelineno-0-823"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-824" name="__codelineno-0-824"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">lon</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-825" name="__codelineno-0-825"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Longitude coordinates.</span>
<a id="__codelineno-0-826" name="__codelineno-0-826"></a>
<a id="__codelineno-0-827" name="__codelineno-0-827"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-828" name="__codelineno-0-828"></a><span class="sd">            - Create a Dataset (1 band, 5 rows, 5 columns) at lon/lat (0, 0):</span>
<a id="__codelineno-0-829" name="__codelineno-0-829"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-830" name="__codelineno-0-830"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-831" name="__codelineno-0-831"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1,2, size=(5, 5))</span>
<a id="__codelineno-0-832" name="__codelineno-0-832"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-833" name="__codelineno-0-833"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-834" name="__codelineno-0-834"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-835" name="__codelineno-0-835"></a>
<a id="__codelineno-0-836" name="__codelineno-0-836"></a><span class="sd">              ```</span>
<a id="__codelineno-0-837" name="__codelineno-0-837"></a>
<a id="__codelineno-0-838" name="__codelineno-0-838"></a><span class="sd">            - Get the longitude/x coordinates of the center of all cells in the dataset:</span>
<a id="__codelineno-0-839" name="__codelineno-0-839"></a>
<a id="__codelineno-0-840" name="__codelineno-0-840"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-841" name="__codelineno-0-841"></a><span class="sd">              &gt;&gt;&gt; print(dataset.lon)</span>
<a id="__codelineno-0-842" name="__codelineno-0-842"></a><span class="sd">              [0.025 0.075 0.125 0.175 0.225]</span>
<a id="__codelineno-0-843" name="__codelineno-0-843"></a><span class="sd">              &gt;&gt;&gt; print(dataset.x)</span>
<a id="__codelineno-0-844" name="__codelineno-0-844"></a><span class="sd">              [0.025 0.075 0.125 0.175 0.225]</span>
<a id="__codelineno-0-845" name="__codelineno-0-845"></a>
<a id="__codelineno-0-846" name="__codelineno-0-846"></a><span class="sd">              ```</span>
<a id="__codelineno-0-847" name="__codelineno-0-847"></a>
<a id="__codelineno-0-848" name="__codelineno-0-848"></a><span class="sd">        See Also:</span>
<a id="__codelineno-0-849" name="__codelineno-0-849"></a><span class="sd">            - Dataset.x: Dataset x coordinates.</span>
<a id="__codelineno-0-850" name="__codelineno-0-850"></a><span class="sd">            - Dataset.lat: Dataset latitude.</span>
<a id="__codelineno-0-851" name="__codelineno-0-851"></a><span class="sd">            - Dataset.lon: Dataset longitude.</span>
<a id="__codelineno-0-852" name="__codelineno-0-852"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-853" name="__codelineno-0-853"></a>        <span class="n">x_coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_x_lon_dimension_array</span><span class="p">(</span>
<a id="__codelineno-0-854" name="__codelineno-0-854"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">top_left_corner</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span>
<a id="__codelineno-0-855" name="__codelineno-0-855"></a>        <span class="p">)</span>
<a id="__codelineno-0-856" name="__codelineno-0-856"></a>        <span class="k">return</span> <span class="n">x_coords</span>
<a id="__codelineno-0-857" name="__codelineno-0-857"></a>
<a id="__codelineno-0-858" name="__codelineno-0-858"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-859" name="__codelineno-0-859"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">lat</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-860" name="__codelineno-0-860"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Latitude-coordinate.</span>
<a id="__codelineno-0-861" name="__codelineno-0-861"></a>
<a id="__codelineno-0-862" name="__codelineno-0-862"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-863" name="__codelineno-0-863"></a><span class="sd">            - Create a Dataset (1 band, 5 rows, 5 columns) at lon/lat (0, 0):</span>
<a id="__codelineno-0-864" name="__codelineno-0-864"></a>
<a id="__codelineno-0-865" name="__codelineno-0-865"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-866" name="__codelineno-0-866"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-867" name="__codelineno-0-867"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1,2, size=(5, 5))</span>
<a id="__codelineno-0-868" name="__codelineno-0-868"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-869" name="__codelineno-0-869"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-870" name="__codelineno-0-870"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-871" name="__codelineno-0-871"></a>
<a id="__codelineno-0-872" name="__codelineno-0-872"></a><span class="sd">              ```</span>
<a id="__codelineno-0-873" name="__codelineno-0-873"></a>
<a id="__codelineno-0-874" name="__codelineno-0-874"></a><span class="sd">            - Get the latitude/y coordinates of the center of all cells in the dataset:</span>
<a id="__codelineno-0-875" name="__codelineno-0-875"></a>
<a id="__codelineno-0-876" name="__codelineno-0-876"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-877" name="__codelineno-0-877"></a><span class="sd">              &gt;&gt;&gt; print(dataset.lat)</span>
<a id="__codelineno-0-878" name="__codelineno-0-878"></a><span class="sd">              [-0.025 -0.075 -0.125 -0.175 -0.225]</span>
<a id="__codelineno-0-879" name="__codelineno-0-879"></a><span class="sd">              &gt;&gt;&gt; print(dataset.y)</span>
<a id="__codelineno-0-880" name="__codelineno-0-880"></a><span class="sd">              [-0.025 -0.075 -0.125 -0.175 -0.225]</span>
<a id="__codelineno-0-881" name="__codelineno-0-881"></a>
<a id="__codelineno-0-882" name="__codelineno-0-882"></a><span class="sd">              ```</span>
<a id="__codelineno-0-883" name="__codelineno-0-883"></a>
<a id="__codelineno-0-884" name="__codelineno-0-884"></a><span class="sd">        See Also:</span>
<a id="__codelineno-0-885" name="__codelineno-0-885"></a><span class="sd">            - Dataset.x: Dataset x coordinates.</span>
<a id="__codelineno-0-886" name="__codelineno-0-886"></a><span class="sd">            - Dataset.y: Dataset y coordinates.</span>
<a id="__codelineno-0-887" name="__codelineno-0-887"></a><span class="sd">            - Dataset.lon: Dataset longitude.</span>
<a id="__codelineno-0-888" name="__codelineno-0-888"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-889" name="__codelineno-0-889"></a>        <span class="n">y_coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_y_lat_dimension_array</span><span class="p">(</span>
<a id="__codelineno-0-890" name="__codelineno-0-890"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">top_left_corner</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span>
<a id="__codelineno-0-891" name="__codelineno-0-891"></a>        <span class="p">)</span>
<a id="__codelineno-0-892" name="__codelineno-0-892"></a>        <span class="k">return</span> <span class="n">y_coords</span>
<a id="__codelineno-0-893" name="__codelineno-0-893"></a>
<a id="__codelineno-0-894" name="__codelineno-0-894"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-895" name="__codelineno-0-895"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-896" name="__codelineno-0-896"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;X-coordinate/Longitude.</span>
<a id="__codelineno-0-897" name="__codelineno-0-897"></a>
<a id="__codelineno-0-898" name="__codelineno-0-898"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-899" name="__codelineno-0-899"></a><span class="sd">            - Create `Dataset` consists of 1 band, 5 rows, 5 columns, at the point lon/lat (0, 0).</span>
<a id="__codelineno-0-900" name="__codelineno-0-900"></a>
<a id="__codelineno-0-901" name="__codelineno-0-901"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-902" name="__codelineno-0-902"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-903" name="__codelineno-0-903"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1,2, size=(5, 5))</span>
<a id="__codelineno-0-904" name="__codelineno-0-904"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-905" name="__codelineno-0-905"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-906" name="__codelineno-0-906"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-907" name="__codelineno-0-907"></a>
<a id="__codelineno-0-908" name="__codelineno-0-908"></a><span class="sd">              ```</span>
<a id="__codelineno-0-909" name="__codelineno-0-909"></a>
<a id="__codelineno-0-910" name="__codelineno-0-910"></a><span class="sd">            - To get the longitude/x coordinates of the center of all cells in the dataset.</span>
<a id="__codelineno-0-911" name="__codelineno-0-911"></a>
<a id="__codelineno-0-912" name="__codelineno-0-912"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-913" name="__codelineno-0-913"></a><span class="sd">              &gt;&gt;&gt; print(dataset.lon)</span>
<a id="__codelineno-0-914" name="__codelineno-0-914"></a><span class="sd">              [0.025 0.075 0.125 0.175 0.225]</span>
<a id="__codelineno-0-915" name="__codelineno-0-915"></a><span class="sd">              &gt;&gt;&gt; print(dataset.x)</span>
<a id="__codelineno-0-916" name="__codelineno-0-916"></a><span class="sd">              [0.025 0.075 0.125 0.175 0.225]</span>
<a id="__codelineno-0-917" name="__codelineno-0-917"></a>
<a id="__codelineno-0-918" name="__codelineno-0-918"></a><span class="sd">              ```</span>
<a id="__codelineno-0-919" name="__codelineno-0-919"></a>
<a id="__codelineno-0-920" name="__codelineno-0-920"></a><span class="sd">        See Also:</span>
<a id="__codelineno-0-921" name="__codelineno-0-921"></a><span class="sd">            - Dataset.lat: Dataset latitude.</span>
<a id="__codelineno-0-922" name="__codelineno-0-922"></a><span class="sd">            - Dataset.y: Dataset y coordinates.</span>
<a id="__codelineno-0-923" name="__codelineno-0-923"></a><span class="sd">            - Dataset.lon: Dataset longitude.</span>
<a id="__codelineno-0-924" name="__codelineno-0-924"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-925" name="__codelineno-0-925"></a>        <span class="c1"># X_coordinate = upper-left corner x + index * cell size + cell-size/2</span>
<a id="__codelineno-0-926" name="__codelineno-0-926"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lon</span>
<a id="__codelineno-0-927" name="__codelineno-0-927"></a>
<a id="__codelineno-0-928" name="__codelineno-0-928"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-929" name="__codelineno-0-929"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">y</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-930" name="__codelineno-0-930"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Y-coordinate/Latitude.</span>
<a id="__codelineno-0-931" name="__codelineno-0-931"></a>
<a id="__codelineno-0-932" name="__codelineno-0-932"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-933" name="__codelineno-0-933"></a><span class="sd">            - Create `Dataset` consists of 1 band, 5 rows, 5 columns, at the point lon/lat (0, 0).</span>
<a id="__codelineno-0-934" name="__codelineno-0-934"></a>
<a id="__codelineno-0-935" name="__codelineno-0-935"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-936" name="__codelineno-0-936"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-937" name="__codelineno-0-937"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1,2, size=(5, 5))</span>
<a id="__codelineno-0-938" name="__codelineno-0-938"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-939" name="__codelineno-0-939"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-940" name="__codelineno-0-940"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-941" name="__codelineno-0-941"></a>
<a id="__codelineno-0-942" name="__codelineno-0-942"></a><span class="sd">              ```</span>
<a id="__codelineno-0-943" name="__codelineno-0-943"></a>
<a id="__codelineno-0-944" name="__codelineno-0-944"></a><span class="sd">            - to get the longitude/x coordinates of the center of all cells in the dataset.</span>
<a id="__codelineno-0-945" name="__codelineno-0-945"></a>
<a id="__codelineno-0-946" name="__codelineno-0-946"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-947" name="__codelineno-0-947"></a><span class="sd">              &gt;&gt;&gt; print(dataset.lat)</span>
<a id="__codelineno-0-948" name="__codelineno-0-948"></a><span class="sd">              [-0.025 -0.075 -0.125 -0.175 -0.225]</span>
<a id="__codelineno-0-949" name="__codelineno-0-949"></a><span class="sd">              &gt;&gt;&gt; print(dataset.y)</span>
<a id="__codelineno-0-950" name="__codelineno-0-950"></a><span class="sd">              [-0.025 -0.075 -0.125 -0.175 -0.225]</span>
<a id="__codelineno-0-951" name="__codelineno-0-951"></a>
<a id="__codelineno-0-952" name="__codelineno-0-952"></a><span class="sd">              ```</span>
<a id="__codelineno-0-953" name="__codelineno-0-953"></a>
<a id="__codelineno-0-954" name="__codelineno-0-954"></a><span class="sd">        See Also:</span>
<a id="__codelineno-0-955" name="__codelineno-0-955"></a><span class="sd">            - Dataset.x: Dataset y coordinates.</span>
<a id="__codelineno-0-956" name="__codelineno-0-956"></a><span class="sd">            - Dataset.lat: Dataset latitude.</span>
<a id="__codelineno-0-957" name="__codelineno-0-957"></a><span class="sd">            - Dataset.lon: Dataset longitude.</span>
<a id="__codelineno-0-958" name="__codelineno-0-958"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-959" name="__codelineno-0-959"></a>        <span class="c1"># X_coordinate = upper-left corner x + index * cell size + cell-size/2</span>
<a id="__codelineno-0-960" name="__codelineno-0-960"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lat</span>
<a id="__codelineno-0-961" name="__codelineno-0-961"></a>
<a id="__codelineno-0-962" name="__codelineno-0-962"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-0-963" name="__codelineno-0-963"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_x_lon_dimension_array</span><span class="p">(</span><span class="n">pivot_x</span><span class="p">,</span> <span class="n">cell_size</span><span class="p">,</span> <span class="n">columns</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-964" name="__codelineno-0-964"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get X/Lon coordinates.&quot;&quot;&quot;</span>
<a id="__codelineno-0-965" name="__codelineno-0-965"></a>        <span class="n">x_coords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
<a id="__codelineno-0-966" name="__codelineno-0-966"></a>            <span class="p">[</span><span class="n">pivot_x</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="n">cell_size</span> <span class="o">+</span> <span class="n">cell_size</span> <span class="o">/</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">columns</span><span class="p">)]</span>
<a id="__codelineno-0-967" name="__codelineno-0-967"></a>        <span class="p">)</span>
<a id="__codelineno-0-968" name="__codelineno-0-968"></a>        <span class="k">return</span> <span class="n">x_coords</span>
<a id="__codelineno-0-969" name="__codelineno-0-969"></a>
<a id="__codelineno-0-970" name="__codelineno-0-970"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-0-971" name="__codelineno-0-971"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_y_lat_dimension_array</span><span class="p">(</span><span class="n">pivot_y</span><span class="p">,</span> <span class="n">cell_size</span><span class="p">,</span> <span class="n">rows</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-972" name="__codelineno-0-972"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get Y/Lat coordinates.&quot;&quot;&quot;</span>
<a id="__codelineno-0-973" name="__codelineno-0-973"></a>        <span class="n">y_coords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
<a id="__codelineno-0-974" name="__codelineno-0-974"></a>            <span class="p">[</span><span class="n">pivot_y</span> <span class="o">-</span> <span class="n">i</span> <span class="o">*</span> <span class="n">cell_size</span> <span class="o">-</span> <span class="n">cell_size</span> <span class="o">/</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rows</span><span class="p">)]</span>
<a id="__codelineno-0-975" name="__codelineno-0-975"></a>        <span class="p">)</span>
<a id="__codelineno-0-976" name="__codelineno-0-976"></a>        <span class="k">return</span> <span class="n">y_coords</span>
<a id="__codelineno-0-977" name="__codelineno-0-977"></a>
<a id="__codelineno-0-978" name="__codelineno-0-978"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-979" name="__codelineno-0-979"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">gdal_dtype</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-980" name="__codelineno-0-980"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Data Type.&quot;&quot;&quot;</span>
<a id="__codelineno-0-981" name="__codelineno-0-981"></a>        <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-0-982" name="__codelineno-0-982"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">DataType</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-983" name="__codelineno-0-983"></a>        <span class="p">]</span>
<a id="__codelineno-0-984" name="__codelineno-0-984"></a>
<a id="__codelineno-0-985" name="__codelineno-0-985"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-986" name="__codelineno-0-986"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">numpy_dtype</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">type</span><span class="p">]:</span>
<a id="__codelineno-0-987" name="__codelineno-0-987"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;List of the numpy data Type of each band, the data type is a numpy function.&quot;&quot;&quot;</span>
<a id="__codelineno-0-988" name="__codelineno-0-988"></a>        <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-0-989" name="__codelineno-0-989"></a>            <span class="n">DTYPE_CONVERSION_DF</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">DTYPE_CONVERSION_DF</span><span class="p">[</span><span class="s2">&quot;gdal&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">,</span> <span class="s2">&quot;numpy&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-990" name="__codelineno-0-990"></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gdal_dtype</span>
<a id="__codelineno-0-991" name="__codelineno-0-991"></a>        <span class="p">]</span>
<a id="__codelineno-0-992" name="__codelineno-0-992"></a>
<a id="__codelineno-0-993" name="__codelineno-0-993"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-994" name="__codelineno-0-994"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">dtype</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-0-995" name="__codelineno-0-995"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;List of the data Type of each band as strings.&quot;&quot;&quot;</span>
<a id="__codelineno-0-996" name="__codelineno-0-996"></a>        <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-0-997" name="__codelineno-0-997"></a>            <span class="n">DTYPE_CONVERSION_DF</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">DTYPE_CONVERSION_DF</span><span class="p">[</span><span class="s2">&quot;gdal&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-998" name="__codelineno-0-998"></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gdal_dtype</span>
<a id="__codelineno-0-999" name="__codelineno-0-999"></a>        <span class="p">]</span>
<a id="__codelineno-0-1000" name="__codelineno-0-1000"></a>
<a id="__codelineno-0-1001" name="__codelineno-0-1001"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_block_arrangement</span><span class="p">(</span>
<a id="__codelineno-0-1002" name="__codelineno-0-1002"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x_block_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">y_block_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1003" name="__codelineno-0-1003"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-1004" name="__codelineno-0-1004"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get Block Arrangement.</span>
<a id="__codelineno-0-1005" name="__codelineno-0-1005"></a>
<a id="__codelineno-0-1006" name="__codelineno-0-1006"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1007" name="__codelineno-0-1007"></a><span class="sd">            band (int, optional):</span>
<a id="__codelineno-0-1008" name="__codelineno-0-1008"></a><span class="sd">                band index, by default 0</span>
<a id="__codelineno-0-1009" name="__codelineno-0-1009"></a><span class="sd">            x_block_size (int, optional):</span>
<a id="__codelineno-0-1010" name="__codelineno-0-1010"></a><span class="sd">                x block size/number of columns, by default None</span>
<a id="__codelineno-0-1011" name="__codelineno-0-1011"></a><span class="sd">            y_block_size (int, optional):</span>
<a id="__codelineno-0-1012" name="__codelineno-0-1012"></a><span class="sd">                y block size/number of rows, by default None</span>
<a id="__codelineno-0-1013" name="__codelineno-0-1013"></a>
<a id="__codelineno-0-1014" name="__codelineno-0-1014"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-1015" name="__codelineno-0-1015"></a><span class="sd">            DataFrame:</span>
<a id="__codelineno-0-1016" name="__codelineno-0-1016"></a><span class="sd">                with the following columns: [x_offset, y_offset, window_xsize, window_ysize]</span>
<a id="__codelineno-0-1017" name="__codelineno-0-1017"></a>
<a id="__codelineno-0-1018" name="__codelineno-0-1018"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-1019" name="__codelineno-0-1019"></a><span class="sd">            - Example of getting block arrangement:</span>
<a id="__codelineno-0-1020" name="__codelineno-0-1020"></a>
<a id="__codelineno-0-1021" name="__codelineno-0-1021"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-1022" name="__codelineno-0-1022"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-1023" name="__codelineno-0-1023"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(13, 14)</span>
<a id="__codelineno-0-1024" name="__codelineno-0-1024"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-1025" name="__codelineno-0-1025"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-1026" name="__codelineno-0-1026"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-1027" name="__codelineno-0-1027"></a><span class="sd">              &gt;&gt;&gt; df = dataset.get_block_arrangement(x_block_size=5, y_block_size=5)</span>
<a id="__codelineno-0-1028" name="__codelineno-0-1028"></a><span class="sd">              &gt;&gt;&gt; print(df)</span>
<a id="__codelineno-0-1029" name="__codelineno-0-1029"></a><span class="sd">                 x_offset  y_offset  window_xsize  window_ysize</span>
<a id="__codelineno-0-1030" name="__codelineno-0-1030"></a><span class="sd">              0         0         0             5             5</span>
<a id="__codelineno-0-1031" name="__codelineno-0-1031"></a><span class="sd">              1         5         0             5             5</span>
<a id="__codelineno-0-1032" name="__codelineno-0-1032"></a><span class="sd">              2        10         0             4             5</span>
<a id="__codelineno-0-1033" name="__codelineno-0-1033"></a><span class="sd">              3         0         5             5             5</span>
<a id="__codelineno-0-1034" name="__codelineno-0-1034"></a><span class="sd">              4         5         5             5             5</span>
<a id="__codelineno-0-1035" name="__codelineno-0-1035"></a><span class="sd">              5        10         5             4             5</span>
<a id="__codelineno-0-1036" name="__codelineno-0-1036"></a><span class="sd">              6         0        10             5             3</span>
<a id="__codelineno-0-1037" name="__codelineno-0-1037"></a><span class="sd">              7         5        10             5             3</span>
<a id="__codelineno-0-1038" name="__codelineno-0-1038"></a><span class="sd">              8        10        10             4             3</span>
<a id="__codelineno-0-1039" name="__codelineno-0-1039"></a>
<a id="__codelineno-0-1040" name="__codelineno-0-1040"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1041" name="__codelineno-0-1041"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1042" name="__codelineno-0-1042"></a>        <span class="n">block_sizes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">block_size</span><span class="p">[</span><span class="n">band</span><span class="p">]</span>
<a id="__codelineno-0-1043" name="__codelineno-0-1043"></a>        <span class="n">x_block_size</span> <span class="o">=</span> <span class="n">block_sizes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">x_block_size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">x_block_size</span>
<a id="__codelineno-0-1044" name="__codelineno-0-1044"></a>        <span class="n">y_block_size</span> <span class="o">=</span> <span class="n">block_sizes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">y_block_size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">y_block_size</span>
<a id="__codelineno-0-1045" name="__codelineno-0-1045"></a>
<a id="__codelineno-0-1046" name="__codelineno-0-1046"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<a id="__codelineno-0-1047" name="__codelineno-0-1047"></a>            <span class="p">[</span>
<a id="__codelineno-0-1048" name="__codelineno-0-1048"></a>                <span class="p">{</span>
<a id="__codelineno-0-1049" name="__codelineno-0-1049"></a>                    <span class="s2">&quot;x_offset&quot;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span>
<a id="__codelineno-0-1050" name="__codelineno-0-1050"></a>                    <span class="s2">&quot;y_offset&quot;</span><span class="p">:</span> <span class="n">y</span><span class="p">,</span>
<a id="__codelineno-0-1051" name="__codelineno-0-1051"></a>                    <span class="s2">&quot;window_xsize&quot;</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="n">x_block_size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span> <span class="o">-</span> <span class="n">x</span><span class="p">),</span>
<a id="__codelineno-0-1052" name="__codelineno-0-1052"></a>                    <span class="s2">&quot;window_ysize&quot;</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="n">y_block_size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="o">-</span> <span class="n">y</span><span class="p">),</span>
<a id="__codelineno-0-1053" name="__codelineno-0-1053"></a>                <span class="p">}</span>
<a id="__codelineno-0-1054" name="__codelineno-0-1054"></a>                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span><span class="p">,</span> <span class="n">y_block_size</span><span class="p">)</span>
<a id="__codelineno-0-1055" name="__codelineno-0-1055"></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">x_block_size</span><span class="p">)</span>
<a id="__codelineno-0-1056" name="__codelineno-0-1056"></a>            <span class="p">],</span>
<a id="__codelineno-0-1057" name="__codelineno-0-1057"></a>            <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x_offset&quot;</span><span class="p">,</span> <span class="s2">&quot;y_offset&quot;</span><span class="p">,</span> <span class="s2">&quot;window_xsize&quot;</span><span class="p">,</span> <span class="s2">&quot;window_ysize&quot;</span><span class="p">],</span>
<a id="__codelineno-0-1058" name="__codelineno-0-1058"></a>        <span class="p">)</span>
<a id="__codelineno-0-1059" name="__codelineno-0-1059"></a>        <span class="k">return</span> <span class="n">df</span>
<a id="__codelineno-0-1060" name="__codelineno-0-1060"></a>
<a id="__codelineno-0-1061" name="__codelineno-0-1061"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1062" name="__codelineno-0-1062"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Deep copy.</span>
<a id="__codelineno-0-1063" name="__codelineno-0-1063"></a>
<a id="__codelineno-0-1064" name="__codelineno-0-1064"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1065" name="__codelineno-0-1065"></a><span class="sd">            path (str, optional):</span>
<a id="__codelineno-0-1066" name="__codelineno-0-1066"></a><span class="sd">                Destination path to save the copied dataset. If None is passed, the copied dataset will be created in memory.</span>
<a id="__codelineno-0-1067" name="__codelineno-0-1067"></a>
<a id="__codelineno-0-1068" name="__codelineno-0-1068"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-1069" name="__codelineno-0-1069"></a><span class="sd">            - First, we will create a dataset with 1 band, 3 rows and 5 columns.</span>
<a id="__codelineno-0-1070" name="__codelineno-0-1070"></a>
<a id="__codelineno-0-1071" name="__codelineno-0-1071"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-1072" name="__codelineno-0-1072"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-1073" name="__codelineno-0-1073"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(3, 5)</span>
<a id="__codelineno-0-1074" name="__codelineno-0-1074"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-1075" name="__codelineno-0-1075"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-1076" name="__codelineno-0-1076"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-1077" name="__codelineno-0-1077"></a><span class="sd">              &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-1078" name="__codelineno-0-1078"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1079" name="__codelineno-0-1079"></a><span class="sd">                          Cell size: 0.05</span>
<a id="__codelineno-0-1080" name="__codelineno-0-1080"></a><span class="sd">                          Dimension: 3 * 5</span>
<a id="__codelineno-0-1081" name="__codelineno-0-1081"></a><span class="sd">                          EPSG: 4326</span>
<a id="__codelineno-0-1082" name="__codelineno-0-1082"></a><span class="sd">                          Number of Bands: 1</span>
<a id="__codelineno-0-1083" name="__codelineno-0-1083"></a><span class="sd">                          Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-1084" name="__codelineno-0-1084"></a><span class="sd">                          Mask: -9999.0</span>
<a id="__codelineno-0-1085" name="__codelineno-0-1085"></a><span class="sd">                          Data type: float64</span>
<a id="__codelineno-0-1086" name="__codelineno-0-1086"></a><span class="sd">                          File:...</span>
<a id="__codelineno-0-1087" name="__codelineno-0-1087"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1088" name="__codelineno-0-1088"></a>
<a id="__codelineno-0-1089" name="__codelineno-0-1089"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1090" name="__codelineno-0-1090"></a>
<a id="__codelineno-0-1091" name="__codelineno-0-1091"></a><span class="sd">            - Now, we will create a copy of the dataset.</span>
<a id="__codelineno-0-1092" name="__codelineno-0-1092"></a>
<a id="__codelineno-0-1093" name="__codelineno-0-1093"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-1094" name="__codelineno-0-1094"></a><span class="sd">              &gt;&gt;&gt; copied_dataset = dataset.copy(path=&quot;copy-dataset.tif&quot;)</span>
<a id="__codelineno-0-1095" name="__codelineno-0-1095"></a><span class="sd">              &gt;&gt;&gt; print(copied_dataset)</span>
<a id="__codelineno-0-1096" name="__codelineno-0-1096"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1097" name="__codelineno-0-1097"></a><span class="sd">                          Cell size: 0.05</span>
<a id="__codelineno-0-1098" name="__codelineno-0-1098"></a><span class="sd">                          Dimension: 3 * 5</span>
<a id="__codelineno-0-1099" name="__codelineno-0-1099"></a><span class="sd">                          EPSG: 4326</span>
<a id="__codelineno-0-1100" name="__codelineno-0-1100"></a><span class="sd">                          Number of Bands: 1</span>
<a id="__codelineno-0-1101" name="__codelineno-0-1101"></a><span class="sd">                          Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-1102" name="__codelineno-0-1102"></a><span class="sd">                          Mask: -9999.0</span>
<a id="__codelineno-0-1103" name="__codelineno-0-1103"></a><span class="sd">                          Data type: float64</span>
<a id="__codelineno-0-1104" name="__codelineno-0-1104"></a><span class="sd">                          File: copy-dataset.tif</span>
<a id="__codelineno-0-1105" name="__codelineno-0-1105"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1106" name="__codelineno-0-1106"></a>
<a id="__codelineno-0-1107" name="__codelineno-0-1107"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1108" name="__codelineno-0-1108"></a>
<a id="__codelineno-0-1109" name="__codelineno-0-1109"></a><span class="sd">            - Now close the dataset.</span>
<a id="__codelineno-0-1110" name="__codelineno-0-1110"></a>
<a id="__codelineno-0-1111" name="__codelineno-0-1111"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-1112" name="__codelineno-0-1112"></a><span class="sd">              &gt;&gt;&gt; copied_dataset.close()</span>
<a id="__codelineno-0-1113" name="__codelineno-0-1113"></a>
<a id="__codelineno-0-1114" name="__codelineno-0-1114"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1115" name="__codelineno-0-1115"></a>
<a id="__codelineno-0-1116" name="__codelineno-0-1116"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1117" name="__codelineno-0-1117"></a>        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1118" name="__codelineno-0-1118"></a>            <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<a id="__codelineno-0-1119" name="__codelineno-0-1119"></a>            <span class="n">driver</span> <span class="o">=</span> <span class="s2">&quot;MEM&quot;</span>
<a id="__codelineno-0-1120" name="__codelineno-0-1120"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1121" name="__codelineno-0-1121"></a>            <span class="n">driver</span> <span class="o">=</span> <span class="s2">&quot;GTiff&quot;</span>
<a id="__codelineno-0-1122" name="__codelineno-0-1122"></a>
<a id="__codelineno-0-1123" name="__codelineno-0-1123"></a>        <span class="n">src</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span><span class="o">.</span><span class="n">CreateCopy</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_raster</span><span class="p">)</span>
<a id="__codelineno-0-1124" name="__codelineno-0-1124"></a>
<a id="__codelineno-0-1125" name="__codelineno-0-1125"></a>        <span class="k">return</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">access</span><span class="o">=</span><span class="s2">&quot;write&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1126" name="__codelineno-0-1126"></a>
<a id="__codelineno-0-1127" name="__codelineno-0-1127"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-1128" name="__codelineno-0-1128"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Close the dataset.&quot;&quot;&quot;</span>
<a id="__codelineno-0-1129" name="__codelineno-0-1129"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_raster</span><span class="o">.</span><span class="n">FlushCache</span><span class="p">()</span>
<a id="__codelineno-0-1130" name="__codelineno-0-1130"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_raster</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1131" name="__codelineno-0-1131"></a>
<a id="__codelineno-0-1132" name="__codelineno-0-1132"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_iloc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Band</span><span class="p">:</span>
<a id="__codelineno-0-1133" name="__codelineno-0-1133"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;_iloc.</span>
<a id="__codelineno-0-1134" name="__codelineno-0-1134"></a>
<a id="__codelineno-0-1135" name="__codelineno-0-1135"></a><span class="sd">            - Access dataset bands using index.</span>
<a id="__codelineno-0-1136" name="__codelineno-0-1136"></a>
<a id="__codelineno-0-1137" name="__codelineno-0-1137"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1138" name="__codelineno-0-1138"></a><span class="sd">            i (int):</span>
<a id="__codelineno-0-1139" name="__codelineno-0-1139"></a><span class="sd">                index, the index starts from 1.</span>
<a id="__codelineno-0-1140" name="__codelineno-0-1140"></a>
<a id="__codelineno-0-1141" name="__codelineno-0-1141"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-1142" name="__codelineno-0-1142"></a><span class="sd">            gdal.Band:</span>
<a id="__codelineno-0-1143" name="__codelineno-0-1143"></a><span class="sd">                Gdal Band.</span>
<a id="__codelineno-0-1144" name="__codelineno-0-1144"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1145" name="__codelineno-0-1145"></a>        <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-1146" name="__codelineno-0-1146"></a>            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;negative index not supported&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1147" name="__codelineno-0-1147"></a>
<a id="__codelineno-0-1148" name="__codelineno-0-1148"></a>        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-1149" name="__codelineno-0-1149"></a>            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span>
<a id="__codelineno-0-1150" name="__codelineno-0-1150"></a>                <span class="sa">f</span><span class="s2">&quot;index </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> is out of bounds for axis 0 with size </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1151" name="__codelineno-0-1151"></a>            <span class="p">)</span>
<a id="__codelineno-0-1152" name="__codelineno-0-1152"></a>        <span class="n">band</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-1153" name="__codelineno-0-1153"></a>        <span class="k">return</span> <span class="n">band</span>
<a id="__codelineno-0-1154" name="__codelineno-0-1154"></a>
<a id="__codelineno-0-1155" name="__codelineno-0-1155"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_attribute_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-1156" name="__codelineno-0-1156"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the attribute table for a given band.</span>
<a id="__codelineno-0-1157" name="__codelineno-0-1157"></a>
<a id="__codelineno-0-1158" name="__codelineno-0-1158"></a><span class="sd">            - Get the attribute table of a band.</span>
<a id="__codelineno-0-1159" name="__codelineno-0-1159"></a>
<a id="__codelineno-0-1160" name="__codelineno-0-1160"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1161" name="__codelineno-0-1161"></a><span class="sd">            band (int):</span>
<a id="__codelineno-0-1162" name="__codelineno-0-1162"></a><span class="sd">                Band index, the index starts from 1.</span>
<a id="__codelineno-0-1163" name="__codelineno-0-1163"></a>
<a id="__codelineno-0-1164" name="__codelineno-0-1164"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-1165" name="__codelineno-0-1165"></a><span class="sd">            DataFrame:</span>
<a id="__codelineno-0-1166" name="__codelineno-0-1166"></a><span class="sd">                DataFrame with the attribute table.</span>
<a id="__codelineno-0-1167" name="__codelineno-0-1167"></a>
<a id="__codelineno-0-1168" name="__codelineno-0-1168"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-1169" name="__codelineno-0-1169"></a><span class="sd">            - Read a dataset and fetch its attribute table:</span>
<a id="__codelineno-0-1170" name="__codelineno-0-1170"></a>
<a id="__codelineno-0-1171" name="__codelineno-0-1171"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-1172" name="__codelineno-0-1172"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.read_file(&quot;examples/data/geotiff/south-america-mswep_1979010100.tif&quot;)</span>
<a id="__codelineno-0-1173" name="__codelineno-0-1173"></a><span class="sd">              &gt;&gt;&gt; df = dataset.get_attribute_table()</span>
<a id="__codelineno-0-1174" name="__codelineno-0-1174"></a><span class="sd">              &gt;&gt;&gt; print(df)</span>
<a id="__codelineno-0-1175" name="__codelineno-0-1175"></a><span class="sd">                Precipitation Range (mm)   Category              Description</span>
<a id="__codelineno-0-1176" name="__codelineno-0-1176"></a><span class="sd">              0                     0-50        Low   Very low precipitation</span>
<a id="__codelineno-0-1177" name="__codelineno-0-1177"></a><span class="sd">              1                   51-100   Moderate   Moderate precipitation</span>
<a id="__codelineno-0-1178" name="__codelineno-0-1178"></a><span class="sd">              2                  101-200       High       High precipitation</span>
<a id="__codelineno-0-1179" name="__codelineno-0-1179"></a><span class="sd">              3                  201-500  Very High  Very high precipitation</span>
<a id="__codelineno-0-1180" name="__codelineno-0-1180"></a><span class="sd">              4                     &gt;500    Extreme    Extreme precipitation</span>
<a id="__codelineno-0-1181" name="__codelineno-0-1181"></a>
<a id="__codelineno-0-1182" name="__codelineno-0-1182"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1183" name="__codelineno-0-1183"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1184" name="__codelineno-0-1184"></a>        <span class="n">band</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-1185" name="__codelineno-0-1185"></a>        <span class="n">rat</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">GetDefaultRAT</span><span class="p">()</span>
<a id="__codelineno-0-1186" name="__codelineno-0-1186"></a>        <span class="k">if</span> <span class="n">rat</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1187" name="__codelineno-0-1187"></a>            <span class="n">df</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1188" name="__codelineno-0-1188"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1189" name="__codelineno-0-1189"></a>            <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attribute_table_to_df</span><span class="p">(</span><span class="n">rat</span><span class="p">)</span>
<a id="__codelineno-0-1190" name="__codelineno-0-1190"></a>
<a id="__codelineno-0-1191" name="__codelineno-0-1191"></a>        <span class="k">return</span> <span class="n">df</span>
<a id="__codelineno-0-1192" name="__codelineno-0-1192"></a>
<a id="__codelineno-0-1193" name="__codelineno-0-1193"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_attribute_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">DataFrame</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1194" name="__codelineno-0-1194"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the attribute table for a band.</span>
<a id="__codelineno-0-1195" name="__codelineno-0-1195"></a>
<a id="__codelineno-0-1196" name="__codelineno-0-1196"></a><span class="sd">        The attribute table can be used to associate tabular data with the values of a raster band.</span>
<a id="__codelineno-0-1197" name="__codelineno-0-1197"></a><span class="sd">        This is particularly useful for categorical raster data, such as land cover classifications, where each pixel</span>
<a id="__codelineno-0-1198" name="__codelineno-0-1198"></a><span class="sd">        value corresponds to a category that has additional attributes (e.g., class name, color description).</span>
<a id="__codelineno-0-1199" name="__codelineno-0-1199"></a>
<a id="__codelineno-0-1200" name="__codelineno-0-1200"></a><span class="sd">        Notes:</span>
<a id="__codelineno-0-1201" name="__codelineno-0-1201"></a><span class="sd">            - The attribute table is stored in an xml file by the name of the raster file with the extension of .aux.xml.</span>
<a id="__codelineno-0-1202" name="__codelineno-0-1202"></a><span class="sd">            - Setting an attribute table to a band will overwrite the existing attribute table if it exists.</span>
<a id="__codelineno-0-1203" name="__codelineno-0-1203"></a><span class="sd">            - Setting an attribute table to a band does not need the dataset to be opened in a write mode.</span>
<a id="__codelineno-0-1204" name="__codelineno-0-1204"></a>
<a id="__codelineno-0-1205" name="__codelineno-0-1205"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1206" name="__codelineno-0-1206"></a><span class="sd">            df (DataFrame):</span>
<a id="__codelineno-0-1207" name="__codelineno-0-1207"></a><span class="sd">                DataFrame with the attribute table.</span>
<a id="__codelineno-0-1208" name="__codelineno-0-1208"></a><span class="sd">            band (int):</span>
<a id="__codelineno-0-1209" name="__codelineno-0-1209"></a><span class="sd">                Band index.</span>
<a id="__codelineno-0-1210" name="__codelineno-0-1210"></a>
<a id="__codelineno-0-1211" name="__codelineno-0-1211"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-1212" name="__codelineno-0-1212"></a><span class="sd">            - First create a dataset:</span>
<a id="__codelineno-0-1213" name="__codelineno-0-1213"></a>
<a id="__codelineno-0-1214" name="__codelineno-0-1214"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-1215" name="__codelineno-0-1215"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create(</span>
<a id="__codelineno-0-1216" name="__codelineno-0-1216"></a><span class="sd">              ... cell_size=0.05, rows=10, columns=10, dtype=&quot;float32&quot;, bands=1, top_left_corner=(0, 0),</span>
<a id="__codelineno-0-1217" name="__codelineno-0-1217"></a><span class="sd">              ... epsg=4326, no_data_value=-9999</span>
<a id="__codelineno-0-1218" name="__codelineno-0-1218"></a><span class="sd">              ... )</span>
<a id="__codelineno-0-1219" name="__codelineno-0-1219"></a>
<a id="__codelineno-0-1220" name="__codelineno-0-1220"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1221" name="__codelineno-0-1221"></a>
<a id="__codelineno-0-1222" name="__codelineno-0-1222"></a><span class="sd">            - Create a DataFrame with the attribute table:</span>
<a id="__codelineno-0-1223" name="__codelineno-0-1223"></a>
<a id="__codelineno-0-1224" name="__codelineno-0-1224"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-1225" name="__codelineno-0-1225"></a><span class="sd">              &gt;&gt;&gt; data = {</span>
<a id="__codelineno-0-1226" name="__codelineno-0-1226"></a><span class="sd">              ...     &quot;Value&quot;: [1, 2, 3],</span>
<a id="__codelineno-0-1227" name="__codelineno-0-1227"></a><span class="sd">              ...     &quot;ClassName&quot;: [&quot;Forest&quot;, &quot;Water&quot;, &quot;Urban&quot;],</span>
<a id="__codelineno-0-1228" name="__codelineno-0-1228"></a><span class="sd">              ...     &quot;Color&quot;: [&quot;#008000&quot;, &quot;#0000FF&quot;, &quot;#808080&quot;],</span>
<a id="__codelineno-0-1229" name="__codelineno-0-1229"></a><span class="sd">              ... }</span>
<a id="__codelineno-0-1230" name="__codelineno-0-1230"></a><span class="sd">              &gt;&gt;&gt; df = pd.DataFrame(data)</span>
<a id="__codelineno-0-1231" name="__codelineno-0-1231"></a>
<a id="__codelineno-0-1232" name="__codelineno-0-1232"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1233" name="__codelineno-0-1233"></a>
<a id="__codelineno-0-1234" name="__codelineno-0-1234"></a><span class="sd">            - Set the attribute table to the dataset:</span>
<a id="__codelineno-0-1235" name="__codelineno-0-1235"></a>
<a id="__codelineno-0-1236" name="__codelineno-0-1236"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-1237" name="__codelineno-0-1237"></a><span class="sd">              &gt;&gt;&gt; dataset.set_attribute_table(df, band=0)</span>
<a id="__codelineno-0-1238" name="__codelineno-0-1238"></a>
<a id="__codelineno-0-1239" name="__codelineno-0-1239"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1240" name="__codelineno-0-1240"></a>
<a id="__codelineno-0-1241" name="__codelineno-0-1241"></a><span class="sd">            - Then the attribute table can be retrieved using the `get_attribute_table` method.</span>
<a id="__codelineno-0-1242" name="__codelineno-0-1242"></a><span class="sd">            - The content of the attribute table will be stored in an xml file by the name of the raster file with</span>
<a id="__codelineno-0-1243" name="__codelineno-0-1243"></a><span class="sd">              the extension of .aux.xml. The content of the file will be like the following:</span>
<a id="__codelineno-0-1244" name="__codelineno-0-1244"></a>
<a id="__codelineno-0-1245" name="__codelineno-0-1245"></a><span class="sd">              ```xml</span>
<a id="__codelineno-0-1246" name="__codelineno-0-1246"></a>
<a id="__codelineno-0-1247" name="__codelineno-0-1247"></a><span class="sd">                  &lt;PAMDataset&gt;</span>
<a id="__codelineno-0-1248" name="__codelineno-0-1248"></a><span class="sd">                    &lt;PAMRasterBand band=&quot;1&quot;&gt;</span>
<a id="__codelineno-0-1249" name="__codelineno-0-1249"></a><span class="sd">                      &lt;GDALRasterAttributeTable tableType=&quot;thematic&quot;&gt;</span>
<a id="__codelineno-0-1250" name="__codelineno-0-1250"></a><span class="sd">                        &lt;FieldDefn index=&quot;0&quot;&gt;</span>
<a id="__codelineno-0-1251" name="__codelineno-0-1251"></a><span class="sd">                          &lt;Name&gt;Precipitation Range (mm)&lt;/Name&gt;</span>
<a id="__codelineno-0-1252" name="__codelineno-0-1252"></a><span class="sd">                          &lt;Type&gt;2&lt;/Type&gt;</span>
<a id="__codelineno-0-1253" name="__codelineno-0-1253"></a><span class="sd">                          &lt;Usage&gt;0&lt;/Usage&gt;</span>
<a id="__codelineno-0-1254" name="__codelineno-0-1254"></a><span class="sd">                        &lt;/FieldDefn&gt;</span>
<a id="__codelineno-0-1255" name="__codelineno-0-1255"></a><span class="sd">                        &lt;FieldDefn index=&quot;1&quot;&gt;</span>
<a id="__codelineno-0-1256" name="__codelineno-0-1256"></a><span class="sd">                          &lt;Name&gt;Category&lt;/Name&gt;</span>
<a id="__codelineno-0-1257" name="__codelineno-0-1257"></a><span class="sd">                          &lt;Type&gt;2&lt;/Type&gt;</span>
<a id="__codelineno-0-1258" name="__codelineno-0-1258"></a><span class="sd">                          &lt;Usage&gt;0&lt;/Usage&gt;</span>
<a id="__codelineno-0-1259" name="__codelineno-0-1259"></a><span class="sd">                        &lt;/FieldDefn&gt;</span>
<a id="__codelineno-0-1260" name="__codelineno-0-1260"></a><span class="sd">                        &lt;FieldDefn index=&quot;2&quot;&gt;</span>
<a id="__codelineno-0-1261" name="__codelineno-0-1261"></a><span class="sd">                          &lt;Name&gt;Description&lt;/Name&gt;</span>
<a id="__codelineno-0-1262" name="__codelineno-0-1262"></a><span class="sd">                          &lt;Type&gt;2&lt;/Type&gt;</span>
<a id="__codelineno-0-1263" name="__codelineno-0-1263"></a><span class="sd">                          &lt;Usage&gt;0&lt;/Usage&gt;</span>
<a id="__codelineno-0-1264" name="__codelineno-0-1264"></a><span class="sd">                        &lt;/FieldDefn&gt;</span>
<a id="__codelineno-0-1265" name="__codelineno-0-1265"></a><span class="sd">                        &lt;Row index=&quot;0&quot;&gt;</span>
<a id="__codelineno-0-1266" name="__codelineno-0-1266"></a><span class="sd">                          &lt;F&gt;0-50&lt;/F&gt;</span>
<a id="__codelineno-0-1267" name="__codelineno-0-1267"></a><span class="sd">                          &lt;F&gt;Low&lt;/F&gt;</span>
<a id="__codelineno-0-1268" name="__codelineno-0-1268"></a><span class="sd">                          &lt;F&gt;Very low precipitation&lt;/F&gt;</span>
<a id="__codelineno-0-1269" name="__codelineno-0-1269"></a><span class="sd">                        &lt;/Row&gt;</span>
<a id="__codelineno-0-1270" name="__codelineno-0-1270"></a><span class="sd">                        &lt;Row index=&quot;1&quot;&gt;</span>
<a id="__codelineno-0-1271" name="__codelineno-0-1271"></a><span class="sd">                          &lt;F&gt;51-100&lt;/F&gt;</span>
<a id="__codelineno-0-1272" name="__codelineno-0-1272"></a><span class="sd">                          &lt;F&gt;Moderate&lt;/F&gt;</span>
<a id="__codelineno-0-1273" name="__codelineno-0-1273"></a><span class="sd">                          &lt;F&gt;Moderate precipitation&lt;/F&gt;</span>
<a id="__codelineno-0-1274" name="__codelineno-0-1274"></a><span class="sd">                        &lt;/Row&gt;</span>
<a id="__codelineno-0-1275" name="__codelineno-0-1275"></a><span class="sd">                        &lt;Row index=&quot;2&quot;&gt;</span>
<a id="__codelineno-0-1276" name="__codelineno-0-1276"></a><span class="sd">                          &lt;F&gt;101-200&lt;/F&gt;</span>
<a id="__codelineno-0-1277" name="__codelineno-0-1277"></a><span class="sd">                          &lt;F&gt;High&lt;/F&gt;</span>
<a id="__codelineno-0-1278" name="__codelineno-0-1278"></a><span class="sd">                          &lt;F&gt;High precipitation&lt;/F&gt;</span>
<a id="__codelineno-0-1279" name="__codelineno-0-1279"></a><span class="sd">                        &lt;/Row&gt;</span>
<a id="__codelineno-0-1280" name="__codelineno-0-1280"></a><span class="sd">                        &lt;Row index=&quot;3&quot;&gt;</span>
<a id="__codelineno-0-1281" name="__codelineno-0-1281"></a><span class="sd">                          &lt;F&gt;201-500&lt;/F&gt;</span>
<a id="__codelineno-0-1282" name="__codelineno-0-1282"></a><span class="sd">                          &lt;F&gt;Very High&lt;/F&gt;</span>
<a id="__codelineno-0-1283" name="__codelineno-0-1283"></a><span class="sd">                          &lt;F&gt;Very high precipitation&lt;/F&gt;</span>
<a id="__codelineno-0-1284" name="__codelineno-0-1284"></a><span class="sd">                        &lt;/Row&gt;</span>
<a id="__codelineno-0-1285" name="__codelineno-0-1285"></a><span class="sd">                        &lt;Row index=&quot;4&quot;&gt;</span>
<a id="__codelineno-0-1286" name="__codelineno-0-1286"></a><span class="sd">                          &lt;F&gt;&amp;gt;500&lt;/F&gt;</span>
<a id="__codelineno-0-1287" name="__codelineno-0-1287"></a><span class="sd">                          &lt;F&gt;Extreme&lt;/F&gt;</span>
<a id="__codelineno-0-1288" name="__codelineno-0-1288"></a><span class="sd">                          &lt;F&gt;Extreme precipitation&lt;/F&gt;</span>
<a id="__codelineno-0-1289" name="__codelineno-0-1289"></a><span class="sd">                        &lt;/Row&gt;</span>
<a id="__codelineno-0-1290" name="__codelineno-0-1290"></a><span class="sd">                      &lt;/GDALRasterAttributeTable&gt;</span>
<a id="__codelineno-0-1291" name="__codelineno-0-1291"></a><span class="sd">                    &lt;/PAMRasterBand&gt;</span>
<a id="__codelineno-0-1292" name="__codelineno-0-1292"></a><span class="sd">                  &lt;/PAMDataset&gt;</span>
<a id="__codelineno-0-1293" name="__codelineno-0-1293"></a>
<a id="__codelineno-0-1294" name="__codelineno-0-1294"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1295" name="__codelineno-0-1295"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1296" name="__codelineno-0-1296"></a>        <span class="n">rat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df_to_attribute_table</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-0-1297" name="__codelineno-0-1297"></a>        <span class="n">band</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-1298" name="__codelineno-0-1298"></a>        <span class="n">band</span><span class="o">.</span><span class="n">SetDefaultRAT</span><span class="p">(</span><span class="n">rat</span><span class="p">)</span>
<a id="__codelineno-0-1299" name="__codelineno-0-1299"></a>
<a id="__codelineno-0-1300" name="__codelineno-0-1300"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-0-1301" name="__codelineno-0-1301"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_df_to_attribute_table</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">gdal</span><span class="o">.</span><span class="n">RasterAttributeTable</span><span class="p">:</span>
<a id="__codelineno-0-1302" name="__codelineno-0-1302"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;df_to_attribute_table.</span>
<a id="__codelineno-0-1303" name="__codelineno-0-1303"></a>
<a id="__codelineno-0-1304" name="__codelineno-0-1304"></a><span class="sd">            Convert a DataFrame to a GDAL RasterAttributeTable.</span>
<a id="__codelineno-0-1305" name="__codelineno-0-1305"></a>
<a id="__codelineno-0-1306" name="__codelineno-0-1306"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1307" name="__codelineno-0-1307"></a><span class="sd">            df (DataFrame):</span>
<a id="__codelineno-0-1308" name="__codelineno-0-1308"></a><span class="sd">                DataFrame with columns to be converted to RAT columns.</span>
<a id="__codelineno-0-1309" name="__codelineno-0-1309"></a>
<a id="__codelineno-0-1310" name="__codelineno-0-1310"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-1311" name="__codelineno-0-1311"></a><span class="sd">            gdal.RasterAttributeTable:</span>
<a id="__codelineno-0-1312" name="__codelineno-0-1312"></a><span class="sd">                The resulting RasterAttributeTable.</span>
<a id="__codelineno-0-1313" name="__codelineno-0-1313"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1314" name="__codelineno-0-1314"></a>        <span class="c1"># Create a new RasterAttributeTable</span>
<a id="__codelineno-0-1315" name="__codelineno-0-1315"></a>        <span class="n">rat</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">RasterAttributeTable</span><span class="p">()</span>
<a id="__codelineno-0-1316" name="__codelineno-0-1316"></a>
<a id="__codelineno-0-1317" name="__codelineno-0-1317"></a>        <span class="c1"># Create columns in the RAT based on the DataFrame columns</span>
<a id="__codelineno-0-1318" name="__codelineno-0-1318"></a>        <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
<a id="__codelineno-0-1319" name="__codelineno-0-1319"></a>            <span class="n">dtype</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span>
<a id="__codelineno-0-1320" name="__codelineno-0-1320"></a>            <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">is_integer_dtype</span><span class="p">(</span><span class="n">dtype</span><span class="p">):</span>
<a id="__codelineno-0-1321" name="__codelineno-0-1321"></a>                <span class="n">rat</span><span class="o">.</span><span class="n">CreateColumn</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GFT_Integer</span><span class="p">,</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GFU_Generic</span><span class="p">)</span>
<a id="__codelineno-0-1322" name="__codelineno-0-1322"></a>            <span class="k">elif</span> <span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">is_float_dtype</span><span class="p">(</span><span class="n">dtype</span><span class="p">):</span>
<a id="__codelineno-0-1323" name="__codelineno-0-1323"></a>                <span class="n">rat</span><span class="o">.</span><span class="n">CreateColumn</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GFT_Real</span><span class="p">,</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GFU_Generic</span><span class="p">)</span>
<a id="__codelineno-0-1324" name="__codelineno-0-1324"></a>            <span class="k">else</span><span class="p">:</span>  <span class="c1"># Assume string for any other type</span>
<a id="__codelineno-0-1325" name="__codelineno-0-1325"></a>                <span class="n">rat</span><span class="o">.</span><span class="n">CreateColumn</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GFT_String</span><span class="p">,</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GFU_Generic</span><span class="p">)</span>
<a id="__codelineno-0-1326" name="__codelineno-0-1326"></a>
<a id="__codelineno-0-1327" name="__codelineno-0-1327"></a>        <span class="c1"># Populate the RAT with the DataFrame data</span>
<a id="__codelineno-0-1328" name="__codelineno-0-1328"></a>        <span class="k">for</span> <span class="n">row_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)):</span>
<a id="__codelineno-0-1329" name="__codelineno-0-1329"></a>            <span class="k">for</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">column</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
<a id="__codelineno-0-1330" name="__codelineno-0-1330"></a>                <span class="n">dtype</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span>
<a id="__codelineno-0-1331" name="__codelineno-0-1331"></a>                <span class="n">value</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">row_index</span><span class="p">,</span> <span class="n">col_index</span><span class="p">]</span>
<a id="__codelineno-0-1332" name="__codelineno-0-1332"></a>                <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">is_integer_dtype</span><span class="p">(</span><span class="n">dtype</span><span class="p">):</span>
<a id="__codelineno-0-1333" name="__codelineno-0-1333"></a>                    <span class="n">rat</span><span class="o">.</span><span class="n">SetValueAsInt</span><span class="p">(</span><span class="n">row_index</span><span class="p">,</span> <span class="n">col_index</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
<a id="__codelineno-0-1334" name="__codelineno-0-1334"></a>                <span class="k">elif</span> <span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">is_float_dtype</span><span class="p">(</span><span class="n">dtype</span><span class="p">):</span>
<a id="__codelineno-0-1335" name="__codelineno-0-1335"></a>                    <span class="n">rat</span><span class="o">.</span><span class="n">SetValueAsDouble</span><span class="p">(</span><span class="n">row_index</span><span class="p">,</span> <span class="n">col_index</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
<a id="__codelineno-0-1336" name="__codelineno-0-1336"></a>                <span class="k">else</span><span class="p">:</span>  <span class="c1"># Assume string for any other type</span>
<a id="__codelineno-0-1337" name="__codelineno-0-1337"></a>                    <span class="n">rat</span><span class="o">.</span><span class="n">SetValueAsString</span><span class="p">(</span><span class="n">row_index</span><span class="p">,</span> <span class="n">col_index</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
<a id="__codelineno-0-1338" name="__codelineno-0-1338"></a>
<a id="__codelineno-0-1339" name="__codelineno-0-1339"></a>        <span class="k">return</span> <span class="n">rat</span>
<a id="__codelineno-0-1340" name="__codelineno-0-1340"></a>
<a id="__codelineno-0-1341" name="__codelineno-0-1341"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-0-1342" name="__codelineno-0-1342"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_attribute_table_to_df</span><span class="p">(</span><span class="n">rat</span><span class="p">:</span> <span class="n">gdal</span><span class="o">.</span><span class="n">RasterAttributeTable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-1343" name="__codelineno-0-1343"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;attribute_table_to_df.</span>
<a id="__codelineno-0-1344" name="__codelineno-0-1344"></a>
<a id="__codelineno-0-1345" name="__codelineno-0-1345"></a><span class="sd">        Convert a GDAL RasterAttributeTable to a pandas DataFrame.</span>
<a id="__codelineno-0-1346" name="__codelineno-0-1346"></a>
<a id="__codelineno-0-1347" name="__codelineno-0-1347"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1348" name="__codelineno-0-1348"></a><span class="sd">            rat (gdal.RasterAttributeTable):</span>
<a id="__codelineno-0-1349" name="__codelineno-0-1349"></a><span class="sd">                The RasterAttributeTable to convert.</span>
<a id="__codelineno-0-1350" name="__codelineno-0-1350"></a>
<a id="__codelineno-0-1351" name="__codelineno-0-1351"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-1352" name="__codelineno-0-1352"></a><span class="sd">            pd.DataFrame: The resulting DataFrame.</span>
<a id="__codelineno-0-1353" name="__codelineno-0-1353"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1354" name="__codelineno-0-1354"></a>        <span class="n">columns</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-1355" name="__codelineno-0-1355"></a>        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-1356" name="__codelineno-0-1356"></a>
<a id="__codelineno-0-1357" name="__codelineno-0-1357"></a>        <span class="c1"># Get the column names and create empty lists for data</span>
<a id="__codelineno-0-1358" name="__codelineno-0-1358"></a>        <span class="k">for</span> <span class="n">col_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rat</span><span class="o">.</span><span class="n">GetColumnCount</span><span class="p">()):</span>
<a id="__codelineno-0-1359" name="__codelineno-0-1359"></a>            <span class="n">col_name</span> <span class="o">=</span> <span class="n">rat</span><span class="o">.</span><span class="n">GetNameOfCol</span><span class="p">(</span><span class="n">col_index</span><span class="p">)</span>
<a id="__codelineno-0-1360" name="__codelineno-0-1360"></a>            <span class="n">col_type</span> <span class="o">=</span> <span class="n">rat</span><span class="o">.</span><span class="n">GetTypeOfCol</span><span class="p">(</span><span class="n">col_index</span><span class="p">)</span>
<a id="__codelineno-0-1361" name="__codelineno-0-1361"></a>            <span class="n">columns</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">col_name</span><span class="p">,</span> <span class="n">col_type</span><span class="p">))</span>
<a id="__codelineno-0-1362" name="__codelineno-0-1362"></a>            <span class="n">data</span><span class="p">[</span><span class="n">col_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-1363" name="__codelineno-0-1363"></a>
<a id="__codelineno-0-1364" name="__codelineno-0-1364"></a>        <span class="c1"># Get the row count</span>
<a id="__codelineno-0-1365" name="__codelineno-0-1365"></a>        <span class="n">row_count</span> <span class="o">=</span> <span class="n">rat</span><span class="o">.</span><span class="n">GetRowCount</span><span class="p">()</span>
<a id="__codelineno-0-1366" name="__codelineno-0-1366"></a>
<a id="__codelineno-0-1367" name="__codelineno-0-1367"></a>        <span class="c1"># Populate the data dictionary with RAT values</span>
<a id="__codelineno-0-1368" name="__codelineno-0-1368"></a>        <span class="k">for</span> <span class="n">row_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">row_count</span><span class="p">):</span>
<a id="__codelineno-0-1369" name="__codelineno-0-1369"></a>            <span class="k">for</span> <span class="n">col_index</span><span class="p">,</span> <span class="p">(</span><span class="n">col_name</span><span class="p">,</span> <span class="n">col_type</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">columns</span><span class="p">):</span>
<a id="__codelineno-0-1370" name="__codelineno-0-1370"></a>                <span class="k">if</span> <span class="n">col_type</span> <span class="o">==</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GFT_Integer</span><span class="p">:</span>
<a id="__codelineno-0-1371" name="__codelineno-0-1371"></a>                    <span class="n">value</span> <span class="o">=</span> <span class="n">rat</span><span class="o">.</span><span class="n">GetValueAsInt</span><span class="p">(</span><span class="n">row_index</span><span class="p">,</span> <span class="n">col_index</span><span class="p">)</span>
<a id="__codelineno-0-1372" name="__codelineno-0-1372"></a>                <span class="k">elif</span> <span class="n">col_type</span> <span class="o">==</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GFT_Real</span><span class="p">:</span>
<a id="__codelineno-0-1373" name="__codelineno-0-1373"></a>                    <span class="n">value</span> <span class="o">=</span> <span class="n">rat</span><span class="o">.</span><span class="n">GetValueAsDouble</span><span class="p">(</span><span class="n">row_index</span><span class="p">,</span> <span class="n">col_index</span><span class="p">)</span>
<a id="__codelineno-0-1374" name="__codelineno-0-1374"></a>                <span class="k">else</span><span class="p">:</span>  <span class="c1"># gdal.GFT_String</span>
<a id="__codelineno-0-1375" name="__codelineno-0-1375"></a>                    <span class="n">value</span> <span class="o">=</span> <span class="n">rat</span><span class="o">.</span><span class="n">GetValueAsString</span><span class="p">(</span><span class="n">row_index</span><span class="p">,</span> <span class="n">col_index</span><span class="p">)</span>
<a id="__codelineno-0-1376" name="__codelineno-0-1376"></a>                <span class="n">data</span><span class="p">[</span><span class="n">col_name</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<a id="__codelineno-0-1377" name="__codelineno-0-1377"></a>
<a id="__codelineno-0-1378" name="__codelineno-0-1378"></a>        <span class="c1"># Create the DataFrame</span>
<a id="__codelineno-0-1379" name="__codelineno-0-1379"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-1380" name="__codelineno-0-1380"></a>        <span class="k">return</span> <span class="n">df</span>
<a id="__codelineno-0-1381" name="__codelineno-0-1381"></a>
<a id="__codelineno-0-1382" name="__codelineno-0-1382"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_band</span><span class="p">(</span>
<a id="__codelineno-0-1383" name="__codelineno-0-1383"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-1384" name="__codelineno-0-1384"></a>        <span class="n">array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<a id="__codelineno-0-1385" name="__codelineno-0-1385"></a>        <span class="n">unit</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1386" name="__codelineno-0-1386"></a>        <span class="n">attribute_table</span><span class="p">:</span> <span class="n">DataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1387" name="__codelineno-0-1387"></a>        <span class="n">inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-1388" name="__codelineno-0-1388"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-1389" name="__codelineno-0-1389"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a new band to the dataset.</span>
<a id="__codelineno-0-1390" name="__codelineno-0-1390"></a>
<a id="__codelineno-0-1391" name="__codelineno-0-1391"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1392" name="__codelineno-0-1392"></a><span class="sd">            array (np.ndarray):</span>
<a id="__codelineno-0-1393" name="__codelineno-0-1393"></a><span class="sd">                2D array to add as a new band.</span>
<a id="__codelineno-0-1394" name="__codelineno-0-1394"></a><span class="sd">            unit (Any, optional):</span>
<a id="__codelineno-0-1395" name="__codelineno-0-1395"></a><span class="sd">                Unit of the values in the new band.</span>
<a id="__codelineno-0-1396" name="__codelineno-0-1396"></a><span class="sd">            attribute_table (DataFrame, optional):</span>
<a id="__codelineno-0-1397" name="__codelineno-0-1397"></a><span class="sd">                Attribute table provides a way to associate tabular data with the values of a raster band. This is</span>
<a id="__codelineno-0-1398" name="__codelineno-0-1398"></a><span class="sd">                particularly useful for categorical raster data, such as land cover classifications, where each pixel</span>
<a id="__codelineno-0-1399" name="__codelineno-0-1399"></a><span class="sd">                value corresponds to a category that has additional attributes (e.g., class name, color, description).</span>
<a id="__codelineno-0-1400" name="__codelineno-0-1400"></a><span class="sd">                Default is None.</span>
<a id="__codelineno-0-1401" name="__codelineno-0-1401"></a><span class="sd">            inplace (bool, optional):</span>
<a id="__codelineno-0-1402" name="__codelineno-0-1402"></a><span class="sd">                If True the new band will be added to the current dataset, if False the new band will be added to a</span>
<a id="__codelineno-0-1403" name="__codelineno-0-1403"></a><span class="sd">                new dataset. Default is False.</span>
<a id="__codelineno-0-1404" name="__codelineno-0-1404"></a>
<a id="__codelineno-0-1405" name="__codelineno-0-1405"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-1406" name="__codelineno-0-1406"></a><span class="sd">            None</span>
<a id="__codelineno-0-1407" name="__codelineno-0-1407"></a>
<a id="__codelineno-0-1408" name="__codelineno-0-1408"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-1409" name="__codelineno-0-1409"></a><span class="sd">            - First create a dataset:</span>
<a id="__codelineno-0-1410" name="__codelineno-0-1410"></a>
<a id="__codelineno-0-1411" name="__codelineno-0-1411"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-1412" name="__codelineno-0-1412"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create(</span>
<a id="__codelineno-0-1413" name="__codelineno-0-1413"></a><span class="sd">              ... cell_size=0.05, rows=10, columns=10, dtype=&quot;float32&quot;, bands=1, top_left_corner=(0, 0),</span>
<a id="__codelineno-0-1414" name="__codelineno-0-1414"></a><span class="sd">              ... epsg=4326, no_data_value=-9999</span>
<a id="__codelineno-0-1415" name="__codelineno-0-1415"></a><span class="sd">              ... )</span>
<a id="__codelineno-0-1416" name="__codelineno-0-1416"></a><span class="sd">              &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-1417" name="__codelineno-0-1417"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1418" name="__codelineno-0-1418"></a><span class="sd">                          Cell size: 0.05</span>
<a id="__codelineno-0-1419" name="__codelineno-0-1419"></a><span class="sd">                          Dimension: 10 * 10</span>
<a id="__codelineno-0-1420" name="__codelineno-0-1420"></a><span class="sd">                          EPSG: 4326</span>
<a id="__codelineno-0-1421" name="__codelineno-0-1421"></a><span class="sd">                          Number of Bands: 1</span>
<a id="__codelineno-0-1422" name="__codelineno-0-1422"></a><span class="sd">                          Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-1423" name="__codelineno-0-1423"></a><span class="sd">                          Mask: -9999.0</span>
<a id="__codelineno-0-1424" name="__codelineno-0-1424"></a><span class="sd">                          Data type: float32</span>
<a id="__codelineno-0-1425" name="__codelineno-0-1425"></a><span class="sd">                          File:...</span>
<a id="__codelineno-0-1426" name="__codelineno-0-1426"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1427" name="__codelineno-0-1427"></a>
<a id="__codelineno-0-1428" name="__codelineno-0-1428"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1429" name="__codelineno-0-1429"></a>
<a id="__codelineno-0-1430" name="__codelineno-0-1430"></a><span class="sd">            - Create a 2D array to add as a new band:</span>
<a id="__codelineno-0-1431" name="__codelineno-0-1431"></a>
<a id="__codelineno-0-1432" name="__codelineno-0-1432"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-1433" name="__codelineno-0-1433"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-1434" name="__codelineno-0-1434"></a><span class="sd">              &gt;&gt;&gt; array = np.random.rand(10, 10)</span>
<a id="__codelineno-0-1435" name="__codelineno-0-1435"></a>
<a id="__codelineno-0-1436" name="__codelineno-0-1436"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1437" name="__codelineno-0-1437"></a>
<a id="__codelineno-0-1438" name="__codelineno-0-1438"></a><span class="sd">            - Add the new band to the dataset inplace:</span>
<a id="__codelineno-0-1439" name="__codelineno-0-1439"></a>
<a id="__codelineno-0-1440" name="__codelineno-0-1440"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-1441" name="__codelineno-0-1441"></a><span class="sd">              &gt;&gt;&gt; dataset.add_band(array, unit=&quot;m&quot;, attribute_table=None, inplace=True)</span>
<a id="__codelineno-0-1442" name="__codelineno-0-1442"></a><span class="sd">              &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-1443" name="__codelineno-0-1443"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1444" name="__codelineno-0-1444"></a><span class="sd">                          Cell size: 0.05</span>
<a id="__codelineno-0-1445" name="__codelineno-0-1445"></a><span class="sd">                          Dimension: 10 * 10</span>
<a id="__codelineno-0-1446" name="__codelineno-0-1446"></a><span class="sd">                          EPSG: 4326</span>
<a id="__codelineno-0-1447" name="__codelineno-0-1447"></a><span class="sd">                          Number of Bands: 2</span>
<a id="__codelineno-0-1448" name="__codelineno-0-1448"></a><span class="sd">                          Band names: [&#39;Band_1&#39;, &#39;Band_2&#39;]</span>
<a id="__codelineno-0-1449" name="__codelineno-0-1449"></a><span class="sd">                          Mask: -9999.0</span>
<a id="__codelineno-0-1450" name="__codelineno-0-1450"></a><span class="sd">                          Data type: float32</span>
<a id="__codelineno-0-1451" name="__codelineno-0-1451"></a><span class="sd">                          File:...</span>
<a id="__codelineno-0-1452" name="__codelineno-0-1452"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1453" name="__codelineno-0-1453"></a>
<a id="__codelineno-0-1454" name="__codelineno-0-1454"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1455" name="__codelineno-0-1455"></a>
<a id="__codelineno-0-1456" name="__codelineno-0-1456"></a><span class="sd">            - The new band will be added to the dataset inplace.</span>
<a id="__codelineno-0-1457" name="__codelineno-0-1457"></a><span class="sd">            - You can also add an attribute table to the band when you add a new band to the dataset.</span>
<a id="__codelineno-0-1458" name="__codelineno-0-1458"></a>
<a id="__codelineno-0-1459" name="__codelineno-0-1459"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-1460" name="__codelineno-0-1460"></a><span class="sd">              &gt;&gt;&gt; import pandas as pd</span>
<a id="__codelineno-0-1461" name="__codelineno-0-1461"></a><span class="sd">              &gt;&gt;&gt; data = {</span>
<a id="__codelineno-0-1462" name="__codelineno-0-1462"></a><span class="sd">              ...     &quot;Value&quot;: [1, 2, 3],</span>
<a id="__codelineno-0-1463" name="__codelineno-0-1463"></a><span class="sd">              ...     &quot;ClassName&quot;: [&quot;Forest&quot;, &quot;Water&quot;, &quot;Urban&quot;],</span>
<a id="__codelineno-0-1464" name="__codelineno-0-1464"></a><span class="sd">              ...     &quot;Color&quot;: [&quot;#008000&quot;, &quot;#0000FF&quot;, &quot;#808080&quot;],</span>
<a id="__codelineno-0-1465" name="__codelineno-0-1465"></a><span class="sd">              ... }</span>
<a id="__codelineno-0-1466" name="__codelineno-0-1466"></a><span class="sd">              &gt;&gt;&gt; df = pd.DataFrame(data)</span>
<a id="__codelineno-0-1467" name="__codelineno-0-1467"></a><span class="sd">              &gt;&gt;&gt; dataset.add_band(array, unit=&quot;m&quot;, attribute_table=df, inplace=True)</span>
<a id="__codelineno-0-1468" name="__codelineno-0-1468"></a>
<a id="__codelineno-0-1469" name="__codelineno-0-1469"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1470" name="__codelineno-0-1470"></a>
<a id="__codelineno-0-1471" name="__codelineno-0-1471"></a><span class="sd">        See Also:</span>
<a id="__codelineno-0-1472" name="__codelineno-0-1472"></a><span class="sd">            Dataset.create_from_array: create a new dataset from an array.</span>
<a id="__codelineno-0-1473" name="__codelineno-0-1473"></a><span class="sd">            Dataset.create: create a new dataset with an empty band.</span>
<a id="__codelineno-0-1474" name="__codelineno-0-1474"></a><span class="sd">            Dataset.dataset_like: create a new dataset from another dataset.</span>
<a id="__codelineno-0-1475" name="__codelineno-0-1475"></a><span class="sd">            Dataset.get_attribute_table: get the attribute table for a specific band.</span>
<a id="__codelineno-0-1476" name="__codelineno-0-1476"></a><span class="sd">            Dataset.set_attribute_table: Set the attribute table for a specific band.</span>
<a id="__codelineno-0-1477" name="__codelineno-0-1477"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1478" name="__codelineno-0-1478"></a>        <span class="c1"># check the dimensions of the new array</span>
<a id="__codelineno-0-1479" name="__codelineno-0-1479"></a>        <span class="k">if</span> <span class="n">array</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-1480" name="__codelineno-0-1480"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The array must be 2D.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1481" name="__codelineno-0-1481"></a>        <span class="k">if</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="ow">or</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
<a id="__codelineno-0-1482" name="__codelineno-0-1482"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1483" name="__codelineno-0-1483"></a>                <span class="sa">f</span><span class="s2">&quot;The array must have the same dimensions as the raster.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">rows</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1484" name="__codelineno-0-1484"></a>            <span class="p">)</span>
<a id="__codelineno-0-1485" name="__codelineno-0-1485"></a>        <span class="c1"># check if the dataset is opened in a write mode</span>
<a id="__codelineno-0-1486" name="__codelineno-0-1486"></a>        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
<a id="__codelineno-0-1487" name="__codelineno-0-1487"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">access</span> <span class="o">==</span> <span class="s2">&quot;read_only&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1488" name="__codelineno-0-1488"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The dataset is not opened in a write mode.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1489" name="__codelineno-0-1489"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1490" name="__codelineno-0-1490"></a>                <span class="n">src</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_raster</span>
<a id="__codelineno-0-1491" name="__codelineno-0-1491"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1492" name="__codelineno-0-1492"></a>            <span class="n">src</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="s2">&quot;MEM&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">CreateCopy</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_raster</span><span class="p">)</span>
<a id="__codelineno-0-1493" name="__codelineno-0-1493"></a>
<a id="__codelineno-0-1494" name="__codelineno-0-1494"></a>        <span class="n">dtype</span> <span class="o">=</span> <span class="n">numpy_to_gdal_dtype</span><span class="p">(</span><span class="n">array</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<a id="__codelineno-0-1495" name="__codelineno-0-1495"></a>        <span class="n">num_bands</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">RasterCount</span>
<a id="__codelineno-0-1496" name="__codelineno-0-1496"></a>        <span class="n">src</span><span class="o">.</span><span class="n">AddBand</span><span class="p">(</span><span class="n">dtype</span><span class="p">,</span> <span class="p">[])</span>
<a id="__codelineno-0-1497" name="__codelineno-0-1497"></a>        <span class="n">band</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">num_bands</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-1498" name="__codelineno-0-1498"></a>
<a id="__codelineno-0-1499" name="__codelineno-0-1499"></a>        <span class="k">if</span> <span class="n">unit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1500" name="__codelineno-0-1500"></a>            <span class="n">band</span><span class="o">.</span><span class="n">SetUnitType</span><span class="p">(</span><span class="n">unit</span><span class="p">)</span>
<a id="__codelineno-0-1501" name="__codelineno-0-1501"></a>
<a id="__codelineno-0-1502" name="__codelineno-0-1502"></a>        <span class="k">if</span> <span class="n">attribute_table</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1503" name="__codelineno-0-1503"></a>            <span class="c1"># Attach the RAT to the raster band</span>
<a id="__codelineno-0-1504" name="__codelineno-0-1504"></a>            <span class="n">rat</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_df_to_attribute_table</span><span class="p">(</span><span class="n">attribute_table</span><span class="p">)</span>
<a id="__codelineno-0-1505" name="__codelineno-0-1505"></a>            <span class="n">band</span><span class="o">.</span><span class="n">SetDefaultRAT</span><span class="p">(</span><span class="n">rat</span><span class="p">)</span>
<a id="__codelineno-0-1506" name="__codelineno-0-1506"></a>
<a id="__codelineno-0-1507" name="__codelineno-0-1507"></a>        <span class="n">band</span><span class="o">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
<a id="__codelineno-0-1508" name="__codelineno-0-1508"></a>
<a id="__codelineno-0-1509" name="__codelineno-0-1509"></a>        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
<a id="__codelineno-0-1510" name="__codelineno-0-1510"></a>            <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">access</span><span class="p">)</span>
<a id="__codelineno-0-1511" name="__codelineno-0-1511"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1512" name="__codelineno-0-1512"></a>            <span class="k">return</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">access</span><span class="p">)</span>
<a id="__codelineno-0-1513" name="__codelineno-0-1513"></a>
<a id="__codelineno-0-1514" name="__codelineno-0-1514"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">mask</span><span class="p">:</span> <span class="n">GeoDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-1515" name="__codelineno-0-1515"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get statistics of a band [Min, max, mean, std].</span>
<a id="__codelineno-0-1516" name="__codelineno-0-1516"></a>
<a id="__codelineno-0-1517" name="__codelineno-0-1517"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1518" name="__codelineno-0-1518"></a><span class="sd">            band (int, optional):</span>
<a id="__codelineno-0-1519" name="__codelineno-0-1519"></a><span class="sd">                Band index. If None, the statistics of all bands will be returned.</span>
<a id="__codelineno-0-1520" name="__codelineno-0-1520"></a><span class="sd">            mask (Polygon GeoDataFrame or Dataset, optional):</span>
<a id="__codelineno-0-1521" name="__codelineno-0-1521"></a><span class="sd">                GeodataFrame with a geometry of polygon type.</span>
<a id="__codelineno-0-1522" name="__codelineno-0-1522"></a>
<a id="__codelineno-0-1523" name="__codelineno-0-1523"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-1524" name="__codelineno-0-1524"></a><span class="sd">            DataFrame:</span>
<a id="__codelineno-0-1525" name="__codelineno-0-1525"></a><span class="sd">                DataFrame wit the stats of each band, the dataframe has the following columns</span>
<a id="__codelineno-0-1526" name="__codelineno-0-1526"></a><span class="sd">                [min, max, mean, std], the index of the dataframe is the band names.</span>
<a id="__codelineno-0-1527" name="__codelineno-0-1527"></a>
<a id="__codelineno-0-1528" name="__codelineno-0-1528"></a><span class="sd">                ```text</span>
<a id="__codelineno-0-1529" name="__codelineno-0-1529"></a>
<a id="__codelineno-0-1530" name="__codelineno-0-1530"></a><span class="sd">                                   Min         max        mean       std</span>
<a id="__codelineno-0-1531" name="__codelineno-0-1531"></a><span class="sd">                    Band_1  270.369720  270.762299  270.551361  0.154270</span>
<a id="__codelineno-0-1532" name="__codelineno-0-1532"></a><span class="sd">                    Band_2  269.611938  269.744751  269.673645  0.043788</span>
<a id="__codelineno-0-1533" name="__codelineno-0-1533"></a><span class="sd">                    Band_3  273.641479  274.168823  273.953979  0.198447</span>
<a id="__codelineno-0-1534" name="__codelineno-0-1534"></a><span class="sd">                    Band_4  273.991516  274.540344  274.310669  0.205754</span>
<a id="__codelineno-0-1535" name="__codelineno-0-1535"></a><span class="sd">                ```</span>
<a id="__codelineno-0-1536" name="__codelineno-0-1536"></a>
<a id="__codelineno-0-1537" name="__codelineno-0-1537"></a><span class="sd">        Notes:</span>
<a id="__codelineno-0-1538" name="__codelineno-0-1538"></a><span class="sd">            - The value of the stats will be stored in an xml file by the name of the raster file with the extension of</span>
<a id="__codelineno-0-1539" name="__codelineno-0-1539"></a><span class="sd">              .aux.xml.</span>
<a id="__codelineno-0-1540" name="__codelineno-0-1540"></a><span class="sd">            - The content of the file will be like the following:</span>
<a id="__codelineno-0-1541" name="__codelineno-0-1541"></a>
<a id="__codelineno-0-1542" name="__codelineno-0-1542"></a><span class="sd">              ```xml</span>
<a id="__codelineno-0-1543" name="__codelineno-0-1543"></a>
<a id="__codelineno-0-1544" name="__codelineno-0-1544"></a><span class="sd">                  &lt;PAMDataset&gt;</span>
<a id="__codelineno-0-1545" name="__codelineno-0-1545"></a><span class="sd">                    &lt;PAMRasterBand band=&quot;1&quot;&gt;</span>
<a id="__codelineno-0-1546" name="__codelineno-0-1546"></a><span class="sd">                      &lt;Description&gt;Band_1&lt;/Description&gt;</span>
<a id="__codelineno-0-1547" name="__codelineno-0-1547"></a><span class="sd">                      &lt;Metadata&gt;</span>
<a id="__codelineno-0-1548" name="__codelineno-0-1548"></a><span class="sd">                        &lt;MDI key=&quot;RepresentationType&quot;&gt;ATHEMATIC&lt;/MDI&gt;</span>
<a id="__codelineno-0-1549" name="__codelineno-0-1549"></a><span class="sd">                        &lt;MDI key=&quot;STATISTICS_MAXIMUM&quot;&gt;88&lt;/MDI&gt;</span>
<a id="__codelineno-0-1550" name="__codelineno-0-1550"></a><span class="sd">                        &lt;MDI key=&quot;STATISTICS_MEAN&quot;&gt;7.9662921348315&lt;/MDI&gt;</span>
<a id="__codelineno-0-1551" name="__codelineno-0-1551"></a><span class="sd">                        &lt;MDI key=&quot;STATISTICS_MINIMUM&quot;&gt;0&lt;/MDI&gt;</span>
<a id="__codelineno-0-1552" name="__codelineno-0-1552"></a><span class="sd">                        &lt;MDI key=&quot;STATISTICS_STDDEV&quot;&gt;18.294377743948&lt;/MDI&gt;</span>
<a id="__codelineno-0-1553" name="__codelineno-0-1553"></a><span class="sd">                        &lt;MDI key=&quot;STATISTICS_VALID_PERCENT&quot;&gt;48.9&lt;/MDI&gt;</span>
<a id="__codelineno-0-1554" name="__codelineno-0-1554"></a><span class="sd">                      &lt;/Metadata&gt;</span>
<a id="__codelineno-0-1555" name="__codelineno-0-1555"></a><span class="sd">                    &lt;/PAMRasterBand&gt;</span>
<a id="__codelineno-0-1556" name="__codelineno-0-1556"></a><span class="sd">                  &lt;/PAMDataset&gt;</span>
<a id="__codelineno-0-1557" name="__codelineno-0-1557"></a>
<a id="__codelineno-0-1558" name="__codelineno-0-1558"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1559" name="__codelineno-0-1559"></a>
<a id="__codelineno-0-1560" name="__codelineno-0-1560"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-1561" name="__codelineno-0-1561"></a><span class="sd">            - Get the statistics of all bands in the dataset:</span>
<a id="__codelineno-0-1562" name="__codelineno-0-1562"></a>
<a id="__codelineno-0-1563" name="__codelineno-0-1563"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-1564" name="__codelineno-0-1564"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-1565" name="__codelineno-0-1565"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(4, 10, 10)</span>
<a id="__codelineno-0-1566" name="__codelineno-0-1566"></a><span class="sd">              &gt;&gt;&gt; geotransform = (0, 0.05, 0, 0, 0, -0.05)</span>
<a id="__codelineno-0-1567" name="__codelineno-0-1567"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, geo=geotransform, epsg=4326)</span>
<a id="__codelineno-0-1568" name="__codelineno-0-1568"></a><span class="sd">              &gt;&gt;&gt; print(dataset.stats()) # doctest: +SKIP</span>
<a id="__codelineno-0-1569" name="__codelineno-0-1569"></a><span class="sd">                           min       max      mean       std</span>
<a id="__codelineno-0-1570" name="__codelineno-0-1570"></a><span class="sd">              Band_1  0.006443  0.942943  0.468935  0.266634</span>
<a id="__codelineno-0-1571" name="__codelineno-0-1571"></a><span class="sd">              Band_2  0.020377  0.978130  0.477189  0.306864</span>
<a id="__codelineno-0-1572" name="__codelineno-0-1572"></a><span class="sd">              Band_3  0.019652  0.992184  0.537215  0.286502</span>
<a id="__codelineno-0-1573" name="__codelineno-0-1573"></a><span class="sd">              Band_4  0.011955  0.984313  0.503616  0.295852</span>
<a id="__codelineno-0-1574" name="__codelineno-0-1574"></a><span class="sd">              &gt;&gt;&gt; print(dataset.stats(band=1))  # doctest: +SKIP</span>
<a id="__codelineno-0-1575" name="__codelineno-0-1575"></a><span class="sd">                           min      max      mean       std</span>
<a id="__codelineno-0-1576" name="__codelineno-0-1576"></a><span class="sd">              Band_2  0.020377  0.97813  0.477189  0.306864</span>
<a id="__codelineno-0-1577" name="__codelineno-0-1577"></a>
<a id="__codelineno-0-1578" name="__codelineno-0-1578"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1579" name="__codelineno-0-1579"></a>
<a id="__codelineno-0-1580" name="__codelineno-0-1580"></a><span class="sd">            - Get the statistics of all the bands using a mask polygon.</span>
<a id="__codelineno-0-1581" name="__codelineno-0-1581"></a>
<a id="__codelineno-0-1582" name="__codelineno-0-1582"></a><span class="sd">              - Create the polygon using shapely polygon, and use the xmin, ymin, xmax, ymax = [0.1, -0.2,</span>
<a id="__codelineno-0-1583" name="__codelineno-0-1583"></a><span class="sd">                0.2 -0.1] to cover the 4 cells.</span>
<a id="__codelineno-0-1584" name="__codelineno-0-1584"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-1585" name="__codelineno-0-1585"></a><span class="sd">              &gt;&gt;&gt; from shapely.geometry import Polygon</span>
<a id="__codelineno-0-1586" name="__codelineno-0-1586"></a><span class="sd">              &gt;&gt;&gt; import geopandas as gpd</span>
<a id="__codelineno-0-1587" name="__codelineno-0-1587"></a><span class="sd">              &gt;&gt;&gt; mask = gpd.GeoDataFrame(geometry=[Polygon([(0.1, -0.1), (0.1, -0.2), (0.2, -0.2), (0.2, -0.1)])],crs=4326)</span>
<a id="__codelineno-0-1588" name="__codelineno-0-1588"></a><span class="sd">              &gt;&gt;&gt; print(dataset.stats(mask=mask))  # doctest: +SKIP</span>
<a id="__codelineno-0-1589" name="__codelineno-0-1589"></a><span class="sd">                           min       max      mean       std</span>
<a id="__codelineno-0-1590" name="__codelineno-0-1590"></a><span class="sd">              Band_1  0.193441  0.702108  0.541478  0.202932</span>
<a id="__codelineno-0-1591" name="__codelineno-0-1591"></a><span class="sd">              Band_2  0.281281  0.932573  0.665602  0.239410</span>
<a id="__codelineno-0-1592" name="__codelineno-0-1592"></a><span class="sd">              Band_3  0.031395  0.982235  0.493086  0.377608</span>
<a id="__codelineno-0-1593" name="__codelineno-0-1593"></a><span class="sd">              Band_4  0.079562  0.930965  0.591025  0.341578</span>
<a id="__codelineno-0-1594" name="__codelineno-0-1594"></a>
<a id="__codelineno-0-1595" name="__codelineno-0-1595"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1596" name="__codelineno-0-1596"></a>
<a id="__codelineno-0-1597" name="__codelineno-0-1597"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1598" name="__codelineno-0-1598"></a>        <span class="k">if</span> <span class="n">mask</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1599" name="__codelineno-0-1599"></a>            <span class="n">dst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">touch</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-1600" name="__codelineno-0-1600"></a>
<a id="__codelineno-0-1601" name="__codelineno-0-1601"></a>        <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1602" name="__codelineno-0-1602"></a>            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<a id="__codelineno-0-1603" name="__codelineno-0-1603"></a>                <span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">band_names</span><span class="p">,</span>
<a id="__codelineno-0-1604" name="__codelineno-0-1604"></a>                <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;std&quot;</span><span class="p">],</span>
<a id="__codelineno-0-1605" name="__codelineno-0-1605"></a>                <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span>
<a id="__codelineno-0-1606" name="__codelineno-0-1606"></a>            <span class="p">)</span>
<a id="__codelineno-0-1607" name="__codelineno-0-1607"></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-1608" name="__codelineno-0-1608"></a>                <span class="k">if</span> <span class="n">mask</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1609" name="__codelineno-0-1609"></a>                    <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">dst</span><span class="o">.</span><span class="n">_get_stats</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-0-1610" name="__codelineno-0-1610"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1611" name="__codelineno-0-1611"></a>                    <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_stats</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-0-1612" name="__codelineno-0-1612"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1613" name="__codelineno-0-1613"></a>            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<a id="__codelineno-0-1614" name="__codelineno-0-1614"></a>                <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">band_names</span><span class="p">[</span><span class="n">band</span><span class="p">]],</span>
<a id="__codelineno-0-1615" name="__codelineno-0-1615"></a>                <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;std&quot;</span><span class="p">],</span>
<a id="__codelineno-0-1616" name="__codelineno-0-1616"></a>                <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span>
<a id="__codelineno-0-1617" name="__codelineno-0-1617"></a>            <span class="p">)</span>
<a id="__codelineno-0-1618" name="__codelineno-0-1618"></a>            <span class="k">if</span> <span class="n">mask</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1619" name="__codelineno-0-1619"></a>                <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">dst</span><span class="o">.</span><span class="n">_get_stats</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-1620" name="__codelineno-0-1620"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1621" name="__codelineno-0-1621"></a>                <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_stats</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-1622" name="__codelineno-0-1622"></a>
<a id="__codelineno-0-1623" name="__codelineno-0-1623"></a>        <span class="k">return</span> <span class="n">df</span>
<a id="__codelineno-0-1624" name="__codelineno-0-1624"></a>
<a id="__codelineno-0-1625" name="__codelineno-0-1625"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<a id="__codelineno-0-1626" name="__codelineno-0-1626"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;_get_stats.&quot;&quot;&quot;</span>
<a id="__codelineno-0-1627" name="__codelineno-0-1627"></a>        <span class="n">band_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-1628" name="__codelineno-0-1628"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-1629" name="__codelineno-0-1629"></a>            <span class="n">vals</span> <span class="o">=</span> <span class="n">band_i</span><span class="o">.</span><span class="n">GetStatistics</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-1630" name="__codelineno-0-1630"></a>        <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
<a id="__codelineno-0-1631" name="__codelineno-0-1631"></a>            <span class="c1"># when the GetStatistics gives an error &quot;RuntimeError: Failed to compute statistics, no valid pixels</span>
<a id="__codelineno-0-1632" name="__codelineno-0-1632"></a>            <span class="c1"># found in sampling.&quot;</span>
<a id="__codelineno-0-1633" name="__codelineno-0-1633"></a>            <span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-1634" name="__codelineno-0-1634"></a>
<a id="__codelineno-0-1635" name="__codelineno-0-1635"></a>        <span class="k">if</span> <span class="nb">sum</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-1636" name="__codelineno-0-1636"></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
<a id="__codelineno-0-1637" name="__codelineno-0-1637"></a>                <span class="sa">f</span><span class="s2">&quot;Band </span><span class="si">{</span><span class="n">band</span><span class="si">}</span><span class="s2"> has no statistics, and the statistics are going to be calculate&quot;</span>
<a id="__codelineno-0-1638" name="__codelineno-0-1638"></a>            <span class="p">)</span>
<a id="__codelineno-0-1639" name="__codelineno-0-1639"></a>            <span class="n">vals</span> <span class="o">=</span> <span class="n">band_i</span><span class="o">.</span><span class="n">ComputeStatistics</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-1640" name="__codelineno-0-1640"></a>
<a id="__codelineno-0-1641" name="__codelineno-0-1641"></a>        <span class="k">return</span> <span class="n">vals</span>
<a id="__codelineno-0-1642" name="__codelineno-0-1642"></a>
<a id="__codelineno-0-1643" name="__codelineno-0-1643"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span>
<a id="__codelineno-0-1644" name="__codelineno-0-1644"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-1645" name="__codelineno-0-1645"></a>        <span class="n">band</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1646" name="__codelineno-0-1646"></a>        <span class="n">exclude_value</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1647" name="__codelineno-0-1647"></a>        <span class="n">rgb</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1648" name="__codelineno-0-1648"></a>        <span class="n">surface_reflectance</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1649" name="__codelineno-0-1649"></a>        <span class="n">cutoff</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1650" name="__codelineno-0-1650"></a>        <span class="n">overview</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-1651" name="__codelineno-0-1651"></a>        <span class="n">overview_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-1652" name="__codelineno-0-1652"></a>        <span class="n">percentile</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1653" name="__codelineno-0-1653"></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<a id="__codelineno-0-1654" name="__codelineno-0-1654"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ArrayGlyph&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1655" name="__codelineno-0-1655"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Plot the values/overviews of a given band.</span>
<a id="__codelineno-0-1656" name="__codelineno-0-1656"></a>
<a id="__codelineno-0-1657" name="__codelineno-0-1657"></a><span class="sd">        The plot function uses the `cleopatra` as a backend to plot the raster data, for more information check</span>
<a id="__codelineno-0-1658" name="__codelineno-0-1658"></a><span class="sd">        [ArrayGlyph](https://serapieum-of-alex.github.io/cleopatra/latest/api/array-glyph-class/#cleopatra.array_glyph.ArrayGlyph.plot).</span>
<a id="__codelineno-0-1659" name="__codelineno-0-1659"></a>
<a id="__codelineno-0-1660" name="__codelineno-0-1660"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1661" name="__codelineno-0-1661"></a><span class="sd">            band (int, optional):</span>
<a id="__codelineno-0-1662" name="__codelineno-0-1662"></a><span class="sd">                The band you want to get its data. Default is 0.</span>
<a id="__codelineno-0-1663" name="__codelineno-0-1663"></a><span class="sd">            exclude_value (Any, optional):</span>
<a id="__codelineno-0-1664" name="__codelineno-0-1664"></a><span class="sd">                Value to exclude from the plot. Default is None.</span>
<a id="__codelineno-0-1665" name="__codelineno-0-1665"></a><span class="sd">            rgb (List[int], optional):</span>
<a id="__codelineno-0-1666" name="__codelineno-0-1666"></a><span class="sd">                The indices of the red, green, and blue bands in the `Dataset`. the `rgb` parameter can be a list of</span>
<a id="__codelineno-0-1667" name="__codelineno-0-1667"></a><span class="sd">                three values, or a list of four values if the alpha band is also included.</span>
<a id="__codelineno-0-1668" name="__codelineno-0-1668"></a><span class="sd">                The `plot` method will check if the rgb bands are defined in the `Dataset`, if all the three bands (</span>
<a id="__codelineno-0-1669" name="__codelineno-0-1669"></a><span class="sd">                red, green, blue)) are defined, the method will use them to plot the real image, if not the rgb bands</span>
<a id="__codelineno-0-1670" name="__codelineno-0-1670"></a><span class="sd">                will be considered as [2,1,0] as the default order for sentinel tif files.</span>
<a id="__codelineno-0-1671" name="__codelineno-0-1671"></a><span class="sd">            surface_reflectance (int, optional):</span>
<a id="__codelineno-0-1672" name="__codelineno-0-1672"></a><span class="sd">                Surface reflectance value for normalizing satellite data, by default None.</span>
<a id="__codelineno-0-1673" name="__codelineno-0-1673"></a><span class="sd">                Typically 10000 for Sentinel-2 data.</span>
<a id="__codelineno-0-1674" name="__codelineno-0-1674"></a><span class="sd">            cutoff (List, optional):</span>
<a id="__codelineno-0-1675" name="__codelineno-0-1675"></a><span class="sd">                clip the range of pixel values for each band. (take only the pixel values from 0 to the value of the cutoff</span>
<a id="__codelineno-0-1676" name="__codelineno-0-1676"></a><span class="sd">                and scale them back to between 0 and 1). Default is None.</span>
<a id="__codelineno-0-1677" name="__codelineno-0-1677"></a><span class="sd">            overview (bool, optional):</span>
<a id="__codelineno-0-1678" name="__codelineno-0-1678"></a><span class="sd">                True if you want to plot the overview. Default is False.</span>
<a id="__codelineno-0-1679" name="__codelineno-0-1679"></a><span class="sd">            overview_index (int, optional):</span>
<a id="__codelineno-0-1680" name="__codelineno-0-1680"></a><span class="sd">                Index of the overview. Default is 0.</span>
<a id="__codelineno-0-1681" name="__codelineno-0-1681"></a><span class="sd">            percentile: int</span>
<a id="__codelineno-0-1682" name="__codelineno-0-1682"></a><span class="sd">                The percentile value to be used for scaling.</span>
<a id="__codelineno-0-1683" name="__codelineno-0-1683"></a><span class="sd">        kwargs:</span>
<a id="__codelineno-0-1684" name="__codelineno-0-1684"></a><span class="sd">                | Parameter                   | Type                | Description |</span>
<a id="__codelineno-0-1685" name="__codelineno-0-1685"></a><span class="sd">                |-----------------------------|---------------------|-------------|</span>
<a id="__codelineno-0-1686" name="__codelineno-0-1686"></a><span class="sd">                | `points`                    | array               | 3 column array with the first column as the value to display for the point, the second as the row index, and the third as the column index in the array. The second and third columns tell the location of the point. |</span>
<a id="__codelineno-0-1687" name="__codelineno-0-1687"></a><span class="sd">                | `point_color`               | str                 | Color of the point. |</span>
<a id="__codelineno-0-1688" name="__codelineno-0-1688"></a><span class="sd">                | `point_size`                | Any                 | Size of the point. |</span>
<a id="__codelineno-0-1689" name="__codelineno-0-1689"></a><span class="sd">                | `pid_color`                 | str                 | Color of the annotation of the point. Default is blue. |</span>
<a id="__codelineno-0-1690" name="__codelineno-0-1690"></a><span class="sd">                | `pid_size`                  | Any                 | Size of the point annotation. |</span>
<a id="__codelineno-0-1691" name="__codelineno-0-1691"></a><span class="sd">                | `figsize`                   | tuple, optional     | Figure size. Default is `(8, 8)`. |</span>
<a id="__codelineno-0-1692" name="__codelineno-0-1692"></a><span class="sd">                | `title`                     | str, optional       | Title of the plot. Default is `&#39;Total Discharge&#39;`. |</span>
<a id="__codelineno-0-1693" name="__codelineno-0-1693"></a><span class="sd">                | `title_size`                | int, optional       | Title size. Default is `15`. |</span>
<a id="__codelineno-0-1694" name="__codelineno-0-1694"></a><span class="sd">                | `orientation`               | str, optional       | Orientation of the color bar (`horizontal` or `vertical`). Default is `&#39;vertical&#39;`. |</span>
<a id="__codelineno-0-1695" name="__codelineno-0-1695"></a><span class="sd">                | `rotation`                  | number, optional    | Rotation of the color bar label. Default is `-90`. |</span>
<a id="__codelineno-0-1696" name="__codelineno-0-1696"></a><span class="sd">                | `cbar_length`               | float, optional     | Ratio to control the height of the color bar. Default is `0.75`. |</span>
<a id="__codelineno-0-1697" name="__codelineno-0-1697"></a><span class="sd">                | `ticks_spacing`             | int, optional       | Spacing between color bar ticks. Default is `2`. |</span>
<a id="__codelineno-0-1698" name="__codelineno-0-1698"></a><span class="sd">                | `cbar_label_size`           | int, optional       | Size of the color bar label. Default is `12`. |</span>
<a id="__codelineno-0-1699" name="__codelineno-0-1699"></a><span class="sd">                | `cbar_label`                | str, optional       | Label of the color bar. Default is `&#39;Discharge m/s&#39;`. |</span>
<a id="__codelineno-0-1700" name="__codelineno-0-1700"></a><span class="sd">                | `color_scale`               | int, optional       | Scale mode for colors. Options: 1 = normal, 2 = power, 3 = SymLogNorm, 4 = PowerNorm, 5 = BoundaryNorm. Default is `1`. |</span>
<a id="__codelineno-0-1701" name="__codelineno-0-1701"></a><span class="sd">                | `gamma`                     | float, optional     | Value needed for color scale option 2. Default is `1/2`. |</span>
<a id="__codelineno-0-1702" name="__codelineno-0-1702"></a><span class="sd">                | `line_threshold`            | float, optional     | Value needed for color scale option 3. Default is `0.0001`. |</span>
<a id="__codelineno-0-1703" name="__codelineno-0-1703"></a><span class="sd">                | `line_scale`                | float, optional     | Value needed for color scale option 3. Default is `0.001`. |</span>
<a id="__codelineno-0-1704" name="__codelineno-0-1704"></a><span class="sd">                | `bounds`                    | list, optional      | Discrete bounds for color scale option 4. Default is `None`. |</span>
<a id="__codelineno-0-1705" name="__codelineno-0-1705"></a><span class="sd">                | `midpoint`                  | float, optional     | Value needed for color scale option 5. Default is `0`. |</span>
<a id="__codelineno-0-1706" name="__codelineno-0-1706"></a><span class="sd">                | `cmap`                      | str, optional       | Color map style. Default is `&#39;coolwarm_r&#39;`. |</span>
<a id="__codelineno-0-1707" name="__codelineno-0-1707"></a><span class="sd">                | `display_cell_value`        | bool, optional      | Whether to display cell values as text. |</span>
<a id="__codelineno-0-1708" name="__codelineno-0-1708"></a><span class="sd">                | `num_size`                  | int, optional       | Size of numbers plotted on top of each cell. Default is `8`. |</span>
<a id="__codelineno-0-1709" name="__codelineno-0-1709"></a><span class="sd">                | `background_color_threshold`| float or int, optional | Threshold for deciding text color over cells: if value &gt; threshold  black text; else white text. If `None`, max value / 2 is used. Default is `None`. |</span>
<a id="__codelineno-0-1710" name="__codelineno-0-1710"></a>
<a id="__codelineno-0-1711" name="__codelineno-0-1711"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-1712" name="__codelineno-0-1712"></a><span class="sd">            ArrayGlyph:</span>
<a id="__codelineno-0-1713" name="__codelineno-0-1713"></a><span class="sd">                ArrayGlyph object. For more details of the ArrayGlyph object check the [ArrayGlyph](https://serapieum-of-alex.github.io/cleopatra/latest/api/array-glyph-class/).</span>
<a id="__codelineno-0-1714" name="__codelineno-0-1714"></a>
<a id="__codelineno-0-1715" name="__codelineno-0-1715"></a>
<a id="__codelineno-0-1716" name="__codelineno-0-1716"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-1717" name="__codelineno-0-1717"></a><span class="sd">            - Plot a certain band:</span>
<a id="__codelineno-0-1718" name="__codelineno-0-1718"></a>
<a id="__codelineno-0-1719" name="__codelineno-0-1719"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-1720" name="__codelineno-0-1720"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-1721" name="__codelineno-0-1721"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(4, 10, 10)</span>
<a id="__codelineno-0-1722" name="__codelineno-0-1722"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-1723" name="__codelineno-0-1723"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-1724" name="__codelineno-0-1724"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,epsg=4326)</span>
<a id="__codelineno-0-1725" name="__codelineno-0-1725"></a><span class="sd">              &gt;&gt;&gt; dataset.plot(band=0)</span>
<a id="__codelineno-0-1726" name="__codelineno-0-1726"></a><span class="sd">              (&lt;Figure size 800x800 with 2 Axes&gt;, &lt;Axes: &gt;)</span>
<a id="__codelineno-0-1727" name="__codelineno-0-1727"></a>
<a id="__codelineno-0-1728" name="__codelineno-0-1728"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1729" name="__codelineno-0-1729"></a>
<a id="__codelineno-0-1730" name="__codelineno-0-1730"></a><span class="sd">            - plot using power scale.</span>
<a id="__codelineno-0-1731" name="__codelineno-0-1731"></a>
<a id="__codelineno-0-1732" name="__codelineno-0-1732"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-1733" name="__codelineno-0-1733"></a><span class="sd">              &gt;&gt;&gt; dataset.plot(band=0, color_scale=&quot;power&quot;)</span>
<a id="__codelineno-0-1734" name="__codelineno-0-1734"></a><span class="sd">              (&lt;Figure size 800x800 with 2 Axes&gt;, &lt;Axes: &gt;)</span>
<a id="__codelineno-0-1735" name="__codelineno-0-1735"></a>
<a id="__codelineno-0-1736" name="__codelineno-0-1736"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1737" name="__codelineno-0-1737"></a>
<a id="__codelineno-0-1738" name="__codelineno-0-1738"></a><span class="sd">            - plot using SymLogNorm scale.</span>
<a id="__codelineno-0-1739" name="__codelineno-0-1739"></a>
<a id="__codelineno-0-1740" name="__codelineno-0-1740"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-1741" name="__codelineno-0-1741"></a><span class="sd">              &gt;&gt;&gt; dataset.plot(band=0, color_scale=&quot;sym-lognorm&quot;)</span>
<a id="__codelineno-0-1742" name="__codelineno-0-1742"></a><span class="sd">              (&lt;Figure size 800x800 with 2 Axes&gt;, &lt;Axes: &gt;)</span>
<a id="__codelineno-0-1743" name="__codelineno-0-1743"></a>
<a id="__codelineno-0-1744" name="__codelineno-0-1744"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1745" name="__codelineno-0-1745"></a>
<a id="__codelineno-0-1746" name="__codelineno-0-1746"></a><span class="sd">            - plot using PowerNorm scale.</span>
<a id="__codelineno-0-1747" name="__codelineno-0-1747"></a>
<a id="__codelineno-0-1748" name="__codelineno-0-1748"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-1749" name="__codelineno-0-1749"></a><span class="sd">              &gt;&gt;&gt; dataset.plot(band=0, color_scale=&quot;boundary-norm&quot;, bounds=[0, 0.2, 0.4, 0.6, 0.8, 1])</span>
<a id="__codelineno-0-1750" name="__codelineno-0-1750"></a><span class="sd">              (&lt;Figure size 800x800 with 2 Axes&gt;, &lt;Axes: &gt;)</span>
<a id="__codelineno-0-1751" name="__codelineno-0-1751"></a>
<a id="__codelineno-0-1752" name="__codelineno-0-1752"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1753" name="__codelineno-0-1753"></a>
<a id="__codelineno-0-1754" name="__codelineno-0-1754"></a><span class="sd">            - plot using BoundaryNorm scale.</span>
<a id="__codelineno-0-1755" name="__codelineno-0-1755"></a>
<a id="__codelineno-0-1756" name="__codelineno-0-1756"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-1757" name="__codelineno-0-1757"></a><span class="sd">              &gt;&gt;&gt; dataset.plot(band=0, color_scale=&quot;midpoint&quot;)</span>
<a id="__codelineno-0-1758" name="__codelineno-0-1758"></a><span class="sd">              (&lt;Figure size 800x800 with 2 Axes&gt;, &lt;Axes: &gt;)</span>
<a id="__codelineno-0-1759" name="__codelineno-0-1759"></a>
<a id="__codelineno-0-1760" name="__codelineno-0-1760"></a><span class="sd">              ```</span>
<a id="__codelineno-0-1761" name="__codelineno-0-1761"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1762" name="__codelineno-0-1762"></a>        <span class="n">import_cleopatra</span><span class="p">(</span>
<a id="__codelineno-0-1763" name="__codelineno-0-1763"></a>            <span class="s2">&quot;The current function uses cleopatra package to for plotting, please install it manually, for more info &quot;</span>
<a id="__codelineno-0-1764" name="__codelineno-0-1764"></a>            <span class="s2">&quot;check https://github.com/Serapieum-of-alex/cleopatra&quot;</span>
<a id="__codelineno-0-1765" name="__codelineno-0-1765"></a>        <span class="p">)</span>
<a id="__codelineno-0-1766" name="__codelineno-0-1766"></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">cleopatra.array_glyph</span><span class="w"> </span><span class="kn">import</span> <span class="n">ArrayGlyph</span>
<a id="__codelineno-0-1767" name="__codelineno-0-1767"></a>
<a id="__codelineno-0-1768" name="__codelineno-0-1768"></a>        <span class="n">no_data_value</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">]</span>
<a id="__codelineno-0-1769" name="__codelineno-0-1769"></a>        <span class="k">if</span> <span class="n">overview</span><span class="p">:</span>
<a id="__codelineno-0-1770" name="__codelineno-0-1770"></a>            <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_overview_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">,</span> <span class="n">overview_index</span><span class="o">=</span><span class="n">overview_index</span><span class="p">)</span>
<a id="__codelineno-0-1771" name="__codelineno-0-1771"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1772" name="__codelineno-0-1772"></a>            <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-1773" name="__codelineno-0-1773"></a>        <span class="c1"># if the raster has three bands or more.</span>
<a id="__codelineno-0-1774" name="__codelineno-0-1774"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
<a id="__codelineno-0-1775" name="__codelineno-0-1775"></a>            <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1776" name="__codelineno-0-1776"></a>                <span class="k">if</span> <span class="n">rgb</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1777" name="__codelineno-0-1777"></a>                    <span class="n">rgb</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-1778" name="__codelineno-0-1778"></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">get_band_by_color</span><span class="p">(</span><span class="s2">&quot;red&quot;</span><span class="p">),</span>
<a id="__codelineno-0-1779" name="__codelineno-0-1779"></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">get_band_by_color</span><span class="p">(</span><span class="s2">&quot;green&quot;</span><span class="p">),</span>
<a id="__codelineno-0-1780" name="__codelineno-0-1780"></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">get_band_by_color</span><span class="p">(</span><span class="s2">&quot;blue&quot;</span><span class="p">),</span>
<a id="__codelineno-0-1781" name="__codelineno-0-1781"></a>                    <span class="p">]</span>
<a id="__codelineno-0-1782" name="__codelineno-0-1782"></a>                    <span class="k">if</span> <span class="kc">None</span> <span class="ow">in</span> <span class="n">rgb</span><span class="p">:</span>
<a id="__codelineno-0-1783" name="__codelineno-0-1783"></a>                        <span class="n">rgb</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-1784" name="__codelineno-0-1784"></a>                <span class="c1"># first make the band index the first band in the rgb list (red band)</span>
<a id="__codelineno-0-1785" name="__codelineno-0-1785"></a>                <span class="n">band</span> <span class="o">=</span> <span class="n">rgb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-1786" name="__codelineno-0-1786"></a>        <span class="c1"># elif self.band_count == 1:</span>
<a id="__codelineno-0-1787" name="__codelineno-0-1787"></a>        <span class="c1">#     band = 0</span>
<a id="__codelineno-0-1788" name="__codelineno-0-1788"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1789" name="__codelineno-0-1789"></a>            <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1790" name="__codelineno-0-1790"></a>                <span class="n">band</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-1791" name="__codelineno-0-1791"></a>
<a id="__codelineno-0-1792" name="__codelineno-0-1792"></a>        <span class="n">exclude_value</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-1793" name="__codelineno-0-1793"></a>            <span class="p">[</span><span class="n">no_data_value</span><span class="p">[</span><span class="n">band</span><span class="p">],</span> <span class="n">exclude_value</span><span class="p">]</span>
<a id="__codelineno-0-1794" name="__codelineno-0-1794"></a>            <span class="k">if</span> <span class="n">exclude_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-1795" name="__codelineno-0-1795"></a>            <span class="k">else</span> <span class="p">[</span><span class="n">no_data_value</span><span class="p">[</span><span class="n">band</span><span class="p">]]</span>
<a id="__codelineno-0-1796" name="__codelineno-0-1796"></a>        <span class="p">)</span>
<a id="__codelineno-0-1797" name="__codelineno-0-1797"></a>
<a id="__codelineno-0-1798" name="__codelineno-0-1798"></a>        <span class="n">cleo</span> <span class="o">=</span> <span class="n">ArrayGlyph</span><span class="p">(</span>
<a id="__codelineno-0-1799" name="__codelineno-0-1799"></a>            <span class="n">arr</span><span class="p">,</span>
<a id="__codelineno-0-1800" name="__codelineno-0-1800"></a>            <span class="n">exclude_value</span><span class="o">=</span><span class="n">exclude_value</span><span class="p">,</span>
<a id="__codelineno-0-1801" name="__codelineno-0-1801"></a>            <span class="n">extent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">,</span>
<a id="__codelineno-0-1802" name="__codelineno-0-1802"></a>            <span class="n">rgb</span><span class="o">=</span><span class="n">rgb</span><span class="p">,</span>
<a id="__codelineno-0-1803" name="__codelineno-0-1803"></a>            <span class="n">surface_reflectance</span><span class="o">=</span><span class="n">surface_reflectance</span><span class="p">,</span>
<a id="__codelineno-0-1804" name="__codelineno-0-1804"></a>            <span class="n">cutoff</span><span class="o">=</span><span class="n">cutoff</span><span class="p">,</span>
<a id="__codelineno-0-1805" name="__codelineno-0-1805"></a>            <span class="n">percentile</span><span class="o">=</span><span class="n">percentile</span><span class="p">,</span>
<a id="__codelineno-0-1806" name="__codelineno-0-1806"></a>            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<a id="__codelineno-0-1807" name="__codelineno-0-1807"></a>        <span class="p">)</span>
<a id="__codelineno-0-1808" name="__codelineno-0-1808"></a>        <span class="n">cleo</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-1809" name="__codelineno-0-1809"></a>        <span class="k">return</span> <span class="n">cleo</span>
<a id="__codelineno-0-1810" name="__codelineno-0-1810"></a>
<a id="__codelineno-0-1811" name="__codelineno-0-1811"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">translate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-1812" name="__codelineno-0-1812"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Translate.</span>
<a id="__codelineno-0-1813" name="__codelineno-0-1813"></a>
<a id="__codelineno-0-1814" name="__codelineno-0-1814"></a><span class="sd">        The translate function can be used to</span>
<a id="__codelineno-0-1815" name="__codelineno-0-1815"></a><span class="sd">        - Convert Between Formats: Convert a raster from one format to another (e.g., from GeoTIFF to JPEG).</span>
<a id="__codelineno-0-1816" name="__codelineno-0-1816"></a><span class="sd">        - Subset: Extract a subregion of a raster.</span>
<a id="__codelineno-0-1817" name="__codelineno-0-1817"></a><span class="sd">        - Resample: Change the resolution of a raster.</span>
<a id="__codelineno-0-1818" name="__codelineno-0-1818"></a><span class="sd">        - Reproject: Change the coordinate reference system of a raster.</span>
<a id="__codelineno-0-1819" name="__codelineno-0-1819"></a><span class="sd">        - Scale Values: Scale pixel values to a new range.</span>
<a id="__codelineno-0-1820" name="__codelineno-0-1820"></a><span class="sd">        - Change Data Type: Convert the data type of the raster.</span>
<a id="__codelineno-0-1821" name="__codelineno-0-1821"></a><span class="sd">        - Apply Compression: Apply compression to the output raster.</span>
<a id="__codelineno-0-1822" name="__codelineno-0-1822"></a><span class="sd">        - Apply No-Data Values: Define no-data values for the output raster.</span>
<a id="__codelineno-0-1823" name="__codelineno-0-1823"></a>
<a id="__codelineno-0-1824" name="__codelineno-0-1824"></a>
<a id="__codelineno-0-1825" name="__codelineno-0-1825"></a><span class="sd">        Parameters</span>
<a id="__codelineno-0-1826" name="__codelineno-0-1826"></a><span class="sd">        ----------</span>
<a id="__codelineno-0-1827" name="__codelineno-0-1827"></a><span class="sd">        path: str, optional, default is None.</span>
<a id="__codelineno-0-1828" name="__codelineno-0-1828"></a><span class="sd">            path to save the output, if None, the output will be saved in memory.</span>
<a id="__codelineno-0-1829" name="__codelineno-0-1829"></a><span class="sd">        kwargs:</span>
<a id="__codelineno-0-1830" name="__codelineno-0-1830"></a><span class="sd">            unscale:</span>
<a id="__codelineno-0-1831" name="__codelineno-0-1831"></a><span class="sd">                unscale values with scale and offset metadata.</span>
<a id="__codelineno-0-1832" name="__codelineno-0-1832"></a><span class="sd">            scaleParams:</span>
<a id="__codelineno-0-1833" name="__codelineno-0-1833"></a><span class="sd">                list of scale parameters, each of the form [src_min,src_max] or [src_min,src_max,dst_min,dst_max]</span>
<a id="__codelineno-0-1834" name="__codelineno-0-1834"></a><span class="sd">            outputType:</span>
<a id="__codelineno-0-1835" name="__codelineno-0-1835"></a><span class="sd">                output type (gdalconst.GDT_Byte, etc...)</span>
<a id="__codelineno-0-1836" name="__codelineno-0-1836"></a><span class="sd">            exponents:</span>
<a id="__codelineno-0-1837" name="__codelineno-0-1837"></a><span class="sd">                list of exponentiation parameters</span>
<a id="__codelineno-0-1838" name="__codelineno-0-1838"></a><span class="sd">            bandList:</span>
<a id="__codelineno-0-1839" name="__codelineno-0-1839"></a><span class="sd">                array of band numbers (index start at 1)</span>
<a id="__codelineno-0-1840" name="__codelineno-0-1840"></a><span class="sd">            maskBand:</span>
<a id="__codelineno-0-1841" name="__codelineno-0-1841"></a><span class="sd">                mask band to generate or not (&quot;none&quot;, &quot;auto&quot;, &quot;mask&quot;, 1, ...)</span>
<a id="__codelineno-0-1842" name="__codelineno-0-1842"></a><span class="sd">            creationOptions:</span>
<a id="__codelineno-0-1843" name="__codelineno-0-1843"></a><span class="sd">                list or dict of creation options</span>
<a id="__codelineno-0-1844" name="__codelineno-0-1844"></a><span class="sd">            srcWin:</span>
<a id="__codelineno-0-1845" name="__codelineno-0-1845"></a><span class="sd">                subwindow in pixels to extract: [left_x, top_y, width, height]</span>
<a id="__codelineno-0-1846" name="__codelineno-0-1846"></a><span class="sd">            projWin:</span>
<a id="__codelineno-0-1847" name="__codelineno-0-1847"></a><span class="sd">                subwindow in projected coordinates to extract: [ulx, uly, lrx, lry]</span>
<a id="__codelineno-0-1848" name="__codelineno-0-1848"></a><span class="sd">            projWinSRS:</span>
<a id="__codelineno-0-1849" name="__codelineno-0-1849"></a><span class="sd">                SRS in which projWin is expressed</span>
<a id="__codelineno-0-1850" name="__codelineno-0-1850"></a><span class="sd">            outputBounds:</span>
<a id="__codelineno-0-1851" name="__codelineno-0-1851"></a><span class="sd">                assigned output bounds: [ulx, uly, lrx, lry]</span>
<a id="__codelineno-0-1852" name="__codelineno-0-1852"></a><span class="sd">            outputGeotransform:</span>
<a id="__codelineno-0-1853" name="__codelineno-0-1853"></a><span class="sd">                assigned geotransform matrix (array of 6 values) (mutually exclusive with outputBounds)</span>
<a id="__codelineno-0-1854" name="__codelineno-0-1854"></a><span class="sd">            metadataOptions:</span>
<a id="__codelineno-0-1855" name="__codelineno-0-1855"></a><span class="sd">                list or dict of metadata options</span>
<a id="__codelineno-0-1856" name="__codelineno-0-1856"></a><span class="sd">            outputSRS:</span>
<a id="__codelineno-0-1857" name="__codelineno-0-1857"></a><span class="sd">                assigned output SRS</span>
<a id="__codelineno-0-1858" name="__codelineno-0-1858"></a><span class="sd">            noData:</span>
<a id="__codelineno-0-1859" name="__codelineno-0-1859"></a><span class="sd">                nodata value (or &quot;none&quot; to unset it)</span>
<a id="__codelineno-0-1860" name="__codelineno-0-1860"></a><span class="sd">            rgbExpand:</span>
<a id="__codelineno-0-1861" name="__codelineno-0-1861"></a><span class="sd">                Color palette expansion mode: &quot;gray&quot;, &quot;rgb&quot;, &quot;rgba&quot;</span>
<a id="__codelineno-0-1862" name="__codelineno-0-1862"></a><span class="sd">            xmp:</span>
<a id="__codelineno-0-1863" name="__codelineno-0-1863"></a><span class="sd">                whether to copy XMP metadata</span>
<a id="__codelineno-0-1864" name="__codelineno-0-1864"></a><span class="sd">            resampleAlg:</span>
<a id="__codelineno-0-1865" name="__codelineno-0-1865"></a><span class="sd">                resampling mode</span>
<a id="__codelineno-0-1866" name="__codelineno-0-1866"></a><span class="sd">            overviewLevel:</span>
<a id="__codelineno-0-1867" name="__codelineno-0-1867"></a><span class="sd">                To specify which overview level of source files must be used</span>
<a id="__codelineno-0-1868" name="__codelineno-0-1868"></a><span class="sd">            domainMetadataOptions:</span>
<a id="__codelineno-0-1869" name="__codelineno-0-1869"></a><span class="sd">                list or dict of domain-specific metadata options</span>
<a id="__codelineno-0-1870" name="__codelineno-0-1870"></a>
<a id="__codelineno-0-1871" name="__codelineno-0-1871"></a><span class="sd">        Returns</span>
<a id="__codelineno-0-1872" name="__codelineno-0-1872"></a><span class="sd">        -------</span>
<a id="__codelineno-0-1873" name="__codelineno-0-1873"></a><span class="sd">        Dataset</span>
<a id="__codelineno-0-1874" name="__codelineno-0-1874"></a>
<a id="__codelineno-0-1875" name="__codelineno-0-1875"></a><span class="sd">        Examples</span>
<a id="__codelineno-0-1876" name="__codelineno-0-1876"></a><span class="sd">        --------</span>
<a id="__codelineno-0-1877" name="__codelineno-0-1877"></a><span class="sd">        Scale &amp; offset:</span>
<a id="__codelineno-0-1878" name="__codelineno-0-1878"></a><span class="sd">            - the translate function can be used to get rid of the scale and offset that are used to manipulate the</span>
<a id="__codelineno-0-1879" name="__codelineno-0-1879"></a><span class="sd">            dataset, to get the real values of the dataset.</span>
<a id="__codelineno-0-1880" name="__codelineno-0-1880"></a>
<a id="__codelineno-0-1881" name="__codelineno-0-1881"></a><span class="sd">            Scale:</span>
<a id="__codelineno-0-1882" name="__codelineno-0-1882"></a><span class="sd">                - First we will create a dataset from a float32 array with values between 1 and 10, and then we will</span>
<a id="__codelineno-0-1883" name="__codelineno-0-1883"></a><span class="sd">                    assign a scale of 0.1 to the dataset.</span>
<a id="__codelineno-0-1884" name="__codelineno-0-1884"></a>
<a id="__codelineno-0-1885" name="__codelineno-0-1885"></a><span class="sd">                    &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-1886" name="__codelineno-0-1886"></a><span class="sd">                    &gt;&gt;&gt; arr = np.random.randint(1, 10, size=(5, 5)).astype(np.float32)</span>
<a id="__codelineno-0-1887" name="__codelineno-0-1887"></a><span class="sd">                    &gt;&gt;&gt; print(arr) # doctest: +SKIP</span>
<a id="__codelineno-0-1888" name="__codelineno-0-1888"></a><span class="sd">                    [[5. 5. 3. 4. 2.]</span>
<a id="__codelineno-0-1889" name="__codelineno-0-1889"></a><span class="sd">                     [2. 5. 5. 8. 5.]</span>
<a id="__codelineno-0-1890" name="__codelineno-0-1890"></a><span class="sd">                     [7. 5. 6. 1. 2.]</span>
<a id="__codelineno-0-1891" name="__codelineno-0-1891"></a><span class="sd">                     [6. 8. 1. 5. 8.]</span>
<a id="__codelineno-0-1892" name="__codelineno-0-1892"></a><span class="sd">                     [2. 5. 2. 2. 9.]]</span>
<a id="__codelineno-0-1893" name="__codelineno-0-1893"></a><span class="sd">                    &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-1894" name="__codelineno-0-1894"></a><span class="sd">                    &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-1895" name="__codelineno-0-1895"></a><span class="sd">                    &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,epsg=4326)</span>
<a id="__codelineno-0-1896" name="__codelineno-0-1896"></a><span class="sd">                    &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-1897" name="__codelineno-0-1897"></a><span class="sd">                    &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1898" name="__codelineno-0-1898"></a><span class="sd">                                Top Left Corner: (0.0, 0.0)</span>
<a id="__codelineno-0-1899" name="__codelineno-0-1899"></a><span class="sd">                                Cell size: 0.05</span>
<a id="__codelineno-0-1900" name="__codelineno-0-1900"></a><span class="sd">                                Dimension: 5 * 5</span>
<a id="__codelineno-0-1901" name="__codelineno-0-1901"></a><span class="sd">                                EPSG: 4326</span>
<a id="__codelineno-0-1902" name="__codelineno-0-1902"></a><span class="sd">                                Number of Bands: 1</span>
<a id="__codelineno-0-1903" name="__codelineno-0-1903"></a><span class="sd">                                Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-1904" name="__codelineno-0-1904"></a><span class="sd">                                Band colors: {0: &#39;undefined&#39;}</span>
<a id="__codelineno-0-1905" name="__codelineno-0-1905"></a><span class="sd">                                Band units: [&#39;&#39;]</span>
<a id="__codelineno-0-1906" name="__codelineno-0-1906"></a><span class="sd">                                Scale: [1.0]</span>
<a id="__codelineno-0-1907" name="__codelineno-0-1907"></a><span class="sd">                                Offset: [0]</span>
<a id="__codelineno-0-1908" name="__codelineno-0-1908"></a><span class="sd">                                Mask: -9999.0</span>
<a id="__codelineno-0-1909" name="__codelineno-0-1909"></a><span class="sd">                                Data type: float32</span>
<a id="__codelineno-0-1910" name="__codelineno-0-1910"></a><span class="sd">                                File: ...</span>
<a id="__codelineno-0-1911" name="__codelineno-0-1911"></a><span class="sd">                    &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1912" name="__codelineno-0-1912"></a><span class="sd">                    &gt;&gt;&gt; dataset.scale = [0.1]</span>
<a id="__codelineno-0-1913" name="__codelineno-0-1913"></a>
<a id="__codelineno-0-1914" name="__codelineno-0-1914"></a><span class="sd">                - now lets unscale the dataset values.</span>
<a id="__codelineno-0-1915" name="__codelineno-0-1915"></a>
<a id="__codelineno-0-1916" name="__codelineno-0-1916"></a><span class="sd">                    &gt;&gt;&gt; unscaled_dataset = dataset.translate(unscale=True)</span>
<a id="__codelineno-0-1917" name="__codelineno-0-1917"></a><span class="sd">                    &gt;&gt;&gt; print(unscaled_dataset) # doctest: +SKIP</span>
<a id="__codelineno-0-1918" name="__codelineno-0-1918"></a><span class="sd">                    &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1919" name="__codelineno-0-1919"></a><span class="sd">                                Top Left Corner: (0.0, 0.0)</span>
<a id="__codelineno-0-1920" name="__codelineno-0-1920"></a><span class="sd">                                Cell size: 0.05</span>
<a id="__codelineno-0-1921" name="__codelineno-0-1921"></a><span class="sd">                                Dimension: 5 * 5</span>
<a id="__codelineno-0-1922" name="__codelineno-0-1922"></a><span class="sd">                                EPSG: 4326</span>
<a id="__codelineno-0-1923" name="__codelineno-0-1923"></a><span class="sd">                                Number of Bands: 1</span>
<a id="__codelineno-0-1924" name="__codelineno-0-1924"></a><span class="sd">                                Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-1925" name="__codelineno-0-1925"></a><span class="sd">                                Band colors: {0: &#39;undefined&#39;}</span>
<a id="__codelineno-0-1926" name="__codelineno-0-1926"></a><span class="sd">                                Band units: [&#39;&#39;]</span>
<a id="__codelineno-0-1927" name="__codelineno-0-1927"></a><span class="sd">                                Scale: [1.0]</span>
<a id="__codelineno-0-1928" name="__codelineno-0-1928"></a><span class="sd">                                Offset: [0]</span>
<a id="__codelineno-0-1929" name="__codelineno-0-1929"></a><span class="sd">                                Mask: -9999.0</span>
<a id="__codelineno-0-1930" name="__codelineno-0-1930"></a><span class="sd">                                Data type: float32</span>
<a id="__codelineno-0-1931" name="__codelineno-0-1931"></a><span class="sd">                                File:</span>
<a id="__codelineno-0-1932" name="__codelineno-0-1932"></a><span class="sd">                    &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1933" name="__codelineno-0-1933"></a><span class="sd">                    &gt;&gt;&gt; print(unscaled_dataset.read_array()) # doctest: +SKIP</span>
<a id="__codelineno-0-1934" name="__codelineno-0-1934"></a><span class="sd">                    [[0.5 0.5 0.3 0.4 0.2]</span>
<a id="__codelineno-0-1935" name="__codelineno-0-1935"></a><span class="sd">                     [0.2 0.5 0.5 0.8 0.5]</span>
<a id="__codelineno-0-1936" name="__codelineno-0-1936"></a><span class="sd">                     [0.7 0.5 0.6 0.1 0.2]</span>
<a id="__codelineno-0-1937" name="__codelineno-0-1937"></a><span class="sd">                     [0.6 0.8 0.1 0.5 0.8]</span>
<a id="__codelineno-0-1938" name="__codelineno-0-1938"></a><span class="sd">                     [0.2 0.5 0.2 0.2 0.9]]</span>
<a id="__codelineno-0-1939" name="__codelineno-0-1939"></a>
<a id="__codelineno-0-1940" name="__codelineno-0-1940"></a><span class="sd">            offset:</span>
<a id="__codelineno-0-1941" name="__codelineno-0-1941"></a><span class="sd">                - You can also unshift the values of the dataset if the dataset has an offset. To remove the offset from</span>
<a id="__codelineno-0-1942" name="__codelineno-0-1942"></a><span class="sd">                    all values in the dataset, you can read the values using the `read_array` and then add the offset value</span>
<a id="__codelineno-0-1943" name="__codelineno-0-1943"></a><span class="sd">                    to the array. we will create a dataset from the same array we created above (values are between 1, and 10)</span>
<a id="__codelineno-0-1944" name="__codelineno-0-1944"></a><span class="sd">                    with an offset of 100.</span>
<a id="__codelineno-0-1945" name="__codelineno-0-1945"></a>
<a id="__codelineno-0-1946" name="__codelineno-0-1946"></a><span class="sd">                    &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,epsg=4326)</span>
<a id="__codelineno-0-1947" name="__codelineno-0-1947"></a><span class="sd">                    &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-1948" name="__codelineno-0-1948"></a><span class="sd">                    &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1949" name="__codelineno-0-1949"></a><span class="sd">                                Top Left Corner: (0.0, 0.0)</span>
<a id="__codelineno-0-1950" name="__codelineno-0-1950"></a><span class="sd">                                Cell size: 0.05</span>
<a id="__codelineno-0-1951" name="__codelineno-0-1951"></a><span class="sd">                                Dimension: 5 * 5</span>
<a id="__codelineno-0-1952" name="__codelineno-0-1952"></a><span class="sd">                                EPSG: 4326</span>
<a id="__codelineno-0-1953" name="__codelineno-0-1953"></a><span class="sd">                                Number of Bands: 1</span>
<a id="__codelineno-0-1954" name="__codelineno-0-1954"></a><span class="sd">                                Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-1955" name="__codelineno-0-1955"></a><span class="sd">                                Band colors: {0: &#39;undefined&#39;}</span>
<a id="__codelineno-0-1956" name="__codelineno-0-1956"></a><span class="sd">                                Band units: [&#39;&#39;]</span>
<a id="__codelineno-0-1957" name="__codelineno-0-1957"></a><span class="sd">                                Scale: [1.0]</span>
<a id="__codelineno-0-1958" name="__codelineno-0-1958"></a><span class="sd">                                Offset: [0]</span>
<a id="__codelineno-0-1959" name="__codelineno-0-1959"></a><span class="sd">                                Mask: -9999.0</span>
<a id="__codelineno-0-1960" name="__codelineno-0-1960"></a><span class="sd">                                Data type: float32</span>
<a id="__codelineno-0-1961" name="__codelineno-0-1961"></a><span class="sd">                                File: ...</span>
<a id="__codelineno-0-1962" name="__codelineno-0-1962"></a><span class="sd">                    &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1963" name="__codelineno-0-1963"></a>
<a id="__codelineno-0-1964" name="__codelineno-0-1964"></a><span class="sd">                - set the offset to 100.</span>
<a id="__codelineno-0-1965" name="__codelineno-0-1965"></a>
<a id="__codelineno-0-1966" name="__codelineno-0-1966"></a><span class="sd">                    &gt;&gt;&gt; dataset.offset = [100]</span>
<a id="__codelineno-0-1967" name="__codelineno-0-1967"></a>
<a id="__codelineno-0-1968" name="__codelineno-0-1968"></a><span class="sd">                - check if the offset has been set.</span>
<a id="__codelineno-0-1969" name="__codelineno-0-1969"></a>
<a id="__codelineno-0-1970" name="__codelineno-0-1970"></a><span class="sd">                    &gt;&gt;&gt; print(dataset.offset)</span>
<a id="__codelineno-0-1971" name="__codelineno-0-1971"></a><span class="sd">                    [100.0]</span>
<a id="__codelineno-0-1972" name="__codelineno-0-1972"></a>
<a id="__codelineno-0-1973" name="__codelineno-0-1973"></a><span class="sd">                - now lets unscale the dataset values.</span>
<a id="__codelineno-0-1974" name="__codelineno-0-1974"></a>
<a id="__codelineno-0-1975" name="__codelineno-0-1975"></a><span class="sd">                    &gt;&gt;&gt; unscaled_dataset = dataset.translate(unscale=True)</span>
<a id="__codelineno-0-1976" name="__codelineno-0-1976"></a><span class="sd">                    &gt;&gt;&gt; print(unscaled_dataset.read_array()) # doctest: +SKIP</span>
<a id="__codelineno-0-1977" name="__codelineno-0-1977"></a><span class="sd">                    [[105. 105. 103. 104. 102.]</span>
<a id="__codelineno-0-1978" name="__codelineno-0-1978"></a><span class="sd">                     [102. 105. 105. 108. 105.]</span>
<a id="__codelineno-0-1979" name="__codelineno-0-1979"></a><span class="sd">                     [107. 105. 106. 101. 102.]</span>
<a id="__codelineno-0-1980" name="__codelineno-0-1980"></a><span class="sd">                     [106. 108. 101. 105. 108.]</span>
<a id="__codelineno-0-1981" name="__codelineno-0-1981"></a><span class="sd">                     [102. 105. 102. 102. 109.]]</span>
<a id="__codelineno-0-1982" name="__codelineno-0-1982"></a>
<a id="__codelineno-0-1983" name="__codelineno-0-1983"></a><span class="sd">                - as you see, all the values have been shifted by 100. now if you check the offset of the dataset</span>
<a id="__codelineno-0-1984" name="__codelineno-0-1984"></a>
<a id="__codelineno-0-1985" name="__codelineno-0-1985"></a><span class="sd">                    &gt;&gt;&gt; print(unscaled_dataset.offset)</span>
<a id="__codelineno-0-1986" name="__codelineno-0-1986"></a><span class="sd">                    [0]</span>
<a id="__codelineno-0-1987" name="__codelineno-0-1987"></a>
<a id="__codelineno-0-1988" name="__codelineno-0-1988"></a><span class="sd">            Offset and Scale together:</span>
<a id="__codelineno-0-1989" name="__codelineno-0-1989"></a><span class="sd">                - we can unscale and get rid of the offset at the same time.</span>
<a id="__codelineno-0-1990" name="__codelineno-0-1990"></a>
<a id="__codelineno-0-1991" name="__codelineno-0-1991"></a><span class="sd">                    &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,epsg=4326)</span>
<a id="__codelineno-0-1992" name="__codelineno-0-1992"></a>
<a id="__codelineno-0-1993" name="__codelineno-0-1993"></a><span class="sd">                - set the offset to 100, and a scale of 0.1.</span>
<a id="__codelineno-0-1994" name="__codelineno-0-1994"></a>
<a id="__codelineno-0-1995" name="__codelineno-0-1995"></a><span class="sd">                    &gt;&gt;&gt; dataset.offset = [100]</span>
<a id="__codelineno-0-1996" name="__codelineno-0-1996"></a><span class="sd">                    &gt;&gt;&gt; dataset.scale = [0.1]</span>
<a id="__codelineno-0-1997" name="__codelineno-0-1997"></a>
<a id="__codelineno-0-1998" name="__codelineno-0-1998"></a><span class="sd">                - check if the offset has been set.</span>
<a id="__codelineno-0-1999" name="__codelineno-0-1999"></a>
<a id="__codelineno-0-2000" name="__codelineno-0-2000"></a><span class="sd">                    &gt;&gt;&gt; print(dataset.offset)</span>
<a id="__codelineno-0-2001" name="__codelineno-0-2001"></a><span class="sd">                    [100.0]</span>
<a id="__codelineno-0-2002" name="__codelineno-0-2002"></a><span class="sd">                    &gt;&gt;&gt; print(dataset.scale)</span>
<a id="__codelineno-0-2003" name="__codelineno-0-2003"></a><span class="sd">                    [0.1]</span>
<a id="__codelineno-0-2004" name="__codelineno-0-2004"></a>
<a id="__codelineno-0-2005" name="__codelineno-0-2005"></a><span class="sd">                - now lets unscale the dataset values.</span>
<a id="__codelineno-0-2006" name="__codelineno-0-2006"></a>
<a id="__codelineno-0-2007" name="__codelineno-0-2007"></a><span class="sd">                    &gt;&gt;&gt; unscaled_dataset = dataset.translate(unscale=True)</span>
<a id="__codelineno-0-2008" name="__codelineno-0-2008"></a><span class="sd">                    &gt;&gt;&gt; print(unscaled_dataset.read_array()) # doctest: +SKIP</span>
<a id="__codelineno-0-2009" name="__codelineno-0-2009"></a><span class="sd">                    [[100.5 100.5 100.3 100.4 100.2]</span>
<a id="__codelineno-0-2010" name="__codelineno-0-2010"></a><span class="sd">                     [100.2 100.5 100.5 100.8 100.5]</span>
<a id="__codelineno-0-2011" name="__codelineno-0-2011"></a><span class="sd">                     [100.7 100.5 100.6 100.1 100.2]</span>
<a id="__codelineno-0-2012" name="__codelineno-0-2012"></a><span class="sd">                     [100.6 100.8 100.1 100.5 100.8]</span>
<a id="__codelineno-0-2013" name="__codelineno-0-2013"></a><span class="sd">                     [100.2 100.5 100.2 100.2 100.9]]</span>
<a id="__codelineno-0-2014" name="__codelineno-0-2014"></a>
<a id="__codelineno-0-2015" name="__codelineno-0-2015"></a><span class="sd">                - Now you can see that the values were multiplied first by the scale; then the offset value was added.</span>
<a id="__codelineno-0-2016" name="__codelineno-0-2016"></a><span class="sd">                    `value * scale + offset`</span>
<a id="__codelineno-0-2017" name="__codelineno-0-2017"></a>
<a id="__codelineno-0-2018" name="__codelineno-0-2018"></a><span class="sd">                    &gt;&gt;&gt; print(unscaled_dataset.offset)</span>
<a id="__codelineno-0-2019" name="__codelineno-0-2019"></a><span class="sd">                    [0]</span>
<a id="__codelineno-0-2020" name="__codelineno-0-2020"></a><span class="sd">                    &gt;&gt;&gt; print(unscaled_dataset.scale)</span>
<a id="__codelineno-0-2021" name="__codelineno-0-2021"></a><span class="sd">                    [1.0]</span>
<a id="__codelineno-0-2022" name="__codelineno-0-2022"></a>
<a id="__codelineno-0-2023" name="__codelineno-0-2023"></a><span class="sd">        Scale between two values:</span>
<a id="__codelineno-0-2024" name="__codelineno-0-2024"></a><span class="sd">            - you can scale the values of the dataset between two values, for example, you can scale the values between</span>
<a id="__codelineno-0-2025" name="__codelineno-0-2025"></a><span class="sd">                two values 0 and 1.</span>
<a id="__codelineno-0-2026" name="__codelineno-0-2026"></a>
<a id="__codelineno-0-2027" name="__codelineno-0-2027"></a><span class="sd">                &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,epsg=4326)</span>
<a id="__codelineno-0-2028" name="__codelineno-0-2028"></a><span class="sd">                &gt;&gt;&gt; print(dataset.stats()) # doctest: +SKIP</span>
<a id="__codelineno-0-2029" name="__codelineno-0-2029"></a><span class="sd">                        min  max  mean      std</span>
<a id="__codelineno-0-2030" name="__codelineno-0-2030"></a><span class="sd">                Band_1  1.0  9.0   4.0  2.19089</span>
<a id="__codelineno-0-2031" name="__codelineno-0-2031"></a><span class="sd">                &gt;&gt;&gt; scaled_dataset = dataset.translate(scaleParams=[[1, 9, 0, 255]], outputType=gdal.GDT_Byte)</span>
<a id="__codelineno-0-2032" name="__codelineno-0-2032"></a><span class="sd">                &gt;&gt;&gt; print(scaled_dataset.read_array()) # doctest: +SKIP</span>
<a id="__codelineno-0-2033" name="__codelineno-0-2033"></a><span class="sd">                [[128 128  64  96  32]</span>
<a id="__codelineno-0-2034" name="__codelineno-0-2034"></a><span class="sd">                 [ 32 128 128 223 128]</span>
<a id="__codelineno-0-2035" name="__codelineno-0-2035"></a><span class="sd">                 [191 128 159   0  32]</span>
<a id="__codelineno-0-2036" name="__codelineno-0-2036"></a><span class="sd">                 [159 223   0 128 223]</span>
<a id="__codelineno-0-2037" name="__codelineno-0-2037"></a><span class="sd">                 [ 32 128  32  32 255]]</span>
<a id="__codelineno-0-2038" name="__codelineno-0-2038"></a>
<a id="__codelineno-0-2039" name="__codelineno-0-2039"></a>
<a id="__codelineno-0-2040" name="__codelineno-0-2040"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2041" name="__codelineno-0-2041"></a>        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2042" name="__codelineno-0-2042"></a>            <span class="n">driver</span> <span class="o">=</span> <span class="s2">&quot;MEM&quot;</span>
<a id="__codelineno-0-2043" name="__codelineno-0-2043"></a>            <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<a id="__codelineno-0-2044" name="__codelineno-0-2044"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2045" name="__codelineno-0-2045"></a>            <span class="n">driver</span> <span class="o">=</span> <span class="s2">&quot;GTiff&quot;</span>
<a id="__codelineno-0-2046" name="__codelineno-0-2046"></a>
<a id="__codelineno-0-2047" name="__codelineno-0-2047"></a>        <span class="n">options</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">TranslateOptions</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">driver</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-2048" name="__codelineno-0-2048"></a>        <span class="n">dst</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Translate</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
<a id="__codelineno-0-2049" name="__codelineno-0-2049"></a>        <span class="k">return</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="n">access</span><span class="o">=</span><span class="s2">&quot;write&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2050" name="__codelineno-0-2050"></a>
<a id="__codelineno-0-2051" name="__codelineno-0-2051"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-0-2052" name="__codelineno-0-2052"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_process_color_table</span><span class="p">(</span><span class="n">color_table</span><span class="p">:</span> <span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-2053" name="__codelineno-0-2053"></a>        <span class="n">import_cleopatra</span><span class="p">(</span>
<a id="__codelineno-0-2054" name="__codelineno-0-2054"></a>            <span class="s2">&quot;The current function uses cleopatra package to for plotting, please install it manually, for more info&quot;</span>
<a id="__codelineno-0-2055" name="__codelineno-0-2055"></a>            <span class="s2">&quot; check https://github.com/Serapieum-of-alex/cleopatra&quot;</span>
<a id="__codelineno-0-2056" name="__codelineno-0-2056"></a>        <span class="p">)</span>
<a id="__codelineno-0-2057" name="__codelineno-0-2057"></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">cleopatra.colors</span><span class="w"> </span><span class="kn">import</span> <span class="n">Colors</span>
<a id="__codelineno-0-2058" name="__codelineno-0-2058"></a>
<a id="__codelineno-0-2059" name="__codelineno-0-2059"></a>        <span class="c1"># if the color_table does not contain the red, green, and blue columns, assume it has one column with</span>
<a id="__codelineno-0-2060" name="__codelineno-0-2060"></a>        <span class="c1"># the color as hex and then, convert the color to rgb.</span>
<a id="__codelineno-0-2061" name="__codelineno-0-2061"></a>        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">elem</span> <span class="ow">in</span> <span class="n">color_table</span><span class="o">.</span><span class="n">columns</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">]):</span>
<a id="__codelineno-0-2062" name="__codelineno-0-2062"></a>            <span class="n">color_df</span> <span class="o">=</span> <span class="n">color_table</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;values&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">]]</span>
<a id="__codelineno-0-2063" name="__codelineno-0-2063"></a>        <span class="k">elif</span> <span class="s2">&quot;color&quot;</span> <span class="ow">in</span> <span class="n">color_table</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
<a id="__codelineno-0-2064" name="__codelineno-0-2064"></a>            <span class="n">color</span> <span class="o">=</span> <span class="n">Colors</span><span class="p">(</span><span class="n">color_table</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
<a id="__codelineno-0-2065" name="__codelineno-0-2065"></a>            <span class="n">color_rgb</span> <span class="o">=</span> <span class="n">color</span><span class="o">.</span><span class="n">to_rgb</span><span class="p">(</span><span class="n">normalized</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-2066" name="__codelineno-0-2066"></a>            <span class="n">color_df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;values&quot;</span><span class="p">])</span>
<a id="__codelineno-0-2067" name="__codelineno-0-2067"></a>            <span class="n">color_df</span><span class="p">[</span><span class="s2">&quot;values&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">color_table</span><span class="p">[</span><span class="s2">&quot;values&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<a id="__codelineno-0-2068" name="__codelineno-0-2068"></a>            <span class="n">color_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">color_rgb</span>
<a id="__codelineno-0-2069" name="__codelineno-0-2069"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2070" name="__codelineno-0-2070"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-2071" name="__codelineno-0-2071"></a>                <span class="sa">f</span><span class="s2">&quot;color_table must contain either red, green, blue, or color columns. given columns are: &quot;</span>
<a id="__codelineno-0-2072" name="__codelineno-0-2072"></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">color_table</span><span class="o">.</span><span class="n">columns</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-2073" name="__codelineno-0-2073"></a>            <span class="p">)</span>
<a id="__codelineno-0-2074" name="__codelineno-0-2074"></a>
<a id="__codelineno-0-2075" name="__codelineno-0-2075"></a>        <span class="k">if</span> <span class="s2">&quot;alpha&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">color_table</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
<a id="__codelineno-0-2076" name="__codelineno-0-2076"></a>            <span class="n">color_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s2">&quot;alpha&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span>
<a id="__codelineno-0-2077" name="__codelineno-0-2077"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2078" name="__codelineno-0-2078"></a>            <span class="n">color_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s2">&quot;alpha&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">color_table</span><span class="p">[</span><span class="s2">&quot;alpha&quot;</span><span class="p">]</span>
<a id="__codelineno-0-2079" name="__codelineno-0-2079"></a>
<a id="__codelineno-0-2080" name="__codelineno-0-2080"></a>        <span class="k">return</span> <span class="n">color_df</span>
<a id="__codelineno-0-2081" name="__codelineno-0-2081"></a>
<a id="__codelineno-0-2082" name="__codelineno-0-2082"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-0-2083" name="__codelineno-0-2083"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_create_dataset</span><span class="p">(</span>
<a id="__codelineno-0-2084" name="__codelineno-0-2084"></a>        <span class="n">cols</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-2085" name="__codelineno-0-2085"></a>        <span class="n">rows</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-2086" name="__codelineno-0-2086"></a>        <span class="n">bands</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-2087" name="__codelineno-0-2087"></a>        <span class="n">dtype</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-2088" name="__codelineno-0-2088"></a>        <span class="n">driver</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;MEM&quot;</span><span class="p">,</span>
<a id="__codelineno-0-2089" name="__codelineno-0-2089"></a>        <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2090" name="__codelineno-0-2090"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Dataset</span><span class="p">:</span>
<a id="__codelineno-0-2091" name="__codelineno-0-2091"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a GDAL driver.</span>
<a id="__codelineno-0-2092" name="__codelineno-0-2092"></a>
<a id="__codelineno-0-2093" name="__codelineno-0-2093"></a><span class="sd">            creates a driver and save it to disk and in memory if the path is not given.</span>
<a id="__codelineno-0-2094" name="__codelineno-0-2094"></a>
<a id="__codelineno-0-2095" name="__codelineno-0-2095"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2096" name="__codelineno-0-2096"></a><span class="sd">            cols (int):</span>
<a id="__codelineno-0-2097" name="__codelineno-0-2097"></a><span class="sd">                Number of columns.</span>
<a id="__codelineno-0-2098" name="__codelineno-0-2098"></a><span class="sd">            rows (int):</span>
<a id="__codelineno-0-2099" name="__codelineno-0-2099"></a><span class="sd">                Number of rows.</span>
<a id="__codelineno-0-2100" name="__codelineno-0-2100"></a><span class="sd">            bands (int):</span>
<a id="__codelineno-0-2101" name="__codelineno-0-2101"></a><span class="sd">                Number of bands.</span>
<a id="__codelineno-0-2102" name="__codelineno-0-2102"></a><span class="sd">            dtype:</span>
<a id="__codelineno-0-2103" name="__codelineno-0-2103"></a><span class="sd">                GDAL data type; use functions in the utils module to map data types from numpy or ogr to gdal.</span>
<a id="__codelineno-0-2104" name="__codelineno-0-2104"></a><span class="sd">                gdal data type, the data type should be one of the following code:</span>
<a id="__codelineno-0-2105" name="__codelineno-0-2105"></a><span class="sd">                    ```python</span>
<a id="__codelineno-0-2106" name="__codelineno-0-2106"></a><span class="sd">                    [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], which refers to the following data types:.</span>
<a id="__codelineno-0-2107" name="__codelineno-0-2107"></a><span class="sd">                    GDT_Unknown	0	GDT_UInt32	4	GDT_CInt16	8	GDT_UInt64	12</span>
<a id="__codelineno-0-2108" name="__codelineno-0-2108"></a><span class="sd">                    GDT_Byte	1	GDT_Int32	5	GDT_CInt32	9	GDT_Int64	13</span>
<a id="__codelineno-0-2109" name="__codelineno-0-2109"></a><span class="sd">                    GDT_UInt16	2	GDT_Float32 6	GDT_CFloat32 10	GDT_Int8	14</span>
<a id="__codelineno-0-2110" name="__codelineno-0-2110"></a><span class="sd">                    GDT_Int16	3	GDT_Float64 7	GDT_CFloat64 11	GDT_TypeCount 15</span>
<a id="__codelineno-0-2111" name="__codelineno-0-2111"></a><span class="sd">                    ```</span>
<a id="__codelineno-0-2112" name="__codelineno-0-2112"></a><span class="sd">            driver (str):</span>
<a id="__codelineno-0-2113" name="__codelineno-0-2113"></a><span class="sd">                Driver type [&quot;GTiff&quot;, &quot;MEM&quot;].</span>
<a id="__codelineno-0-2114" name="__codelineno-0-2114"></a><span class="sd">            path (str):</span>
<a id="__codelineno-0-2115" name="__codelineno-0-2115"></a><span class="sd">                Path to save the GTiff driver.</span>
<a id="__codelineno-0-2116" name="__codelineno-0-2116"></a>
<a id="__codelineno-0-2117" name="__codelineno-0-2117"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-2118" name="__codelineno-0-2118"></a><span class="sd">            gdal driver</span>
<a id="__codelineno-0-2119" name="__codelineno-0-2119"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2120" name="__codelineno-0-2120"></a>        <span class="k">if</span> <span class="n">path</span><span class="p">:</span>
<a id="__codelineno-0-2121" name="__codelineno-0-2121"></a>            <span class="n">driver</span> <span class="o">=</span> <span class="s2">&quot;GTiff&quot;</span> <span class="k">if</span> <span class="n">driver</span> <span class="o">==</span> <span class="s2">&quot;MEM&quot;</span> <span class="k">else</span> <span class="n">driver</span>
<a id="__codelineno-0-2122" name="__codelineno-0-2122"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-2123" name="__codelineno-0-2123"></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The path input should be string&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2124" name="__codelineno-0-2124"></a>            <span class="k">if</span> <span class="n">driver</span> <span class="o">==</span> <span class="s2">&quot;GTiff&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2125" name="__codelineno-0-2125"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.tif&quot;</span><span class="p">):</span>
<a id="__codelineno-0-2126" name="__codelineno-0-2126"></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-2127" name="__codelineno-0-2127"></a>                        <span class="s2">&quot;The path to save the created raster should end with .tif&quot;</span>
<a id="__codelineno-0-2128" name="__codelineno-0-2128"></a>                    <span class="p">)</span>
<a id="__codelineno-0-2129" name="__codelineno-0-2129"></a>            <span class="c1"># LZW is a lossless compression method achieve the highest compression but with a lot of computations.</span>
<a id="__codelineno-0-2130" name="__codelineno-0-2130"></a>            <span class="n">src</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span>
<a id="__codelineno-0-2131" name="__codelineno-0-2131"></a>                <span class="n">path</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">rows</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;COMPRESS=LZW&quot;</span><span class="p">]</span>
<a id="__codelineno-0-2132" name="__codelineno-0-2132"></a>            <span class="p">)</span>
<a id="__codelineno-0-2133" name="__codelineno-0-2133"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2134" name="__codelineno-0-2134"></a>            <span class="c1"># for memory drivers</span>
<a id="__codelineno-0-2135" name="__codelineno-0-2135"></a>            <span class="n">driver</span> <span class="o">=</span> <span class="s2">&quot;MEM&quot;</span>
<a id="__codelineno-0-2136" name="__codelineno-0-2136"></a>            <span class="n">src</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">rows</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">dtype</span><span class="p">)</span>
<a id="__codelineno-0-2137" name="__codelineno-0-2137"></a>        <span class="k">return</span> <span class="n">src</span>
<a id="__codelineno-0-2138" name="__codelineno-0-2138"></a>
<a id="__codelineno-0-2139" name="__codelineno-0-2139"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-2140" name="__codelineno-0-2140"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span>
<a id="__codelineno-0-2141" name="__codelineno-0-2141"></a>        <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-0-2142" name="__codelineno-0-2142"></a>        <span class="n">cell_size</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
<a id="__codelineno-0-2143" name="__codelineno-0-2143"></a>        <span class="n">rows</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-2144" name="__codelineno-0-2144"></a>        <span class="n">columns</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-2145" name="__codelineno-0-2145"></a>        <span class="n">dtype</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-2146" name="__codelineno-0-2146"></a>        <span class="n">bands</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-2147" name="__codelineno-0-2147"></a>        <span class="n">top_left_corner</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">,</span>
<a id="__codelineno-0-2148" name="__codelineno-0-2148"></a>        <span class="n">epsg</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-2149" name="__codelineno-0-2149"></a>        <span class="n">no_data_value</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2150" name="__codelineno-0-2150"></a>        <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2151" name="__codelineno-0-2151"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2152" name="__codelineno-0-2152"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new dataset and fill it with the no_data_value.</span>
<a id="__codelineno-0-2153" name="__codelineno-0-2153"></a>
<a id="__codelineno-0-2154" name="__codelineno-0-2154"></a><span class="sd">        The new dataset will have an array filled with the no_data_value.</span>
<a id="__codelineno-0-2155" name="__codelineno-0-2155"></a>
<a id="__codelineno-0-2156" name="__codelineno-0-2156"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2157" name="__codelineno-0-2157"></a><span class="sd">            cell_size (int|float):</span>
<a id="__codelineno-0-2158" name="__codelineno-0-2158"></a><span class="sd">                Cell size.</span>
<a id="__codelineno-0-2159" name="__codelineno-0-2159"></a><span class="sd">            rows (int):</span>
<a id="__codelineno-0-2160" name="__codelineno-0-2160"></a><span class="sd">                Number of rows.</span>
<a id="__codelineno-0-2161" name="__codelineno-0-2161"></a><span class="sd">            columns (int):</span>
<a id="__codelineno-0-2162" name="__codelineno-0-2162"></a><span class="sd">                Number of columns.</span>
<a id="__codelineno-0-2163" name="__codelineno-0-2163"></a><span class="sd">            dtype (str):</span>
<a id="__codelineno-0-2164" name="__codelineno-0-2164"></a><span class="sd">                Data type. One of: None, &quot;byte&quot;, &quot;uint16&quot;, &quot;int16&quot;, &quot;uint32&quot;, &quot;int32&quot;, &quot;float32&quot;, &quot;float64&quot;,</span>
<a id="__codelineno-0-2165" name="__codelineno-0-2165"></a><span class="sd">                &quot;complex-int16&quot;, &quot;complex-int32&quot;, &quot;complex-float32&quot;, &quot;complex-float64&quot;, &quot;uint64&quot;, &quot;int64&quot;, &quot;int8&quot;,</span>
<a id="__codelineno-0-2166" name="__codelineno-0-2166"></a><span class="sd">                &quot;count&quot;.</span>
<a id="__codelineno-0-2167" name="__codelineno-0-2167"></a><span class="sd">            bands (int|None):</span>
<a id="__codelineno-0-2168" name="__codelineno-0-2168"></a><span class="sd">                Number of bands to create in the output raster.</span>
<a id="__codelineno-0-2169" name="__codelineno-0-2169"></a><span class="sd">            top_left_corner (Tuple):</span>
<a id="__codelineno-0-2170" name="__codelineno-0-2170"></a><span class="sd">                Coordinates of the top left corner point.</span>
<a id="__codelineno-0-2171" name="__codelineno-0-2171"></a><span class="sd">            epsg (int):</span>
<a id="__codelineno-0-2172" name="__codelineno-0-2172"></a><span class="sd">                EPSG number to identify the projection of the coordinates in the created raster.</span>
<a id="__codelineno-0-2173" name="__codelineno-0-2173"></a><span class="sd">            no_data_value (float|None):</span>
<a id="__codelineno-0-2174" name="__codelineno-0-2174"></a><span class="sd">                No data value.</span>
<a id="__codelineno-0-2175" name="__codelineno-0-2175"></a><span class="sd">            path (str, optional):</span>
<a id="__codelineno-0-2176" name="__codelineno-0-2176"></a><span class="sd">                Path on disk; if None, the dataset is created in memory. Default is None.</span>
<a id="__codelineno-0-2177" name="__codelineno-0-2177"></a>
<a id="__codelineno-0-2178" name="__codelineno-0-2178"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-2179" name="__codelineno-0-2179"></a><span class="sd">            Dataset: A new dataset</span>
<a id="__codelineno-0-2180" name="__codelineno-0-2180"></a>
<a id="__codelineno-0-2181" name="__codelineno-0-2181"></a><span class="sd">        Hint:</span>
<a id="__codelineno-0-2182" name="__codelineno-0-2182"></a><span class="sd">            - The no_data_value will be filled in the array of the output dataset.</span>
<a id="__codelineno-0-2183" name="__codelineno-0-2183"></a><span class="sd">            - The coordinates of the top left corner point should be in the same projection as the epsg.</span>
<a id="__codelineno-0-2184" name="__codelineno-0-2184"></a><span class="sd">            - The cell size should be in the same unit as the coordinates.</span>
<a id="__codelineno-0-2185" name="__codelineno-0-2185"></a><span class="sd">            - The number of rows and columns should be positive integers.</span>
<a id="__codelineno-0-2186" name="__codelineno-0-2186"></a>
<a id="__codelineno-0-2187" name="__codelineno-0-2187"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-2188" name="__codelineno-0-2188"></a><span class="sd">            - To create a dataset using the `create` method you need to provide all the information needed to locate the</span>
<a id="__codelineno-0-2189" name="__codelineno-0-2189"></a><span class="sd">             dataset in space `top_left_corner` and `epsg`, then the information needed to specify the data to be stored</span>
<a id="__codelineno-0-2190" name="__codelineno-0-2190"></a><span class="sd">             in the dataset like `dtype`, `rows`, `columns`, `cell_size`, `bands` and `no_data_value`.</span>
<a id="__codelineno-0-2191" name="__codelineno-0-2191"></a>
<a id="__codelineno-0-2192" name="__codelineno-0-2192"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-2193" name="__codelineno-0-2193"></a><span class="sd">              &gt;&gt;&gt; cell_size = 10</span>
<a id="__codelineno-0-2194" name="__codelineno-0-2194"></a><span class="sd">              &gt;&gt;&gt; rows = 5</span>
<a id="__codelineno-0-2195" name="__codelineno-0-2195"></a><span class="sd">              &gt;&gt;&gt; columns = 5</span>
<a id="__codelineno-0-2196" name="__codelineno-0-2196"></a><span class="sd">              &gt;&gt;&gt; dtype = &quot;float32&quot;</span>
<a id="__codelineno-0-2197" name="__codelineno-0-2197"></a><span class="sd">              &gt;&gt;&gt; bands = 1</span>
<a id="__codelineno-0-2198" name="__codelineno-0-2198"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-2199" name="__codelineno-0-2199"></a><span class="sd">              &gt;&gt;&gt; epsg = 32618</span>
<a id="__codelineno-0-2200" name="__codelineno-0-2200"></a><span class="sd">              &gt;&gt;&gt; no_data_value = -9999</span>
<a id="__codelineno-0-2201" name="__codelineno-0-2201"></a><span class="sd">              &gt;&gt;&gt; path = &quot;create-new-dataset.tif&quot;</span>
<a id="__codelineno-0-2202" name="__codelineno-0-2202"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create(cell_size, rows, columns, dtype, bands, top_left_corner, epsg, no_data_value, path)</span>
<a id="__codelineno-0-2203" name="__codelineno-0-2203"></a><span class="sd">              &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-2204" name="__codelineno-0-2204"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2205" name="__codelineno-0-2205"></a><span class="sd">                          Cell size: 10.0</span>
<a id="__codelineno-0-2206" name="__codelineno-0-2206"></a><span class="sd">                          Dimension: 5 * 5</span>
<a id="__codelineno-0-2207" name="__codelineno-0-2207"></a><span class="sd">                          EPSG: 32618</span>
<a id="__codelineno-0-2208" name="__codelineno-0-2208"></a><span class="sd">                          Number of Bands: 1</span>
<a id="__codelineno-0-2209" name="__codelineno-0-2209"></a><span class="sd">                          Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-2210" name="__codelineno-0-2210"></a><span class="sd">                          Mask: -9999.0</span>
<a id="__codelineno-0-2211" name="__codelineno-0-2211"></a><span class="sd">                          Data type: float32</span>
<a id="__codelineno-0-2212" name="__codelineno-0-2212"></a><span class="sd">                          File: create-new-dataset.tif</span>
<a id="__codelineno-0-2213" name="__codelineno-0-2213"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2214" name="__codelineno-0-2214"></a>
<a id="__codelineno-0-2215" name="__codelineno-0-2215"></a><span class="sd">              ```</span>
<a id="__codelineno-0-2216" name="__codelineno-0-2216"></a>
<a id="__codelineno-0-2217" name="__codelineno-0-2217"></a><span class="sd">            - If you check the value stored in the band using the `read_array` method, you will find that the band is</span>
<a id="__codelineno-0-2218" name="__codelineno-0-2218"></a><span class="sd">                full of the `no_data_value` value which we used here as -9999.</span>
<a id="__codelineno-0-2219" name="__codelineno-0-2219"></a>
<a id="__codelineno-0-2220" name="__codelineno-0-2220"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-2221" name="__codelineno-0-2221"></a><span class="sd">              &gt;&gt;&gt; print(dataset.read_array(band=0))</span>
<a id="__codelineno-0-2222" name="__codelineno-0-2222"></a><span class="sd">              [[-9999. -9999. -9999. -9999. -9999.]</span>
<a id="__codelineno-0-2223" name="__codelineno-0-2223"></a><span class="sd">               [-9999. -9999. -9999. -9999. -9999.]</span>
<a id="__codelineno-0-2224" name="__codelineno-0-2224"></a><span class="sd">               [-9999. -9999. -9999. -9999. -9999.]</span>
<a id="__codelineno-0-2225" name="__codelineno-0-2225"></a><span class="sd">               [-9999. -9999. -9999. -9999. -9999.]</span>
<a id="__codelineno-0-2226" name="__codelineno-0-2226"></a><span class="sd">               [-9999. -9999. -9999. -9999. -9999.]]</span>
<a id="__codelineno-0-2227" name="__codelineno-0-2227"></a>
<a id="__codelineno-0-2228" name="__codelineno-0-2228"></a><span class="sd">              ```</span>
<a id="__codelineno-0-2229" name="__codelineno-0-2229"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2230" name="__codelineno-0-2230"></a>        <span class="c1"># Create the driver.</span>
<a id="__codelineno-0-2231" name="__codelineno-0-2231"></a>        <span class="n">dtype</span> <span class="o">=</span> <span class="n">numpy_to_gdal_dtype</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span>
<a id="__codelineno-0-2232" name="__codelineno-0-2232"></a>        <span class="n">dst</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_create_dataset</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="n">rows</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-2233" name="__codelineno-0-2233"></a>        <span class="n">sr</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_create_sr_from_epsg</span><span class="p">(</span><span class="n">epsg</span><span class="p">)</span>
<a id="__codelineno-0-2234" name="__codelineno-0-2234"></a>        <span class="n">geotransform</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-2235" name="__codelineno-0-2235"></a>            <span class="n">top_left_corner</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-0-2236" name="__codelineno-0-2236"></a>            <span class="n">cell_size</span><span class="p">,</span>
<a id="__codelineno-0-2237" name="__codelineno-0-2237"></a>            <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-2238" name="__codelineno-0-2238"></a>            <span class="n">top_left_corner</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<a id="__codelineno-0-2239" name="__codelineno-0-2239"></a>            <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-2240" name="__codelineno-0-2240"></a>            <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">cell_size</span><span class="p">,</span>
<a id="__codelineno-0-2241" name="__codelineno-0-2241"></a>        <span class="p">)</span>
<a id="__codelineno-0-2242" name="__codelineno-0-2242"></a>        <span class="n">dst</span><span class="o">.</span><span class="n">SetGeoTransform</span><span class="p">(</span><span class="n">geotransform</span><span class="p">)</span>
<a id="__codelineno-0-2243" name="__codelineno-0-2243"></a>        <span class="c1"># Set the projection.</span>
<a id="__codelineno-0-2244" name="__codelineno-0-2244"></a>        <span class="n">dst</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">sr</span><span class="o">.</span><span class="n">ExportToWkt</span><span class="p">())</span>
<a id="__codelineno-0-2245" name="__codelineno-0-2245"></a>
<a id="__codelineno-0-2246" name="__codelineno-0-2246"></a>        <span class="n">dst</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="n">access</span><span class="o">=</span><span class="s2">&quot;write&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2247" name="__codelineno-0-2247"></a>        <span class="k">if</span> <span class="n">no_data_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2248" name="__codelineno-0-2248"></a>            <span class="n">dst</span><span class="o">.</span><span class="n">_set_no_data_value</span><span class="p">(</span><span class="n">no_data_value</span><span class="o">=</span><span class="n">no_data_value</span><span class="p">)</span>
<a id="__codelineno-0-2249" name="__codelineno-0-2249"></a>
<a id="__codelineno-0-2250" name="__codelineno-0-2250"></a>        <span class="k">return</span> <span class="n">dst</span>
<a id="__codelineno-0-2251" name="__codelineno-0-2251"></a>
<a id="__codelineno-0-2252" name="__codelineno-0-2252"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-2253" name="__codelineno-0-2253"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_from_array</span><span class="p">(</span>
<a id="__codelineno-0-2254" name="__codelineno-0-2254"></a>        <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-0-2255" name="__codelineno-0-2255"></a>        <span class="n">arr</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<a id="__codelineno-0-2256" name="__codelineno-0-2256"></a>        <span class="n">top_left_corner</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2257" name="__codelineno-0-2257"></a>        <span class="n">cell_size</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2258" name="__codelineno-0-2258"></a>        <span class="n">geo</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2259" name="__codelineno-0-2259"></a>        <span class="n">epsg</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4326</span><span class="p">,</span>
<a id="__codelineno-0-2260" name="__codelineno-0-2260"></a>        <span class="n">no_data_value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_NO_DATA_VALUE</span><span class="p">,</span>
<a id="__codelineno-0-2261" name="__codelineno-0-2261"></a>        <span class="n">driver_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;MEM&quot;</span><span class="p">,</span>
<a id="__codelineno-0-2262" name="__codelineno-0-2262"></a>        <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2263" name="__codelineno-0-2263"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2264" name="__codelineno-0-2264"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new dataset from an array.</span>
<a id="__codelineno-0-2265" name="__codelineno-0-2265"></a>
<a id="__codelineno-0-2266" name="__codelineno-0-2266"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2267" name="__codelineno-0-2267"></a><span class="sd">            arr (np.ndarray):</span>
<a id="__codelineno-0-2268" name="__codelineno-0-2268"></a><span class="sd">                Numpy array.</span>
<a id="__codelineno-0-2269" name="__codelineno-0-2269"></a><span class="sd">            top_left_corner (Tuple[float, float], optional):</span>
<a id="__codelineno-0-2270" name="__codelineno-0-2270"></a><span class="sd">                The coordinates of the top left corner of the dataset.</span>
<a id="__codelineno-0-2271" name="__codelineno-0-2271"></a><span class="sd">            cell_size (int|float, optional):</span>
<a id="__codelineno-0-2272" name="__codelineno-0-2272"></a><span class="sd">                Cell size in the same units of the coordinate reference system defined by the `epsg` parameter.</span>
<a id="__codelineno-0-2273" name="__codelineno-0-2273"></a><span class="sd">            geo (Tuple[float, float, float, float, float, float], optional):</span>
<a id="__codelineno-0-2274" name="__codelineno-0-2274"></a><span class="sd">                Geotransform tuple (minimum lon/x, pixel-size, rotation, maximum lat/y, rotation, pixel-size).</span>
<a id="__codelineno-0-2275" name="__codelineno-0-2275"></a><span class="sd">            epsg (int):</span>
<a id="__codelineno-0-2276" name="__codelineno-0-2276"></a><span class="sd">                Integer reference number to the projection (https://epsg.io/).</span>
<a id="__codelineno-0-2277" name="__codelineno-0-2277"></a><span class="sd">            no_data_value (Any, optional):</span>
<a id="__codelineno-0-2278" name="__codelineno-0-2278"></a><span class="sd">                No data value to mask the cells out of the domain. The default is -9999.</span>
<a id="__codelineno-0-2279" name="__codelineno-0-2279"></a><span class="sd">            driver_type (str, optional):</span>
<a id="__codelineno-0-2280" name="__codelineno-0-2280"></a><span class="sd">                Driver type [&quot;GTiff&quot;, &quot;MEM&quot;, &quot;netcdf&quot;]. Default is &quot;MEM&quot;.</span>
<a id="__codelineno-0-2281" name="__codelineno-0-2281"></a><span class="sd">            path (str, optional):</span>
<a id="__codelineno-0-2282" name="__codelineno-0-2282"></a><span class="sd">                Path to save the driver.</span>
<a id="__codelineno-0-2283" name="__codelineno-0-2283"></a>
<a id="__codelineno-0-2284" name="__codelineno-0-2284"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-2285" name="__codelineno-0-2285"></a><span class="sd">            Dataset:</span>
<a id="__codelineno-0-2286" name="__codelineno-0-2286"></a><span class="sd">                Dataset object will be returned.</span>
<a id="__codelineno-0-2287" name="__codelineno-0-2287"></a>
<a id="__codelineno-0-2288" name="__codelineno-0-2288"></a><span class="sd">        Hint:</span>
<a id="__codelineno-0-2289" name="__codelineno-0-2289"></a><span class="sd">            - The `geo` parameter can replace both the `cell_size` and the `top_left_corner` parameters.</span>
<a id="__codelineno-0-2290" name="__codelineno-0-2290"></a><span class="sd">            - The function checks first if the `geo` parameter is defined; it will ignore the `cell_size` and the `top_left_corner` parameters if given.</span>
<a id="__codelineno-0-2291" name="__codelineno-0-2291"></a>
<a id="__codelineno-0-2292" name="__codelineno-0-2292"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-2293" name="__codelineno-0-2293"></a><span class="sd">            - Create dataset using the `cell_size` and `top_left_corner` parameters.</span>
<a id="__codelineno-0-2294" name="__codelineno-0-2294"></a>
<a id="__codelineno-0-2295" name="__codelineno-0-2295"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-2296" name="__codelineno-0-2296"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-2297" name="__codelineno-0-2297"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(4, 10, 10)</span>
<a id="__codelineno-0-2298" name="__codelineno-0-2298"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-2299" name="__codelineno-0-2299"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-2300" name="__codelineno-0-2300"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,epsg=4326)</span>
<a id="__codelineno-0-2301" name="__codelineno-0-2301"></a><span class="sd">              &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-2302" name="__codelineno-0-2302"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2303" name="__codelineno-0-2303"></a><span class="sd">                          Cell size: 0.05</span>
<a id="__codelineno-0-2304" name="__codelineno-0-2304"></a><span class="sd">                          Dimension: 10 * 10</span>
<a id="__codelineno-0-2305" name="__codelineno-0-2305"></a><span class="sd">                          EPSG: 4326</span>
<a id="__codelineno-0-2306" name="__codelineno-0-2306"></a><span class="sd">                          Number of Bands: 4</span>
<a id="__codelineno-0-2307" name="__codelineno-0-2307"></a><span class="sd">                          Band names: [&#39;Band_1&#39;, &#39;Band_2&#39;, &#39;Band_3&#39;, &#39;Band_4&#39;]</span>
<a id="__codelineno-0-2308" name="__codelineno-0-2308"></a><span class="sd">                          Mask: -9999.0</span>
<a id="__codelineno-0-2309" name="__codelineno-0-2309"></a><span class="sd">                          Data type: float64</span>
<a id="__codelineno-0-2310" name="__codelineno-0-2310"></a><span class="sd">                          File: ...</span>
<a id="__codelineno-0-2311" name="__codelineno-0-2311"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2312" name="__codelineno-0-2312"></a>
<a id="__codelineno-0-2313" name="__codelineno-0-2313"></a><span class="sd">              ```</span>
<a id="__codelineno-0-2314" name="__codelineno-0-2314"></a>
<a id="__codelineno-0-2315" name="__codelineno-0-2315"></a><span class="sd">            - Create dataset using the `geo` parameter.</span>
<a id="__codelineno-0-2316" name="__codelineno-0-2316"></a>
<a id="__codelineno-0-2317" name="__codelineno-0-2317"></a><span class="sd">              - To create the same dataset using the `geotransform` parameter, we will use the dataset `top_left_corner`</span>
<a id="__codelineno-0-2318" name="__codelineno-0-2318"></a><span class="sd">                coordinates and the `cell_size` to create it.</span>
<a id="__codelineno-0-2319" name="__codelineno-0-2319"></a>
<a id="__codelineno-0-2320" name="__codelineno-0-2320"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-2321" name="__codelineno-0-2321"></a><span class="sd">              &gt;&gt;&gt; geotransform = (0, 0.05, 0, 0, 0, -0.05)</span>
<a id="__codelineno-0-2322" name="__codelineno-0-2322"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, geo=geotransform, epsg=4326)</span>
<a id="__codelineno-0-2323" name="__codelineno-0-2323"></a><span class="sd">              &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-2324" name="__codelineno-0-2324"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2325" name="__codelineno-0-2325"></a><span class="sd">                          Cell size: 0.05</span>
<a id="__codelineno-0-2326" name="__codelineno-0-2326"></a><span class="sd">                          Dimension: 10 * 10</span>
<a id="__codelineno-0-2327" name="__codelineno-0-2327"></a><span class="sd">                          EPSG: 4326</span>
<a id="__codelineno-0-2328" name="__codelineno-0-2328"></a><span class="sd">                          Number of Bands: 4</span>
<a id="__codelineno-0-2329" name="__codelineno-0-2329"></a><span class="sd">                          Band names: [&#39;Band_1&#39;, &#39;Band_2&#39;, &#39;Band_3&#39;, &#39;Band_4&#39;]</span>
<a id="__codelineno-0-2330" name="__codelineno-0-2330"></a><span class="sd">                          Mask: -9999.0</span>
<a id="__codelineno-0-2331" name="__codelineno-0-2331"></a><span class="sd">                          Data type: float64</span>
<a id="__codelineno-0-2332" name="__codelineno-0-2332"></a><span class="sd">                          File: ...</span>
<a id="__codelineno-0-2333" name="__codelineno-0-2333"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2334" name="__codelineno-0-2334"></a>
<a id="__codelineno-0-2335" name="__codelineno-0-2335"></a><span class="sd">              ```</span>
<a id="__codelineno-0-2336" name="__codelineno-0-2336"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2337" name="__codelineno-0-2337"></a>        <span class="k">if</span> <span class="n">geo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2338" name="__codelineno-0-2338"></a>            <span class="k">if</span> <span class="n">top_left_corner</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">cell_size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2339" name="__codelineno-0-2339"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-2340" name="__codelineno-0-2340"></a>                    <span class="s2">&quot;Either top_left_corner and cell_size or geo should be provided.&quot;</span>
<a id="__codelineno-0-2341" name="__codelineno-0-2341"></a>                <span class="p">)</span>
<a id="__codelineno-0-2342" name="__codelineno-0-2342"></a>            <span class="n">geo</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-2343" name="__codelineno-0-2343"></a>                <span class="n">top_left_corner</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-0-2344" name="__codelineno-0-2344"></a>                <span class="n">cell_size</span><span class="p">,</span>
<a id="__codelineno-0-2345" name="__codelineno-0-2345"></a>                <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-2346" name="__codelineno-0-2346"></a>                <span class="n">top_left_corner</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<a id="__codelineno-0-2347" name="__codelineno-0-2347"></a>                <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-2348" name="__codelineno-0-2348"></a>                <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">cell_size</span><span class="p">,</span>
<a id="__codelineno-0-2349" name="__codelineno-0-2349"></a>            <span class="p">)</span>
<a id="__codelineno-0-2350" name="__codelineno-0-2350"></a>
<a id="__codelineno-0-2351" name="__codelineno-0-2351"></a>        <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-2352" name="__codelineno-0-2352"></a>            <span class="n">bands</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-2353" name="__codelineno-0-2353"></a>            <span class="n">rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-2354" name="__codelineno-0-2354"></a>            <span class="n">cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-2355" name="__codelineno-0-2355"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2356" name="__codelineno-0-2356"></a>            <span class="n">bands</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-2357" name="__codelineno-0-2357"></a>            <span class="n">rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-2358" name="__codelineno-0-2358"></a>            <span class="n">cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<a id="__codelineno-0-2359" name="__codelineno-0-2359"></a>
<a id="__codelineno-0-2360" name="__codelineno-0-2360"></a>        <span class="n">dst_obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_create_gtiff_from_array</span><span class="p">(</span>
<a id="__codelineno-0-2361" name="__codelineno-0-2361"></a>            <span class="n">arr</span><span class="p">,</span>
<a id="__codelineno-0-2362" name="__codelineno-0-2362"></a>            <span class="n">cols</span><span class="p">,</span>
<a id="__codelineno-0-2363" name="__codelineno-0-2363"></a>            <span class="n">rows</span><span class="p">,</span>
<a id="__codelineno-0-2364" name="__codelineno-0-2364"></a>            <span class="n">bands</span><span class="p">,</span>
<a id="__codelineno-0-2365" name="__codelineno-0-2365"></a>            <span class="n">geo</span><span class="p">,</span>
<a id="__codelineno-0-2366" name="__codelineno-0-2366"></a>            <span class="n">epsg</span><span class="p">,</span>
<a id="__codelineno-0-2367" name="__codelineno-0-2367"></a>            <span class="n">no_data_value</span><span class="p">,</span>
<a id="__codelineno-0-2368" name="__codelineno-0-2368"></a>            <span class="n">driver_type</span><span class="o">=</span><span class="n">driver_type</span><span class="p">,</span>
<a id="__codelineno-0-2369" name="__codelineno-0-2369"></a>            <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>
<a id="__codelineno-0-2370" name="__codelineno-0-2370"></a>        <span class="p">)</span>
<a id="__codelineno-0-2371" name="__codelineno-0-2371"></a>
<a id="__codelineno-0-2372" name="__codelineno-0-2372"></a>        <span class="k">return</span> <span class="n">dst_obj</span>
<a id="__codelineno-0-2373" name="__codelineno-0-2373"></a>
<a id="__codelineno-0-2374" name="__codelineno-0-2374"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-0-2375" name="__codelineno-0-2375"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_create_gtiff_from_array</span><span class="p">(</span>
<a id="__codelineno-0-2376" name="__codelineno-0-2376"></a>        <span class="n">arr</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<a id="__codelineno-0-2377" name="__codelineno-0-2377"></a>        <span class="n">cols</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-2378" name="__codelineno-0-2378"></a>        <span class="n">rows</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-2379" name="__codelineno-0-2379"></a>        <span class="n">bands</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2380" name="__codelineno-0-2380"></a>        <span class="n">geo</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2381" name="__codelineno-0-2381"></a>        <span class="n">epsg</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2382" name="__codelineno-0-2382"></a>        <span class="n">no_data_value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_NO_DATA_VALUE</span><span class="p">,</span>
<a id="__codelineno-0-2383" name="__codelineno-0-2383"></a>        <span class="n">driver_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;MEM&quot;</span><span class="p">,</span>
<a id="__codelineno-0-2384" name="__codelineno-0-2384"></a>        <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2385" name="__codelineno-0-2385"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2386" name="__codelineno-0-2386"></a>        <span class="n">dtype</span> <span class="o">=</span> <span class="n">numpy_to_gdal_dtype</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<a id="__codelineno-0-2387" name="__codelineno-0-2387"></a>        <span class="n">dst_ds</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_create_dataset</span><span class="p">(</span>
<a id="__codelineno-0-2388" name="__codelineno-0-2388"></a>            <span class="n">cols</span><span class="p">,</span> <span class="n">rows</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="n">driver_type</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span>
<a id="__codelineno-0-2389" name="__codelineno-0-2389"></a>        <span class="p">)</span>
<a id="__codelineno-0-2390" name="__codelineno-0-2390"></a>
<a id="__codelineno-0-2391" name="__codelineno-0-2391"></a>        <span class="n">srse</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_create_sr_from_epsg</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="n">epsg</span><span class="p">)</span>
<a id="__codelineno-0-2392" name="__codelineno-0-2392"></a>        <span class="n">dst_ds</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">srse</span><span class="o">.</span><span class="n">ExportToWkt</span><span class="p">())</span>
<a id="__codelineno-0-2393" name="__codelineno-0-2393"></a>        <span class="n">dst_ds</span><span class="o">.</span><span class="n">SetGeoTransform</span><span class="p">(</span><span class="n">geo</span><span class="p">)</span>
<a id="__codelineno-0-2394" name="__codelineno-0-2394"></a>
<a id="__codelineno-0-2395" name="__codelineno-0-2395"></a>        <span class="n">dst_obj</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">dst_ds</span><span class="p">,</span> <span class="n">access</span><span class="o">=</span><span class="s2">&quot;write&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2396" name="__codelineno-0-2396"></a>        <span class="n">dst_obj</span><span class="o">.</span><span class="n">_set_no_data_value</span><span class="p">(</span><span class="n">no_data_value</span><span class="o">=</span><span class="n">no_data_value</span><span class="p">)</span>
<a id="__codelineno-0-2397" name="__codelineno-0-2397"></a>
<a id="__codelineno-0-2398" name="__codelineno-0-2398"></a>        <span class="k">if</span> <span class="n">bands</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-2399" name="__codelineno-0-2399"></a>            <span class="n">dst_obj</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<a id="__codelineno-0-2400" name="__codelineno-0-2400"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2401" name="__codelineno-0-2401"></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">bands</span><span class="p">):</span>
<a id="__codelineno-0-2402" name="__codelineno-0-2402"></a>                <span class="n">dst_obj</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:])</span>
<a id="__codelineno-0-2403" name="__codelineno-0-2403"></a>
<a id="__codelineno-0-2404" name="__codelineno-0-2404"></a>        <span class="c1"># flush data to disk</span>
<a id="__codelineno-0-2405" name="__codelineno-0-2405"></a>        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2406" name="__codelineno-0-2406"></a>            <span class="n">dst_obj</span><span class="o">.</span><span class="n">_raster</span><span class="o">.</span><span class="n">FlushCache</span><span class="p">()</span>
<a id="__codelineno-0-2407" name="__codelineno-0-2407"></a>        <span class="k">return</span> <span class="n">dst_obj</span>
<a id="__codelineno-0-2408" name="__codelineno-0-2408"></a>
<a id="__codelineno-0-2409" name="__codelineno-0-2409"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-2410" name="__codelineno-0-2410"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">dataset_like</span><span class="p">(</span>
<a id="__codelineno-0-2411" name="__codelineno-0-2411"></a>        <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-0-2412" name="__codelineno-0-2412"></a>        <span class="n">src</span><span class="p">:</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">,</span>
<a id="__codelineno-0-2413" name="__codelineno-0-2413"></a>        <span class="n">array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<a id="__codelineno-0-2414" name="__codelineno-0-2414"></a>        <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2415" name="__codelineno-0-2415"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2416" name="__codelineno-0-2416"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new dataset like another dataset.</span>
<a id="__codelineno-0-2417" name="__codelineno-0-2417"></a>
<a id="__codelineno-0-2418" name="__codelineno-0-2418"></a><span class="sd">        dataset_like method creates a Dataset from an array like another source dataset. The new dataset</span>
<a id="__codelineno-0-2419" name="__codelineno-0-2419"></a><span class="sd">        will have the same `projection`, `coordinates` or the `top left corner` of the original dataset,</span>
<a id="__codelineno-0-2420" name="__codelineno-0-2420"></a><span class="sd">        `cell size`, `no_data_velue`, and number of `rows` and `columns`.</span>
<a id="__codelineno-0-2421" name="__codelineno-0-2421"></a><span class="sd">        the array and the source dataset should have the same number of columns and rows</span>
<a id="__codelineno-0-2422" name="__codelineno-0-2422"></a>
<a id="__codelineno-0-2423" name="__codelineno-0-2423"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2424" name="__codelineno-0-2424"></a><span class="sd">            src (Dataset):</span>
<a id="__codelineno-0-2425" name="__codelineno-0-2425"></a><span class="sd">                source raster to get the spatial information</span>
<a id="__codelineno-0-2426" name="__codelineno-0-2426"></a><span class="sd">            array (ndarray):</span>
<a id="__codelineno-0-2427" name="__codelineno-0-2427"></a><span class="sd">                data to store in the new dataset.</span>
<a id="__codelineno-0-2428" name="__codelineno-0-2428"></a><span class="sd">            path (str, optional):</span>
<a id="__codelineno-0-2429" name="__codelineno-0-2429"></a><span class="sd">                path to save the new dataset, if not given, the method will return in-memory dataset.</span>
<a id="__codelineno-0-2430" name="__codelineno-0-2430"></a>
<a id="__codelineno-0-2431" name="__codelineno-0-2431"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-2432" name="__codelineno-0-2432"></a><span class="sd">            Dataset:</span>
<a id="__codelineno-0-2433" name="__codelineno-0-2433"></a><span class="sd">                if the `path` is given, the method will save the new raster to the given path, else the method will</span>
<a id="__codelineno-0-2434" name="__codelineno-0-2434"></a><span class="sd">                return an in-memory dataset.</span>
<a id="__codelineno-0-2435" name="__codelineno-0-2435"></a>
<a id="__codelineno-0-2436" name="__codelineno-0-2436"></a><span class="sd">        Hint:</span>
<a id="__codelineno-0-2437" name="__codelineno-0-2437"></a><span class="sd">            - If the given array is 3D, the bands have to be the first dimension, the x/lon has to be the second</span>
<a id="__codelineno-0-2438" name="__codelineno-0-2438"></a><span class="sd">              dimension, and the y/lon has to be the third dimension of the array.</span>
<a id="__codelineno-0-2439" name="__codelineno-0-2439"></a>
<a id="__codelineno-0-2440" name="__codelineno-0-2440"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-2441" name="__codelineno-0-2441"></a><span class="sd">            - Create a source dataset and then create another dataset like it:</span>
<a id="__codelineno-0-2442" name="__codelineno-0-2442"></a>
<a id="__codelineno-0-2443" name="__codelineno-0-2443"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-2444" name="__codelineno-0-2444"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-2445" name="__codelineno-0-2445"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(5, 5)</span>
<a id="__codelineno-0-2446" name="__codelineno-0-2446"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-2447" name="__codelineno-0-2447"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-2448" name="__codelineno-0-2448"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-2449" name="__codelineno-0-2449"></a>
<a id="__codelineno-0-2450" name="__codelineno-0-2450"></a><span class="sd">              ```</span>
<a id="__codelineno-0-2451" name="__codelineno-0-2451"></a>
<a id="__codelineno-0-2452" name="__codelineno-0-2452"></a><span class="sd">            - Now let&#39;s create another `dataset` from the previous dataset using the `dataset_like`:</span>
<a id="__codelineno-0-2453" name="__codelineno-0-2453"></a>
<a id="__codelineno-0-2454" name="__codelineno-0-2454"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-2455" name="__codelineno-0-2455"></a><span class="sd">              &gt;&gt;&gt; new_arr = np.random.rand(5, 5)</span>
<a id="__codelineno-0-2456" name="__codelineno-0-2456"></a><span class="sd">              &gt;&gt;&gt; dataset_new = Dataset.dataset_like(dataset, new_arr)</span>
<a id="__codelineno-0-2457" name="__codelineno-0-2457"></a><span class="sd">              &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-2458" name="__codelineno-0-2458"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2459" name="__codelineno-0-2459"></a><span class="sd">                          Cell size: 0.05</span>
<a id="__codelineno-0-2460" name="__codelineno-0-2460"></a><span class="sd">                          Dimension: 5 * 5</span>
<a id="__codelineno-0-2461" name="__codelineno-0-2461"></a><span class="sd">                          EPSG: 4326</span>
<a id="__codelineno-0-2462" name="__codelineno-0-2462"></a><span class="sd">                          Number of Bands: 1</span>
<a id="__codelineno-0-2463" name="__codelineno-0-2463"></a><span class="sd">                          Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-2464" name="__codelineno-0-2464"></a><span class="sd">                          Mask: -9999.0</span>
<a id="__codelineno-0-2465" name="__codelineno-0-2465"></a><span class="sd">                          Data type: float64</span>
<a id="__codelineno-0-2466" name="__codelineno-0-2466"></a><span class="sd">                          File:...</span>
<a id="__codelineno-0-2467" name="__codelineno-0-2467"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2468" name="__codelineno-0-2468"></a>
<a id="__codelineno-0-2469" name="__codelineno-0-2469"></a><span class="sd">              ```</span>
<a id="__codelineno-0-2470" name="__codelineno-0-2470"></a>
<a id="__codelineno-0-2471" name="__codelineno-0-2471"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2472" name="__codelineno-0-2472"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
<a id="__codelineno-0-2473" name="__codelineno-0-2473"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;array should be of type numpy array&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2474" name="__codelineno-0-2474"></a>
<a id="__codelineno-0-2475" name="__codelineno-0-2475"></a>        <span class="k">if</span> <span class="n">array</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-2476" name="__codelineno-0-2476"></a>            <span class="n">bands</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-2477" name="__codelineno-0-2477"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2478" name="__codelineno-0-2478"></a>            <span class="n">bands</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-2479" name="__codelineno-0-2479"></a>
<a id="__codelineno-0-2480" name="__codelineno-0-2480"></a>        <span class="n">dtype</span> <span class="o">=</span> <span class="n">numpy_to_gdal_dtype</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
<a id="__codelineno-0-2481" name="__codelineno-0-2481"></a>
<a id="__codelineno-0-2482" name="__codelineno-0-2482"></a>        <span class="n">dst</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_create_dataset</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">src</span><span class="o">.</span><span class="n">rows</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-2483" name="__codelineno-0-2483"></a>
<a id="__codelineno-0-2484" name="__codelineno-0-2484"></a>        <span class="n">dst</span><span class="o">.</span><span class="n">SetGeoTransform</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">geotransform</span><span class="p">)</span>
<a id="__codelineno-0-2485" name="__codelineno-0-2485"></a>        <span class="n">dst</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-0-2486" name="__codelineno-0-2486"></a>        <span class="c1"># setting the NoDataValue does not accept double precision numbers</span>
<a id="__codelineno-0-2487" name="__codelineno-0-2487"></a>        <span class="n">dst_obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="n">access</span><span class="o">=</span><span class="s2">&quot;write&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2488" name="__codelineno-0-2488"></a>        <span class="n">dst_obj</span><span class="o">.</span><span class="n">_set_no_data_value</span><span class="p">(</span><span class="n">no_data_value</span><span class="o">=</span><span class="n">src</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-2489" name="__codelineno-0-2489"></a>
<a id="__codelineno-0-2490" name="__codelineno-0-2490"></a>        <span class="k">if</span> <span class="n">bands</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-2491" name="__codelineno-0-2491"></a>            <span class="n">dst_obj</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
<a id="__codelineno-0-2492" name="__codelineno-0-2492"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2493" name="__codelineno-0-2493"></a>            <span class="k">for</span> <span class="n">band_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">bands</span><span class="p">):</span>
<a id="__codelineno-0-2494" name="__codelineno-0-2494"></a>                <span class="n">dst_obj</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">band_i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">band_i</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:])</span>
<a id="__codelineno-0-2495" name="__codelineno-0-2495"></a>
<a id="__codelineno-0-2496" name="__codelineno-0-2496"></a>        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2497" name="__codelineno-0-2497"></a>            <span class="n">dst_obj</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">FlushCache</span><span class="p">()</span>
<a id="__codelineno-0-2498" name="__codelineno-0-2498"></a>
<a id="__codelineno-0-2499" name="__codelineno-0-2499"></a>        <span class="k">return</span> <span class="n">dst_obj</span>
<a id="__codelineno-0-2500" name="__codelineno-0-2500"></a>
<a id="__codelineno-0-2501" name="__codelineno-0-2501"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">write_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-2502" name="__codelineno-0-2502"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Write an array to the dataset at the given xoff, yoff position.</span>
<a id="__codelineno-0-2503" name="__codelineno-0-2503"></a>
<a id="__codelineno-0-2504" name="__codelineno-0-2504"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2505" name="__codelineno-0-2505"></a><span class="sd">            array (np.ndarray):</span>
<a id="__codelineno-0-2506" name="__codelineno-0-2506"></a><span class="sd">                The array to write</span>
<a id="__codelineno-0-2507" name="__codelineno-0-2507"></a><span class="sd">            top_left_corner (List[float, float]):</span>
<a id="__codelineno-0-2508" name="__codelineno-0-2508"></a><span class="sd">                indices [row, column]/[y_offset, x_offset] of the cell to write the array to. If None, the array will</span>
<a id="__codelineno-0-2509" name="__codelineno-0-2509"></a><span class="sd">                be written to the top left corner of the dataset.</span>
<a id="__codelineno-0-2510" name="__codelineno-0-2510"></a>
<a id="__codelineno-0-2511" name="__codelineno-0-2511"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-2512" name="__codelineno-0-2512"></a><span class="sd">            Exception: If the array is not written successfully.</span>
<a id="__codelineno-0-2513" name="__codelineno-0-2513"></a>
<a id="__codelineno-0-2514" name="__codelineno-0-2514"></a><span class="sd">        Hint:</span>
<a id="__codelineno-0-2515" name="__codelineno-0-2515"></a><span class="sd">            - The `Dataset` has to be opened in a write mode `read_only=False`.</span>
<a id="__codelineno-0-2516" name="__codelineno-0-2516"></a>
<a id="__codelineno-0-2517" name="__codelineno-0-2517"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-2518" name="__codelineno-0-2518"></a><span class="sd">        None</span>
<a id="__codelineno-0-2519" name="__codelineno-0-2519"></a>
<a id="__codelineno-0-2520" name="__codelineno-0-2520"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-2521" name="__codelineno-0-2521"></a><span class="sd">            - First, create a dataset on disk:</span>
<a id="__codelineno-0-2522" name="__codelineno-0-2522"></a>
<a id="__codelineno-0-2523" name="__codelineno-0-2523"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-2524" name="__codelineno-0-2524"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-2525" name="__codelineno-0-2525"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(5, 5)</span>
<a id="__codelineno-0-2526" name="__codelineno-0-2526"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-2527" name="__codelineno-0-2527"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-2528" name="__codelineno-0-2528"></a><span class="sd">              &gt;&gt;&gt; path = &#39;write_array.tif&#39;</span>
<a id="__codelineno-0-2529" name="__codelineno-0-2529"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(</span>
<a id="__codelineno-0-2530" name="__codelineno-0-2530"></a><span class="sd">              ...     arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326, path=path</span>
<a id="__codelineno-0-2531" name="__codelineno-0-2531"></a><span class="sd">              ... )</span>
<a id="__codelineno-0-2532" name="__codelineno-0-2532"></a><span class="sd">              &gt;&gt;&gt; dataset = None</span>
<a id="__codelineno-0-2533" name="__codelineno-0-2533"></a>
<a id="__codelineno-0-2534" name="__codelineno-0-2534"></a><span class="sd">              ```</span>
<a id="__codelineno-0-2535" name="__codelineno-0-2535"></a>
<a id="__codelineno-0-2536" name="__codelineno-0-2536"></a><span class="sd">            - In a later session you can read the dataset in a `write` mode and update it:</span>
<a id="__codelineno-0-2537" name="__codelineno-0-2537"></a>
<a id="__codelineno-0-2538" name="__codelineno-0-2538"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-2539" name="__codelineno-0-2539"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.read_file(path, read_only=False)</span>
<a id="__codelineno-0-2540" name="__codelineno-0-2540"></a><span class="sd">              &gt;&gt;&gt; arr = np.array([[1, 2], [3, 4]])</span>
<a id="__codelineno-0-2541" name="__codelineno-0-2541"></a><span class="sd">              &gt;&gt;&gt; dataset.write_array(arr, top_left_corner=[1, 1])</span>
<a id="__codelineno-0-2542" name="__codelineno-0-2542"></a><span class="sd">              &gt;&gt;&gt; dataset.read_array()    # doctest: +SKIP</span>
<a id="__codelineno-0-2543" name="__codelineno-0-2543"></a><span class="sd">              array([[0.77359738, 0.64789596, 0.37912658, 0.03673771, 0.69571106],</span>
<a id="__codelineno-0-2544" name="__codelineno-0-2544"></a><span class="sd">                     [0.60804387, 1.        , 2.        , 0.501909  , 0.99597122],</span>
<a id="__codelineno-0-2545" name="__codelineno-0-2545"></a><span class="sd">                     [0.83879291, 3.        , 4.        , 0.33058081, 0.59824467],</span>
<a id="__codelineno-0-2546" name="__codelineno-0-2546"></a><span class="sd">                     [0.774213  , 0.94338147, 0.16443719, 0.28041457, 0.61914179],</span>
<a id="__codelineno-0-2547" name="__codelineno-0-2547"></a><span class="sd">                     [0.97201104, 0.81364799, 0.35157525, 0.65554998, 0.8589739 ]])</span>
<a id="__codelineno-0-2548" name="__codelineno-0-2548"></a>
<a id="__codelineno-0-2549" name="__codelineno-0-2549"></a><span class="sd">              ```</span>
<a id="__codelineno-0-2550" name="__codelineno-0-2550"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2551" name="__codelineno-0-2551"></a>        <span class="n">yoff</span><span class="p">,</span> <span class="n">xoff</span> <span class="o">=</span> <span class="n">top_left_corner</span>
<a id="__codelineno-0-2552" name="__codelineno-0-2552"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-2553" name="__codelineno-0-2553"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_raster</span><span class="o">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">xoff</span><span class="o">=</span><span class="n">xoff</span><span class="p">,</span> <span class="n">yoff</span><span class="o">=</span><span class="n">yoff</span><span class="p">)</span>
<a id="__codelineno-0-2554" name="__codelineno-0-2554"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_raster</span><span class="o">.</span><span class="n">FlushCache</span><span class="p">()</span>
<a id="__codelineno-0-2555" name="__codelineno-0-2555"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-2556" name="__codelineno-0-2556"></a>            <span class="k">raise</span> <span class="n">e</span>
<a id="__codelineno-0-2557" name="__codelineno-0-2557"></a>
<a id="__codelineno-0-2558" name="__codelineno-0-2558"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_crs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-2559" name="__codelineno-0-2559"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get coordinate reference system.&quot;&quot;&quot;</span>
<a id="__codelineno-0-2560" name="__codelineno-0-2560"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetProjection</span><span class="p">()</span>
<a id="__codelineno-0-2561" name="__codelineno-0-2561"></a>
<a id="__codelineno-0-2562" name="__codelineno-0-2562"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">set_crs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">crs</span><span class="p">:</span> <span class="n">Optional</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">epsg</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-2563" name="__codelineno-0-2563"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the Coordinate Reference System (CRS).</span>
<a id="__codelineno-0-2564" name="__codelineno-0-2564"></a>
<a id="__codelineno-0-2565" name="__codelineno-0-2565"></a><span class="sd">            Set the Coordinate Reference System (CRS) of a</span>
<a id="__codelineno-0-2566" name="__codelineno-0-2566"></a>
<a id="__codelineno-0-2567" name="__codelineno-0-2567"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2568" name="__codelineno-0-2568"></a><span class="sd">            crs (str):</span>
<a id="__codelineno-0-2569" name="__codelineno-0-2569"></a><span class="sd">                Optional if epsg is specified. WKT string. i.e.</span>
<a id="__codelineno-0-2570" name="__codelineno-0-2570"></a><span class="sd">                    ```</span>
<a id="__codelineno-0-2571" name="__codelineno-0-2571"></a><span class="sd">                    &#39;GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;, 6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;],</span>
<a id="__codelineno-0-2572" name="__codelineno-0-2572"></a><span class="sd">                    AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,</span>
<a id="__codelineno-0-2573" name="__codelineno-0-2573"></a><span class="sd">                    0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AXIS[&quot;Latitude&quot;,NORTH],AXIS[&quot;Longitude&quot;,EAST],</span>
<a id="__codelineno-0-2574" name="__codelineno-0-2574"></a><span class="sd">                    AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]&#39;</span>
<a id="__codelineno-0-2575" name="__codelineno-0-2575"></a><span class="sd">                    ```</span>
<a id="__codelineno-0-2576" name="__codelineno-0-2576"></a><span class="sd">            epsg (int):</span>
<a id="__codelineno-0-2577" name="__codelineno-0-2577"></a><span class="sd">                Optional if crs is specified. EPSG code specifying the projection.</span>
<a id="__codelineno-0-2578" name="__codelineno-0-2578"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2579" name="__codelineno-0-2579"></a>        <span class="c1"># first change the projection of the gdal dataset object</span>
<a id="__codelineno-0-2580" name="__codelineno-0-2580"></a>        <span class="c1"># second change the epsg attribute of the Dataset object</span>
<a id="__codelineno-0-2581" name="__codelineno-0-2581"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">driver_type</span> <span class="o">==</span> <span class="s2">&quot;ascii&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2582" name="__codelineno-0-2582"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-2583" name="__codelineno-0-2583"></a>                <span class="s2">&quot;Setting CRS for ASCII file is not possible, you can save the files to a geotiff and then reset the crs&quot;</span>
<a id="__codelineno-0-2584" name="__codelineno-0-2584"></a>            <span class="p">)</span>
<a id="__codelineno-0-2585" name="__codelineno-0-2585"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2586" name="__codelineno-0-2586"></a>            <span class="k">if</span> <span class="n">crs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2587" name="__codelineno-0-2587"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-0-2588" name="__codelineno-0-2588"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_epsg</span> <span class="o">=</span> <span class="n">FeatureCollection</span><span class="o">.</span><span class="n">get_epsg_from_prj</span><span class="p">(</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-0-2589" name="__codelineno-0-2589"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2590" name="__codelineno-0-2590"></a>                <span class="n">sr</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_create_sr_from_epsg</span><span class="p">(</span><span class="n">epsg</span><span class="p">)</span>
<a id="__codelineno-0-2591" name="__codelineno-0-2591"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">sr</span><span class="o">.</span><span class="n">ExportToWkt</span><span class="p">())</span>
<a id="__codelineno-0-2592" name="__codelineno-0-2592"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_epsg</span> <span class="o">=</span> <span class="n">epsg</span>
<a id="__codelineno-0-2593" name="__codelineno-0-2593"></a>
<a id="__codelineno-0-2594" name="__codelineno-0-2594"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">to_crs</span><span class="p">(</span>
<a id="__codelineno-0-2595" name="__codelineno-0-2595"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-2596" name="__codelineno-0-2596"></a>        <span class="n">to_epsg</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-2597" name="__codelineno-0-2597"></a>        <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;nearest neighbor&quot;</span><span class="p">,</span>
<a id="__codelineno-0-2598" name="__codelineno-0-2598"></a>        <span class="n">maintain_alignment</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-2599" name="__codelineno-0-2599"></a>        <span class="n">inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-2600" name="__codelineno-0-2600"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Dataset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<a id="__codelineno-0-2601" name="__codelineno-0-2601"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reproject the dataset to any projection.</span>
<a id="__codelineno-0-2602" name="__codelineno-0-2602"></a>
<a id="__codelineno-0-2603" name="__codelineno-0-2603"></a><span class="sd">            (default the WGS84 web mercator projection, without resampling)</span>
<a id="__codelineno-0-2604" name="__codelineno-0-2604"></a>
<a id="__codelineno-0-2605" name="__codelineno-0-2605"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2606" name="__codelineno-0-2606"></a><span class="sd">            to_epsg (int):</span>
<a id="__codelineno-0-2607" name="__codelineno-0-2607"></a><span class="sd">                reference number to the new projection (https://epsg.io/). Default 3857 is the reference number of WGS84</span>
<a id="__codelineno-0-2608" name="__codelineno-0-2608"></a><span class="sd">                web mercator.</span>
<a id="__codelineno-0-2609" name="__codelineno-0-2609"></a><span class="sd">            method (str):</span>
<a id="__codelineno-0-2610" name="__codelineno-0-2610"></a><span class="sd">                resampling method. Default is &quot;nearest neighbor&quot;. See https://gisgeography.com/raster-resampling/.</span>
<a id="__codelineno-0-2611" name="__codelineno-0-2611"></a><span class="sd">                Allowed values: &quot;nearest neighbor&quot;, &quot;cubic&quot;, &quot;bilinear&quot;.</span>
<a id="__codelineno-0-2612" name="__codelineno-0-2612"></a><span class="sd">            maintain_alignment (bool):</span>
<a id="__codelineno-0-2613" name="__codelineno-0-2613"></a><span class="sd">                True to maintain the number of rows and columns of the raster the same after reprojection.</span>
<a id="__codelineno-0-2614" name="__codelineno-0-2614"></a><span class="sd">                Default is False.</span>
<a id="__codelineno-0-2615" name="__codelineno-0-2615"></a><span class="sd">            inplace (bool):</span>
<a id="__codelineno-0-2616" name="__codelineno-0-2616"></a><span class="sd">                True to make changes inplace. Default is False.</span>
<a id="__codelineno-0-2617" name="__codelineno-0-2617"></a>
<a id="__codelineno-0-2618" name="__codelineno-0-2618"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-2619" name="__codelineno-0-2619"></a><span class="sd">            Dataset:</span>
<a id="__codelineno-0-2620" name="__codelineno-0-2620"></a><span class="sd">                Dataset object, if inplace is True, the method returns None.</span>
<a id="__codelineno-0-2621" name="__codelineno-0-2621"></a>
<a id="__codelineno-0-2622" name="__codelineno-0-2622"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-2623" name="__codelineno-0-2623"></a><span class="sd">            - Create a dataset and reproject it:</span>
<a id="__codelineno-0-2624" name="__codelineno-0-2624"></a>
<a id="__codelineno-0-2625" name="__codelineno-0-2625"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-2626" name="__codelineno-0-2626"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-2627" name="__codelineno-0-2627"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(4, 5, 5)</span>
<a id="__codelineno-0-2628" name="__codelineno-0-2628"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-2629" name="__codelineno-0-2629"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-2630" name="__codelineno-0-2630"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-2631" name="__codelineno-0-2631"></a><span class="sd">              &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-2632" name="__codelineno-0-2632"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2633" name="__codelineno-0-2633"></a><span class="sd">                          Cell size: 0.05</span>
<a id="__codelineno-0-2634" name="__codelineno-0-2634"></a><span class="sd">                          Dimension: 5 * 5</span>
<a id="__codelineno-0-2635" name="__codelineno-0-2635"></a><span class="sd">                          EPSG: 4326</span>
<a id="__codelineno-0-2636" name="__codelineno-0-2636"></a><span class="sd">                          Number of Bands: 4</span>
<a id="__codelineno-0-2637" name="__codelineno-0-2637"></a><span class="sd">                          Band names: [&#39;Band_1&#39;, &#39;Band_2&#39;, &#39;Band_3&#39;, &#39;Band_4&#39;]</span>
<a id="__codelineno-0-2638" name="__codelineno-0-2638"></a><span class="sd">                          Mask: -9999.0</span>
<a id="__codelineno-0-2639" name="__codelineno-0-2639"></a><span class="sd">                          Data type: float64</span>
<a id="__codelineno-0-2640" name="__codelineno-0-2640"></a><span class="sd">                          File:...</span>
<a id="__codelineno-0-2641" name="__codelineno-0-2641"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2642" name="__codelineno-0-2642"></a><span class="sd">              &gt;&gt;&gt; print(dataset.crs)</span>
<a id="__codelineno-0-2643" name="__codelineno-0-2643"></a><span class="sd">              GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AXIS[&quot;Latitude&quot;,NORTH],AXIS[&quot;Longitude&quot;,EAST],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]</span>
<a id="__codelineno-0-2644" name="__codelineno-0-2644"></a><span class="sd">              &gt;&gt;&gt; print(dataset.epsg)</span>
<a id="__codelineno-0-2645" name="__codelineno-0-2645"></a><span class="sd">              4326</span>
<a id="__codelineno-0-2646" name="__codelineno-0-2646"></a><span class="sd">              &gt;&gt;&gt; reprojected_dataset = dataset.to_crs(to_epsg=3857)</span>
<a id="__codelineno-0-2647" name="__codelineno-0-2647"></a><span class="sd">              &gt;&gt;&gt; print(reprojected_dataset)</span>
<a id="__codelineno-0-2648" name="__codelineno-0-2648"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2649" name="__codelineno-0-2649"></a><span class="sd">                          Cell size: 5565.983370404396</span>
<a id="__codelineno-0-2650" name="__codelineno-0-2650"></a><span class="sd">                          Dimension: 5 * 5</span>
<a id="__codelineno-0-2651" name="__codelineno-0-2651"></a><span class="sd">                          EPSG: 3857</span>
<a id="__codelineno-0-2652" name="__codelineno-0-2652"></a><span class="sd">                          Number of Bands: 4</span>
<a id="__codelineno-0-2653" name="__codelineno-0-2653"></a><span class="sd">                          Band names: [&#39;Band_1&#39;, &#39;Band_2&#39;, &#39;Band_3&#39;, &#39;Band_4&#39;]</span>
<a id="__codelineno-0-2654" name="__codelineno-0-2654"></a><span class="sd">                          Mask: -9999.0</span>
<a id="__codelineno-0-2655" name="__codelineno-0-2655"></a><span class="sd">                          Data type: float64</span>
<a id="__codelineno-0-2656" name="__codelineno-0-2656"></a><span class="sd">                          File:...</span>
<a id="__codelineno-0-2657" name="__codelineno-0-2657"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2658" name="__codelineno-0-2658"></a><span class="sd">              &gt;&gt;&gt; print(reprojected_dataset.crs)</span>
<a id="__codelineno-0-2659" name="__codelineno-0-2659"></a><span class="sd">              PROJCS[&quot;WGS 84 / Pseudo-Mercator&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]],PROJECTION[&quot;Mercator_1SP&quot;],PARAMETER[&quot;central_meridian&quot;,0],PARAMETER[&quot;scale_factor&quot;,1],PARAMETER[&quot;false_easting&quot;,0],PARAMETER[&quot;false_northing&quot;,0],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH],EXTENSION[&quot;PROJ4&quot;,&quot;+proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs&quot;],AUTHORITY[&quot;EPSG&quot;,&quot;3857&quot;]]</span>
<a id="__codelineno-0-2660" name="__codelineno-0-2660"></a><span class="sd">              &gt;&gt;&gt; print(reprojected_dataset.epsg)</span>
<a id="__codelineno-0-2661" name="__codelineno-0-2661"></a><span class="sd">              3857</span>
<a id="__codelineno-0-2662" name="__codelineno-0-2662"></a>
<a id="__codelineno-0-2663" name="__codelineno-0-2663"></a><span class="sd">              ```</span>
<a id="__codelineno-0-2664" name="__codelineno-0-2664"></a>
<a id="__codelineno-0-2665" name="__codelineno-0-2665"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2666" name="__codelineno-0-2666"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">to_epsg</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
<a id="__codelineno-0-2667" name="__codelineno-0-2667"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-2668" name="__codelineno-0-2668"></a>                <span class="s2">&quot;please enter correct integer number for to_epsg more information &quot;</span>
<a id="__codelineno-0-2669" name="__codelineno-0-2669"></a>                <span class="sa">f</span><span class="s2">&quot;https://epsg.io/, given </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">to_epsg</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-2670" name="__codelineno-0-2670"></a>            <span class="p">)</span>
<a id="__codelineno-0-2671" name="__codelineno-0-2671"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-2672" name="__codelineno-0-2672"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-2673" name="__codelineno-0-2673"></a>                <span class="s2">&quot;Please enter a correct method, for more information, see documentation &quot;</span>
<a id="__codelineno-0-2674" name="__codelineno-0-2674"></a>            <span class="p">)</span>
<a id="__codelineno-0-2675" name="__codelineno-0-2675"></a>        <span class="k">if</span> <span class="n">method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">INTERPOLATION_METHODS</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<a id="__codelineno-0-2676" name="__codelineno-0-2676"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-2677" name="__codelineno-0-2677"></a>                <span class="sa">f</span><span class="s2">&quot;The given interpolation method: </span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2"> does not exist, existing methods are </span><span class="si">{</span><span class="n">INTERPOLATION_METHODS</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-2678" name="__codelineno-0-2678"></a>            <span class="p">)</span>
<a id="__codelineno-0-2679" name="__codelineno-0-2679"></a>
<a id="__codelineno-0-2680" name="__codelineno-0-2680"></a>        <span class="n">method</span> <span class="o">=</span> <span class="n">INTERPOLATION_METHODS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
<a id="__codelineno-0-2681" name="__codelineno-0-2681"></a>
<a id="__codelineno-0-2682" name="__codelineno-0-2682"></a>        <span class="k">if</span> <span class="n">maintain_alignment</span><span class="p">:</span>
<a id="__codelineno-0-2683" name="__codelineno-0-2683"></a>            <span class="n">dst_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reproject_with_ReprojectImage</span><span class="p">(</span><span class="n">to_epsg</span><span class="p">,</span> <span class="n">method</span><span class="p">)</span>
<a id="__codelineno-0-2684" name="__codelineno-0-2684"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2685" name="__codelineno-0-2685"></a>            <span class="n">dst</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Warp</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span> <span class="n">dstSRS</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;EPSG:</span><span class="si">{</span><span class="n">to_epsg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;VRT&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2686" name="__codelineno-0-2686"></a>            <span class="n">dst_obj</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
<a id="__codelineno-0-2687" name="__codelineno-0-2687"></a>
<a id="__codelineno-0-2688" name="__codelineno-0-2688"></a>        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
<a id="__codelineno-0-2689" name="__codelineno-0-2689"></a>            <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dst_obj</span><span class="o">.</span><span class="n">raster</span><span class="p">)</span>
<a id="__codelineno-0-2690" name="__codelineno-0-2690"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2691" name="__codelineno-0-2691"></a>            <span class="k">return</span> <span class="n">dst_obj</span>
<a id="__codelineno-0-2692" name="__codelineno-0-2692"></a>
<a id="__codelineno-0-2693" name="__codelineno-0-2693"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_epsg</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-2694" name="__codelineno-0-2694"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the EPSG number.</span>
<a id="__codelineno-0-2695" name="__codelineno-0-2695"></a>
<a id="__codelineno-0-2696" name="__codelineno-0-2696"></a><span class="sd">            This function reads the projection of a GEOGCS file or tiff file.</span>
<a id="__codelineno-0-2697" name="__codelineno-0-2697"></a>
<a id="__codelineno-0-2698" name="__codelineno-0-2698"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-2699" name="__codelineno-0-2699"></a><span class="sd">            int: EPSG number.</span>
<a id="__codelineno-0-2700" name="__codelineno-0-2700"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2701" name="__codelineno-0-2701"></a>        <span class="n">prj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_crs</span><span class="p">()</span>
<a id="__codelineno-0-2702" name="__codelineno-0-2702"></a>        <span class="n">epsg</span> <span class="o">=</span> <span class="n">FeatureCollection</span><span class="o">.</span><span class="n">get_epsg_from_prj</span><span class="p">(</span><span class="n">prj</span><span class="p">)</span>
<a id="__codelineno-0-2703" name="__codelineno-0-2703"></a>
<a id="__codelineno-0-2704" name="__codelineno-0-2704"></a>        <span class="k">return</span> <span class="n">epsg</span>
<a id="__codelineno-0-2705" name="__codelineno-0-2705"></a>
<a id="__codelineno-0-2706" name="__codelineno-0-2706"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">count_domain_cells</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-2707" name="__codelineno-0-2707"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Count cells inside the domain.</span>
<a id="__codelineno-0-2708" name="__codelineno-0-2708"></a>
<a id="__codelineno-0-2709" name="__codelineno-0-2709"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2710" name="__codelineno-0-2710"></a><span class="sd">            band (int):</span>
<a id="__codelineno-0-2711" name="__codelineno-0-2711"></a><span class="sd">                Band index. Default is 0.</span>
<a id="__codelineno-0-2712" name="__codelineno-0-2712"></a>
<a id="__codelineno-0-2713" name="__codelineno-0-2713"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-2714" name="__codelineno-0-2714"></a><span class="sd">            int:</span>
<a id="__codelineno-0-2715" name="__codelineno-0-2715"></a><span class="sd">                Number of cells.</span>
<a id="__codelineno-0-2716" name="__codelineno-0-2716"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2717" name="__codelineno-0-2717"></a>        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-2718" name="__codelineno-0-2718"></a>        <span class="n">domain_count</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="n">arr</span><span class="p">[:,</span> <span class="p">:])</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span>
<a id="__codelineno-0-2719" name="__codelineno-0-2719"></a>            <span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="n">band</span><span class="p">],</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)])</span>
<a id="__codelineno-0-2720" name="__codelineno-0-2720"></a>        <span class="p">)</span>
<a id="__codelineno-0-2721" name="__codelineno-0-2721"></a>        <span class="k">return</span> <span class="n">domain_count</span>
<a id="__codelineno-0-2722" name="__codelineno-0-2722"></a>
<a id="__codelineno-0-2723" name="__codelineno-0-2723"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-0-2724" name="__codelineno-0-2724"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_create_sr_from_epsg</span><span class="p">(</span><span class="n">epsg</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SpatialReference</span><span class="p">:</span>
<a id="__codelineno-0-2725" name="__codelineno-0-2725"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a spatial reference object from EPSG number.</span>
<a id="__codelineno-0-2726" name="__codelineno-0-2726"></a>
<a id="__codelineno-0-2727" name="__codelineno-0-2727"></a><span class="sd">        https://gdal.org/tutorials/osr_api_tut.html</span>
<a id="__codelineno-0-2728" name="__codelineno-0-2728"></a>
<a id="__codelineno-0-2729" name="__codelineno-0-2729"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2730" name="__codelineno-0-2730"></a><span class="sd">            epsg (int):</span>
<a id="__codelineno-0-2731" name="__codelineno-0-2731"></a><span class="sd">                EPSG number.</span>
<a id="__codelineno-0-2732" name="__codelineno-0-2732"></a>
<a id="__codelineno-0-2733" name="__codelineno-0-2733"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-2734" name="__codelineno-0-2734"></a><span class="sd">            SpatialReference:</span>
<a id="__codelineno-0-2735" name="__codelineno-0-2735"></a><span class="sd">                SpatialReference object.</span>
<a id="__codelineno-0-2736" name="__codelineno-0-2736"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2737" name="__codelineno-0-2737"></a>        <span class="n">sr</span> <span class="o">=</span> <span class="n">osr</span><span class="o">.</span><span class="n">SpatialReference</span><span class="p">()</span>
<a id="__codelineno-0-2738" name="__codelineno-0-2738"></a>        <span class="n">sr</span><span class="o">.</span><span class="n">ImportFromEPSG</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">epsg</span><span class="p">))</span>
<a id="__codelineno-0-2739" name="__codelineno-0-2739"></a>        <span class="k">return</span> <span class="n">sr</span>
<a id="__codelineno-0-2740" name="__codelineno-0-2740"></a>
<a id="__codelineno-0-2741" name="__codelineno-0-2741"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_band_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-0-2742" name="__codelineno-0-2742"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get band names from band metadata if exists otherwise will return index [1,2, ...].</span>
<a id="__codelineno-0-2743" name="__codelineno-0-2743"></a>
<a id="__codelineno-0-2744" name="__codelineno-0-2744"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-2745" name="__codelineno-0-2745"></a><span class="sd">            list[str]:</span>
<a id="__codelineno-0-2746" name="__codelineno-0-2746"></a><span class="sd">                List of band names.</span>
<a id="__codelineno-0-2747" name="__codelineno-0-2747"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2748" name="__codelineno-0-2748"></a>        <span class="n">names</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-2749" name="__codelineno-0-2749"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
<a id="__codelineno-0-2750" name="__codelineno-0-2750"></a>            <span class="n">band_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-0-2751" name="__codelineno-0-2751"></a>
<a id="__codelineno-0-2752" name="__codelineno-0-2752"></a>            <span class="k">if</span> <span class="n">band_i</span><span class="o">.</span><span class="n">GetDescription</span><span class="p">():</span>
<a id="__codelineno-0-2753" name="__codelineno-0-2753"></a>                <span class="c1"># Use the band_i description.</span>
<a id="__codelineno-0-2754" name="__codelineno-0-2754"></a>                <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">band_i</span><span class="o">.</span><span class="n">GetDescription</span><span class="p">())</span>
<a id="__codelineno-0-2755" name="__codelineno-0-2755"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2756" name="__codelineno-0-2756"></a>                <span class="c1"># Check for metadata.</span>
<a id="__codelineno-0-2757" name="__codelineno-0-2757"></a>                <span class="n">band_i_name</span> <span class="o">=</span> <span class="s2">&quot;Band_</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">band_i</span><span class="o">.</span><span class="n">GetBand</span><span class="p">())</span>
<a id="__codelineno-0-2758" name="__codelineno-0-2758"></a>                <span class="n">metadata</span> <span class="o">=</span> <span class="n">band_i</span><span class="o">.</span><span class="n">GetDataset</span><span class="p">()</span><span class="o">.</span><span class="n">GetMetadata_Dict</span><span class="p">()</span>
<a id="__codelineno-0-2759" name="__codelineno-0-2759"></a>
<a id="__codelineno-0-2760" name="__codelineno-0-2760"></a>                <span class="c1"># If in metadata, return the metadata entry, else Band_N.</span>
<a id="__codelineno-0-2761" name="__codelineno-0-2761"></a>                <span class="k">if</span> <span class="n">band_i_name</span> <span class="ow">in</span> <span class="n">metadata</span> <span class="ow">and</span> <span class="n">metadata</span><span class="p">[</span><span class="n">band_i_name</span><span class="p">]:</span>
<a id="__codelineno-0-2762" name="__codelineno-0-2762"></a>                    <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">metadata</span><span class="p">[</span><span class="n">band_i_name</span><span class="p">])</span>
<a id="__codelineno-0-2763" name="__codelineno-0-2763"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2764" name="__codelineno-0-2764"></a>                    <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">band_i_name</span><span class="p">)</span>
<a id="__codelineno-0-2765" name="__codelineno-0-2765"></a>
<a id="__codelineno-0-2766" name="__codelineno-0-2766"></a>        <span class="k">return</span> <span class="n">names</span>
<a id="__codelineno-0-2767" name="__codelineno-0-2767"></a>
<a id="__codelineno-0-2768" name="__codelineno-0-2768"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_set_band_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name_list</span><span class="p">:</span> <span class="n">List</span><span class="p">):</span>
<a id="__codelineno-0-2769" name="__codelineno-0-2769"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set band names from a given list of names.</span>
<a id="__codelineno-0-2770" name="__codelineno-0-2770"></a>
<a id="__codelineno-0-2771" name="__codelineno-0-2771"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-2772" name="__codelineno-0-2772"></a><span class="sd">            list[str]:</span>
<a id="__codelineno-0-2773" name="__codelineno-0-2773"></a><span class="sd">                List of band names.</span>
<a id="__codelineno-0-2774" name="__codelineno-0-2774"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2775" name="__codelineno-0-2775"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-2776" name="__codelineno-0-2776"></a>            <span class="c1"># first set the band name in the gdal dataset object</span>
<a id="__codelineno-0-2777" name="__codelineno-0-2777"></a>            <span class="n">band_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-2778" name="__codelineno-0-2778"></a>            <span class="n">band_i</span><span class="o">.</span><span class="n">SetDescription</span><span class="p">(</span><span class="n">name_list</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<a id="__codelineno-0-2779" name="__codelineno-0-2779"></a>            <span class="c1"># second, change the band names in the _band_names property.</span>
<a id="__codelineno-0-2780" name="__codelineno-0-2780"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_band_names</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">name_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<a id="__codelineno-0-2781" name="__codelineno-0-2781"></a>
<a id="__codelineno-0-2782" name="__codelineno-0-2782"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_check_no_data_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">no_data_value</span><span class="p">:</span> <span class="n">List</span><span class="p">):</span>
<a id="__codelineno-0-2783" name="__codelineno-0-2783"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the no_data_value with the dtype of the object.</span>
<a id="__codelineno-0-2784" name="__codelineno-0-2784"></a>
<a id="__codelineno-0-2785" name="__codelineno-0-2785"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2786" name="__codelineno-0-2786"></a><span class="sd">            no_data_value:</span>
<a id="__codelineno-0-2787" name="__codelineno-0-2787"></a><span class="sd">                No-data value(s) to validate.</span>
<a id="__codelineno-0-2788" name="__codelineno-0-2788"></a>
<a id="__codelineno-0-2789" name="__codelineno-0-2789"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-2790" name="__codelineno-0-2790"></a><span class="sd">            Any:</span>
<a id="__codelineno-0-2791" name="__codelineno-0-2791"></a><span class="sd">                Convert the no_data_value to comply with the dtype.</span>
<a id="__codelineno-0-2792" name="__codelineno-0-2792"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2793" name="__codelineno-0-2793"></a>        <span class="c1"># convert the no_data_value based on the dtype of each raster band.</span>
<a id="__codelineno-0-2794" name="__codelineno-0-2794"></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gdal_dtype</span><span class="p">):</span>
<a id="__codelineno-0-2795" name="__codelineno-0-2795"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-2796" name="__codelineno-0-2796"></a>                <span class="n">val</span> <span class="o">=</span> <span class="n">no_data_value</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<a id="__codelineno-0-2797" name="__codelineno-0-2797"></a>                <span class="c1"># if not None or np.nan</span>
<a id="__codelineno-0-2798" name="__codelineno-0-2798"></a>                <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
<a id="__codelineno-0-2799" name="__codelineno-0-2799"></a>                    <span class="c1"># if val &lt; np.iinfo(self.dtype[i]).min or val &gt; np.iinfo(self.dtype[i]).max:</span>
<a id="__codelineno-0-2800" name="__codelineno-0-2800"></a>                    <span class="c1"># if the no_data_value is out of the range of the data type</span>
<a id="__codelineno-0-2801" name="__codelineno-0-2801"></a>                    <span class="n">no_data_value</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">numpy_dtype</span><span class="p">[</span><span class="n">i</span><span class="p">](</span><span class="n">val</span><span class="p">)</span>
<a id="__codelineno-0-2802" name="__codelineno-0-2802"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2803" name="__codelineno-0-2803"></a>                    <span class="c1"># None and np.nan</span>
<a id="__codelineno-0-2804" name="__codelineno-0-2804"></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;u&quot;</span><span class="p">):</span>
<a id="__codelineno-0-2805" name="__codelineno-0-2805"></a>                        <span class="c1"># only Unsigned integer data types.</span>
<a id="__codelineno-0-2806" name="__codelineno-0-2806"></a>                        <span class="c1"># if None or np.nan it will make a problem with the unsigned integer data type</span>
<a id="__codelineno-0-2807" name="__codelineno-0-2807"></a>                        <span class="c1"># use the max bound of the data type as a no_data_value</span>
<a id="__codelineno-0-2808" name="__codelineno-0-2808"></a>                        <span class="n">no_data_value</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">iinfo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">.</span><span class="n">max</span>
<a id="__codelineno-0-2809" name="__codelineno-0-2809"></a>                    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2810" name="__codelineno-0-2810"></a>                        <span class="c1"># no_data_type is None/np,nan and all other data types that is not Unsigned integer</span>
<a id="__codelineno-0-2811" name="__codelineno-0-2811"></a>                        <span class="n">no_data_value</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
<a id="__codelineno-0-2812" name="__codelineno-0-2812"></a>
<a id="__codelineno-0-2813" name="__codelineno-0-2813"></a>            <span class="k">except</span> <span class="ne">OverflowError</span><span class="p">:</span>
<a id="__codelineno-0-2814" name="__codelineno-0-2814"></a>                <span class="c1"># no_data_value = -3.4028230607370965e+38, numpy_dtype = np.int64</span>
<a id="__codelineno-0-2815" name="__codelineno-0-2815"></a>                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
<a id="__codelineno-0-2816" name="__codelineno-0-2816"></a>                    <span class="sa">f</span><span class="s2">&quot;The no_data_value:</span><span class="si">{</span><span class="n">no_data_value</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s2"> is out of range, Band data type is </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">numpy_dtype</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-2817" name="__codelineno-0-2817"></a>                <span class="p">)</span>
<a id="__codelineno-0-2818" name="__codelineno-0-2818"></a>                <span class="n">no_data_value</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">numpy_dtype</span><span class="p">[</span><span class="n">i</span><span class="p">](</span><span class="n">DEFAULT_NO_DATA_VALUE</span><span class="p">)</span>
<a id="__codelineno-0-2819" name="__codelineno-0-2819"></a>        <span class="k">return</span> <span class="n">no_data_value</span>
<a id="__codelineno-0-2820" name="__codelineno-0-2820"></a>
<a id="__codelineno-0-2821" name="__codelineno-0-2821"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_set_no_data_value</span><span class="p">(</span>
<a id="__codelineno-0-2822" name="__codelineno-0-2822"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">no_data_value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_NO_DATA_VALUE</span>
<a id="__codelineno-0-2823" name="__codelineno-0-2823"></a>    <span class="p">):</span>
<a id="__codelineno-0-2824" name="__codelineno-0-2824"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;setNoDataValue.</span>
<a id="__codelineno-0-2825" name="__codelineno-0-2825"></a>
<a id="__codelineno-0-2826" name="__codelineno-0-2826"></a><span class="sd">            - Set the no data value in all raster bands.</span>
<a id="__codelineno-0-2827" name="__codelineno-0-2827"></a><span class="sd">            - Fill the whole raster with the no_data_value.</span>
<a id="__codelineno-0-2828" name="__codelineno-0-2828"></a><span class="sd">            - used only when creating an empty driver.</span>
<a id="__codelineno-0-2829" name="__codelineno-0-2829"></a>
<a id="__codelineno-0-2830" name="__codelineno-0-2830"></a><span class="sd">            now the no_data_value is converted to the dtype of the raster bands and updated in the</span>
<a id="__codelineno-0-2831" name="__codelineno-0-2831"></a><span class="sd">            dataset attribute, gdal no_data_value attribute, used to fill the raster band.</span>
<a id="__codelineno-0-2832" name="__codelineno-0-2832"></a><span class="sd">            from here you have to use the no_data_value stored in the no_data_value attribute as it is updated.</span>
<a id="__codelineno-0-2833" name="__codelineno-0-2833"></a>
<a id="__codelineno-0-2834" name="__codelineno-0-2834"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2835" name="__codelineno-0-2835"></a><span class="sd">            no_data_value (numeric):</span>
<a id="__codelineno-0-2836" name="__codelineno-0-2836"></a><span class="sd">                No data value to fill the masked part of the array.</span>
<a id="__codelineno-0-2837" name="__codelineno-0-2837"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2838" name="__codelineno-0-2838"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">no_data_value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-2839" name="__codelineno-0-2839"></a>            <span class="n">no_data_value</span> <span class="o">=</span> <span class="p">[</span><span class="n">no_data_value</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span>
<a id="__codelineno-0-2840" name="__codelineno-0-2840"></a>
<a id="__codelineno-0-2841" name="__codelineno-0-2841"></a>        <span class="n">no_data_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_no_data_value</span><span class="p">(</span><span class="n">no_data_value</span><span class="p">)</span>
<a id="__codelineno-0-2842" name="__codelineno-0-2842"></a>
<a id="__codelineno-0-2843" name="__codelineno-0-2843"></a>        <span class="k">for</span> <span class="n">band</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-2844" name="__codelineno-0-2844"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-2845" name="__codelineno-0-2845"></a>                <span class="c1"># now the no_data_value is converted to the dtype of the raster bands and updated in the</span>
<a id="__codelineno-0-2846" name="__codelineno-0-2846"></a>                <span class="c1"># dataset attribute, gdal no_data_value attribute, used to fill the raster band.</span>
<a id="__codelineno-0-2847" name="__codelineno-0-2847"></a>                <span class="c1"># from here you have to use the no_data_value stored in the no_data_value attribute as it is updated.</span>
<a id="__codelineno-0-2848" name="__codelineno-0-2848"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_set_no_data_value_backend</span><span class="p">(</span><span class="n">band</span><span class="p">,</span> <span class="n">no_data_value</span><span class="p">[</span><span class="n">band</span><span class="p">])</span>
<a id="__codelineno-0-2849" name="__codelineno-0-2849"></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-2850" name="__codelineno-0-2850"></a>                <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="fm">__contains__</span><span class="p">(</span>
<a id="__codelineno-0-2851" name="__codelineno-0-2851"></a>                    <span class="s2">&quot;Attempt to write to read only dataset in GDALRasterBand::Fill().&quot;</span>
<a id="__codelineno-0-2852" name="__codelineno-0-2852"></a>                <span class="p">):</span>
<a id="__codelineno-0-2853" name="__codelineno-0-2853"></a>                    <span class="k">raise</span> <span class="n">ReadOnlyError</span><span class="p">(</span>
<a id="__codelineno-0-2854" name="__codelineno-0-2854"></a>                        <span class="s2">&quot;The Dataset is open with a read only, please read the raster using update access mode&quot;</span>
<a id="__codelineno-0-2855" name="__codelineno-0-2855"></a>                    <span class="p">)</span>
<a id="__codelineno-0-2856" name="__codelineno-0-2856"></a>                <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="fm">__contains__</span><span class="p">(</span>
<a id="__codelineno-0-2857" name="__codelineno-0-2857"></a>                    <span class="s2">&quot;in method &#39;Band_SetNoDataValue&#39;, argument 2 of type &#39;double&#39;&quot;</span>
<a id="__codelineno-0-2858" name="__codelineno-0-2858"></a>                <span class="p">):</span>
<a id="__codelineno-0-2859" name="__codelineno-0-2859"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_set_no_data_value_backend</span><span class="p">(</span>
<a id="__codelineno-0-2860" name="__codelineno-0-2860"></a>                        <span class="n">band</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">(</span><span class="n">no_data_value</span><span class="p">[</span><span class="n">band</span><span class="p">])</span>
<a id="__codelineno-0-2861" name="__codelineno-0-2861"></a>                    <span class="p">)</span>
<a id="__codelineno-0-2862" name="__codelineno-0-2862"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2863" name="__codelineno-0-2863"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_set_no_data_value_backend</span><span class="p">(</span><span class="n">band</span><span class="p">,</span> <span class="n">DEFAULT_NO_DATA_VALUE</span><span class="p">)</span>
<a id="__codelineno-0-2864" name="__codelineno-0-2864"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-2865" name="__codelineno-0-2865"></a>                        <span class="s2">&quot;the type of the given no_data_value differs from the dtype of the raster&quot;</span>
<a id="__codelineno-0-2866" name="__codelineno-0-2866"></a>                        <span class="sa">f</span><span class="s2">&quot;no_data_value now is set to </span><span class="si">{</span><span class="n">DEFAULT_NO_DATA_VALUE</span><span class="si">}</span><span class="s2"> in the raster&quot;</span>
<a id="__codelineno-0-2867" name="__codelineno-0-2867"></a>                    <span class="p">)</span>
<a id="__codelineno-0-2868" name="__codelineno-0-2868"></a>
<a id="__codelineno-0-2869" name="__codelineno-0-2869"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_calculate_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
<a id="__codelineno-0-2870" name="__codelineno-0-2870"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate bounding box.&quot;&quot;&quot;</span>
<a id="__codelineno-0-2871" name="__codelineno-0-2871"></a>        <span class="n">xmin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">top_left_corner</span>
<a id="__codelineno-0-2872" name="__codelineno-0-2872"></a>        <span class="n">ymin</span> <span class="o">=</span> <span class="n">ymax</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_size</span>
<a id="__codelineno-0-2873" name="__codelineno-0-2873"></a>        <span class="n">xmax</span> <span class="o">=</span> <span class="n">xmin</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_size</span>
<a id="__codelineno-0-2874" name="__codelineno-0-2874"></a>        <span class="k">return</span> <span class="p">[</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">]</span>
<a id="__codelineno-0-2875" name="__codelineno-0-2875"></a>
<a id="__codelineno-0-2876" name="__codelineno-0-2876"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_calculate_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GeoDataFrame</span><span class="p">:</span>
<a id="__codelineno-0-2877" name="__codelineno-0-2877"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the bbox as a geodataframe with a polygon geometry.&quot;&quot;&quot;</span>
<a id="__codelineno-0-2878" name="__codelineno-0-2878"></a>        <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_bbox</span><span class="p">()</span>
<a id="__codelineno-0-2879" name="__codelineno-0-2879"></a>        <span class="n">coords</span> <span class="o">=</span> <span class="p">[(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">),</span> <span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">),</span> <span class="p">(</span><span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">),</span> <span class="p">(</span><span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">)]</span>
<a id="__codelineno-0-2880" name="__codelineno-0-2880"></a>        <span class="n">poly</span> <span class="o">=</span> <span class="n">FeatureCollection</span><span class="o">.</span><span class="n">create_polygon</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
<a id="__codelineno-0-2881" name="__codelineno-0-2881"></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">geometry</span><span class="o">=</span><span class="p">[</span><span class="n">poly</span><span class="p">])</span>
<a id="__codelineno-0-2882" name="__codelineno-0-2882"></a>        <span class="n">gdf</span><span class="o">.</span><span class="n">set_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">epsg</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-2883" name="__codelineno-0-2883"></a>        <span class="k">return</span> <span class="n">gdf</span>
<a id="__codelineno-0-2884" name="__codelineno-0-2884"></a>
<a id="__codelineno-0-2885" name="__codelineno-0-2885"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_set_no_data_value_backend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">band_i</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">no_data_value</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<a id="__codelineno-0-2886" name="__codelineno-0-2886"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-2887" name="__codelineno-0-2887"></a><span class="sd">            - band_i starts from 0 to the number of bands-1.</span>
<a id="__codelineno-0-2888" name="__codelineno-0-2888"></a>
<a id="__codelineno-0-2889" name="__codelineno-0-2889"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2890" name="__codelineno-0-2890"></a><span class="sd">            band_i:</span>
<a id="__codelineno-0-2891" name="__codelineno-0-2891"></a><span class="sd">                Band index, starts from 0.</span>
<a id="__codelineno-0-2892" name="__codelineno-0-2892"></a><span class="sd">            no_data_value:</span>
<a id="__codelineno-0-2893" name="__codelineno-0-2893"></a><span class="sd">                Numerical value.</span>
<a id="__codelineno-0-2894" name="__codelineno-0-2894"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2895" name="__codelineno-0-2895"></a>        <span class="c1"># check if the dtype of the no_data_value complies with the dtype of the raster itself.</span>
<a id="__codelineno-0-2896" name="__codelineno-0-2896"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_change_no_data_value_attr</span><span class="p">(</span><span class="n">band_i</span><span class="p">,</span> <span class="n">no_data_value</span><span class="p">)</span>
<a id="__codelineno-0-2897" name="__codelineno-0-2897"></a>        <span class="c1"># initialize the band with the nodata value instead of 0</span>
<a id="__codelineno-0-2898" name="__codelineno-0-2898"></a>        <span class="c1"># the no_data_value may have changed inside the _change_no_data_value_attr method to float64, so redefine it.</span>
<a id="__codelineno-0-2899" name="__codelineno-0-2899"></a>        <span class="n">no_data_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="n">band_i</span><span class="p">]</span>
<a id="__codelineno-0-2900" name="__codelineno-0-2900"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-2901" name="__codelineno-0-2901"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">band_i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">Fill</span><span class="p">(</span><span class="n">no_data_value</span><span class="p">)</span>
<a id="__codelineno-0-2902" name="__codelineno-0-2902"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-2903" name="__codelineno-0-2903"></a>            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="fm">__contains__</span><span class="p">(</span><span class="s2">&quot; argument 2 of type &#39;double&#39;&quot;</span><span class="p">):</span>
<a id="__codelineno-0-2904" name="__codelineno-0-2904"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">band_i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">Fill</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">(</span><span class="n">no_data_value</span><span class="p">))</span>
<a id="__codelineno-0-2905" name="__codelineno-0-2905"></a>            <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="fm">__contains__</span><span class="p">(</span>
<a id="__codelineno-0-2906" name="__codelineno-0-2906"></a>                    <span class="s2">&quot;Attempt to write to read only dataset in GDALRasterBand::Fill().&quot;</span>
<a id="__codelineno-0-2907" name="__codelineno-0-2907"></a>            <span class="p">)</span> <span class="ow">or</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="fm">__contains__</span><span class="p">(</span><span class="s2">&quot;attempt to write to dataset opened in read-only mode.&quot;</span><span class="p">):</span>
<a id="__codelineno-0-2908" name="__codelineno-0-2908"></a>                <span class="k">raise</span> <span class="n">ReadOnlyError</span><span class="p">(</span>
<a id="__codelineno-0-2909" name="__codelineno-0-2909"></a>                    <span class="s2">&quot;The Dataset is open with a read only, please read the raster using update access mode&quot;</span>
<a id="__codelineno-0-2910" name="__codelineno-0-2910"></a>                <span class="p">)</span>
<a id="__codelineno-0-2911" name="__codelineno-0-2911"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2912" name="__codelineno-0-2912"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-2913" name="__codelineno-0-2913"></a>                    <span class="sa">f</span><span class="s2">&quot;Failed to fill the band </span><span class="si">{</span><span class="n">band_i</span><span class="si">}</span><span class="s2"> with value: </span><span class="si">{</span><span class="n">no_data_value</span><span class="si">}</span><span class="s2">, because of </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-2914" name="__codelineno-0-2914"></a>                <span class="p">)</span>
<a id="__codelineno-0-2915" name="__codelineno-0-2915"></a>        <span class="c1"># update the no_data_value in the Dataset object</span>
<a id="__codelineno-0-2916" name="__codelineno-0-2916"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="n">band_i</span><span class="p">]</span> <span class="o">=</span> <span class="n">no_data_value</span>
<a id="__codelineno-0-2917" name="__codelineno-0-2917"></a>
<a id="__codelineno-0-2918" name="__codelineno-0-2918"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_change_no_data_value_attr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">no_data_value</span><span class="p">):</span>
<a id="__codelineno-0-2919" name="__codelineno-0-2919"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the no_data_value attribute.</span>
<a id="__codelineno-0-2920" name="__codelineno-0-2920"></a>
<a id="__codelineno-0-2921" name="__codelineno-0-2921"></a><span class="sd">            - Change only the no_data_value attribute in the gdal Dataset object.</span>
<a id="__codelineno-0-2922" name="__codelineno-0-2922"></a><span class="sd">            - Change the no_data_value in the Dataset object for the given band index.</span>
<a id="__codelineno-0-2923" name="__codelineno-0-2923"></a><span class="sd">            - The corresponding value in the array will not be changed.</span>
<a id="__codelineno-0-2924" name="__codelineno-0-2924"></a>
<a id="__codelineno-0-2925" name="__codelineno-0-2925"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2926" name="__codelineno-0-2926"></a><span class="sd">            band (int):</span>
<a id="__codelineno-0-2927" name="__codelineno-0-2927"></a><span class="sd">                Band index, starts from 0.</span>
<a id="__codelineno-0-2928" name="__codelineno-0-2928"></a><span class="sd">            no_data_value (Any):</span>
<a id="__codelineno-0-2929" name="__codelineno-0-2929"></a><span class="sd">                No data value.</span>
<a id="__codelineno-0-2930" name="__codelineno-0-2930"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2931" name="__codelineno-0-2931"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-2932" name="__codelineno-0-2932"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">band</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">SetNoDataValue</span><span class="p">(</span><span class="n">no_data_value</span><span class="p">)</span>
<a id="__codelineno-0-2933" name="__codelineno-0-2933"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-2934" name="__codelineno-0-2934"></a>            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="fm">__contains__</span><span class="p">(</span>
<a id="__codelineno-0-2935" name="__codelineno-0-2935"></a>                <span class="s2">&quot;Attempt to write to read only dataset in GDALRasterBand::Fill().&quot;</span>
<a id="__codelineno-0-2936" name="__codelineno-0-2936"></a>            <span class="p">):</span>
<a id="__codelineno-0-2937" name="__codelineno-0-2937"></a>                <span class="k">raise</span> <span class="n">ReadOnlyError</span><span class="p">(</span>
<a id="__codelineno-0-2938" name="__codelineno-0-2938"></a>                    <span class="s2">&quot;The Dataset is open with a read only, please read the raster using update &quot;</span>
<a id="__codelineno-0-2939" name="__codelineno-0-2939"></a>                    <span class="s2">&quot;access mode&quot;</span>
<a id="__codelineno-0-2940" name="__codelineno-0-2940"></a>                <span class="p">)</span>
<a id="__codelineno-0-2941" name="__codelineno-0-2941"></a>            <span class="c1"># TypeError</span>
<a id="__codelineno-0-2942" name="__codelineno-0-2942"></a>            <span class="k">elif</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span> <span class="o">==</span> <span class="p">(</span>
<a id="__codelineno-0-2943" name="__codelineno-0-2943"></a>                <span class="s2">&quot;in method &#39;Band_SetNoDataValue&#39;, argument 2 of type &#39;double&#39;&quot;</span><span class="p">,</span>
<a id="__codelineno-0-2944" name="__codelineno-0-2944"></a>            <span class="p">):</span>
<a id="__codelineno-0-2945" name="__codelineno-0-2945"></a>                <span class="n">no_data_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">(</span><span class="n">no_data_value</span><span class="p">)</span>
<a id="__codelineno-0-2946" name="__codelineno-0-2946"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">band</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">SetNoDataValue</span><span class="p">(</span><span class="n">no_data_value</span><span class="p">)</span>
<a id="__codelineno-0-2947" name="__codelineno-0-2947"></a>
<a id="__codelineno-0-2948" name="__codelineno-0-2948"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_no_data_value</span><span class="p">[</span><span class="n">band</span><span class="p">]</span> <span class="o">=</span> <span class="n">no_data_value</span>
<a id="__codelineno-0-2949" name="__codelineno-0-2949"></a>
<a id="__codelineno-0-2950" name="__codelineno-0-2950"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">change_no_data_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">old_value</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-2951" name="__codelineno-0-2951"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Change No Data Value.</span>
<a id="__codelineno-0-2952" name="__codelineno-0-2952"></a>
<a id="__codelineno-0-2953" name="__codelineno-0-2953"></a><span class="sd">            - Set the no data value in all raster bands.</span>
<a id="__codelineno-0-2954" name="__codelineno-0-2954"></a><span class="sd">            - Fill the whole raster with the no_data_value.</span>
<a id="__codelineno-0-2955" name="__codelineno-0-2955"></a><span class="sd">            - Change the no_data_value in the array in all bands.</span>
<a id="__codelineno-0-2956" name="__codelineno-0-2956"></a>
<a id="__codelineno-0-2957" name="__codelineno-0-2957"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-2958" name="__codelineno-0-2958"></a><span class="sd">            new_value (numeric):</span>
<a id="__codelineno-0-2959" name="__codelineno-0-2959"></a><span class="sd">                No data value to set in the raster bands.</span>
<a id="__codelineno-0-2960" name="__codelineno-0-2960"></a><span class="sd">            old_value (numeric):</span>
<a id="__codelineno-0-2961" name="__codelineno-0-2961"></a><span class="sd">                Old no data value that is already in the raster bands.</span>
<a id="__codelineno-0-2962" name="__codelineno-0-2962"></a>
<a id="__codelineno-0-2963" name="__codelineno-0-2963"></a><span class="sd">        Warning:</span>
<a id="__codelineno-0-2964" name="__codelineno-0-2964"></a><span class="sd">            The `change_no_data_value` method creates a new dataset in memory in order to change the `no_data_value` in the raster bands.</span>
<a id="__codelineno-0-2965" name="__codelineno-0-2965"></a>
<a id="__codelineno-0-2966" name="__codelineno-0-2966"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-2967" name="__codelineno-0-2967"></a><span class="sd">            - Create a Dataset (4 bands, 10 rows, 10 columns) at lon/lat (0, 0):</span>
<a id="__codelineno-0-2968" name="__codelineno-0-2968"></a>
<a id="__codelineno-0-2969" name="__codelineno-0-2969"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-2970" name="__codelineno-0-2970"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create(</span>
<a id="__codelineno-0-2971" name="__codelineno-0-2971"></a><span class="sd">              ...     cell_size=0.05, rows=3, columns=3, bands=1, top_left_corner=(0, 0),dtype=&quot;float32&quot;,</span>
<a id="__codelineno-0-2972" name="__codelineno-0-2972"></a><span class="sd">              ...     epsg=4326, no_data_value=-9</span>
<a id="__codelineno-0-2973" name="__codelineno-0-2973"></a><span class="sd">              ... )</span>
<a id="__codelineno-0-2974" name="__codelineno-0-2974"></a><span class="sd">              &gt;&gt;&gt; arr = dataset.read_array()</span>
<a id="__codelineno-0-2975" name="__codelineno-0-2975"></a><span class="sd">              &gt;&gt;&gt; print(arr)</span>
<a id="__codelineno-0-2976" name="__codelineno-0-2976"></a><span class="sd">              [[-9. -9. -9.]</span>
<a id="__codelineno-0-2977" name="__codelineno-0-2977"></a><span class="sd">               [-9. -9. -9.]</span>
<a id="__codelineno-0-2978" name="__codelineno-0-2978"></a><span class="sd">               [-9. -9. -9.]]</span>
<a id="__codelineno-0-2979" name="__codelineno-0-2979"></a><span class="sd">              &gt;&gt;&gt; print(dataset.no_data_value) # doctest: +SKIP</span>
<a id="__codelineno-0-2980" name="__codelineno-0-2980"></a><span class="sd">              [-9.0]</span>
<a id="__codelineno-0-2981" name="__codelineno-0-2981"></a>
<a id="__codelineno-0-2982" name="__codelineno-0-2982"></a><span class="sd">              ```</span>
<a id="__codelineno-0-2983" name="__codelineno-0-2983"></a>
<a id="__codelineno-0-2984" name="__codelineno-0-2984"></a><span class="sd">            - The dataset is full of the no_data_value. Now change it using `change_no_data_value`:</span>
<a id="__codelineno-0-2985" name="__codelineno-0-2985"></a>
<a id="__codelineno-0-2986" name="__codelineno-0-2986"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-2987" name="__codelineno-0-2987"></a><span class="sd">              &gt;&gt;&gt; new_dataset = dataset.change_no_data_value(-10, -9)</span>
<a id="__codelineno-0-2988" name="__codelineno-0-2988"></a><span class="sd">              &gt;&gt;&gt; arr = new_dataset.read_array()</span>
<a id="__codelineno-0-2989" name="__codelineno-0-2989"></a><span class="sd">              &gt;&gt;&gt; print(arr)</span>
<a id="__codelineno-0-2990" name="__codelineno-0-2990"></a><span class="sd">              [[-10. -10. -10.]</span>
<a id="__codelineno-0-2991" name="__codelineno-0-2991"></a><span class="sd">               [-10. -10. -10.]</span>
<a id="__codelineno-0-2992" name="__codelineno-0-2992"></a><span class="sd">               [-10. -10. -10.]]</span>
<a id="__codelineno-0-2993" name="__codelineno-0-2993"></a><span class="sd">              &gt;&gt;&gt; print(new_dataset.no_data_value) # doctest: +SKIP</span>
<a id="__codelineno-0-2994" name="__codelineno-0-2994"></a><span class="sd">              [-10.0]</span>
<a id="__codelineno-0-2995" name="__codelineno-0-2995"></a>
<a id="__codelineno-0-2996" name="__codelineno-0-2996"></a><span class="sd">              ```</span>
<a id="__codelineno-0-2997" name="__codelineno-0-2997"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-2998" name="__codelineno-0-2998"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">new_value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-2999" name="__codelineno-0-2999"></a>            <span class="n">new_value</span> <span class="o">=</span> <span class="p">[</span><span class="n">new_value</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span>
<a id="__codelineno-0-3000" name="__codelineno-0-3000"></a>
<a id="__codelineno-0-3001" name="__codelineno-0-3001"></a>        <span class="k">if</span> <span class="n">old_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">old_value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-3002" name="__codelineno-0-3002"></a>            <span class="n">old_value</span> <span class="o">=</span> <span class="p">[</span><span class="n">old_value</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span>
<a id="__codelineno-0-3003" name="__codelineno-0-3003"></a>
<a id="__codelineno-0-3004" name="__codelineno-0-3004"></a>        <span class="n">dst</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="s2">&quot;MEM&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">CreateCopy</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-3005" name="__codelineno-0-3005"></a>        <span class="c1"># create a new dataset</span>
<a id="__codelineno-0-3006" name="__codelineno-0-3006"></a>        <span class="n">new_dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="s2">&quot;write&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3007" name="__codelineno-0-3007"></a>        <span class="c1"># the new_value could change inside the _set_no_data_value method before it is used to set the no_data_value</span>
<a id="__codelineno-0-3008" name="__codelineno-0-3008"></a>        <span class="c1"># attribute in the gdal object/pyramids object and to fill the band.</span>
<a id="__codelineno-0-3009" name="__codelineno-0-3009"></a>        <span class="n">new_dataset</span><span class="o">.</span><span class="n">_set_no_data_value</span><span class="p">(</span><span class="n">new_value</span><span class="p">)</span>
<a id="__codelineno-0-3010" name="__codelineno-0-3010"></a>        <span class="c1"># now we have to use the no_data_value value in the no_data_value attribute in the Dataset object as it is</span>
<a id="__codelineno-0-3011" name="__codelineno-0-3011"></a>        <span class="c1"># updated.</span>
<a id="__codelineno-0-3012" name="__codelineno-0-3012"></a>        <span class="n">new_value</span> <span class="o">=</span> <span class="n">new_dataset</span><span class="o">.</span><span class="n">no_data_value</span>
<a id="__codelineno-0-3013" name="__codelineno-0-3013"></a>        <span class="k">for</span> <span class="n">band</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-3014" name="__codelineno-0-3014"></a>            <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-3015" name="__codelineno-0-3015"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-3016" name="__codelineno-0-3016"></a>                <span class="k">if</span> <span class="n">old_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3017" name="__codelineno-0-3017"></a>                    <span class="n">arr</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">old_value</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)]</span> <span class="o">=</span> <span class="n">new_value</span><span class="p">[</span><span class="n">band</span><span class="p">]</span>
<a id="__codelineno-0-3018" name="__codelineno-0-3018"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3019" name="__codelineno-0-3019"></a>                    <span class="n">arr</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">arr</span><span class="p">)]</span> <span class="o">=</span> <span class="n">new_value</span><span class="p">[</span><span class="n">band</span><span class="p">]</span>
<a id="__codelineno-0-3020" name="__codelineno-0-3020"></a>            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
<a id="__codelineno-0-3021" name="__codelineno-0-3021"></a>                <span class="k">raise</span> <span class="n">NoDataValueError</span><span class="p">(</span>
<a id="__codelineno-0-3022" name="__codelineno-0-3022"></a>                    <span class="sa">f</span><span class="s2">&quot;The dtype of the given no_data_value: </span><span class="si">{</span><span class="n">new_value</span><span class="p">[</span><span class="n">band</span><span class="p">]</span><span class="si">}</span><span class="s2"> differs from the dtype of the &quot;</span>
<a id="__codelineno-0-3023" name="__codelineno-0-3023"></a>                    <span class="sa">f</span><span class="s2">&quot;band: </span><span class="si">{</span><span class="n">gdal_to_numpy_dtype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gdal_dtype</span><span class="p">[</span><span class="n">band</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-3024" name="__codelineno-0-3024"></a>                <span class="p">)</span>
<a id="__codelineno-0-3025" name="__codelineno-0-3025"></a>            <span class="n">new_dataset</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">band</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<a id="__codelineno-0-3026" name="__codelineno-0-3026"></a>        <span class="k">return</span> <span class="n">new_dataset</span>
<a id="__codelineno-0-3027" name="__codelineno-0-3027"></a>
<a id="__codelineno-0-3028" name="__codelineno-0-3028"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_cell_coords</span><span class="p">(</span>
<a id="__codelineno-0-3029" name="__codelineno-0-3029"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">mask</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-3030" name="__codelineno-0-3030"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-3031" name="__codelineno-0-3031"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get coordinates for the center/corner of cells inside the dataset domain.</span>
<a id="__codelineno-0-3032" name="__codelineno-0-3032"></a>
<a id="__codelineno-0-3033" name="__codelineno-0-3033"></a><span class="sd">        Returns the coordinates of the cell centers inside the domain (only the cells that</span>
<a id="__codelineno-0-3034" name="__codelineno-0-3034"></a><span class="sd">        do not have nodata value)</span>
<a id="__codelineno-0-3035" name="__codelineno-0-3035"></a>
<a id="__codelineno-0-3036" name="__codelineno-0-3036"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-3037" name="__codelineno-0-3037"></a><span class="sd">            location (str):</span>
<a id="__codelineno-0-3038" name="__codelineno-0-3038"></a><span class="sd">                Location of the coordinates. Use `center` for the center of a cell, `corner` for the corner of the</span>
<a id="__codelineno-0-3039" name="__codelineno-0-3039"></a><span class="sd">                cell (top-left corner).</span>
<a id="__codelineno-0-3040" name="__codelineno-0-3040"></a><span class="sd">            mask (bool):</span>
<a id="__codelineno-0-3041" name="__codelineno-0-3041"></a><span class="sd">                True to exclude the cells out of the domain. Default is False.</span>
<a id="__codelineno-0-3042" name="__codelineno-0-3042"></a>
<a id="__codelineno-0-3043" name="__codelineno-0-3043"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-3044" name="__codelineno-0-3044"></a><span class="sd">            np.ndarray:</span>
<a id="__codelineno-0-3045" name="__codelineno-0-3045"></a><span class="sd">                Array with a list of the coordinates to be interpolated, without the NaN.</span>
<a id="__codelineno-0-3046" name="__codelineno-0-3046"></a><span class="sd">            np.ndarray:</span>
<a id="__codelineno-0-3047" name="__codelineno-0-3047"></a><span class="sd">                Array with all the centers of cells in the domain of the DEM.</span>
<a id="__codelineno-0-3048" name="__codelineno-0-3048"></a>
<a id="__codelineno-0-3049" name="__codelineno-0-3049"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-3050" name="__codelineno-0-3050"></a><span class="sd">            - Create `Dataset` consists of 1 bands, 3 rows, 3 columns, at the point lon/lat (0, 0).</span>
<a id="__codelineno-0-3051" name="__codelineno-0-3051"></a>
<a id="__codelineno-0-3052" name="__codelineno-0-3052"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3053" name="__codelineno-0-3053"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-3054" name="__codelineno-0-3054"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1,3, size=(3, 3))</span>
<a id="__codelineno-0-3055" name="__codelineno-0-3055"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-3056" name="__codelineno-0-3056"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-3057" name="__codelineno-0-3057"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-3058" name="__codelineno-0-3058"></a>
<a id="__codelineno-0-3059" name="__codelineno-0-3059"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3060" name="__codelineno-0-3060"></a>
<a id="__codelineno-0-3061" name="__codelineno-0-3061"></a><span class="sd">            - Get the coordinates of the center of cells inside the domain.</span>
<a id="__codelineno-0-3062" name="__codelineno-0-3062"></a>
<a id="__codelineno-0-3063" name="__codelineno-0-3063"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3064" name="__codelineno-0-3064"></a><span class="sd">              &gt;&gt;&gt; coords = dataset.get_cell_coords()</span>
<a id="__codelineno-0-3065" name="__codelineno-0-3065"></a><span class="sd">              &gt;&gt;&gt; print(coords)</span>
<a id="__codelineno-0-3066" name="__codelineno-0-3066"></a><span class="sd">              [[ 0.025 -0.025]</span>
<a id="__codelineno-0-3067" name="__codelineno-0-3067"></a><span class="sd">               [ 0.075 -0.025]</span>
<a id="__codelineno-0-3068" name="__codelineno-0-3068"></a><span class="sd">               [ 0.125 -0.025]</span>
<a id="__codelineno-0-3069" name="__codelineno-0-3069"></a><span class="sd">               [ 0.025 -0.075]</span>
<a id="__codelineno-0-3070" name="__codelineno-0-3070"></a><span class="sd">               [ 0.075 -0.075]</span>
<a id="__codelineno-0-3071" name="__codelineno-0-3071"></a><span class="sd">               [ 0.125 -0.075]</span>
<a id="__codelineno-0-3072" name="__codelineno-0-3072"></a><span class="sd">               [ 0.025 -0.125]</span>
<a id="__codelineno-0-3073" name="__codelineno-0-3073"></a><span class="sd">               [ 0.075 -0.125]</span>
<a id="__codelineno-0-3074" name="__codelineno-0-3074"></a><span class="sd">               [ 0.125 -0.125]]</span>
<a id="__codelineno-0-3075" name="__codelineno-0-3075"></a>
<a id="__codelineno-0-3076" name="__codelineno-0-3076"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3077" name="__codelineno-0-3077"></a>
<a id="__codelineno-0-3078" name="__codelineno-0-3078"></a><span class="sd">            - Get the coordinates of the top left corner of cells inside the domain.</span>
<a id="__codelineno-0-3079" name="__codelineno-0-3079"></a>
<a id="__codelineno-0-3080" name="__codelineno-0-3080"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3081" name="__codelineno-0-3081"></a><span class="sd">              &gt;&gt;&gt; coords = dataset.get_cell_coords(location=&quot;corner&quot;)</span>
<a id="__codelineno-0-3082" name="__codelineno-0-3082"></a><span class="sd">              &gt;&gt;&gt; print(coords)</span>
<a id="__codelineno-0-3083" name="__codelineno-0-3083"></a><span class="sd">              [[ 0.    0.  ]</span>
<a id="__codelineno-0-3084" name="__codelineno-0-3084"></a><span class="sd">               [ 0.05  0.  ]</span>
<a id="__codelineno-0-3085" name="__codelineno-0-3085"></a><span class="sd">               [ 0.1   0.  ]</span>
<a id="__codelineno-0-3086" name="__codelineno-0-3086"></a><span class="sd">               [ 0.   -0.05]</span>
<a id="__codelineno-0-3087" name="__codelineno-0-3087"></a><span class="sd">               [ 0.05 -0.05]</span>
<a id="__codelineno-0-3088" name="__codelineno-0-3088"></a><span class="sd">               [ 0.1  -0.05]</span>
<a id="__codelineno-0-3089" name="__codelineno-0-3089"></a><span class="sd">               [ 0.   -0.1 ]</span>
<a id="__codelineno-0-3090" name="__codelineno-0-3090"></a><span class="sd">               [ 0.05 -0.1 ]</span>
<a id="__codelineno-0-3091" name="__codelineno-0-3091"></a><span class="sd">               [ 0.1  -0.1 ]]</span>
<a id="__codelineno-0-3092" name="__codelineno-0-3092"></a>
<a id="__codelineno-0-3093" name="__codelineno-0-3093"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3094" name="__codelineno-0-3094"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-3095" name="__codelineno-0-3095"></a>        <span class="c1"># check the location parameter</span>
<a id="__codelineno-0-3096" name="__codelineno-0-3096"></a>        <span class="n">location</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
<a id="__codelineno-0-3097" name="__codelineno-0-3097"></a>        <span class="k">if</span> <span class="n">location</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="s2">&quot;corner&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-3098" name="__codelineno-0-3098"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-3099" name="__codelineno-0-3099"></a>                <span class="s2">&quot;The location parameter can have one of these values: &#39;center&#39;, &#39;corner&#39;, &quot;</span>
<a id="__codelineno-0-3100" name="__codelineno-0-3100"></a>                <span class="sa">f</span><span class="s2">&quot;but the value: </span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s2"> is given.&quot;</span>
<a id="__codelineno-0-3101" name="__codelineno-0-3101"></a>            <span class="p">)</span>
<a id="__codelineno-0-3102" name="__codelineno-0-3102"></a>
<a id="__codelineno-0-3103" name="__codelineno-0-3103"></a>        <span class="k">if</span> <span class="n">location</span> <span class="o">==</span> <span class="s2">&quot;center&quot;</span><span class="p">:</span>
<a id="__codelineno-0-3104" name="__codelineno-0-3104"></a>            <span class="c1"># Adding 0.5*cell size to get the center</span>
<a id="__codelineno-0-3105" name="__codelineno-0-3105"></a>            <span class="n">add_value</span> <span class="o">=</span> <span class="mf">0.5</span>
<a id="__codelineno-0-3106" name="__codelineno-0-3106"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3107" name="__codelineno-0-3107"></a>            <span class="n">add_value</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-3108" name="__codelineno-0-3108"></a>        <span class="c1"># Getting data for the whole grid</span>
<a id="__codelineno-0-3109" name="__codelineno-0-3109"></a>        <span class="p">(</span>
<a id="__codelineno-0-3110" name="__codelineno-0-3110"></a>            <span class="n">x_init</span><span class="p">,</span>
<a id="__codelineno-0-3111" name="__codelineno-0-3111"></a>            <span class="n">cell_size_x</span><span class="p">,</span>
<a id="__codelineno-0-3112" name="__codelineno-0-3112"></a>            <span class="n">xy_span</span><span class="p">,</span>
<a id="__codelineno-0-3113" name="__codelineno-0-3113"></a>            <span class="n">y_init</span><span class="p">,</span>
<a id="__codelineno-0-3114" name="__codelineno-0-3114"></a>            <span class="n">yy_span</span><span class="p">,</span>
<a id="__codelineno-0-3115" name="__codelineno-0-3115"></a>            <span class="n">cell_size_y</span><span class="p">,</span>
<a id="__codelineno-0-3116" name="__codelineno-0-3116"></a>        <span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span>
<a id="__codelineno-0-3117" name="__codelineno-0-3117"></a>        <span class="k">if</span> <span class="n">cell_size_x</span> <span class="o">!=</span> <span class="n">cell_size_y</span><span class="p">:</span>
<a id="__codelineno-0-3118" name="__codelineno-0-3118"></a>            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">cell_size_x</span><span class="p">)</span> <span class="o">!=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">cell_size_y</span><span class="p">):</span>
<a id="__codelineno-0-3119" name="__codelineno-0-3119"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-3120" name="__codelineno-0-3120"></a>                    <span class="sa">f</span><span class="s2">&quot;The given raster does not have a square cells, the cell size is </span><span class="si">{</span><span class="n">cell_size_x</span><span class="si">}</span><span class="s2">*</span><span class="si">{</span><span class="n">cell_size_y</span><span class="si">}</span><span class="s2"> &quot;</span>
<a id="__codelineno-0-3121" name="__codelineno-0-3121"></a>                <span class="p">)</span>
<a id="__codelineno-0-3122" name="__codelineno-0-3122"></a>
<a id="__codelineno-0-3123" name="__codelineno-0-3123"></a>        <span class="c1"># data in the array</span>
<a id="__codelineno-0-3124" name="__codelineno-0-3124"></a>        <span class="n">no_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<a id="__codelineno-0-3125" name="__codelineno-0-3125"></a>        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-3126" name="__codelineno-0-3126"></a>        <span class="k">if</span> <span class="n">mask</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">no_val</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
<a id="__codelineno-0-3127" name="__codelineno-0-3127"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-3128" name="__codelineno-0-3128"></a>                <span class="s2">&quot;The no data value does not exist in the band, so all the cells will be considered, and the &quot;</span>
<a id="__codelineno-0-3129" name="__codelineno-0-3129"></a>                <span class="s2">&quot;mask will not be considered.&quot;</span>
<a id="__codelineno-0-3130" name="__codelineno-0-3130"></a>            <span class="p">)</span>
<a id="__codelineno-0-3131" name="__codelineno-0-3131"></a>
<a id="__codelineno-0-3132" name="__codelineno-0-3132"></a>        <span class="k">if</span> <span class="n">mask</span><span class="p">:</span>
<a id="__codelineno-0-3133" name="__codelineno-0-3133"></a>            <span class="n">mask</span> <span class="o">=</span> <span class="p">[</span><span class="n">no_val</span><span class="p">]</span>
<a id="__codelineno-0-3134" name="__codelineno-0-3134"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3135" name="__codelineno-0-3135"></a>            <span class="n">mask</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-3136" name="__codelineno-0-3136"></a>        <span class="n">indices</span> <span class="o">=</span> <span class="n">get_indices2</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
<a id="__codelineno-0-3137" name="__codelineno-0-3137"></a>
<a id="__codelineno-0-3138" name="__codelineno-0-3138"></a>        <span class="c1"># exclude the no_data_values cells.</span>
<a id="__codelineno-0-3139" name="__codelineno-0-3139"></a>        <span class="n">f1</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">]</span>
<a id="__codelineno-0-3140" name="__codelineno-0-3140"></a>        <span class="n">f2</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">]</span>
<a id="__codelineno-0-3141" name="__codelineno-0-3141"></a>        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">x_init</span> <span class="o">+</span> <span class="n">cell_size_x</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">add_value</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">f2</span><span class="p">]</span>
<a id="__codelineno-0-3142" name="__codelineno-0-3142"></a>        <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">y_init</span> <span class="o">+</span> <span class="n">cell_size_y</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">add_value</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">f1</span><span class="p">]</span>
<a id="__codelineno-0-3143" name="__codelineno-0-3143"></a>        <span class="n">coords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)))</span>
<a id="__codelineno-0-3144" name="__codelineno-0-3144"></a>
<a id="__codelineno-0-3145" name="__codelineno-0-3145"></a>        <span class="k">return</span> <span class="n">coords</span>
<a id="__codelineno-0-3146" name="__codelineno-0-3146"></a>
<a id="__codelineno-0-3147" name="__codelineno-0-3147"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_cell_polygons</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GeoDataFrame</span><span class="p">:</span>
<a id="__codelineno-0-3148" name="__codelineno-0-3148"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a polygon shapely geometry for the raster cells.</span>
<a id="__codelineno-0-3149" name="__codelineno-0-3149"></a>
<a id="__codelineno-0-3150" name="__codelineno-0-3150"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-3151" name="__codelineno-0-3151"></a><span class="sd">            mask (bool):</span>
<a id="__codelineno-0-3152" name="__codelineno-0-3152"></a><span class="sd">                True to get the polygons of the cells inside the domain.</span>
<a id="__codelineno-0-3153" name="__codelineno-0-3153"></a>
<a id="__codelineno-0-3154" name="__codelineno-0-3154"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-3155" name="__codelineno-0-3155"></a><span class="sd">            GeoDataFrame:</span>
<a id="__codelineno-0-3156" name="__codelineno-0-3156"></a><span class="sd">                With two columns, geometry, and id.</span>
<a id="__codelineno-0-3157" name="__codelineno-0-3157"></a>
<a id="__codelineno-0-3158" name="__codelineno-0-3158"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-3159" name="__codelineno-0-3159"></a><span class="sd">            - Create `Dataset` consists of 1 band, 3 rows, 3 columns, at the point lon/lat (0, 0).</span>
<a id="__codelineno-0-3160" name="__codelineno-0-3160"></a>
<a id="__codelineno-0-3161" name="__codelineno-0-3161"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3162" name="__codelineno-0-3162"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-3163" name="__codelineno-0-3163"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1,3, size=(3, 3))</span>
<a id="__codelineno-0-3164" name="__codelineno-0-3164"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-3165" name="__codelineno-0-3165"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-3166" name="__codelineno-0-3166"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-3167" name="__codelineno-0-3167"></a>
<a id="__codelineno-0-3168" name="__codelineno-0-3168"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3169" name="__codelineno-0-3169"></a>
<a id="__codelineno-0-3170" name="__codelineno-0-3170"></a><span class="sd">            - Get the coordinates of the center of cells inside the domain.</span>
<a id="__codelineno-0-3171" name="__codelineno-0-3171"></a>
<a id="__codelineno-0-3172" name="__codelineno-0-3172"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3173" name="__codelineno-0-3173"></a><span class="sd">              &gt;&gt;&gt; gdf = dataset.get_cell_polygons()</span>
<a id="__codelineno-0-3174" name="__codelineno-0-3174"></a><span class="sd">              &gt;&gt;&gt; print(gdf)</span>
<a id="__codelineno-0-3175" name="__codelineno-0-3175"></a><span class="sd">                                                     geometry  id</span>
<a id="__codelineno-0-3176" name="__codelineno-0-3176"></a><span class="sd">              0  POLYGON ((0 0, 0.05 0, 0.05 -0.05, 0 -0.05, 0 0))   0</span>
<a id="__codelineno-0-3177" name="__codelineno-0-3177"></a><span class="sd">              1  POLYGON ((0.05 0, 0.1 0, 0.1 -0.05, 0.05 -0.05...   1</span>
<a id="__codelineno-0-3178" name="__codelineno-0-3178"></a><span class="sd">              2  POLYGON ((0.1 0, 0.15 0, 0.15 -0.05, 0.1 -0.05...   2</span>
<a id="__codelineno-0-3179" name="__codelineno-0-3179"></a><span class="sd">              3  POLYGON ((0 -0.05, 0.05 -0.05, 0.05 -0.1, 0 -0...   3</span>
<a id="__codelineno-0-3180" name="__codelineno-0-3180"></a><span class="sd">              4  POLYGON ((0.05 -0.05, 0.1 -0.05, 0.1 -0.1, 0.0...   4</span>
<a id="__codelineno-0-3181" name="__codelineno-0-3181"></a><span class="sd">              5  POLYGON ((0.1 -0.05, 0.15 -0.05, 0.15 -0.1, 0....   5</span>
<a id="__codelineno-0-3182" name="__codelineno-0-3182"></a><span class="sd">              6  POLYGON ((0 -0.1, 0.05 -0.1, 0.05 -0.15, 0 -0....   6</span>
<a id="__codelineno-0-3183" name="__codelineno-0-3183"></a><span class="sd">              7  POLYGON ((0.05 -0.1, 0.1 -0.1, 0.1 -0.15, 0.05...   7</span>
<a id="__codelineno-0-3184" name="__codelineno-0-3184"></a><span class="sd">              8  POLYGON ((0.1 -0.1, 0.15 -0.1, 0.15 -0.15, 0.1...   8</span>
<a id="__codelineno-0-3185" name="__codelineno-0-3185"></a><span class="sd">              &gt;&gt;&gt; fig, ax = dataset.plot()</span>
<a id="__codelineno-0-3186" name="__codelineno-0-3186"></a><span class="sd">              &gt;&gt;&gt; gdf.plot(ax=ax, facecolor=&#39;none&#39;, edgecolor=&quot;gray&quot;, linewidth=2)</span>
<a id="__codelineno-0-3187" name="__codelineno-0-3187"></a><span class="sd">              &lt;Axes: &gt;</span>
<a id="__codelineno-0-3188" name="__codelineno-0-3188"></a>
<a id="__codelineno-0-3189" name="__codelineno-0-3189"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3190" name="__codelineno-0-3190"></a>
<a id="__codelineno-0-3191" name="__codelineno-0-3191"></a><span class="sd">        ![get_cell_polygons](./../_images/dataset/get_cell_polygons.png)</span>
<a id="__codelineno-0-3192" name="__codelineno-0-3192"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-3193" name="__codelineno-0-3193"></a>        <span class="n">coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cell_coords</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="s2">&quot;corner&quot;</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
<a id="__codelineno-0-3194" name="__codelineno-0-3194"></a>        <span class="n">cell_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-3195" name="__codelineno-0-3195"></a>        <span class="n">epsg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_epsg</span><span class="p">()</span>
<a id="__codelineno-0-3196" name="__codelineno-0-3196"></a>        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">coords</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">4</span><span class="p">))</span>
<a id="__codelineno-0-3197" name="__codelineno-0-3197"></a>        <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">coords</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">4</span><span class="p">))</span>
<a id="__codelineno-0-3198" name="__codelineno-0-3198"></a>        <span class="c1"># fill the top left corner point</span>
<a id="__codelineno-0-3199" name="__codelineno-0-3199"></a>        <span class="n">x</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-3200" name="__codelineno-0-3200"></a>        <span class="n">y</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-3201" name="__codelineno-0-3201"></a>        <span class="c1"># fill the top right</span>
<a id="__codelineno-0-3202" name="__codelineno-0-3202"></a>        <span class="n">x</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">cell_size</span>
<a id="__codelineno-0-3203" name="__codelineno-0-3203"></a>        <span class="n">y</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-3204" name="__codelineno-0-3204"></a>        <span class="c1"># fill the bottom right</span>
<a id="__codelineno-0-3205" name="__codelineno-0-3205"></a>        <span class="n">x</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">cell_size</span>
<a id="__codelineno-0-3206" name="__codelineno-0-3206"></a>        <span class="n">y</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">cell_size</span>
<a id="__codelineno-0-3207" name="__codelineno-0-3207"></a>
<a id="__codelineno-0-3208" name="__codelineno-0-3208"></a>        <span class="c1"># fill the bottom left</span>
<a id="__codelineno-0-3209" name="__codelineno-0-3209"></a>        <span class="n">x</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-3210" name="__codelineno-0-3210"></a>        <span class="n">y</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">cell_size</span>
<a id="__codelineno-0-3211" name="__codelineno-0-3211"></a>
<a id="__codelineno-0-3212" name="__codelineno-0-3212"></a>        <span class="n">coords_tuples</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">x</span><span class="p">[:,</span> <span class="n">i</span><span class="p">],</span> <span class="n">y</span><span class="p">[:,</span> <span class="n">i</span><span class="p">]))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span>
<a id="__codelineno-0-3213" name="__codelineno-0-3213"></a>        <span class="n">polys_coords</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-3214" name="__codelineno-0-3214"></a>            <span class="p">(</span>
<a id="__codelineno-0-3215" name="__codelineno-0-3215"></a>                <span class="n">coords_tuples</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">],</span>
<a id="__codelineno-0-3216" name="__codelineno-0-3216"></a>                <span class="n">coords_tuples</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">],</span>
<a id="__codelineno-0-3217" name="__codelineno-0-3217"></a>                <span class="n">coords_tuples</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="n">i</span><span class="p">],</span>
<a id="__codelineno-0-3218" name="__codelineno-0-3218"></a>                <span class="n">coords_tuples</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="n">i</span><span class="p">],</span>
<a id="__codelineno-0-3219" name="__codelineno-0-3219"></a>            <span class="p">)</span>
<a id="__codelineno-0-3220" name="__codelineno-0-3220"></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<a id="__codelineno-0-3221" name="__codelineno-0-3221"></a>        <span class="p">]</span>
<a id="__codelineno-0-3222" name="__codelineno-0-3222"></a>        <span class="n">polygons</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">FeatureCollection</span><span class="o">.</span><span class="n">create_polygon</span><span class="p">,</span> <span class="n">polys_coords</span><span class="p">))</span>
<a id="__codelineno-0-3223" name="__codelineno-0-3223"></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">geometry</span><span class="o">=</span><span class="n">polygons</span><span class="p">)</span>
<a id="__codelineno-0-3224" name="__codelineno-0-3224"></a>        <span class="n">gdf</span><span class="o">.</span><span class="n">set_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="n">epsg</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-3225" name="__codelineno-0-3225"></a>        <span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">index</span>
<a id="__codelineno-0-3226" name="__codelineno-0-3226"></a>        <span class="k">return</span> <span class="n">gdf</span>
<a id="__codelineno-0-3227" name="__codelineno-0-3227"></a>
<a id="__codelineno-0-3228" name="__codelineno-0-3228"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_cell_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GeoDataFrame</span><span class="p">:</span>
<a id="__codelineno-0-3229" name="__codelineno-0-3229"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a point shapely geometry for the raster cells center point.</span>
<a id="__codelineno-0-3230" name="__codelineno-0-3230"></a>
<a id="__codelineno-0-3231" name="__codelineno-0-3231"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-3232" name="__codelineno-0-3232"></a><span class="sd">            location (str):</span>
<a id="__codelineno-0-3233" name="__codelineno-0-3233"></a><span class="sd">                Location of the point, [&quot;corner&quot;, &quot;center&quot;]. Default is &quot;center&quot;.</span>
<a id="__codelineno-0-3234" name="__codelineno-0-3234"></a><span class="sd">            mask (bool):</span>
<a id="__codelineno-0-3235" name="__codelineno-0-3235"></a><span class="sd">                True to get the polygons of the cells inside the domain.</span>
<a id="__codelineno-0-3236" name="__codelineno-0-3236"></a>
<a id="__codelineno-0-3237" name="__codelineno-0-3237"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-3238" name="__codelineno-0-3238"></a><span class="sd">            GeoDataFrame:</span>
<a id="__codelineno-0-3239" name="__codelineno-0-3239"></a><span class="sd">                With two columns, geometry, and id.</span>
<a id="__codelineno-0-3240" name="__codelineno-0-3240"></a>
<a id="__codelineno-0-3241" name="__codelineno-0-3241"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-3242" name="__codelineno-0-3242"></a><span class="sd">            - Create `Dataset` consists of 1 band, 3 rows, 3 columns, at the point lon/lat (0, 0).</span>
<a id="__codelineno-0-3243" name="__codelineno-0-3243"></a>
<a id="__codelineno-0-3244" name="__codelineno-0-3244"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3245" name="__codelineno-0-3245"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-3246" name="__codelineno-0-3246"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1,3, size=(3, 3))</span>
<a id="__codelineno-0-3247" name="__codelineno-0-3247"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-3248" name="__codelineno-0-3248"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-3249" name="__codelineno-0-3249"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-3250" name="__codelineno-0-3250"></a>
<a id="__codelineno-0-3251" name="__codelineno-0-3251"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3252" name="__codelineno-0-3252"></a>
<a id="__codelineno-0-3253" name="__codelineno-0-3253"></a><span class="sd">            - Get the coordinates of the center of cells inside the domain.</span>
<a id="__codelineno-0-3254" name="__codelineno-0-3254"></a>
<a id="__codelineno-0-3255" name="__codelineno-0-3255"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3256" name="__codelineno-0-3256"></a><span class="sd">              &gt;&gt;&gt; gdf = dataset.get_cell_points()</span>
<a id="__codelineno-0-3257" name="__codelineno-0-3257"></a><span class="sd">              &gt;&gt;&gt; print(gdf)</span>
<a id="__codelineno-0-3258" name="__codelineno-0-3258"></a><span class="sd">                             geometry  id</span>
<a id="__codelineno-0-3259" name="__codelineno-0-3259"></a><span class="sd">              0  POINT (0.025 -0.025)   0</span>
<a id="__codelineno-0-3260" name="__codelineno-0-3260"></a><span class="sd">              1  POINT (0.075 -0.025)   1</span>
<a id="__codelineno-0-3261" name="__codelineno-0-3261"></a><span class="sd">              2  POINT (0.125 -0.025)   2</span>
<a id="__codelineno-0-3262" name="__codelineno-0-3262"></a><span class="sd">              3  POINT (0.025 -0.075)   3</span>
<a id="__codelineno-0-3263" name="__codelineno-0-3263"></a><span class="sd">              4  POINT (0.075 -0.075)   4</span>
<a id="__codelineno-0-3264" name="__codelineno-0-3264"></a><span class="sd">              5  POINT (0.125 -0.075)   5</span>
<a id="__codelineno-0-3265" name="__codelineno-0-3265"></a><span class="sd">              6  POINT (0.025 -0.125)   6</span>
<a id="__codelineno-0-3266" name="__codelineno-0-3266"></a><span class="sd">              7  POINT (0.075 -0.125)   7</span>
<a id="__codelineno-0-3267" name="__codelineno-0-3267"></a><span class="sd">              8  POINT (0.125 -0.125)   8</span>
<a id="__codelineno-0-3268" name="__codelineno-0-3268"></a><span class="sd">              &gt;&gt;&gt; fig, ax = dataset.plot()</span>
<a id="__codelineno-0-3269" name="__codelineno-0-3269"></a><span class="sd">              &gt;&gt;&gt; gdf.plot(ax=ax, facecolor=&#39;black&#39;, linewidth=2)</span>
<a id="__codelineno-0-3270" name="__codelineno-0-3270"></a><span class="sd">              &lt;Axes: &gt;</span>
<a id="__codelineno-0-3271" name="__codelineno-0-3271"></a>
<a id="__codelineno-0-3272" name="__codelineno-0-3272"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3273" name="__codelineno-0-3273"></a>
<a id="__codelineno-0-3274" name="__codelineno-0-3274"></a><span class="sd">            ![get_cell_points](./../_images/dataset/get_cell_points.png)</span>
<a id="__codelineno-0-3275" name="__codelineno-0-3275"></a>
<a id="__codelineno-0-3276" name="__codelineno-0-3276"></a><span class="sd">            - Get the coordinates of the top left corner of cells inside the domain.</span>
<a id="__codelineno-0-3277" name="__codelineno-0-3277"></a>
<a id="__codelineno-0-3278" name="__codelineno-0-3278"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3279" name="__codelineno-0-3279"></a><span class="sd">              &gt;&gt;&gt; gdf = dataset.get_cell_points(location=&quot;corner&quot;)</span>
<a id="__codelineno-0-3280" name="__codelineno-0-3280"></a><span class="sd">              &gt;&gt;&gt; print(gdf)</span>
<a id="__codelineno-0-3281" name="__codelineno-0-3281"></a><span class="sd">                          geometry  id</span>
<a id="__codelineno-0-3282" name="__codelineno-0-3282"></a><span class="sd">              0         POINT (0 0)   0</span>
<a id="__codelineno-0-3283" name="__codelineno-0-3283"></a><span class="sd">              1      POINT (0.05 0)   1</span>
<a id="__codelineno-0-3284" name="__codelineno-0-3284"></a><span class="sd">              2       POINT (0.1 0)   2</span>
<a id="__codelineno-0-3285" name="__codelineno-0-3285"></a><span class="sd">              3     POINT (0 -0.05)   3</span>
<a id="__codelineno-0-3286" name="__codelineno-0-3286"></a><span class="sd">              4  POINT (0.05 -0.05)   4</span>
<a id="__codelineno-0-3287" name="__codelineno-0-3287"></a><span class="sd">              5   POINT (0.1 -0.05)   5</span>
<a id="__codelineno-0-3288" name="__codelineno-0-3288"></a><span class="sd">              6      POINT (0 -0.1)   6</span>
<a id="__codelineno-0-3289" name="__codelineno-0-3289"></a><span class="sd">              7   POINT (0.05 -0.1)   7</span>
<a id="__codelineno-0-3290" name="__codelineno-0-3290"></a><span class="sd">              8    POINT (0.1 -0.1)   8</span>
<a id="__codelineno-0-3291" name="__codelineno-0-3291"></a><span class="sd">              &gt;&gt;&gt; fig, ax = dataset.plot()</span>
<a id="__codelineno-0-3292" name="__codelineno-0-3292"></a><span class="sd">              &gt;&gt;&gt; gdf.plot(ax=ax, facecolor=&#39;black&#39;, linewidth=4)</span>
<a id="__codelineno-0-3293" name="__codelineno-0-3293"></a><span class="sd">              &lt;Axes: &gt;</span>
<a id="__codelineno-0-3294" name="__codelineno-0-3294"></a>
<a id="__codelineno-0-3295" name="__codelineno-0-3295"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3296" name="__codelineno-0-3296"></a>
<a id="__codelineno-0-3297" name="__codelineno-0-3297"></a><span class="sd">            ![get_cell_points-corner](./../_images/dataset/get_cell_points-corner.png)</span>
<a id="__codelineno-0-3298" name="__codelineno-0-3298"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-3299" name="__codelineno-0-3299"></a>        <span class="n">coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cell_coords</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
<a id="__codelineno-0-3300" name="__codelineno-0-3300"></a>        <span class="n">epsg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_epsg</span><span class="p">()</span>
<a id="__codelineno-0-3301" name="__codelineno-0-3301"></a>
<a id="__codelineno-0-3302" name="__codelineno-0-3302"></a>        <span class="n">coords_tuples</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">coords</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">coords</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]))</span>
<a id="__codelineno-0-3303" name="__codelineno-0-3303"></a>        <span class="n">points</span> <span class="o">=</span> <span class="n">FeatureCollection</span><span class="o">.</span><span class="n">create_point</span><span class="p">(</span><span class="n">coords_tuples</span><span class="p">)</span>
<a id="__codelineno-0-3304" name="__codelineno-0-3304"></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">geometry</span><span class="o">=</span><span class="n">points</span><span class="p">)</span>
<a id="__codelineno-0-3305" name="__codelineno-0-3305"></a>        <span class="n">gdf</span><span class="o">.</span><span class="n">set_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="n">epsg</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-3306" name="__codelineno-0-3306"></a>        <span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">index</span>
<a id="__codelineno-0-3307" name="__codelineno-0-3307"></a>        <span class="k">return</span> <span class="n">gdf</span>
<a id="__codelineno-0-3308" name="__codelineno-0-3308"></a>
<a id="__codelineno-0-3309" name="__codelineno-0-3309"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">to_file</span><span class="p">(</span>
<a id="__codelineno-0-3310" name="__codelineno-0-3310"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-3311" name="__codelineno-0-3311"></a>        <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-3312" name="__codelineno-0-3312"></a>        <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-3313" name="__codelineno-0-3313"></a>        <span class="n">tile_length</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3314" name="__codelineno-0-3314"></a>        <span class="n">creation_options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3315" name="__codelineno-0-3315"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3316" name="__codelineno-0-3316"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Save dataset to tiff file.</span>
<a id="__codelineno-0-3317" name="__codelineno-0-3317"></a>
<a id="__codelineno-0-3318" name="__codelineno-0-3318"></a><span class="sd">            `to_file` saves a raster to disk, the type of the driver (georiff/netcdf/ascii) will be implied from the</span>
<a id="__codelineno-0-3319" name="__codelineno-0-3319"></a><span class="sd">            extension at the end of the given path.</span>
<a id="__codelineno-0-3320" name="__codelineno-0-3320"></a>
<a id="__codelineno-0-3321" name="__codelineno-0-3321"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-3322" name="__codelineno-0-3322"></a><span class="sd">            path (str):</span>
<a id="__codelineno-0-3323" name="__codelineno-0-3323"></a><span class="sd">                A path including the name of the dataset.</span>
<a id="__codelineno-0-3324" name="__codelineno-0-3324"></a><span class="sd">            band (int):</span>
<a id="__codelineno-0-3325" name="__codelineno-0-3325"></a><span class="sd">                Band index, needed only in case of ascii drivers. Default is 0.</span>
<a id="__codelineno-0-3326" name="__codelineno-0-3326"></a><span class="sd">            tile_length (int, optional):</span>
<a id="__codelineno-0-3327" name="__codelineno-0-3327"></a><span class="sd">                Length of the tiles in the driver. Default is 256.</span>
<a id="__codelineno-0-3328" name="__codelineno-0-3328"></a><span class="sd">            creation_options: List[str], Default is None</span>
<a id="__codelineno-0-3329" name="__codelineno-0-3329"></a><span class="sd">                List of strings that will be passed to the GDAL driver during the creation of the dataset.</span>
<a id="__codelineno-0-3330" name="__codelineno-0-3330"></a><span class="sd">                i.e., [&#39;PREDICTOR=2&#39;]</span>
<a id="__codelineno-0-3331" name="__codelineno-0-3331"></a>
<a id="__codelineno-0-3332" name="__codelineno-0-3332"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-3333" name="__codelineno-0-3333"></a><span class="sd">            - Create a Dataset with 4 bands, 5 rows, 5 columns, at the point lon/lat (0, 0):</span>
<a id="__codelineno-0-3334" name="__codelineno-0-3334"></a>
<a id="__codelineno-0-3335" name="__codelineno-0-3335"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3336" name="__codelineno-0-3336"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-3337" name="__codelineno-0-3337"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(4, 5, 5)</span>
<a id="__codelineno-0-3338" name="__codelineno-0-3338"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-3339" name="__codelineno-0-3339"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-3340" name="__codelineno-0-3340"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-3341" name="__codelineno-0-3341"></a><span class="sd">              &gt;&gt;&gt; print(dataset.file_name)</span>
<a id="__codelineno-0-3342" name="__codelineno-0-3342"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-3343" name="__codelineno-0-3343"></a>
<a id="__codelineno-0-3344" name="__codelineno-0-3344"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3345" name="__codelineno-0-3345"></a>
<a id="__codelineno-0-3346" name="__codelineno-0-3346"></a><span class="sd">            - Now save the dataset as a geotiff file:</span>
<a id="__codelineno-0-3347" name="__codelineno-0-3347"></a>
<a id="__codelineno-0-3348" name="__codelineno-0-3348"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3349" name="__codelineno-0-3349"></a><span class="sd">              &gt;&gt;&gt; dataset.to_file(&quot;my-dataset.tif&quot;)</span>
<a id="__codelineno-0-3350" name="__codelineno-0-3350"></a><span class="sd">              &gt;&gt;&gt; print(dataset.file_name)</span>
<a id="__codelineno-0-3351" name="__codelineno-0-3351"></a><span class="sd">              my-dataset.tif</span>
<a id="__codelineno-0-3352" name="__codelineno-0-3352"></a>
<a id="__codelineno-0-3353" name="__codelineno-0-3353"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3354" name="__codelineno-0-3354"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-3355" name="__codelineno-0-3355"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-3356" name="__codelineno-0-3356"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;path input should be string type&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3357" name="__codelineno-0-3357"></a>
<a id="__codelineno-0-3358" name="__codelineno-0-3358"></a>        <span class="n">extension</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-3359" name="__codelineno-0-3359"></a>        <span class="n">driver</span> <span class="o">=</span> <span class="n">CATALOG</span><span class="o">.</span><span class="n">get_driver_name_by_extension</span><span class="p">(</span><span class="n">extension</span><span class="p">)</span>
<a id="__codelineno-0-3360" name="__codelineno-0-3360"></a>        <span class="n">driver_name</span> <span class="o">=</span> <span class="n">CATALOG</span><span class="o">.</span><span class="n">get_gdal_name</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span>
<a id="__codelineno-0-3361" name="__codelineno-0-3361"></a>
<a id="__codelineno-0-3362" name="__codelineno-0-3362"></a>        <span class="k">if</span> <span class="n">driver</span> <span class="o">==</span> <span class="s2">&quot;ascii&quot;</span><span class="p">:</span>
<a id="__codelineno-0-3363" name="__codelineno-0-3363"></a>            <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-3364" name="__codelineno-0-3364"></a>            <span class="n">no_data_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="n">band</span><span class="p">]</span>
<a id="__codelineno-0-3365" name="__codelineno-0-3365"></a>            <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span>
<a id="__codelineno-0-3366" name="__codelineno-0-3366"></a>            <span class="n">_io</span><span class="o">.</span><span class="n">to_ascii</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">no_data_value</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-3367" name="__codelineno-0-3367"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3368" name="__codelineno-0-3368"></a>            <span class="c1"># saving rasters with color table fails with a runtime error</span>
<a id="__codelineno-0-3369" name="__codelineno-0-3369"></a>            <span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;COMPRESS=DEFLATE&quot;</span><span class="p">]</span>
<a id="__codelineno-0-3370" name="__codelineno-0-3370"></a>            <span class="k">if</span> <span class="n">tile_length</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3371" name="__codelineno-0-3371"></a>                <span class="n">options</span> <span class="o">+=</span> <span class="p">[</span>
<a id="__codelineno-0-3372" name="__codelineno-0-3372"></a>                    <span class="s2">&quot;TILED=YES&quot;</span><span class="p">,</span>
<a id="__codelineno-0-3373" name="__codelineno-0-3373"></a>                    <span class="sa">f</span><span class="s2">&quot;TILE_LENGTH=</span><span class="si">{</span><span class="n">tile_length</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-0-3374" name="__codelineno-0-3374"></a>                <span class="p">]</span>
<a id="__codelineno-0-3375" name="__codelineno-0-3375"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_block_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_block_size</span> <span class="o">!=</span> <span class="p">[]:</span>
<a id="__codelineno-0-3376" name="__codelineno-0-3376"></a>                <span class="n">options</span> <span class="o">+=</span> <span class="p">[</span>
<a id="__codelineno-0-3377" name="__codelineno-0-3377"></a>                    <span class="s2">&quot;BLOCKXSIZE=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_block_size</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span>
<a id="__codelineno-0-3378" name="__codelineno-0-3378"></a>                    <span class="s2">&quot;BLOCKYSIZE=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_block_size</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span>
<a id="__codelineno-0-3379" name="__codelineno-0-3379"></a>                <span class="p">]</span>
<a id="__codelineno-0-3380" name="__codelineno-0-3380"></a>            <span class="k">if</span> <span class="n">creation_options</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3381" name="__codelineno-0-3381"></a>                <span class="n">options</span> <span class="o">+=</span> <span class="n">creation_options</span>
<a id="__codelineno-0-3382" name="__codelineno-0-3382"></a>
<a id="__codelineno-0-3383" name="__codelineno-0-3383"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-3384" name="__codelineno-0-3384"></a>                <span class="n">dst</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="n">driver_name</span><span class="p">)</span><span class="o">.</span><span class="n">CreateCopy</span><span class="p">(</span>
<a id="__codelineno-0-3385" name="__codelineno-0-3385"></a>                    <span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span>
<a id="__codelineno-0-3386" name="__codelineno-0-3386"></a>                <span class="p">)</span>
<a id="__codelineno-0-3387" name="__codelineno-0-3387"></a>                <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="s2">&quot;write&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3388" name="__codelineno-0-3388"></a>                <span class="c1"># flush the data to the dataset on disk.</span>
<a id="__codelineno-0-3389" name="__codelineno-0-3389"></a>                <span class="n">dst</span><span class="o">.</span><span class="n">FlushCache</span><span class="p">()</span>
<a id="__codelineno-0-3390" name="__codelineno-0-3390"></a>            <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
<a id="__codelineno-0-3391" name="__codelineno-0-3391"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
<a id="__codelineno-0-3392" name="__codelineno-0-3392"></a>                    <span class="k">raise</span> <span class="n">FailedToSaveError</span><span class="p">(</span>
<a id="__codelineno-0-3393" name="__codelineno-0-3393"></a>                        <span class="sa">f</span><span class="s2">&quot;Failed to save the </span><span class="si">{</span><span class="n">driver_name</span><span class="si">}</span><span class="s2"> raster to the path: </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-3394" name="__codelineno-0-3394"></a>                    <span class="p">)</span>
<a id="__codelineno-0-3395" name="__codelineno-0-3395"></a>
<a id="__codelineno-0-3396" name="__codelineno-0-3396"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">convert_longitude</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Dataset&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-3397" name="__codelineno-0-3397"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert Longitude.</span>
<a id="__codelineno-0-3398" name="__codelineno-0-3398"></a>
<a id="__codelineno-0-3399" name="__codelineno-0-3399"></a><span class="sd">        - convert the longitude from 0-360 to -180 - 180.</span>
<a id="__codelineno-0-3400" name="__codelineno-0-3400"></a><span class="sd">        - currently the function works correctly if the raster covers the whole world, it means that the columns</span>
<a id="__codelineno-0-3401" name="__codelineno-0-3401"></a><span class="sd">            in the rasters covers from longitude 0 to 360.</span>
<a id="__codelineno-0-3402" name="__codelineno-0-3402"></a>
<a id="__codelineno-0-3403" name="__codelineno-0-3403"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-3404" name="__codelineno-0-3404"></a><span class="sd">            inplace (bool):</span>
<a id="__codelineno-0-3405" name="__codelineno-0-3405"></a><span class="sd">                True to make the changes in place.</span>
<a id="__codelineno-0-3406" name="__codelineno-0-3406"></a>
<a id="__codelineno-0-3407" name="__codelineno-0-3407"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-3408" name="__codelineno-0-3408"></a><span class="sd">            Dataset:</span>
<a id="__codelineno-0-3409" name="__codelineno-0-3409"></a><span class="sd">                The converted dataset if inplace is False; otherwise None.</span>
<a id="__codelineno-0-3410" name="__codelineno-0-3410"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-3411" name="__codelineno-0-3411"></a>        <span class="c1"># dst = gdal.Warp(</span>
<a id="__codelineno-0-3412" name="__codelineno-0-3412"></a>        <span class="c1">#     &quot;&quot;,</span>
<a id="__codelineno-0-3413" name="__codelineno-0-3413"></a>        <span class="c1">#     self.raster,</span>
<a id="__codelineno-0-3414" name="__codelineno-0-3414"></a>        <span class="c1">#     dstSRS=&quot;+proj=longlat +ellps=WGS84 +datum=WGS84 +lon_0=0 +over&quot;,</span>
<a id="__codelineno-0-3415" name="__codelineno-0-3415"></a>        <span class="c1">#     format=&quot;VRT&quot;,</span>
<a id="__codelineno-0-3416" name="__codelineno-0-3416"></a>        <span class="c1"># )</span>
<a id="__codelineno-0-3417" name="__codelineno-0-3417"></a>        <span class="n">lon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lon</span>
<a id="__codelineno-0-3418" name="__codelineno-0-3418"></a>        <span class="n">src</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span>
<a id="__codelineno-0-3419" name="__codelineno-0-3419"></a>        <span class="c1"># create a copy</span>
<a id="__codelineno-0-3420" name="__codelineno-0-3420"></a>        <span class="n">drv</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="s2">&quot;MEM&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3421" name="__codelineno-0-3421"></a>        <span class="n">dst</span> <span class="o">=</span> <span class="n">drv</span><span class="o">.</span><span class="n">CreateCopy</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-3422" name="__codelineno-0-3422"></a>        <span class="c1"># convert the 0 to 360 to -180 to 180</span>
<a id="__codelineno-0-3423" name="__codelineno-0-3423"></a>        <span class="k">if</span> <span class="n">lon</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">180</span><span class="p">:</span>
<a id="__codelineno-0-3424" name="__codelineno-0-3424"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The raster should cover the whole globe&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3425" name="__codelineno-0-3425"></a>
<a id="__codelineno-0-3426" name="__codelineno-0-3426"></a>        <span class="n">first_to_translated</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">lon</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-3427" name="__codelineno-0-3427"></a>
<a id="__codelineno-0-3428" name="__codelineno-0-3428"></a>        <span class="n">ind</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">first_to_translated</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">lon</span><span class="p">)))</span>
<a id="__codelineno-0-3429" name="__codelineno-0-3429"></a>        <span class="n">ind_2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">first_to_translated</span><span class="p">))</span>
<a id="__codelineno-0-3430" name="__codelineno-0-3430"></a>
<a id="__codelineno-0-3431" name="__codelineno-0-3431"></a>        <span class="k">for</span> <span class="n">band</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-3432" name="__codelineno-0-3432"></a>            <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-3433" name="__codelineno-0-3433"></a>            <span class="n">arr_rearranged</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[:,</span> <span class="n">ind</span> <span class="o">+</span> <span class="n">ind_2</span><span class="p">]</span>
<a id="__codelineno-0-3434" name="__codelineno-0-3434"></a>            <span class="n">dst</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">band</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">arr_rearranged</span><span class="p">)</span>
<a id="__codelineno-0-3435" name="__codelineno-0-3435"></a>
<a id="__codelineno-0-3436" name="__codelineno-0-3436"></a>        <span class="c1"># correct the geotransform</span>
<a id="__codelineno-0-3437" name="__codelineno-0-3437"></a>        <span class="n">top_left_corner</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">top_left_corner</span>
<a id="__codelineno-0-3438" name="__codelineno-0-3438"></a>        <span class="n">gt</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">)</span>
<a id="__codelineno-0-3439" name="__codelineno-0-3439"></a>        <span class="k">if</span> <span class="n">lon</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
<a id="__codelineno-0-3440" name="__codelineno-0-3440"></a>            <span class="n">new_gt</span> <span class="o">=</span> <span class="n">top_left_corner</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">180</span>
<a id="__codelineno-0-3441" name="__codelineno-0-3441"></a>            <span class="n">gt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_gt</span>
<a id="__codelineno-0-3442" name="__codelineno-0-3442"></a>
<a id="__codelineno-0-3443" name="__codelineno-0-3443"></a>        <span class="n">dst</span><span class="o">.</span><span class="n">SetGeoTransform</span><span class="p">(</span><span class="n">gt</span><span class="p">)</span>
<a id="__codelineno-0-3444" name="__codelineno-0-3444"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">inplace</span><span class="p">:</span>
<a id="__codelineno-0-3445" name="__codelineno-0-3445"></a>            <span class="k">return</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
<a id="__codelineno-0-3446" name="__codelineno-0-3446"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3447" name="__codelineno-0-3447"></a>            <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
<a id="__codelineno-0-3448" name="__codelineno-0-3448"></a>
<a id="__codelineno-0-3449" name="__codelineno-0-3449"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_band_to_polygon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">col_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-3450" name="__codelineno-0-3450"></a>        <span class="n">band</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">band</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-3451" name="__codelineno-0-3451"></a>        <span class="n">srs</span> <span class="o">=</span> <span class="n">osr</span><span class="o">.</span><span class="n">SpatialReference</span><span class="p">(</span><span class="n">wkt</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-0-3452" name="__codelineno-0-3452"></a>
<a id="__codelineno-0-3453" name="__codelineno-0-3453"></a>        <span class="n">dst_ds</span> <span class="o">=</span> <span class="n">FeatureCollection</span><span class="o">.</span><span class="n">create_ds</span><span class="p">(</span><span class="s2">&quot;memory&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3454" name="__codelineno-0-3454"></a>        <span class="n">dst_layer</span> <span class="o">=</span> <span class="n">dst_ds</span><span class="o">.</span><span class="n">CreateLayer</span><span class="p">(</span><span class="n">col_name</span><span class="p">,</span> <span class="n">srs</span><span class="o">=</span><span class="n">srs</span><span class="p">)</span>
<a id="__codelineno-0-3455" name="__codelineno-0-3455"></a>        <span class="n">dtype</span> <span class="o">=</span> <span class="n">gdal_to_ogr_dtype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="p">)</span>
<a id="__codelineno-0-3456" name="__codelineno-0-3456"></a>        <span class="n">new_field</span> <span class="o">=</span> <span class="n">ogr</span><span class="o">.</span><span class="n">FieldDefn</span><span class="p">(</span><span class="n">col_name</span><span class="p">,</span> <span class="n">dtype</span><span class="p">)</span>
<a id="__codelineno-0-3457" name="__codelineno-0-3457"></a>        <span class="n">dst_layer</span><span class="o">.</span><span class="n">CreateField</span><span class="p">(</span><span class="n">new_field</span><span class="p">)</span>
<a id="__codelineno-0-3458" name="__codelineno-0-3458"></a>        <span class="n">gdal</span><span class="o">.</span><span class="n">Polygonize</span><span class="p">(</span><span class="n">band</span><span class="p">,</span> <span class="n">band</span><span class="p">,</span> <span class="n">dst_layer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[],</span> <span class="n">callback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-3459" name="__codelineno-0-3459"></a>
<a id="__codelineno-0-3460" name="__codelineno-0-3460"></a>        <span class="n">vector</span> <span class="o">=</span> <span class="n">FeatureCollection</span><span class="p">(</span><span class="n">dst_ds</span><span class="p">)</span>
<a id="__codelineno-0-3461" name="__codelineno-0-3461"></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="n">vector</span><span class="o">.</span><span class="n">_ds_to_gdf</span><span class="p">()</span>
<a id="__codelineno-0-3462" name="__codelineno-0-3462"></a>        <span class="k">return</span> <span class="n">gdf</span>
<a id="__codelineno-0-3463" name="__codelineno-0-3463"></a>
<a id="__codelineno-0-3464" name="__codelineno-0-3464"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">to_feature_collection</span><span class="p">(</span>
<a id="__codelineno-0-3465" name="__codelineno-0-3465"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-3466" name="__codelineno-0-3466"></a>        <span class="n">vector_mask</span><span class="p">:</span> <span class="n">GeoDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3467" name="__codelineno-0-3467"></a>        <span class="n">add_geometry</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3468" name="__codelineno-0-3468"></a>        <span class="n">tile</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-3469" name="__codelineno-0-3469"></a>        <span class="n">tile_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
<a id="__codelineno-0-3470" name="__codelineno-0-3470"></a>        <span class="n">touch</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-3471" name="__codelineno-0-3471"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">GeoDataFrame</span><span class="p">]:</span>
<a id="__codelineno-0-3472" name="__codelineno-0-3472"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert a dataset to a vector.</span>
<a id="__codelineno-0-3473" name="__codelineno-0-3473"></a>
<a id="__codelineno-0-3474" name="__codelineno-0-3474"></a><span class="sd">        The function does the following:</span>
<a id="__codelineno-0-3475" name="__codelineno-0-3475"></a><span class="sd">            - Flatten the array in each band in the raster then mask the values if a vector_mask file is given</span>
<a id="__codelineno-0-3476" name="__codelineno-0-3476"></a><span class="sd">                otherwise it will flatten all values.</span>
<a id="__codelineno-0-3477" name="__codelineno-0-3477"></a><span class="sd">            - Put the values for each band in a column in a dataframe under the name of the raster band,</span>
<a id="__codelineno-0-3478" name="__codelineno-0-3478"></a><span class="sd">                but if no meta-data in the raster band exists, an index number will be used [1, 2, 3, ...]</span>
<a id="__codelineno-0-3479" name="__codelineno-0-3479"></a><span class="sd">            - The function has an add_geometry parameter with two possible values [&quot;point&quot;, &quot;polygon&quot;], which you can</span>
<a id="__codelineno-0-3480" name="__codelineno-0-3480"></a><span class="sd">                specify the type of shapely geometry you want to create from each cell,</span>
<a id="__codelineno-0-3481" name="__codelineno-0-3481"></a>
<a id="__codelineno-0-3482" name="__codelineno-0-3482"></a><span class="sd">                - If point is chosen, the created point will be at the center of each cell</span>
<a id="__codelineno-0-3483" name="__codelineno-0-3483"></a><span class="sd">                - If a polygon is chosen, a square polygon will be created that covers the entire cell.</span>
<a id="__codelineno-0-3484" name="__codelineno-0-3484"></a>
<a id="__codelineno-0-3485" name="__codelineno-0-3485"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-3486" name="__codelineno-0-3486"></a><span class="sd">            vector_mask (GeoDataFrame, optional):</span>
<a id="__codelineno-0-3487" name="__codelineno-0-3487"></a><span class="sd">                GeoDataFrame for the vector_mask. If given, it will be used to clip the raster.</span>
<a id="__codelineno-0-3488" name="__codelineno-0-3488"></a><span class="sd">            add_geometry (str):</span>
<a id="__codelineno-0-3489" name="__codelineno-0-3489"></a><span class="sd">                &quot;Polygon&quot; or &quot;Point&quot; if you want to add a polygon geometry of the cells as column in dataframe.</span>
<a id="__codelineno-0-3490" name="__codelineno-0-3490"></a><span class="sd">                Default is None.</span>
<a id="__codelineno-0-3491" name="__codelineno-0-3491"></a><span class="sd">            tile (bool):</span>
<a id="__codelineno-0-3492" name="__codelineno-0-3492"></a><span class="sd">                True to use tiles in extracting the values from the raster. Default is False.</span>
<a id="__codelineno-0-3493" name="__codelineno-0-3493"></a><span class="sd">            tile_size (int):</span>
<a id="__codelineno-0-3494" name="__codelineno-0-3494"></a><span class="sd">                Tile size. Default is 1500.</span>
<a id="__codelineno-0-3495" name="__codelineno-0-3495"></a><span class="sd">            touch (bool):</span>
<a id="__codelineno-0-3496" name="__codelineno-0-3496"></a><span class="sd">                Include the cells that touch the polygon not only those that lie entirely inside the polygon mask.</span>
<a id="__codelineno-0-3497" name="__codelineno-0-3497"></a><span class="sd">                Default is True.</span>
<a id="__codelineno-0-3498" name="__codelineno-0-3498"></a>
<a id="__codelineno-0-3499" name="__codelineno-0-3499"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-3500" name="__codelineno-0-3500"></a><span class="sd">            DataFrame | GeoDataFrame:</span>
<a id="__codelineno-0-3501" name="__codelineno-0-3501"></a><span class="sd">                The resulting frame will have the band value under the name of the band (if the raster file has</span>
<a id="__codelineno-0-3502" name="__codelineno-0-3502"></a><span class="sd">                metadata; if not, the bands will be indexed from 1 to the number of bands).</span>
<a id="__codelineno-0-3503" name="__codelineno-0-3503"></a>
<a id="__codelineno-0-3504" name="__codelineno-0-3504"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-3505" name="__codelineno-0-3505"></a><span class="sd">            - Create a dataset from array with 2 bands and 3*3 array each:</span>
<a id="__codelineno-0-3506" name="__codelineno-0-3506"></a>
<a id="__codelineno-0-3507" name="__codelineno-0-3507"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3508" name="__codelineno-0-3508"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-3509" name="__codelineno-0-3509"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(2, 3, 3)</span>
<a id="__codelineno-0-3510" name="__codelineno-0-3510"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-3511" name="__codelineno-0-3511"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-3512" name="__codelineno-0-3512"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-3513" name="__codelineno-0-3513"></a><span class="sd">              &gt;&gt;&gt; print(dataset.read_array(band=0)) # doctest: +SKIP</span>
<a id="__codelineno-0-3514" name="__codelineno-0-3514"></a><span class="sd">              [[0.88625832 0.81804328 0.99372706]</span>
<a id="__codelineno-0-3515" name="__codelineno-0-3515"></a><span class="sd">               [0.85333054 0.35448201 0.78079262]</span>
<a id="__codelineno-0-3516" name="__codelineno-0-3516"></a><span class="sd">               [0.43887136 0.68166208 0.53170966]]</span>
<a id="__codelineno-0-3517" name="__codelineno-0-3517"></a><span class="sd">              &gt;&gt;&gt; print(dataset.read_array(band=1)) # doctest: +SKIP</span>
<a id="__codelineno-0-3518" name="__codelineno-0-3518"></a><span class="sd">              [[0.07051872 0.67650833 0.17625027]</span>
<a id="__codelineno-0-3519" name="__codelineno-0-3519"></a><span class="sd">               [0.41258071 0.38327938 0.18783139]</span>
<a id="__codelineno-0-3520" name="__codelineno-0-3520"></a><span class="sd">               [0.83741314 0.70446373 0.64913575]]</span>
<a id="__codelineno-0-3521" name="__codelineno-0-3521"></a>
<a id="__codelineno-0-3522" name="__codelineno-0-3522"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3523" name="__codelineno-0-3523"></a>
<a id="__codelineno-0-3524" name="__codelineno-0-3524"></a><span class="sd">            - Convert the dataset to dataframe by calling the `to_feature_collection` method:</span>
<a id="__codelineno-0-3525" name="__codelineno-0-3525"></a>
<a id="__codelineno-0-3526" name="__codelineno-0-3526"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3527" name="__codelineno-0-3527"></a><span class="sd">              &gt;&gt;&gt; df = dataset.to_feature_collection()</span>
<a id="__codelineno-0-3528" name="__codelineno-0-3528"></a><span class="sd">              &gt;&gt;&gt; print(df) # doctest: +SKIP</span>
<a id="__codelineno-0-3529" name="__codelineno-0-3529"></a><span class="sd">                   Band_1    Band_2</span>
<a id="__codelineno-0-3530" name="__codelineno-0-3530"></a><span class="sd">              0  0.886258  0.070519</span>
<a id="__codelineno-0-3531" name="__codelineno-0-3531"></a><span class="sd">              1  0.818043  0.676508</span>
<a id="__codelineno-0-3532" name="__codelineno-0-3532"></a><span class="sd">              2  0.993727  0.176250</span>
<a id="__codelineno-0-3533" name="__codelineno-0-3533"></a><span class="sd">              3  0.853331  0.412581</span>
<a id="__codelineno-0-3534" name="__codelineno-0-3534"></a><span class="sd">              4  0.354482  0.383279</span>
<a id="__codelineno-0-3535" name="__codelineno-0-3535"></a><span class="sd">              5  0.780793  0.187831</span>
<a id="__codelineno-0-3536" name="__codelineno-0-3536"></a><span class="sd">              6  0.438871  0.837413</span>
<a id="__codelineno-0-3537" name="__codelineno-0-3537"></a><span class="sd">              7  0.681662  0.704464</span>
<a id="__codelineno-0-3538" name="__codelineno-0-3538"></a><span class="sd">              8  0.531710  0.649136</span>
<a id="__codelineno-0-3539" name="__codelineno-0-3539"></a>
<a id="__codelineno-0-3540" name="__codelineno-0-3540"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3541" name="__codelineno-0-3541"></a>
<a id="__codelineno-0-3542" name="__codelineno-0-3542"></a><span class="sd">            - Convert the dataset into geodataframe with either a polygon or a point geometry that represents each cell.</span>
<a id="__codelineno-0-3543" name="__codelineno-0-3543"></a><span class="sd">                To specify the geometry type use the parameter `add_geometry`:</span>
<a id="__codelineno-0-3544" name="__codelineno-0-3544"></a>
<a id="__codelineno-0-3545" name="__codelineno-0-3545"></a><span class="sd">                  ```python</span>
<a id="__codelineno-0-3546" name="__codelineno-0-3546"></a><span class="sd">                  &gt;&gt;&gt; gdf = dataset.to_feature_collection(add_geometry=&quot;point&quot;)</span>
<a id="__codelineno-0-3547" name="__codelineno-0-3547"></a><span class="sd">                  &gt;&gt;&gt; print(gdf) # doctest: +SKIP</span>
<a id="__codelineno-0-3548" name="__codelineno-0-3548"></a><span class="sd">                       Band_1    Band_2                  geometry</span>
<a id="__codelineno-0-3549" name="__codelineno-0-3549"></a><span class="sd">                  0  0.886258  0.070519  POINT (0.02500 -0.02500)</span>
<a id="__codelineno-0-3550" name="__codelineno-0-3550"></a><span class="sd">                  1  0.818043  0.676508  POINT (0.07500 -0.02500)</span>
<a id="__codelineno-0-3551" name="__codelineno-0-3551"></a><span class="sd">                  2  0.993727  0.176250  POINT (0.12500 -0.02500)</span>
<a id="__codelineno-0-3552" name="__codelineno-0-3552"></a><span class="sd">                  3  0.853331  0.412581  POINT (0.02500 -0.07500)</span>
<a id="__codelineno-0-3553" name="__codelineno-0-3553"></a><span class="sd">                  4  0.354482  0.383279  POINT (0.07500 -0.07500)</span>
<a id="__codelineno-0-3554" name="__codelineno-0-3554"></a><span class="sd">                  5  0.780793  0.187831  POINT (0.12500 -0.07500)</span>
<a id="__codelineno-0-3555" name="__codelineno-0-3555"></a><span class="sd">                  6  0.438871  0.837413  POINT (0.02500 -0.12500)</span>
<a id="__codelineno-0-3556" name="__codelineno-0-3556"></a><span class="sd">                  7  0.681662  0.704464  POINT (0.07500 -0.12500)</span>
<a id="__codelineno-0-3557" name="__codelineno-0-3557"></a><span class="sd">                  8  0.531710  0.649136  POINT (0.12500 -0.12500)</span>
<a id="__codelineno-0-3558" name="__codelineno-0-3558"></a><span class="sd">                  &gt;&gt;&gt; gdf = dataset.to_feature_collection(add_geometry=&quot;polygon&quot;)</span>
<a id="__codelineno-0-3559" name="__codelineno-0-3559"></a><span class="sd">                  &gt;&gt;&gt; print(gdf) # doctest: +SKIP</span>
<a id="__codelineno-0-3560" name="__codelineno-0-3560"></a><span class="sd">                       Band_1    Band_2                                           geometry</span>
<a id="__codelineno-0-3561" name="__codelineno-0-3561"></a><span class="sd">                  0  0.886258  0.070519  POLYGON ((0.00000 0.00000, 0.05000 0.00000, 0....</span>
<a id="__codelineno-0-3562" name="__codelineno-0-3562"></a><span class="sd">                  1  0.818043  0.676508  POLYGON ((0.05000 0.00000, 0.10000 0.00000, 0....</span>
<a id="__codelineno-0-3563" name="__codelineno-0-3563"></a><span class="sd">                  2  0.993727  0.176250  POLYGON ((0.10000 0.00000, 0.15000 0.00000, 0....</span>
<a id="__codelineno-0-3564" name="__codelineno-0-3564"></a><span class="sd">                  3  0.853331  0.412581  POLYGON ((0.00000 -0.05000, 0.05000 -0.05000, ...</span>
<a id="__codelineno-0-3565" name="__codelineno-0-3565"></a><span class="sd">                  4  0.354482  0.383279  POLYGON ((0.05000 -0.05000, 0.10000 -0.05000, ...</span>
<a id="__codelineno-0-3566" name="__codelineno-0-3566"></a><span class="sd">                  5  0.780793  0.187831  POLYGON ((0.10000 -0.05000, 0.15000 -0.05000, ...</span>
<a id="__codelineno-0-3567" name="__codelineno-0-3567"></a><span class="sd">                  6  0.438871  0.837413  POLYGON ((0.00000 -0.10000, 0.05000 -0.10000, ...</span>
<a id="__codelineno-0-3568" name="__codelineno-0-3568"></a><span class="sd">                  7  0.681662  0.704464  POLYGON ((0.05000 -0.10000, 0.10000 -0.10000, ...</span>
<a id="__codelineno-0-3569" name="__codelineno-0-3569"></a><span class="sd">                  8  0.531710  0.649136  POLYGON ((0.10000 -0.10000, 0.15000 -0.10000, ...</span>
<a id="__codelineno-0-3570" name="__codelineno-0-3570"></a>
<a id="__codelineno-0-3571" name="__codelineno-0-3571"></a><span class="sd">                  ```</span>
<a id="__codelineno-0-3572" name="__codelineno-0-3572"></a>
<a id="__codelineno-0-3573" name="__codelineno-0-3573"></a><span class="sd">            - Use a mask to crop part of the dataset, and then convert the cropped part to a dataframe/geodataframe:</span>
<a id="__codelineno-0-3574" name="__codelineno-0-3574"></a>
<a id="__codelineno-0-3575" name="__codelineno-0-3575"></a><span class="sd">              - Create a mask that covers only the cell in the middle of the dataset.</span>
<a id="__codelineno-0-3576" name="__codelineno-0-3576"></a>
<a id="__codelineno-0-3577" name="__codelineno-0-3577"></a><span class="sd">                  ```python</span>
<a id="__codelineno-0-3578" name="__codelineno-0-3578"></a><span class="sd">                  &gt;&gt;&gt; import geopandas as gpd</span>
<a id="__codelineno-0-3579" name="__codelineno-0-3579"></a><span class="sd">                  &gt;&gt;&gt; from shapely.geometry import Polygon</span>
<a id="__codelineno-0-3580" name="__codelineno-0-3580"></a><span class="sd">                  &gt;&gt;&gt; poly = gpd.GeoDataFrame(</span>
<a id="__codelineno-0-3581" name="__codelineno-0-3581"></a><span class="sd">                  ...             geometry=[Polygon([(0.05, -0.05), (0.05, -0.1), (0.1, -0.1), (0.1, -0.05)])], crs=4326</span>
<a id="__codelineno-0-3582" name="__codelineno-0-3582"></a><span class="sd">                  ... )</span>
<a id="__codelineno-0-3583" name="__codelineno-0-3583"></a><span class="sd">                  &gt;&gt;&gt; df = dataset.to_feature_collection(vector_mask=poly)</span>
<a id="__codelineno-0-3584" name="__codelineno-0-3584"></a><span class="sd">                  &gt;&gt;&gt; print(df) # doctest: +SKIP</span>
<a id="__codelineno-0-3585" name="__codelineno-0-3585"></a><span class="sd">                       Band_1    Band_2</span>
<a id="__codelineno-0-3586" name="__codelineno-0-3586"></a><span class="sd">                  0  0.354482  0.383279</span>
<a id="__codelineno-0-3587" name="__codelineno-0-3587"></a>
<a id="__codelineno-0-3588" name="__codelineno-0-3588"></a><span class="sd">                  ```</span>
<a id="__codelineno-0-3589" name="__codelineno-0-3589"></a>
<a id="__codelineno-0-3590" name="__codelineno-0-3590"></a><span class="sd">            - If you have a big dataset, and you want to convert it to dataframe in tiles (do not read the whole dataset</span>
<a id="__codelineno-0-3591" name="__codelineno-0-3591"></a><span class="sd">                at once but in tiles), you can use the `tile` and the `tile_size` parameters. The values will be the</span>
<a id="__codelineno-0-3592" name="__codelineno-0-3592"></a><span class="sd">                same as above; the difference is reading in chunks:</span>
<a id="__codelineno-0-3593" name="__codelineno-0-3593"></a>
<a id="__codelineno-0-3594" name="__codelineno-0-3594"></a><span class="sd">                  ```python</span>
<a id="__codelineno-0-3595" name="__codelineno-0-3595"></a><span class="sd">                  &gt;&gt;&gt; gdf = dataset.to_feature_collection(tile=True, tile_size=1)</span>
<a id="__codelineno-0-3596" name="__codelineno-0-3596"></a><span class="sd">                  &gt;&gt;&gt; print(gdf) # doctest: +SKIP</span>
<a id="__codelineno-0-3597" name="__codelineno-0-3597"></a><span class="sd">                       Band_1    Band_2</span>
<a id="__codelineno-0-3598" name="__codelineno-0-3598"></a><span class="sd">                  0  0.886258  0.070519</span>
<a id="__codelineno-0-3599" name="__codelineno-0-3599"></a><span class="sd">                  1  0.818043  0.676508</span>
<a id="__codelineno-0-3600" name="__codelineno-0-3600"></a><span class="sd">                  2  0.993727  0.176250</span>
<a id="__codelineno-0-3601" name="__codelineno-0-3601"></a><span class="sd">                  3  0.853331  0.412581</span>
<a id="__codelineno-0-3602" name="__codelineno-0-3602"></a><span class="sd">                  4  0.354482  0.383279</span>
<a id="__codelineno-0-3603" name="__codelineno-0-3603"></a><span class="sd">                  5  0.780793  0.187831</span>
<a id="__codelineno-0-3604" name="__codelineno-0-3604"></a><span class="sd">                  6  0.438871  0.837413</span>
<a id="__codelineno-0-3605" name="__codelineno-0-3605"></a><span class="sd">                  7  0.681662  0.704464</span>
<a id="__codelineno-0-3606" name="__codelineno-0-3606"></a><span class="sd">                  8  0.531710  0.649136</span>
<a id="__codelineno-0-3607" name="__codelineno-0-3607"></a>
<a id="__codelineno-0-3608" name="__codelineno-0-3608"></a><span class="sd">                  ```</span>
<a id="__codelineno-0-3609" name="__codelineno-0-3609"></a>
<a id="__codelineno-0-3610" name="__codelineno-0-3610"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-3611" name="__codelineno-0-3611"></a>        <span class="c1"># Get raster band names. open the dataset using gdal.Open</span>
<a id="__codelineno-0-3612" name="__codelineno-0-3612"></a>        <span class="n">band_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_names</span>
<a id="__codelineno-0-3613" name="__codelineno-0-3613"></a>
<a id="__codelineno-0-3614" name="__codelineno-0-3614"></a>        <span class="c1"># Create a mask from the pixels touched by the vector_mask.</span>
<a id="__codelineno-0-3615" name="__codelineno-0-3615"></a>        <span class="k">if</span> <span class="n">vector_mask</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3616" name="__codelineno-0-3616"></a>            <span class="n">src</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="n">vector_mask</span><span class="p">,</span> <span class="n">touch</span><span class="o">=</span><span class="n">touch</span><span class="p">)</span>
<a id="__codelineno-0-3617" name="__codelineno-0-3617"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3618" name="__codelineno-0-3618"></a>            <span class="n">src</span> <span class="o">=</span> <span class="bp">self</span>
<a id="__codelineno-0-3619" name="__codelineno-0-3619"></a>
<a id="__codelineno-0-3620" name="__codelineno-0-3620"></a>        <span class="k">if</span> <span class="n">tile</span><span class="p">:</span>
<a id="__codelineno-0-3621" name="__codelineno-0-3621"></a>            <span class="n">df_list</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># DataFrames of each tile.</span>
<a id="__codelineno-0-3622" name="__codelineno-0-3622"></a>            <span class="k">for</span> <span class="n">arr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_tile</span><span class="p">(</span><span class="n">tile_size</span><span class="p">):</span>
<a id="__codelineno-0-3623" name="__codelineno-0-3623"></a>                <span class="c1"># Assume multi-band</span>
<a id="__codelineno-0-3624" name="__codelineno-0-3624"></a>                <span class="n">idx</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-0-3625" name="__codelineno-0-3625"></a>                <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-3626" name="__codelineno-0-3626"></a>                    <span class="c1"># Handle single band rasters</span>
<a id="__codelineno-0-3627" name="__codelineno-0-3627"></a>                    <span class="n">idx</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-3628" name="__codelineno-0-3628"></a>
<a id="__codelineno-0-3629" name="__codelineno-0-3629"></a>                <span class="n">mask_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="n">idx</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="n">idx</span><span class="p">[</span><span class="mi">1</span><span class="p">]]))</span>
<a id="__codelineno-0-3630" name="__codelineno-0-3630"></a>                <span class="n">pixels</span> <span class="o">=</span> <span class="n">get_pixels</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">mask_arr</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<a id="__codelineno-0-3631" name="__codelineno-0-3631"></a>                <span class="n">df_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pixels</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">band_names</span><span class="p">))</span>
<a id="__codelineno-0-3632" name="__codelineno-0-3632"></a>
<a id="__codelineno-0-3633" name="__codelineno-0-3633"></a>            <span class="c1"># Merge all the tiles.</span>
<a id="__codelineno-0-3634" name="__codelineno-0-3634"></a>            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">df_list</span><span class="p">)</span>
<a id="__codelineno-0-3635" name="__codelineno-0-3635"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3636" name="__codelineno-0-3636"></a>            <span class="n">arr</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">read_array</span><span class="p">()</span>
<a id="__codelineno-0-3637" name="__codelineno-0-3637"></a>
<a id="__codelineno-0-3638" name="__codelineno-0-3638"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-3639" name="__codelineno-0-3639"></a>                <span class="n">pixels</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<a id="__codelineno-0-3640" name="__codelineno-0-3640"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3641" name="__codelineno-0-3641"></a>                <span class="n">pixels</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-3642" name="__codelineno-0-3642"></a>                    <span class="n">arr</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<a id="__codelineno-0-3643" name="__codelineno-0-3643"></a>                    <span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">band_count</span><span class="p">,</span> <span class="n">src</span><span class="o">.</span><span class="n">columns</span> <span class="o">*</span> <span class="n">src</span><span class="o">.</span><span class="n">rows</span><span class="p">)</span>
<a id="__codelineno-0-3644" name="__codelineno-0-3644"></a>                    <span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<a id="__codelineno-0-3645" name="__codelineno-0-3645"></a>                <span class="p">)</span>
<a id="__codelineno-0-3646" name="__codelineno-0-3646"></a>            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pixels</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">band_names</span><span class="p">)</span>
<a id="__codelineno-0-3647" name="__codelineno-0-3647"></a>            <span class="c1"># mask no data values.</span>
<a id="__codelineno-0-3648" name="__codelineno-0-3648"></a>            <span class="k">if</span> <span class="n">src</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3649" name="__codelineno-0-3649"></a>                <span class="n">df</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-3650" name="__codelineno-0-3650"></a>            <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-3651" name="__codelineno-0-3651"></a>
<a id="__codelineno-0-3652" name="__codelineno-0-3652"></a>        <span class="k">if</span> <span class="n">add_geometry</span><span class="p">:</span>
<a id="__codelineno-0-3653" name="__codelineno-0-3653"></a>            <span class="k">if</span> <span class="n">add_geometry</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span>
<a id="__codelineno-0-3654" name="__codelineno-0-3654"></a>                <span class="n">coords</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">get_cell_points</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-3655" name="__codelineno-0-3655"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3656" name="__codelineno-0-3656"></a>                <span class="n">coords</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">get_cell_polygons</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-3657" name="__codelineno-0-3657"></a>
<a id="__codelineno-0-3658" name="__codelineno-0-3658"></a>        <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;burn_value&quot;</span><span class="p">,</span> <span class="s2">&quot;geometry&quot;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-3659" name="__codelineno-0-3659"></a>        <span class="k">if</span> <span class="n">add_geometry</span><span class="p">:</span>
<a id="__codelineno-0-3660" name="__codelineno-0-3660"></a>            <span class="n">df</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:],</span> <span class="n">geometry</span><span class="o">=</span><span class="n">coords</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">())</span>
<a id="__codelineno-0-3661" name="__codelineno-0-3661"></a>            <span class="n">df</span><span class="o">.</span><span class="n">set_crs</span><span class="p">(</span><span class="n">coords</span><span class="o">.</span><span class="n">crs</span><span class="o">.</span><span class="n">to_epsg</span><span class="p">())</span>
<a id="__codelineno-0-3662" name="__codelineno-0-3662"></a>
<a id="__codelineno-0-3663" name="__codelineno-0-3663"></a>        <span class="k">return</span> <span class="n">df</span>
<a id="__codelineno-0-3664" name="__codelineno-0-3664"></a>
<a id="__codelineno-0-3665" name="__codelineno-0-3665"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-3666" name="__codelineno-0-3666"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply a function to all domain cells.</span>
<a id="__codelineno-0-3667" name="__codelineno-0-3667"></a>
<a id="__codelineno-0-3668" name="__codelineno-0-3668"></a><span class="sd">        - apply method executes a mathematical operation on the raster array.</span>
<a id="__codelineno-0-3669" name="__codelineno-0-3669"></a><span class="sd">        - The apply method executes the function only on one cell at a time.</span>
<a id="__codelineno-0-3670" name="__codelineno-0-3670"></a>
<a id="__codelineno-0-3671" name="__codelineno-0-3671"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-3672" name="__codelineno-0-3672"></a><span class="sd">            func (function):</span>
<a id="__codelineno-0-3673" name="__codelineno-0-3673"></a><span class="sd">                Defined function that takes one input (the cell value).</span>
<a id="__codelineno-0-3674" name="__codelineno-0-3674"></a><span class="sd">            band (int):</span>
<a id="__codelineno-0-3675" name="__codelineno-0-3675"></a><span class="sd">                Band number.</span>
<a id="__codelineno-0-3676" name="__codelineno-0-3676"></a>
<a id="__codelineno-0-3677" name="__codelineno-0-3677"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-3678" name="__codelineno-0-3678"></a><span class="sd">            Dataset:</span>
<a id="__codelineno-0-3679" name="__codelineno-0-3679"></a><span class="sd">                Dataset object.</span>
<a id="__codelineno-0-3680" name="__codelineno-0-3680"></a>
<a id="__codelineno-0-3681" name="__codelineno-0-3681"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-3682" name="__codelineno-0-3682"></a><span class="sd">            - Create a dataset from an array filled with values between -1 and 1:</span>
<a id="__codelineno-0-3683" name="__codelineno-0-3683"></a>
<a id="__codelineno-0-3684" name="__codelineno-0-3684"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3685" name="__codelineno-0-3685"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-3686" name="__codelineno-0-3686"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.uniform(-1, 1, size=(5, 5))</span>
<a id="__codelineno-0-3687" name="__codelineno-0-3687"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-3688" name="__codelineno-0-3688"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-3689" name="__codelineno-0-3689"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-3690" name="__codelineno-0-3690"></a><span class="sd">              &gt;&gt;&gt; print(dataset.read_array()) # doctest: +SKIP</span>
<a id="__codelineno-0-3691" name="__codelineno-0-3691"></a><span class="sd">              [[ 0.94997539 -0.80083622 -0.30948769 -0.77439961 -0.83836424]</span>
<a id="__codelineno-0-3692" name="__codelineno-0-3692"></a><span class="sd">               [-0.36810158 -0.23979251  0.88051216 -0.46882913  0.64511056]</span>
<a id="__codelineno-0-3693" name="__codelineno-0-3693"></a><span class="sd">               [ 0.50585374 -0.46905902  0.67856589  0.2779605   0.05589759]</span>
<a id="__codelineno-0-3694" name="__codelineno-0-3694"></a><span class="sd">               [ 0.63382852 -0.49259597  0.18471423 -0.49308984 -0.52840286]</span>
<a id="__codelineno-0-3695" name="__codelineno-0-3695"></a><span class="sd">               [-0.34076174 -0.53073014 -0.18485789 -0.40033474 -0.38962938]]</span>
<a id="__codelineno-0-3696" name="__codelineno-0-3696"></a>
<a id="__codelineno-0-3697" name="__codelineno-0-3697"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3698" name="__codelineno-0-3698"></a>
<a id="__codelineno-0-3699" name="__codelineno-0-3699"></a><span class="sd">            - Apply the absolute function to the dataset:</span>
<a id="__codelineno-0-3700" name="__codelineno-0-3700"></a>
<a id="__codelineno-0-3701" name="__codelineno-0-3701"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3702" name="__codelineno-0-3702"></a><span class="sd">              &gt;&gt;&gt; abs_dataset = dataset.apply(np.abs)</span>
<a id="__codelineno-0-3703" name="__codelineno-0-3703"></a><span class="sd">              &gt;&gt;&gt; print(abs_dataset.read_array()) # doctest: +SKIP</span>
<a id="__codelineno-0-3704" name="__codelineno-0-3704"></a><span class="sd">              [[0.94997539 0.80083622 0.30948769 0.77439961 0.83836424]</span>
<a id="__codelineno-0-3705" name="__codelineno-0-3705"></a><span class="sd">               [0.36810158 0.23979251 0.88051216 0.46882913 0.64511056]</span>
<a id="__codelineno-0-3706" name="__codelineno-0-3706"></a><span class="sd">               [0.50585374 0.46905902 0.67856589 0.2779605  0.05589759]</span>
<a id="__codelineno-0-3707" name="__codelineno-0-3707"></a><span class="sd">               [0.63382852 0.49259597 0.18471423 0.49308984 0.52840286]</span>
<a id="__codelineno-0-3708" name="__codelineno-0-3708"></a><span class="sd">               [0.34076174 0.53073014 0.18485789 0.40033474 0.38962938]]</span>
<a id="__codelineno-0-3709" name="__codelineno-0-3709"></a>
<a id="__codelineno-0-3710" name="__codelineno-0-3710"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3711" name="__codelineno-0-3711"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-3712" name="__codelineno-0-3712"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
<a id="__codelineno-0-3713" name="__codelineno-0-3713"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The second argument should be a function&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3714" name="__codelineno-0-3714"></a>
<a id="__codelineno-0-3715" name="__codelineno-0-3715"></a>        <span class="n">no_data_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="n">band</span><span class="p">]</span>
<a id="__codelineno-0-3716" name="__codelineno-0-3716"></a>        <span class="n">src_array</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-3717" name="__codelineno-0-3717"></a>        <span class="n">dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gdal_dtype</span><span class="p">[</span><span class="n">band</span><span class="p">]</span>
<a id="__codelineno-0-3718" name="__codelineno-0-3718"></a>
<a id="__codelineno-0-3719" name="__codelineno-0-3719"></a>        <span class="c1"># fill the new array with the nodata value</span>
<a id="__codelineno-0-3720" name="__codelineno-0-3720"></a>        <span class="n">new_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">rows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span> <span class="o">*</span> <span class="n">no_data_value</span>
<a id="__codelineno-0-3721" name="__codelineno-0-3721"></a>        <span class="c1"># execute the function on each cell</span>
<a id="__codelineno-0-3722" name="__codelineno-0-3722"></a>        <span class="c1"># TODO: optimize executing a function over a whole array</span>
<a id="__codelineno-0-3723" name="__codelineno-0-3723"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rows</span><span class="p">):</span>
<a id="__codelineno-0-3724" name="__codelineno-0-3724"></a>            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
<a id="__codelineno-0-3725" name="__codelineno-0-3725"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">src_array</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">no_data_value</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">):</span>
<a id="__codelineno-0-3726" name="__codelineno-0-3726"></a>                    <span class="n">new_array</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">src_array</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span>
<a id="__codelineno-0-3727" name="__codelineno-0-3727"></a>
<a id="__codelineno-0-3728" name="__codelineno-0-3728"></a>        <span class="c1"># create the output raster</span>
<a id="__codelineno-0-3729" name="__codelineno-0-3729"></a>        <span class="n">dst</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_create_dataset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;MEM&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3730" name="__codelineno-0-3730"></a>        <span class="c1"># set the geotransform</span>
<a id="__codelineno-0-3731" name="__codelineno-0-3731"></a>        <span class="n">dst</span><span class="o">.</span><span class="n">SetGeoTransform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">)</span>
<a id="__codelineno-0-3732" name="__codelineno-0-3732"></a>        <span class="c1"># set the projection</span>
<a id="__codelineno-0-3733" name="__codelineno-0-3733"></a>        <span class="n">dst</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-0-3734" name="__codelineno-0-3734"></a>        <span class="n">dst_obj</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
<a id="__codelineno-0-3735" name="__codelineno-0-3735"></a>        <span class="n">dst_obj</span><span class="o">.</span><span class="n">_set_no_data_value</span><span class="p">(</span><span class="n">no_data_value</span><span class="o">=</span><span class="n">no_data_value</span><span class="p">)</span>
<a id="__codelineno-0-3736" name="__codelineno-0-3736"></a>        <span class="n">dst_obj</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">band</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">new_array</span><span class="p">)</span>
<a id="__codelineno-0-3737" name="__codelineno-0-3737"></a>
<a id="__codelineno-0-3738" name="__codelineno-0-3738"></a>        <span class="k">return</span> <span class="n">dst_obj</span>
<a id="__codelineno-0-3739" name="__codelineno-0-3739"></a>
<a id="__codelineno-0-3740" name="__codelineno-0-3740"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">fill</span><span class="p">(</span>
<a id="__codelineno-0-3741" name="__codelineno-0-3741"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-3742" name="__codelineno-0-3742"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Dataset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<a id="__codelineno-0-3743" name="__codelineno-0-3743"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Fill the domain cells with a certain value.</span>
<a id="__codelineno-0-3744" name="__codelineno-0-3744"></a>
<a id="__codelineno-0-3745" name="__codelineno-0-3745"></a><span class="sd">            Fill takes a raster and fills it with one value</span>
<a id="__codelineno-0-3746" name="__codelineno-0-3746"></a>
<a id="__codelineno-0-3747" name="__codelineno-0-3747"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-3748" name="__codelineno-0-3748"></a><span class="sd">            value (float | int):</span>
<a id="__codelineno-0-3749" name="__codelineno-0-3749"></a><span class="sd">                Numeric value to fill.</span>
<a id="__codelineno-0-3750" name="__codelineno-0-3750"></a><span class="sd">            inplace (bool):</span>
<a id="__codelineno-0-3751" name="__codelineno-0-3751"></a><span class="sd">                If True, the original dataset will be modified. If False, a new dataset will be created. Default is False.</span>
<a id="__codelineno-0-3752" name="__codelineno-0-3752"></a><span class="sd">            path (str):</span>
<a id="__codelineno-0-3753" name="__codelineno-0-3753"></a><span class="sd">                Path including the extension (.tif).</span>
<a id="__codelineno-0-3754" name="__codelineno-0-3754"></a>
<a id="__codelineno-0-3755" name="__codelineno-0-3755"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-3756" name="__codelineno-0-3756"></a><span class="sd">            Dataset:</span>
<a id="__codelineno-0-3757" name="__codelineno-0-3757"></a><span class="sd">                The resulting dataset if inplace is False; otherwise None.</span>
<a id="__codelineno-0-3758" name="__codelineno-0-3758"></a>
<a id="__codelineno-0-3759" name="__codelineno-0-3759"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-3760" name="__codelineno-0-3760"></a><span class="sd">            - Create a Dataset with 1 band, 5 rows, 5 columns, at the point lon/lat (0, 0):</span>
<a id="__codelineno-0-3761" name="__codelineno-0-3761"></a>
<a id="__codelineno-0-3762" name="__codelineno-0-3762"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3763" name="__codelineno-0-3763"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-3764" name="__codelineno-0-3764"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1, 5, size=(5, 5))</span>
<a id="__codelineno-0-3765" name="__codelineno-0-3765"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-3766" name="__codelineno-0-3766"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-3767" name="__codelineno-0-3767"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-3768" name="__codelineno-0-3768"></a><span class="sd">              &gt;&gt;&gt; print(dataset.read_array()) # doctest: +SKIP</span>
<a id="__codelineno-0-3769" name="__codelineno-0-3769"></a><span class="sd">              [[1 1 3 1 2]</span>
<a id="__codelineno-0-3770" name="__codelineno-0-3770"></a><span class="sd">               [2 2 2 1 2]</span>
<a id="__codelineno-0-3771" name="__codelineno-0-3771"></a><span class="sd">               [2 2 3 1 3]</span>
<a id="__codelineno-0-3772" name="__codelineno-0-3772"></a><span class="sd">               [3 4 3 3 4]</span>
<a id="__codelineno-0-3773" name="__codelineno-0-3773"></a><span class="sd">               [4 4 2 1 1]]</span>
<a id="__codelineno-0-3774" name="__codelineno-0-3774"></a><span class="sd">              &gt;&gt;&gt; new_dataset = dataset.fill(10)</span>
<a id="__codelineno-0-3775" name="__codelineno-0-3775"></a><span class="sd">              &gt;&gt;&gt; print(new_dataset.read_array())</span>
<a id="__codelineno-0-3776" name="__codelineno-0-3776"></a><span class="sd">              [[10 10 10 10 10]</span>
<a id="__codelineno-0-3777" name="__codelineno-0-3777"></a><span class="sd">               [10 10 10 10 10]</span>
<a id="__codelineno-0-3778" name="__codelineno-0-3778"></a><span class="sd">               [10 10 10 10 10]</span>
<a id="__codelineno-0-3779" name="__codelineno-0-3779"></a><span class="sd">               [10 10 10 10 10]</span>
<a id="__codelineno-0-3780" name="__codelineno-0-3780"></a><span class="sd">               [10 10 10 10 10]]</span>
<a id="__codelineno-0-3781" name="__codelineno-0-3781"></a>
<a id="__codelineno-0-3782" name="__codelineno-0-3782"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3783" name="__codelineno-0-3783"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-3784" name="__codelineno-0-3784"></a>        <span class="n">no_data_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-3785" name="__codelineno-0-3785"></a>        <span class="n">src_array</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
<a id="__codelineno-0-3786" name="__codelineno-0-3786"></a>
<a id="__codelineno-0-3787" name="__codelineno-0-3787"></a>        <span class="k">if</span> <span class="n">no_data_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3788" name="__codelineno-0-3788"></a>            <span class="n">no_data_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<a id="__codelineno-0-3789" name="__codelineno-0-3789"></a>
<a id="__codelineno-0-3790" name="__codelineno-0-3790"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">no_data_value</span><span class="p">):</span>
<a id="__codelineno-0-3791" name="__codelineno-0-3791"></a>            <span class="n">src_array</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">src_array</span><span class="p">,</span> <span class="n">no_data_value</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.000001</span><span class="p">)]</span> <span class="o">=</span> <span class="n">value</span>
<a id="__codelineno-0-3792" name="__codelineno-0-3792"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3793" name="__codelineno-0-3793"></a>            <span class="n">src_array</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">src_array</span><span class="p">)]</span> <span class="o">=</span> <span class="n">value</span>
<a id="__codelineno-0-3794" name="__codelineno-0-3794"></a>
<a id="__codelineno-0-3795" name="__codelineno-0-3795"></a>        <span class="n">dst</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">dataset_like</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">src_array</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-3796" name="__codelineno-0-3796"></a>        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
<a id="__codelineno-0-3797" name="__codelineno-0-3797"></a>            <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dst</span><span class="o">.</span><span class="n">raster</span><span class="p">)</span>
<a id="__codelineno-0-3798" name="__codelineno-0-3798"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3799" name="__codelineno-0-3799"></a>            <span class="k">return</span> <span class="n">dst</span>
<a id="__codelineno-0-3800" name="__codelineno-0-3800"></a>
<a id="__codelineno-0-3801" name="__codelineno-0-3801"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">resample</span><span class="p">(</span>
<a id="__codelineno-0-3802" name="__codelineno-0-3802"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">cell_size</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;nearest neighbor&quot;</span>
<a id="__codelineno-0-3803" name="__codelineno-0-3803"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-3804" name="__codelineno-0-3804"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;resample.</span>
<a id="__codelineno-0-3805" name="__codelineno-0-3805"></a>
<a id="__codelineno-0-3806" name="__codelineno-0-3806"></a><span class="sd">        resample method reprojects a raster to any projection (default the WGS84 web mercator projection,</span>
<a id="__codelineno-0-3807" name="__codelineno-0-3807"></a><span class="sd">        without resampling). The function returns a GDAL in-memory file object.</span>
<a id="__codelineno-0-3808" name="__codelineno-0-3808"></a>
<a id="__codelineno-0-3809" name="__codelineno-0-3809"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-3810" name="__codelineno-0-3810"></a><span class="sd">            cell_size (int):</span>
<a id="__codelineno-0-3811" name="__codelineno-0-3811"></a><span class="sd">                New cell size to resample the raster. If None, raster will not be resampled.</span>
<a id="__codelineno-0-3812" name="__codelineno-0-3812"></a><span class="sd">            method (str):</span>
<a id="__codelineno-0-3813" name="__codelineno-0-3813"></a><span class="sd">                Resampling method: &quot;nearest neighbor&quot;, &quot;cubic&quot;, or &quot;bilinear&quot;. Default is &quot;nearest neighbor&quot;.</span>
<a id="__codelineno-0-3814" name="__codelineno-0-3814"></a>
<a id="__codelineno-0-3815" name="__codelineno-0-3815"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-3816" name="__codelineno-0-3816"></a><span class="sd">            Dataset:</span>
<a id="__codelineno-0-3817" name="__codelineno-0-3817"></a><span class="sd">                Dataset object.</span>
<a id="__codelineno-0-3818" name="__codelineno-0-3818"></a>
<a id="__codelineno-0-3819" name="__codelineno-0-3819"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-3820" name="__codelineno-0-3820"></a><span class="sd">            - Create a Dataset with 4 bands, 10 rows, 10 columns, at lon/lat (0, 0):</span>
<a id="__codelineno-0-3821" name="__codelineno-0-3821"></a>
<a id="__codelineno-0-3822" name="__codelineno-0-3822"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3823" name="__codelineno-0-3823"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-3824" name="__codelineno-0-3824"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(4, 10, 10)</span>
<a id="__codelineno-0-3825" name="__codelineno-0-3825"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-3826" name="__codelineno-0-3826"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-3827" name="__codelineno-0-3827"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-3828" name="__codelineno-0-3828"></a><span class="sd">              &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-3829" name="__codelineno-0-3829"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-3830" name="__codelineno-0-3830"></a><span class="sd">                          Cell size: 0.05</span>
<a id="__codelineno-0-3831" name="__codelineno-0-3831"></a><span class="sd">                          Dimension: 10 * 10</span>
<a id="__codelineno-0-3832" name="__codelineno-0-3832"></a><span class="sd">                          EPSG: 4326</span>
<a id="__codelineno-0-3833" name="__codelineno-0-3833"></a><span class="sd">                          Number of Bands: 4</span>
<a id="__codelineno-0-3834" name="__codelineno-0-3834"></a><span class="sd">                          Band names: [&#39;Band_1&#39;, &#39;Band_2&#39;, &#39;Band_3&#39;, &#39;Band_4&#39;]</span>
<a id="__codelineno-0-3835" name="__codelineno-0-3835"></a><span class="sd">                          Mask: -9999.0</span>
<a id="__codelineno-0-3836" name="__codelineno-0-3836"></a><span class="sd">                          Data type: float64</span>
<a id="__codelineno-0-3837" name="__codelineno-0-3837"></a><span class="sd">                          File: ...</span>
<a id="__codelineno-0-3838" name="__codelineno-0-3838"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-3839" name="__codelineno-0-3839"></a><span class="sd">              &gt;&gt;&gt; dataset.plot(band=0)</span>
<a id="__codelineno-0-3840" name="__codelineno-0-3840"></a><span class="sd">              (&lt;Figure size 800x800 with 2 Axes&gt;, &lt;Axes: &gt;)</span>
<a id="__codelineno-0-3841" name="__codelineno-0-3841"></a>
<a id="__codelineno-0-3842" name="__codelineno-0-3842"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3843" name="__codelineno-0-3843"></a><span class="sd">              ![resample-source](./../_images/dataset/resample-source.png)</span>
<a id="__codelineno-0-3844" name="__codelineno-0-3844"></a>
<a id="__codelineno-0-3845" name="__codelineno-0-3845"></a><span class="sd">            - Resample the raster to a new cell size of 0.1:</span>
<a id="__codelineno-0-3846" name="__codelineno-0-3846"></a>
<a id="__codelineno-0-3847" name="__codelineno-0-3847"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3848" name="__codelineno-0-3848"></a><span class="sd">              &gt;&gt;&gt; new_dataset = dataset.resample(cell_size=0.1)</span>
<a id="__codelineno-0-3849" name="__codelineno-0-3849"></a><span class="sd">              &gt;&gt;&gt; print(new_dataset)</span>
<a id="__codelineno-0-3850" name="__codelineno-0-3850"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-3851" name="__codelineno-0-3851"></a><span class="sd">                          Cell size: 0.1</span>
<a id="__codelineno-0-3852" name="__codelineno-0-3852"></a><span class="sd">                          Dimension: 5 * 5</span>
<a id="__codelineno-0-3853" name="__codelineno-0-3853"></a><span class="sd">                          EPSG: 4326</span>
<a id="__codelineno-0-3854" name="__codelineno-0-3854"></a><span class="sd">                          Number of Bands: 4</span>
<a id="__codelineno-0-3855" name="__codelineno-0-3855"></a><span class="sd">                          Band names: [&#39;Band_1&#39;, &#39;Band_2&#39;, &#39;Band_3&#39;, &#39;Band_4&#39;]</span>
<a id="__codelineno-0-3856" name="__codelineno-0-3856"></a><span class="sd">                          Mask: -9999.0</span>
<a id="__codelineno-0-3857" name="__codelineno-0-3857"></a><span class="sd">                          Data type: float64</span>
<a id="__codelineno-0-3858" name="__codelineno-0-3858"></a><span class="sd">                          File:...</span>
<a id="__codelineno-0-3859" name="__codelineno-0-3859"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-3860" name="__codelineno-0-3860"></a><span class="sd">              &gt;&gt;&gt; new_dataset.plot(band=0)</span>
<a id="__codelineno-0-3861" name="__codelineno-0-3861"></a><span class="sd">              (&lt;Figure size 800x800 with 2 Axes&gt;, &lt;Axes: &gt;)</span>
<a id="__codelineno-0-3862" name="__codelineno-0-3862"></a>
<a id="__codelineno-0-3863" name="__codelineno-0-3863"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3864" name="__codelineno-0-3864"></a><span class="sd">              ![resample-new](./../_images/dataset/resample-new.png)</span>
<a id="__codelineno-0-3865" name="__codelineno-0-3865"></a>
<a id="__codelineno-0-3866" name="__codelineno-0-3866"></a><span class="sd">            - Resampling the dataset from cell_size 0.05 to 0.1 degrees reduced the number of cells to 5 in each dimension instead of 10.</span>
<a id="__codelineno-0-3867" name="__codelineno-0-3867"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-3868" name="__codelineno-0-3868"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-3869" name="__codelineno-0-3869"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-3870" name="__codelineno-0-3870"></a>                <span class="s2">&quot;Please enter a correct method, for more information, see documentation&quot;</span>
<a id="__codelineno-0-3871" name="__codelineno-0-3871"></a>            <span class="p">)</span>
<a id="__codelineno-0-3872" name="__codelineno-0-3872"></a>        <span class="k">if</span> <span class="n">method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">INTERPOLATION_METHODS</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<a id="__codelineno-0-3873" name="__codelineno-0-3873"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-3874" name="__codelineno-0-3874"></a>                <span class="sa">f</span><span class="s2">&quot;The given interpolation method does not exist, existing methods are </span><span class="si">{</span><span class="n">INTERPOLATION_METHODS</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-3875" name="__codelineno-0-3875"></a>            <span class="p">)</span>
<a id="__codelineno-0-3876" name="__codelineno-0-3876"></a>
<a id="__codelineno-0-3877" name="__codelineno-0-3877"></a>        <span class="n">method</span> <span class="o">=</span> <span class="n">INTERPOLATION_METHODS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
<a id="__codelineno-0-3878" name="__codelineno-0-3878"></a>
<a id="__codelineno-0-3879" name="__codelineno-0-3879"></a>        <span class="n">sr_src</span> <span class="o">=</span> <span class="n">osr</span><span class="o">.</span><span class="n">SpatialReference</span><span class="p">(</span><span class="n">wkt</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-0-3880" name="__codelineno-0-3880"></a>
<a id="__codelineno-0-3881" name="__codelineno-0-3881"></a>        <span class="n">ulx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-3882" name="__codelineno-0-3882"></a>        <span class="n">uly</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-0-3883" name="__codelineno-0-3883"></a>        <span class="c1"># transform the right lower corner point</span>
<a id="__codelineno-0-3884" name="__codelineno-0-3884"></a>        <span class="n">lrx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span>
<a id="__codelineno-0-3885" name="__codelineno-0-3885"></a>        <span class="n">lry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span>
<a id="__codelineno-0-3886" name="__codelineno-0-3886"></a>
<a id="__codelineno-0-3887" name="__codelineno-0-3887"></a>        <span class="c1"># new geotransform</span>
<a id="__codelineno-0-3888" name="__codelineno-0-3888"></a>        <span class="n">new_geo</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-3889" name="__codelineno-0-3889"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-0-3890" name="__codelineno-0-3890"></a>            <span class="n">cell_size</span><span class="p">,</span>
<a id="__codelineno-0-3891" name="__codelineno-0-3891"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
<a id="__codelineno-0-3892" name="__codelineno-0-3892"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
<a id="__codelineno-0-3893" name="__codelineno-0-3893"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
<a id="__codelineno-0-3894" name="__codelineno-0-3894"></a>            <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">cell_size</span><span class="p">,</span>
<a id="__codelineno-0-3895" name="__codelineno-0-3895"></a>        <span class="p">)</span>
<a id="__codelineno-0-3896" name="__codelineno-0-3896"></a>        <span class="c1"># create a new raster</span>
<a id="__codelineno-0-3897" name="__codelineno-0-3897"></a>        <span class="n">cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">lrx</span> <span class="o">-</span> <span class="n">ulx</span><span class="p">)</span> <span class="o">/</span> <span class="n">cell_size</span><span class="p">))</span>
<a id="__codelineno-0-3898" name="__codelineno-0-3898"></a>        <span class="n">rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">uly</span> <span class="o">-</span> <span class="n">lry</span><span class="p">)</span> <span class="o">/</span> <span class="n">cell_size</span><span class="p">))</span>
<a id="__codelineno-0-3899" name="__codelineno-0-3899"></a>        <span class="n">dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gdal_dtype</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-3900" name="__codelineno-0-3900"></a>        <span class="n">bands</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span>
<a id="__codelineno-0-3901" name="__codelineno-0-3901"></a>
<a id="__codelineno-0-3902" name="__codelineno-0-3902"></a>        <span class="n">dst</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_create_dataset</span><span class="p">(</span><span class="n">cols</span><span class="p">,</span> <span class="n">rows</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">dtype</span><span class="p">)</span>
<a id="__codelineno-0-3903" name="__codelineno-0-3903"></a>        <span class="c1"># set the geotransform</span>
<a id="__codelineno-0-3904" name="__codelineno-0-3904"></a>        <span class="n">dst</span><span class="o">.</span><span class="n">SetGeoTransform</span><span class="p">(</span><span class="n">new_geo</span><span class="p">)</span>
<a id="__codelineno-0-3905" name="__codelineno-0-3905"></a>        <span class="c1"># set the projection</span>
<a id="__codelineno-0-3906" name="__codelineno-0-3906"></a>        <span class="n">dst</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">sr_src</span><span class="o">.</span><span class="n">ExportToWkt</span><span class="p">())</span>
<a id="__codelineno-0-3907" name="__codelineno-0-3907"></a>        <span class="n">dst_obj</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="s2">&quot;write&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3908" name="__codelineno-0-3908"></a>        <span class="c1"># set the no data value</span>
<a id="__codelineno-0-3909" name="__codelineno-0-3909"></a>        <span class="n">dst_obj</span><span class="o">.</span><span class="n">_set_no_data_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">)</span>
<a id="__codelineno-0-3910" name="__codelineno-0-3910"></a>        <span class="c1"># perform the projection &amp; resampling</span>
<a id="__codelineno-0-3911" name="__codelineno-0-3911"></a>        <span class="n">gdal</span><span class="o">.</span><span class="n">ReprojectImage</span><span class="p">(</span>
<a id="__codelineno-0-3912" name="__codelineno-0-3912"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span>
<a id="__codelineno-0-3913" name="__codelineno-0-3913"></a>            <span class="n">dst_obj</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span>
<a id="__codelineno-0-3914" name="__codelineno-0-3914"></a>            <span class="n">sr_src</span><span class="o">.</span><span class="n">ExportToWkt</span><span class="p">(),</span>
<a id="__codelineno-0-3915" name="__codelineno-0-3915"></a>            <span class="n">sr_src</span><span class="o">.</span><span class="n">ExportToWkt</span><span class="p">(),</span>
<a id="__codelineno-0-3916" name="__codelineno-0-3916"></a>            <span class="n">method</span><span class="p">,</span>
<a id="__codelineno-0-3917" name="__codelineno-0-3917"></a>        <span class="p">)</span>
<a id="__codelineno-0-3918" name="__codelineno-0-3918"></a>
<a id="__codelineno-0-3919" name="__codelineno-0-3919"></a>        <span class="k">return</span> <span class="n">dst_obj</span>
<a id="__codelineno-0-3920" name="__codelineno-0-3920"></a>
<a id="__codelineno-0-3921" name="__codelineno-0-3921"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_reproject_with_ReprojectImage</span><span class="p">(</span>
<a id="__codelineno-0-3922" name="__codelineno-0-3922"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">to_epsg</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;nearest neighbor&quot;</span>
<a id="__codelineno-0-3923" name="__codelineno-0-3923"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-3924" name="__codelineno-0-3924"></a>        <span class="n">src_gt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span>
<a id="__codelineno-0-3925" name="__codelineno-0-3925"></a>        <span class="n">src_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span>
<a id="__codelineno-0-3926" name="__codelineno-0-3926"></a>        <span class="n">src_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span>
<a id="__codelineno-0-3927" name="__codelineno-0-3927"></a>
<a id="__codelineno-0-3928" name="__codelineno-0-3928"></a>        <span class="n">src_sr</span> <span class="o">=</span> <span class="n">osr</span><span class="o">.</span><span class="n">SpatialReference</span><span class="p">(</span><span class="n">wkt</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-0-3929" name="__codelineno-0-3929"></a>        <span class="n">src_epsg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">epsg</span>
<a id="__codelineno-0-3930" name="__codelineno-0-3930"></a>
<a id="__codelineno-0-3931" name="__codelineno-0-3931"></a>        <span class="n">dst_sr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_sr_from_epsg</span><span class="p">(</span><span class="n">to_epsg</span><span class="p">)</span>
<a id="__codelineno-0-3932" name="__codelineno-0-3932"></a>
<a id="__codelineno-0-3933" name="__codelineno-0-3933"></a>        <span class="c1"># in case the source crs is GCS and longitude is in the west hemisphere, gdal</span>
<a id="__codelineno-0-3934" name="__codelineno-0-3934"></a>        <span class="c1"># reads longitude from 0 to 360 and a transformation factor wont work with values</span>
<a id="__codelineno-0-3935" name="__codelineno-0-3935"></a>        <span class="c1"># greater than 180</span>
<a id="__codelineno-0-3936" name="__codelineno-0-3936"></a>        <span class="k">if</span> <span class="n">src_epsg</span> <span class="o">!=</span> <span class="n">to_epsg</span><span class="p">:</span>
<a id="__codelineno-0-3937" name="__codelineno-0-3937"></a>            <span class="k">if</span> <span class="n">src_epsg</span> <span class="o">==</span> <span class="s2">&quot;4326&quot;</span> <span class="ow">and</span> <span class="n">src_gt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
<a id="__codelineno-0-3938" name="__codelineno-0-3938"></a>                <span class="n">lng_new</span> <span class="o">=</span> <span class="n">src_gt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">360</span>
<a id="__codelineno-0-3939" name="__codelineno-0-3939"></a>                <span class="c1"># transformation factors</span>
<a id="__codelineno-0-3940" name="__codelineno-0-3940"></a>                <span class="n">tx</span> <span class="o">=</span> <span class="n">osr</span><span class="o">.</span><span class="n">CoordinateTransformation</span><span class="p">(</span><span class="n">src_sr</span><span class="p">,</span> <span class="n">dst_sr</span><span class="p">)</span>
<a id="__codelineno-0-3941" name="__codelineno-0-3941"></a>                <span class="c1"># transform the right upper corner point</span>
<a id="__codelineno-0-3942" name="__codelineno-0-3942"></a>                <span class="p">(</span><span class="n">ulx</span><span class="p">,</span> <span class="n">uly</span><span class="p">,</span> <span class="n">ulz</span><span class="p">)</span> <span class="o">=</span> <span class="n">tx</span><span class="o">.</span><span class="n">TransformPoint</span><span class="p">(</span><span class="n">lng_new</span><span class="p">,</span> <span class="n">src_gt</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<a id="__codelineno-0-3943" name="__codelineno-0-3943"></a>                <span class="c1"># transform the right lower corner point</span>
<a id="__codelineno-0-3944" name="__codelineno-0-3944"></a>                <span class="p">(</span><span class="n">lrx</span><span class="p">,</span> <span class="n">lry</span><span class="p">,</span> <span class="n">lrz</span><span class="p">)</span> <span class="o">=</span> <span class="n">tx</span><span class="o">.</span><span class="n">TransformPoint</span><span class="p">(</span>
<a id="__codelineno-0-3945" name="__codelineno-0-3945"></a>                    <span class="n">lng_new</span> <span class="o">+</span> <span class="n">src_gt</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">src_x</span><span class="p">,</span> <span class="n">src_gt</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="n">src_gt</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">*</span> <span class="n">src_y</span>
<a id="__codelineno-0-3946" name="__codelineno-0-3946"></a>                <span class="p">)</span>
<a id="__codelineno-0-3947" name="__codelineno-0-3947"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3948" name="__codelineno-0-3948"></a>                <span class="n">xs</span> <span class="o">=</span> <span class="p">[</span><span class="n">src_gt</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">src_gt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">src_gt</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">src_x</span><span class="p">]</span>
<a id="__codelineno-0-3949" name="__codelineno-0-3949"></a>                <span class="n">ys</span> <span class="o">=</span> <span class="p">[</span><span class="n">src_gt</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">src_gt</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="n">src_gt</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">*</span> <span class="n">src_y</span><span class="p">]</span>
<a id="__codelineno-0-3950" name="__codelineno-0-3950"></a>
<a id="__codelineno-0-3951" name="__codelineno-0-3951"></a>                <span class="p">[</span><span class="n">uly</span><span class="p">,</span> <span class="n">lry</span><span class="p">],</span> <span class="p">[</span><span class="n">ulx</span><span class="p">,</span> <span class="n">lrx</span><span class="p">]</span> <span class="o">=</span> <span class="n">FeatureCollection</span><span class="o">.</span><span class="n">reproject_points</span><span class="p">(</span>
<a id="__codelineno-0-3952" name="__codelineno-0-3952"></a>                    <span class="n">ys</span><span class="p">,</span> <span class="n">xs</span><span class="p">,</span> <span class="n">from_epsg</span><span class="o">=</span><span class="n">src_epsg</span><span class="p">,</span> <span class="n">to_epsg</span><span class="o">=</span><span class="n">to_epsg</span>
<a id="__codelineno-0-3953" name="__codelineno-0-3953"></a>                <span class="p">)</span>
<a id="__codelineno-0-3954" name="__codelineno-0-3954"></a>                <span class="c1"># old transform</span>
<a id="__codelineno-0-3955" name="__codelineno-0-3955"></a>                <span class="c1"># # transform the right upper corner point</span>
<a id="__codelineno-0-3956" name="__codelineno-0-3956"></a>                <span class="c1"># (ulx, uly, ulz) = tx.TransformPoint(src_gt[0], src_gt[3])</span>
<a id="__codelineno-0-3957" name="__codelineno-0-3957"></a>                <span class="c1"># # transform the right lower corner point</span>
<a id="__codelineno-0-3958" name="__codelineno-0-3958"></a>                <span class="c1"># (lrx, lry, lrz) = tx.TransformPoint(</span>
<a id="__codelineno-0-3959" name="__codelineno-0-3959"></a>                <span class="c1">#     src_gt[0] + src_gt[1] * src_x, src_gt[3] + src_gt[5] * src_y</span>
<a id="__codelineno-0-3960" name="__codelineno-0-3960"></a>                <span class="c1"># )</span>
<a id="__codelineno-0-3961" name="__codelineno-0-3961"></a>
<a id="__codelineno-0-3962" name="__codelineno-0-3962"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3963" name="__codelineno-0-3963"></a>            <span class="n">ulx</span> <span class="o">=</span> <span class="n">src_gt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-3964" name="__codelineno-0-3964"></a>            <span class="n">uly</span> <span class="o">=</span> <span class="n">src_gt</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-0-3965" name="__codelineno-0-3965"></a>            <span class="n">lrx</span> <span class="o">=</span> <span class="n">src_gt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">src_gt</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">src_x</span>
<a id="__codelineno-0-3966" name="__codelineno-0-3966"></a>            <span class="n">lry</span> <span class="o">=</span> <span class="n">src_gt</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="n">src_gt</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">*</span> <span class="n">src_y</span>
<a id="__codelineno-0-3967" name="__codelineno-0-3967"></a>
<a id="__codelineno-0-3968" name="__codelineno-0-3968"></a>        <span class="c1"># get the cell size in the source raster and convert it to the new crs</span>
<a id="__codelineno-0-3969" name="__codelineno-0-3969"></a>        <span class="c1"># x coordinates or longitudes</span>
<a id="__codelineno-0-3970" name="__codelineno-0-3970"></a>        <span class="n">xs</span> <span class="o">=</span> <span class="p">[</span><span class="n">src_gt</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">src_gt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">src_gt</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
<a id="__codelineno-0-3971" name="__codelineno-0-3971"></a>        <span class="c1"># y coordinates or latitudes</span>
<a id="__codelineno-0-3972" name="__codelineno-0-3972"></a>        <span class="n">ys</span> <span class="o">=</span> <span class="p">[</span><span class="n">src_gt</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">src_gt</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
<a id="__codelineno-0-3973" name="__codelineno-0-3973"></a>
<a id="__codelineno-0-3974" name="__codelineno-0-3974"></a>        <span class="k">if</span> <span class="n">src_epsg</span> <span class="o">!=</span> <span class="n">to_epsg</span><span class="p">:</span>
<a id="__codelineno-0-3975" name="__codelineno-0-3975"></a>            <span class="c1"># transform the two-point coordinates to the new crs to calculate the new cell size</span>
<a id="__codelineno-0-3976" name="__codelineno-0-3976"></a>            <span class="n">new_ys</span><span class="p">,</span> <span class="n">new_xs</span> <span class="o">=</span> <span class="n">FeatureCollection</span><span class="o">.</span><span class="n">reproject_points</span><span class="p">(</span>
<a id="__codelineno-0-3977" name="__codelineno-0-3977"></a>                <span class="n">ys</span><span class="p">,</span> <span class="n">xs</span><span class="p">,</span> <span class="n">from_epsg</span><span class="o">=</span><span class="n">src_epsg</span><span class="p">,</span> <span class="n">to_epsg</span><span class="o">=</span><span class="n">to_epsg</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="mi">6</span>
<a id="__codelineno-0-3978" name="__codelineno-0-3978"></a>            <span class="p">)</span>
<a id="__codelineno-0-3979" name="__codelineno-0-3979"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3980" name="__codelineno-0-3980"></a>            <span class="n">new_xs</span> <span class="o">=</span> <span class="n">xs</span>
<a id="__codelineno-0-3981" name="__codelineno-0-3981"></a>            <span class="c1"># new_ys = ys</span>
<a id="__codelineno-0-3982" name="__codelineno-0-3982"></a>
<a id="__codelineno-0-3983" name="__codelineno-0-3983"></a>        <span class="c1"># TODO: the function does not always maintain alignment, based on the conversion of the cell_size and the</span>
<a id="__codelineno-0-3984" name="__codelineno-0-3984"></a>        <span class="c1"># pivot point</span>
<a id="__codelineno-0-3985" name="__codelineno-0-3985"></a>        <span class="n">pixel_spacing</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">new_xs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">new_xs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-3986" name="__codelineno-0-3986"></a>
<a id="__codelineno-0-3987" name="__codelineno-0-3987"></a>        <span class="c1"># create a new raster</span>
<a id="__codelineno-0-3988" name="__codelineno-0-3988"></a>        <span class="n">cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">lrx</span> <span class="o">-</span> <span class="n">ulx</span><span class="p">)</span> <span class="o">/</span> <span class="n">pixel_spacing</span><span class="p">))</span>
<a id="__codelineno-0-3989" name="__codelineno-0-3989"></a>        <span class="n">rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">uly</span> <span class="o">-</span> <span class="n">lry</span><span class="p">)</span> <span class="o">/</span> <span class="n">pixel_spacing</span><span class="p">))</span>
<a id="__codelineno-0-3990" name="__codelineno-0-3990"></a>
<a id="__codelineno-0-3991" name="__codelineno-0-3991"></a>        <span class="n">dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gdal_dtype</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-3992" name="__codelineno-0-3992"></a>        <span class="n">dst</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_create_dataset</span><span class="p">(</span><span class="n">cols</span><span class="p">,</span> <span class="n">rows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">,</span> <span class="n">dtype</span><span class="p">)</span>
<a id="__codelineno-0-3993" name="__codelineno-0-3993"></a>
<a id="__codelineno-0-3994" name="__codelineno-0-3994"></a>        <span class="c1"># new geotransform</span>
<a id="__codelineno-0-3995" name="__codelineno-0-3995"></a>        <span class="n">new_geo</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-3996" name="__codelineno-0-3996"></a>            <span class="n">ulx</span><span class="p">,</span>
<a id="__codelineno-0-3997" name="__codelineno-0-3997"></a>            <span class="n">pixel_spacing</span><span class="p">,</span>
<a id="__codelineno-0-3998" name="__codelineno-0-3998"></a>            <span class="n">src_gt</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
<a id="__codelineno-0-3999" name="__codelineno-0-3999"></a>            <span class="n">uly</span><span class="p">,</span>
<a id="__codelineno-0-4000" name="__codelineno-0-4000"></a>            <span class="n">src_gt</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
<a id="__codelineno-0-4001" name="__codelineno-0-4001"></a>            <span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">src_gt</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="n">pixel_spacing</span><span class="p">,</span>
<a id="__codelineno-0-4002" name="__codelineno-0-4002"></a>        <span class="p">)</span>
<a id="__codelineno-0-4003" name="__codelineno-0-4003"></a>        <span class="c1"># set the geotransform</span>
<a id="__codelineno-0-4004" name="__codelineno-0-4004"></a>        <span class="n">dst</span><span class="o">.</span><span class="n">SetGeoTransform</span><span class="p">(</span><span class="n">new_geo</span><span class="p">)</span>
<a id="__codelineno-0-4005" name="__codelineno-0-4005"></a>        <span class="c1"># set the projection</span>
<a id="__codelineno-0-4006" name="__codelineno-0-4006"></a>        <span class="n">dst</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">dst_sr</span><span class="o">.</span><span class="n">ExportToWkt</span><span class="p">())</span>
<a id="__codelineno-0-4007" name="__codelineno-0-4007"></a>        <span class="c1"># set the no data value</span>
<a id="__codelineno-0-4008" name="__codelineno-0-4008"></a>        <span class="n">dst_obj</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
<a id="__codelineno-0-4009" name="__codelineno-0-4009"></a>        <span class="n">dst_obj</span><span class="o">.</span><span class="n">_set_no_data_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">)</span>
<a id="__codelineno-0-4010" name="__codelineno-0-4010"></a>        <span class="c1"># perform the projection &amp; resampling</span>
<a id="__codelineno-0-4011" name="__codelineno-0-4011"></a>        <span class="n">gdal</span><span class="o">.</span><span class="n">ReprojectImage</span><span class="p">(</span>
<a id="__codelineno-0-4012" name="__codelineno-0-4012"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span>
<a id="__codelineno-0-4013" name="__codelineno-0-4013"></a>            <span class="n">dst_obj</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span>
<a id="__codelineno-0-4014" name="__codelineno-0-4014"></a>            <span class="n">src_sr</span><span class="o">.</span><span class="n">ExportToWkt</span><span class="p">(),</span>
<a id="__codelineno-0-4015" name="__codelineno-0-4015"></a>            <span class="n">dst_sr</span><span class="o">.</span><span class="n">ExportToWkt</span><span class="p">(),</span>
<a id="__codelineno-0-4016" name="__codelineno-0-4016"></a>            <span class="n">method</span><span class="p">,</span>
<a id="__codelineno-0-4017" name="__codelineno-0-4017"></a>        <span class="p">)</span>
<a id="__codelineno-0-4018" name="__codelineno-0-4018"></a>        <span class="k">return</span> <span class="n">dst_obj</span>
<a id="__codelineno-0-4019" name="__codelineno-0-4019"></a>
<a id="__codelineno-0-4020" name="__codelineno-0-4020"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">fill_gaps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">src_array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-4021" name="__codelineno-0-4021"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Fill gaps in src_array using nearest neighbors where mask indicates valid cells.</span>
<a id="__codelineno-0-4022" name="__codelineno-0-4022"></a>
<a id="__codelineno-0-4023" name="__codelineno-0-4023"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4024" name="__codelineno-0-4024"></a><span class="sd">            mask (Dataset | np.ndarray):</span>
<a id="__codelineno-0-4025" name="__codelineno-0-4025"></a><span class="sd">                Mask dataset or array used to determine valid cells.</span>
<a id="__codelineno-0-4026" name="__codelineno-0-4026"></a><span class="sd">            src_array (np.ndarray):</span>
<a id="__codelineno-0-4027" name="__codelineno-0-4027"></a><span class="sd">                Source array whose gaps will be filled.</span>
<a id="__codelineno-0-4028" name="__codelineno-0-4028"></a>
<a id="__codelineno-0-4029" name="__codelineno-0-4029"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4030" name="__codelineno-0-4030"></a><span class="sd">            np.ndarray: The source array with gaps filled where applicable.</span>
<a id="__codelineno-0-4031" name="__codelineno-0-4031"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4032" name="__codelineno-0-4032"></a>        <span class="c1"># align function only equate the no of rows and columns only</span>
<a id="__codelineno-0-4033" name="__codelineno-0-4033"></a>        <span class="c1"># match no_data_value inserts no_data_value in src raster to all places like mask</span>
<a id="__codelineno-0-4034" name="__codelineno-0-4034"></a>        <span class="c1"># still places that has no_data_value in the src raster, but it is not no_data_value in the mask</span>
<a id="__codelineno-0-4035" name="__codelineno-0-4035"></a>        <span class="c1"># and now has to be filled with values</span>
<a id="__codelineno-0-4036" name="__codelineno-0-4036"></a>        <span class="c1"># compare no of element that is not no_data_value in both rasters to make sure they are matched</span>
<a id="__codelineno-0-4037" name="__codelineno-0-4037"></a>        <span class="c1"># if both inputs are rasters</span>
<a id="__codelineno-0-4038" name="__codelineno-0-4038"></a>        <span class="n">mask_array</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">read_array</span><span class="p">()</span>
<a id="__codelineno-0-4039" name="__codelineno-0-4039"></a>        <span class="n">row</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">rows</span>
<a id="__codelineno-0-4040" name="__codelineno-0-4040"></a>        <span class="n">col</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">columns</span>
<a id="__codelineno-0-4041" name="__codelineno-0-4041"></a>        <span class="n">mask_noval</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4042" name="__codelineno-0-4042"></a>
<a id="__codelineno-0-4043" name="__codelineno-0-4043"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">):</span>
<a id="__codelineno-0-4044" name="__codelineno-0-4044"></a>            <span class="c1"># there might be cells that are out of domain in the src but not out of domain in the mask</span>
<a id="__codelineno-0-4045" name="__codelineno-0-4045"></a>            <span class="c1"># so change all the src_noval to mask_noval in the src_array</span>
<a id="__codelineno-0-4046" name="__codelineno-0-4046"></a>            <span class="c1"># src_array[np.isclose(src_array, self.no_data_value[0], rtol=0.001)] = mask_noval</span>
<a id="__codelineno-0-4047" name="__codelineno-0-4047"></a>            <span class="c1"># then count them (out of domain cells) in the src_array</span>
<a id="__codelineno-0-4048" name="__codelineno-0-4048"></a>            <span class="n">elem_src</span> <span class="o">=</span> <span class="n">src_array</span><span class="o">.</span><span class="n">size</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span>
<a id="__codelineno-0-4049" name="__codelineno-0-4049"></a>                <span class="p">(</span><span class="n">src_array</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">src_array</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)])</span>
<a id="__codelineno-0-4050" name="__codelineno-0-4050"></a>            <span class="p">)</span>
<a id="__codelineno-0-4051" name="__codelineno-0-4051"></a>            <span class="c1"># count the out of domain cells in the mask</span>
<a id="__codelineno-0-4052" name="__codelineno-0-4052"></a>            <span class="n">elem_mask</span> <span class="o">=</span> <span class="n">mask_array</span><span class="o">.</span><span class="n">size</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span>
<a id="__codelineno-0-4053" name="__codelineno-0-4053"></a>                <span class="p">(</span><span class="n">mask_array</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">mask_array</span><span class="p">,</span> <span class="n">mask_noval</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)])</span>
<a id="__codelineno-0-4054" name="__codelineno-0-4054"></a>            <span class="p">)</span>
<a id="__codelineno-0-4055" name="__codelineno-0-4055"></a>
<a id="__codelineno-0-4056" name="__codelineno-0-4056"></a>            <span class="c1"># if not equal, then store indices of those cells that don&#39;t match</span>
<a id="__codelineno-0-4057" name="__codelineno-0-4057"></a>            <span class="k">if</span> <span class="n">elem_mask</span> <span class="o">&gt;</span> <span class="n">elem_src</span><span class="p">:</span>
<a id="__codelineno-0-4058" name="__codelineno-0-4058"></a>                <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-4059" name="__codelineno-0-4059"></a>                    <span class="n">i</span>
<a id="__codelineno-0-4060" name="__codelineno-0-4060"></a>                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
<a id="__codelineno-0-4061" name="__codelineno-0-4061"></a>                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
<a id="__codelineno-0-4062" name="__codelineno-0-4062"></a>                    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">src_array</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>
<a id="__codelineno-0-4063" name="__codelineno-0-4063"></a>                    <span class="ow">and</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">mask_array</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">mask_noval</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>
<a id="__codelineno-0-4064" name="__codelineno-0-4064"></a>                <span class="p">]</span>
<a id="__codelineno-0-4065" name="__codelineno-0-4065"></a>                <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-4066" name="__codelineno-0-4066"></a>                    <span class="n">j</span>
<a id="__codelineno-0-4067" name="__codelineno-0-4067"></a>                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
<a id="__codelineno-0-4068" name="__codelineno-0-4068"></a>                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
<a id="__codelineno-0-4069" name="__codelineno-0-4069"></a>                    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">src_array</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>
<a id="__codelineno-0-4070" name="__codelineno-0-4070"></a>                    <span class="ow">and</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">mask_array</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">mask_noval</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>
<a id="__codelineno-0-4071" name="__codelineno-0-4071"></a>                <span class="p">]</span>
<a id="__codelineno-0-4072" name="__codelineno-0-4072"></a>            <span class="c1"># interpolate those missing cells by the nearest neighbor</span>
<a id="__codelineno-0-4073" name="__codelineno-0-4073"></a>            <span class="k">if</span> <span class="n">elem_mask</span> <span class="o">&gt;</span> <span class="n">elem_src</span><span class="p">:</span>
<a id="__codelineno-0-4074" name="__codelineno-0-4074"></a>                <span class="n">src_array</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_nearest_neighbour</span><span class="p">(</span>
<a id="__codelineno-0-4075" name="__codelineno-0-4075"></a>                    <span class="n">src_array</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rows</span><span class="p">,</span> <span class="n">cols</span>
<a id="__codelineno-0-4076" name="__codelineno-0-4076"></a>                <span class="p">)</span>
<a id="__codelineno-0-4077" name="__codelineno-0-4077"></a>            <span class="k">return</span> <span class="n">src_array</span>
<a id="__codelineno-0-4078" name="__codelineno-0-4078"></a>
<a id="__codelineno-0-4079" name="__codelineno-0-4079"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_crop_aligned</span><span class="p">(</span>
<a id="__codelineno-0-4080" name="__codelineno-0-4080"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-4081" name="__codelineno-0-4081"></a>        <span class="n">mask</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">gdal</span><span class="o">.</span><span class="n">Dataset</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">],</span>
<a id="__codelineno-0-4082" name="__codelineno-0-4082"></a>        <span class="n">mask_noval</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-4083" name="__codelineno-0-4083"></a>        <span class="n">fill_gaps</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-4084" name="__codelineno-0-4084"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-4085" name="__codelineno-0-4085"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Clip/crop by matching the nodata layout from mask to the source raster.</span>
<a id="__codelineno-0-4086" name="__codelineno-0-4086"></a>
<a id="__codelineno-0-4087" name="__codelineno-0-4087"></a><span class="sd">        Both rasters must have the same dimensions (rows and columns). Use MatchRasterAlignment prior to this</span>
<a id="__codelineno-0-4088" name="__codelineno-0-4088"></a><span class="sd">        method to align both rasters.</span>
<a id="__codelineno-0-4089" name="__codelineno-0-4089"></a>
<a id="__codelineno-0-4090" name="__codelineno-0-4090"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4091" name="__codelineno-0-4091"></a><span class="sd">            mask (Dataset | np.ndarray):</span>
<a id="__codelineno-0-4092" name="__codelineno-0-4092"></a><span class="sd">                Mask raster to get the location of the NoDataValue and where it is in the array.</span>
<a id="__codelineno-0-4093" name="__codelineno-0-4093"></a><span class="sd">            mask_noval (int | float, optional):</span>
<a id="__codelineno-0-4094" name="__codelineno-0-4094"></a><span class="sd">                In case the mask is a numpy array, the mask_noval has to be given.</span>
<a id="__codelineno-0-4095" name="__codelineno-0-4095"></a><span class="sd">            fill_gaps (bool):</span>
<a id="__codelineno-0-4096" name="__codelineno-0-4096"></a><span class="sd">                Whether to fill gaps after cropping. Default is False.</span>
<a id="__codelineno-0-4097" name="__codelineno-0-4097"></a>
<a id="__codelineno-0-4098" name="__codelineno-0-4098"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4099" name="__codelineno-0-4099"></a><span class="sd">            Dataset:</span>
<a id="__codelineno-0-4100" name="__codelineno-0-4100"></a><span class="sd">                The raster with NoDataValue stored in its cells exactly the same as the source raster.</span>
<a id="__codelineno-0-4101" name="__codelineno-0-4101"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4102" name="__codelineno-0-4102"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">):</span>
<a id="__codelineno-0-4103" name="__codelineno-0-4103"></a>            <span class="n">mask_gt</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">geotransform</span>
<a id="__codelineno-0-4104" name="__codelineno-0-4104"></a>            <span class="n">mask_epsg</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">epsg</span>
<a id="__codelineno-0-4105" name="__codelineno-0-4105"></a>            <span class="n">row</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">rows</span>
<a id="__codelineno-0-4106" name="__codelineno-0-4106"></a>            <span class="n">col</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">columns</span>
<a id="__codelineno-0-4107" name="__codelineno-0-4107"></a>            <span class="n">mask_noval</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4108" name="__codelineno-0-4108"></a>            <span class="n">mask_array</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4109" name="__codelineno-0-4109"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
<a id="__codelineno-0-4110" name="__codelineno-0-4110"></a>            <span class="k">if</span> <span class="n">mask_noval</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4111" name="__codelineno-0-4111"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4112" name="__codelineno-0-4112"></a>                    <span class="s2">&quot;You have to enter the value of the no_val parameter when the mask is a numpy array&quot;</span>
<a id="__codelineno-0-4113" name="__codelineno-0-4113"></a>                <span class="p">)</span>
<a id="__codelineno-0-4114" name="__codelineno-0-4114"></a>            <span class="n">mask_array</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<a id="__codelineno-0-4115" name="__codelineno-0-4115"></a>            <span class="n">row</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">shape</span>
<a id="__codelineno-0-4116" name="__codelineno-0-4116"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4117" name="__codelineno-0-4117"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-4118" name="__codelineno-0-4118"></a>                <span class="s2">&quot;The second parameter &#39;mask&#39; has to be either gdal.Dataset or numpy array&quot;</span>
<a id="__codelineno-0-4119" name="__codelineno-0-4119"></a>                <span class="sa">f</span><span class="s2">&quot;given - </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-4120" name="__codelineno-0-4120"></a>            <span class="p">)</span>
<a id="__codelineno-0-4121" name="__codelineno-0-4121"></a>
<a id="__codelineno-0-4122" name="__codelineno-0-4122"></a>        <span class="n">band_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span>
<a id="__codelineno-0-4123" name="__codelineno-0-4123"></a>        <span class="n">src_sref</span> <span class="o">=</span> <span class="n">osr</span><span class="o">.</span><span class="n">SpatialReference</span><span class="p">(</span><span class="n">wkt</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-0-4124" name="__codelineno-0-4124"></a>        <span class="n">src_array</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">()</span>
<a id="__codelineno-0-4125" name="__codelineno-0-4125"></a>
<a id="__codelineno-0-4126" name="__codelineno-0-4126"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">row</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">col</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
<a id="__codelineno-0-4127" name="__codelineno-0-4127"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4128" name="__codelineno-0-4128"></a>                <span class="s2">&quot;Two rasters have different number of columns or rows, please resample or match both rasters&quot;</span>
<a id="__codelineno-0-4129" name="__codelineno-0-4129"></a>            <span class="p">)</span>
<a id="__codelineno-0-4130" name="__codelineno-0-4130"></a>
<a id="__codelineno-0-4131" name="__codelineno-0-4131"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">):</span>
<a id="__codelineno-0-4132" name="__codelineno-0-4132"></a>            <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-4133" name="__codelineno-0-4133"></a>                <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">top_left_corner</span> <span class="o">==</span> <span class="n">mask</span><span class="o">.</span><span class="n">top_left_corner</span>
<a id="__codelineno-0-4134" name="__codelineno-0-4134"></a>                <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_size</span> <span class="o">==</span> <span class="n">mask</span><span class="o">.</span><span class="n">cell_size</span>
<a id="__codelineno-0-4135" name="__codelineno-0-4135"></a>            <span class="p">):</span>
<a id="__codelineno-0-4136" name="__codelineno-0-4136"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4137" name="__codelineno-0-4137"></a>                    <span class="s2">&quot;the location of the upper left corner of both rasters is not the same or cell size is &quot;</span>
<a id="__codelineno-0-4138" name="__codelineno-0-4138"></a>                    <span class="s2">&quot;different please match both rasters first &quot;</span>
<a id="__codelineno-0-4139" name="__codelineno-0-4139"></a>                <span class="p">)</span>
<a id="__codelineno-0-4140" name="__codelineno-0-4140"></a>
<a id="__codelineno-0-4141" name="__codelineno-0-4141"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">mask_epsg</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">epsg</span><span class="p">:</span>
<a id="__codelineno-0-4142" name="__codelineno-0-4142"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4143" name="__codelineno-0-4143"></a>                    <span class="s2">&quot;Dataset A &amp; B are using different coordinate systems please reproject one of them to &quot;</span>
<a id="__codelineno-0-4144" name="__codelineno-0-4144"></a>                    <span class="s2">&quot;the other raster coordinate system&quot;</span>
<a id="__codelineno-0-4145" name="__codelineno-0-4145"></a>                <span class="p">)</span>
<a id="__codelineno-0-4146" name="__codelineno-0-4146"></a>
<a id="__codelineno-0-4147" name="__codelineno-0-4147"></a>        <span class="k">if</span> <span class="n">band_count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-4148" name="__codelineno-0-4148"></a>            <span class="c1"># check if the no data value for the src complies with the dtype of the src as sometimes the band is full</span>
<a id="__codelineno-0-4149" name="__codelineno-0-4149"></a>            <span class="c1"># of values and the no_data_value is not used at all in the band, and when we try to replace any value in</span>
<a id="__codelineno-0-4150" name="__codelineno-0-4150"></a>            <span class="c1"># the array with the no_data_value it will raise an error.</span>
<a id="__codelineno-0-4151" name="__codelineno-0-4151"></a>            <span class="n">no_data_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_no_data_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">)</span>
<a id="__codelineno-0-4152" name="__codelineno-0-4152"></a>
<a id="__codelineno-0-4153" name="__codelineno-0-4153"></a>            <span class="k">for</span> <span class="n">band</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-4154" name="__codelineno-0-4154"></a>                <span class="k">if</span> <span class="n">mask_noval</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4155" name="__codelineno-0-4155"></a>                    <span class="n">src_array</span><span class="p">[</span><span class="n">band</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">mask_array</span><span class="p">)]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="n">band</span><span class="p">]</span>
<a id="__codelineno-0-4156" name="__codelineno-0-4156"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4157" name="__codelineno-0-4157"></a>                    <span class="n">src_array</span><span class="p">[</span><span class="n">band</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">mask_array</span><span class="p">,</span> <span class="n">mask_noval</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)]</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-4158" name="__codelineno-0-4158"></a>                        <span class="n">no_data_value</span><span class="p">[</span><span class="n">band</span><span class="p">]</span>
<a id="__codelineno-0-4159" name="__codelineno-0-4159"></a>                    <span class="p">)</span>
<a id="__codelineno-0-4160" name="__codelineno-0-4160"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4161" name="__codelineno-0-4161"></a>            <span class="k">if</span> <span class="n">mask_noval</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4162" name="__codelineno-0-4162"></a>                <span class="n">src_array</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">mask_array</span><span class="p">)]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4163" name="__codelineno-0-4163"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4164" name="__codelineno-0-4164"></a>                <span class="n">src_array</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">mask_array</span><span class="p">,</span> <span class="n">mask_noval</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)]</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-4165" name="__codelineno-0-4165"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4166" name="__codelineno-0-4166"></a>                <span class="p">)</span>
<a id="__codelineno-0-4167" name="__codelineno-0-4167"></a>
<a id="__codelineno-0-4168" name="__codelineno-0-4168"></a>        <span class="k">if</span> <span class="n">fill_gaps</span><span class="p">:</span>
<a id="__codelineno-0-4169" name="__codelineno-0-4169"></a>            <span class="n">src_array</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fill_gaps</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">src_array</span><span class="p">)</span>
<a id="__codelineno-0-4170" name="__codelineno-0-4170"></a>
<a id="__codelineno-0-4171" name="__codelineno-0-4171"></a>        <span class="n">dst</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_create_dataset</span><span class="p">(</span>
<a id="__codelineno-0-4172" name="__codelineno-0-4172"></a>            <span class="n">col</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">band_count</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gdal_dtype</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;MEM&quot;</span>
<a id="__codelineno-0-4173" name="__codelineno-0-4173"></a>        <span class="p">)</span>
<a id="__codelineno-0-4174" name="__codelineno-0-4174"></a>        <span class="c1"># but with a lot of computations,</span>
<a id="__codelineno-0-4175" name="__codelineno-0-4175"></a>        <span class="c1"># if the mask is an array and the mask_gt is not defined, use the src_gt as both the mask and the src</span>
<a id="__codelineno-0-4176" name="__codelineno-0-4176"></a>        <span class="c1"># are aligned, so they have the sam gt</span>
<a id="__codelineno-0-4177" name="__codelineno-0-4177"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-4178" name="__codelineno-0-4178"></a>            <span class="c1"># set the geotransform</span>
<a id="__codelineno-0-4179" name="__codelineno-0-4179"></a>            <span class="n">dst</span><span class="o">.</span><span class="n">SetGeoTransform</span><span class="p">(</span><span class="n">mask_gt</span><span class="p">)</span>
<a id="__codelineno-0-4180" name="__codelineno-0-4180"></a>            <span class="c1"># set the projection</span>
<a id="__codelineno-0-4181" name="__codelineno-0-4181"></a>            <span class="n">dst</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-0-4182" name="__codelineno-0-4182"></a>        <span class="k">except</span> <span class="ne">UnboundLocalError</span><span class="p">:</span>
<a id="__codelineno-0-4183" name="__codelineno-0-4183"></a>            <span class="n">dst</span><span class="o">.</span><span class="n">SetGeoTransform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">)</span>
<a id="__codelineno-0-4184" name="__codelineno-0-4184"></a>            <span class="n">dst</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">src_sref</span><span class="o">.</span><span class="n">ExportToWkt</span><span class="p">())</span>
<a id="__codelineno-0-4185" name="__codelineno-0-4185"></a>
<a id="__codelineno-0-4186" name="__codelineno-0-4186"></a>        <span class="n">dst_obj</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
<a id="__codelineno-0-4187" name="__codelineno-0-4187"></a>        <span class="c1"># set the no data value</span>
<a id="__codelineno-0-4188" name="__codelineno-0-4188"></a>        <span class="n">dst_obj</span><span class="o">.</span><span class="n">_set_no_data_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">)</span>
<a id="__codelineno-0-4189" name="__codelineno-0-4189"></a>        <span class="k">if</span> <span class="n">band_count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-4190" name="__codelineno-0-4190"></a>            <span class="k">for</span> <span class="n">band</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-4191" name="__codelineno-0-4191"></a>                <span class="n">dst_obj</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">band</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">src_array</span><span class="p">[</span><span class="n">band</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:])</span>
<a id="__codelineno-0-4192" name="__codelineno-0-4192"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4193" name="__codelineno-0-4193"></a>            <span class="n">dst_obj</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">src_array</span><span class="p">)</span>
<a id="__codelineno-0-4194" name="__codelineno-0-4194"></a>        <span class="k">return</span> <span class="n">dst_obj</span>
<a id="__codelineno-0-4195" name="__codelineno-0-4195"></a>
<a id="__codelineno-0-4196" name="__codelineno-0-4196"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_check_alignment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-4197" name="__codelineno-0-4197"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if raster is aligned with a given mask raster.&quot;&quot;&quot;</span>
<a id="__codelineno-0-4198" name="__codelineno-0-4198"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">):</span>
<a id="__codelineno-0-4199" name="__codelineno-0-4199"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The second parameter should be a Dataset&quot;</span><span class="p">)</span>
<a id="__codelineno-0-4200" name="__codelineno-0-4200"></a>
<a id="__codelineno-0-4201" name="__codelineno-0-4201"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="o">==</span> <span class="n">mask</span><span class="o">.</span><span class="n">rows</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span> <span class="o">==</span> <span class="n">mask</span><span class="o">.</span><span class="n">columns</span>
<a id="__codelineno-0-4202" name="__codelineno-0-4202"></a>
<a id="__codelineno-0-4203" name="__codelineno-0-4203"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">align</span><span class="p">(</span>
<a id="__codelineno-0-4204" name="__codelineno-0-4204"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-4205" name="__codelineno-0-4205"></a>        <span class="n">alignment_src</span><span class="p">:</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4206" name="__codelineno-0-4206"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-4207" name="__codelineno-0-4207"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Align the current dataset (rows and columns) to match a given dataset.</span>
<a id="__codelineno-0-4208" name="__codelineno-0-4208"></a>
<a id="__codelineno-0-4209" name="__codelineno-0-4209"></a><span class="sd">        Copies spatial properties from alignment_src to the current raster:</span>
<a id="__codelineno-0-4210" name="__codelineno-0-4210"></a><span class="sd">            - The coordinate system</span>
<a id="__codelineno-0-4211" name="__codelineno-0-4211"></a><span class="sd">            - The number of rows and columns</span>
<a id="__codelineno-0-4212" name="__codelineno-0-4212"></a><span class="sd">            - Cell size</span>
<a id="__codelineno-0-4213" name="__codelineno-0-4213"></a><span class="sd">        Then resamples values from the current dataset using the nearest neighbor interpolation.</span>
<a id="__codelineno-0-4214" name="__codelineno-0-4214"></a>
<a id="__codelineno-0-4215" name="__codelineno-0-4215"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4216" name="__codelineno-0-4216"></a><span class="sd">            alignment_src (Dataset):</span>
<a id="__codelineno-0-4217" name="__codelineno-0-4217"></a><span class="sd">                Spatial information source raster to get the spatial information (coordinate system, number of rows and</span>
<a id="__codelineno-0-4218" name="__codelineno-0-4218"></a><span class="sd">                columns). The data values of the current dataset are resampled to this alignment.</span>
<a id="__codelineno-0-4219" name="__codelineno-0-4219"></a>
<a id="__codelineno-0-4220" name="__codelineno-0-4220"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4221" name="__codelineno-0-4221"></a><span class="sd">            Dataset: The aligned dataset.</span>
<a id="__codelineno-0-4222" name="__codelineno-0-4222"></a>
<a id="__codelineno-0-4223" name="__codelineno-0-4223"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-4224" name="__codelineno-0-4224"></a><span class="sd">            - The source dataset has a `top_left_corner` at (0, 0) with a 5*5 alignment, and a 0.05 degree cell size.</span>
<a id="__codelineno-0-4225" name="__codelineno-0-4225"></a>
<a id="__codelineno-0-4226" name="__codelineno-0-4226"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-4227" name="__codelineno-0-4227"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-4228" name="__codelineno-0-4228"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(5, 5)</span>
<a id="__codelineno-0-4229" name="__codelineno-0-4229"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-4230" name="__codelineno-0-4230"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-4231" name="__codelineno-0-4231"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-4232" name="__codelineno-0-4232"></a><span class="sd">              &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-4233" name="__codelineno-0-4233"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-4234" name="__codelineno-0-4234"></a><span class="sd">                          Cell size: 0.05</span>
<a id="__codelineno-0-4235" name="__codelineno-0-4235"></a><span class="sd">                          Dimension: 5 * 5</span>
<a id="__codelineno-0-4236" name="__codelineno-0-4236"></a><span class="sd">                          EPSG: 4326</span>
<a id="__codelineno-0-4237" name="__codelineno-0-4237"></a><span class="sd">                          Number of Bands: 1</span>
<a id="__codelineno-0-4238" name="__codelineno-0-4238"></a><span class="sd">                          Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-4239" name="__codelineno-0-4239"></a><span class="sd">                          Mask: -9999.0</span>
<a id="__codelineno-0-4240" name="__codelineno-0-4240"></a><span class="sd">                          Data type: float64</span>
<a id="__codelineno-0-4241" name="__codelineno-0-4241"></a><span class="sd">                          File:...</span>
<a id="__codelineno-0-4242" name="__codelineno-0-4242"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-4243" name="__codelineno-0-4243"></a>
<a id="__codelineno-0-4244" name="__codelineno-0-4244"></a><span class="sd">              ```</span>
<a id="__codelineno-0-4245" name="__codelineno-0-4245"></a>
<a id="__codelineno-0-4246" name="__codelineno-0-4246"></a><span class="sd">            - The dataset to be aligned has a top_left_corner at (-0.1, 0.1) (i.e., it has two more rows on top of the</span>
<a id="__codelineno-0-4247" name="__codelineno-0-4247"></a><span class="sd">              dataset, and two columns on the left of the dataset).</span>
<a id="__codelineno-0-4248" name="__codelineno-0-4248"></a>
<a id="__codelineno-0-4249" name="__codelineno-0-4249"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-4250" name="__codelineno-0-4250"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(10, 10)</span>
<a id="__codelineno-0-4251" name="__codelineno-0-4251"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (-0.1, 0.1)</span>
<a id="__codelineno-0-4252" name="__codelineno-0-4252"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.07</span>
<a id="__codelineno-0-4253" name="__codelineno-0-4253"></a><span class="sd">              &gt;&gt;&gt; dataset_target = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,</span>
<a id="__codelineno-0-4254" name="__codelineno-0-4254"></a><span class="sd">              ... epsg=4326)</span>
<a id="__codelineno-0-4255" name="__codelineno-0-4255"></a><span class="sd">              &gt;&gt;&gt; print(dataset_target)</span>
<a id="__codelineno-0-4256" name="__codelineno-0-4256"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-4257" name="__codelineno-0-4257"></a><span class="sd">                          Cell size: 0.07</span>
<a id="__codelineno-0-4258" name="__codelineno-0-4258"></a><span class="sd">                          Dimension: 10 * 10</span>
<a id="__codelineno-0-4259" name="__codelineno-0-4259"></a><span class="sd">                          EPSG: 4326</span>
<a id="__codelineno-0-4260" name="__codelineno-0-4260"></a><span class="sd">                          Number of Bands: 1</span>
<a id="__codelineno-0-4261" name="__codelineno-0-4261"></a><span class="sd">                          Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-4262" name="__codelineno-0-4262"></a><span class="sd">                          Mask: -9999.0</span>
<a id="__codelineno-0-4263" name="__codelineno-0-4263"></a><span class="sd">                          Data type: float64</span>
<a id="__codelineno-0-4264" name="__codelineno-0-4264"></a><span class="sd">                          File:...</span>
<a id="__codelineno-0-4265" name="__codelineno-0-4265"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-4266" name="__codelineno-0-4266"></a>
<a id="__codelineno-0-4267" name="__codelineno-0-4267"></a><span class="sd">              ```</span>
<a id="__codelineno-0-4268" name="__codelineno-0-4268"></a>
<a id="__codelineno-0-4269" name="__codelineno-0-4269"></a><span class="sd">            ![align-source-target](./../_images/dataset/align-source-target.png)</span>
<a id="__codelineno-0-4270" name="__codelineno-0-4270"></a>
<a id="__codelineno-0-4271" name="__codelineno-0-4271"></a><span class="sd">            - Now call the `align` method and use the dataset as the alignment source.</span>
<a id="__codelineno-0-4272" name="__codelineno-0-4272"></a>
<a id="__codelineno-0-4273" name="__codelineno-0-4273"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-4274" name="__codelineno-0-4274"></a><span class="sd">              &gt;&gt;&gt; aligned_dataset = dataset_target.align(dataset)</span>
<a id="__codelineno-0-4275" name="__codelineno-0-4275"></a><span class="sd">              &gt;&gt;&gt; print(aligned_dataset)</span>
<a id="__codelineno-0-4276" name="__codelineno-0-4276"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-4277" name="__codelineno-0-4277"></a><span class="sd">                          Cell size: 0.05</span>
<a id="__codelineno-0-4278" name="__codelineno-0-4278"></a><span class="sd">                          Dimension: 5 * 5</span>
<a id="__codelineno-0-4279" name="__codelineno-0-4279"></a><span class="sd">                          EPSG: 4326</span>
<a id="__codelineno-0-4280" name="__codelineno-0-4280"></a><span class="sd">                          Number of Bands: 1</span>
<a id="__codelineno-0-4281" name="__codelineno-0-4281"></a><span class="sd">                          Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-4282" name="__codelineno-0-4282"></a><span class="sd">                          Mask: -9999.0</span>
<a id="__codelineno-0-4283" name="__codelineno-0-4283"></a><span class="sd">                          Data type: float64</span>
<a id="__codelineno-0-4284" name="__codelineno-0-4284"></a><span class="sd">                          File:...</span>
<a id="__codelineno-0-4285" name="__codelineno-0-4285"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-4286" name="__codelineno-0-4286"></a>
<a id="__codelineno-0-4287" name="__codelineno-0-4287"></a><span class="sd">              ```</span>
<a id="__codelineno-0-4288" name="__codelineno-0-4288"></a>
<a id="__codelineno-0-4289" name="__codelineno-0-4289"></a><span class="sd">            ![align-result](./../_images/dataset/align-result.png)</span>
<a id="__codelineno-0-4290" name="__codelineno-0-4290"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4291" name="__codelineno-0-4291"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alignment_src</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">):</span>
<a id="__codelineno-0-4292" name="__codelineno-0-4292"></a>            <span class="n">src</span> <span class="o">=</span> <span class="n">alignment_src</span>
<a id="__codelineno-0-4293" name="__codelineno-0-4293"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4294" name="__codelineno-0-4294"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-4295" name="__codelineno-0-4295"></a>                <span class="s2">&quot;First parameter should be a Dataset read using Dataset.openRaster or a path to the raster, &quot;</span>
<a id="__codelineno-0-4296" name="__codelineno-0-4296"></a>                <span class="sa">f</span><span class="s2">&quot;given </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">alignment_src</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-4297" name="__codelineno-0-4297"></a>            <span class="p">)</span>
<a id="__codelineno-0-4298" name="__codelineno-0-4298"></a>
<a id="__codelineno-0-4299" name="__codelineno-0-4299"></a>        <span class="c1"># reproject the raster to match the projection of alignment_src</span>
<a id="__codelineno-0-4300" name="__codelineno-0-4300"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">epsg</span> <span class="o">==</span> <span class="n">src</span><span class="o">.</span><span class="n">epsg</span><span class="p">:</span>
<a id="__codelineno-0-4301" name="__codelineno-0-4301"></a>            <span class="n">reprojected_RasterB</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">epsg</span><span class="p">)</span>
<a id="__codelineno-0-4302" name="__codelineno-0-4302"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4303" name="__codelineno-0-4303"></a>            <span class="n">reprojected_RasterB</span> <span class="o">=</span> <span class="bp">self</span>
<a id="__codelineno-0-4304" name="__codelineno-0-4304"></a>        <span class="c1"># create a new raster</span>
<a id="__codelineno-0-4305" name="__codelineno-0-4305"></a>        <span class="n">dst</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_create_dataset</span><span class="p">(</span>
<a id="__codelineno-0-4306" name="__codelineno-0-4306"></a>            <span class="n">src</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">src</span><span class="o">.</span><span class="n">rows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">,</span> <span class="n">src</span><span class="o">.</span><span class="n">gdal_dtype</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;MEM&quot;</span>
<a id="__codelineno-0-4307" name="__codelineno-0-4307"></a>        <span class="p">)</span>
<a id="__codelineno-0-4308" name="__codelineno-0-4308"></a>        <span class="c1"># set the geotransform</span>
<a id="__codelineno-0-4309" name="__codelineno-0-4309"></a>        <span class="n">dst</span><span class="o">.</span><span class="n">SetGeoTransform</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">geotransform</span><span class="p">)</span>
<a id="__codelineno-0-4310" name="__codelineno-0-4310"></a>        <span class="c1"># set the projection</span>
<a id="__codelineno-0-4311" name="__codelineno-0-4311"></a>        <span class="n">dst</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-0-4312" name="__codelineno-0-4312"></a>        <span class="c1"># set the no data value</span>
<a id="__codelineno-0-4313" name="__codelineno-0-4313"></a>        <span class="n">dst_obj</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
<a id="__codelineno-0-4314" name="__codelineno-0-4314"></a>        <span class="n">dst_obj</span><span class="o">.</span><span class="n">_set_no_data_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">)</span>
<a id="__codelineno-0-4315" name="__codelineno-0-4315"></a>        <span class="c1"># perform the projection &amp; resampling</span>
<a id="__codelineno-0-4316" name="__codelineno-0-4316"></a>        <span class="n">method</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GRA_NearestNeighbour</span>
<a id="__codelineno-0-4317" name="__codelineno-0-4317"></a>        <span class="c1"># resample the reprojected_RasterB</span>
<a id="__codelineno-0-4318" name="__codelineno-0-4318"></a>        <span class="n">gdal</span><span class="o">.</span><span class="n">ReprojectImage</span><span class="p">(</span>
<a id="__codelineno-0-4319" name="__codelineno-0-4319"></a>            <span class="n">reprojected_RasterB</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span>
<a id="__codelineno-0-4320" name="__codelineno-0-4320"></a>            <span class="n">dst_obj</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span>
<a id="__codelineno-0-4321" name="__codelineno-0-4321"></a>            <span class="n">src</span><span class="o">.</span><span class="n">crs</span><span class="p">,</span>
<a id="__codelineno-0-4322" name="__codelineno-0-4322"></a>            <span class="n">src</span><span class="o">.</span><span class="n">crs</span><span class="p">,</span>
<a id="__codelineno-0-4323" name="__codelineno-0-4323"></a>            <span class="n">method</span><span class="p">,</span>
<a id="__codelineno-0-4324" name="__codelineno-0-4324"></a>        <span class="p">)</span>
<a id="__codelineno-0-4325" name="__codelineno-0-4325"></a>
<a id="__codelineno-0-4326" name="__codelineno-0-4326"></a>        <span class="k">return</span> <span class="n">dst_obj</span>
<a id="__codelineno-0-4327" name="__codelineno-0-4327"></a>
<a id="__codelineno-0-4328" name="__codelineno-0-4328"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_crop_with_raster</span><span class="p">(</span>
<a id="__codelineno-0-4329" name="__codelineno-0-4329"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-4330" name="__codelineno-0-4330"></a>        <span class="n">mask</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">gdal</span><span class="o">.</span><span class="n">Dataset</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
<a id="__codelineno-0-4331" name="__codelineno-0-4331"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-4332" name="__codelineno-0-4332"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Crop this raster using another raster as a mask.</span>
<a id="__codelineno-0-4333" name="__codelineno-0-4333"></a>
<a id="__codelineno-0-4334" name="__codelineno-0-4334"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4335" name="__codelineno-0-4335"></a><span class="sd">            mask (Dataset | str):</span>
<a id="__codelineno-0-4336" name="__codelineno-0-4336"></a><span class="sd">                The raster you want to use as a mask to crop this raster; it can be a path or a GDAL Dataset.</span>
<a id="__codelineno-0-4337" name="__codelineno-0-4337"></a>
<a id="__codelineno-0-4338" name="__codelineno-0-4338"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4339" name="__codelineno-0-4339"></a><span class="sd">            Dataset:</span>
<a id="__codelineno-0-4340" name="__codelineno-0-4340"></a><span class="sd">                The cropped raster.</span>
<a id="__codelineno-0-4341" name="__codelineno-0-4341"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4342" name="__codelineno-0-4342"></a>        <span class="c1"># get information from the mask raster</span>
<a id="__codelineno-0-4343" name="__codelineno-0-4343"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-4344" name="__codelineno-0-4344"></a>            <span class="n">mask</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>
<a id="__codelineno-0-4345" name="__codelineno-0-4345"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">):</span>
<a id="__codelineno-0-4346" name="__codelineno-0-4346"></a>            <span class="n">mask</span> <span class="o">=</span> <span class="n">mask</span>
<a id="__codelineno-0-4347" name="__codelineno-0-4347"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4348" name="__codelineno-0-4348"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-4349" name="__codelineno-0-4349"></a>                <span class="s2">&quot;The second parameter has to be either path to the mask raster or a gdal.Dataset object&quot;</span>
<a id="__codelineno-0-4350" name="__codelineno-0-4350"></a>            <span class="p">)</span>
<a id="__codelineno-0-4351" name="__codelineno-0-4351"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_alignment</span><span class="p">(</span><span class="n">mask</span><span class="p">):</span>
<a id="__codelineno-0-4352" name="__codelineno-0-4352"></a>            <span class="c1"># first align the mask with the src raster</span>
<a id="__codelineno-0-4353" name="__codelineno-0-4353"></a>            <span class="n">mask</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">align</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<a id="__codelineno-0-4354" name="__codelineno-0-4354"></a>        <span class="c1"># crop the src raster with the aligned mask</span>
<a id="__codelineno-0-4355" name="__codelineno-0-4355"></a>        <span class="n">dst_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_crop_aligned</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>
<a id="__codelineno-0-4356" name="__codelineno-0-4356"></a>
<a id="__codelineno-0-4357" name="__codelineno-0-4357"></a>        <span class="n">dst_obj</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">correct_wrap_cutline_error</span><span class="p">(</span><span class="n">dst_obj</span><span class="p">)</span>
<a id="__codelineno-0-4358" name="__codelineno-0-4358"></a>        <span class="k">return</span> <span class="n">dst_obj</span>
<a id="__codelineno-0-4359" name="__codelineno-0-4359"></a>
<a id="__codelineno-0-4360" name="__codelineno-0-4360"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_crop_with_polygon_warp</span><span class="p">(</span>
<a id="__codelineno-0-4361" name="__codelineno-0-4361"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">feature</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">FeatureCollection</span><span class="p">,</span> <span class="n">GeoDataFrame</span><span class="p">],</span> <span class="n">touch</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-4362" name="__codelineno-0-4362"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-4363" name="__codelineno-0-4363"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Crop raster with polygon.</span>
<a id="__codelineno-0-4364" name="__codelineno-0-4364"></a>
<a id="__codelineno-0-4365" name="__codelineno-0-4365"></a><span class="sd">            - Do not convert the polygon into a raster but rather use it directly to crop the raster using the</span>
<a id="__codelineno-0-4366" name="__codelineno-0-4366"></a><span class="sd">            gdal.warp function.</span>
<a id="__codelineno-0-4367" name="__codelineno-0-4367"></a>
<a id="__codelineno-0-4368" name="__codelineno-0-4368"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4369" name="__codelineno-0-4369"></a><span class="sd">            feature (FeatureCollection | GeoDataFrame):</span>
<a id="__codelineno-0-4370" name="__codelineno-0-4370"></a><span class="sd">                Vector mask.</span>
<a id="__codelineno-0-4371" name="__codelineno-0-4371"></a><span class="sd">            touch (bool):</span>
<a id="__codelineno-0-4372" name="__codelineno-0-4372"></a><span class="sd">                Include cells that touch the polygon, not only those entirely inside the polygon mask. Defaults to True.</span>
<a id="__codelineno-0-4373" name="__codelineno-0-4373"></a>
<a id="__codelineno-0-4374" name="__codelineno-0-4374"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4375" name="__codelineno-0-4375"></a><span class="sd">            Dataset:</span>
<a id="__codelineno-0-4376" name="__codelineno-0-4376"></a><span class="sd">                Cropped dataset.</span>
<a id="__codelineno-0-4377" name="__codelineno-0-4377"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4378" name="__codelineno-0-4378"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">feature</span><span class="p">,</span> <span class="n">GeoDataFrame</span><span class="p">):</span>
<a id="__codelineno-0-4379" name="__codelineno-0-4379"></a>            <span class="n">feature</span> <span class="o">=</span> <span class="n">FeatureCollection</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
<a id="__codelineno-0-4380" name="__codelineno-0-4380"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4381" name="__codelineno-0-4381"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">feature</span><span class="p">,</span> <span class="n">FeatureCollection</span><span class="p">):</span>
<a id="__codelineno-0-4382" name="__codelineno-0-4382"></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-4383" name="__codelineno-0-4383"></a>                    <span class="sa">f</span><span class="s2">&quot;The function takes only a FeatureCollection or GeoDataFrame, given </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-4384" name="__codelineno-0-4384"></a>                <span class="p">)</span>
<a id="__codelineno-0-4385" name="__codelineno-0-4385"></a>
<a id="__codelineno-0-4386" name="__codelineno-0-4386"></a>        <span class="n">feature</span> <span class="o">=</span> <span class="n">feature</span><span class="o">.</span><span class="n">_gdf_to_ds</span><span class="p">()</span>
<a id="__codelineno-0-4387" name="__codelineno-0-4387"></a>        <span class="n">warp_options</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">WarpOptions</span><span class="p">(</span>
<a id="__codelineno-0-4388" name="__codelineno-0-4388"></a>            <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;VRT&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4389" name="__codelineno-0-4389"></a>            <span class="c1"># outputBounds=feature.total_bounds,</span>
<a id="__codelineno-0-4390" name="__codelineno-0-4390"></a>            <span class="n">cropToCutline</span><span class="o">=</span><span class="ow">not</span> <span class="n">touch</span><span class="p">,</span>
<a id="__codelineno-0-4391" name="__codelineno-0-4391"></a>            <span class="n">cutlineDSName</span><span class="o">=</span><span class="n">feature</span><span class="o">.</span><span class="n">file_name</span><span class="p">,</span>
<a id="__codelineno-0-4392" name="__codelineno-0-4392"></a>            <span class="c1"># cutlineLayer=feature.layer_names[0],</span>
<a id="__codelineno-0-4393" name="__codelineno-0-4393"></a>            <span class="n">multithread</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-4394" name="__codelineno-0-4394"></a>        <span class="p">)</span>
<a id="__codelineno-0-4395" name="__codelineno-0-4395"></a>        <span class="n">dst</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Warp</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">warp_options</span><span class="p">)</span>
<a id="__codelineno-0-4396" name="__codelineno-0-4396"></a>        <span class="n">dst_obj</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
<a id="__codelineno-0-4397" name="__codelineno-0-4397"></a>
<a id="__codelineno-0-4398" name="__codelineno-0-4398"></a>        <span class="k">if</span> <span class="n">touch</span><span class="p">:</span>
<a id="__codelineno-0-4399" name="__codelineno-0-4399"></a>            <span class="n">dst_obj</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">correct_wrap_cutline_error</span><span class="p">(</span><span class="n">dst_obj</span><span class="p">)</span>
<a id="__codelineno-0-4400" name="__codelineno-0-4400"></a>
<a id="__codelineno-0-4401" name="__codelineno-0-4401"></a>        <span class="k">return</span> <span class="n">dst_obj</span>
<a id="__codelineno-0-4402" name="__codelineno-0-4402"></a>
<a id="__codelineno-0-4403" name="__codelineno-0-4403"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-0-4404" name="__codelineno-0-4404"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">correct_wrap_cutline_error</span><span class="p">(</span><span class="n">src</span><span class="p">:</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">):</span>
<a id="__codelineno-0-4405" name="__codelineno-0-4405"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Correct wrap cutline error.</span>
<a id="__codelineno-0-4406" name="__codelineno-0-4406"></a>
<a id="__codelineno-0-4407" name="__codelineno-0-4407"></a><span class="sd">        https://github.com/Serapieum-of-alex/pyramids/issues/74</span>
<a id="__codelineno-0-4408" name="__codelineno-0-4408"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4409" name="__codelineno-0-4409"></a>        <span class="n">big_array</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">read_array</span><span class="p">()</span>
<a id="__codelineno-0-4410" name="__codelineno-0-4410"></a>        <span class="n">value_to_remove</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4411" name="__codelineno-0-4411"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove rows and columns that are all filled with a certain value from a 2D array.&quot;&quot;&quot;</span>
<a id="__codelineno-0-4412" name="__codelineno-0-4412"></a>        <span class="c1"># Find rows and columns to be removed</span>
<a id="__codelineno-0-4413" name="__codelineno-0-4413"></a>        <span class="k">if</span> <span class="n">big_array</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-4414" name="__codelineno-0-4414"></a>            <span class="n">rows_to_remove</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">big_array</span> <span class="o">==</span> <span class="n">value_to_remove</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4415" name="__codelineno-0-4415"></a>            <span class="n">cols_to_remove</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">big_array</span> <span class="o">==</span> <span class="n">value_to_remove</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4416" name="__codelineno-0-4416"></a>            <span class="c1"># Use boolean indexing to remove rows and columns</span>
<a id="__codelineno-0-4417" name="__codelineno-0-4417"></a>            <span class="n">small_array</span> <span class="o">=</span> <span class="n">big_array</span><span class="p">[</span><span class="o">~</span><span class="n">rows_to_remove</span><span class="p">][:,</span> <span class="o">~</span><span class="n">cols_to_remove</span><span class="p">]</span>
<a id="__codelineno-0-4418" name="__codelineno-0-4418"></a>        <span class="k">elif</span> <span class="n">big_array</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
<a id="__codelineno-0-4419" name="__codelineno-0-4419"></a>            <span class="n">rows_to_remove</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">big_array</span> <span class="o">==</span> <span class="n">value_to_remove</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<a id="__codelineno-0-4420" name="__codelineno-0-4420"></a>            <span class="n">cols_to_remove</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">big_array</span> <span class="o">==</span> <span class="n">value_to_remove</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<a id="__codelineno-0-4421" name="__codelineno-0-4421"></a>            <span class="c1"># Use boolean indexing to remove rows and columns</span>
<a id="__codelineno-0-4422" name="__codelineno-0-4422"></a>            <span class="c1"># first remove the rows then the columns</span>
<a id="__codelineno-0-4423" name="__codelineno-0-4423"></a>            <span class="n">small_array</span> <span class="o">=</span> <span class="n">big_array</span><span class="p">[:,</span> <span class="o">~</span><span class="n">rows_to_remove</span><span class="p">,</span> <span class="p">:]</span>
<a id="__codelineno-0-4424" name="__codelineno-0-4424"></a>            <span class="n">small_array</span> <span class="o">=</span> <span class="n">small_array</span><span class="p">[:,</span> <span class="p">:,</span> <span class="o">~</span><span class="n">cols_to_remove</span><span class="p">]</span>
<a id="__codelineno-0-4425" name="__codelineno-0-4425"></a>            <span class="n">n_rows</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span><span class="o">~</span><span class="n">rows_to_remove</span><span class="p">)</span>
<a id="__codelineno-0-4426" name="__codelineno-0-4426"></a>            <span class="n">n_cols</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span><span class="o">~</span><span class="n">cols_to_remove</span><span class="p">)</span>
<a id="__codelineno-0-4427" name="__codelineno-0-4427"></a>            <span class="n">small_array</span> <span class="o">=</span> <span class="n">small_array</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="n">src</span><span class="o">.</span><span class="n">band_count</span><span class="p">,</span> <span class="n">n_rows</span><span class="p">,</span> <span class="n">n_cols</span><span class="p">))</span>
<a id="__codelineno-0-4428" name="__codelineno-0-4428"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4429" name="__codelineno-0-4429"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Array must be 2D or 3D&quot;</span><span class="p">)</span>
<a id="__codelineno-0-4430" name="__codelineno-0-4430"></a>
<a id="__codelineno-0-4431" name="__codelineno-0-4431"></a>        <span class="n">x_ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="o">~</span><span class="n">rows_to_remove</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4432" name="__codelineno-0-4432"></a>        <span class="n">y_ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="o">~</span><span class="n">cols_to_remove</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4433" name="__codelineno-0-4433"></a>        <span class="n">new_x</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">y_ind</span><span class="p">]</span> <span class="o">-</span> <span class="n">src</span><span class="o">.</span><span class="n">cell_size</span> <span class="o">/</span> <span class="mi">2</span>
<a id="__codelineno-0-4434" name="__codelineno-0-4434"></a>        <span class="n">new_y</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="n">x_ind</span><span class="p">]</span> <span class="o">+</span> <span class="n">src</span><span class="o">.</span><span class="n">cell_size</span> <span class="o">/</span> <span class="mi">2</span>
<a id="__codelineno-0-4435" name="__codelineno-0-4435"></a>        <span class="n">new_gt</span> <span class="o">=</span> <span class="p">(</span><span class="n">new_x</span><span class="p">,</span> <span class="n">src</span><span class="o">.</span><span class="n">cell_size</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">new_y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">src</span><span class="o">.</span><span class="n">cell_size</span><span class="p">)</span>
<a id="__codelineno-0-4436" name="__codelineno-0-4436"></a>        <span class="n">new_src</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span>
<a id="__codelineno-0-4437" name="__codelineno-0-4437"></a>            <span class="n">small_array</span><span class="p">,</span> <span class="n">geo</span><span class="o">=</span><span class="n">new_gt</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="n">src</span><span class="o">.</span><span class="n">epsg</span><span class="p">,</span> <span class="n">no_data_value</span><span class="o">=</span><span class="n">src</span><span class="o">.</span><span class="n">no_data_value</span>
<a id="__codelineno-0-4438" name="__codelineno-0-4438"></a>        <span class="p">)</span>
<a id="__codelineno-0-4439" name="__codelineno-0-4439"></a>        <span class="k">return</span> <span class="n">new_src</span>
<a id="__codelineno-0-4440" name="__codelineno-0-4440"></a>
<a id="__codelineno-0-4441" name="__codelineno-0-4441"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">crop</span><span class="p">(</span>
<a id="__codelineno-0-4442" name="__codelineno-0-4442"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-4443" name="__codelineno-0-4443"></a>        <span class="n">mask</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">GeoDataFrame</span><span class="p">,</span> <span class="n">FeatureCollection</span><span class="p">],</span>
<a id="__codelineno-0-4444" name="__codelineno-0-4444"></a>        <span class="n">touch</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-4445" name="__codelineno-0-4445"></a>        <span class="n">inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-4446" name="__codelineno-0-4446"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Dataset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<a id="__codelineno-0-4447" name="__codelineno-0-4447"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Crop dataset using dataset/feature collection.</span>
<a id="__codelineno-0-4448" name="__codelineno-0-4448"></a>
<a id="__codelineno-0-4449" name="__codelineno-0-4449"></a><span class="sd">            Crop/Clip the Dataset object using a polygon/raster.</span>
<a id="__codelineno-0-4450" name="__codelineno-0-4450"></a>
<a id="__codelineno-0-4451" name="__codelineno-0-4451"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4452" name="__codelineno-0-4452"></a><span class="sd">            mask (GeoDataFrame | Dataset):</span>
<a id="__codelineno-0-4453" name="__codelineno-0-4453"></a><span class="sd">                GeoDataFrame with a polygon geometry, or a Dataset object.</span>
<a id="__codelineno-0-4454" name="__codelineno-0-4454"></a><span class="sd">            touch (bool):</span>
<a id="__codelineno-0-4455" name="__codelineno-0-4455"></a><span class="sd">                Include the cells that touch the polygon, not only those that lie entirely inside the polygon mask.</span>
<a id="__codelineno-0-4456" name="__codelineno-0-4456"></a><span class="sd">                Default is True.</span>
<a id="__codelineno-0-4457" name="__codelineno-0-4457"></a><span class="sd">            inplace (bool):</span>
<a id="__codelineno-0-4458" name="__codelineno-0-4458"></a><span class="sd">                If True, apply changes in place. Default is False.</span>
<a id="__codelineno-0-4459" name="__codelineno-0-4459"></a>
<a id="__codelineno-0-4460" name="__codelineno-0-4460"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4461" name="__codelineno-0-4461"></a><span class="sd">            Dataset | None:</span>
<a id="__codelineno-0-4462" name="__codelineno-0-4462"></a><span class="sd">                The cropped raster. If inplace is True, the method will change the raster in place and return None.</span>
<a id="__codelineno-0-4463" name="__codelineno-0-4463"></a>
<a id="__codelineno-0-4464" name="__codelineno-0-4464"></a><span class="sd">        Hint:</span>
<a id="__codelineno-0-4465" name="__codelineno-0-4465"></a><span class="sd">            - If the mask is a dataset with multi-bands, the `crop` method will use the first band as the mask.</span>
<a id="__codelineno-0-4466" name="__codelineno-0-4466"></a>
<a id="__codelineno-0-4467" name="__codelineno-0-4467"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-4468" name="__codelineno-0-4468"></a><span class="sd">            - Crop the raster using a polygon mask.</span>
<a id="__codelineno-0-4469" name="__codelineno-0-4469"></a>
<a id="__codelineno-0-4470" name="__codelineno-0-4470"></a><span class="sd">              - The polygon covers 4 cells in the 3rd and 4th rows and 3rd and 4th column `arr[2:4, 2:4]`, so the result</span>
<a id="__codelineno-0-4471" name="__codelineno-0-4471"></a><span class="sd">                dataset will have the same number of bands `4`, 2 rows and 2 columns.</span>
<a id="__codelineno-0-4472" name="__codelineno-0-4472"></a><span class="sd">              - First, create the dataset to have 4 bands, 10 rows and 10 columns; the dataset has a cell size of 0.05</span>
<a id="__codelineno-0-4473" name="__codelineno-0-4473"></a><span class="sd">                degree, the top left corner of the dataset is (0, 0).</span>
<a id="__codelineno-0-4474" name="__codelineno-0-4474"></a>
<a id="__codelineno-0-4475" name="__codelineno-0-4475"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-4476" name="__codelineno-0-4476"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-4477" name="__codelineno-0-4477"></a><span class="sd">              &gt;&gt;&gt; import geopandas as gpd</span>
<a id="__codelineno-0-4478" name="__codelineno-0-4478"></a><span class="sd">              &gt;&gt;&gt; from shapely.geometry import Polygon</span>
<a id="__codelineno-0-4479" name="__codelineno-0-4479"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(4, 10, 10)</span>
<a id="__codelineno-0-4480" name="__codelineno-0-4480"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-4481" name="__codelineno-0-4481"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-4482" name="__codelineno-0-4482"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(</span>
<a id="__codelineno-0-4483" name="__codelineno-0-4483"></a><span class="sd">              ...         arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326</span>
<a id="__codelineno-0-4484" name="__codelineno-0-4484"></a><span class="sd">              ... )</span>
<a id="__codelineno-0-4485" name="__codelineno-0-4485"></a>
<a id="__codelineno-0-4486" name="__codelineno-0-4486"></a><span class="sd">              ```</span>
<a id="__codelineno-0-4487" name="__codelineno-0-4487"></a><span class="sd">            - Second, create the polygon using shapely polygon, and use the xmin, ymin, xmax, ymax = [0.1, -0.2, 0.2 -0.1]</span>
<a id="__codelineno-0-4488" name="__codelineno-0-4488"></a><span class="sd">                to cover the 4 cells.</span>
<a id="__codelineno-0-4489" name="__codelineno-0-4489"></a>
<a id="__codelineno-0-4490" name="__codelineno-0-4490"></a><span class="sd">                ```python</span>
<a id="__codelineno-0-4491" name="__codelineno-0-4491"></a><span class="sd">                &gt;&gt;&gt; mask = gpd.GeoDataFrame(geometry=[Polygon([(0.1, -0.1), (0.1, -0.2), (0.2, -0.2), (0.2, -0.1)])], crs=4326)</span>
<a id="__codelineno-0-4492" name="__codelineno-0-4492"></a>
<a id="__codelineno-0-4493" name="__codelineno-0-4493"></a><span class="sd">                ```</span>
<a id="__codelineno-0-4494" name="__codelineno-0-4494"></a><span class="sd">            - Pass the `geodataframe` to the crop method using the `mask` parameter.</span>
<a id="__codelineno-0-4495" name="__codelineno-0-4495"></a>
<a id="__codelineno-0-4496" name="__codelineno-0-4496"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-4497" name="__codelineno-0-4497"></a><span class="sd">              &gt;&gt;&gt; cropped_dataset = dataset.crop(mask=mask)</span>
<a id="__codelineno-0-4498" name="__codelineno-0-4498"></a>
<a id="__codelineno-0-4499" name="__codelineno-0-4499"></a><span class="sd">              ```</span>
<a id="__codelineno-0-4500" name="__codelineno-0-4500"></a><span class="sd">            - Check the cropped dataset:</span>
<a id="__codelineno-0-4501" name="__codelineno-0-4501"></a>
<a id="__codelineno-0-4502" name="__codelineno-0-4502"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-4503" name="__codelineno-0-4503"></a><span class="sd">              &gt;&gt;&gt; print(cropped_dataset.shape)</span>
<a id="__codelineno-0-4504" name="__codelineno-0-4504"></a><span class="sd">              (4, 2, 2)</span>
<a id="__codelineno-0-4505" name="__codelineno-0-4505"></a><span class="sd">              &gt;&gt;&gt; print(cropped_dataset.geotransform)</span>
<a id="__codelineno-0-4506" name="__codelineno-0-4506"></a><span class="sd">              (0.1, 0.05, 0.0, -0.1, 0.0, -0.05)</span>
<a id="__codelineno-0-4507" name="__codelineno-0-4507"></a><span class="sd">              &gt;&gt;&gt; print(cropped_dataset.read_array(band=0))# doctest: +SKIP</span>
<a id="__codelineno-0-4508" name="__codelineno-0-4508"></a><span class="sd">              [[0.00921161 0.90841171]</span>
<a id="__codelineno-0-4509" name="__codelineno-0-4509"></a><span class="sd">               [0.355636   0.18650262]]</span>
<a id="__codelineno-0-4510" name="__codelineno-0-4510"></a><span class="sd">              &gt;&gt;&gt; print(arr[0, 2:4, 2:4])# doctest: +SKIP</span>
<a id="__codelineno-0-4511" name="__codelineno-0-4511"></a><span class="sd">              [[0.00921161 0.90841171]</span>
<a id="__codelineno-0-4512" name="__codelineno-0-4512"></a><span class="sd">               [0.355636   0.18650262]]</span>
<a id="__codelineno-0-4513" name="__codelineno-0-4513"></a>
<a id="__codelineno-0-4514" name="__codelineno-0-4514"></a><span class="sd">              ```</span>
<a id="__codelineno-0-4515" name="__codelineno-0-4515"></a><span class="sd">            - Crop a raster using another raster mask:</span>
<a id="__codelineno-0-4516" name="__codelineno-0-4516"></a>
<a id="__codelineno-0-4517" name="__codelineno-0-4517"></a><span class="sd">              - Create a mask dataset with the same extent of the polygon we used in the previous example.</span>
<a id="__codelineno-0-4518" name="__codelineno-0-4518"></a>
<a id="__codelineno-0-4519" name="__codelineno-0-4519"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-4520" name="__codelineno-0-4520"></a><span class="sd">              &gt;&gt;&gt; geotransform = (0.1, 0.05, 0.0, -0.1, 0.0, -0.05)</span>
<a id="__codelineno-0-4521" name="__codelineno-0-4521"></a><span class="sd">              &gt;&gt;&gt; mask_dataset = Dataset.create_from_array(np.random.rand(2, 2), geo=geotransform, epsg=4326)</span>
<a id="__codelineno-0-4522" name="__codelineno-0-4522"></a>
<a id="__codelineno-0-4523" name="__codelineno-0-4523"></a><span class="sd">              ```</span>
<a id="__codelineno-0-4524" name="__codelineno-0-4524"></a><span class="sd">            - Then use the mask dataset to crop the dataset.</span>
<a id="__codelineno-0-4525" name="__codelineno-0-4525"></a>
<a id="__codelineno-0-4526" name="__codelineno-0-4526"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-4527" name="__codelineno-0-4527"></a><span class="sd">              &gt;&gt;&gt; cropped_dataset_2 = dataset.crop(mask=mask_dataset)</span>
<a id="__codelineno-0-4528" name="__codelineno-0-4528"></a><span class="sd">              &gt;&gt;&gt; print(cropped_dataset_2.shape)</span>
<a id="__codelineno-0-4529" name="__codelineno-0-4529"></a><span class="sd">              (4, 2, 2)</span>
<a id="__codelineno-0-4530" name="__codelineno-0-4530"></a>
<a id="__codelineno-0-4531" name="__codelineno-0-4531"></a><span class="sd">              ```</span>
<a id="__codelineno-0-4532" name="__codelineno-0-4532"></a><span class="sd">            - Check the cropped dataset:</span>
<a id="__codelineno-0-4533" name="__codelineno-0-4533"></a>
<a id="__codelineno-0-4534" name="__codelineno-0-4534"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-4535" name="__codelineno-0-4535"></a><span class="sd">              &gt;&gt;&gt; print(cropped_dataset_2.geotransform)</span>
<a id="__codelineno-0-4536" name="__codelineno-0-4536"></a><span class="sd">              (0.1, 0.05, 0.0, -0.1, 0.0, -0.05)</span>
<a id="__codelineno-0-4537" name="__codelineno-0-4537"></a><span class="sd">              &gt;&gt;&gt; print(cropped_dataset_2.read_array(band=0))# doctest: +SKIP</span>
<a id="__codelineno-0-4538" name="__codelineno-0-4538"></a><span class="sd">              [[0.00921161 0.90841171]</span>
<a id="__codelineno-0-4539" name="__codelineno-0-4539"></a><span class="sd">               [0.355636   0.18650262]]</span>
<a id="__codelineno-0-4540" name="__codelineno-0-4540"></a><span class="sd">              &gt;&gt;&gt; print(arr[0, 2:4, 2:4])# doctest: +SKIP</span>
<a id="__codelineno-0-4541" name="__codelineno-0-4541"></a><span class="sd">               [[0.00921161 0.90841171]</span>
<a id="__codelineno-0-4542" name="__codelineno-0-4542"></a><span class="sd">               [0.355636   0.18650262]]</span>
<a id="__codelineno-0-4543" name="__codelineno-0-4543"></a>
<a id="__codelineno-0-4544" name="__codelineno-0-4544"></a><span class="sd">              ```</span>
<a id="__codelineno-0-4545" name="__codelineno-0-4545"></a>
<a id="__codelineno-0-4546" name="__codelineno-0-4546"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4547" name="__codelineno-0-4547"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">GeoDataFrame</span><span class="p">):</span>
<a id="__codelineno-0-4548" name="__codelineno-0-4548"></a>            <span class="n">dst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_crop_with_polygon_warp</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">touch</span><span class="o">=</span><span class="n">touch</span><span class="p">)</span>
<a id="__codelineno-0-4549" name="__codelineno-0-4549"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">):</span>
<a id="__codelineno-0-4550" name="__codelineno-0-4550"></a>            <span class="n">dst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_crop_with_raster</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>
<a id="__codelineno-0-4551" name="__codelineno-0-4551"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4552" name="__codelineno-0-4552"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-4553" name="__codelineno-0-4553"></a>                <span class="s2">&quot;The second parameter: mask could be either GeoDataFrame or Dataset object&quot;</span>
<a id="__codelineno-0-4554" name="__codelineno-0-4554"></a>            <span class="p">)</span>
<a id="__codelineno-0-4555" name="__codelineno-0-4555"></a>
<a id="__codelineno-0-4556" name="__codelineno-0-4556"></a>        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
<a id="__codelineno-0-4557" name="__codelineno-0-4557"></a>            <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dst</span><span class="o">.</span><span class="n">raster</span><span class="p">)</span>
<a id="__codelineno-0-4558" name="__codelineno-0-4558"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4559" name="__codelineno-0-4559"></a>            <span class="k">return</span> <span class="n">dst</span>
<a id="__codelineno-0-4560" name="__codelineno-0-4560"></a>
<a id="__codelineno-0-4561" name="__codelineno-0-4561"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-0-4562" name="__codelineno-0-4562"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_nearest_neighbour</span><span class="p">(</span>
<a id="__codelineno-0-4563" name="__codelineno-0-4563"></a>        <span class="n">array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">no_data_value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">rows</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">cols</span><span class="p">:</span> <span class="nb">list</span>
<a id="__codelineno-0-4564" name="__codelineno-0-4564"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-4565" name="__codelineno-0-4565"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Fill specified cells with the value of the nearest neighbor.</span>
<a id="__codelineno-0-4566" name="__codelineno-0-4566"></a>
<a id="__codelineno-0-4567" name="__codelineno-0-4567"></a><span class="sd">            - The _nearest_neighbour method fills the cells with the given indices in rows and cols with the value of the nearest neighbor.</span>
<a id="__codelineno-0-4568" name="__codelineno-0-4568"></a><span class="sd">            - The raster grid is square, so the 4 perpendicular directions are of the same proximity; the function gives priority to the right, left, bottom, and then top, and similarly for 45-degree directions: right-bottom, left-bottom, left-top, right-top.</span>
<a id="__codelineno-0-4569" name="__codelineno-0-4569"></a>
<a id="__codelineno-0-4570" name="__codelineno-0-4570"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4571" name="__codelineno-0-4571"></a><span class="sd">            array (np.ndarray):</span>
<a id="__codelineno-0-4572" name="__codelineno-0-4572"></a><span class="sd">                Array to fill some of its cells with the nearest value.</span>
<a id="__codelineno-0-4573" name="__codelineno-0-4573"></a><span class="sd">            no_data_value (float | int):</span>
<a id="__codelineno-0-4574" name="__codelineno-0-4574"></a><span class="sd">                Value stored in cells that are out of the domain.</span>
<a id="__codelineno-0-4575" name="__codelineno-0-4575"></a><span class="sd">            rows (list[int]):</span>
<a id="__codelineno-0-4576" name="__codelineno-0-4576"></a><span class="sd">                Row indices of the cells you want to fill with the nearest neighbor.</span>
<a id="__codelineno-0-4577" name="__codelineno-0-4577"></a><span class="sd">            cols (list[int]):</span>
<a id="__codelineno-0-4578" name="__codelineno-0-4578"></a><span class="sd">                Column indices of the cells you want to fill with the nearest neighbor.</span>
<a id="__codelineno-0-4579" name="__codelineno-0-4579"></a>
<a id="__codelineno-0-4580" name="__codelineno-0-4580"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4581" name="__codelineno-0-4581"></a><span class="sd">            np.ndarray:</span>
<a id="__codelineno-0-4582" name="__codelineno-0-4582"></a><span class="sd">                Cells of given indices filled with the value of the nearest neighbor.</span>
<a id="__codelineno-0-4583" name="__codelineno-0-4583"></a>
<a id="__codelineno-0-4584" name="__codelineno-0-4584"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-4585" name="__codelineno-0-4585"></a><span class="sd">            - Basic usage:</span>
<a id="__codelineno-0-4586" name="__codelineno-0-4586"></a>
<a id="__codelineno-0-4587" name="__codelineno-0-4587"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-4588" name="__codelineno-0-4588"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-4589" name="__codelineno-0-4589"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(5, 5)</span>
<a id="__codelineno-0-4590" name="__codelineno-0-4590"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-4591" name="__codelineno-0-4591"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-4592" name="__codelineno-0-4592"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-4593" name="__codelineno-0-4593"></a><span class="sd">              &gt;&gt;&gt; req_rows = [1,3]</span>
<a id="__codelineno-0-4594" name="__codelineno-0-4594"></a><span class="sd">              &gt;&gt;&gt; req_cols = [2,4]</span>
<a id="__codelineno-0-4595" name="__codelineno-0-4595"></a><span class="sd">              &gt;&gt;&gt; no_data_value = dataset.no_data_value[0]</span>
<a id="__codelineno-0-4596" name="__codelineno-0-4596"></a><span class="sd">              &gt;&gt;&gt; new_array = Dataset._nearest_neighbour(arr, no_data_value, req_rows, req_cols)</span>
<a id="__codelineno-0-4597" name="__codelineno-0-4597"></a>
<a id="__codelineno-0-4598" name="__codelineno-0-4598"></a><span class="sd">              ```</span>
<a id="__codelineno-0-4599" name="__codelineno-0-4599"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4600" name="__codelineno-0-4600"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
<a id="__codelineno-0-4601" name="__codelineno-0-4601"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-4602" name="__codelineno-0-4602"></a>                <span class="s2">&quot;src should be read using gdal (gdal dataset please read it using gdal library) &quot;</span>
<a id="__codelineno-0-4603" name="__codelineno-0-4603"></a>            <span class="p">)</span>
<a id="__codelineno-0-4604" name="__codelineno-0-4604"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-4605" name="__codelineno-0-4605"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The `rows` input has to be of type list&quot;</span><span class="p">)</span>
<a id="__codelineno-0-4606" name="__codelineno-0-4606"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cols</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-4607" name="__codelineno-0-4607"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The `cols` input has to be of type list&quot;</span><span class="p">)</span>
<a id="__codelineno-0-4608" name="__codelineno-0-4608"></a>
<a id="__codelineno-0-4609" name="__codelineno-0-4609"></a>        <span class="n">no_rows</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">array</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4610" name="__codelineno-0-4610"></a>        <span class="n">no_cols</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">array</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-4611" name="__codelineno-0-4611"></a>
<a id="__codelineno-0-4612" name="__codelineno-0-4612"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)):</span>
<a id="__codelineno-0-4613" name="__codelineno-0-4613"></a>            <span class="c1"># give the cell the value of the cell that is at the right</span>
<a id="__codelineno-0-4614" name="__codelineno-0-4614"></a>            <span class="k">if</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">no_cols</span><span class="p">:</span>
<a id="__codelineno-0-4615" name="__codelineno-0-4615"></a>                <span class="k">if</span> <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">no_data_value</span><span class="p">:</span>
<a id="__codelineno-0-4616" name="__codelineno-0-4616"></a>                    <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-4617" name="__codelineno-0-4617"></a>
<a id="__codelineno-0-4618" name="__codelineno-0-4618"></a>            <span class="k">elif</span> <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">no_data_value</span> <span class="ow">and</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-4619" name="__codelineno-0-4619"></a>                <span class="c1"># give the cell the value of the cell that is at the left</span>
<a id="__codelineno-0-4620" name="__codelineno-0-4620"></a>                <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-4621" name="__codelineno-0-4621"></a>
<a id="__codelineno-0-4622" name="__codelineno-0-4622"></a>            <span class="k">elif</span> <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">!=</span> <span class="n">no_data_value</span> <span class="ow">and</span> <span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-4623" name="__codelineno-0-4623"></a>                <span class="c1"># give the cell the value of the cell that is at the bottom</span>
<a id="__codelineno-0-4624" name="__codelineno-0-4624"></a>                <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
<a id="__codelineno-0-4625" name="__codelineno-0-4625"></a>
<a id="__codelineno-0-4626" name="__codelineno-0-4626"></a>            <span class="k">elif</span> <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">!=</span> <span class="n">no_data_value</span> <span class="ow">and</span> <span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">no_rows</span><span class="p">:</span>
<a id="__codelineno-0-4627" name="__codelineno-0-4627"></a>                <span class="c1"># give the cell the value of the cell that is at the Top</span>
<a id="__codelineno-0-4628" name="__codelineno-0-4628"></a>                <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
<a id="__codelineno-0-4629" name="__codelineno-0-4629"></a>
<a id="__codelineno-0-4630" name="__codelineno-0-4630"></a>            <span class="k">elif</span> <span class="p">(</span>
<a id="__codelineno-0-4631" name="__codelineno-0-4631"></a>                <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">no_data_value</span>
<a id="__codelineno-0-4632" name="__codelineno-0-4632"></a>                <span class="ow">and</span> <span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-0-4633" name="__codelineno-0-4633"></a>                <span class="ow">and</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">no_cols</span>
<a id="__codelineno-0-4634" name="__codelineno-0-4634"></a>            <span class="p">):</span>
<a id="__codelineno-0-4635" name="__codelineno-0-4635"></a>                <span class="c1"># give the cell the value of the cell that is at the right bottom</span>
<a id="__codelineno-0-4636" name="__codelineno-0-4636"></a>                <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-4637" name="__codelineno-0-4637"></a>
<a id="__codelineno-0-4638" name="__codelineno-0-4638"></a>            <span class="k">elif</span> <span class="p">(</span>
<a id="__codelineno-0-4639" name="__codelineno-0-4639"></a>                <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">no_data_value</span>
<a id="__codelineno-0-4640" name="__codelineno-0-4640"></a>                <span class="ow">and</span> <span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-0-4641" name="__codelineno-0-4641"></a>                <span class="ow">and</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-0-4642" name="__codelineno-0-4642"></a>            <span class="p">):</span>
<a id="__codelineno-0-4643" name="__codelineno-0-4643"></a>                <span class="c1"># give the cell the value of the cell that is at the left bottom</span>
<a id="__codelineno-0-4644" name="__codelineno-0-4644"></a>                <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-4645" name="__codelineno-0-4645"></a>
<a id="__codelineno-0-4646" name="__codelineno-0-4646"></a>            <span class="k">elif</span> <span class="p">(</span>
<a id="__codelineno-0-4647" name="__codelineno-0-4647"></a>                <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">no_data_value</span>
<a id="__codelineno-0-4648" name="__codelineno-0-4648"></a>                <span class="ow">and</span> <span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">no_rows</span>
<a id="__codelineno-0-4649" name="__codelineno-0-4649"></a>                <span class="ow">and</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-0-4650" name="__codelineno-0-4650"></a>            <span class="p">):</span>
<a id="__codelineno-0-4651" name="__codelineno-0-4651"></a>                <span class="c1"># give the cell the value of the cell that is at the left Top</span>
<a id="__codelineno-0-4652" name="__codelineno-0-4652"></a>                <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-4653" name="__codelineno-0-4653"></a>
<a id="__codelineno-0-4654" name="__codelineno-0-4654"></a>            <span class="k">elif</span> <span class="p">(</span>
<a id="__codelineno-0-4655" name="__codelineno-0-4655"></a>                <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">no_data_value</span>
<a id="__codelineno-0-4656" name="__codelineno-0-4656"></a>                <span class="ow">and</span> <span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">no_rows</span>
<a id="__codelineno-0-4657" name="__codelineno-0-4657"></a>                <span class="ow">and</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">no_cols</span>
<a id="__codelineno-0-4658" name="__codelineno-0-4658"></a>            <span class="p">):</span>
<a id="__codelineno-0-4659" name="__codelineno-0-4659"></a>                <span class="c1"># give the cell the value of the cell that is at the right Top</span>
<a id="__codelineno-0-4660" name="__codelineno-0-4660"></a>                <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-4661" name="__codelineno-0-4661"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4662" name="__codelineno-0-4662"></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;the cell is isolated (No surrounding cells exist)&quot;</span><span class="p">)</span>
<a id="__codelineno-0-4663" name="__codelineno-0-4663"></a>        <span class="k">return</span> <span class="n">array</span>
<a id="__codelineno-0-4664" name="__codelineno-0-4664"></a>
<a id="__codelineno-0-4665" name="__codelineno-0-4665"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">map_to_array_coordinates</span><span class="p">(</span>
<a id="__codelineno-0-4666" name="__codelineno-0-4666"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-4667" name="__codelineno-0-4667"></a>        <span class="n">points</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">GeoDataFrame</span><span class="p">,</span> <span class="n">FeatureCollection</span><span class="p">,</span> <span class="n">DataFrame</span><span class="p">],</span>
<a id="__codelineno-0-4668" name="__codelineno-0-4668"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-4669" name="__codelineno-0-4669"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert coordinates of points to array indices.</span>
<a id="__codelineno-0-4670" name="__codelineno-0-4670"></a>
<a id="__codelineno-0-4671" name="__codelineno-0-4671"></a><span class="sd">        - map_to_array_coordinates locates a point with real coordinates (x, y) or (lon, lat) on the array by finding</span>
<a id="__codelineno-0-4672" name="__codelineno-0-4672"></a><span class="sd">            the cell indices (row, column) of the nearest cell in the raster.</span>
<a id="__codelineno-0-4673" name="__codelineno-0-4673"></a><span class="sd">        - The point coordinate system of the raster has to be projected to be able to calculate the distance.</span>
<a id="__codelineno-0-4674" name="__codelineno-0-4674"></a>
<a id="__codelineno-0-4675" name="__codelineno-0-4675"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4676" name="__codelineno-0-4676"></a><span class="sd">            points (GeoDataFrame | pandas.DataFrame | FeatureCollection):</span>
<a id="__codelineno-0-4677" name="__codelineno-0-4677"></a><span class="sd">                - GeoDataFrame: GeoDataFrame with POINT geometry.</span>
<a id="__codelineno-0-4678" name="__codelineno-0-4678"></a><span class="sd">                - DataFrame: DataFrame with x, y columns.</span>
<a id="__codelineno-0-4679" name="__codelineno-0-4679"></a>
<a id="__codelineno-0-4680" name="__codelineno-0-4680"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4681" name="__codelineno-0-4681"></a><span class="sd">            np.ndarray:</span>
<a id="__codelineno-0-4682" name="__codelineno-0-4682"></a><span class="sd">                Array with shape (N, 2) containing the row and column indices in the array.</span>
<a id="__codelineno-0-4683" name="__codelineno-0-4683"></a>
<a id="__codelineno-0-4684" name="__codelineno-0-4684"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-4685" name="__codelineno-0-4685"></a><span class="sd">            - Create `Dataset` consisting of 2 bands, 10 rows, 10 columns, at the point lon/lat (0, 0).</span>
<a id="__codelineno-0-4686" name="__codelineno-0-4686"></a>
<a id="__codelineno-0-4687" name="__codelineno-0-4687"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-4688" name="__codelineno-0-4688"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-4689" name="__codelineno-0-4689"></a><span class="sd">              &gt;&gt;&gt; import pandas as pd</span>
<a id="__codelineno-0-4690" name="__codelineno-0-4690"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1, 3, size=(2, 10, 10))</span>
<a id="__codelineno-0-4691" name="__codelineno-0-4691"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-4692" name="__codelineno-0-4692"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-4693" name="__codelineno-0-4693"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-4694" name="__codelineno-0-4694"></a>
<a id="__codelineno-0-4695" name="__codelineno-0-4695"></a><span class="sd">              ```</span>
<a id="__codelineno-0-4696" name="__codelineno-0-4696"></a><span class="sd">            - DataFrame with x, y columns:</span>
<a id="__codelineno-0-4697" name="__codelineno-0-4697"></a>
<a id="__codelineno-0-4698" name="__codelineno-0-4698"></a><span class="sd">              - We can give the function a DataFrame with x, y columns to array the coordinates of the points that are located within the dataset domain.</span>
<a id="__codelineno-0-4699" name="__codelineno-0-4699"></a>
<a id="__codelineno-0-4700" name="__codelineno-0-4700"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-4701" name="__codelineno-0-4701"></a><span class="sd">              &gt;&gt;&gt; points = pd.DataFrame({&quot;x&quot;: [0.025, 0.175, 0.375], &quot;y&quot;: [0.025, 0.225, 0.125]})</span>
<a id="__codelineno-0-4702" name="__codelineno-0-4702"></a><span class="sd">              &gt;&gt;&gt; indices = dataset.map_to_array_coordinates(points)</span>
<a id="__codelineno-0-4703" name="__codelineno-0-4703"></a><span class="sd">              &gt;&gt;&gt; print(indices)</span>
<a id="__codelineno-0-4704" name="__codelineno-0-4704"></a><span class="sd">              [[0 0]</span>
<a id="__codelineno-0-4705" name="__codelineno-0-4705"></a><span class="sd">               [0 3]</span>
<a id="__codelineno-0-4706" name="__codelineno-0-4706"></a><span class="sd">               [0 7]]</span>
<a id="__codelineno-0-4707" name="__codelineno-0-4707"></a>
<a id="__codelineno-0-4708" name="__codelineno-0-4708"></a><span class="sd">              ```</span>
<a id="__codelineno-0-4709" name="__codelineno-0-4709"></a><span class="sd">            - GeoDataFrame with POINT geometry:</span>
<a id="__codelineno-0-4710" name="__codelineno-0-4710"></a>
<a id="__codelineno-0-4711" name="__codelineno-0-4711"></a><span class="sd">              - We can give the function a GeoDataFrame with POINT geometry to array the coordinates of the points that locate within the dataset domain.</span>
<a id="__codelineno-0-4712" name="__codelineno-0-4712"></a>
<a id="__codelineno-0-4713" name="__codelineno-0-4713"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-4714" name="__codelineno-0-4714"></a><span class="sd">              &gt;&gt;&gt; from shapely.geometry import Point</span>
<a id="__codelineno-0-4715" name="__codelineno-0-4715"></a><span class="sd">              &gt;&gt;&gt; from geopandas import GeoDataFrame</span>
<a id="__codelineno-0-4716" name="__codelineno-0-4716"></a><span class="sd">              &gt;&gt;&gt; points = GeoDataFrame({&quot;geometry&quot;: [Point(0.025, 0.025), Point(0.175, 0.225), Point(0.375, 0.125)]})</span>
<a id="__codelineno-0-4717" name="__codelineno-0-4717"></a><span class="sd">              &gt;&gt;&gt; indices = dataset.map_to_array_coordinates(points)</span>
<a id="__codelineno-0-4718" name="__codelineno-0-4718"></a><span class="sd">              &gt;&gt;&gt; print(indices)</span>
<a id="__codelineno-0-4719" name="__codelineno-0-4719"></a><span class="sd">              [[0 0]</span>
<a id="__codelineno-0-4720" name="__codelineno-0-4720"></a><span class="sd">               [0 3]</span>
<a id="__codelineno-0-4721" name="__codelineno-0-4721"></a><span class="sd">               [0 7]]</span>
<a id="__codelineno-0-4722" name="__codelineno-0-4722"></a>
<a id="__codelineno-0-4723" name="__codelineno-0-4723"></a><span class="sd">              ```</span>
<a id="__codelineno-0-4724" name="__codelineno-0-4724"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4725" name="__codelineno-0-4725"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">GeoDataFrame</span><span class="p">):</span>
<a id="__codelineno-0-4726" name="__codelineno-0-4726"></a>            <span class="n">points</span> <span class="o">=</span> <span class="n">FeatureCollection</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
<a id="__codelineno-0-4727" name="__codelineno-0-4727"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">DataFrame</span><span class="p">):</span>
<a id="__codelineno-0-4728" name="__codelineno-0-4728"></a>            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">elem</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">points</span><span class="o">.</span><span class="n">columns</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">]):</span>
<a id="__codelineno-0-4729" name="__codelineno-0-4729"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4730" name="__codelineno-0-4730"></a>                    <span class="s2">&quot;If the input is a DataFrame, it should have two columns x, and y&quot;</span>
<a id="__codelineno-0-4731" name="__codelineno-0-4731"></a>                <span class="p">)</span>
<a id="__codelineno-0-4732" name="__codelineno-0-4732"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4733" name="__codelineno-0-4733"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">FeatureCollection</span><span class="p">):</span>
<a id="__codelineno-0-4734" name="__codelineno-0-4734"></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-4735" name="__codelineno-0-4735"></a>                    <span class="s2">&quot;please check points input it should be GeoDataFrame/DataFrame/FeatureCollection - given&quot;</span>
<a id="__codelineno-0-4736" name="__codelineno-0-4736"></a>                    <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">points</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-4737" name="__codelineno-0-4737"></a>                <span class="p">)</span>
<a id="__codelineno-0-4738" name="__codelineno-0-4738"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">DataFrame</span><span class="p">):</span>
<a id="__codelineno-0-4739" name="__codelineno-0-4739"></a>            <span class="c1"># get the x, y coordinates.</span>
<a id="__codelineno-0-4740" name="__codelineno-0-4740"></a>            <span class="n">points</span><span class="o">.</span><span class="n">xy</span><span class="p">()</span>
<a id="__codelineno-0-4741" name="__codelineno-0-4741"></a>            <span class="n">points</span> <span class="o">=</span> <span class="n">points</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>
<a id="__codelineno-0-4742" name="__codelineno-0-4742"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4743" name="__codelineno-0-4743"></a>            <span class="n">points</span> <span class="o">=</span> <span class="n">points</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>
<a id="__codelineno-0-4744" name="__codelineno-0-4744"></a>
<a id="__codelineno-0-4745" name="__codelineno-0-4745"></a>        <span class="c1"># since the first row is x-coords so the first column in the indices is the column index</span>
<a id="__codelineno-0-4746" name="__codelineno-0-4746"></a>        <span class="n">indices</span> <span class="o">=</span> <span class="n">locate_values</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<a id="__codelineno-0-4747" name="__codelineno-0-4747"></a>        <span class="c1"># rearrange the columns to make the row index first</span>
<a id="__codelineno-0-4748" name="__codelineno-0-4748"></a>        <span class="n">indices</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
<a id="__codelineno-0-4749" name="__codelineno-0-4749"></a>        <span class="k">return</span> <span class="n">indices</span>
<a id="__codelineno-0-4750" name="__codelineno-0-4750"></a>
<a id="__codelineno-0-4751" name="__codelineno-0-4751"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">array_to_map_coordinates</span><span class="p">(</span>
<a id="__codelineno-0-4752" name="__codelineno-0-4752"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-4753" name="__codelineno-0-4753"></a>        <span class="n">rows_index</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Number</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">],</span>
<a id="__codelineno-0-4754" name="__codelineno-0-4754"></a>        <span class="n">column_index</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Number</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">],</span>
<a id="__codelineno-0-4755" name="__codelineno-0-4755"></a>        <span class="n">center</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-4756" name="__codelineno-0-4756"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Number</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Number</span><span class="p">]]:</span>
<a id="__codelineno-0-4757" name="__codelineno-0-4757"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert array indices to map coordinates.</span>
<a id="__codelineno-0-4758" name="__codelineno-0-4758"></a>
<a id="__codelineno-0-4759" name="__codelineno-0-4759"></a><span class="sd">        array_to_map_coordinates converts the array indices (rows, cols) to real coordinates (x, y) or (lon, lat).</span>
<a id="__codelineno-0-4760" name="__codelineno-0-4760"></a>
<a id="__codelineno-0-4761" name="__codelineno-0-4761"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4762" name="__codelineno-0-4762"></a><span class="sd">            rows_index (List[Number] | np.ndarray):</span>
<a id="__codelineno-0-4763" name="__codelineno-0-4763"></a><span class="sd">                The row indices of the cells in the raster array.</span>
<a id="__codelineno-0-4764" name="__codelineno-0-4764"></a><span class="sd">            column_index (List[Number] | np.ndarray):</span>
<a id="__codelineno-0-4765" name="__codelineno-0-4765"></a><span class="sd">                The column indices of the cells in the raster array.</span>
<a id="__codelineno-0-4766" name="__codelineno-0-4766"></a><span class="sd">            center (bool):</span>
<a id="__codelineno-0-4767" name="__codelineno-0-4767"></a><span class="sd">                If True, the coordinates will be the center of the cell. Default is False.</span>
<a id="__codelineno-0-4768" name="__codelineno-0-4768"></a>
<a id="__codelineno-0-4769" name="__codelineno-0-4769"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4770" name="__codelineno-0-4770"></a><span class="sd">            Tuple[List[Number], List[Number]]:</span>
<a id="__codelineno-0-4771" name="__codelineno-0-4771"></a><span class="sd">                A tuple of two lists: the x coordinates and the y coordinates of the cells.</span>
<a id="__codelineno-0-4772" name="__codelineno-0-4772"></a>
<a id="__codelineno-0-4773" name="__codelineno-0-4773"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-4774" name="__codelineno-0-4774"></a><span class="sd">            - Create `Dataset` consisting of 1 band, 10 rows, 10 columns, at the point lon/lat (0, 0):</span>
<a id="__codelineno-0-4775" name="__codelineno-0-4775"></a>
<a id="__codelineno-0-4776" name="__codelineno-0-4776"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-4777" name="__codelineno-0-4777"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-4778" name="__codelineno-0-4778"></a><span class="sd">              &gt;&gt;&gt; import pandas as pd</span>
<a id="__codelineno-0-4779" name="__codelineno-0-4779"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1, 3, size=(10, 10))</span>
<a id="__codelineno-0-4780" name="__codelineno-0-4780"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-4781" name="__codelineno-0-4781"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-4782" name="__codelineno-0-4782"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-4783" name="__codelineno-0-4783"></a>
<a id="__codelineno-0-4784" name="__codelineno-0-4784"></a><span class="sd">              ```</span>
<a id="__codelineno-0-4785" name="__codelineno-0-4785"></a>
<a id="__codelineno-0-4786" name="__codelineno-0-4786"></a><span class="sd">            - Now call the function with two lists of row and column indices:</span>
<a id="__codelineno-0-4787" name="__codelineno-0-4787"></a>
<a id="__codelineno-0-4788" name="__codelineno-0-4788"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-4789" name="__codelineno-0-4789"></a><span class="sd">              &gt;&gt;&gt; rows_index = [1, 3, 5]</span>
<a id="__codelineno-0-4790" name="__codelineno-0-4790"></a><span class="sd">              &gt;&gt;&gt; column_index = [2, 4, 6]</span>
<a id="__codelineno-0-4791" name="__codelineno-0-4791"></a><span class="sd">              &gt;&gt;&gt; coords = dataset.array_to_map_coordinates(rows_index, column_index)</span>
<a id="__codelineno-0-4792" name="__codelineno-0-4792"></a><span class="sd">              &gt;&gt;&gt; print(coords) # doctest: +SKIP</span>
<a id="__codelineno-0-4793" name="__codelineno-0-4793"></a><span class="sd">              ([0.1, 0.2, 0.3], [-0.05, -0.15, -0.25])</span>
<a id="__codelineno-0-4794" name="__codelineno-0-4794"></a>
<a id="__codelineno-0-4795" name="__codelineno-0-4795"></a><span class="sd">              ```</span>
<a id="__codelineno-0-4796" name="__codelineno-0-4796"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4797" name="__codelineno-0-4797"></a>        <span class="n">top_left_x</span><span class="p">,</span> <span class="n">top_left_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">top_left_corner</span>
<a id="__codelineno-0-4798" name="__codelineno-0-4798"></a>        <span class="n">cell_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_size</span>
<a id="__codelineno-0-4799" name="__codelineno-0-4799"></a>        <span class="k">if</span> <span class="n">center</span><span class="p">:</span>
<a id="__codelineno-0-4800" name="__codelineno-0-4800"></a>            <span class="c1"># for the top left corner of the cell</span>
<a id="__codelineno-0-4801" name="__codelineno-0-4801"></a>            <span class="n">top_left_x</span> <span class="o">+=</span> <span class="n">cell_size</span> <span class="o">/</span> <span class="mi">2</span>
<a id="__codelineno-0-4802" name="__codelineno-0-4802"></a>            <span class="n">top_left_y</span> <span class="o">-=</span> <span class="n">cell_size</span> <span class="o">/</span> <span class="mi">2</span>
<a id="__codelineno-0-4803" name="__codelineno-0-4803"></a>
<a id="__codelineno-0-4804" name="__codelineno-0-4804"></a>        <span class="n">x_coord_fn</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">top_left_x</span> <span class="o">+</span> <span class="n">x</span> <span class="o">*</span> <span class="n">cell_size</span>
<a id="__codelineno-0-4805" name="__codelineno-0-4805"></a>        <span class="n">y_coord_fn</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="n">top_left_y</span> <span class="o">-</span> <span class="n">y</span> <span class="o">*</span> <span class="n">cell_size</span>
<a id="__codelineno-0-4806" name="__codelineno-0-4806"></a>
<a id="__codelineno-0-4807" name="__codelineno-0-4807"></a>        <span class="n">x_coords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">x_coord_fn</span><span class="p">,</span> <span class="n">column_index</span><span class="p">))</span>
<a id="__codelineno-0-4808" name="__codelineno-0-4808"></a>        <span class="n">y_coords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">y_coord_fn</span><span class="p">,</span> <span class="n">rows_index</span><span class="p">))</span>
<a id="__codelineno-0-4809" name="__codelineno-0-4809"></a>
<a id="__codelineno-0-4810" name="__codelineno-0-4810"></a>        <span class="k">return</span> <span class="n">x_coords</span><span class="p">,</span> <span class="n">y_coords</span>
<a id="__codelineno-0-4811" name="__codelineno-0-4811"></a>
<a id="__codelineno-0-4812" name="__codelineno-0-4812"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">extract</span><span class="p">(</span>
<a id="__codelineno-0-4813" name="__codelineno-0-4813"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-4814" name="__codelineno-0-4814"></a>        <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-4815" name="__codelineno-0-4815"></a>        <span class="n">exclude_value</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-4816" name="__codelineno-0-4816"></a>        <span class="n">feature</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">FeatureCollection</span><span class="p">,</span> <span class="n">GeoDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-4817" name="__codelineno-0-4817"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-4818" name="__codelineno-0-4818"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Extract.</span>
<a id="__codelineno-0-4819" name="__codelineno-0-4819"></a>
<a id="__codelineno-0-4820" name="__codelineno-0-4820"></a><span class="sd">        - Extract method gets all the values in a raster, and excludes the values in the exclude_value parameter.</span>
<a id="__codelineno-0-4821" name="__codelineno-0-4821"></a><span class="sd">        - If the feature parameter is given, the raster will be clipped to the extent of the given feature and the</span>
<a id="__codelineno-0-4822" name="__codelineno-0-4822"></a><span class="sd">          values within the feature are extracted.</span>
<a id="__codelineno-0-4823" name="__codelineno-0-4823"></a>
<a id="__codelineno-0-4824" name="__codelineno-0-4824"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4825" name="__codelineno-0-4825"></a><span class="sd">            band (int, optional):</span>
<a id="__codelineno-0-4826" name="__codelineno-0-4826"></a><span class="sd">                Band index. Default is None.</span>
<a id="__codelineno-0-4827" name="__codelineno-0-4827"></a><span class="sd">            exclude_value (Numeric, optional):</span>
<a id="__codelineno-0-4828" name="__codelineno-0-4828"></a><span class="sd">                Values to exclude from extracted values. If the dataset is multi-band, the values in `exclude_value`</span>
<a id="__codelineno-0-4829" name="__codelineno-0-4829"></a><span class="sd">                will be filtered out from the first band only.</span>
<a id="__codelineno-0-4830" name="__codelineno-0-4830"></a><span class="sd">            feature (FeatureCollection | GeoDataFrame, optional):</span>
<a id="__codelineno-0-4831" name="__codelineno-0-4831"></a><span class="sd">                Vector data containing point geometries at which to extract the values. Default is None.</span>
<a id="__codelineno-0-4832" name="__codelineno-0-4832"></a>
<a id="__codelineno-0-4833" name="__codelineno-0-4833"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4834" name="__codelineno-0-4834"></a><span class="sd">            np.ndarray:</span>
<a id="__codelineno-0-4835" name="__codelineno-0-4835"></a><span class="sd">                The extracted values from each band in the dataset will be in one row in the returned array.</span>
<a id="__codelineno-0-4836" name="__codelineno-0-4836"></a>
<a id="__codelineno-0-4837" name="__codelineno-0-4837"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-4838" name="__codelineno-0-4838"></a><span class="sd">            - Extract all values from the dataset:</span>
<a id="__codelineno-0-4839" name="__codelineno-0-4839"></a>
<a id="__codelineno-0-4840" name="__codelineno-0-4840"></a><span class="sd">              - First, create a dataset with 2 bands, 4 rows and 4 columns:</span>
<a id="__codelineno-0-4841" name="__codelineno-0-4841"></a>
<a id="__codelineno-0-4842" name="__codelineno-0-4842"></a><span class="sd">                ```python</span>
<a id="__codelineno-0-4843" name="__codelineno-0-4843"></a><span class="sd">                &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-4844" name="__codelineno-0-4844"></a><span class="sd">                &gt;&gt;&gt; arr = np.random.randint(1, 5, size=(2, 4, 4))</span>
<a id="__codelineno-0-4845" name="__codelineno-0-4845"></a><span class="sd">                &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-4846" name="__codelineno-0-4846"></a><span class="sd">                &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-4847" name="__codelineno-0-4847"></a><span class="sd">                &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-4848" name="__codelineno-0-4848"></a><span class="sd">                &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-4849" name="__codelineno-0-4849"></a><span class="sd">                &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-4850" name="__codelineno-0-4850"></a><span class="sd">                            Cell size: 0.05</span>
<a id="__codelineno-0-4851" name="__codelineno-0-4851"></a><span class="sd">                            Dimension: 4 * 4</span>
<a id="__codelineno-0-4852" name="__codelineno-0-4852"></a><span class="sd">                            EPSG: 4326</span>
<a id="__codelineno-0-4853" name="__codelineno-0-4853"></a><span class="sd">                            Number of Bands: 2</span>
<a id="__codelineno-0-4854" name="__codelineno-0-4854"></a><span class="sd">                            Band names: [&#39;Band_1&#39;, &#39;Band_2&#39;]</span>
<a id="__codelineno-0-4855" name="__codelineno-0-4855"></a><span class="sd">                            Mask: -9999.0</span>
<a id="__codelineno-0-4856" name="__codelineno-0-4856"></a><span class="sd">                            Data type: int32</span>
<a id="__codelineno-0-4857" name="__codelineno-0-4857"></a><span class="sd">                            File:...</span>
<a id="__codelineno-0-4858" name="__codelineno-0-4858"></a><span class="sd">                &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-4859" name="__codelineno-0-4859"></a><span class="sd">                &gt;&gt;&gt; print(dataset.read_array()) # doctest: +SKIP</span>
<a id="__codelineno-0-4860" name="__codelineno-0-4860"></a><span class="sd">                [[[1 3 3 4]</span>
<a id="__codelineno-0-4861" name="__codelineno-0-4861"></a><span class="sd">                  [1 4 2 4]</span>
<a id="__codelineno-0-4862" name="__codelineno-0-4862"></a><span class="sd">                  [2 4 2 1]</span>
<a id="__codelineno-0-4863" name="__codelineno-0-4863"></a><span class="sd">                  [1 3 2 3]]</span>
<a id="__codelineno-0-4864" name="__codelineno-0-4864"></a><span class="sd">                 [[3 2 1 3]</span>
<a id="__codelineno-0-4865" name="__codelineno-0-4865"></a><span class="sd">                  [4 3 2 2]</span>
<a id="__codelineno-0-4866" name="__codelineno-0-4866"></a><span class="sd">                  [2 2 3 4]</span>
<a id="__codelineno-0-4867" name="__codelineno-0-4867"></a><span class="sd">                  [1 4 1 4]]]</span>
<a id="__codelineno-0-4868" name="__codelineno-0-4868"></a>
<a id="__codelineno-0-4869" name="__codelineno-0-4869"></a><span class="sd">                ```</span>
<a id="__codelineno-0-4870" name="__codelineno-0-4870"></a>
<a id="__codelineno-0-4871" name="__codelineno-0-4871"></a><span class="sd">              - Now, extract the values in the dataset:</span>
<a id="__codelineno-0-4872" name="__codelineno-0-4872"></a>
<a id="__codelineno-0-4873" name="__codelineno-0-4873"></a><span class="sd">                ```python</span>
<a id="__codelineno-0-4874" name="__codelineno-0-4874"></a><span class="sd">                &gt;&gt;&gt; values = dataset.extract()</span>
<a id="__codelineno-0-4875" name="__codelineno-0-4875"></a><span class="sd">                &gt;&gt;&gt; print(values) # doctest: +SKIP</span>
<a id="__codelineno-0-4876" name="__codelineno-0-4876"></a><span class="sd">                [[1 3 3 4 1 4 2 4 2 4 2 1 1 3 2 3]</span>
<a id="__codelineno-0-4877" name="__codelineno-0-4877"></a><span class="sd">                 [3 2 1 3 4 3 2 2 2 2 3 4 1 4 1 4]]</span>
<a id="__codelineno-0-4878" name="__codelineno-0-4878"></a>
<a id="__codelineno-0-4879" name="__codelineno-0-4879"></a><span class="sd">                ```</span>
<a id="__codelineno-0-4880" name="__codelineno-0-4880"></a>
<a id="__codelineno-0-4881" name="__codelineno-0-4881"></a><span class="sd">              - Extract all the values except 2:</span>
<a id="__codelineno-0-4882" name="__codelineno-0-4882"></a>
<a id="__codelineno-0-4883" name="__codelineno-0-4883"></a><span class="sd">                ```python</span>
<a id="__codelineno-0-4884" name="__codelineno-0-4884"></a><span class="sd">                &gt;&gt;&gt; values = dataset.extract(exclude_value=2)</span>
<a id="__codelineno-0-4885" name="__codelineno-0-4885"></a><span class="sd">                &gt;&gt;&gt; print(values) # doctest: +SKIP</span>
<a id="__codelineno-0-4886" name="__codelineno-0-4886"></a>
<a id="__codelineno-0-4887" name="__codelineno-0-4887"></a><span class="sd">                ```</span>
<a id="__codelineno-0-4888" name="__codelineno-0-4888"></a>
<a id="__codelineno-0-4889" name="__codelineno-0-4889"></a><span class="sd">            - Extract values at the location of the given point geometries:</span>
<a id="__codelineno-0-4890" name="__codelineno-0-4890"></a>
<a id="__codelineno-0-4891" name="__codelineno-0-4891"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-4892" name="__codelineno-0-4892"></a><span class="sd">              &gt;&gt;&gt; import geopandas as gpd</span>
<a id="__codelineno-0-4893" name="__codelineno-0-4893"></a><span class="sd">              &gt;&gt;&gt; from shapely.geometry import Point</span>
<a id="__codelineno-0-4894" name="__codelineno-0-4894"></a><span class="sd">              ```</span>
<a id="__codelineno-0-4895" name="__codelineno-0-4895"></a>
<a id="__codelineno-0-4896" name="__codelineno-0-4896"></a><span class="sd">              - Create the points using shapely and GeoPandas to cover the 4 cells with xmin, ymin, xmax, ymax = [0.1, -0.2, 0.2, -0.1]:</span>
<a id="__codelineno-0-4897" name="__codelineno-0-4897"></a>
<a id="__codelineno-0-4898" name="__codelineno-0-4898"></a><span class="sd">                ```python</span>
<a id="__codelineno-0-4899" name="__codelineno-0-4899"></a><span class="sd">                &gt;&gt;&gt; points = gpd.GeoDataFrame(geometry=[Point(0.1, -0.1), Point(0.1, -0.2), Point(0.2, -0.2), Point(0.2, -0.1)],crs=4326)</span>
<a id="__codelineno-0-4900" name="__codelineno-0-4900"></a><span class="sd">                &gt;&gt;&gt; values = dataset.extract(feature=points)</span>
<a id="__codelineno-0-4901" name="__codelineno-0-4901"></a><span class="sd">                &gt;&gt;&gt; print(values) # doctest: +SKIP</span>
<a id="__codelineno-0-4902" name="__codelineno-0-4902"></a><span class="sd">                [[4 3 3 4]</span>
<a id="__codelineno-0-4903" name="__codelineno-0-4903"></a><span class="sd">                 [3 4 4 2]]</span>
<a id="__codelineno-0-4904" name="__codelineno-0-4904"></a>
<a id="__codelineno-0-4905" name="__codelineno-0-4905"></a><span class="sd">                ```</span>
<a id="__codelineno-0-4906" name="__codelineno-0-4906"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4907" name="__codelineno-0-4907"></a>        <span class="c1"># Optimize: make the read_array return only the array for inside the mask feature, and not to read the whole</span>
<a id="__codelineno-0-4908" name="__codelineno-0-4908"></a>        <span class="c1">#  raster</span>
<a id="__codelineno-0-4909" name="__codelineno-0-4909"></a>        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-4910" name="__codelineno-0-4910"></a>        <span class="n">no_data_value</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-4911" name="__codelineno-0-4911"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<a id="__codelineno-0-4912" name="__codelineno-0-4912"></a>        <span class="p">)</span>
<a id="__codelineno-0-4913" name="__codelineno-0-4913"></a>        <span class="k">if</span> <span class="n">feature</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4914" name="__codelineno-0-4914"></a>            <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-4915" name="__codelineno-0-4915"></a>                <span class="p">[</span><span class="n">no_data_value</span><span class="p">,</span> <span class="n">exclude_value</span><span class="p">]</span>
<a id="__codelineno-0-4916" name="__codelineno-0-4916"></a>                <span class="k">if</span> <span class="n">exclude_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-4917" name="__codelineno-0-4917"></a>                <span class="k">else</span> <span class="p">[</span><span class="n">no_data_value</span><span class="p">]</span>
<a id="__codelineno-0-4918" name="__codelineno-0-4918"></a>            <span class="p">)</span>
<a id="__codelineno-0-4919" name="__codelineno-0-4919"></a>            <span class="n">values</span> <span class="o">=</span> <span class="n">get_pixels2</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span>
<a id="__codelineno-0-4920" name="__codelineno-0-4920"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4921" name="__codelineno-0-4921"></a>            <span class="n">indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">map_to_array_coordinates</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
<a id="__codelineno-0-4922" name="__codelineno-0-4922"></a>            <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-4923" name="__codelineno-0-4923"></a>                <span class="n">values</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[:,</span> <span class="n">indices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">indices</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]]</span>
<a id="__codelineno-0-4924" name="__codelineno-0-4924"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4925" name="__codelineno-0-4925"></a>                <span class="n">values</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">indices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">indices</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]]</span>
<a id="__codelineno-0-4926" name="__codelineno-0-4926"></a>
<a id="__codelineno-0-4927" name="__codelineno-0-4927"></a>        <span class="k">return</span> <span class="n">values</span>
<a id="__codelineno-0-4928" name="__codelineno-0-4928"></a>
<a id="__codelineno-0-4929" name="__codelineno-0-4929"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">overlay</span><span class="p">(</span>
<a id="__codelineno-0-4930" name="__codelineno-0-4930"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-4931" name="__codelineno-0-4931"></a>        <span class="n">classes_map</span><span class="p">,</span>
<a id="__codelineno-0-4932" name="__codelineno-0-4932"></a>        <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-4933" name="__codelineno-0-4933"></a>        <span class="n">exclude_value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-4934" name="__codelineno-0-4934"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
<a id="__codelineno-0-4935" name="__codelineno-0-4935"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Overlay.</span>
<a id="__codelineno-0-4936" name="__codelineno-0-4936"></a>
<a id="__codelineno-0-4937" name="__codelineno-0-4937"></a><span class="sd">        Overlay method extracts all the values in the dataset for each class in the given class map.</span>
<a id="__codelineno-0-4938" name="__codelineno-0-4938"></a>
<a id="__codelineno-0-4939" name="__codelineno-0-4939"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-4940" name="__codelineno-0-4940"></a><span class="sd">            classes_map (Dataset):</span>
<a id="__codelineno-0-4941" name="__codelineno-0-4941"></a><span class="sd">                Dataset object for the raster that has classes you want to overlay with the raster.</span>
<a id="__codelineno-0-4942" name="__codelineno-0-4942"></a><span class="sd">            band (int):</span>
<a id="__codelineno-0-4943" name="__codelineno-0-4943"></a><span class="sd">                If the raster is multi-band, choose the band you want to overlay with the classes map. Default is 0.</span>
<a id="__codelineno-0-4944" name="__codelineno-0-4944"></a><span class="sd">            exclude_value (Numeric, optional):</span>
<a id="__codelineno-0-4945" name="__codelineno-0-4945"></a><span class="sd">                Values you want to exclude from extracted values. Default is None.</span>
<a id="__codelineno-0-4946" name="__codelineno-0-4946"></a>
<a id="__codelineno-0-4947" name="__codelineno-0-4947"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-4948" name="__codelineno-0-4948"></a><span class="sd">            Dict:</span>
<a id="__codelineno-0-4949" name="__codelineno-0-4949"></a><span class="sd">                Dictionary with class values as keys (from the class map), and for each key a list of all the intersected</span>
<a id="__codelineno-0-4950" name="__codelineno-0-4950"></a><span class="sd">                values in the base map.</span>
<a id="__codelineno-0-4951" name="__codelineno-0-4951"></a>
<a id="__codelineno-0-4952" name="__codelineno-0-4952"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-4953" name="__codelineno-0-4953"></a><span class="sd">            - Read the dataset:</span>
<a id="__codelineno-0-4954" name="__codelineno-0-4954"></a>
<a id="__codelineno-0-4955" name="__codelineno-0-4955"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-4956" name="__codelineno-0-4956"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.read_file(&quot;examples/data/geotiff/raster-folder/MSWEP_1979.01.01.tif&quot;)</span>
<a id="__codelineno-0-4957" name="__codelineno-0-4957"></a><span class="sd">              &gt;&gt;&gt; dataset.plot(figsize=(6, 8)) # doctest: +SKIP</span>
<a id="__codelineno-0-4958" name="__codelineno-0-4958"></a>
<a id="__codelineno-0-4959" name="__codelineno-0-4959"></a><span class="sd">              ```</span>
<a id="__codelineno-0-4960" name="__codelineno-0-4960"></a>
<a id="__codelineno-0-4961" name="__codelineno-0-4961"></a><span class="sd">              ![rhine-rainfall](./../_images/dataset/rhine-rainfall.png)</span>
<a id="__codelineno-0-4962" name="__codelineno-0-4962"></a>
<a id="__codelineno-0-4963" name="__codelineno-0-4963"></a><span class="sd">            - Read the classes dataset:</span>
<a id="__codelineno-0-4964" name="__codelineno-0-4964"></a>
<a id="__codelineno-0-4965" name="__codelineno-0-4965"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-4966" name="__codelineno-0-4966"></a><span class="sd">              &gt;&gt;&gt; classes = Dataset.read_file(&quot;examples/data/geotiff/rhine-classes.tif&quot;)</span>
<a id="__codelineno-0-4967" name="__codelineno-0-4967"></a><span class="sd">              &gt;&gt;&gt; classes.plot(figsize=(6, 8), color_scale=4, bounds=[1,2,3,4,5,6]) # doctest: +SKIP</span>
<a id="__codelineno-0-4968" name="__codelineno-0-4968"></a>
<a id="__codelineno-0-4969" name="__codelineno-0-4969"></a><span class="sd">              ```</span>
<a id="__codelineno-0-4970" name="__codelineno-0-4970"></a>
<a id="__codelineno-0-4971" name="__codelineno-0-4971"></a><span class="sd">              ![rhine-classes](./../_images/dataset/rhine-classes.png)</span>
<a id="__codelineno-0-4972" name="__codelineno-0-4972"></a>
<a id="__codelineno-0-4973" name="__codelineno-0-4973"></a><span class="sd">            - Overlay the dataset with the classes dataset:</span>
<a id="__codelineno-0-4974" name="__codelineno-0-4974"></a>
<a id="__codelineno-0-4975" name="__codelineno-0-4975"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-4976" name="__codelineno-0-4976"></a><span class="sd">              &gt;&gt;&gt; classes_dict = dataset.overlay(classes)</span>
<a id="__codelineno-0-4977" name="__codelineno-0-4977"></a><span class="sd">              &gt;&gt;&gt; print(classes_dict.keys()) # doctest: +SKIP</span>
<a id="__codelineno-0-4978" name="__codelineno-0-4978"></a><span class="sd">              dict_keys([1, 2, 3, 4, 5])</span>
<a id="__codelineno-0-4979" name="__codelineno-0-4979"></a>
<a id="__codelineno-0-4980" name="__codelineno-0-4980"></a><span class="sd">              ```</span>
<a id="__codelineno-0-4981" name="__codelineno-0-4981"></a>
<a id="__codelineno-0-4982" name="__codelineno-0-4982"></a><span class="sd">            - You can use the key `1` to get the values that overlay class 1.</span>
<a id="__codelineno-0-4983" name="__codelineno-0-4983"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-4984" name="__codelineno-0-4984"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_alignment</span><span class="p">(</span><span class="n">classes_map</span><span class="p">):</span>
<a id="__codelineno-0-4985" name="__codelineno-0-4985"></a>            <span class="k">raise</span> <span class="n">AlignmentError</span><span class="p">(</span>
<a id="__codelineno-0-4986" name="__codelineno-0-4986"></a>                <span class="s2">&quot;The class Dataset is not aligned with the current raster, please use the method &quot;</span>
<a id="__codelineno-0-4987" name="__codelineno-0-4987"></a>                <span class="s2">&quot;&#39;align&#39; to align both rasters.&quot;</span>
<a id="__codelineno-0-4988" name="__codelineno-0-4988"></a>            <span class="p">)</span>
<a id="__codelineno-0-4989" name="__codelineno-0-4989"></a>        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-4990" name="__codelineno-0-4990"></a>        <span class="n">no_data_value</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-4991" name="__codelineno-0-4991"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<a id="__codelineno-0-4992" name="__codelineno-0-4992"></a>        <span class="p">)</span>
<a id="__codelineno-0-4993" name="__codelineno-0-4993"></a>        <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-4994" name="__codelineno-0-4994"></a>            <span class="p">[</span><span class="n">no_data_value</span><span class="p">,</span> <span class="n">exclude_value</span><span class="p">]</span>
<a id="__codelineno-0-4995" name="__codelineno-0-4995"></a>            <span class="k">if</span> <span class="n">exclude_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-4996" name="__codelineno-0-4996"></a>            <span class="k">else</span> <span class="p">[</span><span class="n">no_data_value</span><span class="p">]</span>
<a id="__codelineno-0-4997" name="__codelineno-0-4997"></a>        <span class="p">)</span>
<a id="__codelineno-0-4998" name="__codelineno-0-4998"></a>        <span class="n">ind</span> <span class="o">=</span> <span class="n">get_indices2</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span>
<a id="__codelineno-0-4999" name="__codelineno-0-4999"></a>        <span class="n">classes</span> <span class="o">=</span> <span class="n">classes_map</span><span class="o">.</span><span class="n">read_array</span><span class="p">()</span>
<a id="__codelineno-0-5000" name="__codelineno-0-5000"></a>        <span class="n">values</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<a id="__codelineno-0-5001" name="__codelineno-0-5001"></a>
<a id="__codelineno-0-5002" name="__codelineno-0-5002"></a>        <span class="c1"># extract values</span>
<a id="__codelineno-0-5003" name="__codelineno-0-5003"></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ind_i</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ind</span><span class="p">):</span>
<a id="__codelineno-0-5004" name="__codelineno-0-5004"></a>            <span class="c1"># first check if the sub-basin has a list in the dict if not create a list</span>
<a id="__codelineno-0-5005" name="__codelineno-0-5005"></a>            <span class="n">key</span> <span class="o">=</span> <span class="n">classes</span><span class="p">[</span><span class="n">ind_i</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ind_i</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
<a id="__codelineno-0-5006" name="__codelineno-0-5006"></a>            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
<a id="__codelineno-0-5007" name="__codelineno-0-5007"></a>                <span class="n">values</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<a id="__codelineno-0-5008" name="__codelineno-0-5008"></a>
<a id="__codelineno-0-5009" name="__codelineno-0-5009"></a>            <span class="n">values</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">ind_i</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ind_i</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
<a id="__codelineno-0-5010" name="__codelineno-0-5010"></a>
<a id="__codelineno-0-5011" name="__codelineno-0-5011"></a>        <span class="k">return</span> <span class="n">values</span>
<a id="__codelineno-0-5012" name="__codelineno-0-5012"></a>
<a id="__codelineno-0-5013" name="__codelineno-0-5013"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_mask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-5014" name="__codelineno-0-5014"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the mask array.</span>
<a id="__codelineno-0-5015" name="__codelineno-0-5015"></a>
<a id="__codelineno-0-5016" name="__codelineno-0-5016"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-5017" name="__codelineno-0-5017"></a><span class="sd">            band (int):</span>
<a id="__codelineno-0-5018" name="__codelineno-0-5018"></a><span class="sd">                Band index. Default is 0.</span>
<a id="__codelineno-0-5019" name="__codelineno-0-5019"></a>
<a id="__codelineno-0-5020" name="__codelineno-0-5020"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-5021" name="__codelineno-0-5021"></a><span class="sd">            np.ndarray:</span>
<a id="__codelineno-0-5022" name="__codelineno-0-5022"></a><span class="sd">                Array of the mask. 0 value for cells out of the domain, and 255 for cells in the domain.</span>
<a id="__codelineno-0-5023" name="__codelineno-0-5023"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-5024" name="__codelineno-0-5024"></a>        <span class="c1"># TODO: there is a CreateMaskBand method in the gdal.Dataset class, it creates a mask band for the dataset</span>
<a id="__codelineno-0-5025" name="__codelineno-0-5025"></a>        <span class="c1">#   either internally or externally.</span>
<a id="__codelineno-0-5026" name="__codelineno-0-5026"></a>        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">band</span><span class="p">)</span><span class="o">.</span><span class="n">GetMaskBand</span><span class="p">()</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
<a id="__codelineno-0-5027" name="__codelineno-0-5027"></a>        <span class="k">return</span> <span class="n">arr</span>
<a id="__codelineno-0-5028" name="__codelineno-0-5028"></a>
<a id="__codelineno-0-5029" name="__codelineno-0-5029"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">footprint</span><span class="p">(</span>
<a id="__codelineno-0-5030" name="__codelineno-0-5030"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-5031" name="__codelineno-0-5031"></a>        <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-5032" name="__codelineno-0-5032"></a>        <span class="n">exclude_values</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-5033" name="__codelineno-0-5033"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">GeoDataFrame</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<a id="__codelineno-0-5034" name="__codelineno-0-5034"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Extract the real coverage of the values in a certain band.</span>
<a id="__codelineno-0-5035" name="__codelineno-0-5035"></a>
<a id="__codelineno-0-5036" name="__codelineno-0-5036"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-5037" name="__codelineno-0-5037"></a><span class="sd">            band (int):</span>
<a id="__codelineno-0-5038" name="__codelineno-0-5038"></a><span class="sd">                Band index. Default is 0.</span>
<a id="__codelineno-0-5039" name="__codelineno-0-5039"></a><span class="sd">            exclude_values (Optional[List[Any]]):</span>
<a id="__codelineno-0-5040" name="__codelineno-0-5040"></a><span class="sd">                If you want to exclude a certain value in the raster with another value inter the two values as a</span>
<a id="__codelineno-0-5041" name="__codelineno-0-5041"></a><span class="sd">                list of tuples a [(value_to_be_exclude_valuesd, new_value)].</span>
<a id="__codelineno-0-5042" name="__codelineno-0-5042"></a>
<a id="__codelineno-0-5043" name="__codelineno-0-5043"></a><span class="sd">                - Example of exclude_values usage:</span>
<a id="__codelineno-0-5044" name="__codelineno-0-5044"></a>
<a id="__codelineno-0-5045" name="__codelineno-0-5045"></a><span class="sd">                  ```python</span>
<a id="__codelineno-0-5046" name="__codelineno-0-5046"></a><span class="sd">                  &gt;&gt;&gt; exclude_values = [0]</span>
<a id="__codelineno-0-5047" name="__codelineno-0-5047"></a>
<a id="__codelineno-0-5048" name="__codelineno-0-5048"></a><span class="sd">                  ```</span>
<a id="__codelineno-0-5049" name="__codelineno-0-5049"></a>
<a id="__codelineno-0-5050" name="__codelineno-0-5050"></a><span class="sd">                - This parameter is introduced particularly in the case of rasters that has the no_data_value stored in</span>
<a id="__codelineno-0-5051" name="__codelineno-0-5051"></a><span class="sd">                  the `no_data_value` property does not match the value stored in the band, so this option can correct</span>
<a id="__codelineno-0-5052" name="__codelineno-0-5052"></a><span class="sd">                  this behavior.</span>
<a id="__codelineno-0-5053" name="__codelineno-0-5053"></a>
<a id="__codelineno-0-5054" name="__codelineno-0-5054"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-5055" name="__codelineno-0-5055"></a><span class="sd">            GeoDataFrame:</span>
<a id="__codelineno-0-5056" name="__codelineno-0-5056"></a><span class="sd">                - geodataframe containing the polygon representing the extent of the raster. the extent column should</span>
<a id="__codelineno-0-5057" name="__codelineno-0-5057"></a><span class="sd">                  contain a value of 2 only.</span>
<a id="__codelineno-0-5058" name="__codelineno-0-5058"></a><span class="sd">                - if the dataset had separate polygons, each polygon will be in a separate row.</span>
<a id="__codelineno-0-5059" name="__codelineno-0-5059"></a>
<a id="__codelineno-0-5060" name="__codelineno-0-5060"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-5061" name="__codelineno-0-5061"></a><span class="sd">            - The following raster dataset has flood depth stored in its values, and the non-flooded cells are filled with</span>
<a id="__codelineno-0-5062" name="__codelineno-0-5062"></a><span class="sd">              zero, so to extract the flood extent, we need to exclude the zero flood depth cells.</span>
<a id="__codelineno-0-5063" name="__codelineno-0-5063"></a>
<a id="__codelineno-0-5064" name="__codelineno-0-5064"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5065" name="__codelineno-0-5065"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.read_file(&quot;examples/data/geotiff/rhine-flood.tif&quot;)</span>
<a id="__codelineno-0-5066" name="__codelineno-0-5066"></a><span class="sd">              &gt;&gt;&gt; dataset.plot()</span>
<a id="__codelineno-0-5067" name="__codelineno-0-5067"></a><span class="sd">              (&lt;Figure size 800x800 with 2 Axes&gt;, &lt;Axes: &gt;)</span>
<a id="__codelineno-0-5068" name="__codelineno-0-5068"></a>
<a id="__codelineno-0-5069" name="__codelineno-0-5069"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5070" name="__codelineno-0-5070"></a>
<a id="__codelineno-0-5071" name="__codelineno-0-5071"></a><span class="sd">            ![dataset-footprint-rhine-flood](./../_images/dataset/dataset-footprint-rhine-flood.png)</span>
<a id="__codelineno-0-5072" name="__codelineno-0-5072"></a>
<a id="__codelineno-0-5073" name="__codelineno-0-5073"></a><span class="sd">            - Now, to extract the footprint of the dataset band, we need to specify the `exclude_values` parameter with the</span>
<a id="__codelineno-0-5074" name="__codelineno-0-5074"></a><span class="sd">              value of the non-flooded cells.</span>
<a id="__codelineno-0-5075" name="__codelineno-0-5075"></a>
<a id="__codelineno-0-5076" name="__codelineno-0-5076"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5077" name="__codelineno-0-5077"></a><span class="sd">              &gt;&gt;&gt; extent = dataset.footprint(band=0, exclude_values=[0])</span>
<a id="__codelineno-0-5078" name="__codelineno-0-5078"></a><span class="sd">              &gt;&gt;&gt; print(extent)</span>
<a id="__codelineno-0-5079" name="__codelineno-0-5079"></a><span class="sd">                 Band_1                                           geometry</span>
<a id="__codelineno-0-5080" name="__codelineno-0-5080"></a><span class="sd">              0     2.0  POLYGON ((4070974.182 3181069.473, 4070974.182...</span>
<a id="__codelineno-0-5081" name="__codelineno-0-5081"></a><span class="sd">              1     2.0  POLYGON ((4077674.182 3181169.473, 4077674.182...</span>
<a id="__codelineno-0-5082" name="__codelineno-0-5082"></a><span class="sd">              2     2.0  POLYGON ((4091174.182 3169169.473, 4091174.182...</span>
<a id="__codelineno-0-5083" name="__codelineno-0-5083"></a><span class="sd">              3     2.0  POLYGON ((4088574.182 3176269.473, 4088574.182...</span>
<a id="__codelineno-0-5084" name="__codelineno-0-5084"></a><span class="sd">              4     2.0  POLYGON ((4082974.182 3167869.473, 4082974.182...</span>
<a id="__codelineno-0-5085" name="__codelineno-0-5085"></a><span class="sd">              5     2.0  POLYGON ((4092274.182 3168269.473, 4092274.182...</span>
<a id="__codelineno-0-5086" name="__codelineno-0-5086"></a><span class="sd">              6     2.0  POLYGON ((4072474.182 3181169.473, 4072474.182...</span>
<a id="__codelineno-0-5087" name="__codelineno-0-5087"></a>
<a id="__codelineno-0-5088" name="__codelineno-0-5088"></a><span class="sd">              &gt;&gt;&gt; extent.plot()</span>
<a id="__codelineno-0-5089" name="__codelineno-0-5089"></a><span class="sd">              &lt;Axes: &gt;</span>
<a id="__codelineno-0-5090" name="__codelineno-0-5090"></a>
<a id="__codelineno-0-5091" name="__codelineno-0-5091"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5092" name="__codelineno-0-5092"></a>
<a id="__codelineno-0-5093" name="__codelineno-0-5093"></a><span class="sd">            ![dataset-footprint-rhine-flood-extent](./../_images/dataset/dataset-footprint-rhine-flood-extent.png)</span>
<a id="__codelineno-0-5094" name="__codelineno-0-5094"></a>
<a id="__codelineno-0-5095" name="__codelineno-0-5095"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-5096" name="__codelineno-0-5096"></a>        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-5097" name="__codelineno-0-5097"></a>        <span class="n">no_data_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="n">band</span><span class="p">]</span>
<a id="__codelineno-0-5098" name="__codelineno-0-5098"></a>
<a id="__codelineno-0-5099" name="__codelineno-0-5099"></a>        <span class="k">if</span> <span class="n">no_data_val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-5100" name="__codelineno-0-5100"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">arr</span><span class="p">))</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
<a id="__codelineno-0-5101" name="__codelineno-0-5101"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-5102" name="__codelineno-0-5102"></a>                    <span class="s2">&quot;The nodata value stored in the raster does not exist in the raster &quot;</span>
<a id="__codelineno-0-5103" name="__codelineno-0-5103"></a>                    <span class="s2">&quot;so either the raster extent is all full of data, or the no_data_value stored in the raster is&quot;</span>
<a id="__codelineno-0-5104" name="__codelineno-0-5104"></a>                    <span class="s2">&quot; not correct&quot;</span>
<a id="__codelineno-0-5105" name="__codelineno-0-5105"></a>                <span class="p">)</span>
<a id="__codelineno-0-5106" name="__codelineno-0-5106"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-5107" name="__codelineno-0-5107"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">no_data_val</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.00001</span><span class="p">))</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
<a id="__codelineno-0-5108" name="__codelineno-0-5108"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-5109" name="__codelineno-0-5109"></a>                    <span class="s2">&quot;the nodata value stored in the raster does not exist in the raster &quot;</span>
<a id="__codelineno-0-5110" name="__codelineno-0-5110"></a>                    <span class="s2">&quot;so either the raster extent is all full of data, or the no_data_value stored in the raster is&quot;</span>
<a id="__codelineno-0-5111" name="__codelineno-0-5111"></a>                    <span class="s2">&quot; not correct&quot;</span>
<a id="__codelineno-0-5112" name="__codelineno-0-5112"></a>                <span class="p">)</span>
<a id="__codelineno-0-5113" name="__codelineno-0-5113"></a>        <span class="c1"># if you want to exclude_values any value in the raster</span>
<a id="__codelineno-0-5114" name="__codelineno-0-5114"></a>        <span class="k">if</span> <span class="n">exclude_values</span><span class="p">:</span>
<a id="__codelineno-0-5115" name="__codelineno-0-5115"></a>            <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">exclude_values</span><span class="p">:</span>
<a id="__codelineno-0-5116" name="__codelineno-0-5116"></a>                <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-5117" name="__codelineno-0-5117"></a>                    <span class="c1"># in case the val2 is None, and the array is int type, the following line will give error as None</span>
<a id="__codelineno-0-5118" name="__codelineno-0-5118"></a>                    <span class="c1"># is considered as float</span>
<a id="__codelineno-0-5119" name="__codelineno-0-5119"></a>                    <span class="n">arr</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">val</span><span class="p">)]</span> <span class="o">=</span> <span class="n">no_data_val</span>
<a id="__codelineno-0-5120" name="__codelineno-0-5120"></a>                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
<a id="__codelineno-0-5121" name="__codelineno-0-5121"></a>                    <span class="n">arr</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<a id="__codelineno-0-5122" name="__codelineno-0-5122"></a>                    <span class="n">arr</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">val</span><span class="p">)]</span> <span class="o">=</span> <span class="n">no_data_val</span>
<a id="__codelineno-0-5123" name="__codelineno-0-5123"></a>
<a id="__codelineno-0-5124" name="__codelineno-0-5124"></a>        <span class="c1"># replace all the values with 2</span>
<a id="__codelineno-0-5125" name="__codelineno-0-5125"></a>        <span class="k">if</span> <span class="n">no_data_val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-5126" name="__codelineno-0-5126"></a>            <span class="c1"># check if the whole raster is full of no_data_value</span>
<a id="__codelineno-0-5127" name="__codelineno-0-5127"></a>            <span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">arr</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
<a id="__codelineno-0-5128" name="__codelineno-0-5128"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;the raster is full of no_data_value&quot;</span><span class="p">)</span>
<a id="__codelineno-0-5129" name="__codelineno-0-5129"></a>                <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-5130" name="__codelineno-0-5130"></a>
<a id="__codelineno-0-5131" name="__codelineno-0-5131"></a>            <span class="n">arr</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">arr</span><span class="p">)]</span> <span class="o">=</span> <span class="mi">2</span>
<a id="__codelineno-0-5132" name="__codelineno-0-5132"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-5133" name="__codelineno-0-5133"></a>            <span class="c1"># check if the whole raster is full of no_data_value</span>
<a id="__codelineno-0-5134" name="__codelineno-0-5134"></a>            <span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">no_data_val</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.00001</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
<a id="__codelineno-0-5135" name="__codelineno-0-5135"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;the raster is full of no_data_value&quot;</span><span class="p">)</span>
<a id="__codelineno-0-5136" name="__codelineno-0-5136"></a>                <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-5137" name="__codelineno-0-5137"></a>
<a id="__codelineno-0-5138" name="__codelineno-0-5138"></a>            <span class="n">arr</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">no_data_val</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.00001</span><span class="p">)]</span> <span class="o">=</span> <span class="mi">2</span>
<a id="__codelineno-0-5139" name="__codelineno-0-5139"></a>        <span class="n">new_dataset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span>
<a id="__codelineno-0-5140" name="__codelineno-0-5140"></a>            <span class="n">arr</span><span class="p">,</span> <span class="n">geo</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">epsg</span><span class="p">,</span> <span class="n">no_data_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span>
<a id="__codelineno-0-5141" name="__codelineno-0-5141"></a>        <span class="p">)</span>
<a id="__codelineno-0-5142" name="__codelineno-0-5142"></a>        <span class="c1"># then convert the raster into polygon</span>
<a id="__codelineno-0-5143" name="__codelineno-0-5143"></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="n">new_dataset</span><span class="o">.</span><span class="n">cluster2</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-5144" name="__codelineno-0-5144"></a>        <span class="n">gdf</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Band_1&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_names</span><span class="p">[</span><span class="n">band</span><span class="p">]},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-5145" name="__codelineno-0-5145"></a>
<a id="__codelineno-0-5146" name="__codelineno-0-5146"></a>        <span class="k">return</span> <span class="n">gdf</span>
<a id="__codelineno-0-5147" name="__codelineno-0-5147"></a>
<a id="__codelineno-0-5148" name="__codelineno-0-5148"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-0-5149" name="__codelineno-0-5149"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">normalize</span><span class="p">(</span><span class="n">array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-5150" name="__codelineno-0-5150"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Normalize numpy arrays into scale 0.01.0.</span>
<a id="__codelineno-0-5151" name="__codelineno-0-5151"></a>
<a id="__codelineno-0-5152" name="__codelineno-0-5152"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-5153" name="__codelineno-0-5153"></a><span class="sd">            array (np.ndarray): Numpy array to normalize.</span>
<a id="__codelineno-0-5154" name="__codelineno-0-5154"></a>
<a id="__codelineno-0-5155" name="__codelineno-0-5155"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-5156" name="__codelineno-0-5156"></a><span class="sd">            np.ndarray: Normalized array.</span>
<a id="__codelineno-0-5157" name="__codelineno-0-5157"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-5158" name="__codelineno-0-5158"></a>        <span class="n">array_min</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
<a id="__codelineno-0-5159" name="__codelineno-0-5159"></a>        <span class="n">array_max</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<a id="__codelineno-0-5160" name="__codelineno-0-5160"></a>        <span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="n">array</span> <span class="o">-</span> <span class="n">array_min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">array_max</span> <span class="o">-</span> <span class="n">array_min</span><span class="p">)</span>
<a id="__codelineno-0-5161" name="__codelineno-0-5161"></a>        <span class="k">return</span> <span class="n">val</span>
<a id="__codelineno-0-5162" name="__codelineno-0-5162"></a>
<a id="__codelineno-0-5163" name="__codelineno-0-5163"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-0-5164" name="__codelineno-0-5164"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_rescale</span><span class="p">(</span><span class="n">array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">min_value</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">max_value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-5165" name="__codelineno-0-5165"></a>        <span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="n">array</span> <span class="o">-</span> <span class="n">min_value</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">max_value</span> <span class="o">-</span> <span class="n">min_value</span><span class="p">)</span>
<a id="__codelineno-0-5166" name="__codelineno-0-5166"></a>        <span class="k">return</span> <span class="n">val</span>
<a id="__codelineno-0-5167" name="__codelineno-0-5167"></a>
<a id="__codelineno-0-5168" name="__codelineno-0-5168"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_window</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">256</span><span class="p">):</span>
<a id="__codelineno-0-5169" name="__codelineno-0-5169"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Dataset square window size/offsets.</span>
<a id="__codelineno-0-5170" name="__codelineno-0-5170"></a>
<a id="__codelineno-0-5171" name="__codelineno-0-5171"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-5172" name="__codelineno-0-5172"></a><span class="sd">            size (int):</span>
<a id="__codelineno-0-5173" name="__codelineno-0-5173"></a><span class="sd">                Size of the window in pixels. One value required which is used for both the x and y size. e.g.,</span>
<a id="__codelineno-0-5174" name="__codelineno-0-5174"></a><span class="sd">                256 means a 256x256 window. Default is 256.</span>
<a id="__codelineno-0-5175" name="__codelineno-0-5175"></a>
<a id="__codelineno-0-5176" name="__codelineno-0-5176"></a><span class="sd">        Yields:</span>
<a id="__codelineno-0-5177" name="__codelineno-0-5177"></a><span class="sd">            tuple[int, int, int, int]:</span>
<a id="__codelineno-0-5178" name="__codelineno-0-5178"></a><span class="sd">                (x-offset/column-index, y-offset/row-index, x-size, y-size).</span>
<a id="__codelineno-0-5179" name="__codelineno-0-5179"></a>
<a id="__codelineno-0-5180" name="__codelineno-0-5180"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-5181" name="__codelineno-0-5181"></a><span class="sd">            - Generate 2x2 windows over a 3x5 dataset:</span>
<a id="__codelineno-0-5182" name="__codelineno-0-5182"></a>
<a id="__codelineno-0-5183" name="__codelineno-0-5183"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5184" name="__codelineno-0-5184"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-5185" name="__codelineno-0-5185"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(3, 5)</span>
<a id="__codelineno-0-5186" name="__codelineno-0-5186"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-5187" name="__codelineno-0-5187"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-5188" name="__codelineno-0-5188"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-5189" name="__codelineno-0-5189"></a><span class="sd">              &gt;&gt;&gt; tile_dimensions = list(dataset._window(2))</span>
<a id="__codelineno-0-5190" name="__codelineno-0-5190"></a><span class="sd">              &gt;&gt;&gt; print(tile_dimensions)</span>
<a id="__codelineno-0-5191" name="__codelineno-0-5191"></a><span class="sd">              [(0, 0, 2, 2), (2, 0, 2, 2), (4, 0, 1, 2), (0, 2, 2, 1), (2, 2, 2, 1), (4, 2, 1, 1)]</span>
<a id="__codelineno-0-5192" name="__codelineno-0-5192"></a>
<a id="__codelineno-0-5193" name="__codelineno-0-5193"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5194" name="__codelineno-0-5194"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-5195" name="__codelineno-0-5195"></a>        <span class="n">cols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span>
<a id="__codelineno-0-5196" name="__codelineno-0-5196"></a>        <span class="n">rows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span>
<a id="__codelineno-0-5197" name="__codelineno-0-5197"></a>        <span class="k">for</span> <span class="n">yoff</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">rows</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
<a id="__codelineno-0-5198" name="__codelineno-0-5198"></a>            <span class="n">ysize</span> <span class="o">=</span> <span class="n">size</span> <span class="k">if</span> <span class="n">size</span> <span class="o">+</span> <span class="n">yoff</span> <span class="o">&lt;=</span> <span class="n">rows</span> <span class="k">else</span> <span class="n">rows</span> <span class="o">-</span> <span class="n">yoff</span>
<a id="__codelineno-0-5199" name="__codelineno-0-5199"></a>            <span class="k">for</span> <span class="n">xoff</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
<a id="__codelineno-0-5200" name="__codelineno-0-5200"></a>                <span class="n">xsize</span> <span class="o">=</span> <span class="n">size</span> <span class="k">if</span> <span class="n">size</span> <span class="o">+</span> <span class="n">xoff</span> <span class="o">&lt;=</span> <span class="n">cols</span> <span class="k">else</span> <span class="n">cols</span> <span class="o">-</span> <span class="n">xoff</span>
<a id="__codelineno-0-5201" name="__codelineno-0-5201"></a>                <span class="k">yield</span> <span class="n">xoff</span><span class="p">,</span> <span class="n">yoff</span><span class="p">,</span> <span class="n">xsize</span><span class="p">,</span> <span class="n">ysize</span>
<a id="__codelineno-0-5202" name="__codelineno-0-5202"></a>
<a id="__codelineno-0-5203" name="__codelineno-0-5203"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_tile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">256</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<a id="__codelineno-0-5204" name="__codelineno-0-5204"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get tile.</span>
<a id="__codelineno-0-5205" name="__codelineno-0-5205"></a>
<a id="__codelineno-0-5206" name="__codelineno-0-5206"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-5207" name="__codelineno-0-5207"></a><span class="sd">            size (int):</span>
<a id="__codelineno-0-5208" name="__codelineno-0-5208"></a><span class="sd">                Size of the window in pixels. One value is required which is used for both the x and y size. e.g., 256</span>
<a id="__codelineno-0-5209" name="__codelineno-0-5209"></a><span class="sd">                means a 256x256 window. Default is 256.</span>
<a id="__codelineno-0-5210" name="__codelineno-0-5210"></a>
<a id="__codelineno-0-5211" name="__codelineno-0-5211"></a><span class="sd">        Yields:</span>
<a id="__codelineno-0-5212" name="__codelineno-0-5212"></a><span class="sd">            np.ndarray:</span>
<a id="__codelineno-0-5213" name="__codelineno-0-5213"></a><span class="sd">                Dataset array with a shape `[band, y, x]`.</span>
<a id="__codelineno-0-5214" name="__codelineno-0-5214"></a>
<a id="__codelineno-0-5215" name="__codelineno-0-5215"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-5216" name="__codelineno-0-5216"></a><span class="sd">            - First, we will create a dataset with 3 rows and 5 columns.</span>
<a id="__codelineno-0-5217" name="__codelineno-0-5217"></a>
<a id="__codelineno-0-5218" name="__codelineno-0-5218"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5219" name="__codelineno-0-5219"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-5220" name="__codelineno-0-5220"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(3, 5)</span>
<a id="__codelineno-0-5221" name="__codelineno-0-5221"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-5222" name="__codelineno-0-5222"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-5223" name="__codelineno-0-5223"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-5224" name="__codelineno-0-5224"></a><span class="sd">              &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-5225" name="__codelineno-0-5225"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-5226" name="__codelineno-0-5226"></a><span class="sd">                          Cell size: 0.05</span>
<a id="__codelineno-0-5227" name="__codelineno-0-5227"></a><span class="sd">                          Dimension: 3 * 5</span>
<a id="__codelineno-0-5228" name="__codelineno-0-5228"></a><span class="sd">                          EPSG: 4326</span>
<a id="__codelineno-0-5229" name="__codelineno-0-5229"></a><span class="sd">                          Number of Bands: 1</span>
<a id="__codelineno-0-5230" name="__codelineno-0-5230"></a><span class="sd">                          Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-5231" name="__codelineno-0-5231"></a><span class="sd">                          Mask: -9999.0</span>
<a id="__codelineno-0-5232" name="__codelineno-0-5232"></a><span class="sd">                          Data type: float64</span>
<a id="__codelineno-0-5233" name="__codelineno-0-5233"></a><span class="sd">                          File:...</span>
<a id="__codelineno-0-5234" name="__codelineno-0-5234"></a><span class="sd">              &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-5235" name="__codelineno-0-5235"></a>
<a id="__codelineno-0-5236" name="__codelineno-0-5236"></a><span class="sd">              &gt;&gt;&gt; print(dataset.read_array())   # doctest: +SKIP</span>
<a id="__codelineno-0-5237" name="__codelineno-0-5237"></a><span class="sd">              [[0.55332314 0.48364841 0.67794589 0.6901816  0.70516817]</span>
<a id="__codelineno-0-5238" name="__codelineno-0-5238"></a><span class="sd">               [0.82518332 0.75657103 0.45693945 0.44331782 0.74677865]</span>
<a id="__codelineno-0-5239" name="__codelineno-0-5239"></a><span class="sd">               [0.22231314 0.96283065 0.15201337 0.03522544 0.44616888]]</span>
<a id="__codelineno-0-5240" name="__codelineno-0-5240"></a>
<a id="__codelineno-0-5241" name="__codelineno-0-5241"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5242" name="__codelineno-0-5242"></a><span class="sd">            - The `get_tile` method splits the domain into tiles of the specified `size` using the `_window` function.</span>
<a id="__codelineno-0-5243" name="__codelineno-0-5243"></a>
<a id="__codelineno-0-5244" name="__codelineno-0-5244"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5245" name="__codelineno-0-5245"></a><span class="sd">              &gt;&gt;&gt; tile_dimensions = list(dataset._window(2))</span>
<a id="__codelineno-0-5246" name="__codelineno-0-5246"></a><span class="sd">              &gt;&gt;&gt; print(tile_dimensions)</span>
<a id="__codelineno-0-5247" name="__codelineno-0-5247"></a><span class="sd">              [(0, 0, 2, 2), (2, 0, 2, 2), (4, 0, 1, 2), (0, 2, 2, 1), (2, 2, 2, 1), (4, 2, 1, 1)]</span>
<a id="__codelineno-0-5248" name="__codelineno-0-5248"></a>
<a id="__codelineno-0-5249" name="__codelineno-0-5249"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5250" name="__codelineno-0-5250"></a><span class="sd">              ![get_tile](./../_images/dataset/get_tile.png)</span>
<a id="__codelineno-0-5251" name="__codelineno-0-5251"></a>
<a id="__codelineno-0-5252" name="__codelineno-0-5252"></a><span class="sd">            - So the first two chunks are 2*2, 2*1 chunk, then two 1*2 chunks, and the last chunk is 1*1.</span>
<a id="__codelineno-0-5253" name="__codelineno-0-5253"></a><span class="sd">            - The `get_tile` method returns a generator object that can be used to iterate over the smaller chunks of</span>
<a id="__codelineno-0-5254" name="__codelineno-0-5254"></a><span class="sd">                the data.</span>
<a id="__codelineno-0-5255" name="__codelineno-0-5255"></a>
<a id="__codelineno-0-5256" name="__codelineno-0-5256"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5257" name="__codelineno-0-5257"></a><span class="sd">              &gt;&gt;&gt; tiles_generator = dataset.get_tile(size=2)</span>
<a id="__codelineno-0-5258" name="__codelineno-0-5258"></a><span class="sd">              &gt;&gt;&gt; print(tiles_generator)  # doctest: +SKIP</span>
<a id="__codelineno-0-5259" name="__codelineno-0-5259"></a><span class="sd">              &lt;generator object Dataset.get_tile at 0x00000145AA39E680&gt;</span>
<a id="__codelineno-0-5260" name="__codelineno-0-5260"></a><span class="sd">              &gt;&gt;&gt; print(list(tiles_generator))  # doctest: +SKIP</span>
<a id="__codelineno-0-5261" name="__codelineno-0-5261"></a><span class="sd">              [</span>
<a id="__codelineno-0-5262" name="__codelineno-0-5262"></a><span class="sd">                  array([[0.55332314, 0.48364841],</span>
<a id="__codelineno-0-5263" name="__codelineno-0-5263"></a><span class="sd">                         [0.82518332, 0.75657103]]),</span>
<a id="__codelineno-0-5264" name="__codelineno-0-5264"></a><span class="sd">                  array([[0.67794589, 0.6901816 ],</span>
<a id="__codelineno-0-5265" name="__codelineno-0-5265"></a><span class="sd">                         [0.45693945, 0.44331782]]),</span>
<a id="__codelineno-0-5266" name="__codelineno-0-5266"></a><span class="sd">                  array([[0.70516817], [0.74677865]]),</span>
<a id="__codelineno-0-5267" name="__codelineno-0-5267"></a><span class="sd">                  array([[0.22231314, 0.96283065]]),</span>
<a id="__codelineno-0-5268" name="__codelineno-0-5268"></a><span class="sd">                  array([[0.15201337, 0.03522544]]),</span>
<a id="__codelineno-0-5269" name="__codelineno-0-5269"></a><span class="sd">                  array([[0.44616888]])</span>
<a id="__codelineno-0-5270" name="__codelineno-0-5270"></a><span class="sd">              ]</span>
<a id="__codelineno-0-5271" name="__codelineno-0-5271"></a>
<a id="__codelineno-0-5272" name="__codelineno-0-5272"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5273" name="__codelineno-0-5273"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-5274" name="__codelineno-0-5274"></a>        <span class="k">for</span> <span class="n">xoff</span><span class="p">,</span> <span class="n">yoff</span><span class="p">,</span> <span class="n">xsize</span><span class="p">,</span> <span class="n">ysize</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">):</span>
<a id="__codelineno-0-5275" name="__codelineno-0-5275"></a>            <span class="c1"># read the array at certain indices</span>
<a id="__codelineno-0-5276" name="__codelineno-0-5276"></a>            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">(</span>
<a id="__codelineno-0-5277" name="__codelineno-0-5277"></a>                <span class="n">xoff</span><span class="o">=</span><span class="n">xoff</span><span class="p">,</span> <span class="n">yoff</span><span class="o">=</span><span class="n">yoff</span><span class="p">,</span> <span class="n">xsize</span><span class="o">=</span><span class="n">xsize</span><span class="p">,</span> <span class="n">ysize</span><span class="o">=</span><span class="n">ysize</span>
<a id="__codelineno-0-5278" name="__codelineno-0-5278"></a>            <span class="p">)</span>
<a id="__codelineno-0-5279" name="__codelineno-0-5279"></a>
<a id="__codelineno-0-5280" name="__codelineno-0-5280"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-0-5281" name="__codelineno-0-5281"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_group_neighbours</span><span class="p">(</span>
<a id="__codelineno-0-5282" name="__codelineno-0-5282"></a>        <span class="n">array</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">lower_bound</span><span class="p">,</span> <span class="n">upper_bound</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">cluster</span>
<a id="__codelineno-0-5283" name="__codelineno-0-5283"></a>    <span class="p">):</span>
<a id="__codelineno-0-5284" name="__codelineno-0-5284"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Group neighboring cells with the same values.&quot;&quot;&quot;</span>
<a id="__codelineno-0-5285" name="__codelineno-0-5285"></a>        <span class="c1"># bottom cell</span>
<a id="__codelineno-0-5286" name="__codelineno-0-5286"></a>        <span class="k">if</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
<a id="__codelineno-0-5287" name="__codelineno-0-5287"></a>            <span class="k">if</span> <span class="n">lower_bound</span> <span class="o">&lt;=</span> <span class="n">array</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">upper_bound</span> <span class="ow">and</span> <span class="n">cluster</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5288" name="__codelineno-0-5288"></a>                <span class="n">position</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span>
<a id="__codelineno-0-5289" name="__codelineno-0-5289"></a>                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span>
<a id="__codelineno-0-5290" name="__codelineno-0-5290"></a>                <span class="n">cluster</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">count</span>
<a id="__codelineno-0-5291" name="__codelineno-0-5291"></a>                <span class="n">Dataset</span><span class="o">.</span><span class="n">_group_neighbours</span><span class="p">(</span>
<a id="__codelineno-0-5292" name="__codelineno-0-5292"></a>                    <span class="n">array</span><span class="p">,</span>
<a id="__codelineno-0-5293" name="__codelineno-0-5293"></a>                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-5294" name="__codelineno-0-5294"></a>                    <span class="n">j</span><span class="p">,</span>
<a id="__codelineno-0-5295" name="__codelineno-0-5295"></a>                    <span class="n">lower_bound</span><span class="p">,</span>
<a id="__codelineno-0-5296" name="__codelineno-0-5296"></a>                    <span class="n">upper_bound</span><span class="p">,</span>
<a id="__codelineno-0-5297" name="__codelineno-0-5297"></a>                    <span class="n">position</span><span class="p">,</span>
<a id="__codelineno-0-5298" name="__codelineno-0-5298"></a>                    <span class="n">values</span><span class="p">,</span>
<a id="__codelineno-0-5299" name="__codelineno-0-5299"></a>                    <span class="n">count</span><span class="p">,</span>
<a id="__codelineno-0-5300" name="__codelineno-0-5300"></a>                    <span class="n">cluster</span><span class="p">,</span>
<a id="__codelineno-0-5301" name="__codelineno-0-5301"></a>                <span class="p">)</span>
<a id="__codelineno-0-5302" name="__codelineno-0-5302"></a>
<a id="__codelineno-0-5303" name="__codelineno-0-5303"></a>        <span class="c1"># bottom right</span>
<a id="__codelineno-0-5304" name="__codelineno-0-5304"></a>        <span class="k">if</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
<a id="__codelineno-0-5305" name="__codelineno-0-5305"></a>            <span class="k">if</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
<a id="__codelineno-0-5306" name="__codelineno-0-5306"></a>                <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-5307" name="__codelineno-0-5307"></a>                    <span class="n">lower_bound</span> <span class="o">&lt;=</span> <span class="n">array</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">upper_bound</span>
<a id="__codelineno-0-5308" name="__codelineno-0-5308"></a>                    <span class="ow">and</span> <span class="n">cluster</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>
<a id="__codelineno-0-5309" name="__codelineno-0-5309"></a>                <span class="p">):</span>
<a id="__codelineno-0-5310" name="__codelineno-0-5310"></a>                    <span class="n">position</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-5311" name="__codelineno-0-5311"></a>                    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-5312" name="__codelineno-0-5312"></a>                    <span class="n">cluster</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">count</span>
<a id="__codelineno-0-5313" name="__codelineno-0-5313"></a>                    <span class="n">Dataset</span><span class="o">.</span><span class="n">_group_neighbours</span><span class="p">(</span>
<a id="__codelineno-0-5314" name="__codelineno-0-5314"></a>                        <span class="n">array</span><span class="p">,</span>
<a id="__codelineno-0-5315" name="__codelineno-0-5315"></a>                        <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-5316" name="__codelineno-0-5316"></a>                        <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-5317" name="__codelineno-0-5317"></a>                        <span class="n">lower_bound</span><span class="p">,</span>
<a id="__codelineno-0-5318" name="__codelineno-0-5318"></a>                        <span class="n">upper_bound</span><span class="p">,</span>
<a id="__codelineno-0-5319" name="__codelineno-0-5319"></a>                        <span class="n">position</span><span class="p">,</span>
<a id="__codelineno-0-5320" name="__codelineno-0-5320"></a>                        <span class="n">values</span><span class="p">,</span>
<a id="__codelineno-0-5321" name="__codelineno-0-5321"></a>                        <span class="n">count</span><span class="p">,</span>
<a id="__codelineno-0-5322" name="__codelineno-0-5322"></a>                        <span class="n">cluster</span><span class="p">,</span>
<a id="__codelineno-0-5323" name="__codelineno-0-5323"></a>                    <span class="p">)</span>
<a id="__codelineno-0-5324" name="__codelineno-0-5324"></a>
<a id="__codelineno-0-5325" name="__codelineno-0-5325"></a>        <span class="c1"># right</span>
<a id="__codelineno-0-5326" name="__codelineno-0-5326"></a>        <span class="k">if</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
<a id="__codelineno-0-5327" name="__codelineno-0-5327"></a>            <span class="k">if</span> <span class="n">lower_bound</span> <span class="o">&lt;=</span> <span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">upper_bound</span> <span class="ow">and</span> <span class="n">cluster</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5328" name="__codelineno-0-5328"></a>                <span class="n">position</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-5329" name="__codelineno-0-5329"></a>                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-5330" name="__codelineno-0-5330"></a>                <span class="n">cluster</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">count</span>
<a id="__codelineno-0-5331" name="__codelineno-0-5331"></a>                <span class="n">Dataset</span><span class="o">.</span><span class="n">_group_neighbours</span><span class="p">(</span>
<a id="__codelineno-0-5332" name="__codelineno-0-5332"></a>                    <span class="n">array</span><span class="p">,</span>
<a id="__codelineno-0-5333" name="__codelineno-0-5333"></a>                    <span class="n">i</span><span class="p">,</span>
<a id="__codelineno-0-5334" name="__codelineno-0-5334"></a>                    <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-5335" name="__codelineno-0-5335"></a>                    <span class="n">lower_bound</span><span class="p">,</span>
<a id="__codelineno-0-5336" name="__codelineno-0-5336"></a>                    <span class="n">upper_bound</span><span class="p">,</span>
<a id="__codelineno-0-5337" name="__codelineno-0-5337"></a>                    <span class="n">position</span><span class="p">,</span>
<a id="__codelineno-0-5338" name="__codelineno-0-5338"></a>                    <span class="n">values</span><span class="p">,</span>
<a id="__codelineno-0-5339" name="__codelineno-0-5339"></a>                    <span class="n">count</span><span class="p">,</span>
<a id="__codelineno-0-5340" name="__codelineno-0-5340"></a>                    <span class="n">cluster</span><span class="p">,</span>
<a id="__codelineno-0-5341" name="__codelineno-0-5341"></a>                <span class="p">)</span>
<a id="__codelineno-0-5342" name="__codelineno-0-5342"></a>
<a id="__codelineno-0-5343" name="__codelineno-0-5343"></a>        <span class="c1"># upper right</span>
<a id="__codelineno-0-5344" name="__codelineno-0-5344"></a>        <span class="k">if</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
<a id="__codelineno-0-5345" name="__codelineno-0-5345"></a>            <span class="k">if</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5346" name="__codelineno-0-5346"></a>                <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-5347" name="__codelineno-0-5347"></a>                    <span class="n">lower_bound</span> <span class="o">&lt;=</span> <span class="n">array</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">upper_bound</span>
<a id="__codelineno-0-5348" name="__codelineno-0-5348"></a>                    <span class="ow">and</span> <span class="n">cluster</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>
<a id="__codelineno-0-5349" name="__codelineno-0-5349"></a>                <span class="p">):</span>
<a id="__codelineno-0-5350" name="__codelineno-0-5350"></a>                    <span class="n">position</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-5351" name="__codelineno-0-5351"></a>                    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-5352" name="__codelineno-0-5352"></a>                    <span class="n">cluster</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">count</span>
<a id="__codelineno-0-5353" name="__codelineno-0-5353"></a>                    <span class="n">Dataset</span><span class="o">.</span><span class="n">_group_neighbours</span><span class="p">(</span>
<a id="__codelineno-0-5354" name="__codelineno-0-5354"></a>                        <span class="n">array</span><span class="p">,</span>
<a id="__codelineno-0-5355" name="__codelineno-0-5355"></a>                        <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-5356" name="__codelineno-0-5356"></a>                        <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-5357" name="__codelineno-0-5357"></a>                        <span class="n">lower_bound</span><span class="p">,</span>
<a id="__codelineno-0-5358" name="__codelineno-0-5358"></a>                        <span class="n">upper_bound</span><span class="p">,</span>
<a id="__codelineno-0-5359" name="__codelineno-0-5359"></a>                        <span class="n">position</span><span class="p">,</span>
<a id="__codelineno-0-5360" name="__codelineno-0-5360"></a>                        <span class="n">values</span><span class="p">,</span>
<a id="__codelineno-0-5361" name="__codelineno-0-5361"></a>                        <span class="n">count</span><span class="p">,</span>
<a id="__codelineno-0-5362" name="__codelineno-0-5362"></a>                        <span class="n">cluster</span><span class="p">,</span>
<a id="__codelineno-0-5363" name="__codelineno-0-5363"></a>                    <span class="p">)</span>
<a id="__codelineno-0-5364" name="__codelineno-0-5364"></a>        <span class="c1"># top</span>
<a id="__codelineno-0-5365" name="__codelineno-0-5365"></a>        <span class="k">if</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5366" name="__codelineno-0-5366"></a>            <span class="k">if</span> <span class="n">lower_bound</span> <span class="o">&lt;=</span> <span class="n">array</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">upper_bound</span> <span class="ow">and</span> <span class="n">cluster</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5367" name="__codelineno-0-5367"></a>                <span class="n">position</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span>
<a id="__codelineno-0-5368" name="__codelineno-0-5368"></a>                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span>
<a id="__codelineno-0-5369" name="__codelineno-0-5369"></a>                <span class="n">cluster</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">count</span>
<a id="__codelineno-0-5370" name="__codelineno-0-5370"></a>                <span class="n">Dataset</span><span class="o">.</span><span class="n">_group_neighbours</span><span class="p">(</span>
<a id="__codelineno-0-5371" name="__codelineno-0-5371"></a>                    <span class="n">array</span><span class="p">,</span>
<a id="__codelineno-0-5372" name="__codelineno-0-5372"></a>                    <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-5373" name="__codelineno-0-5373"></a>                    <span class="n">j</span><span class="p">,</span>
<a id="__codelineno-0-5374" name="__codelineno-0-5374"></a>                    <span class="n">lower_bound</span><span class="p">,</span>
<a id="__codelineno-0-5375" name="__codelineno-0-5375"></a>                    <span class="n">upper_bound</span><span class="p">,</span>
<a id="__codelineno-0-5376" name="__codelineno-0-5376"></a>                    <span class="n">position</span><span class="p">,</span>
<a id="__codelineno-0-5377" name="__codelineno-0-5377"></a>                    <span class="n">values</span><span class="p">,</span>
<a id="__codelineno-0-5378" name="__codelineno-0-5378"></a>                    <span class="n">count</span><span class="p">,</span>
<a id="__codelineno-0-5379" name="__codelineno-0-5379"></a>                    <span class="n">cluster</span><span class="p">,</span>
<a id="__codelineno-0-5380" name="__codelineno-0-5380"></a>                <span class="p">)</span>
<a id="__codelineno-0-5381" name="__codelineno-0-5381"></a>
<a id="__codelineno-0-5382" name="__codelineno-0-5382"></a>        <span class="c1"># top left</span>
<a id="__codelineno-0-5383" name="__codelineno-0-5383"></a>        <span class="k">if</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5384" name="__codelineno-0-5384"></a>            <span class="k">if</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5385" name="__codelineno-0-5385"></a>                <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-5386" name="__codelineno-0-5386"></a>                    <span class="n">lower_bound</span> <span class="o">&lt;=</span> <span class="n">array</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">upper_bound</span>
<a id="__codelineno-0-5387" name="__codelineno-0-5387"></a>                    <span class="ow">and</span> <span class="n">cluster</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>
<a id="__codelineno-0-5388" name="__codelineno-0-5388"></a>                <span class="p">):</span>
<a id="__codelineno-0-5389" name="__codelineno-0-5389"></a>                    <span class="n">position</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-5390" name="__codelineno-0-5390"></a>                    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-5391" name="__codelineno-0-5391"></a>                    <span class="n">cluster</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">count</span>
<a id="__codelineno-0-5392" name="__codelineno-0-5392"></a>                    <span class="n">Dataset</span><span class="o">.</span><span class="n">_group_neighbours</span><span class="p">(</span>
<a id="__codelineno-0-5393" name="__codelineno-0-5393"></a>                        <span class="n">array</span><span class="p">,</span>
<a id="__codelineno-0-5394" name="__codelineno-0-5394"></a>                        <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-5395" name="__codelineno-0-5395"></a>                        <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-5396" name="__codelineno-0-5396"></a>                        <span class="n">lower_bound</span><span class="p">,</span>
<a id="__codelineno-0-5397" name="__codelineno-0-5397"></a>                        <span class="n">upper_bound</span><span class="p">,</span>
<a id="__codelineno-0-5398" name="__codelineno-0-5398"></a>                        <span class="n">position</span><span class="p">,</span>
<a id="__codelineno-0-5399" name="__codelineno-0-5399"></a>                        <span class="n">values</span><span class="p">,</span>
<a id="__codelineno-0-5400" name="__codelineno-0-5400"></a>                        <span class="n">count</span><span class="p">,</span>
<a id="__codelineno-0-5401" name="__codelineno-0-5401"></a>                        <span class="n">cluster</span><span class="p">,</span>
<a id="__codelineno-0-5402" name="__codelineno-0-5402"></a>                    <span class="p">)</span>
<a id="__codelineno-0-5403" name="__codelineno-0-5403"></a>        <span class="c1"># left</span>
<a id="__codelineno-0-5404" name="__codelineno-0-5404"></a>        <span class="k">if</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5405" name="__codelineno-0-5405"></a>            <span class="k">if</span> <span class="n">lower_bound</span> <span class="o">&lt;=</span> <span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">upper_bound</span> <span class="ow">and</span> <span class="n">cluster</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5406" name="__codelineno-0-5406"></a>                <span class="n">position</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-5407" name="__codelineno-0-5407"></a>                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-5408" name="__codelineno-0-5408"></a>                <span class="n">cluster</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">count</span>
<a id="__codelineno-0-5409" name="__codelineno-0-5409"></a>                <span class="n">Dataset</span><span class="o">.</span><span class="n">_group_neighbours</span><span class="p">(</span>
<a id="__codelineno-0-5410" name="__codelineno-0-5410"></a>                    <span class="n">array</span><span class="p">,</span>
<a id="__codelineno-0-5411" name="__codelineno-0-5411"></a>                    <span class="n">i</span><span class="p">,</span>
<a id="__codelineno-0-5412" name="__codelineno-0-5412"></a>                    <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-5413" name="__codelineno-0-5413"></a>                    <span class="n">lower_bound</span><span class="p">,</span>
<a id="__codelineno-0-5414" name="__codelineno-0-5414"></a>                    <span class="n">upper_bound</span><span class="p">,</span>
<a id="__codelineno-0-5415" name="__codelineno-0-5415"></a>                    <span class="n">position</span><span class="p">,</span>
<a id="__codelineno-0-5416" name="__codelineno-0-5416"></a>                    <span class="n">values</span><span class="p">,</span>
<a id="__codelineno-0-5417" name="__codelineno-0-5417"></a>                    <span class="n">count</span><span class="p">,</span>
<a id="__codelineno-0-5418" name="__codelineno-0-5418"></a>                    <span class="n">cluster</span><span class="p">,</span>
<a id="__codelineno-0-5419" name="__codelineno-0-5419"></a>                <span class="p">)</span>
<a id="__codelineno-0-5420" name="__codelineno-0-5420"></a>
<a id="__codelineno-0-5421" name="__codelineno-0-5421"></a>        <span class="c1"># bottom left</span>
<a id="__codelineno-0-5422" name="__codelineno-0-5422"></a>        <span class="k">if</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5423" name="__codelineno-0-5423"></a>            <span class="k">if</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
<a id="__codelineno-0-5424" name="__codelineno-0-5424"></a>                <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-5425" name="__codelineno-0-5425"></a>                    <span class="n">lower_bound</span> <span class="o">&lt;=</span> <span class="n">array</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">upper_bound</span>
<a id="__codelineno-0-5426" name="__codelineno-0-5426"></a>                    <span class="ow">and</span> <span class="n">cluster</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>
<a id="__codelineno-0-5427" name="__codelineno-0-5427"></a>                <span class="p">):</span>
<a id="__codelineno-0-5428" name="__codelineno-0-5428"></a>                    <span class="n">position</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-5429" name="__codelineno-0-5429"></a>                    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-5430" name="__codelineno-0-5430"></a>                    <span class="n">cluster</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">count</span>
<a id="__codelineno-0-5431" name="__codelineno-0-5431"></a>                    <span class="n">Dataset</span><span class="o">.</span><span class="n">_group_neighbours</span><span class="p">(</span>
<a id="__codelineno-0-5432" name="__codelineno-0-5432"></a>                        <span class="n">array</span><span class="p">,</span>
<a id="__codelineno-0-5433" name="__codelineno-0-5433"></a>                        <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-5434" name="__codelineno-0-5434"></a>                        <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-5435" name="__codelineno-0-5435"></a>                        <span class="n">lower_bound</span><span class="p">,</span>
<a id="__codelineno-0-5436" name="__codelineno-0-5436"></a>                        <span class="n">upper_bound</span><span class="p">,</span>
<a id="__codelineno-0-5437" name="__codelineno-0-5437"></a>                        <span class="n">position</span><span class="p">,</span>
<a id="__codelineno-0-5438" name="__codelineno-0-5438"></a>                        <span class="n">values</span><span class="p">,</span>
<a id="__codelineno-0-5439" name="__codelineno-0-5439"></a>                        <span class="n">count</span><span class="p">,</span>
<a id="__codelineno-0-5440" name="__codelineno-0-5440"></a>                        <span class="n">cluster</span><span class="p">,</span>
<a id="__codelineno-0-5441" name="__codelineno-0-5441"></a>                    <span class="p">)</span>
<a id="__codelineno-0-5442" name="__codelineno-0-5442"></a>
<a id="__codelineno-0-5443" name="__codelineno-0-5443"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cluster</span><span class="p">(</span>
<a id="__codelineno-0-5444" name="__codelineno-0-5444"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">lower_bound</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">upper_bound</span><span class="p">:</span> <span class="n">Any</span>
<a id="__codelineno-0-5445" name="__codelineno-0-5445"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
<a id="__codelineno-0-5446" name="__codelineno-0-5446"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Group all the connected values between two bounds.</span>
<a id="__codelineno-0-5447" name="__codelineno-0-5447"></a>
<a id="__codelineno-0-5448" name="__codelineno-0-5448"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-5449" name="__codelineno-0-5449"></a><span class="sd">            lower_bound (Number):</span>
<a id="__codelineno-0-5450" name="__codelineno-0-5450"></a><span class="sd">                Lower bound of the cluster.</span>
<a id="__codelineno-0-5451" name="__codelineno-0-5451"></a><span class="sd">            upper_bound (Number):</span>
<a id="__codelineno-0-5452" name="__codelineno-0-5452"></a><span class="sd">                Upper bound of the cluster.</span>
<a id="__codelineno-0-5453" name="__codelineno-0-5453"></a>
<a id="__codelineno-0-5454" name="__codelineno-0-5454"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-5455" name="__codelineno-0-5455"></a><span class="sd">            tuple[np.ndarray, int, list, list]:</span>
<a id="__codelineno-0-5456" name="__codelineno-0-5456"></a><span class="sd">                - cluster (np.ndarray):</span>
<a id="__codelineno-0-5457" name="__codelineno-0-5457"></a><span class="sd">                    Array with integers representing the cluster number per cell.</span>
<a id="__codelineno-0-5458" name="__codelineno-0-5458"></a><span class="sd">                - count (int):</span>
<a id="__codelineno-0-5459" name="__codelineno-0-5459"></a><span class="sd">                    Number of clusters in the array.</span>
<a id="__codelineno-0-5460" name="__codelineno-0-5460"></a><span class="sd">                - position (list[list[int, int]]):</span>
<a id="__codelineno-0-5461" name="__codelineno-0-5461"></a><span class="sd">                    List of [row, col] indices for the position of each value.</span>
<a id="__codelineno-0-5462" name="__codelineno-0-5462"></a><span class="sd">                - values (list[Number]):</span>
<a id="__codelineno-0-5463" name="__codelineno-0-5463"></a><span class="sd">                    Values stored in each cell in the cluster.</span>
<a id="__codelineno-0-5464" name="__codelineno-0-5464"></a>
<a id="__codelineno-0-5465" name="__codelineno-0-5465"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-5466" name="__codelineno-0-5466"></a><span class="sd">            - First, we will create a dataset with 10 rows and 10 columns.</span>
<a id="__codelineno-0-5467" name="__codelineno-0-5467"></a>
<a id="__codelineno-0-5468" name="__codelineno-0-5468"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5469" name="__codelineno-0-5469"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-5470" name="__codelineno-0-5470"></a><span class="sd">              &gt;&gt;&gt; np.random.seed(10)</span>
<a id="__codelineno-0-5471" name="__codelineno-0-5471"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1, 5, size=(5, 5))</span>
<a id="__codelineno-0-5472" name="__codelineno-0-5472"></a><span class="sd">              &gt;&gt;&gt; print(arr) # doctest: +SKIP</span>
<a id="__codelineno-0-5473" name="__codelineno-0-5473"></a><span class="sd">              [[2 3 3 2 3]</span>
<a id="__codelineno-0-5474" name="__codelineno-0-5474"></a><span class="sd">               [3 4 1 1 1]</span>
<a id="__codelineno-0-5475" name="__codelineno-0-5475"></a><span class="sd">               [1 3 3 2 2]</span>
<a id="__codelineno-0-5476" name="__codelineno-0-5476"></a><span class="sd">               [4 1 1 3 2]</span>
<a id="__codelineno-0-5477" name="__codelineno-0-5477"></a><span class="sd">               [2 4 2 3 2]]</span>
<a id="__codelineno-0-5478" name="__codelineno-0-5478"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-5479" name="__codelineno-0-5479"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-5480" name="__codelineno-0-5480"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-5481" name="__codelineno-0-5481"></a><span class="sd">              &gt;&gt;&gt; dataset.plot(</span>
<a id="__codelineno-0-5482" name="__codelineno-0-5482"></a><span class="sd">              ...     color_scale=4, bounds=[1, 1.9, 4.1, 5], display_cell_value=True, num_size=12,</span>
<a id="__codelineno-0-5483" name="__codelineno-0-5483"></a><span class="sd">              ...     background_color_threshold=5</span>
<a id="__codelineno-0-5484" name="__codelineno-0-5484"></a><span class="sd">              ... )  # doctest: +SKIP</span>
<a id="__codelineno-0-5485" name="__codelineno-0-5485"></a>
<a id="__codelineno-0-5486" name="__codelineno-0-5486"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5487" name="__codelineno-0-5487"></a><span class="sd">              ![cluster](./../_images/dataset/cluster.png)</span>
<a id="__codelineno-0-5488" name="__codelineno-0-5488"></a>
<a id="__codelineno-0-5489" name="__codelineno-0-5489"></a><span class="sd">            - Now let&#39;s cluster the values in the dataset that are between 2 and 4.</span>
<a id="__codelineno-0-5490" name="__codelineno-0-5490"></a>
<a id="__codelineno-0-5491" name="__codelineno-0-5491"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5492" name="__codelineno-0-5492"></a><span class="sd">              &gt;&gt;&gt; lower_value = 2</span>
<a id="__codelineno-0-5493" name="__codelineno-0-5493"></a><span class="sd">              &gt;&gt;&gt; upper_value = 4</span>
<a id="__codelineno-0-5494" name="__codelineno-0-5494"></a><span class="sd">              &gt;&gt;&gt; cluster_array, count, position, values = dataset.cluster(lower_value, upper_value)</span>
<a id="__codelineno-0-5495" name="__codelineno-0-5495"></a>
<a id="__codelineno-0-5496" name="__codelineno-0-5496"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5497" name="__codelineno-0-5497"></a><span class="sd">            - The first returned output is a binary array with 1 indicating that the cell value is inside the cluster, and 0 is outside.</span>
<a id="__codelineno-0-5498" name="__codelineno-0-5498"></a>
<a id="__codelineno-0-5499" name="__codelineno-0-5499"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5500" name="__codelineno-0-5500"></a><span class="sd">              &gt;&gt;&gt; print(cluster_array)  # doctest: +SKIP</span>
<a id="__codelineno-0-5501" name="__codelineno-0-5501"></a><span class="sd">              [[1. 1. 1. 1. 1.]</span>
<a id="__codelineno-0-5502" name="__codelineno-0-5502"></a><span class="sd">               [1. 1. 0. 0. 0.]</span>
<a id="__codelineno-0-5503" name="__codelineno-0-5503"></a><span class="sd">               [0. 1. 1. 1. 1.]</span>
<a id="__codelineno-0-5504" name="__codelineno-0-5504"></a><span class="sd">               [1. 0. 0. 1. 1.]</span>
<a id="__codelineno-0-5505" name="__codelineno-0-5505"></a><span class="sd">               [1. 1. 1. 1. 1.]]</span>
<a id="__codelineno-0-5506" name="__codelineno-0-5506"></a>
<a id="__codelineno-0-5507" name="__codelineno-0-5507"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5508" name="__codelineno-0-5508"></a><span class="sd">            - The second returned value is the number of connected clusters.</span>
<a id="__codelineno-0-5509" name="__codelineno-0-5509"></a>
<a id="__codelineno-0-5510" name="__codelineno-0-5510"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5511" name="__codelineno-0-5511"></a><span class="sd">              &gt;&gt;&gt; print(count) # doctest: +SKIP</span>
<a id="__codelineno-0-5512" name="__codelineno-0-5512"></a><span class="sd">              2</span>
<a id="__codelineno-0-5513" name="__codelineno-0-5513"></a>
<a id="__codelineno-0-5514" name="__codelineno-0-5514"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5515" name="__codelineno-0-5515"></a><span class="sd">            - The third returned value is the indices of the cells that belong to the cluster.</span>
<a id="__codelineno-0-5516" name="__codelineno-0-5516"></a>
<a id="__codelineno-0-5517" name="__codelineno-0-5517"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5518" name="__codelineno-0-5518"></a><span class="sd">              &gt;&gt;&gt; print(position) # doctest: +SKIP</span>
<a id="__codelineno-0-5519" name="__codelineno-0-5519"></a><span class="sd">              [[1, 0], [2, 1], [2, 2], [3, 3], [4, 3], [4, 4], [3, 4], [2, 4], [2, 3], [4, 2], [4, 1], [3, 0], [4, 0], [1, 1], [0, 2], [0, 3], [0, 4], [0, 1], [0, 0]]</span>
<a id="__codelineno-0-5520" name="__codelineno-0-5520"></a>
<a id="__codelineno-0-5521" name="__codelineno-0-5521"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5522" name="__codelineno-0-5522"></a><span class="sd">            - The fourth returned value is a list of the values that are in the cluster (extracted from these cells).</span>
<a id="__codelineno-0-5523" name="__codelineno-0-5523"></a>
<a id="__codelineno-0-5524" name="__codelineno-0-5524"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5525" name="__codelineno-0-5525"></a><span class="sd">              &gt;&gt;&gt; print(values) # doctest: +SKIP</span>
<a id="__codelineno-0-5526" name="__codelineno-0-5526"></a><span class="sd">              [3, 3, 3, 3, 3, 2, 2, 2, 2, 2, 4, 4, 2, 4, 3, 2, 3, 3, 2]</span>
<a id="__codelineno-0-5527" name="__codelineno-0-5527"></a>
<a id="__codelineno-0-5528" name="__codelineno-0-5528"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5529" name="__codelineno-0-5529"></a>
<a id="__codelineno-0-5530" name="__codelineno-0-5530"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-5531" name="__codelineno-0-5531"></a>        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">()</span>
<a id="__codelineno-0-5532" name="__codelineno-0-5532"></a>        <span class="n">position</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-5533" name="__codelineno-0-5533"></a>        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-5534" name="__codelineno-0-5534"></a>        <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-5535" name="__codelineno-0-5535"></a>        <span class="n">cluster</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
<a id="__codelineno-0-5536" name="__codelineno-0-5536"></a>
<a id="__codelineno-0-5537" name="__codelineno-0-5537"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
<a id="__codelineno-0-5538" name="__codelineno-0-5538"></a>            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
<a id="__codelineno-0-5539" name="__codelineno-0-5539"></a>                <span class="k">if</span> <span class="n">lower_bound</span> <span class="o">&lt;=</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">upper_bound</span> <span class="ow">and</span> <span class="n">cluster</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5540" name="__codelineno-0-5540"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_group_neighbours</span><span class="p">(</span>
<a id="__codelineno-0-5541" name="__codelineno-0-5541"></a>                        <span class="n">data</span><span class="p">,</span>
<a id="__codelineno-0-5542" name="__codelineno-0-5542"></a>                        <span class="n">i</span><span class="p">,</span>
<a id="__codelineno-0-5543" name="__codelineno-0-5543"></a>                        <span class="n">j</span><span class="p">,</span>
<a id="__codelineno-0-5544" name="__codelineno-0-5544"></a>                        <span class="n">lower_bound</span><span class="p">,</span>
<a id="__codelineno-0-5545" name="__codelineno-0-5545"></a>                        <span class="n">upper_bound</span><span class="p">,</span>
<a id="__codelineno-0-5546" name="__codelineno-0-5546"></a>                        <span class="n">position</span><span class="p">,</span>
<a id="__codelineno-0-5547" name="__codelineno-0-5547"></a>                        <span class="n">values</span><span class="p">,</span>
<a id="__codelineno-0-5548" name="__codelineno-0-5548"></a>                        <span class="n">count</span><span class="p">,</span>
<a id="__codelineno-0-5549" name="__codelineno-0-5549"></a>                        <span class="n">cluster</span><span class="p">,</span>
<a id="__codelineno-0-5550" name="__codelineno-0-5550"></a>                    <span class="p">)</span>
<a id="__codelineno-0-5551" name="__codelineno-0-5551"></a>                    <span class="k">if</span> <span class="n">cluster</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5552" name="__codelineno-0-5552"></a>                        <span class="n">position</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span>
<a id="__codelineno-0-5553" name="__codelineno-0-5553"></a>                        <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span>
<a id="__codelineno-0-5554" name="__codelineno-0-5554"></a>                        <span class="n">cluster</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">count</span>
<a id="__codelineno-0-5555" name="__codelineno-0-5555"></a>                    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-5556" name="__codelineno-0-5556"></a>
<a id="__codelineno-0-5557" name="__codelineno-0-5557"></a>        <span class="k">return</span> <span class="n">cluster</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">values</span>
<a id="__codelineno-0-5558" name="__codelineno-0-5558"></a>
<a id="__codelineno-0-5559" name="__codelineno-0-5559"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cluster2</span><span class="p">(</span>
<a id="__codelineno-0-5560" name="__codelineno-0-5560"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-5561" name="__codelineno-0-5561"></a>        <span class="n">band</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-5562" name="__codelineno-0-5562"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GeoDataFrame</span><span class="p">:</span>
<a id="__codelineno-0-5563" name="__codelineno-0-5563"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cluster the connected equal cells into polygons.</span>
<a id="__codelineno-0-5564" name="__codelineno-0-5564"></a>
<a id="__codelineno-0-5565" name="__codelineno-0-5565"></a><span class="sd">        - Creates vector polygons for all connected regions of pixels in the raster sharing a common</span>
<a id="__codelineno-0-5566" name="__codelineno-0-5566"></a><span class="sd">            pixel value (group neighboring cells with the same value into one polygon).</span>
<a id="__codelineno-0-5567" name="__codelineno-0-5567"></a>
<a id="__codelineno-0-5568" name="__codelineno-0-5568"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-5569" name="__codelineno-0-5569"></a><span class="sd">            band (int | List[int] | None):</span>
<a id="__codelineno-0-5570" name="__codelineno-0-5570"></a><span class="sd">                Band index 0, 1, 2, 3, </span>
<a id="__codelineno-0-5571" name="__codelineno-0-5571"></a>
<a id="__codelineno-0-5572" name="__codelineno-0-5572"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-5573" name="__codelineno-0-5573"></a><span class="sd">            GeoDataFrame:</span>
<a id="__codelineno-0-5574" name="__codelineno-0-5574"></a><span class="sd">                GeodataFrame containing polygon geomtries for all connected regions.</span>
<a id="__codelineno-0-5575" name="__codelineno-0-5575"></a>
<a id="__codelineno-0-5576" name="__codelineno-0-5576"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-5577" name="__codelineno-0-5577"></a><span class="sd">            - First, we will create a 10*10 dataset full of random integer between 1, and 5.</span>
<a id="__codelineno-0-5578" name="__codelineno-0-5578"></a>
<a id="__codelineno-0-5579" name="__codelineno-0-5579"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5580" name="__codelineno-0-5580"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-5581" name="__codelineno-0-5581"></a><span class="sd">              &gt;&gt;&gt; np.random.seed(200)</span>
<a id="__codelineno-0-5582" name="__codelineno-0-5582"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1, 5, size=(10, 10))</span>
<a id="__codelineno-0-5583" name="__codelineno-0-5583"></a><span class="sd">              &gt;&gt;&gt; print(arr)  # doctest: +SKIP</span>
<a id="__codelineno-0-5584" name="__codelineno-0-5584"></a><span class="sd">              [[3 2 1 1 3 4 1 4 2 3]</span>
<a id="__codelineno-0-5585" name="__codelineno-0-5585"></a><span class="sd">               [4 2 2 4 3 3 1 2 4 4]</span>
<a id="__codelineno-0-5586" name="__codelineno-0-5586"></a><span class="sd">               [4 2 4 2 3 4 2 1 4 3]</span>
<a id="__codelineno-0-5587" name="__codelineno-0-5587"></a><span class="sd">               [3 2 1 4 3 3 4 1 1 4]</span>
<a id="__codelineno-0-5588" name="__codelineno-0-5588"></a><span class="sd">               [1 2 4 2 2 1 3 2 3 1]</span>
<a id="__codelineno-0-5589" name="__codelineno-0-5589"></a><span class="sd">               [1 4 4 4 1 1 4 2 1 1]</span>
<a id="__codelineno-0-5590" name="__codelineno-0-5590"></a><span class="sd">               [1 3 2 3 3 4 1 3 1 3]</span>
<a id="__codelineno-0-5591" name="__codelineno-0-5591"></a><span class="sd">               [4 1 3 3 3 4 1 4 1 1]</span>
<a id="__codelineno-0-5592" name="__codelineno-0-5592"></a><span class="sd">               [2 1 3 3 4 2 2 1 3 4]</span>
<a id="__codelineno-0-5593" name="__codelineno-0-5593"></a><span class="sd">               [2 3 2 2 4 2 1 3 2 2]]</span>
<a id="__codelineno-0-5594" name="__codelineno-0-5594"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-5595" name="__codelineno-0-5595"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-5596" name="__codelineno-0-5596"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-5597" name="__codelineno-0-5597"></a>
<a id="__codelineno-0-5598" name="__codelineno-0-5598"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5599" name="__codelineno-0-5599"></a>
<a id="__codelineno-0-5600" name="__codelineno-0-5600"></a><span class="sd">            - Now, let&#39;s cluster the connected equal cells into polygons.</span>
<a id="__codelineno-0-5601" name="__codelineno-0-5601"></a>
<a id="__codelineno-0-5602" name="__codelineno-0-5602"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5603" name="__codelineno-0-5603"></a><span class="sd">              &gt;&gt;&gt; gdf = dataset.cluster2()</span>
<a id="__codelineno-0-5604" name="__codelineno-0-5604"></a><span class="sd">              &gt;&gt;&gt; print(gdf)  # doctest: +SKIP</span>
<a id="__codelineno-0-5605" name="__codelineno-0-5605"></a><span class="sd">                  Band_1                                           geometry</span>
<a id="__codelineno-0-5606" name="__codelineno-0-5606"></a><span class="sd">              0        3  POLYGON ((0 0, 0 -0.05, 0.05 -0.05, 0.05 0, 0 0))</span>
<a id="__codelineno-0-5607" name="__codelineno-0-5607"></a><span class="sd">              1        1  POLYGON ((0.1 0, 0.1 -0.05, 0.2 -0.05, 0.2 0, ...</span>
<a id="__codelineno-0-5608" name="__codelineno-0-5608"></a><span class="sd">              2        4  POLYGON ((0.25 0, 0.25 -0.05, 0.3 -0.05, 0.3 0...</span>
<a id="__codelineno-0-5609" name="__codelineno-0-5609"></a><span class="sd">              3        4  POLYGON ((0.35 0, 0.35 -0.05, 0.4 -0.05, 0.4 0...</span>
<a id="__codelineno-0-5610" name="__codelineno-0-5610"></a><span class="sd">              4        2  POLYGON ((0.4 0, 0.4 -0.05, 0.45 -0.05, 0.45 0...</span>
<a id="__codelineno-0-5611" name="__codelineno-0-5611"></a><span class="sd">              5        3  POLYGON ((0.45 0, 0.45 -0.05, 0.5 -0.05, 0.5 0...</span>
<a id="__codelineno-0-5612" name="__codelineno-0-5612"></a><span class="sd">              6        1  POLYGON ((0.3 0, 0.3 -0.1, 0.35 -0.1, 0.35 0, ...</span>
<a id="__codelineno-0-5613" name="__codelineno-0-5613"></a><span class="sd">              7        4  POLYGON ((0.15 -0.05, 0.15 -0.1, 0.2 -0.1, 0.2...</span>
<a id="__codelineno-0-5614" name="__codelineno-0-5614"></a><span class="sd">              8        2  POLYGON ((0.35 -0.05, 0.35 -0.1, 0.4 -0.1, 0.4...</span>
<a id="__codelineno-0-5615" name="__codelineno-0-5615"></a><span class="sd">              9        4  POLYGON ((0 -0.05, 0 -0.15, 0.05 -0.15, 0.05 -...</span>
<a id="__codelineno-0-5616" name="__codelineno-0-5616"></a><span class="sd">              10       4  POLYGON ((0.4 -0.05, 0.4 -0.15, 0.45 -0.15, 0....</span>
<a id="__codelineno-0-5617" name="__codelineno-0-5617"></a><span class="sd">              11       4  POLYGON ((0.1 -0.1, 0.1 -0.15, 0.15 -0.15, 0.1...</span>
<a id="__codelineno-0-5618" name="__codelineno-0-5618"></a>
<a id="__codelineno-0-5619" name="__codelineno-0-5619"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5620" name="__codelineno-0-5620"></a>
<a id="__codelineno-0-5621" name="__codelineno-0-5621"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-5622" name="__codelineno-0-5622"></a>        <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-5623" name="__codelineno-0-5623"></a>            <span class="n">band</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-5624" name="__codelineno-0-5624"></a>
<a id="__codelineno-0-5625" name="__codelineno-0-5625"></a>        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_names</span><span class="p">[</span><span class="n">band</span><span class="p">]</span>
<a id="__codelineno-0-5626" name="__codelineno-0-5626"></a>        <span class="n">gdf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_band_to_polygon</span><span class="p">(</span><span class="n">band</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-5627" name="__codelineno-0-5627"></a>
<a id="__codelineno-0-5628" name="__codelineno-0-5628"></a>        <span class="k">return</span> <span class="n">gdf</span>
<a id="__codelineno-0-5629" name="__codelineno-0-5629"></a>
<a id="__codelineno-0-5630" name="__codelineno-0-5630"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-5631" name="__codelineno-0-5631"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">overview_count</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-5632" name="__codelineno-0-5632"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Number of the overviews for each band.&quot;&quot;&quot;</span>
<a id="__codelineno-0-5633" name="__codelineno-0-5633"></a>        <span class="n">overview_number</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-5634" name="__codelineno-0-5634"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-5635" name="__codelineno-0-5635"></a>            <span class="n">overview_number</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">GetOverviewCount</span><span class="p">())</span>
<a id="__codelineno-0-5636" name="__codelineno-0-5636"></a>
<a id="__codelineno-0-5637" name="__codelineno-0-5637"></a>        <span class="k">return</span> <span class="n">overview_number</span>
<a id="__codelineno-0-5638" name="__codelineno-0-5638"></a>
<a id="__codelineno-0-5639" name="__codelineno-0-5639"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_overviews</span><span class="p">(</span>
<a id="__codelineno-0-5640" name="__codelineno-0-5640"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">resampling_method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;nearest&quot;</span><span class="p">,</span> <span class="n">overview_levels</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-5641" name="__codelineno-0-5641"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-5642" name="__codelineno-0-5642"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create overviews for the dataset.</span>
<a id="__codelineno-0-5643" name="__codelineno-0-5643"></a>
<a id="__codelineno-0-5644" name="__codelineno-0-5644"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-5645" name="__codelineno-0-5645"></a><span class="sd">            resampling_method (str):</span>
<a id="__codelineno-0-5646" name="__codelineno-0-5646"></a><span class="sd">                The resampling method used to create the overviews. Possible values are</span>
<a id="__codelineno-0-5647" name="__codelineno-0-5647"></a><span class="sd">                &quot;NEAREST&quot;, &quot;CUBIC&quot;, &quot;AVERAGE&quot;, &quot;GAUSS&quot;, &quot;CUBICSPLINE&quot;, &quot;LANCZOS&quot;, &quot;MODE&quot;,</span>
<a id="__codelineno-0-5648" name="__codelineno-0-5648"></a><span class="sd">                &quot;AVERAGE_MAGPHASE&quot;, &quot;RMS&quot;, &quot;BILINEAR&quot;. Defaults to &quot;nearest&quot;.</span>
<a id="__codelineno-0-5649" name="__codelineno-0-5649"></a><span class="sd">            overview_levels (list, optional):</span>
<a id="__codelineno-0-5650" name="__codelineno-0-5650"></a><span class="sd">                The overview levels. Restricted to typical power-of-two reduction factors. Defaults to [2, 4, 8, 16,</span>
<a id="__codelineno-0-5651" name="__codelineno-0-5651"></a><span class="sd">                32].</span>
<a id="__codelineno-0-5652" name="__codelineno-0-5652"></a>
<a id="__codelineno-0-5653" name="__codelineno-0-5653"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-5654" name="__codelineno-0-5654"></a><span class="sd">            None:</span>
<a id="__codelineno-0-5655" name="__codelineno-0-5655"></a><span class="sd">                Creates internal or external overviews depending on the dataset access mode. See Notes.</span>
<a id="__codelineno-0-5656" name="__codelineno-0-5656"></a>
<a id="__codelineno-0-5657" name="__codelineno-0-5657"></a><span class="sd">        Notes:</span>
<a id="__codelineno-0-5658" name="__codelineno-0-5658"></a><span class="sd">            - External (.ovr file): If the dataset is read with `read_only=True` then the overviews file will be created</span>
<a id="__codelineno-0-5659" name="__codelineno-0-5659"></a><span class="sd">              as an external .ovr file in the same directory of the dataset.</span>
<a id="__codelineno-0-5660" name="__codelineno-0-5660"></a><span class="sd">            - Internal: If the dataset is read with `read_only=False` then the overviews will be created internally in</span>
<a id="__codelineno-0-5661" name="__codelineno-0-5661"></a><span class="sd">              the dataset, and the dataset needs to be saved/flushed to persist the changes to disk.</span>
<a id="__codelineno-0-5662" name="__codelineno-0-5662"></a><span class="sd">            - You can check the count per band via the `overview_count` property.</span>
<a id="__codelineno-0-5663" name="__codelineno-0-5663"></a>
<a id="__codelineno-0-5664" name="__codelineno-0-5664"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-5665" name="__codelineno-0-5665"></a><span class="sd">            - Create a Dataset with 4 bands, 10 rows, 10 columns, at the point lon/lat (0, 0):</span>
<a id="__codelineno-0-5666" name="__codelineno-0-5666"></a>
<a id="__codelineno-0-5667" name="__codelineno-0-5667"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5668" name="__codelineno-0-5668"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-5669" name="__codelineno-0-5669"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.rand(4, 10, 10)</span>
<a id="__codelineno-0-5670" name="__codelineno-0-5670"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-5671" name="__codelineno-0-5671"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-5672" name="__codelineno-0-5672"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-5673" name="__codelineno-0-5673"></a>
<a id="__codelineno-0-5674" name="__codelineno-0-5674"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5675" name="__codelineno-0-5675"></a><span class="sd">            - Now, create overviews using the default parameters:</span>
<a id="__codelineno-0-5676" name="__codelineno-0-5676"></a>
<a id="__codelineno-0-5677" name="__codelineno-0-5677"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5678" name="__codelineno-0-5678"></a><span class="sd">              &gt;&gt;&gt; dataset.create_overviews()</span>
<a id="__codelineno-0-5679" name="__codelineno-0-5679"></a><span class="sd">              &gt;&gt;&gt; print(dataset.overview_count)  # doctest: +SKIP</span>
<a id="__codelineno-0-5680" name="__codelineno-0-5680"></a><span class="sd">              [4, 4, 4, 4]</span>
<a id="__codelineno-0-5681" name="__codelineno-0-5681"></a>
<a id="__codelineno-0-5682" name="__codelineno-0-5682"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5683" name="__codelineno-0-5683"></a><span class="sd">            - For each band, there are 4 overview levels you can use to plot the bands:</span>
<a id="__codelineno-0-5684" name="__codelineno-0-5684"></a>
<a id="__codelineno-0-5685" name="__codelineno-0-5685"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5686" name="__codelineno-0-5686"></a><span class="sd">              &gt;&gt;&gt; dataset.plot(band=0, overview=True, overview_index=0) # doctest: +SKIP</span>
<a id="__codelineno-0-5687" name="__codelineno-0-5687"></a>
<a id="__codelineno-0-5688" name="__codelineno-0-5688"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5689" name="__codelineno-0-5689"></a><span class="sd">              ![overviews-level-0](./../_images/dataset/overviews-level-0.png)</span>
<a id="__codelineno-0-5690" name="__codelineno-0-5690"></a>
<a id="__codelineno-0-5691" name="__codelineno-0-5691"></a><span class="sd">            - However, the dataset originally is 10*10, but the first overview level (2) displays half of the cells by</span>
<a id="__codelineno-0-5692" name="__codelineno-0-5692"></a><span class="sd">              aggregating all the cells using the nearest neighbor. The second level displays only 3 cells in each:</span>
<a id="__codelineno-0-5693" name="__codelineno-0-5693"></a>
<a id="__codelineno-0-5694" name="__codelineno-0-5694"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5695" name="__codelineno-0-5695"></a><span class="sd">              &gt;&gt;&gt; dataset.plot(band=0, overview=True, overview_index=1)   # doctest: +SKIP</span>
<a id="__codelineno-0-5696" name="__codelineno-0-5696"></a>
<a id="__codelineno-0-5697" name="__codelineno-0-5697"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5698" name="__codelineno-0-5698"></a><span class="sd">              ![overviews-level-1](./../_images/dataset/overviews-level-1.png)</span>
<a id="__codelineno-0-5699" name="__codelineno-0-5699"></a>
<a id="__codelineno-0-5700" name="__codelineno-0-5700"></a><span class="sd">            - For the third overview level:</span>
<a id="__codelineno-0-5701" name="__codelineno-0-5701"></a>
<a id="__codelineno-0-5702" name="__codelineno-0-5702"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5703" name="__codelineno-0-5703"></a><span class="sd">              &gt;&gt;&gt; dataset.plot(band=0, overview=True, overview_index=2)       # doctest: +SKIP</span>
<a id="__codelineno-0-5704" name="__codelineno-0-5704"></a>
<a id="__codelineno-0-5705" name="__codelineno-0-5705"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5706" name="__codelineno-0-5706"></a><span class="sd">              ![overviews-level-2](./../_images/dataset/overviews-level-2.png)</span>
<a id="__codelineno-0-5707" name="__codelineno-0-5707"></a>
<a id="__codelineno-0-5708" name="__codelineno-0-5708"></a><span class="sd">        See Also:</span>
<a id="__codelineno-0-5709" name="__codelineno-0-5709"></a><span class="sd">            - Dataset.recreate_overviews: Recreate the dataset overviews if they exist</span>
<a id="__codelineno-0-5710" name="__codelineno-0-5710"></a><span class="sd">            - Dataset.get_overview: Get an overview of a band</span>
<a id="__codelineno-0-5711" name="__codelineno-0-5711"></a><span class="sd">            - Dataset.overview_count: Number of overviews</span>
<a id="__codelineno-0-5712" name="__codelineno-0-5712"></a><span class="sd">            - Dataset.read_overview_array: Read overview values</span>
<a id="__codelineno-0-5713" name="__codelineno-0-5713"></a><span class="sd">            - Dataset.plot: Plot a band</span>
<a id="__codelineno-0-5714" name="__codelineno-0-5714"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-5715" name="__codelineno-0-5715"></a>        <span class="k">if</span> <span class="n">overview_levels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-5716" name="__codelineno-0-5716"></a>            <span class="n">overview_levels</span> <span class="o">=</span> <span class="n">OVERVIEW_LEVELS</span>
<a id="__codelineno-0-5717" name="__codelineno-0-5717"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-5718" name="__codelineno-0-5718"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">overview_levels</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-5719" name="__codelineno-0-5719"></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;overview_levels should be a list&quot;</span><span class="p">)</span>
<a id="__codelineno-0-5720" name="__codelineno-0-5720"></a>
<a id="__codelineno-0-5721" name="__codelineno-0-5721"></a>            <span class="c1"># if self.raster.HasArbitraryOverviews():</span>
<a id="__codelineno-0-5722" name="__codelineno-0-5722"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">elem</span> <span class="ow">in</span> <span class="n">OVERVIEW_LEVELS</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">overview_levels</span><span class="p">):</span>
<a id="__codelineno-0-5723" name="__codelineno-0-5723"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-5724" name="__codelineno-0-5724"></a>                    <span class="s2">&quot;overview_levels are restricted to the typical power-of-two reduction factors &quot;</span>
<a id="__codelineno-0-5725" name="__codelineno-0-5725"></a>                    <span class="s2">&quot;(like 2, 4, 8, 16, etc.)&quot;</span>
<a id="__codelineno-0-5726" name="__codelineno-0-5726"></a>                <span class="p">)</span>
<a id="__codelineno-0-5727" name="__codelineno-0-5727"></a>
<a id="__codelineno-0-5728" name="__codelineno-0-5728"></a>        <span class="k">if</span> <span class="n">resampling_method</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">RESAMPLING_METHODS</span><span class="p">:</span>
<a id="__codelineno-0-5729" name="__codelineno-0-5729"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;resampling_method should be one of </span><span class="si">{</span><span class="n">RESAMPLING_METHODS</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-5730" name="__codelineno-0-5730"></a>        <span class="c1"># Define the overview levels (the reduction factor).</span>
<a id="__codelineno-0-5731" name="__codelineno-0-5731"></a>        <span class="c1"># e.g., 2 means the overview will be half the resolution of the original dataset.</span>
<a id="__codelineno-0-5732" name="__codelineno-0-5732"></a>
<a id="__codelineno-0-5733" name="__codelineno-0-5733"></a>        <span class="c1"># Build overviews using nearest neighbor resampling</span>
<a id="__codelineno-0-5734" name="__codelineno-0-5734"></a>        <span class="c1"># NEAREST is the resampling method used. Other methods include AVERAGE, GAUSS, etc.</span>
<a id="__codelineno-0-5735" name="__codelineno-0-5735"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">BuildOverviews</span><span class="p">(</span><span class="n">resampling_method</span><span class="p">,</span> <span class="n">overview_levels</span><span class="p">)</span>
<a id="__codelineno-0-5736" name="__codelineno-0-5736"></a>
<a id="__codelineno-0-5737" name="__codelineno-0-5737"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">recreate_overviews</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resampling_method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;nearest&quot;</span><span class="p">):</span>
<a id="__codelineno-0-5738" name="__codelineno-0-5738"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Recreate overviews for the dataset.</span>
<a id="__codelineno-0-5739" name="__codelineno-0-5739"></a>
<a id="__codelineno-0-5740" name="__codelineno-0-5740"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-5741" name="__codelineno-0-5741"></a><span class="sd">            resampling_method (str): Resampling method used to recreate overviews. Possible values are</span>
<a id="__codelineno-0-5742" name="__codelineno-0-5742"></a><span class="sd">                &quot;NEAREST&quot;, &quot;CUBIC&quot;, &quot;AVERAGE&quot;, &quot;GAUSS&quot;, &quot;CUBICSPLINE&quot;, &quot;LANCZOS&quot;, &quot;MODE&quot;,</span>
<a id="__codelineno-0-5743" name="__codelineno-0-5743"></a><span class="sd">                &quot;AVERAGE_MAGPHASE&quot;, &quot;RMS&quot;, &quot;BILINEAR&quot;. Defaults to &quot;nearest&quot;.</span>
<a id="__codelineno-0-5744" name="__codelineno-0-5744"></a>
<a id="__codelineno-0-5745" name="__codelineno-0-5745"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-5746" name="__codelineno-0-5746"></a><span class="sd">            ValueError:</span>
<a id="__codelineno-0-5747" name="__codelineno-0-5747"></a><span class="sd">                If resampling_method is not one of the allowed values above.</span>
<a id="__codelineno-0-5748" name="__codelineno-0-5748"></a><span class="sd">            ReadOnlyError:</span>
<a id="__codelineno-0-5749" name="__codelineno-0-5749"></a><span class="sd">                If overviews are internal and the dataset is opened read-only. Read with read_only=False.</span>
<a id="__codelineno-0-5750" name="__codelineno-0-5750"></a>
<a id="__codelineno-0-5751" name="__codelineno-0-5751"></a><span class="sd">        See Also:</span>
<a id="__codelineno-0-5752" name="__codelineno-0-5752"></a><span class="sd">            - Dataset.create_overviews: Recreate the dataset overviews if they exist.</span>
<a id="__codelineno-0-5753" name="__codelineno-0-5753"></a><span class="sd">            - Dataset.get_overview: Get an overview of a band.</span>
<a id="__codelineno-0-5754" name="__codelineno-0-5754"></a><span class="sd">            - Dataset.overview_count: Number of overviews.</span>
<a id="__codelineno-0-5755" name="__codelineno-0-5755"></a><span class="sd">            - Dataset.read_overview_array: Read overview values.</span>
<a id="__codelineno-0-5756" name="__codelineno-0-5756"></a><span class="sd">            - Dataset.plot: Plot a band.</span>
<a id="__codelineno-0-5757" name="__codelineno-0-5757"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-5758" name="__codelineno-0-5758"></a>        <span class="k">if</span> <span class="n">resampling_method</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">RESAMPLING_METHODS</span><span class="p">:</span>
<a id="__codelineno-0-5759" name="__codelineno-0-5759"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;resampling_method should be one of </span><span class="si">{</span><span class="n">RESAMPLING_METHODS</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-5760" name="__codelineno-0-5760"></a>        <span class="c1"># Build overviews using nearest neighbor resampling</span>
<a id="__codelineno-0-5761" name="__codelineno-0-5761"></a>        <span class="c1"># nearest is the resampling method used. Other methods include AVERAGE, GAUSS, etc.</span>
<a id="__codelineno-0-5762" name="__codelineno-0-5762"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-5763" name="__codelineno-0-5763"></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-5764" name="__codelineno-0-5764"></a>                <span class="n">band</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-0-5765" name="__codelineno-0-5765"></a>                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">overview_count</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
<a id="__codelineno-0-5766" name="__codelineno-0-5766"></a>                    <span class="n">ovr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_overview</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
<a id="__codelineno-0-5767" name="__codelineno-0-5767"></a>                    <span class="c1"># TODO: if this method takes a long time, we can use the gdal.RegenerateOverviews() method</span>
<a id="__codelineno-0-5768" name="__codelineno-0-5768"></a>                    <span class="c1">#  which is faster but it does not give the option to choose the resampling method. and the</span>
<a id="__codelineno-0-5769" name="__codelineno-0-5769"></a>                    <span class="c1">#  overviews has to be given to the function as a list.</span>
<a id="__codelineno-0-5770" name="__codelineno-0-5770"></a>                    <span class="c1">#  overviews = [band.GetOverview(i) for i in range(band.GetOverviewCount())]</span>
<a id="__codelineno-0-5771" name="__codelineno-0-5771"></a>                    <span class="c1">#  band.RegenerateOverviews(overviews) or gdal.RegenerateOverviews(overviews)</span>
<a id="__codelineno-0-5772" name="__codelineno-0-5772"></a>                    <span class="n">gdal</span><span class="o">.</span><span class="n">RegenerateOverview</span><span class="p">(</span><span class="n">band</span><span class="p">,</span> <span class="n">ovr</span><span class="p">,</span> <span class="n">resampling_method</span><span class="p">)</span>
<a id="__codelineno-0-5773" name="__codelineno-0-5773"></a>        <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
<a id="__codelineno-0-5774" name="__codelineno-0-5774"></a>            <span class="k">raise</span> <span class="n">ReadOnlyError</span><span class="p">(</span>
<a id="__codelineno-0-5775" name="__codelineno-0-5775"></a>                <span class="s2">&quot;The Dataset is opened with a read only. Please read the dataset using read_only=False&quot;</span>
<a id="__codelineno-0-5776" name="__codelineno-0-5776"></a>            <span class="p">)</span>
<a id="__codelineno-0-5777" name="__codelineno-0-5777"></a>
<a id="__codelineno-0-5778" name="__codelineno-0-5778"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_overview</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">overview_index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Band</span><span class="p">:</span>
<a id="__codelineno-0-5779" name="__codelineno-0-5779"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get an overview of a band.</span>
<a id="__codelineno-0-5780" name="__codelineno-0-5780"></a>
<a id="__codelineno-0-5781" name="__codelineno-0-5781"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-5782" name="__codelineno-0-5782"></a><span class="sd">            band (int):</span>
<a id="__codelineno-0-5783" name="__codelineno-0-5783"></a><span class="sd">                The band index. Defaults to 0.</span>
<a id="__codelineno-0-5784" name="__codelineno-0-5784"></a><span class="sd">            overview_index (int):</span>
<a id="__codelineno-0-5785" name="__codelineno-0-5785"></a><span class="sd">                Index of the overview. Defaults to 0.</span>
<a id="__codelineno-0-5786" name="__codelineno-0-5786"></a>
<a id="__codelineno-0-5787" name="__codelineno-0-5787"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-5788" name="__codelineno-0-5788"></a><span class="sd">            gdal.Band:</span>
<a id="__codelineno-0-5789" name="__codelineno-0-5789"></a><span class="sd">                GDAL band object.</span>
<a id="__codelineno-0-5790" name="__codelineno-0-5790"></a>
<a id="__codelineno-0-5791" name="__codelineno-0-5791"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-5792" name="__codelineno-0-5792"></a><span class="sd">            - Create `Dataset` consisting of 4 bands, 10 rows, 10 columns, at lon/lat (0, 0):</span>
<a id="__codelineno-0-5793" name="__codelineno-0-5793"></a>
<a id="__codelineno-0-5794" name="__codelineno-0-5794"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5795" name="__codelineno-0-5795"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-5796" name="__codelineno-0-5796"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1, 10, size=(4, 10, 10))</span>
<a id="__codelineno-0-5797" name="__codelineno-0-5797"></a><span class="sd">              &gt;&gt;&gt; print(arr[0, :, :]) # doctest: +SKIP</span>
<a id="__codelineno-0-5798" name="__codelineno-0-5798"></a><span class="sd">              array([[6, 3, 3, 7, 4, 8, 4, 3, 8, 7],</span>
<a id="__codelineno-0-5799" name="__codelineno-0-5799"></a><span class="sd">                     [6, 7, 3, 7, 8, 6, 3, 4, 3, 8],</span>
<a id="__codelineno-0-5800" name="__codelineno-0-5800"></a><span class="sd">                     [5, 8, 9, 6, 7, 7, 5, 4, 6, 4],</span>
<a id="__codelineno-0-5801" name="__codelineno-0-5801"></a><span class="sd">                     [2, 9, 9, 5, 8, 4, 9, 6, 8, 7],</span>
<a id="__codelineno-0-5802" name="__codelineno-0-5802"></a><span class="sd">                     [5, 8, 3, 9, 1, 5, 7, 9, 5, 9],</span>
<a id="__codelineno-0-5803" name="__codelineno-0-5803"></a><span class="sd">                     [8, 3, 7, 2, 2, 5, 2, 8, 7, 7],</span>
<a id="__codelineno-0-5804" name="__codelineno-0-5804"></a><span class="sd">                     [1, 1, 4, 2, 2, 2, 6, 5, 9, 2],</span>
<a id="__codelineno-0-5805" name="__codelineno-0-5805"></a><span class="sd">                     [6, 3, 2, 9, 8, 8, 1, 9, 7, 7],</span>
<a id="__codelineno-0-5806" name="__codelineno-0-5806"></a><span class="sd">                     [4, 1, 3, 1, 6, 7, 5, 4, 8, 7],</span>
<a id="__codelineno-0-5807" name="__codelineno-0-5807"></a><span class="sd">                     [9, 7, 2, 1, 4, 6, 1, 2, 3, 3]], dtype=int32)</span>
<a id="__codelineno-0-5808" name="__codelineno-0-5808"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-5809" name="__codelineno-0-5809"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-5810" name="__codelineno-0-5810"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-5811" name="__codelineno-0-5811"></a>
<a id="__codelineno-0-5812" name="__codelineno-0-5812"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5813" name="__codelineno-0-5813"></a>
<a id="__codelineno-0-5814" name="__codelineno-0-5814"></a><span class="sd">            - Now, create overviews using the default parameters and inspect them:</span>
<a id="__codelineno-0-5815" name="__codelineno-0-5815"></a>
<a id="__codelineno-0-5816" name="__codelineno-0-5816"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5817" name="__codelineno-0-5817"></a><span class="sd">              &gt;&gt;&gt; dataset.create_overviews()</span>
<a id="__codelineno-0-5818" name="__codelineno-0-5818"></a><span class="sd">              &gt;&gt;&gt; print(dataset.overview_count)  # doctest: +SKIP</span>
<a id="__codelineno-0-5819" name="__codelineno-0-5819"></a><span class="sd">              [4, 4, 4, 4]</span>
<a id="__codelineno-0-5820" name="__codelineno-0-5820"></a>
<a id="__codelineno-0-5821" name="__codelineno-0-5821"></a><span class="sd">              &gt;&gt;&gt; ovr = dataset.get_overview(band=0, overview_index=0)</span>
<a id="__codelineno-0-5822" name="__codelineno-0-5822"></a><span class="sd">              &gt;&gt;&gt; print(ovr)  # doctest: +SKIP</span>
<a id="__codelineno-0-5823" name="__codelineno-0-5823"></a><span class="sd">              &lt;osgeo.gdal.Band; proxy of &lt;Swig Object of type &#39;GDALRasterBandShadow *&#39; at 0x0000017E2B5AF1B0&gt; &gt;</span>
<a id="__codelineno-0-5824" name="__codelineno-0-5824"></a><span class="sd">              &gt;&gt;&gt; ovr.ReadAsArray()  # doctest: +SKIP</span>
<a id="__codelineno-0-5825" name="__codelineno-0-5825"></a><span class="sd">              array([[6, 3, 4, 4, 8],</span>
<a id="__codelineno-0-5826" name="__codelineno-0-5826"></a><span class="sd">                     [5, 9, 7, 5, 6],</span>
<a id="__codelineno-0-5827" name="__codelineno-0-5827"></a><span class="sd">                     [5, 3, 1, 7, 5],</span>
<a id="__codelineno-0-5828" name="__codelineno-0-5828"></a><span class="sd">                     [1, 4, 2, 6, 9],</span>
<a id="__codelineno-0-5829" name="__codelineno-0-5829"></a><span class="sd">                     [4, 3, 6, 5, 8]], dtype=int32)</span>
<a id="__codelineno-0-5830" name="__codelineno-0-5830"></a><span class="sd">              &gt;&gt;&gt; ovr = dataset.get_overview(band=0, overview_index=1)</span>
<a id="__codelineno-0-5831" name="__codelineno-0-5831"></a><span class="sd">              &gt;&gt;&gt; ovr.ReadAsArray()  # doctest: +SKIP</span>
<a id="__codelineno-0-5832" name="__codelineno-0-5832"></a><span class="sd">              array([[6, 7, 3],</span>
<a id="__codelineno-0-5833" name="__codelineno-0-5833"></a><span class="sd">                     [2, 5, 6],</span>
<a id="__codelineno-0-5834" name="__codelineno-0-5834"></a><span class="sd">                     [6, 9, 9]], dtype=int32)</span>
<a id="__codelineno-0-5835" name="__codelineno-0-5835"></a><span class="sd">              &gt;&gt;&gt; ovr = dataset.get_overview(band=0, overview_index=2)</span>
<a id="__codelineno-0-5836" name="__codelineno-0-5836"></a><span class="sd">              &gt;&gt;&gt; ovr.ReadAsArray()  # doctest: +SKIP</span>
<a id="__codelineno-0-5837" name="__codelineno-0-5837"></a><span class="sd">              array([[6, 8],</span>
<a id="__codelineno-0-5838" name="__codelineno-0-5838"></a><span class="sd">                     [8, 5]], dtype=int32)</span>
<a id="__codelineno-0-5839" name="__codelineno-0-5839"></a><span class="sd">              &gt;&gt;&gt; ovr = dataset.get_overview(band=0, overview_index=3)</span>
<a id="__codelineno-0-5840" name="__codelineno-0-5840"></a><span class="sd">              &gt;&gt;&gt; ovr.ReadAsArray()  # doctest: +SKIP</span>
<a id="__codelineno-0-5841" name="__codelineno-0-5841"></a><span class="sd">              array([[6]], dtype=int32)</span>
<a id="__codelineno-0-5842" name="__codelineno-0-5842"></a>
<a id="__codelineno-0-5843" name="__codelineno-0-5843"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5844" name="__codelineno-0-5844"></a>
<a id="__codelineno-0-5845" name="__codelineno-0-5845"></a><span class="sd">        See Also:</span>
<a id="__codelineno-0-5846" name="__codelineno-0-5846"></a><span class="sd">            - Dataset.create_overviews: Create the dataset overviews if they exist.</span>
<a id="__codelineno-0-5847" name="__codelineno-0-5847"></a><span class="sd">            - Dataset.create_overviews: Recreate the dataset overviews if they exist.</span>
<a id="__codelineno-0-5848" name="__codelineno-0-5848"></a><span class="sd">            - Dataset.overview_count: Number of overviews.</span>
<a id="__codelineno-0-5849" name="__codelineno-0-5849"></a><span class="sd">            - Dataset.read_overview_array: Read overview values.</span>
<a id="__codelineno-0-5850" name="__codelineno-0-5850"></a><span class="sd">            - Dataset.plot: Plot a band.</span>
<a id="__codelineno-0-5851" name="__codelineno-0-5851"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-5852" name="__codelineno-0-5852"></a>        <span class="n">band</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-5853" name="__codelineno-0-5853"></a>        <span class="n">n_views</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">GetOverviewCount</span><span class="p">()</span>
<a id="__codelineno-0-5854" name="__codelineno-0-5854"></a>        <span class="k">if</span> <span class="n">n_views</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5855" name="__codelineno-0-5855"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-5856" name="__codelineno-0-5856"></a>                <span class="s2">&quot;The band has no overviews, please use the `create_overviews` method to build the overviews&quot;</span>
<a id="__codelineno-0-5857" name="__codelineno-0-5857"></a>            <span class="p">)</span>
<a id="__codelineno-0-5858" name="__codelineno-0-5858"></a>
<a id="__codelineno-0-5859" name="__codelineno-0-5859"></a>        <span class="k">if</span> <span class="n">overview_index</span> <span class="o">&gt;=</span> <span class="n">n_views</span><span class="p">:</span>
<a id="__codelineno-0-5860" name="__codelineno-0-5860"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;overview_level should be less than </span><span class="si">{</span><span class="n">n_views</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-5861" name="__codelineno-0-5861"></a>
<a id="__codelineno-0-5862" name="__codelineno-0-5862"></a>        <span class="c1"># TODO:find away to create a Dataset object from the overview band and to return the Dataset object instead</span>
<a id="__codelineno-0-5863" name="__codelineno-0-5863"></a>        <span class="c1">#  of the gdal band.</span>
<a id="__codelineno-0-5864" name="__codelineno-0-5864"></a>        <span class="k">return</span> <span class="n">band</span><span class="o">.</span><span class="n">GetOverview</span><span class="p">(</span><span class="n">overview_index</span><span class="p">)</span>
<a id="__codelineno-0-5865" name="__codelineno-0-5865"></a>
<a id="__codelineno-0-5866" name="__codelineno-0-5866"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">read_overview_array</span><span class="p">(</span>
<a id="__codelineno-0-5867" name="__codelineno-0-5867"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">overview_index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-5868" name="__codelineno-0-5868"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-5869" name="__codelineno-0-5869"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Read overview values.</span>
<a id="__codelineno-0-5870" name="__codelineno-0-5870"></a>
<a id="__codelineno-0-5871" name="__codelineno-0-5871"></a><span class="sd">            - Read the values stored in a given band or overview.</span>
<a id="__codelineno-0-5872" name="__codelineno-0-5872"></a>
<a id="__codelineno-0-5873" name="__codelineno-0-5873"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-5874" name="__codelineno-0-5874"></a><span class="sd">            band (int | None):</span>
<a id="__codelineno-0-5875" name="__codelineno-0-5875"></a><span class="sd">                The band to read. If None and multiple bands exist, reads all bands at the given overview.</span>
<a id="__codelineno-0-5876" name="__codelineno-0-5876"></a><span class="sd">            overview_index (int):</span>
<a id="__codelineno-0-5877" name="__codelineno-0-5877"></a><span class="sd">                Index of the overview. Defaults to 0.</span>
<a id="__codelineno-0-5878" name="__codelineno-0-5878"></a>
<a id="__codelineno-0-5879" name="__codelineno-0-5879"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-5880" name="__codelineno-0-5880"></a><span class="sd">            np.ndarray:</span>
<a id="__codelineno-0-5881" name="__codelineno-0-5881"></a><span class="sd">                Array with the values in the raster.</span>
<a id="__codelineno-0-5882" name="__codelineno-0-5882"></a>
<a id="__codelineno-0-5883" name="__codelineno-0-5883"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-5884" name="__codelineno-0-5884"></a><span class="sd">            - Create `Dataset` consisting of 4 bands, 10 rows, 10 columns, at lon/lat (0, 0):</span>
<a id="__codelineno-0-5885" name="__codelineno-0-5885"></a>
<a id="__codelineno-0-5886" name="__codelineno-0-5886"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5887" name="__codelineno-0-5887"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-5888" name="__codelineno-0-5888"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1, 10, size=(4, 10, 10))</span>
<a id="__codelineno-0-5889" name="__codelineno-0-5889"></a><span class="sd">              &gt;&gt;&gt; print(arr[0, :, :])     # doctest: +SKIP</span>
<a id="__codelineno-0-5890" name="__codelineno-0-5890"></a><span class="sd">              array([[6, 3, 3, 7, 4, 8, 4, 3, 8, 7],</span>
<a id="__codelineno-0-5891" name="__codelineno-0-5891"></a><span class="sd">                     [6, 7, 3, 7, 8, 6, 3, 4, 3, 8],</span>
<a id="__codelineno-0-5892" name="__codelineno-0-5892"></a><span class="sd">                     [5, 8, 9, 6, 7, 7, 5, 4, 6, 4],</span>
<a id="__codelineno-0-5893" name="__codelineno-0-5893"></a><span class="sd">                     [2, 9, 9, 5, 8, 4, 9, 6, 8, 7],</span>
<a id="__codelineno-0-5894" name="__codelineno-0-5894"></a><span class="sd">                     [5, 8, 3, 9, 1, 5, 7, 9, 5, 9],</span>
<a id="__codelineno-0-5895" name="__codelineno-0-5895"></a><span class="sd">                     [8, 3, 7, 2, 2, 5, 2, 8, 7, 7],</span>
<a id="__codelineno-0-5896" name="__codelineno-0-5896"></a><span class="sd">                     [1, 1, 4, 2, 2, 2, 6, 5, 9, 2],</span>
<a id="__codelineno-0-5897" name="__codelineno-0-5897"></a><span class="sd">                     [6, 3, 2, 9, 8, 8, 1, 9, 7, 7],</span>
<a id="__codelineno-0-5898" name="__codelineno-0-5898"></a><span class="sd">                     [4, 1, 3, 1, 6, 7, 5, 4, 8, 7],</span>
<a id="__codelineno-0-5899" name="__codelineno-0-5899"></a><span class="sd">                     [9, 7, 2, 1, 4, 6, 1, 2, 3, 3]], dtype=int32)</span>
<a id="__codelineno-0-5900" name="__codelineno-0-5900"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-5901" name="__codelineno-0-5901"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-5902" name="__codelineno-0-5902"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-5903" name="__codelineno-0-5903"></a>
<a id="__codelineno-0-5904" name="__codelineno-0-5904"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5905" name="__codelineno-0-5905"></a>
<a id="__codelineno-0-5906" name="__codelineno-0-5906"></a><span class="sd">            - Create overviews using the default parameters and read overview arrays:</span>
<a id="__codelineno-0-5907" name="__codelineno-0-5907"></a>
<a id="__codelineno-0-5908" name="__codelineno-0-5908"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5909" name="__codelineno-0-5909"></a><span class="sd">              &gt;&gt;&gt; dataset.create_overviews()</span>
<a id="__codelineno-0-5910" name="__codelineno-0-5910"></a><span class="sd">              &gt;&gt;&gt; print(dataset.overview_count)  # doctest: +SKIP</span>
<a id="__codelineno-0-5911" name="__codelineno-0-5911"></a><span class="sd">              [4, 4, 4, 4]</span>
<a id="__codelineno-0-5912" name="__codelineno-0-5912"></a>
<a id="__codelineno-0-5913" name="__codelineno-0-5913"></a><span class="sd">              &gt;&gt;&gt; arr = dataset.read_overview_array(band=0, overview_index=0)</span>
<a id="__codelineno-0-5914" name="__codelineno-0-5914"></a><span class="sd">              &gt;&gt;&gt; print(arr)  # doctest: +SKIP</span>
<a id="__codelineno-0-5915" name="__codelineno-0-5915"></a><span class="sd">              array([[6, 3, 4, 4, 8],</span>
<a id="__codelineno-0-5916" name="__codelineno-0-5916"></a><span class="sd">                     [5, 9, 7, 5, 6],</span>
<a id="__codelineno-0-5917" name="__codelineno-0-5917"></a><span class="sd">                     [5, 3, 1, 7, 5],</span>
<a id="__codelineno-0-5918" name="__codelineno-0-5918"></a><span class="sd">                     [1, 4, 2, 6, 9],</span>
<a id="__codelineno-0-5919" name="__codelineno-0-5919"></a><span class="sd">                     [4, 3, 6, 5, 8]], dtype=int32)</span>
<a id="__codelineno-0-5920" name="__codelineno-0-5920"></a><span class="sd">              &gt;&gt;&gt; arr = dataset.read_overview_array(band=0, overview_index=1)</span>
<a id="__codelineno-0-5921" name="__codelineno-0-5921"></a><span class="sd">              &gt;&gt;&gt; print(arr)  # doctest: +SKIP</span>
<a id="__codelineno-0-5922" name="__codelineno-0-5922"></a><span class="sd">              array([[6, 7, 3],</span>
<a id="__codelineno-0-5923" name="__codelineno-0-5923"></a><span class="sd">                     [2, 5, 6],</span>
<a id="__codelineno-0-5924" name="__codelineno-0-5924"></a><span class="sd">                     [6, 9, 9]], dtype=int32)</span>
<a id="__codelineno-0-5925" name="__codelineno-0-5925"></a><span class="sd">              &gt;&gt;&gt; arr = dataset.read_overview_array(band=0, overview_index=2)</span>
<a id="__codelineno-0-5926" name="__codelineno-0-5926"></a><span class="sd">              &gt;&gt;&gt; print(arr)  # doctest: +SKIP</span>
<a id="__codelineno-0-5927" name="__codelineno-0-5927"></a><span class="sd">              array([[6, 8],</span>
<a id="__codelineno-0-5928" name="__codelineno-0-5928"></a><span class="sd">                     [8, 5]], dtype=int32)</span>
<a id="__codelineno-0-5929" name="__codelineno-0-5929"></a><span class="sd">              &gt;&gt;&gt; arr = dataset.read_overview_array(band=0, overview_index=3)</span>
<a id="__codelineno-0-5930" name="__codelineno-0-5930"></a><span class="sd">              &gt;&gt;&gt; print(arr)  # doctest: +SKIP</span>
<a id="__codelineno-0-5931" name="__codelineno-0-5931"></a><span class="sd">              array([[6]], dtype=int32)</span>
<a id="__codelineno-0-5932" name="__codelineno-0-5932"></a>
<a id="__codelineno-0-5933" name="__codelineno-0-5933"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5934" name="__codelineno-0-5934"></a>
<a id="__codelineno-0-5935" name="__codelineno-0-5935"></a><span class="sd">        See Also:</span>
<a id="__codelineno-0-5936" name="__codelineno-0-5936"></a><span class="sd">            - Dataset.create_overviews: Create the dataset overviews.</span>
<a id="__codelineno-0-5937" name="__codelineno-0-5937"></a><span class="sd">            - Dataset.create_overviews: Recreate the dataset overviews if they exist.</span>
<a id="__codelineno-0-5938" name="__codelineno-0-5938"></a><span class="sd">            - Dataset.get_overview: Get an overview of a band.</span>
<a id="__codelineno-0-5939" name="__codelineno-0-5939"></a><span class="sd">            - Dataset.overview_count: Number of overviews.</span>
<a id="__codelineno-0-5940" name="__codelineno-0-5940"></a><span class="sd">            - Dataset.plot: Plot a band.</span>
<a id="__codelineno-0-5941" name="__codelineno-0-5941"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-5942" name="__codelineno-0-5942"></a>        <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-5943" name="__codelineno-0-5943"></a>            <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">elem</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">overview_count</span><span class="p">):</span>
<a id="__codelineno-0-5944" name="__codelineno-0-5944"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-5945" name="__codelineno-0-5945"></a>                    <span class="s2">&quot;Some bands do not have overviews, please create overviews first&quot;</span>
<a id="__codelineno-0-5946" name="__codelineno-0-5946"></a>                <span class="p">)</span>
<a id="__codelineno-0-5947" name="__codelineno-0-5947"></a>            <span class="c1"># read the array from the first overview to get the size of the array.</span>
<a id="__codelineno-0-5948" name="__codelineno-0-5948"></a>            <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_overview</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
<a id="__codelineno-0-5949" name="__codelineno-0-5949"></a>            <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span>
<a id="__codelineno-0-5950" name="__codelineno-0-5950"></a>                <span class="p">(</span>
<a id="__codelineno-0-5951" name="__codelineno-0-5951"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">,</span>
<a id="__codelineno-0-5952" name="__codelineno-0-5952"></a>                    <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-0-5953" name="__codelineno-0-5953"></a>                    <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<a id="__codelineno-0-5954" name="__codelineno-0-5954"></a>                <span class="p">),</span>
<a id="__codelineno-0-5955" name="__codelineno-0-5955"></a>                <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">numpy_dtype</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-0-5956" name="__codelineno-0-5956"></a>            <span class="p">)</span>
<a id="__codelineno-0-5957" name="__codelineno-0-5957"></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-5958" name="__codelineno-0-5958"></a>                <span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_overview</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">overview_index</span><span class="p">)</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
<a id="__codelineno-0-5959" name="__codelineno-0-5959"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-5960" name="__codelineno-0-5960"></a>            <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-5961" name="__codelineno-0-5961"></a>                <span class="n">band</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-5962" name="__codelineno-0-5962"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-5963" name="__codelineno-0-5963"></a>                <span class="k">if</span> <span class="n">band</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-5964" name="__codelineno-0-5964"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-5965" name="__codelineno-0-5965"></a>                        <span class="sa">f</span><span class="s2">&quot;band index should be between 0 and </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-5966" name="__codelineno-0-5966"></a>                    <span class="p">)</span>
<a id="__codelineno-0-5967" name="__codelineno-0-5967"></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">overview_count</span><span class="p">[</span><span class="n">band</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5968" name="__codelineno-0-5968"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-5969" name="__codelineno-0-5969"></a>                        <span class="sa">f</span><span class="s2">&quot;band </span><span class="si">{</span><span class="n">band</span><span class="si">}</span><span class="s2"> has no overviews, please create overviews first&quot;</span>
<a id="__codelineno-0-5970" name="__codelineno-0-5970"></a>                    <span class="p">)</span>
<a id="__codelineno-0-5971" name="__codelineno-0-5971"></a>            <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_overview</span><span class="p">(</span><span class="n">band</span><span class="p">,</span> <span class="n">overview_index</span><span class="p">)</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
<a id="__codelineno-0-5972" name="__codelineno-0-5972"></a>
<a id="__codelineno-0-5973" name="__codelineno-0-5973"></a>        <span class="k">return</span> <span class="n">arr</span>
<a id="__codelineno-0-5974" name="__codelineno-0-5974"></a>
<a id="__codelineno-0-5975" name="__codelineno-0-5975"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-5976" name="__codelineno-0-5976"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">band_color</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-0-5977" name="__codelineno-0-5977"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Band colors.&quot;&quot;&quot;</span>
<a id="__codelineno-0-5978" name="__codelineno-0-5978"></a>        <span class="n">color_dict</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-5979" name="__codelineno-0-5979"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-5980" name="__codelineno-0-5980"></a>            <span class="n">band_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">GetColorInterpretation</span><span class="p">()</span>
<a id="__codelineno-0-5981" name="__codelineno-0-5981"></a>            <span class="n">band_color</span> <span class="o">=</span> <span class="n">band_color</span> <span class="k">if</span> <span class="n">band_color</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span>
<a id="__codelineno-0-5982" name="__codelineno-0-5982"></a>            <span class="n">color_dict</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdal_constant_to_color_name</span><span class="p">(</span><span class="n">band_color</span><span class="p">)</span>
<a id="__codelineno-0-5983" name="__codelineno-0-5983"></a>        <span class="k">return</span> <span class="n">color_dict</span>
<a id="__codelineno-0-5984" name="__codelineno-0-5984"></a>
<a id="__codelineno-0-5985" name="__codelineno-0-5985"></a>    <span class="nd">@band_color</span><span class="o">.</span><span class="n">setter</span>
<a id="__codelineno-0-5986" name="__codelineno-0-5986"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">band_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
<a id="__codelineno-0-5987" name="__codelineno-0-5987"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Assign color interpretation to dataset bands.</span>
<a id="__codelineno-0-5988" name="__codelineno-0-5988"></a>
<a id="__codelineno-0-5989" name="__codelineno-0-5989"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-5990" name="__codelineno-0-5990"></a><span class="sd">            values (Dict[int, str]):</span>
<a id="__codelineno-0-5991" name="__codelineno-0-5991"></a><span class="sd">                Dictionary with band index as key and color name as value.</span>
<a id="__codelineno-0-5992" name="__codelineno-0-5992"></a><span class="sd">                e.g. {1: &#39;Red&#39;, 2: &#39;Green&#39;, 3: &#39;Blue&#39;}. Possible values are</span>
<a id="__codelineno-0-5993" name="__codelineno-0-5993"></a><span class="sd">                [&#39;undefined&#39;, &#39;gray_index&#39;, &#39;palette_index&#39;, &#39;red&#39;, &#39;green&#39;, &#39;blue&#39;, &#39;alpha&#39;, &#39;hue&#39;, &#39;saturation&#39;,</span>
<a id="__codelineno-0-5994" name="__codelineno-0-5994"></a><span class="sd">                &#39;lightness&#39;, &#39;cyan&#39;, &#39;magenta&#39;, &#39;yellow&#39;, &#39;black&#39;, &#39;YCbCr_YBand&#39;, &#39;YCbCr_CbBand&#39;, &#39;YCbCr_CrBand&#39;]</span>
<a id="__codelineno-0-5995" name="__codelineno-0-5995"></a>
<a id="__codelineno-0-5996" name="__codelineno-0-5996"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-5997" name="__codelineno-0-5997"></a><span class="sd">            - Create `Dataset` consisting of 1 band, 10 rows, 10 columns, at lon/lat (0, 0):</span>
<a id="__codelineno-0-5998" name="__codelineno-0-5998"></a>
<a id="__codelineno-0-5999" name="__codelineno-0-5999"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-6000" name="__codelineno-0-6000"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-6001" name="__codelineno-0-6001"></a><span class="sd">              &gt;&gt;&gt; import pandas as pd</span>
<a id="__codelineno-0-6002" name="__codelineno-0-6002"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1, 3, size=(10, 10))</span>
<a id="__codelineno-0-6003" name="__codelineno-0-6003"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-6004" name="__codelineno-0-6004"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-6005" name="__codelineno-0-6005"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-6006" name="__codelineno-0-6006"></a>
<a id="__codelineno-0-6007" name="__codelineno-0-6007"></a><span class="sd">              ```</span>
<a id="__codelineno-0-6008" name="__codelineno-0-6008"></a>
<a id="__codelineno-0-6009" name="__codelineno-0-6009"></a><span class="sd">            - Assign a color interpretation to the dataset band (i.e., gray, red, green, or blue) using a dictionary</span>
<a id="__codelineno-0-6010" name="__codelineno-0-6010"></a><span class="sd">              with the band index as the key and the color interpretation as the value:</span>
<a id="__codelineno-0-6011" name="__codelineno-0-6011"></a>
<a id="__codelineno-0-6012" name="__codelineno-0-6012"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-6013" name="__codelineno-0-6013"></a><span class="sd">              &gt;&gt;&gt; dataset.band_color = {0: &#39;gray_index&#39;}</span>
<a id="__codelineno-0-6014" name="__codelineno-0-6014"></a>
<a id="__codelineno-0-6015" name="__codelineno-0-6015"></a><span class="sd">              ```</span>
<a id="__codelineno-0-6016" name="__codelineno-0-6016"></a>
<a id="__codelineno-0-6017" name="__codelineno-0-6017"></a><span class="sd">            - Assign RGB color interpretation to dataset bands:</span>
<a id="__codelineno-0-6018" name="__codelineno-0-6018"></a>
<a id="__codelineno-0-6019" name="__codelineno-0-6019"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-6020" name="__codelineno-0-6020"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1, 3, size=(3, 10, 10))</span>
<a id="__codelineno-0-6021" name="__codelineno-0-6021"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-6022" name="__codelineno-0-6022"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-6023" name="__codelineno-0-6023"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-6024" name="__codelineno-0-6024"></a><span class="sd">              &gt;&gt;&gt; dataset.band_color = {0: &#39;red&#39;, 1: &#39;green&#39;, 2: &#39;blue&#39;}</span>
<a id="__codelineno-0-6025" name="__codelineno-0-6025"></a>
<a id="__codelineno-0-6026" name="__codelineno-0-6026"></a><span class="sd">              ```</span>
<a id="__codelineno-0-6027" name="__codelineno-0-6027"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-6028" name="__codelineno-0-6028"></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-6029" name="__codelineno-0-6029"></a>            <span class="k">if</span> <span class="n">key</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">:</span>
<a id="__codelineno-0-6030" name="__codelineno-0-6030"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-6031" name="__codelineno-0-6031"></a>                    <span class="sa">f</span><span class="s2">&quot;band index should be between 0 and </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-6032" name="__codelineno-0-6032"></a>                <span class="p">)</span>
<a id="__codelineno-0-6033" name="__codelineno-0-6033"></a>            <span class="n">gdal_const</span> <span class="o">=</span> <span class="n">color_name_to_gdal_constant</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<a id="__codelineno-0-6034" name="__codelineno-0-6034"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">SetColorInterpretation</span><span class="p">(</span><span class="n">gdal_const</span><span class="p">)</span>
<a id="__codelineno-0-6035" name="__codelineno-0-6035"></a>
<a id="__codelineno-0-6036" name="__codelineno-0-6036"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_band_by_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-6037" name="__codelineno-0-6037"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the band associated with a given color.</span>
<a id="__codelineno-0-6038" name="__codelineno-0-6038"></a>
<a id="__codelineno-0-6039" name="__codelineno-0-6039"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-6040" name="__codelineno-0-6040"></a><span class="sd">            color_name (str):</span>
<a id="__codelineno-0-6041" name="__codelineno-0-6041"></a><span class="sd">                One of [&#39;undefined&#39;, &#39;gray_index&#39;, &#39;palette_index&#39;, &#39;red&#39;, &#39;green&#39;, &#39;blue&#39;, &#39;alpha&#39;, &#39;hue&#39;,</span>
<a id="__codelineno-0-6042" name="__codelineno-0-6042"></a><span class="sd">                &#39;saturation&#39;, &#39;lightness&#39;, &#39;cyan&#39;, &#39;magenta&#39;, &#39;yellow&#39;, &#39;black&#39;, &#39;YCbCr_YBand&#39;, &#39;YCbCr_CbBand&#39;,</span>
<a id="__codelineno-0-6043" name="__codelineno-0-6043"></a><span class="sd">                &#39;YCbCr_CrBand&#39;].</span>
<a id="__codelineno-0-6044" name="__codelineno-0-6044"></a>
<a id="__codelineno-0-6045" name="__codelineno-0-6045"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-6046" name="__codelineno-0-6046"></a><span class="sd">            int:</span>
<a id="__codelineno-0-6047" name="__codelineno-0-6047"></a><span class="sd">                Band index.</span>
<a id="__codelineno-0-6048" name="__codelineno-0-6048"></a>
<a id="__codelineno-0-6049" name="__codelineno-0-6049"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-6050" name="__codelineno-0-6050"></a><span class="sd">            - Create `Dataset` consisting of 3 bands and assign RGB colors:</span>
<a id="__codelineno-0-6051" name="__codelineno-0-6051"></a>
<a id="__codelineno-0-6052" name="__codelineno-0-6052"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-6053" name="__codelineno-0-6053"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1, 3, size=(3, 10, 10))</span>
<a id="__codelineno-0-6054" name="__codelineno-0-6054"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-6055" name="__codelineno-0-6055"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-6056" name="__codelineno-0-6056"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-6057" name="__codelineno-0-6057"></a><span class="sd">              &gt;&gt;&gt; dataset.band_color = {0: &#39;red&#39;, 1: &#39;green&#39;, 2: &#39;blue&#39;}</span>
<a id="__codelineno-0-6058" name="__codelineno-0-6058"></a>
<a id="__codelineno-0-6059" name="__codelineno-0-6059"></a><span class="sd">              ```</span>
<a id="__codelineno-0-6060" name="__codelineno-0-6060"></a>
<a id="__codelineno-0-6061" name="__codelineno-0-6061"></a><span class="sd">            - Now use `get_band_by_color` to know which band is the red band, for example:</span>
<a id="__codelineno-0-6062" name="__codelineno-0-6062"></a>
<a id="__codelineno-0-6063" name="__codelineno-0-6063"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-6064" name="__codelineno-0-6064"></a><span class="sd">              &gt;&gt;&gt; band_index = dataset.get_band_by_color(&#39;red&#39;)</span>
<a id="__codelineno-0-6065" name="__codelineno-0-6065"></a><span class="sd">              &gt;&gt;&gt; print(band_index)</span>
<a id="__codelineno-0-6066" name="__codelineno-0-6066"></a><span class="sd">              0</span>
<a id="__codelineno-0-6067" name="__codelineno-0-6067"></a>
<a id="__codelineno-0-6068" name="__codelineno-0-6068"></a><span class="sd">              ```</span>
<a id="__codelineno-0-6069" name="__codelineno-0-6069"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-6070" name="__codelineno-0-6070"></a>        <span class="n">colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_color</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<a id="__codelineno-0-6071" name="__codelineno-0-6071"></a>        <span class="k">if</span> <span class="n">color_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
<a id="__codelineno-0-6072" name="__codelineno-0-6072"></a>            <span class="n">band_index</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-6073" name="__codelineno-0-6073"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-6074" name="__codelineno-0-6074"></a>            <span class="n">band_index</span> <span class="o">=</span> <span class="n">colors</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">color_name</span><span class="p">)</span>
<a id="__codelineno-0-6075" name="__codelineno-0-6075"></a>        <span class="k">return</span> <span class="n">band_index</span>
<a id="__codelineno-0-6076" name="__codelineno-0-6076"></a>
<a id="__codelineno-0-6077" name="__codelineno-0-6077"></a>    <span class="c1"># TODO: find a better way to handle the color table in accordance with attribute_table</span>
<a id="__codelineno-0-6078" name="__codelineno-0-6078"></a>    <span class="c1"># and figure out how to take a color ramp and convert it to a color table.</span>
<a id="__codelineno-0-6079" name="__codelineno-0-6079"></a>    <span class="c1"># use the SetColorInterpretation method to assign the color (R/G/B) to a band.</span>
<a id="__codelineno-0-6080" name="__codelineno-0-6080"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-6081" name="__codelineno-0-6081"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">color_table</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-6082" name="__codelineno-0-6082"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Color table.</span>
<a id="__codelineno-0-6083" name="__codelineno-0-6083"></a>
<a id="__codelineno-0-6084" name="__codelineno-0-6084"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-6085" name="__codelineno-0-6085"></a><span class="sd">            DataFrame:</span>
<a id="__codelineno-0-6086" name="__codelineno-0-6086"></a><span class="sd">                A DataFrame with columns: band, values, color.</span>
<a id="__codelineno-0-6087" name="__codelineno-0-6087"></a>
<a id="__codelineno-0-6088" name="__codelineno-0-6088"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-6089" name="__codelineno-0-6089"></a><span class="sd">            - Create `Dataset` consisting of 4 bands, 10 rows, 10 columns, at lon/lat (0, 0):</span>
<a id="__codelineno-0-6090" name="__codelineno-0-6090"></a>
<a id="__codelineno-0-6091" name="__codelineno-0-6091"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-6092" name="__codelineno-0-6092"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-6093" name="__codelineno-0-6093"></a><span class="sd">              &gt;&gt;&gt; import pandas as pd</span>
<a id="__codelineno-0-6094" name="__codelineno-0-6094"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1, 3, size=(2, 10, 10))</span>
<a id="__codelineno-0-6095" name="__codelineno-0-6095"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-6096" name="__codelineno-0-6096"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-6097" name="__codelineno-0-6097"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-6098" name="__codelineno-0-6098"></a>
<a id="__codelineno-0-6099" name="__codelineno-0-6099"></a><span class="sd">              ```</span>
<a id="__codelineno-0-6100" name="__codelineno-0-6100"></a>
<a id="__codelineno-0-6101" name="__codelineno-0-6101"></a><span class="sd">            - Set color table for band 1:</span>
<a id="__codelineno-0-6102" name="__codelineno-0-6102"></a>
<a id="__codelineno-0-6103" name="__codelineno-0-6103"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-6104" name="__codelineno-0-6104"></a><span class="sd">              &gt;&gt;&gt; color_table = pd.DataFrame({</span>
<a id="__codelineno-0-6105" name="__codelineno-0-6105"></a><span class="sd">              ...     &quot;band&quot;: [1, 1, 1, 2, 2, 2],</span>
<a id="__codelineno-0-6106" name="__codelineno-0-6106"></a><span class="sd">              ...     &quot;values&quot;: [1, 2, 3, 1, 2, 3],</span>
<a id="__codelineno-0-6107" name="__codelineno-0-6107"></a><span class="sd">              ...     &quot;color&quot;: [&quot;#709959&quot;, &quot;#F2EEA2&quot;, &quot;#F2CE85&quot;, &quot;#C28C7C&quot;, &quot;#D6C19C&quot;, &quot;#D6C19C&quot;]</span>
<a id="__codelineno-0-6108" name="__codelineno-0-6108"></a><span class="sd">              ... })</span>
<a id="__codelineno-0-6109" name="__codelineno-0-6109"></a><span class="sd">              &gt;&gt;&gt; dataset.color_table = color_table</span>
<a id="__codelineno-0-6110" name="__codelineno-0-6110"></a><span class="sd">              &gt;&gt;&gt; print(dataset.color_table)</span>
<a id="__codelineno-0-6111" name="__codelineno-0-6111"></a><span class="sd">                band values  red green blue alpha</span>
<a id="__codelineno-0-6112" name="__codelineno-0-6112"></a><span class="sd">              0    1      0    0     0    0     0</span>
<a id="__codelineno-0-6113" name="__codelineno-0-6113"></a><span class="sd">              1    1      1  112   153   89   255</span>
<a id="__codelineno-0-6114" name="__codelineno-0-6114"></a><span class="sd">              2    1      2  242   238  162   255</span>
<a id="__codelineno-0-6115" name="__codelineno-0-6115"></a><span class="sd">              3    1      3  242   206  133   255</span>
<a id="__codelineno-0-6116" name="__codelineno-0-6116"></a><span class="sd">              4    2      0    0     0    0     0</span>
<a id="__codelineno-0-6117" name="__codelineno-0-6117"></a><span class="sd">              5    2      1  194   140  124   255</span>
<a id="__codelineno-0-6118" name="__codelineno-0-6118"></a><span class="sd">              6    2      2  214   193  156   255</span>
<a id="__codelineno-0-6119" name="__codelineno-0-6119"></a><span class="sd">              7    2      3  214   193  156   255</span>
<a id="__codelineno-0-6120" name="__codelineno-0-6120"></a>
<a id="__codelineno-0-6121" name="__codelineno-0-6121"></a><span class="sd">              ```</span>
<a id="__codelineno-0-6122" name="__codelineno-0-6122"></a>
<a id="__codelineno-0-6123" name="__codelineno-0-6123"></a><span class="sd">            - Define opacity per color by adding an &#39;alpha&#39; column (0 transparent to 255 opaque). If &#39;alpha&#39; is missing,</span>
<a id="__codelineno-0-6124" name="__codelineno-0-6124"></a><span class="sd">              it will be assumed fully opaque (255):</span>
<a id="__codelineno-0-6125" name="__codelineno-0-6125"></a>
<a id="__codelineno-0-6126" name="__codelineno-0-6126"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-6127" name="__codelineno-0-6127"></a><span class="sd">              &gt;&gt;&gt; color_table = pd.DataFrame({</span>
<a id="__codelineno-0-6128" name="__codelineno-0-6128"></a><span class="sd">              ...     &quot;band&quot;: [1, 1, 1, 2, 2, 2],</span>
<a id="__codelineno-0-6129" name="__codelineno-0-6129"></a><span class="sd">              ...     &quot;values&quot;: [1, 2, 3, 1, 2, 3],</span>
<a id="__codelineno-0-6130" name="__codelineno-0-6130"></a><span class="sd">              ...     &quot;color&quot;: [&quot;#709959&quot;, &quot;#F2EEA2&quot;, &quot;#F2CE85&quot;, &quot;#C28C7C&quot;, &quot;#D6C19C&quot;, &quot;#D6C19C&quot;],</span>
<a id="__codelineno-0-6131" name="__codelineno-0-6131"></a><span class="sd">              ...     &quot;alpha&quot;: [255, 128, 0, 255, 128, 0]</span>
<a id="__codelineno-0-6132" name="__codelineno-0-6132"></a><span class="sd">              ... })</span>
<a id="__codelineno-0-6133" name="__codelineno-0-6133"></a><span class="sd">              &gt;&gt;&gt; dataset.color_table = color_table</span>
<a id="__codelineno-0-6134" name="__codelineno-0-6134"></a><span class="sd">              &gt;&gt;&gt; print(dataset.color_table)</span>
<a id="__codelineno-0-6135" name="__codelineno-0-6135"></a><span class="sd">                band values  red green blue alpha</span>
<a id="__codelineno-0-6136" name="__codelineno-0-6136"></a><span class="sd">              0    1      0    0     0    0     0</span>
<a id="__codelineno-0-6137" name="__codelineno-0-6137"></a><span class="sd">              1    1      1  112   153   89   255</span>
<a id="__codelineno-0-6138" name="__codelineno-0-6138"></a><span class="sd">              2    1      2  242   238  162   128</span>
<a id="__codelineno-0-6139" name="__codelineno-0-6139"></a><span class="sd">              3    1      3  242   206  133     0</span>
<a id="__codelineno-0-6140" name="__codelineno-0-6140"></a><span class="sd">              4    2      0    0     0    0     0</span>
<a id="__codelineno-0-6141" name="__codelineno-0-6141"></a><span class="sd">              5    2      1  194   140  124   255</span>
<a id="__codelineno-0-6142" name="__codelineno-0-6142"></a><span class="sd">              6    2      2  214   193  156   128</span>
<a id="__codelineno-0-6143" name="__codelineno-0-6143"></a><span class="sd">              7    2      3  214   193  156     0</span>
<a id="__codelineno-0-6144" name="__codelineno-0-6144"></a>
<a id="__codelineno-0-6145" name="__codelineno-0-6145"></a><span class="sd">              ```</span>
<a id="__codelineno-0-6146" name="__codelineno-0-6146"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-6147" name="__codelineno-0-6147"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_color_table</span><span class="p">()</span>
<a id="__codelineno-0-6148" name="__codelineno-0-6148"></a>
<a id="__codelineno-0-6149" name="__codelineno-0-6149"></a>    <span class="nd">@color_table</span><span class="o">.</span><span class="n">setter</span>
<a id="__codelineno-0-6150" name="__codelineno-0-6150"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">color_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">DataFrame</span><span class="p">):</span>
<a id="__codelineno-0-6151" name="__codelineno-0-6151"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get color table.</span>
<a id="__codelineno-0-6152" name="__codelineno-0-6152"></a>
<a id="__codelineno-0-6153" name="__codelineno-0-6153"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-6154" name="__codelineno-0-6154"></a><span class="sd">            df (DataFrame):</span>
<a id="__codelineno-0-6155" name="__codelineno-0-6155"></a><span class="sd">                DataFrame with columns: band, values, color. Example layout:</span>
<a id="__codelineno-0-6156" name="__codelineno-0-6156"></a><span class="sd">                    ```python</span>
<a id="__codelineno-0-6157" name="__codelineno-0-6157"></a><span class="sd">                    band  values    color  alpha</span>
<a id="__codelineno-0-6158" name="__codelineno-0-6158"></a><span class="sd">                    0    1       1  #709959    255</span>
<a id="__codelineno-0-6159" name="__codelineno-0-6159"></a><span class="sd">                    1    1       2  #F2EEA2    255</span>
<a id="__codelineno-0-6160" name="__codelineno-0-6160"></a><span class="sd">                    2    1       3  #F2CE85    138</span>
<a id="__codelineno-0-6161" name="__codelineno-0-6161"></a><span class="sd">                    3    2       1  #C28C7C    100</span>
<a id="__codelineno-0-6162" name="__codelineno-0-6162"></a><span class="sd">                    4    2       2  #D6C19C    100</span>
<a id="__codelineno-0-6163" name="__codelineno-0-6163"></a><span class="sd">                    5    2       3  #D6C19C    100</span>
<a id="__codelineno-0-6164" name="__codelineno-0-6164"></a>
<a id="__codelineno-0-6165" name="__codelineno-0-6165"></a><span class="sd">                    ```</span>
<a id="__codelineno-0-6166" name="__codelineno-0-6166"></a>
<a id="__codelineno-0-6167" name="__codelineno-0-6167"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-6168" name="__codelineno-0-6168"></a><span class="sd">            - Create `Dataset` consisting of 4 bands, 10 rows, 10 columns, at lon/lat (0, 0):</span>
<a id="__codelineno-0-6169" name="__codelineno-0-6169"></a>
<a id="__codelineno-0-6170" name="__codelineno-0-6170"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-6171" name="__codelineno-0-6171"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-6172" name="__codelineno-0-6172"></a><span class="sd">              &gt;&gt;&gt; import pandas as pd</span>
<a id="__codelineno-0-6173" name="__codelineno-0-6173"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1, 3, size=(2, 10, 10))</span>
<a id="__codelineno-0-6174" name="__codelineno-0-6174"></a><span class="sd">              &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-6175" name="__codelineno-0-6175"></a><span class="sd">              &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-6176" name="__codelineno-0-6176"></a><span class="sd">              &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-6177" name="__codelineno-0-6177"></a>
<a id="__codelineno-0-6178" name="__codelineno-0-6178"></a><span class="sd">              ```</span>
<a id="__codelineno-0-6179" name="__codelineno-0-6179"></a>
<a id="__codelineno-0-6180" name="__codelineno-0-6180"></a><span class="sd">            - Set color table for band 1:</span>
<a id="__codelineno-0-6181" name="__codelineno-0-6181"></a>
<a id="__codelineno-0-6182" name="__codelineno-0-6182"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-6183" name="__codelineno-0-6183"></a><span class="sd">              &gt;&gt;&gt; color_table = pd.DataFrame({</span>
<a id="__codelineno-0-6184" name="__codelineno-0-6184"></a><span class="sd">              ...     &quot;band&quot;: [1, 1, 1, 2, 2, 2],</span>
<a id="__codelineno-0-6185" name="__codelineno-0-6185"></a><span class="sd">              ...     &quot;values&quot;: [1, 2, 3, 1, 2, 3],</span>
<a id="__codelineno-0-6186" name="__codelineno-0-6186"></a><span class="sd">              ...     &quot;color&quot;: [&quot;#709959&quot;, &quot;#F2EEA2&quot;, &quot;#F2CE85&quot;, &quot;#C28C7C&quot;, &quot;#D6C19C&quot;, &quot;#D6C19C&quot;]</span>
<a id="__codelineno-0-6187" name="__codelineno-0-6187"></a><span class="sd">              ... })</span>
<a id="__codelineno-0-6188" name="__codelineno-0-6188"></a><span class="sd">              &gt;&gt;&gt; dataset.color_table = color_table</span>
<a id="__codelineno-0-6189" name="__codelineno-0-6189"></a><span class="sd">              &gt;&gt;&gt; print(dataset.color_table)</span>
<a id="__codelineno-0-6190" name="__codelineno-0-6190"></a><span class="sd">                band values  red green blue alpha</span>
<a id="__codelineno-0-6191" name="__codelineno-0-6191"></a><span class="sd">              0    1      0    0     0    0     0</span>
<a id="__codelineno-0-6192" name="__codelineno-0-6192"></a><span class="sd">              1    1      1  112   153   89   255</span>
<a id="__codelineno-0-6193" name="__codelineno-0-6193"></a><span class="sd">              2    1      2  242   238  162   255</span>
<a id="__codelineno-0-6194" name="__codelineno-0-6194"></a><span class="sd">              3    1      3  242   206  133   255</span>
<a id="__codelineno-0-6195" name="__codelineno-0-6195"></a><span class="sd">              4    2      0    0     0    0     0</span>
<a id="__codelineno-0-6196" name="__codelineno-0-6196"></a><span class="sd">              5    2      1  194   140  124   255</span>
<a id="__codelineno-0-6197" name="__codelineno-0-6197"></a><span class="sd">              6    2      2  214   193  156   255</span>
<a id="__codelineno-0-6198" name="__codelineno-0-6198"></a><span class="sd">              7    2      3  214   193  156   255</span>
<a id="__codelineno-0-6199" name="__codelineno-0-6199"></a>
<a id="__codelineno-0-6200" name="__codelineno-0-6200"></a><span class="sd">              ```</span>
<a id="__codelineno-0-6201" name="__codelineno-0-6201"></a>
<a id="__codelineno-0-6202" name="__codelineno-0-6202"></a><span class="sd">            - You can also define the opacity of each color by adding a value between 0 (fully transparent) and 255 (fully opaque)</span>
<a id="__codelineno-0-6203" name="__codelineno-0-6203"></a><span class="sd">              to the DataFrame for each color. If the &#39;alpha&#39; column is not present, it will be assumed to be fully opaque (255):</span>
<a id="__codelineno-0-6204" name="__codelineno-0-6204"></a>
<a id="__codelineno-0-6205" name="__codelineno-0-6205"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-6206" name="__codelineno-0-6206"></a><span class="sd">              &gt;&gt;&gt; color_table = pd.DataFrame({</span>
<a id="__codelineno-0-6207" name="__codelineno-0-6207"></a><span class="sd">              ...     &quot;band&quot;: [1, 1, 1, 2, 2, 2],</span>
<a id="__codelineno-0-6208" name="__codelineno-0-6208"></a><span class="sd">              ...     &quot;values&quot;: [1, 2, 3, 1, 2, 3],</span>
<a id="__codelineno-0-6209" name="__codelineno-0-6209"></a><span class="sd">              ...     &quot;color&quot;: [&quot;#709959&quot;, &quot;#F2EEA2&quot;, &quot;#F2CE85&quot;, &quot;#C28C7C&quot;, &quot;#D6C19C&quot;, &quot;#D6C19C&quot;],</span>
<a id="__codelineno-0-6210" name="__codelineno-0-6210"></a><span class="sd">              ...     &quot;alpha&quot;: [255, 128 0, 255, 128 0]</span>
<a id="__codelineno-0-6211" name="__codelineno-0-6211"></a><span class="sd">              ... })</span>
<a id="__codelineno-0-6212" name="__codelineno-0-6212"></a><span class="sd">              &gt;&gt;&gt; dataset.color_table = color_table</span>
<a id="__codelineno-0-6213" name="__codelineno-0-6213"></a><span class="sd">              &gt;&gt;&gt; print(dataset.color_table)</span>
<a id="__codelineno-0-6214" name="__codelineno-0-6214"></a><span class="sd">                band values  red green blue alpha</span>
<a id="__codelineno-0-6215" name="__codelineno-0-6215"></a><span class="sd">              0    1      0    0     0    0     0</span>
<a id="__codelineno-0-6216" name="__codelineno-0-6216"></a><span class="sd">              1    1      1  112   153   89   255</span>
<a id="__codelineno-0-6217" name="__codelineno-0-6217"></a><span class="sd">              2    1      2  242   238  162   128</span>
<a id="__codelineno-0-6218" name="__codelineno-0-6218"></a><span class="sd">              3    1      3  242   206  133     0</span>
<a id="__codelineno-0-6219" name="__codelineno-0-6219"></a><span class="sd">              4    2      0    0     0    0     0</span>
<a id="__codelineno-0-6220" name="__codelineno-0-6220"></a><span class="sd">              5    2      1  194   140  124   255</span>
<a id="__codelineno-0-6221" name="__codelineno-0-6221"></a><span class="sd">              6    2      2  214   193  156   128</span>
<a id="__codelineno-0-6222" name="__codelineno-0-6222"></a><span class="sd">              7    2      3  214   193  156     0</span>
<a id="__codelineno-0-6223" name="__codelineno-0-6223"></a>
<a id="__codelineno-0-6224" name="__codelineno-0-6224"></a><span class="sd">              ```</span>
<a id="__codelineno-0-6225" name="__codelineno-0-6225"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-6226" name="__codelineno-0-6226"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">DataFrame</span><span class="p">):</span>
<a id="__codelineno-0-6227" name="__codelineno-0-6227"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;df should be a DataFrame not </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-6228" name="__codelineno-0-6228"></a>
<a id="__codelineno-0-6229" name="__codelineno-0-6229"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">{</span><span class="s2">&quot;band&quot;</span><span class="p">,</span> <span class="s2">&quot;values&quot;</span><span class="p">,</span> <span class="s2">&quot;color&quot;</span><span class="p">}</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
<a id="__codelineno-0-6230" name="__codelineno-0-6230"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>  <span class="c1"># noqa</span>
<a id="__codelineno-0-6231" name="__codelineno-0-6231"></a>                <span class="s2">&quot;df should have the following columns: band, values, color&quot;</span>
<a id="__codelineno-0-6232" name="__codelineno-0-6232"></a>            <span class="p">)</span>
<a id="__codelineno-0-6233" name="__codelineno-0-6233"></a>
<a id="__codelineno-0-6234" name="__codelineno-0-6234"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_set_color_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-6235" name="__codelineno-0-6235"></a>
<a id="__codelineno-0-6236" name="__codelineno-0-6236"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_set_color_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color_df</span><span class="p">:</span> <span class="n">DataFrame</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-6237" name="__codelineno-0-6237"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;_set_color_table.</span>
<a id="__codelineno-0-6238" name="__codelineno-0-6238"></a>
<a id="__codelineno-0-6239" name="__codelineno-0-6239"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-6240" name="__codelineno-0-6240"></a><span class="sd">            color_df (DataFrame):</span>
<a id="__codelineno-0-6241" name="__codelineno-0-6241"></a><span class="sd">                DataFrame with columns: band, values, color. Example:</span>
<a id="__codelineno-0-6242" name="__codelineno-0-6242"></a><span class="sd">                ```python</span>
<a id="__codelineno-0-6243" name="__codelineno-0-6243"></a><span class="sd">                band  values    color</span>
<a id="__codelineno-0-6244" name="__codelineno-0-6244"></a><span class="sd">                0    1       1  #709959</span>
<a id="__codelineno-0-6245" name="__codelineno-0-6245"></a><span class="sd">                1    1       2  #F2EEA2</span>
<a id="__codelineno-0-6246" name="__codelineno-0-6246"></a><span class="sd">                2    1       3  #F2CE85</span>
<a id="__codelineno-0-6247" name="__codelineno-0-6247"></a><span class="sd">                3    2       1  #C28C7C</span>
<a id="__codelineno-0-6248" name="__codelineno-0-6248"></a><span class="sd">                4    2       2  #D6C19C</span>
<a id="__codelineno-0-6249" name="__codelineno-0-6249"></a><span class="sd">                5    2       3  #D6C19C</span>
<a id="__codelineno-0-6250" name="__codelineno-0-6250"></a>
<a id="__codelineno-0-6251" name="__codelineno-0-6251"></a><span class="sd">                ```</span>
<a id="__codelineno-0-6252" name="__codelineno-0-6252"></a><span class="sd">            overwrite (bool):</span>
<a id="__codelineno-0-6253" name="__codelineno-0-6253"></a><span class="sd">                True to overwrite the existing color table. Default is False.</span>
<a id="__codelineno-0-6254" name="__codelineno-0-6254"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-6255" name="__codelineno-0-6255"></a>        <span class="n">import_cleopatra</span><span class="p">(</span>
<a id="__codelineno-0-6256" name="__codelineno-0-6256"></a>            <span class="s2">&quot;The current function uses cleopatra package to for plotting, please install it manually, for more info&quot;</span>
<a id="__codelineno-0-6257" name="__codelineno-0-6257"></a>            <span class="s2">&quot; check https://github.com/Serapieum-of-alex/cleopatra&quot;</span>
<a id="__codelineno-0-6258" name="__codelineno-0-6258"></a>        <span class="p">)</span>
<a id="__codelineno-0-6259" name="__codelineno-0-6259"></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">cleopatra.colors</span><span class="w"> </span><span class="kn">import</span> <span class="n">Colors</span>
<a id="__codelineno-0-6260" name="__codelineno-0-6260"></a>
<a id="__codelineno-0-6261" name="__codelineno-0-6261"></a>        <span class="n">color</span> <span class="o">=</span> <span class="n">Colors</span><span class="p">(</span><span class="n">color_df</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
<a id="__codelineno-0-6262" name="__codelineno-0-6262"></a>        <span class="n">color_rgb</span> <span class="o">=</span> <span class="n">color</span><span class="o">.</span><span class="n">to_rgb</span><span class="p">(</span><span class="n">normalized</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-6263" name="__codelineno-0-6263"></a>        <span class="n">color_df</span> <span class="o">=</span> <span class="n">color_df</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-6264" name="__codelineno-0-6264"></a>        <span class="n">color_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">color_rgb</span>
<a id="__codelineno-0-6265" name="__codelineno-0-6265"></a>
<a id="__codelineno-0-6266" name="__codelineno-0-6266"></a>        <span class="k">if</span> <span class="s2">&quot;alpha&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">color_df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
<a id="__codelineno-0-6267" name="__codelineno-0-6267"></a>            <span class="n">color_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s2">&quot;alpha&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span>
<a id="__codelineno-0-6268" name="__codelineno-0-6268"></a>
<a id="__codelineno-0-6269" name="__codelineno-0-6269"></a>        <span class="k">for</span> <span class="n">band_i</span><span class="p">,</span> <span class="n">df_band</span> <span class="ow">in</span> <span class="n">color_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;band&quot;</span><span class="p">):</span>
<a id="__codelineno-0-6270" name="__codelineno-0-6270"></a>            <span class="n">band</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">band_i</span><span class="p">)</span>
<a id="__codelineno-0-6271" name="__codelineno-0-6271"></a>
<a id="__codelineno-0-6272" name="__codelineno-0-6272"></a>            <span class="k">if</span> <span class="n">overwrite</span><span class="p">:</span>
<a id="__codelineno-0-6273" name="__codelineno-0-6273"></a>                <span class="n">color_table</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">ColorTable</span><span class="p">()</span>
<a id="__codelineno-0-6274" name="__codelineno-0-6274"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-6275" name="__codelineno-0-6275"></a>                <span class="n">color_table</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">GetColorTable</span><span class="p">()</span>
<a id="__codelineno-0-6276" name="__codelineno-0-6276"></a>
<a id="__codelineno-0-6277" name="__codelineno-0-6277"></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df_band</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
<a id="__codelineno-0-6278" name="__codelineno-0-6278"></a>                <span class="n">color_table</span><span class="o">.</span><span class="n">SetColorEntry</span><span class="p">(</span>
<a id="__codelineno-0-6279" name="__codelineno-0-6279"></a>                    <span class="n">row</span><span class="p">[</span><span class="s2">&quot;values&quot;</span><span class="p">],</span> <span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;green&quot;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;blue&quot;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;alpha&quot;</span><span class="p">])</span>
<a id="__codelineno-0-6280" name="__codelineno-0-6280"></a>                <span class="p">)</span>
<a id="__codelineno-0-6281" name="__codelineno-0-6281"></a>
<a id="__codelineno-0-6282" name="__codelineno-0-6282"></a>            <span class="n">band</span><span class="o">.</span><span class="n">SetColorTable</span><span class="p">(</span><span class="n">color_table</span><span class="p">)</span>
<a id="__codelineno-0-6283" name="__codelineno-0-6283"></a>            <span class="c1"># band.SetRasterColorInterpretation(gdal.GCI_PaletteIndex)</span>
<a id="__codelineno-0-6284" name="__codelineno-0-6284"></a>
<a id="__codelineno-0-6285" name="__codelineno-0-6285"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_color_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-6286" name="__codelineno-0-6286"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get color table.</span>
<a id="__codelineno-0-6287" name="__codelineno-0-6287"></a>
<a id="__codelineno-0-6288" name="__codelineno-0-6288"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-6289" name="__codelineno-0-6289"></a><span class="sd">            band (int, optional):</span>
<a id="__codelineno-0-6290" name="__codelineno-0-6290"></a><span class="sd">                Band index. Default is None.</span>
<a id="__codelineno-0-6291" name="__codelineno-0-6291"></a>
<a id="__codelineno-0-6292" name="__codelineno-0-6292"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-6293" name="__codelineno-0-6293"></a><span class="sd">            pandas.DataFrame:</span>
<a id="__codelineno-0-6294" name="__codelineno-0-6294"></a><span class="sd">                A DataFrame with columns [&quot;band&quot;, &quot;values&quot;, &quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, &quot;alpha&quot;] describing the color table.</span>
<a id="__codelineno-0-6295" name="__codelineno-0-6295"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-6296" name="__codelineno-0-6296"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;band&quot;</span><span class="p">,</span> <span class="s2">&quot;values&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="s2">&quot;alpha&quot;</span><span class="p">])</span>
<a id="__codelineno-0-6297" name="__codelineno-0-6297"></a>        <span class="n">bands</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">)</span> <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">band</span>
<a id="__codelineno-0-6298" name="__codelineno-0-6298"></a>        <span class="n">row</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-6299" name="__codelineno-0-6299"></a>        <span class="k">for</span> <span class="n">band</span> <span class="ow">in</span> <span class="n">bands</span><span class="p">:</span>
<a id="__codelineno-0-6300" name="__codelineno-0-6300"></a>            <span class="n">color_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">band</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">GetRasterColorTable</span><span class="p">()</span>
<a id="__codelineno-0-6301" name="__codelineno-0-6301"></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">color_table</span><span class="o">.</span><span class="n">GetCount</span><span class="p">()):</span>
<a id="__codelineno-0-6302" name="__codelineno-0-6302"></a>                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="s2">&quot;alpha&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-6303" name="__codelineno-0-6303"></a>                    <span class="n">color_table</span><span class="o">.</span><span class="n">GetColorEntry</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-0-6304" name="__codelineno-0-6304"></a>                <span class="p">)</span>
<a id="__codelineno-0-6305" name="__codelineno-0-6305"></a>                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;band&quot;</span><span class="p">,</span> <span class="s2">&quot;values&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">band</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span>
<a id="__codelineno-0-6306" name="__codelineno-0-6306"></a>                <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-6307" name="__codelineno-0-6307"></a>
<a id="__codelineno-0-6308" name="__codelineno-0-6308"></a>        <span class="k">return</span> <span class="n">df</span>
<a id="__codelineno-0-6309" name="__codelineno-0-6309"></a>
<a id="__codelineno-0-6310" name="__codelineno-0-6310"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_histogram</span><span class="p">(</span>
<a id="__codelineno-0-6311" name="__codelineno-0-6311"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-6312" name="__codelineno-0-6312"></a>        <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-6313" name="__codelineno-0-6313"></a>        <span class="n">bins</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
<a id="__codelineno-0-6314" name="__codelineno-0-6314"></a>        <span class="n">min_value</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-6315" name="__codelineno-0-6315"></a>        <span class="n">max_value</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-6316" name="__codelineno-0-6316"></a>        <span class="n">include_out_of_range</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-6317" name="__codelineno-0-6317"></a>        <span class="n">approx_ok</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-6318" name="__codelineno-0-6318"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]:</span>
<a id="__codelineno-0-6319" name="__codelineno-0-6319"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get histogram.</span>
<a id="__codelineno-0-6320" name="__codelineno-0-6320"></a>
<a id="__codelineno-0-6321" name="__codelineno-0-6321"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-6322" name="__codelineno-0-6322"></a><span class="sd">            band (int, optional):</span>
<a id="__codelineno-0-6323" name="__codelineno-0-6323"></a><span class="sd">                Band index. Default is 1.</span>
<a id="__codelineno-0-6324" name="__codelineno-0-6324"></a><span class="sd">            bins (int, optional):</span>
<a id="__codelineno-0-6325" name="__codelineno-0-6325"></a><span class="sd">                Number of bins. Default is 6.</span>
<a id="__codelineno-0-6326" name="__codelineno-0-6326"></a><span class="sd">            min_value (float, optional):</span>
<a id="__codelineno-0-6327" name="__codelineno-0-6327"></a><span class="sd">                Minimum value. Default is None.</span>
<a id="__codelineno-0-6328" name="__codelineno-0-6328"></a><span class="sd">            max_value (float, optional):</span>
<a id="__codelineno-0-6329" name="__codelineno-0-6329"></a><span class="sd">                Maximum value. Default is None.</span>
<a id="__codelineno-0-6330" name="__codelineno-0-6330"></a><span class="sd">            include_out_of_range (bool, optional):</span>
<a id="__codelineno-0-6331" name="__codelineno-0-6331"></a><span class="sd">                If True, add out-of-range values into the first and last buckets. Default is False.</span>
<a id="__codelineno-0-6332" name="__codelineno-0-6332"></a><span class="sd">            approx_ok (bool, optional):</span>
<a id="__codelineno-0-6333" name="__codelineno-0-6333"></a><span class="sd">                If True, compute an approximate histogram by using subsampling or overviews. Default is False.</span>
<a id="__codelineno-0-6334" name="__codelineno-0-6334"></a>
<a id="__codelineno-0-6335" name="__codelineno-0-6335"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-6336" name="__codelineno-0-6336"></a><span class="sd">            tuple[list, list[tuple[Any, Any]]]:</span>
<a id="__codelineno-0-6337" name="__codelineno-0-6337"></a><span class="sd">                Histogram values and bin edges.</span>
<a id="__codelineno-0-6338" name="__codelineno-0-6338"></a>
<a id="__codelineno-0-6339" name="__codelineno-0-6339"></a><span class="sd">        Hint:</span>
<a id="__codelineno-0-6340" name="__codelineno-0-6340"></a><span class="sd">            - The value of the histogram will be stored in an xml file by the name of the raster file with the extension</span>
<a id="__codelineno-0-6341" name="__codelineno-0-6341"></a><span class="sd">                of .aux.xml.</span>
<a id="__codelineno-0-6342" name="__codelineno-0-6342"></a>
<a id="__codelineno-0-6343" name="__codelineno-0-6343"></a><span class="sd">            - The content of the file will be like the following:</span>
<a id="__codelineno-0-6344" name="__codelineno-0-6344"></a><span class="sd">              ```xml</span>
<a id="__codelineno-0-6345" name="__codelineno-0-6345"></a>
<a id="__codelineno-0-6346" name="__codelineno-0-6346"></a><span class="sd">                  &lt;PAMDataset&gt;</span>
<a id="__codelineno-0-6347" name="__codelineno-0-6347"></a><span class="sd">                    &lt;PAMRasterBand band=&quot;1&quot;&gt;</span>
<a id="__codelineno-0-6348" name="__codelineno-0-6348"></a><span class="sd">                      &lt;Description&gt;Band_1&lt;/Description&gt;</span>
<a id="__codelineno-0-6349" name="__codelineno-0-6349"></a><span class="sd">                      &lt;Histograms&gt;</span>
<a id="__codelineno-0-6350" name="__codelineno-0-6350"></a><span class="sd">                        &lt;HistItem&gt;</span>
<a id="__codelineno-0-6351" name="__codelineno-0-6351"></a><span class="sd">                          &lt;HistMin&gt;0&lt;/HistMin&gt;</span>
<a id="__codelineno-0-6352" name="__codelineno-0-6352"></a><span class="sd">                          &lt;HistMax&gt;88&lt;/HistMax&gt;</span>
<a id="__codelineno-0-6353" name="__codelineno-0-6353"></a><span class="sd">                          &lt;BucketCount&gt;6&lt;/BucketCount&gt;</span>
<a id="__codelineno-0-6354" name="__codelineno-0-6354"></a><span class="sd">                          &lt;IncludeOutOfRange&gt;0&lt;/IncludeOutOfRange&gt;</span>
<a id="__codelineno-0-6355" name="__codelineno-0-6355"></a><span class="sd">                          &lt;Approximate&gt;0&lt;/Approximate&gt;</span>
<a id="__codelineno-0-6356" name="__codelineno-0-6356"></a><span class="sd">                          &lt;HistCounts&gt;75|6|0|4|2|1&lt;/HistCounts&gt;</span>
<a id="__codelineno-0-6357" name="__codelineno-0-6357"></a><span class="sd">                        &lt;/HistItem&gt;</span>
<a id="__codelineno-0-6358" name="__codelineno-0-6358"></a><span class="sd">                      &lt;/Histograms&gt;</span>
<a id="__codelineno-0-6359" name="__codelineno-0-6359"></a><span class="sd">                    &lt;/PAMRasterBand&gt;</span>
<a id="__codelineno-0-6360" name="__codelineno-0-6360"></a><span class="sd">                  &lt;/PAMDataset&gt;</span>
<a id="__codelineno-0-6361" name="__codelineno-0-6361"></a>
<a id="__codelineno-0-6362" name="__codelineno-0-6362"></a><span class="sd">              ```</span>
<a id="__codelineno-0-6363" name="__codelineno-0-6363"></a>
<a id="__codelineno-0-6364" name="__codelineno-0-6364"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-6365" name="__codelineno-0-6365"></a><span class="sd">            - Create `Dataset` consists of 4 bands, 10 rows, 10 columns, at the point lon/lat (0, 0).</span>
<a id="__codelineno-0-6366" name="__codelineno-0-6366"></a>
<a id="__codelineno-0-6367" name="__codelineno-0-6367"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-6368" name="__codelineno-0-6368"></a><span class="sd">              &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-6369" name="__codelineno-0-6369"></a><span class="sd">              &gt;&gt;&gt; arr = np.random.randint(1, 12, size=(10, 10))</span>
<a id="__codelineno-0-6370" name="__codelineno-0-6370"></a><span class="sd">              &gt;&gt;&gt; print(arr)    # doctest: +SKIP</span>
<a id="__codelineno-0-6371" name="__codelineno-0-6371"></a><span class="sd">              [[ 4  1  1  2  6  9  2  5  1  8]</span>
<a id="__codelineno-0-6372" name="__codelineno-0-6372"></a><span class="sd">               [ 1 11  5  6  2  5  4  6  6  7]</span>
<a id="__codelineno-0-6373" name="__codelineno-0-6373"></a><span class="sd">               [ 5  2 10  4  8 11  4 11 11  1]</span>
<a id="__codelineno-0-6374" name="__codelineno-0-6374"></a><span class="sd">               [ 2  3  6  3  1  5 11 10 10  7]</span>
<a id="__codelineno-0-6375" name="__codelineno-0-6375"></a><span class="sd">               [ 8  2 11  3  1  3  5  4 10 10]</span>
<a id="__codelineno-0-6376" name="__codelineno-0-6376"></a><span class="sd">               [ 1  2  1  6 10  3  6  4  2  8]</span>
<a id="__codelineno-0-6377" name="__codelineno-0-6377"></a><span class="sd">               [ 9  5  7  9  7  8  1 11  4  4]</span>
<a id="__codelineno-0-6378" name="__codelineno-0-6378"></a><span class="sd">               [ 7  7  2  2  5  3  7  2  9  9]</span>
<a id="__codelineno-0-6379" name="__codelineno-0-6379"></a><span class="sd">               [ 2 10  3  2  1 11  5  9  8 11]</span>
<a id="__codelineno-0-6380" name="__codelineno-0-6380"></a><span class="sd">               [ 1  5  6 11  3  3  8  1  2  1]]</span>
<a id="__codelineno-0-6381" name="__codelineno-0-6381"></a><span class="sd">               &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-6382" name="__codelineno-0-6382"></a><span class="sd">               &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-6383" name="__codelineno-0-6383"></a><span class="sd">               &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-6384" name="__codelineno-0-6384"></a>
<a id="__codelineno-0-6385" name="__codelineno-0-6385"></a><span class="sd">               ```</span>
<a id="__codelineno-0-6386" name="__codelineno-0-6386"></a>
<a id="__codelineno-0-6387" name="__codelineno-0-6387"></a><span class="sd">            - Now, let&#39;s get the histogram of the first band using the `get_histogram` method with the default</span>
<a id="__codelineno-0-6388" name="__codelineno-0-6388"></a><span class="sd">                parameters:</span>
<a id="__codelineno-0-6389" name="__codelineno-0-6389"></a><span class="sd">                ```python</span>
<a id="__codelineno-0-6390" name="__codelineno-0-6390"></a><span class="sd">                &gt;&gt;&gt; hist, ranges = dataset.get_histogram(band=0)</span>
<a id="__codelineno-0-6391" name="__codelineno-0-6391"></a><span class="sd">                &gt;&gt;&gt; print(hist)  # doctest: +SKIP</span>
<a id="__codelineno-0-6392" name="__codelineno-0-6392"></a><span class="sd">                [28, 17, 10, 15, 13, 7]</span>
<a id="__codelineno-0-6393" name="__codelineno-0-6393"></a><span class="sd">                &gt;&gt;&gt; print(ranges)   # doctest: +SKIP</span>
<a id="__codelineno-0-6394" name="__codelineno-0-6394"></a><span class="sd">                [(1.0, 2.67), (2.67, 4.34), (4.34, 6.0), (6.0, 7.67), (7.67, 9.34), (9.34, 11.0)]</span>
<a id="__codelineno-0-6395" name="__codelineno-0-6395"></a>
<a id="__codelineno-0-6396" name="__codelineno-0-6396"></a><span class="sd">                ```</span>
<a id="__codelineno-0-6397" name="__codelineno-0-6397"></a><span class="sd">            - we can also exclude values from the histogram by using the `min_value` and `max_value`:</span>
<a id="__codelineno-0-6398" name="__codelineno-0-6398"></a><span class="sd">                ```python</span>
<a id="__codelineno-0-6399" name="__codelineno-0-6399"></a><span class="sd">                &gt;&gt;&gt; hist, ranges = dataset.get_histogram(band=0, min_value=5, max_value=10)</span>
<a id="__codelineno-0-6400" name="__codelineno-0-6400"></a><span class="sd">                &gt;&gt;&gt; print(hist)  # doctest: +SKIP</span>
<a id="__codelineno-0-6401" name="__codelineno-0-6401"></a><span class="sd">                [10, 8, 7, 7, 6, 0]</span>
<a id="__codelineno-0-6402" name="__codelineno-0-6402"></a><span class="sd">                &gt;&gt;&gt; print(ranges)   # doctest: +SKIP</span>
<a id="__codelineno-0-6403" name="__codelineno-0-6403"></a><span class="sd">                [(1.0, 1.835), (1.835, 2.67), (2.67, 3.5), (3.5, 4.34), (4.34, 5.167), (5.167, 6.0)]</span>
<a id="__codelineno-0-6404" name="__codelineno-0-6404"></a>
<a id="__codelineno-0-6405" name="__codelineno-0-6405"></a><span class="sd">                ```</span>
<a id="__codelineno-0-6406" name="__codelineno-0-6406"></a><span class="sd">            - For datasets with big dimensions, computing the histogram can take some time; approximating the computation</span>
<a id="__codelineno-0-6407" name="__codelineno-0-6407"></a><span class="sd">                of the histogram can save a lot of computation time. When using the parameter `approx_ok` with a `True`</span>
<a id="__codelineno-0-6408" name="__codelineno-0-6408"></a><span class="sd">                value the histogram will be calculated from resampling the band or from the overviews if they exist.</span>
<a id="__codelineno-0-6409" name="__codelineno-0-6409"></a><span class="sd">                ```python</span>
<a id="__codelineno-0-6410" name="__codelineno-0-6410"></a><span class="sd">                &gt;&gt;&gt; hist, ranges = dataset.get_histogram(band=0, approx_ok=True)</span>
<a id="__codelineno-0-6411" name="__codelineno-0-6411"></a><span class="sd">                &gt;&gt;&gt; print(hist)  # doctest: +SKIP</span>
<a id="__codelineno-0-6412" name="__codelineno-0-6412"></a><span class="sd">                [28, 17, 10, 15, 13, 7]</span>
<a id="__codelineno-0-6413" name="__codelineno-0-6413"></a><span class="sd">                &gt;&gt;&gt; print(ranges)   # doctest: +SKIP</span>
<a id="__codelineno-0-6414" name="__codelineno-0-6414"></a><span class="sd">                [(1.0, 2.67), (2.67, 4.34), (4.34, 6.0), (6.0, 7.67), (7.67, 9.34), (9.34, 11.0)]</span>
<a id="__codelineno-0-6415" name="__codelineno-0-6415"></a>
<a id="__codelineno-0-6416" name="__codelineno-0-6416"></a><span class="sd">                ```</span>
<a id="__codelineno-0-6417" name="__codelineno-0-6417"></a><span class="sd">            - As you see for small datasets, the approximation of the histogram will be the same as without approximation.</span>
<a id="__codelineno-0-6418" name="__codelineno-0-6418"></a>
<a id="__codelineno-0-6419" name="__codelineno-0-6419"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-6420" name="__codelineno-0-6420"></a>        <span class="n">band</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-6421" name="__codelineno-0-6421"></a>        <span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ComputeRasterMinMax</span><span class="p">()</span>
<a id="__codelineno-0-6422" name="__codelineno-0-6422"></a>        <span class="k">if</span> <span class="n">min_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-6423" name="__codelineno-0-6423"></a>            <span class="n">min_value</span> <span class="o">=</span> <span class="n">min_val</span>
<a id="__codelineno-0-6424" name="__codelineno-0-6424"></a>        <span class="k">if</span> <span class="n">max_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-6425" name="__codelineno-0-6425"></a>            <span class="n">max_value</span> <span class="o">=</span> <span class="n">max_val</span>
<a id="__codelineno-0-6426" name="__codelineno-0-6426"></a>
<a id="__codelineno-0-6427" name="__codelineno-0-6427"></a>        <span class="n">bin_width</span> <span class="o">=</span> <span class="p">(</span><span class="n">max_value</span> <span class="o">-</span> <span class="n">min_value</span><span class="p">)</span> <span class="o">/</span> <span class="n">bins</span>
<a id="__codelineno-0-6428" name="__codelineno-0-6428"></a>        <span class="n">ranges</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-6429" name="__codelineno-0-6429"></a>            <span class="p">(</span><span class="n">min_val</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="n">bin_width</span><span class="p">,</span> <span class="n">min_val</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">bin_width</span><span class="p">)</span>
<a id="__codelineno-0-6430" name="__codelineno-0-6430"></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">bins</span><span class="p">)</span>
<a id="__codelineno-0-6431" name="__codelineno-0-6431"></a>        <span class="p">]</span>
<a id="__codelineno-0-6432" name="__codelineno-0-6432"></a>
<a id="__codelineno-0-6433" name="__codelineno-0-6433"></a>        <span class="n">hist</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">GetHistogram</span><span class="p">(</span>
<a id="__codelineno-0-6434" name="__codelineno-0-6434"></a>            <span class="nb">min</span><span class="o">=</span><span class="n">min_value</span><span class="p">,</span>
<a id="__codelineno-0-6435" name="__codelineno-0-6435"></a>            <span class="nb">max</span><span class="o">=</span><span class="n">max_value</span><span class="p">,</span>
<a id="__codelineno-0-6436" name="__codelineno-0-6436"></a>            <span class="n">buckets</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span>
<a id="__codelineno-0-6437" name="__codelineno-0-6437"></a>            <span class="n">include_out_of_range</span><span class="o">=</span><span class="n">include_out_of_range</span><span class="p">,</span>
<a id="__codelineno-0-6438" name="__codelineno-0-6438"></a>            <span class="n">approx_ok</span><span class="o">=</span><span class="n">approx_ok</span><span class="p">,</span>
<a id="__codelineno-0-6439" name="__codelineno-0-6439"></a>        <span class="p">)</span>
<a id="__codelineno-0-6440" name="__codelineno-0-6440"></a>        <span class="k">return</span> <span class="n">hist</span><span class="p">,</span> <span class="n">ranges</span>
<a id="__codelineno-0-6441" name="__codelineno-0-6441"></a>
<a id="__codelineno-0-6442" name="__codelineno-0-6442"></a>    <span class="c1"># def get_coverage(self, band: int = 0, polygon = GeoDataFrame) -&gt; float:</span>
<a id="__codelineno-0-6443" name="__codelineno-0-6443"></a>    <span class="c1">#     &quot;&quot;&quot;get_coverage.</span>
<a id="__codelineno-0-6444" name="__codelineno-0-6444"></a>    <span class="c1">#</span>
<a id="__codelineno-0-6445" name="__codelineno-0-6445"></a>    <span class="c1">#     Args:</span>
<a id="__codelineno-0-6446" name="__codelineno-0-6446"></a>    <span class="c1">#         band: [int], optional</span>
<a id="__codelineno-0-6447" name="__codelineno-0-6447"></a>    <span class="c1">#             band index, Default is 1.</span>
<a id="__codelineno-0-6448" name="__codelineno-0-6448"></a>    <span class="c1">#</span>
<a id="__codelineno-0-6449" name="__codelineno-0-6449"></a>    <span class="c1">#     Returns:</span>
<a id="__codelineno-0-6450" name="__codelineno-0-6450"></a>    <span class="c1">#         [float]</span>
<a id="__codelineno-0-6451" name="__codelineno-0-6451"></a>    <span class="c1">#             percentage of non-zero values.</span>
<a id="__codelineno-0-6452" name="__codelineno-0-6452"></a>    <span class="c1">#     &quot;&quot;&quot;</span>
<a id="__codelineno-0-6453" name="__codelineno-0-6453"></a>    <span class="c1">#     # convert the polygon vertices to array indices using the map_to_array_coordinates method</span>
<a id="__codelineno-0-6454" name="__codelineno-0-6454"></a>    <span class="c1">#     # then use the array indices in the GetDataCoverageStatus</span>
<a id="__codelineno-0-6455" name="__codelineno-0-6455"></a>    <span class="c1">#     #1- get the extent of the polygon</span>
<a id="__codelineno-0-6456" name="__codelineno-0-6456"></a>    <span class="c1">#     #2- convert the extent to array indices</span>
<a id="__codelineno-0-6457" name="__codelineno-0-6457"></a>    <span class="c1">#     arr = Dataset.map_to_array_coordinates()</span>
<a id="__codelineno-0-6458" name="__codelineno-0-6458"></a>    <span class="c1">#     # 3- use the array indices to get the GetDataCoverageStatus method</span>
<a id="__codelineno-0-6459" name="__codelineno-0-6459"></a>    <span class="c1">#     band = self._iloc(band)</span>
<a id="__codelineno-0-6460" name="__codelineno-0-6460"></a>    <span class="c1">#     sampling = 1</span>
<a id="__codelineno-0-6461" name="__codelineno-0-6461"></a>    <span class="c1">#     x_off, y_off =  # the top left corner point of the polygon.</span>
<a id="__codelineno-0-6462" name="__codelineno-0-6462"></a>    <span class="c1">#     flags, percent = band.GetDataCoverageStatus(x_off, y_off, x_size, y_size, sampling)</span>
<a id="__codelineno-0-6463" name="__codelineno-0-6463"></a>    <span class="c1">#     return percent</span>
<a id="__codelineno-0-6464" name="__codelineno-0-6464"></a>
<a id="__codelineno-0-6465" name="__codelineno-0-6465"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">to_xyz</span><span class="p">(</span>
<a id="__codelineno-0-6466" name="__codelineno-0-6466"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">bands</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-6467" name="__codelineno-0-6467"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">DataFrame</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<a id="__codelineno-0-6468" name="__codelineno-0-6468"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert to XYZ.</span>
<a id="__codelineno-0-6469" name="__codelineno-0-6469"></a>
<a id="__codelineno-0-6470" name="__codelineno-0-6470"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-6471" name="__codelineno-0-6471"></a><span class="sd">            path (str, optional):</span>
<a id="__codelineno-0-6472" name="__codelineno-0-6472"></a><span class="sd">                path to the file where the data will be saved. If None, the data will be returned as a DataFrame.</span>
<a id="__codelineno-0-6473" name="__codelineno-0-6473"></a><span class="sd">                default is None.</span>
<a id="__codelineno-0-6474" name="__codelineno-0-6474"></a><span class="sd">            bands (List[int], optional):</span>
<a id="__codelineno-0-6475" name="__codelineno-0-6475"></a><span class="sd">                indices of the bands. If None, all bands will be used. default is None</span>
<a id="__codelineno-0-6476" name="__codelineno-0-6476"></a>
<a id="__codelineno-0-6477" name="__codelineno-0-6477"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-6478" name="__codelineno-0-6478"></a><span class="sd">            DataFrame/File:</span>
<a id="__codelineno-0-6479" name="__codelineno-0-6479"></a><span class="sd">                DataFrame with columns: lon, lat, band_1, band_2,... . If a path is provided the data will be saved to</span>
<a id="__codelineno-0-6480" name="__codelineno-0-6480"></a><span class="sd">                disk as a .xyz file</span>
<a id="__codelineno-0-6481" name="__codelineno-0-6481"></a>
<a id="__codelineno-0-6482" name="__codelineno-0-6482"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-6483" name="__codelineno-0-6483"></a><span class="sd">            - First we will create a dataset from a float32 array with values between 1 and 10, and then we will</span>
<a id="__codelineno-0-6484" name="__codelineno-0-6484"></a><span class="sd">                assign a scale of 0.1 to the dataset.</span>
<a id="__codelineno-0-6485" name="__codelineno-0-6485"></a><span class="sd">                ```python</span>
<a id="__codelineno-0-6486" name="__codelineno-0-6486"></a><span class="sd">                &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-6487" name="__codelineno-0-6487"></a><span class="sd">                &gt;&gt;&gt; arr = np.array([[[1, 2], [3, 4]], [[5, 6], [7, 8]]])</span>
<a id="__codelineno-0-6488" name="__codelineno-0-6488"></a><span class="sd">                &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-6489" name="__codelineno-0-6489"></a><span class="sd">                &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-6490" name="__codelineno-0-6490"></a><span class="sd">                &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,epsg=4326)</span>
<a id="__codelineno-0-6491" name="__codelineno-0-6491"></a><span class="sd">                &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-6492" name="__codelineno-0-6492"></a><span class="sd">                &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-6493" name="__codelineno-0-6493"></a><span class="sd">                            Top Left Corner: (0.0, 0.0)</span>
<a id="__codelineno-0-6494" name="__codelineno-0-6494"></a><span class="sd">                            Cell size: 0.05</span>
<a id="__codelineno-0-6495" name="__codelineno-0-6495"></a><span class="sd">                            Dimension: 2 * 2</span>
<a id="__codelineno-0-6496" name="__codelineno-0-6496"></a><span class="sd">                            EPSG: 4326</span>
<a id="__codelineno-0-6497" name="__codelineno-0-6497"></a><span class="sd">                            Number of Bands: 2</span>
<a id="__codelineno-0-6498" name="__codelineno-0-6498"></a><span class="sd">                            Band names: [&#39;Band_1&#39;, &#39;Band_2&#39;]</span>
<a id="__codelineno-0-6499" name="__codelineno-0-6499"></a><span class="sd">                            Band colors: {0: &#39;undefined&#39;, 1: &#39;undefined&#39;}</span>
<a id="__codelineno-0-6500" name="__codelineno-0-6500"></a><span class="sd">                            Band units: [&#39;&#39;, &#39;&#39;]</span>
<a id="__codelineno-0-6501" name="__codelineno-0-6501"></a><span class="sd">                            Scale: [1.0, 1.0]</span>
<a id="__codelineno-0-6502" name="__codelineno-0-6502"></a><span class="sd">                            Offset: [0, 0]</span>
<a id="__codelineno-0-6503" name="__codelineno-0-6503"></a><span class="sd">                            Mask: -9999.0</span>
<a id="__codelineno-0-6504" name="__codelineno-0-6504"></a><span class="sd">                            Data type: int64</span>
<a id="__codelineno-0-6505" name="__codelineno-0-6505"></a><span class="sd">                            File: ...</span>
<a id="__codelineno-0-6506" name="__codelineno-0-6506"></a><span class="sd">                &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-6507" name="__codelineno-0-6507"></a><span class="sd">                &gt;&gt;&gt; df = dataset.to_xyz()</span>
<a id="__codelineno-0-6508" name="__codelineno-0-6508"></a><span class="sd">                &gt;&gt;&gt; print(df)</span>
<a id="__codelineno-0-6509" name="__codelineno-0-6509"></a><span class="sd">                     lon    lat  Band_1  Band_2</span>
<a id="__codelineno-0-6510" name="__codelineno-0-6510"></a><span class="sd">                0  0.025 -0.025       1       5</span>
<a id="__codelineno-0-6511" name="__codelineno-0-6511"></a><span class="sd">                1  0.075 -0.025       2       6</span>
<a id="__codelineno-0-6512" name="__codelineno-0-6512"></a><span class="sd">                2  0.025 -0.075       3       7</span>
<a id="__codelineno-0-6513" name="__codelineno-0-6513"></a><span class="sd">                3  0.075 -0.075       4       8</span>
<a id="__codelineno-0-6514" name="__codelineno-0-6514"></a><span class="sd">                ```</span>
<a id="__codelineno-0-6515" name="__codelineno-0-6515"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-6516" name="__codelineno-0-6516"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-6517" name="__codelineno-0-6517"></a>            <span class="kn">from</span><span class="w"> </span><span class="nn">osgeo_utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">gdal2xyz</span>
<a id="__codelineno-0-6518" name="__codelineno-0-6518"></a>        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
<a id="__codelineno-0-6519" name="__codelineno-0-6519"></a>            <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
<a id="__codelineno-0-6520" name="__codelineno-0-6520"></a>                <span class="s2">&quot;osgeo_utils is not installed. Install it using pip: pip install osgeo-utils&quot;</span>
<a id="__codelineno-0-6521" name="__codelineno-0-6521"></a>            <span class="p">)</span>
<a id="__codelineno-0-6522" name="__codelineno-0-6522"></a>
<a id="__codelineno-0-6523" name="__codelineno-0-6523"></a>        <span class="k">if</span> <span class="n">bands</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-6524" name="__codelineno-0-6524"></a>            <span class="n">bands</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-6525" name="__codelineno-0-6525"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bands</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
<a id="__codelineno-0-6526" name="__codelineno-0-6526"></a>            <span class="n">bands</span> <span class="o">=</span> <span class="p">[</span><span class="n">bands</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-6527" name="__codelineno-0-6527"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bands</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-6528" name="__codelineno-0-6528"></a>            <span class="n">bands</span> <span class="o">=</span> <span class="p">[</span><span class="n">band</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">band</span> <span class="ow">in</span> <span class="n">bands</span><span class="p">]</span>
<a id="__codelineno-0-6529" name="__codelineno-0-6529"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-6530" name="__codelineno-0-6530"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;bands must be an integer or a list of integers.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-6531" name="__codelineno-0-6531"></a>
<a id="__codelineno-0-6532" name="__codelineno-0-6532"></a>        <span class="n">band_nums</span> <span class="o">=</span> <span class="n">bands</span>
<a id="__codelineno-0-6533" name="__codelineno-0-6533"></a>        <span class="n">arr</span> <span class="o">=</span> <span class="n">gdal2xyz</span><span class="o">.</span><span class="n">gdal2xyz</span><span class="p">(</span>
<a id="__codelineno-0-6534" name="__codelineno-0-6534"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span>
<a id="__codelineno-0-6535" name="__codelineno-0-6535"></a>            <span class="n">path</span><span class="p">,</span>
<a id="__codelineno-0-6536" name="__codelineno-0-6536"></a>            <span class="n">skip_nodata</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-6537" name="__codelineno-0-6537"></a>            <span class="n">return_np_arrays</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-6538" name="__codelineno-0-6538"></a>            <span class="n">band_nums</span><span class="o">=</span><span class="n">band_nums</span><span class="p">,</span>
<a id="__codelineno-0-6539" name="__codelineno-0-6539"></a>        <span class="p">)</span>
<a id="__codelineno-0-6540" name="__codelineno-0-6540"></a>        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-6541" name="__codelineno-0-6541"></a>            <span class="n">band_names</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-6542" name="__codelineno-0-6542"></a>            <span class="k">if</span> <span class="n">bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-6543" name="__codelineno-0-6543"></a>                <span class="k">for</span> <span class="n">band</span> <span class="ow">in</span> <span class="n">bands</span><span class="p">:</span>
<a id="__codelineno-0-6544" name="__codelineno-0-6544"></a>                    <span class="n">band_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_names</span><span class="p">[</span><span class="n">band</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-6545" name="__codelineno-0-6545"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-6546" name="__codelineno-0-6546"></a>                <span class="n">band_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_names</span>
<a id="__codelineno-0-6547" name="__codelineno-0-6547"></a>
<a id="__codelineno-0-6548" name="__codelineno-0-6548"></a>            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;lon&quot;</span><span class="p">,</span> <span class="s2">&quot;lat&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">band_names</span><span class="p">)</span>
<a id="__codelineno-0-6549" name="__codelineno-0-6549"></a>            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;lon&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-6550" name="__codelineno-0-6550"></a>            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-6551" name="__codelineno-0-6551"></a>            <span class="n">df</span><span class="p">[</span><span class="n">band_names</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<a id="__codelineno-0-6552" name="__codelineno-0-6552"></a>            <span class="k">return</span> <span class="n">df</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.access" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.access" class="toclink">
            <code class="highlight language-python"><span class="n">access</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.access" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Access mode.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The access mode of the dataset (read_only/write).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.raster" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.raster" class="toclink">
            <code class="highlight language-python"><span class="n">raster</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.raster" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Base GDAL Dataset.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.values" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.values" class="toclink">
            <code class="highlight language-python"><span class="n">values</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.values" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Values of all the bands.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>np.ndarray:
the values of all the bands in the raster as a 3D numpy array (bands, rows, columns).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.rows" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.rows" class="toclink">
            <code class="highlight language-python"><span class="n">rows</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.rows" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Number of rows in the raster array.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.columns" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.columns" class="toclink">
            <code class="highlight language-python"><span class="n">columns</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.columns" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Number of columns in the raster array.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.shape" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.shape" class="toclink">
            <code class="highlight language-python"><span class="n">shape</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.shape" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Shape (bands, rows, columns).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.geotransform" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.geotransform" class="toclink">
            <code class="highlight language-python"><span class="n">geotransform</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.geotransform" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>WKT projection.</p>
<p>(top left corner X/lon coordinate, cell_size, 0, top left corner y/lat coordinate, 0, -cell_size).</p>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create a dataset:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>To check the geotransform of the dataset, call the <code>geotransform</code> property:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">geotransform</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">)</span>
</code></pre></div>


<details class="see-also" open>
  <summary>See Also</summary>
  <ul>
<li>Dataset.top_left_corner: Coordinate of the top left corner of the dataset.</li>
<li>Dataset.epsg: EPSG number of the dataset coordinate reference system.</li>
</ul>
</details>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.epsg" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.epsg" class="toclink">
            <code class="highlight language-python"><span class="n">epsg</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.epsg" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>EPSG number.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.crs" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.crs" class="toclink">
            <code class="highlight language-python"><span class="n">crs</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.crs" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Coordinate reference system.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the coordinate reference system of the dataset.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create a dataset:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>Now, to check the coordinate reference system, call the <code>crs</code> property:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">GEOGCS</span><span class="p">[</span><span class="s2">&quot;WGS 84&quot;</span><span class="p">,</span><span class="n">DATUM</span><span class="p">[</span><span class="s2">&quot;WGS_1984&quot;</span><span class="p">,</span><span class="n">SPHEROID</span><span class="p">[</span><span class="s2">&quot;WGS 84&quot;</span><span class="p">,</span><span class="mi">6378137</span><span class="p">,</span><span class="mf">298.257223563</span><span class="p">,</span><span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;7030&quot;</span><span class="p">]],</span><span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;6326&quot;</span><span class="p">]],</span><span class="n">PRIMEM</span><span class="p">[</span><span class="s2">&quot;Greenwich&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;8901&quot;</span><span class="p">]],</span><span class="n">UNIT</span><span class="p">[</span><span class="s2">&quot;degree&quot;</span><span class="p">,</span><span class="mf">0.0174532925199433</span><span class="p">,</span><span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;9122&quot;</span><span class="p">]],</span><span class="n">AXIS</span><span class="p">[</span><span class="s2">&quot;Latitude&quot;</span><span class="p">,</span><span class="n">NORTH</span><span class="p">],</span><span class="n">AXIS</span><span class="p">[</span><span class="s2">&quot;Longitude&quot;</span><span class="p">,</span><span class="n">EAST</span><span class="p">],</span><span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;4326&quot;</span><span class="p">]]</span>
</code></pre></div>
        <p>See Also:
    Dataset.set_crs : Set the Coordinate Reference System (CRS).
    Dataset.to_crs : Reproject the dataset to any projection.
    Dataset.epsg : epsg number of the dataset coordinate reference system.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.cell_size" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.cell_size" class="toclink">
            <code class="highlight language-python"><span class="n">cell_size</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.cell_size" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Cell size.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.band_count" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.band_count" class="toclink">
            <code class="highlight language-python"><span class="n">band_count</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.band_count" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Number of bands in the raster.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.band_names" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.band_names" class="toclink">
            <code class="highlight language-python"><span class="n">band_names</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.band_names" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Band names.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.band_units" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.band_units" class="toclink">
            <code class="highlight language-python"><span class="n">band_units</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.band_units" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Band units.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.no_data_value" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.no_data_value" class="toclink">
            <code class="highlight language-python"><span class="n">no_data_value</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.no_data_value" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>No data value that marks the cells out of the domain.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.meta_data" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.meta_data" class="toclink">
            <code class="highlight language-python"><span class="n">meta_data</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.meta_data" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Meta-data.</p>


<details class="hint" open>
  <summary>Hint</summary>
  <ul>
<li>This property does not need the Dataset to be opened in a write mode to be set.</li>
<li>The value of the offset will be stored in an xml file by the name of the raster file with the extension of
    .aux.xml,</li>
</ul>
</details>        <p>the content of the file will be like the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="w">    </span><span class="nt">&lt;PAMDataset&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">      </span><span class="nt">&lt;Metadata&gt;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">        </span><span class="nt">&lt;MDI</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;key&quot;</span><span class="nt">&gt;</span>value<span class="nt">&lt;/MDI&gt;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">      </span><span class="nt">&lt;/Metadata&gt;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="nt">&lt;/PAMDataset&gt;</span>
</code></pre></div>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.block_size" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.block_size" class="toclink">
            <code class="highlight language-python"><span class="n">block_size</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.block_size" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Block Size.</p>
<p>The block size is the size of the block that the raster is divided into, the block size is used to read and
write the raster data in blocks.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create a dataset and print block size:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">block_size</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="p">[[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
</code></pre></div>


<details class="see-also" open>
  <summary>See Also</summary>
  <ul>
<li>Dataset.get_block_arrangement: Get block arrangement to read the dataset in chunks.</li>
<li>Dataset.get_tile: Get tiles.</li>
<li>Dataset.read_array: Read the data stored in the dataset bands.</li>
</ul>
</details>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.file_name" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.file_name" class="toclink">
            <code class="highlight language-python"><span class="n">file_name</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.file_name" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>File name.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.driver_type" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.driver_type" class="toclink">
            <code class="highlight language-python"><span class="n">driver_type</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.driver_type" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Driver Type.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.scale" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.scale" class="toclink">
            <code class="highlight language-python"><span class="n">scale</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.scale" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Scale.</p>
<p>The value of the scale is used to convert the pixel values to the real-world values.</p>


<details class="hint" open>
  <summary>Hint</summary>
  <ul>
<li>This property does not need the Dataset to be opened in a write mode to be set.</li>
<li>The value of the offset will be stored in an xml file by the name of the raster file with the extension of
    .aux.xml.</li>
</ul>
</details>        <p>the content of the file will be like the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="w">    </span><span class="nt">&lt;PAMDataset&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">      </span><span class="nt">&lt;PAMRasterBand</span><span class="w"> </span><span class="na">band=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">        </span><span class="nt">&lt;Description&gt;</span>Band_1<span class="nt">&lt;/Description&gt;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">        </span><span class="nt">&lt;UnitType&gt;</span>m<span class="nt">&lt;/UnitType&gt;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">        </span><span class="nt">&lt;Offset&gt;</span>100<span class="nt">&lt;/Offset&gt;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">        </span><span class="nt">&lt;Scale&gt;</span>2<span class="nt">&lt;/Scale&gt;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">      </span><span class="nt">&lt;/PAMRasterBand&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span><span class="nt">&lt;/PAMDataset&gt;</span>
</code></pre></div>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.offset" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.offset" class="toclink">
            <code class="highlight language-python"><span class="n">offset</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.offset" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Offset.</p>
<p>The value of the offset is used to convert the pixel values to the real-world values.</p>


<details class="hint" open>
  <summary>Hint</summary>
  <ul>
<li>This property does not need the Dataset to be opened in a write mode to be set.</li>
<li>The value of the offset will be stored in xml file by the name of the raster file with the extension of
    .aux.xml.</li>
</ul>
</details>        <p>the content of the file will be like the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="w">    </span><span class="nt">&lt;PAMDataset&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">      </span><span class="nt">&lt;PAMRasterBand</span><span class="w"> </span><span class="na">band=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">        </span><span class="nt">&lt;Description&gt;</span>Band_1<span class="nt">&lt;/Description&gt;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">        </span><span class="nt">&lt;UnitType&gt;</span>m<span class="nt">&lt;/UnitType&gt;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">        </span><span class="nt">&lt;Offset&gt;</span>100<span class="nt">&lt;/Offset&gt;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">        </span><span class="nt">&lt;Scale&gt;</span>2<span class="nt">&lt;/Scale&gt;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">      </span><span class="nt">&lt;/PAMRasterBand&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span><span class="nt">&lt;/PAMDataset&gt;</span>
</code></pre></div>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.top_left_corner" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.top_left_corner" class="toclink">
            <code class="highlight language-python"><span class="n">top_left_corner</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.top_left_corner" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Top left corner coordinates.</p>


<details class="see-also" open>
  <summary>See Also</summary>
  <ul>
<li>Dataset.geotransform: Dataset geotransform.</li>
</ul>
</details>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.bounds" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.bounds" class="toclink">
            <code class="highlight language-python"><span class="n">bounds</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.bounds" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Bounds - the bbox as a geodataframe with a polygon geometry.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create a Dataset (1 band, 10 rows, 10 columns) at lon/lat (0, 0):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>Get the bounds of the dataset:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">bounds</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">bounds</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>                                        <span class="n">geometry</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="mi">0</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mi">0</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">))</span>
</code></pre></div>


<details class="see-also" open>
  <summary>See Also</summary>
  <ul>
<li>Dataset.bbox:
    Dataset bounding box.</li>
</ul>
</details>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.bbox" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.bbox" class="toclink">
            <code class="highlight language-python"><span class="n">bbox</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.bbox" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Bound box [xmin, ymin, xmax, ymax].</p>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create a Dataset (1 band, 10 rows, 10 columns) at lon/lat (0, 0):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>Get the bounding box of the dataset:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">bbox</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">bbox</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
</code></pre></div>


<details class="see-also" open>
  <summary>See Also</summary>
  <ul>
<li>Dataset.bounds: Dataset bounding polygon.</li>
</ul>
</details>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.lon" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.lon" class="toclink">
            <code class="highlight language-python"><span class="n">lon</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.lon" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Longitude coordinates.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>
<p>Create a Dataset (1 band, 5 rows, 5 columns) at lon/lat (0, 0):
  <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div></p>
</li>
<li>
<p>Get the longitude/x coordinates of the center of all cells in the dataset:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">lon</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="p">[</span><span class="mf">0.025</span> <span class="mf">0.075</span> <span class="mf">0.125</span> <span class="mf">0.175</span> <span class="mf">0.225</span><span class="p">]</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="p">[</span><span class="mf">0.025</span> <span class="mf">0.075</span> <span class="mf">0.125</span> <span class="mf">0.175</span> <span class="mf">0.225</span><span class="p">]</span>
</code></pre></div>


<details class="see-also" open>
  <summary>See Also</summary>
  <ul>
<li>Dataset.x: Dataset x coordinates.</li>
<li>Dataset.lat: Dataset latitude.</li>
<li>Dataset.lon: Dataset longitude.</li>
</ul>
</details>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.lat" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.lat" class="toclink">
            <code class="highlight language-python"><span class="n">lat</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.lat" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Latitude-coordinate.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create a Dataset (1 band, 5 rows, 5 columns) at lon/lat (0, 0):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>Get the latitude/y coordinates of the center of all cells in the dataset:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">lat</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="p">[</span><span class="o">-</span><span class="mf">0.025</span> <span class="o">-</span><span class="mf">0.075</span> <span class="o">-</span><span class="mf">0.125</span> <span class="o">-</span><span class="mf">0.175</span> <span class="o">-</span><span class="mf">0.225</span><span class="p">]</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="p">[</span><span class="o">-</span><span class="mf">0.025</span> <span class="o">-</span><span class="mf">0.075</span> <span class="o">-</span><span class="mf">0.125</span> <span class="o">-</span><span class="mf">0.175</span> <span class="o">-</span><span class="mf">0.225</span><span class="p">]</span>
</code></pre></div>


<details class="see-also" open>
  <summary>See Also</summary>
  <ul>
<li>Dataset.x: Dataset x coordinates.</li>
<li>Dataset.y: Dataset y coordinates.</li>
<li>Dataset.lon: Dataset longitude.</li>
</ul>
</details>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.x" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.x" class="toclink">
            <code class="highlight language-python"><span class="n">x</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.x" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>X-coordinate/Longitude.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create <code>Dataset</code> consists of 1 band, 5 rows, 5 columns, at the point lon/lat (0, 0).</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>To get the longitude/x coordinates of the center of all cells in the dataset.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">lon</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="p">[</span><span class="mf">0.025</span> <span class="mf">0.075</span> <span class="mf">0.125</span> <span class="mf">0.175</span> <span class="mf">0.225</span><span class="p">]</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="p">[</span><span class="mf">0.025</span> <span class="mf">0.075</span> <span class="mf">0.125</span> <span class="mf">0.175</span> <span class="mf">0.225</span><span class="p">]</span>
</code></pre></div>


<details class="see-also" open>
  <summary>See Also</summary>
  <ul>
<li>Dataset.lat: Dataset latitude.</li>
<li>Dataset.y: Dataset y coordinates.</li>
<li>Dataset.lon: Dataset longitude.</li>
</ul>
</details>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.y" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.y" class="toclink">
            <code class="highlight language-python"><span class="n">y</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.y" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Y-coordinate/Latitude.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create <code>Dataset</code> consists of 1 band, 5 rows, 5 columns, at the point lon/lat (0, 0).</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>to get the longitude/x coordinates of the center of all cells in the dataset.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">lat</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="p">[</span><span class="o">-</span><span class="mf">0.025</span> <span class="o">-</span><span class="mf">0.075</span> <span class="o">-</span><span class="mf">0.125</span> <span class="o">-</span><span class="mf">0.175</span> <span class="o">-</span><span class="mf">0.225</span><span class="p">]</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="p">[</span><span class="o">-</span><span class="mf">0.025</span> <span class="o">-</span><span class="mf">0.075</span> <span class="o">-</span><span class="mf">0.125</span> <span class="o">-</span><span class="mf">0.175</span> <span class="o">-</span><span class="mf">0.225</span><span class="p">]</span>
</code></pre></div>


<details class="see-also" open>
  <summary>See Also</summary>
  <ul>
<li>Dataset.x: Dataset y coordinates.</li>
<li>Dataset.lat: Dataset latitude.</li>
<li>Dataset.lon: Dataset longitude.</li>
</ul>
</details>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.gdal_dtype" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.gdal_dtype" class="toclink">
            <code class="highlight language-python"><span class="n">gdal_dtype</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.gdal_dtype" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Data Type.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.numpy_dtype" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.numpy_dtype" class="toclink">
            <code class="highlight language-python"><span class="n">numpy_dtype</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.numpy_dtype" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>List of the numpy data Type of each band, the data type is a numpy function.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.dtype" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.dtype" class="toclink">
            <code class="highlight language-python"><span class="n">dtype</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.dtype" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>List of the data Type of each band as strings.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.overview_count" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.overview_count" class="toclink">
            <code class="highlight language-python"><span class="n">overview_count</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.overview_count" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Number of the overviews for each band.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.band_color" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.band_color" class="toclink">
            <code class="highlight language-python"><span class="n">band_color</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.band_color" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Band colors.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="pyramids.dataset.Dataset.color_table" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.color_table" class="toclink">
            <code class="highlight language-python"><span class="n">color_table</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.color_table" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Color table.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DataFrame</code></td>            <td>
                  <code><span title="geopandas.geodataframe.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A DataFrame with columns: band, values, color.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create <code>Dataset</code> consisting of 4 bands, 10 rows, 10 columns, at lon/lat (0, 0):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>Set color table for band 1:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">color_table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">...</span>     <span class="s2">&quot;band&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="o">...</span>     <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="o">...</span>     <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;#709959&quot;</span><span class="p">,</span> <span class="s2">&quot;#F2EEA2&quot;</span><span class="p">,</span> <span class="s2">&quot;#F2CE85&quot;</span><span class="p">,</span> <span class="s2">&quot;#C28C7C&quot;</span><span class="p">,</span> <span class="s2">&quot;#D6C19C&quot;</span><span class="p">,</span> <span class="s2">&quot;#D6C19C&quot;</span><span class="p">]</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="o">...</span> <span class="p">})</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">color_table</span> <span class="o">=</span> <span class="n">color_table</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">color_table</span><span class="p">)</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>  <span class="n">band</span> <span class="n">values</span>  <span class="n">red</span> <span class="n">green</span> <span class="n">blue</span> <span class="n">alpha</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="mi">0</span>    <span class="mi">1</span>      <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="mi">1</span>    <span class="mi">1</span>      <span class="mi">1</span>  <span class="mi">112</span>   <span class="mi">153</span>   <span class="mi">89</span>   <span class="mi">255</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="mi">2</span>    <span class="mi">1</span>      <span class="mi">2</span>  <span class="mi">242</span>   <span class="mi">238</span>  <span class="mi">162</span>   <span class="mi">255</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="mi">3</span>    <span class="mi">1</span>      <span class="mi">3</span>  <span class="mi">242</span>   <span class="mi">206</span>  <span class="mi">133</span>   <span class="mi">255</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="mi">4</span>    <span class="mi">2</span>      <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="mi">5</span>    <span class="mi">2</span>      <span class="mi">1</span>  <span class="mi">194</span>   <span class="mi">140</span>  <span class="mi">124</span>   <span class="mi">255</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="mi">6</span>    <span class="mi">2</span>      <span class="mi">2</span>  <span class="mi">214</span>   <span class="mi">193</span>  <span class="mi">156</span>   <span class="mi">255</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="mi">7</span>    <span class="mi">2</span>      <span class="mi">3</span>  <span class="mi">214</span>   <span class="mi">193</span>  <span class="mi">156</span>   <span class="mi">255</span>
</code></pre></div>
<ul>
<li>Define opacity per color by adding an 'alpha' column (0 transparent to 255 opaque). If 'alpha' is missing,
  it will be assumed fully opaque (255):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">color_table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="o">...</span>     <span class="s2">&quot;band&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="o">...</span>     <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="o">...</span>     <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;#709959&quot;</span><span class="p">,</span> <span class="s2">&quot;#F2EEA2&quot;</span><span class="p">,</span> <span class="s2">&quot;#F2CE85&quot;</span><span class="p">,</span> <span class="s2">&quot;#C28C7C&quot;</span><span class="p">,</span> <span class="s2">&quot;#D6C19C&quot;</span><span class="p">,</span> <span class="s2">&quot;#D6C19C&quot;</span><span class="p">],</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="o">...</span>     <span class="s2">&quot;alpha&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="o">...</span> <span class="p">})</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">color_table</span> <span class="o">=</span> <span class="n">color_table</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">color_table</span><span class="p">)</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>  <span class="n">band</span> <span class="n">values</span>  <span class="n">red</span> <span class="n">green</span> <span class="n">blue</span> <span class="n">alpha</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="mi">0</span>    <span class="mi">1</span>      <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="mi">1</span>    <span class="mi">1</span>      <span class="mi">1</span>  <span class="mi">112</span>   <span class="mi">153</span>   <span class="mi">89</span>   <span class="mi">255</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="mi">2</span>    <span class="mi">1</span>      <span class="mi">2</span>  <span class="mi">242</span>   <span class="mi">238</span>  <span class="mi">162</span>   <span class="mi">128</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="mi">3</span>    <span class="mi">1</span>      <span class="mi">3</span>  <span class="mi">242</span>   <span class="mi">206</span>  <span class="mi">133</span>     <span class="mi">0</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="mi">4</span>    <span class="mi">2</span>      <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="mi">5</span>    <span class="mi">2</span>      <span class="mi">1</span>  <span class="mi">194</span>   <span class="mi">140</span>  <span class="mi">124</span>   <span class="mi">255</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="mi">6</span>    <span class="mi">2</span>      <span class="mi">2</span>  <span class="mi">214</span>   <span class="mi">193</span>  <span class="mi">156</span>   <span class="mi">128</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="mi">7</span>    <span class="mi">2</span>      <span class="mi">3</span>  <span class="mi">214</span>   <span class="mi">193</span>  <span class="mi">156</span>     <span class="mi">0</span>
</code></pre></div>

    </div>

</div>




<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.__init__" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.__init__" class="toclink">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">access</span><span class="o">=</span><span class="s1">&#39;read_only&#39;</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.__init__" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p><strong>init</strong>.</p>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">src</span><span class="p">:</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Dataset</span><span class="p">,</span> <span class="n">access</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;read_only&quot;</span><span class="p">):</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;__init__.&quot;&quot;&quot;</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">access</span><span class="o">=</span><span class="n">access</span><span class="p">)</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_no_data_value</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>        <span class="n">src</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">GetNoDataValue</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>    <span class="p">]</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_band_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_band_names</span><span class="p">()</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_band_units</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>        <span class="n">src</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">GetUnitType</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>    <span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.__str__" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.__str__" class="toclink">
            <code class="highlight language-python"><span class="fm">__str__</span><span class="p">()</span></code>

</a><a href="#pyramids.dataset.Dataset.__str__" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p><strong>str</strong>.</p>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span>
<span class="normal"><a href="#__codelineno-0-85">85</a></span>
<span class="normal"><a href="#__codelineno-0-86">86</a></span>
<span class="normal"><a href="#__codelineno-0-87">87</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;__str__.&quot;&quot;&quot;</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>    <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="s2">        Top Left Corner: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">top_left_corner</span><span class="si">}</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="s2">        Cell size: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cell_size</span><span class="si">}</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a><span class="s2">        Dimension: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">rows</span><span class="si">}</span><span class="s2"> * </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="si">}</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a><span class="s2">        EPSG: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">epsg</span><span class="si">}</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a><span class="s2">        Number of Bands: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="si">}</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="s2">        Band names: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">band_names</span><span class="si">}</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="s2">        Band colors: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">band_color</span><span class="si">}</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="s2">        Band units: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">band_units</span><span class="si">}</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a><span class="s2">        Scale: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="si">}</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a><span class="s2">        Offset: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="si">}</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a><span class="s2">        Mask: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="s2">        Data type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="s2">        File: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">file_name</span><span class="si">}</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="s2">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>    <span class="k">return</span> <span class="n">message</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.__repr__" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.__repr__" class="toclink">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

</a><a href="#pyramids.dataset.Dataset.__repr__" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p><strong>repr</strong>.</p>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-89">89</a></span>
<span class="normal"><a href="#__codelineno-0-90">90</a></span>
<span class="normal"><a href="#__codelineno-0-91">91</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;__repr__.&quot;&quot;&quot;</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>    <span class="k">return</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Info</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.read_file" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.read_file" class="toclink">
            <code class="highlight language-python"><span class="n">read_file</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">file_i</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.read_file" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>read_file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path of file to open.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>read_only</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>File mode, set to False, to open in "update" mode.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_i</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index to the file inside the compressed file you want to read, if the compressed file has only one file. Default is 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Dataset</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;pyramids.dataset.Dataset&lt;/code&gt;" href="#pyramids.dataset.Dataset">Dataset</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Opened dataset instance.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Zip files:
- Internal Zip file path (one/multiple files inside the compressed file):
    if the path contains a zip but does not end with zip (compressed-file-name.zip/1.asc), so the path contains
        the internal path inside the zip file, so just ad</p>
<div class="highlight"><pre><span></span><code>```python
&gt;&gt;&gt; rdir = &quot;tests/data/virtual-file-system&quot;
&gt;&gt;&gt; dataset = Dataset.read_file(f&quot;{rdir}/multiple_compressed_files.zip/1.asc&quot;)
&gt;&gt;&gt; print(dataset)
&lt;BLANKLINE&gt;
            Cell size: 4000.0
            Dimension: 13 * 14
            EPSG: 4326
            Number of Bands: 1
            Band names: [&#39;Band_1&#39;]
            Mask: -3.4028230607370965e+38
            Data type: float32
            File: /vsizip/tests/data/virtual-file-system/multiple_compressed_files.zip/1.asc
&lt;BLANKLINE&gt;

```
</code></pre></div>
<ul>
<li>
<p>Only the Zip file path (one/multiple files inside the compressed file):
    If you provide the name of the zip file with multiple files inside it, it will return the path to the first
    file.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rdir</span><span class="si">}</span><span class="s2">/multiple_compressed_files.zip&quot;</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">4000.0</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">13</span> <span class="o">*</span> <span class="mi">14</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">4326</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">1</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">]</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">3.4028230607370965e+38</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">float32</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>            <span class="n">File</span><span class="p">:</span> <span class="o">/</span><span class="n">vsizip</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">virtual</span><span class="o">-</span><span class="n">file</span><span class="o">-</span><span class="n">system</span><span class="o">/</span><span class="n">multiple_compressed_files</span><span class="o">.</span><span class="n">zip</span><span class="o">/</span><span class="mf">1.</span><span class="n">asc</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
</code></pre></div>
</li>
<li>
<p>Zip file path and an index (one/multiple files inside the compressed file):
    if you provide the path to the zip file and an index to the file inside the compressed file you want to
    read.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rdir</span><span class="si">}</span><span class="s2">/multiple_compressed_files.zip&quot;</span><span class="p">,</span> <span class="n">file_i</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">4000.0</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">13</span> <span class="o">*</span> <span class="mi">14</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">4326</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">1</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">]</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">3.4028230607370965e+38</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">float32</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>            <span class="n">File</span><span class="p">:</span> <span class="o">/</span><span class="n">vsizip</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">virtual</span><span class="o">-</span><span class="n">file</span><span class="o">-</span><span class="n">system</span><span class="o">/</span><span class="n">multiple_compressed_files</span><span class="o">.</span><span class="n">zip</span><span class="o">/</span><span class="mf">2.</span><span class="n">asc</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
</code></pre></div>
</li>
</ul>
        <p>Virtual files:
    - You can open files stored online simply by using the full url to the file with the <code>read_file</code> method.
        <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/31/U/FU/2020/3/S2A_31UFU_20200328_0_L2A/B01.tif&quot;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>            <span class="n">Top</span> <span class="n">Left</span> <span class="n">Corner</span><span class="p">:</span> <span class="p">(</span><span class="mf">600000.0</span><span class="p">,</span> <span class="mf">5900040.0</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">60.0</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">1830</span> <span class="o">*</span> <span class="mi">1830</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">32631</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">1</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">]</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>            <span class="n">Band</span> <span class="n">colors</span><span class="p">:</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;gray_index&#39;</span><span class="p">}</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>            <span class="n">Band</span> <span class="n">units</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>            <span class="n">Scale</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>            <span class="n">Offset</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="mf">0.0</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">uint16</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>            <span class="n">File</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">sentinel</span><span class="o">-</span><span class="n">cogs</span><span class="o">.</span><span class="n">s3</span><span class="o">.</span><span class="n">us</span><span class="o">-</span><span class="n">west</span><span class="o">-</span><span class="mf">2.</span><span class="n">amazonaws</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">sentinel</span><span class="o">-</span><span class="n">s2</span><span class="o">-</span><span class="n">l2a</span><span class="o">-</span><span class="n">cogs</span><span class="o">/</span><span class="mi">31</span><span class="o">/</span><span class="n">U</span><span class="o">/</span><span class="n">FU</span><span class="o">/</span><span class="mi">2020</span><span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="n">S2A_31UFU_20200328_0_L2A</span><span class="o">/</span><span class="n">B01</span><span class="o">.</span><span class="n">tif</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
</code></pre></div>
See Also:
    - Dataset.read_array: Read the values stored in a dataset band.</p>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-451">451</a></span>
<span class="normal"><a href="#__codelineno-0-452">452</a></span>
<span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span>
<span class="normal"><a href="#__codelineno-0-456">456</a></span>
<span class="normal"><a href="#__codelineno-0-457">457</a></span>
<span class="normal"><a href="#__codelineno-0-458">458</a></span>
<span class="normal"><a href="#__codelineno-0-459">459</a></span>
<span class="normal"><a href="#__codelineno-0-460">460</a></span>
<span class="normal"><a href="#__codelineno-0-461">461</a></span>
<span class="normal"><a href="#__codelineno-0-462">462</a></span>
<span class="normal"><a href="#__codelineno-0-463">463</a></span>
<span class="normal"><a href="#__codelineno-0-464">464</a></span>
<span class="normal"><a href="#__codelineno-0-465">465</a></span>
<span class="normal"><a href="#__codelineno-0-466">466</a></span>
<span class="normal"><a href="#__codelineno-0-467">467</a></span>
<span class="normal"><a href="#__codelineno-0-468">468</a></span>
<span class="normal"><a href="#__codelineno-0-469">469</a></span>
<span class="normal"><a href="#__codelineno-0-470">470</a></span>
<span class="normal"><a href="#__codelineno-0-471">471</a></span>
<span class="normal"><a href="#__codelineno-0-472">472</a></span>
<span class="normal"><a href="#__codelineno-0-473">473</a></span>
<span class="normal"><a href="#__codelineno-0-474">474</a></span>
<span class="normal"><a href="#__codelineno-0-475">475</a></span>
<span class="normal"><a href="#__codelineno-0-476">476</a></span>
<span class="normal"><a href="#__codelineno-0-477">477</a></span>
<span class="normal"><a href="#__codelineno-0-478">478</a></span>
<span class="normal"><a href="#__codelineno-0-479">479</a></span>
<span class="normal"><a href="#__codelineno-0-480">480</a></span>
<span class="normal"><a href="#__codelineno-0-481">481</a></span>
<span class="normal"><a href="#__codelineno-0-482">482</a></span>
<span class="normal"><a href="#__codelineno-0-483">483</a></span>
<span class="normal"><a href="#__codelineno-0-484">484</a></span>
<span class="normal"><a href="#__codelineno-0-485">485</a></span>
<span class="normal"><a href="#__codelineno-0-486">486</a></span>
<span class="normal"><a href="#__codelineno-0-487">487</a></span>
<span class="normal"><a href="#__codelineno-0-488">488</a></span>
<span class="normal"><a href="#__codelineno-0-489">489</a></span>
<span class="normal"><a href="#__codelineno-0-490">490</a></span>
<span class="normal"><a href="#__codelineno-0-491">491</a></span>
<span class="normal"><a href="#__codelineno-0-492">492</a></span>
<span class="normal"><a href="#__codelineno-0-493">493</a></span>
<span class="normal"><a href="#__codelineno-0-494">494</a></span>
<span class="normal"><a href="#__codelineno-0-495">495</a></span>
<span class="normal"><a href="#__codelineno-0-496">496</a></span>
<span class="normal"><a href="#__codelineno-0-497">497</a></span>
<span class="normal"><a href="#__codelineno-0-498">498</a></span>
<span class="normal"><a href="#__codelineno-0-499">499</a></span>
<span class="normal"><a href="#__codelineno-0-500">500</a></span>
<span class="normal"><a href="#__codelineno-0-501">501</a></span>
<span class="normal"><a href="#__codelineno-0-502">502</a></span>
<span class="normal"><a href="#__codelineno-0-503">503</a></span>
<span class="normal"><a href="#__codelineno-0-504">504</a></span>
<span class="normal"><a href="#__codelineno-0-505">505</a></span>
<span class="normal"><a href="#__codelineno-0-506">506</a></span>
<span class="normal"><a href="#__codelineno-0-507">507</a></span>
<span class="normal"><a href="#__codelineno-0-508">508</a></span>
<span class="normal"><a href="#__codelineno-0-509">509</a></span>
<span class="normal"><a href="#__codelineno-0-510">510</a></span>
<span class="normal"><a href="#__codelineno-0-511">511</a></span>
<span class="normal"><a href="#__codelineno-0-512">512</a></span>
<span class="normal"><a href="#__codelineno-0-513">513</a></span>
<span class="normal"><a href="#__codelineno-0-514">514</a></span>
<span class="normal"><a href="#__codelineno-0-515">515</a></span>
<span class="normal"><a href="#__codelineno-0-516">516</a></span>
<span class="normal"><a href="#__codelineno-0-517">517</a></span>
<span class="normal"><a href="#__codelineno-0-518">518</a></span>
<span class="normal"><a href="#__codelineno-0-519">519</a></span>
<span class="normal"><a href="#__codelineno-0-520">520</a></span>
<span class="normal"><a href="#__codelineno-0-521">521</a></span>
<span class="normal"><a href="#__codelineno-0-522">522</a></span>
<span class="normal"><a href="#__codelineno-0-523">523</a></span>
<span class="normal"><a href="#__codelineno-0-524">524</a></span>
<span class="normal"><a href="#__codelineno-0-525">525</a></span>
<span class="normal"><a href="#__codelineno-0-526">526</a></span>
<span class="normal"><a href="#__codelineno-0-527">527</a></span>
<span class="normal"><a href="#__codelineno-0-528">528</a></span>
<span class="normal"><a href="#__codelineno-0-529">529</a></span>
<span class="normal"><a href="#__codelineno-0-530">530</a></span>
<span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span>
<span class="normal"><a href="#__codelineno-0-533">533</a></span>
<span class="normal"><a href="#__codelineno-0-534">534</a></span>
<span class="normal"><a href="#__codelineno-0-535">535</a></span>
<span class="normal"><a href="#__codelineno-0-536">536</a></span>
<span class="normal"><a href="#__codelineno-0-537">537</a></span>
<span class="normal"><a href="#__codelineno-0-538">538</a></span>
<span class="normal"><a href="#__codelineno-0-539">539</a></span>
<span class="normal"><a href="#__codelineno-0-540">540</a></span>
<span class="normal"><a href="#__codelineno-0-541">541</a></span>
<span class="normal"><a href="#__codelineno-0-542">542</a></span>
<span class="normal"><a href="#__codelineno-0-543">543</a></span>
<span class="normal"><a href="#__codelineno-0-544">544</a></span>
<span class="normal"><a href="#__codelineno-0-545">545</a></span>
<span class="normal"><a href="#__codelineno-0-546">546</a></span>
<span class="normal"><a href="#__codelineno-0-547">547</a></span>
<span class="normal"><a href="#__codelineno-0-548">548</a></span>
<span class="normal"><a href="#__codelineno-0-549">549</a></span>
<span class="normal"><a href="#__codelineno-0-550">550</a></span>
<span class="normal"><a href="#__codelineno-0-551">551</a></span>
<span class="normal"><a href="#__codelineno-0-552">552</a></span>
<span class="normal"><a href="#__codelineno-0-553">553</a></span>
<span class="normal"><a href="#__codelineno-0-554">554</a></span>
<span class="normal"><a href="#__codelineno-0-555">555</a></span>
<span class="normal"><a href="#__codelineno-0-556">556</a></span>
<span class="normal"><a href="#__codelineno-0-557">557</a></span>
<span class="normal"><a href="#__codelineno-0-558">558</a></span>
<span class="normal"><a href="#__codelineno-0-559">559</a></span>
<span class="normal"><a href="#__codelineno-0-560">560</a></span>
<span class="normal"><a href="#__codelineno-0-561">561</a></span>
<span class="normal"><a href="#__codelineno-0-562">562</a></span>
<span class="normal"><a href="#__codelineno-0-563">563</a></span>
<span class="normal"><a href="#__codelineno-0-564">564</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-451" name="__codelineno-0-451"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a><span class="k">def</span><span class="w"> </span><span class="nf">read_file</span><span class="p">(</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a>    <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a>    <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a>    <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a>    <span class="n">file_i</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;read_file.</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a><span class="sd">        path (str):</span>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a><span class="sd">            Path of file to open.</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a><span class="sd">        read_only (bool):</span>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a><span class="sd">            File mode, set to False, to open in &quot;update&quot; mode.</span>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a><span class="sd">        file_i (int):</span>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a><span class="sd">            Index to the file inside the compressed file you want to read, if the compressed file has only one file. Default is 0.</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a><span class="sd">        Dataset:</span>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a><span class="sd">            Opened dataset instance.</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a><span class="sd">        Zip files:</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a><span class="sd">        - Internal Zip file path (one/multiple files inside the compressed file):</span>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a><span class="sd">            if the path contains a zip but does not end with zip (compressed-file-name.zip/1.asc), so the path contains</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a><span class="sd">                the internal path inside the zip file, so just ad</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a><span class="sd">            ```python</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a><span class="sd">            &gt;&gt;&gt; rdir = &quot;tests/data/virtual-file-system&quot;</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a><span class="sd">            &gt;&gt;&gt; dataset = Dataset.read_file(f&quot;{rdir}/multiple_compressed_files.zip/1.asc&quot;)</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a><span class="sd">            &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a><span class="sd">            &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a><span class="sd">                        Cell size: 4000.0</span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a><span class="sd">                        Dimension: 13 * 14</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a><span class="sd">                        EPSG: 4326</span>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a><span class="sd">                        Number of Bands: 1</span>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a><span class="sd">                        Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a><span class="sd">                        Mask: -3.4028230607370965e+38</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a><span class="sd">                        Data type: float32</span>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a><span class="sd">                        File: /vsizip/tests/data/virtual-file-system/multiple_compressed_files.zip/1.asc</span>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a><span class="sd">            &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a><span class="sd">            ```</span>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a><span class="sd">        - Only the Zip file path (one/multiple files inside the compressed file):</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a><span class="sd">            If you provide the name of the zip file with multiple files inside it, it will return the path to the first</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a><span class="sd">            file.</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a><span class="sd">            ```python</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a><span class="sd">            &gt;&gt;&gt; dataset = Dataset.read_file(f&quot;{rdir}/multiple_compressed_files.zip&quot;)</span>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a><span class="sd">            &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a><span class="sd">            &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a><span class="sd">                        Cell size: 4000.0</span>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a><span class="sd">                        Dimension: 13 * 14</span>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a><span class="sd">                        EPSG: 4326</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a><span class="sd">                        Number of Bands: 1</span>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a><span class="sd">                        Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a><span class="sd">                        Mask: -3.4028230607370965e+38</span>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a><span class="sd">                        Data type: float32</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a><span class="sd">                        File: /vsizip/tests/data/virtual-file-system/multiple_compressed_files.zip/1.asc</span>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a><span class="sd">            &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a><span class="sd">            ```</span>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a><span class="sd">        - Zip file path and an index (one/multiple files inside the compressed file):</span>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a><span class="sd">            if you provide the path to the zip file and an index to the file inside the compressed file you want to</span>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a><span class="sd">            read.</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a><span class="sd">            ```python</span>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a><span class="sd">            &gt;&gt;&gt; dataset = Dataset.read_file(f&quot;{rdir}/multiple_compressed_files.zip&quot;, file_i=1)</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a><span class="sd">            &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a><span class="sd">            &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a><span class="sd">                        Cell size: 4000.0</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a><span class="sd">                        Dimension: 13 * 14</span>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a><span class="sd">                        EPSG: 4326</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a><span class="sd">                        Number of Bands: 1</span>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a><span class="sd">                        Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a><span class="sd">                        Mask: -3.4028230607370965e+38</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a><span class="sd">                        Data type: float32</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a><span class="sd">                        File: /vsizip/tests/data/virtual-file-system/multiple_compressed_files.zip/2.asc</span>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a><span class="sd">            &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a><span class="sd">            ```</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a><span class="sd">    Virtual files:</span>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a><span class="sd">        - You can open files stored online simply by using the full url to the file with the `read_file` method.</span>
<a id="__codelineno-0-539" name="__codelineno-0-539"></a><span class="sd">            ```python</span>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a><span class="sd">            &gt;&gt;&gt; url = &quot;https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/31/U/FU/2020/3/S2A_31UFU_20200328_0_L2A/B01.tif&quot;</span>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a><span class="sd">            &gt;&gt;&gt; dataset = Dataset.read_file(url)</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a><span class="sd">            &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a><span class="sd">            &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a><span class="sd">                        Top Left Corner: (600000.0, 5900040.0)</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a><span class="sd">                        Cell size: 60.0</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a><span class="sd">                        Dimension: 1830 * 1830</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a><span class="sd">                        EPSG: 32631</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a><span class="sd">                        Number of Bands: 1</span>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a><span class="sd">                        Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a><span class="sd">                        Band colors: {0: &#39;gray_index&#39;}</span>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a><span class="sd">                        Band units: [&#39;&#39;]</span>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a><span class="sd">                        Scale: [1.0]</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a><span class="sd">                        Offset: [0]</span>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a><span class="sd">                        Mask: 0.0</span>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a><span class="sd">                        Data type: uint16</span>
<a id="__codelineno-0-556" name="__codelineno-0-556"></a><span class="sd">                        File: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/31/U/FU/2020/3/S2A_31UFU_20200328_0_L2A/B01.tif</span>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a><span class="sd">            &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a><span class="sd">            ```</span>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a><span class="sd">    See Also:</span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a><span class="sd">        - Dataset.read_array: Read the values stored in a dataset band.</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a>    <span class="n">src</span> <span class="o">=</span> <span class="n">_io</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="n">read_only</span><span class="p">,</span> <span class="n">file_i</span><span class="o">=</span><span class="n">file_i</span><span class="p">)</span>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">access</span><span class="o">=</span><span class="s2">&quot;read_only&quot;</span> <span class="k">if</span> <span class="n">read_only</span> <span class="k">else</span> <span class="s2">&quot;write&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.read_array" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.read_array" class="toclink">
            <code class="highlight language-python"><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.read_array" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Read the values stored in a given band.</p>
<p>Data Chuncks/blocks
    When a raster dataset is stored on disk, it might not be stored as one continuous chunk of data. Instead,
    it can be divided into smaller rectangular blocks or tiles. These blocks can be individually accessed,
    which is particularly useful for large datasets:</p>
<div class="highlight"><pre><span></span><code>    - Efficiency: Reading or writing small blocks requires less memory than dealing with the entire dataset
          at once. This is especially beneficial when only a small portion of the data needs to be processed.
    - Performance: For certain file formats and operations, working with optimal block sizes can significantly
          improve performance. For example, if the block size matches the reading or processing window,
          Pyramids can minimize disk access and data transfer.
</code></pre></div>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>band</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The band you want to get its data. If None, data of all bands will be read. Default is None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>window</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="int">int</span>] | <span title="geopandas.geodataframe.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Specify a block of data to read from the dataset. The window can be specified in two ways:</p>
<ul>
<li>
<p>List:
    Window specified as a list of 4 integers [offset_x, offset_y, window_columns, window_rows].</p>
<ul>
<li>offset_x/column index: x offset of the block.</li>
<li>offset_y/row index: y offset of the block.</li>
<li>window_columns: number of columns in the block.</li>
<li>window_rows: number of rows in the block.</li>
</ul>
</li>
<li>
<p>GeoDataFrame:
    GeoDataFrame with a geometry column filled with polygon geometries; the function will get the
    total_bounds of the GeoDataFrame and use it as a window to read the raster.</p>
</li>
</ul>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>np.ndarray:
array with all the values in the raster.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create <code>Dataset</code> consisting of 4 bands, 5 rows, and 5 columns at the point lon/lat (0, 0):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>Read all the values stored in a given band:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">array</span><span class="p">([[</span><span class="mf">0.50482225</span><span class="p">,</span> <span class="mf">0.45678043</span><span class="p">,</span> <span class="mf">0.53294294</span><span class="p">,</span> <span class="mf">0.28862223</span><span class="p">,</span> <span class="mf">0.66753579</span><span class="p">],</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>       <span class="p">[</span><span class="mf">0.38471912</span><span class="p">,</span> <span class="mf">0.14617829</span><span class="p">,</span> <span class="mf">0.05045189</span><span class="p">,</span> <span class="mf">0.00761358</span><span class="p">,</span> <span class="mf">0.25501918</span><span class="p">],</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>       <span class="p">[</span><span class="mf">0.32689036</span><span class="p">,</span> <span class="mf">0.37358843</span><span class="p">,</span> <span class="mf">0.32233918</span><span class="p">,</span> <span class="mf">0.75450564</span><span class="p">,</span> <span class="mf">0.45197608</span><span class="p">],</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>       <span class="p">[</span><span class="mf">0.22944676</span><span class="p">,</span> <span class="mf">0.2780928</span> <span class="p">,</span> <span class="mf">0.71605189</span><span class="p">,</span> <span class="mf">0.71859309</span><span class="p">,</span> <span class="mf">0.61896933</span><span class="p">],</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>       <span class="p">[</span><span class="mf">0.47740168</span><span class="p">,</span> <span class="mf">0.76490779</span><span class="p">,</span> <span class="mf">0.07679277</span><span class="p">,</span> <span class="mf">0.16142599</span><span class="p">,</span> <span class="mf">0.73630836</span><span class="p">]])</span>
</code></pre></div>
<ul>
<li>Read a 2x2 block from the first band. The block starts at the 2nd column (index 1) and 2nd row (index 1)
    (the first index is the column index):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="n">array</span><span class="p">([[</span><span class="mf">0.14617829</span><span class="p">,</span> <span class="mf">0.05045189</span><span class="p">],</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>       <span class="p">[</span><span class="mf">0.37358843</span><span class="p">,</span> <span class="mf">0.32233918</span><span class="p">]])</span>
</code></pre></div>
<ul>
<li>
<p>If you check the values of the 2x2 block, you will find them the same as the values in the entire array
    of band 0, starting at the 2nd row and 2nd column.</p>
</li>
<li>
<p>Read a block using a GeoDataFrame polygon that covers the same area as the window above:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">shapely.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Polygon</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">poly</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">geometry</span><span class="o">=</span><span class="p">[</span><span class="n">Polygon</span><span class="p">([(</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">)])],</span> <span class="n">crs</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="n">poly</span><span class="p">)</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="n">array</span><span class="p">([[</span><span class="mf">0.14617829</span><span class="p">,</span> <span class="mf">0.05045189</span><span class="p">],</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>       <span class="p">[</span><span class="mf">0.37358843</span><span class="p">,</span> <span class="mf">0.32233918</span><span class="p">]])</span>
</code></pre></div>


<details class="see-also" open>
  <summary>See Also</summary>
  <ul>
<li>Dataset.get_tile: Read the dataset in chunks.</li>
<li>Dataset.get_block_arrangement: Get block arrangement to read the dataset in chunks.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-566">566</a></span>
<span class="normal"><a href="#__codelineno-0-567">567</a></span>
<span class="normal"><a href="#__codelineno-0-568">568</a></span>
<span class="normal"><a href="#__codelineno-0-569">569</a></span>
<span class="normal"><a href="#__codelineno-0-570">570</a></span>
<span class="normal"><a href="#__codelineno-0-571">571</a></span>
<span class="normal"><a href="#__codelineno-0-572">572</a></span>
<span class="normal"><a href="#__codelineno-0-573">573</a></span>
<span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span>
<span class="normal"><a href="#__codelineno-0-578">578</a></span>
<span class="normal"><a href="#__codelineno-0-579">579</a></span>
<span class="normal"><a href="#__codelineno-0-580">580</a></span>
<span class="normal"><a href="#__codelineno-0-581">581</a></span>
<span class="normal"><a href="#__codelineno-0-582">582</a></span>
<span class="normal"><a href="#__codelineno-0-583">583</a></span>
<span class="normal"><a href="#__codelineno-0-584">584</a></span>
<span class="normal"><a href="#__codelineno-0-585">585</a></span>
<span class="normal"><a href="#__codelineno-0-586">586</a></span>
<span class="normal"><a href="#__codelineno-0-587">587</a></span>
<span class="normal"><a href="#__codelineno-0-588">588</a></span>
<span class="normal"><a href="#__codelineno-0-589">589</a></span>
<span class="normal"><a href="#__codelineno-0-590">590</a></span>
<span class="normal"><a href="#__codelineno-0-591">591</a></span>
<span class="normal"><a href="#__codelineno-0-592">592</a></span>
<span class="normal"><a href="#__codelineno-0-593">593</a></span>
<span class="normal"><a href="#__codelineno-0-594">594</a></span>
<span class="normal"><a href="#__codelineno-0-595">595</a></span>
<span class="normal"><a href="#__codelineno-0-596">596</a></span>
<span class="normal"><a href="#__codelineno-0-597">597</a></span>
<span class="normal"><a href="#__codelineno-0-598">598</a></span>
<span class="normal"><a href="#__codelineno-0-599">599</a></span>
<span class="normal"><a href="#__codelineno-0-600">600</a></span>
<span class="normal"><a href="#__codelineno-0-601">601</a></span>
<span class="normal"><a href="#__codelineno-0-602">602</a></span>
<span class="normal"><a href="#__codelineno-0-603">603</a></span>
<span class="normal"><a href="#__codelineno-0-604">604</a></span>
<span class="normal"><a href="#__codelineno-0-605">605</a></span>
<span class="normal"><a href="#__codelineno-0-606">606</a></span>
<span class="normal"><a href="#__codelineno-0-607">607</a></span>
<span class="normal"><a href="#__codelineno-0-608">608</a></span>
<span class="normal"><a href="#__codelineno-0-609">609</a></span>
<span class="normal"><a href="#__codelineno-0-610">610</a></span>
<span class="normal"><a href="#__codelineno-0-611">611</a></span>
<span class="normal"><a href="#__codelineno-0-612">612</a></span>
<span class="normal"><a href="#__codelineno-0-613">613</a></span>
<span class="normal"><a href="#__codelineno-0-614">614</a></span>
<span class="normal"><a href="#__codelineno-0-615">615</a></span>
<span class="normal"><a href="#__codelineno-0-616">616</a></span>
<span class="normal"><a href="#__codelineno-0-617">617</a></span>
<span class="normal"><a href="#__codelineno-0-618">618</a></span>
<span class="normal"><a href="#__codelineno-0-619">619</a></span>
<span class="normal"><a href="#__codelineno-0-620">620</a></span>
<span class="normal"><a href="#__codelineno-0-621">621</a></span>
<span class="normal"><a href="#__codelineno-0-622">622</a></span>
<span class="normal"><a href="#__codelineno-0-623">623</a></span>
<span class="normal"><a href="#__codelineno-0-624">624</a></span>
<span class="normal"><a href="#__codelineno-0-625">625</a></span>
<span class="normal"><a href="#__codelineno-0-626">626</a></span>
<span class="normal"><a href="#__codelineno-0-627">627</a></span>
<span class="normal"><a href="#__codelineno-0-628">628</a></span>
<span class="normal"><a href="#__codelineno-0-629">629</a></span>
<span class="normal"><a href="#__codelineno-0-630">630</a></span>
<span class="normal"><a href="#__codelineno-0-631">631</a></span>
<span class="normal"><a href="#__codelineno-0-632">632</a></span>
<span class="normal"><a href="#__codelineno-0-633">633</a></span>
<span class="normal"><a href="#__codelineno-0-634">634</a></span>
<span class="normal"><a href="#__codelineno-0-635">635</a></span>
<span class="normal"><a href="#__codelineno-0-636">636</a></span>
<span class="normal"><a href="#__codelineno-0-637">637</a></span>
<span class="normal"><a href="#__codelineno-0-638">638</a></span>
<span class="normal"><a href="#__codelineno-0-639">639</a></span>
<span class="normal"><a href="#__codelineno-0-640">640</a></span>
<span class="normal"><a href="#__codelineno-0-641">641</a></span>
<span class="normal"><a href="#__codelineno-0-642">642</a></span>
<span class="normal"><a href="#__codelineno-0-643">643</a></span>
<span class="normal"><a href="#__codelineno-0-644">644</a></span>
<span class="normal"><a href="#__codelineno-0-645">645</a></span>
<span class="normal"><a href="#__codelineno-0-646">646</a></span>
<span class="normal"><a href="#__codelineno-0-647">647</a></span>
<span class="normal"><a href="#__codelineno-0-648">648</a></span>
<span class="normal"><a href="#__codelineno-0-649">649</a></span>
<span class="normal"><a href="#__codelineno-0-650">650</a></span>
<span class="normal"><a href="#__codelineno-0-651">651</a></span>
<span class="normal"><a href="#__codelineno-0-652">652</a></span>
<span class="normal"><a href="#__codelineno-0-653">653</a></span>
<span class="normal"><a href="#__codelineno-0-654">654</a></span>
<span class="normal"><a href="#__codelineno-0-655">655</a></span>
<span class="normal"><a href="#__codelineno-0-656">656</a></span>
<span class="normal"><a href="#__codelineno-0-657">657</a></span>
<span class="normal"><a href="#__codelineno-0-658">658</a></span>
<span class="normal"><a href="#__codelineno-0-659">659</a></span>
<span class="normal"><a href="#__codelineno-0-660">660</a></span>
<span class="normal"><a href="#__codelineno-0-661">661</a></span>
<span class="normal"><a href="#__codelineno-0-662">662</a></span>
<span class="normal"><a href="#__codelineno-0-663">663</a></span>
<span class="normal"><a href="#__codelineno-0-664">664</a></span>
<span class="normal"><a href="#__codelineno-0-665">665</a></span>
<span class="normal"><a href="#__codelineno-0-666">666</a></span>
<span class="normal"><a href="#__codelineno-0-667">667</a></span>
<span class="normal"><a href="#__codelineno-0-668">668</a></span>
<span class="normal"><a href="#__codelineno-0-669">669</a></span>
<span class="normal"><a href="#__codelineno-0-670">670</a></span>
<span class="normal"><a href="#__codelineno-0-671">671</a></span>
<span class="normal"><a href="#__codelineno-0-672">672</a></span>
<span class="normal"><a href="#__codelineno-0-673">673</a></span>
<span class="normal"><a href="#__codelineno-0-674">674</a></span>
<span class="normal"><a href="#__codelineno-0-675">675</a></span>
<span class="normal"><a href="#__codelineno-0-676">676</a></span>
<span class="normal"><a href="#__codelineno-0-677">677</a></span>
<span class="normal"><a href="#__codelineno-0-678">678</a></span>
<span class="normal"><a href="#__codelineno-0-679">679</a></span>
<span class="normal"><a href="#__codelineno-0-680">680</a></span>
<span class="normal"><a href="#__codelineno-0-681">681</a></span>
<span class="normal"><a href="#__codelineno-0-682">682</a></span>
<span class="normal"><a href="#__codelineno-0-683">683</a></span>
<span class="normal"><a href="#__codelineno-0-684">684</a></span>
<span class="normal"><a href="#__codelineno-0-685">685</a></span>
<span class="normal"><a href="#__codelineno-0-686">686</a></span>
<span class="normal"><a href="#__codelineno-0-687">687</a></span>
<span class="normal"><a href="#__codelineno-0-688">688</a></span>
<span class="normal"><a href="#__codelineno-0-689">689</a></span>
<span class="normal"><a href="#__codelineno-0-690">690</a></span>
<span class="normal"><a href="#__codelineno-0-691">691</a></span>
<span class="normal"><a href="#__codelineno-0-692">692</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-566" name="__codelineno-0-566"></a><span class="k">def</span><span class="w"> </span><span class="nf">read_array</span><span class="p">(</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">GeoDataFrame</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Read the values stored in a given band.</span>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a><span class="sd">    Data Chuncks/blocks</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a><span class="sd">        When a raster dataset is stored on disk, it might not be stored as one continuous chunk of data. Instead,</span>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a><span class="sd">        it can be divided into smaller rectangular blocks or tiles. These blocks can be individually accessed,</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a><span class="sd">        which is particularly useful for large datasets:</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a><span class="sd">            - Efficiency: Reading or writing small blocks requires less memory than dealing with the entire dataset</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a><span class="sd">                  at once. This is especially beneficial when only a small portion of the data needs to be processed.</span>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a><span class="sd">            - Performance: For certain file formats and operations, working with optimal block sizes can significantly</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a><span class="sd">                  improve performance. For example, if the block size matches the reading or processing window,</span>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a><span class="sd">                  Pyramids can minimize disk access and data transfer.</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a><span class="sd">        band (int, optional):</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a><span class="sd">            The band you want to get its data. If None, data of all bands will be read. Default is None.</span>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a><span class="sd">        window (List[int] | GeoDataFrame, optional):</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a><span class="sd">            Specify a block of data to read from the dataset. The window can be specified in two ways:</span>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a><span class="sd">            - List:</span>
<a id="__codelineno-0-589" name="__codelineno-0-589"></a><span class="sd">                Window specified as a list of 4 integers [offset_x, offset_y, window_columns, window_rows].</span>
<a id="__codelineno-0-590" name="__codelineno-0-590"></a>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a><span class="sd">                - offset_x/column index: x offset of the block.</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a><span class="sd">                - offset_y/row index: y offset of the block.</span>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a><span class="sd">                - window_columns: number of columns in the block.</span>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a><span class="sd">                - window_rows: number of rows in the block.</span>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a><span class="sd">            - GeoDataFrame:</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a><span class="sd">                GeoDataFrame with a geometry column filled with polygon geometries; the function will get the</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a><span class="sd">                total_bounds of the GeoDataFrame and use it as a window to read the raster.</span>
<a id="__codelineno-0-599" name="__codelineno-0-599"></a>
<a id="__codelineno-0-600" name="__codelineno-0-600"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-601" name="__codelineno-0-601"></a><span class="sd">        np.ndarray:</span>
<a id="__codelineno-0-602" name="__codelineno-0-602"></a><span class="sd">            array with all the values in the raster.</span>
<a id="__codelineno-0-603" name="__codelineno-0-603"></a>
<a id="__codelineno-0-604" name="__codelineno-0-604"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-605" name="__codelineno-0-605"></a><span class="sd">        - Create `Dataset` consisting of 4 bands, 5 rows, and 5 columns at the point lon/lat (0, 0):</span>
<a id="__codelineno-0-606" name="__codelineno-0-606"></a>
<a id="__codelineno-0-607" name="__codelineno-0-607"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-608" name="__codelineno-0-608"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-609" name="__codelineno-0-609"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.rand(4, 5, 5)</span>
<a id="__codelineno-0-610" name="__codelineno-0-610"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-611" name="__codelineno-0-611"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-612" name="__codelineno-0-612"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-613" name="__codelineno-0-613"></a>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a><span class="sd">          ```</span>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a>
<a id="__codelineno-0-616" name="__codelineno-0-616"></a><span class="sd">        - Read all the values stored in a given band:</span>
<a id="__codelineno-0-617" name="__codelineno-0-617"></a>
<a id="__codelineno-0-618" name="__codelineno-0-618"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-619" name="__codelineno-0-619"></a><span class="sd">          &gt;&gt;&gt; arr = dataset.read_array(band=0) # doctest: +SKIP</span>
<a id="__codelineno-0-620" name="__codelineno-0-620"></a><span class="sd">          array([[0.50482225, 0.45678043, 0.53294294, 0.28862223, 0.66753579],</span>
<a id="__codelineno-0-621" name="__codelineno-0-621"></a><span class="sd">                 [0.38471912, 0.14617829, 0.05045189, 0.00761358, 0.25501918],</span>
<a id="__codelineno-0-622" name="__codelineno-0-622"></a><span class="sd">                 [0.32689036, 0.37358843, 0.32233918, 0.75450564, 0.45197608],</span>
<a id="__codelineno-0-623" name="__codelineno-0-623"></a><span class="sd">                 [0.22944676, 0.2780928 , 0.71605189, 0.71859309, 0.61896933],</span>
<a id="__codelineno-0-624" name="__codelineno-0-624"></a><span class="sd">                 [0.47740168, 0.76490779, 0.07679277, 0.16142599, 0.73630836]])</span>
<a id="__codelineno-0-625" name="__codelineno-0-625"></a>
<a id="__codelineno-0-626" name="__codelineno-0-626"></a><span class="sd">          ```</span>
<a id="__codelineno-0-627" name="__codelineno-0-627"></a>
<a id="__codelineno-0-628" name="__codelineno-0-628"></a><span class="sd">        - Read a 2x2 block from the first band. The block starts at the 2nd column (index 1) and 2nd row (index 1)</span>
<a id="__codelineno-0-629" name="__codelineno-0-629"></a><span class="sd">            (the first index is the column index):</span>
<a id="__codelineno-0-630" name="__codelineno-0-630"></a>
<a id="__codelineno-0-631" name="__codelineno-0-631"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-632" name="__codelineno-0-632"></a><span class="sd">          &gt;&gt;&gt; arr = dataset.read_array(band=0, window=[1, 1, 2, 2])</span>
<a id="__codelineno-0-633" name="__codelineno-0-633"></a><span class="sd">          &gt;&gt;&gt; print(arr) # doctest: +SKIP</span>
<a id="__codelineno-0-634" name="__codelineno-0-634"></a><span class="sd">          array([[0.14617829, 0.05045189],</span>
<a id="__codelineno-0-635" name="__codelineno-0-635"></a><span class="sd">                 [0.37358843, 0.32233918]])</span>
<a id="__codelineno-0-636" name="__codelineno-0-636"></a>
<a id="__codelineno-0-637" name="__codelineno-0-637"></a><span class="sd">          ```</span>
<a id="__codelineno-0-638" name="__codelineno-0-638"></a>
<a id="__codelineno-0-639" name="__codelineno-0-639"></a><span class="sd">        - If you check the values of the 2x2 block, you will find them the same as the values in the entire array</span>
<a id="__codelineno-0-640" name="__codelineno-0-640"></a><span class="sd">            of band 0, starting at the 2nd row and 2nd column.</span>
<a id="__codelineno-0-641" name="__codelineno-0-641"></a>
<a id="__codelineno-0-642" name="__codelineno-0-642"></a><span class="sd">        - Read a block using a GeoDataFrame polygon that covers the same area as the window above:</span>
<a id="__codelineno-0-643" name="__codelineno-0-643"></a>
<a id="__codelineno-0-644" name="__codelineno-0-644"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-645" name="__codelineno-0-645"></a><span class="sd">          &gt;&gt;&gt; import geopandas as gpd</span>
<a id="__codelineno-0-646" name="__codelineno-0-646"></a><span class="sd">          &gt;&gt;&gt; from shapely.geometry import Polygon</span>
<a id="__codelineno-0-647" name="__codelineno-0-647"></a><span class="sd">          &gt;&gt;&gt; poly = gpd.GeoDataFrame(geometry=[Polygon([(0.1, -0.1), (0.1, -0.2), (0.2, -0.2), (0.2, -0.1)])], crs=4326)</span>
<a id="__codelineno-0-648" name="__codelineno-0-648"></a><span class="sd">          &gt;&gt;&gt; arr = dataset.read_array(band=0, window=poly)</span>
<a id="__codelineno-0-649" name="__codelineno-0-649"></a><span class="sd">          &gt;&gt;&gt; print(arr) # doctest: +SKIP</span>
<a id="__codelineno-0-650" name="__codelineno-0-650"></a><span class="sd">          array([[0.14617829, 0.05045189],</span>
<a id="__codelineno-0-651" name="__codelineno-0-651"></a><span class="sd">                 [0.37358843, 0.32233918]])</span>
<a id="__codelineno-0-652" name="__codelineno-0-652"></a>
<a id="__codelineno-0-653" name="__codelineno-0-653"></a><span class="sd">          ```</span>
<a id="__codelineno-0-654" name="__codelineno-0-654"></a>
<a id="__codelineno-0-655" name="__codelineno-0-655"></a><span class="sd">    See Also:</span>
<a id="__codelineno-0-656" name="__codelineno-0-656"></a><span class="sd">        - Dataset.get_tile: Read the dataset in chunks.</span>
<a id="__codelineno-0-657" name="__codelineno-0-657"></a><span class="sd">        - Dataset.get_block_arrangement: Get block arrangement to read the dataset in chunks.</span>
<a id="__codelineno-0-658" name="__codelineno-0-658"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-659" name="__codelineno-0-659"></a>    <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-660" name="__codelineno-0-660"></a>        <span class="n">rows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="k">if</span> <span class="n">window</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">window</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-0-661" name="__codelineno-0-661"></a>        <span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">window</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">window</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<a id="__codelineno-0-662" name="__codelineno-0-662"></a>        <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span>
<a id="__codelineno-0-663" name="__codelineno-0-663"></a>            <span class="p">(</span>
<a id="__codelineno-0-664" name="__codelineno-0-664"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">,</span>
<a id="__codelineno-0-665" name="__codelineno-0-665"></a>                <span class="n">rows</span><span class="p">,</span>
<a id="__codelineno-0-666" name="__codelineno-0-666"></a>                <span class="n">columns</span><span class="p">,</span>
<a id="__codelineno-0-667" name="__codelineno-0-667"></a>            <span class="p">),</span>
<a id="__codelineno-0-668" name="__codelineno-0-668"></a>            <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">numpy_dtype</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-0-669" name="__codelineno-0-669"></a>        <span class="p">)</span>
<a id="__codelineno-0-670" name="__codelineno-0-670"></a>
<a id="__codelineno-0-671" name="__codelineno-0-671"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-672" name="__codelineno-0-672"></a>            <span class="k">if</span> <span class="n">window</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-673" name="__codelineno-0-673"></a>                <span class="c1"># this line could be replaced with the following line</span>
<a id="__codelineno-0-674" name="__codelineno-0-674"></a>                <span class="c1"># arr[i, :, :] = self._iloc(i).ReadAsArray()</span>
<a id="__codelineno-0-675" name="__codelineno-0-675"></a>                <span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
<a id="__codelineno-0-676" name="__codelineno-0-676"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-677" name="__codelineno-0-677"></a>                <span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_block</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">window</span><span class="p">)</span>
<a id="__codelineno-0-678" name="__codelineno-0-678"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-679" name="__codelineno-0-679"></a>        <span class="c1"># given band number or the raster has only one band</span>
<a id="__codelineno-0-680" name="__codelineno-0-680"></a>        <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-681" name="__codelineno-0-681"></a>            <span class="n">band</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-682" name="__codelineno-0-682"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-683" name="__codelineno-0-683"></a>            <span class="k">if</span> <span class="n">band</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-684" name="__codelineno-0-684"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-685" name="__codelineno-0-685"></a>                    <span class="sa">f</span><span class="s2">&quot;band index should be between 0 and </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-686" name="__codelineno-0-686"></a>                <span class="p">)</span>
<a id="__codelineno-0-687" name="__codelineno-0-687"></a>        <span class="k">if</span> <span class="n">window</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-688" name="__codelineno-0-688"></a>            <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">band</span><span class="p">)</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
<a id="__codelineno-0-689" name="__codelineno-0-689"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-690" name="__codelineno-0-690"></a>            <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_block</span><span class="p">(</span><span class="n">band</span><span class="p">,</span> <span class="n">window</span><span class="p">)</span>
<a id="__codelineno-0-691" name="__codelineno-0-691"></a>
<a id="__codelineno-0-692" name="__codelineno-0-692"></a>    <span class="k">return</span> <span class="n">arr</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.get_x_lon_dimension_array" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.get_x_lon_dimension_array" class="toclink">
            <code class="highlight language-python"><span class="n">get_x_lon_dimension_array</span><span class="p">(</span><span class="n">pivot_x</span><span class="p">,</span> <span class="n">cell_size</span><span class="p">,</span> <span class="n">columns</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.get_x_lon_dimension_array" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Get X/Lon coordinates.</p>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-962">962</a></span>
<span class="normal"><a href="#__codelineno-0-963">963</a></span>
<span class="normal"><a href="#__codelineno-0-964">964</a></span>
<span class="normal"><a href="#__codelineno-0-965">965</a></span>
<span class="normal"><a href="#__codelineno-0-966">966</a></span>
<span class="normal"><a href="#__codelineno-0-967">967</a></span>
<span class="normal"><a href="#__codelineno-0-968">968</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-962" name="__codelineno-0-962"></a><span class="nd">@staticmethod</span>
<a id="__codelineno-0-963" name="__codelineno-0-963"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_x_lon_dimension_array</span><span class="p">(</span><span class="n">pivot_x</span><span class="p">,</span> <span class="n">cell_size</span><span class="p">,</span> <span class="n">columns</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-964" name="__codelineno-0-964"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get X/Lon coordinates.&quot;&quot;&quot;</span>
<a id="__codelineno-0-965" name="__codelineno-0-965"></a>    <span class="n">x_coords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
<a id="__codelineno-0-966" name="__codelineno-0-966"></a>        <span class="p">[</span><span class="n">pivot_x</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="n">cell_size</span> <span class="o">+</span> <span class="n">cell_size</span> <span class="o">/</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">columns</span><span class="p">)]</span>
<a id="__codelineno-0-967" name="__codelineno-0-967"></a>    <span class="p">)</span>
<a id="__codelineno-0-968" name="__codelineno-0-968"></a>    <span class="k">return</span> <span class="n">x_coords</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.get_y_lat_dimension_array" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.get_y_lat_dimension_array" class="toclink">
            <code class="highlight language-python"><span class="n">get_y_lat_dimension_array</span><span class="p">(</span><span class="n">pivot_y</span><span class="p">,</span> <span class="n">cell_size</span><span class="p">,</span> <span class="n">rows</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.get_y_lat_dimension_array" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Get Y/Lat coordinates.</p>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-970">970</a></span>
<span class="normal"><a href="#__codelineno-0-971">971</a></span>
<span class="normal"><a href="#__codelineno-0-972">972</a></span>
<span class="normal"><a href="#__codelineno-0-973">973</a></span>
<span class="normal"><a href="#__codelineno-0-974">974</a></span>
<span class="normal"><a href="#__codelineno-0-975">975</a></span>
<span class="normal"><a href="#__codelineno-0-976">976</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-970" name="__codelineno-0-970"></a><span class="nd">@staticmethod</span>
<a id="__codelineno-0-971" name="__codelineno-0-971"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_y_lat_dimension_array</span><span class="p">(</span><span class="n">pivot_y</span><span class="p">,</span> <span class="n">cell_size</span><span class="p">,</span> <span class="n">rows</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-972" name="__codelineno-0-972"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get Y/Lat coordinates.&quot;&quot;&quot;</span>
<a id="__codelineno-0-973" name="__codelineno-0-973"></a>    <span class="n">y_coords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
<a id="__codelineno-0-974" name="__codelineno-0-974"></a>        <span class="p">[</span><span class="n">pivot_y</span> <span class="o">-</span> <span class="n">i</span> <span class="o">*</span> <span class="n">cell_size</span> <span class="o">-</span> <span class="n">cell_size</span> <span class="o">/</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rows</span><span class="p">)]</span>
<a id="__codelineno-0-975" name="__codelineno-0-975"></a>    <span class="p">)</span>
<a id="__codelineno-0-976" name="__codelineno-0-976"></a>    <span class="k">return</span> <span class="n">y_coords</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.get_block_arrangement" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.get_block_arrangement" class="toclink">
            <code class="highlight language-python"><span class="n">get_block_arrangement</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">x_block_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y_block_size</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.get_block_arrangement" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Get Block Arrangement.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>band</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>band index, by default 0</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>x_block_size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>x block size/number of columns, by default None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>y_block_size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>y block size/number of rows, by default None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DataFrame</code></td>            <td>
                  <code><span title="geopandas.geodataframe.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>with the following columns: [x_offset, y_offset, window_xsize, window_ysize]</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Example of getting block arrangement:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_block_arrangement</span><span class="p">(</span><span class="n">x_block_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">y_block_size</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>   <span class="n">x_offset</span>  <span class="n">y_offset</span>  <span class="n">window_xsize</span>  <span class="n">window_ysize</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="mi">0</span>         <span class="mi">0</span>         <span class="mi">0</span>             <span class="mi">5</span>             <span class="mi">5</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="mi">1</span>         <span class="mi">5</span>         <span class="mi">0</span>             <span class="mi">5</span>             <span class="mi">5</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="mi">2</span>        <span class="mi">10</span>         <span class="mi">0</span>             <span class="mi">4</span>             <span class="mi">5</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="mi">3</span>         <span class="mi">0</span>         <span class="mi">5</span>             <span class="mi">5</span>             <span class="mi">5</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="mi">4</span>         <span class="mi">5</span>         <span class="mi">5</span>             <span class="mi">5</span>             <span class="mi">5</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="mi">5</span>        <span class="mi">10</span>         <span class="mi">5</span>             <span class="mi">4</span>             <span class="mi">5</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="mi">6</span>         <span class="mi">0</span>        <span class="mi">10</span>             <span class="mi">5</span>             <span class="mi">3</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="mi">7</span>         <span class="mi">5</span>        <span class="mi">10</span>             <span class="mi">5</span>             <span class="mi">3</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="mi">8</span>        <span class="mi">10</span>        <span class="mi">10</span>             <span class="mi">4</span>             <span class="mi">3</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1001">1001</a></span>
<span class="normal"><a href="#__codelineno-0-1002">1002</a></span>
<span class="normal"><a href="#__codelineno-0-1003">1003</a></span>
<span class="normal"><a href="#__codelineno-0-1004">1004</a></span>
<span class="normal"><a href="#__codelineno-0-1005">1005</a></span>
<span class="normal"><a href="#__codelineno-0-1006">1006</a></span>
<span class="normal"><a href="#__codelineno-0-1007">1007</a></span>
<span class="normal"><a href="#__codelineno-0-1008">1008</a></span>
<span class="normal"><a href="#__codelineno-0-1009">1009</a></span>
<span class="normal"><a href="#__codelineno-0-1010">1010</a></span>
<span class="normal"><a href="#__codelineno-0-1011">1011</a></span>
<span class="normal"><a href="#__codelineno-0-1012">1012</a></span>
<span class="normal"><a href="#__codelineno-0-1013">1013</a></span>
<span class="normal"><a href="#__codelineno-0-1014">1014</a></span>
<span class="normal"><a href="#__codelineno-0-1015">1015</a></span>
<span class="normal"><a href="#__codelineno-0-1016">1016</a></span>
<span class="normal"><a href="#__codelineno-0-1017">1017</a></span>
<span class="normal"><a href="#__codelineno-0-1018">1018</a></span>
<span class="normal"><a href="#__codelineno-0-1019">1019</a></span>
<span class="normal"><a href="#__codelineno-0-1020">1020</a></span>
<span class="normal"><a href="#__codelineno-0-1021">1021</a></span>
<span class="normal"><a href="#__codelineno-0-1022">1022</a></span>
<span class="normal"><a href="#__codelineno-0-1023">1023</a></span>
<span class="normal"><a href="#__codelineno-0-1024">1024</a></span>
<span class="normal"><a href="#__codelineno-0-1025">1025</a></span>
<span class="normal"><a href="#__codelineno-0-1026">1026</a></span>
<span class="normal"><a href="#__codelineno-0-1027">1027</a></span>
<span class="normal"><a href="#__codelineno-0-1028">1028</a></span>
<span class="normal"><a href="#__codelineno-0-1029">1029</a></span>
<span class="normal"><a href="#__codelineno-0-1030">1030</a></span>
<span class="normal"><a href="#__codelineno-0-1031">1031</a></span>
<span class="normal"><a href="#__codelineno-0-1032">1032</a></span>
<span class="normal"><a href="#__codelineno-0-1033">1033</a></span>
<span class="normal"><a href="#__codelineno-0-1034">1034</a></span>
<span class="normal"><a href="#__codelineno-0-1035">1035</a></span>
<span class="normal"><a href="#__codelineno-0-1036">1036</a></span>
<span class="normal"><a href="#__codelineno-0-1037">1037</a></span>
<span class="normal"><a href="#__codelineno-0-1038">1038</a></span>
<span class="normal"><a href="#__codelineno-0-1039">1039</a></span>
<span class="normal"><a href="#__codelineno-0-1040">1040</a></span>
<span class="normal"><a href="#__codelineno-0-1041">1041</a></span>
<span class="normal"><a href="#__codelineno-0-1042">1042</a></span>
<span class="normal"><a href="#__codelineno-0-1043">1043</a></span>
<span class="normal"><a href="#__codelineno-0-1044">1044</a></span>
<span class="normal"><a href="#__codelineno-0-1045">1045</a></span>
<span class="normal"><a href="#__codelineno-0-1046">1046</a></span>
<span class="normal"><a href="#__codelineno-0-1047">1047</a></span>
<span class="normal"><a href="#__codelineno-0-1048">1048</a></span>
<span class="normal"><a href="#__codelineno-0-1049">1049</a></span>
<span class="normal"><a href="#__codelineno-0-1050">1050</a></span>
<span class="normal"><a href="#__codelineno-0-1051">1051</a></span>
<span class="normal"><a href="#__codelineno-0-1052">1052</a></span>
<span class="normal"><a href="#__codelineno-0-1053">1053</a></span>
<span class="normal"><a href="#__codelineno-0-1054">1054</a></span>
<span class="normal"><a href="#__codelineno-0-1055">1055</a></span>
<span class="normal"><a href="#__codelineno-0-1056">1056</a></span>
<span class="normal"><a href="#__codelineno-0-1057">1057</a></span>
<span class="normal"><a href="#__codelineno-0-1058">1058</a></span>
<span class="normal"><a href="#__codelineno-0-1059">1059</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1001" name="__codelineno-0-1001"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_block_arrangement</span><span class="p">(</span>
<a id="__codelineno-0-1002" name="__codelineno-0-1002"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x_block_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">y_block_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1003" name="__codelineno-0-1003"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-1004" name="__codelineno-0-1004"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get Block Arrangement.</span>
<a id="__codelineno-0-1005" name="__codelineno-0-1005"></a>
<a id="__codelineno-0-1006" name="__codelineno-0-1006"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1007" name="__codelineno-0-1007"></a><span class="sd">        band (int, optional):</span>
<a id="__codelineno-0-1008" name="__codelineno-0-1008"></a><span class="sd">            band index, by default 0</span>
<a id="__codelineno-0-1009" name="__codelineno-0-1009"></a><span class="sd">        x_block_size (int, optional):</span>
<a id="__codelineno-0-1010" name="__codelineno-0-1010"></a><span class="sd">            x block size/number of columns, by default None</span>
<a id="__codelineno-0-1011" name="__codelineno-0-1011"></a><span class="sd">        y_block_size (int, optional):</span>
<a id="__codelineno-0-1012" name="__codelineno-0-1012"></a><span class="sd">            y block size/number of rows, by default None</span>
<a id="__codelineno-0-1013" name="__codelineno-0-1013"></a>
<a id="__codelineno-0-1014" name="__codelineno-0-1014"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1015" name="__codelineno-0-1015"></a><span class="sd">        DataFrame:</span>
<a id="__codelineno-0-1016" name="__codelineno-0-1016"></a><span class="sd">            with the following columns: [x_offset, y_offset, window_xsize, window_ysize]</span>
<a id="__codelineno-0-1017" name="__codelineno-0-1017"></a>
<a id="__codelineno-0-1018" name="__codelineno-0-1018"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-1019" name="__codelineno-0-1019"></a><span class="sd">        - Example of getting block arrangement:</span>
<a id="__codelineno-0-1020" name="__codelineno-0-1020"></a>
<a id="__codelineno-0-1021" name="__codelineno-0-1021"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-1022" name="__codelineno-0-1022"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-1023" name="__codelineno-0-1023"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.rand(13, 14)</span>
<a id="__codelineno-0-1024" name="__codelineno-0-1024"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-1025" name="__codelineno-0-1025"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-1026" name="__codelineno-0-1026"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-1027" name="__codelineno-0-1027"></a><span class="sd">          &gt;&gt;&gt; df = dataset.get_block_arrangement(x_block_size=5, y_block_size=5)</span>
<a id="__codelineno-0-1028" name="__codelineno-0-1028"></a><span class="sd">          &gt;&gt;&gt; print(df)</span>
<a id="__codelineno-0-1029" name="__codelineno-0-1029"></a><span class="sd">             x_offset  y_offset  window_xsize  window_ysize</span>
<a id="__codelineno-0-1030" name="__codelineno-0-1030"></a><span class="sd">          0         0         0             5             5</span>
<a id="__codelineno-0-1031" name="__codelineno-0-1031"></a><span class="sd">          1         5         0             5             5</span>
<a id="__codelineno-0-1032" name="__codelineno-0-1032"></a><span class="sd">          2        10         0             4             5</span>
<a id="__codelineno-0-1033" name="__codelineno-0-1033"></a><span class="sd">          3         0         5             5             5</span>
<a id="__codelineno-0-1034" name="__codelineno-0-1034"></a><span class="sd">          4         5         5             5             5</span>
<a id="__codelineno-0-1035" name="__codelineno-0-1035"></a><span class="sd">          5        10         5             4             5</span>
<a id="__codelineno-0-1036" name="__codelineno-0-1036"></a><span class="sd">          6         0        10             5             3</span>
<a id="__codelineno-0-1037" name="__codelineno-0-1037"></a><span class="sd">          7         5        10             5             3</span>
<a id="__codelineno-0-1038" name="__codelineno-0-1038"></a><span class="sd">          8        10        10             4             3</span>
<a id="__codelineno-0-1039" name="__codelineno-0-1039"></a>
<a id="__codelineno-0-1040" name="__codelineno-0-1040"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1041" name="__codelineno-0-1041"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1042" name="__codelineno-0-1042"></a>    <span class="n">block_sizes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">block_size</span><span class="p">[</span><span class="n">band</span><span class="p">]</span>
<a id="__codelineno-0-1043" name="__codelineno-0-1043"></a>    <span class="n">x_block_size</span> <span class="o">=</span> <span class="n">block_sizes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">x_block_size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">x_block_size</span>
<a id="__codelineno-0-1044" name="__codelineno-0-1044"></a>    <span class="n">y_block_size</span> <span class="o">=</span> <span class="n">block_sizes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">y_block_size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">y_block_size</span>
<a id="__codelineno-0-1045" name="__codelineno-0-1045"></a>
<a id="__codelineno-0-1046" name="__codelineno-0-1046"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<a id="__codelineno-0-1047" name="__codelineno-0-1047"></a>        <span class="p">[</span>
<a id="__codelineno-0-1048" name="__codelineno-0-1048"></a>            <span class="p">{</span>
<a id="__codelineno-0-1049" name="__codelineno-0-1049"></a>                <span class="s2">&quot;x_offset&quot;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span>
<a id="__codelineno-0-1050" name="__codelineno-0-1050"></a>                <span class="s2">&quot;y_offset&quot;</span><span class="p">:</span> <span class="n">y</span><span class="p">,</span>
<a id="__codelineno-0-1051" name="__codelineno-0-1051"></a>                <span class="s2">&quot;window_xsize&quot;</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="n">x_block_size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span> <span class="o">-</span> <span class="n">x</span><span class="p">),</span>
<a id="__codelineno-0-1052" name="__codelineno-0-1052"></a>                <span class="s2">&quot;window_ysize&quot;</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="n">y_block_size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="o">-</span> <span class="n">y</span><span class="p">),</span>
<a id="__codelineno-0-1053" name="__codelineno-0-1053"></a>            <span class="p">}</span>
<a id="__codelineno-0-1054" name="__codelineno-0-1054"></a>            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span><span class="p">,</span> <span class="n">y_block_size</span><span class="p">)</span>
<a id="__codelineno-0-1055" name="__codelineno-0-1055"></a>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">x_block_size</span><span class="p">)</span>
<a id="__codelineno-0-1056" name="__codelineno-0-1056"></a>        <span class="p">],</span>
<a id="__codelineno-0-1057" name="__codelineno-0-1057"></a>        <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x_offset&quot;</span><span class="p">,</span> <span class="s2">&quot;y_offset&quot;</span><span class="p">,</span> <span class="s2">&quot;window_xsize&quot;</span><span class="p">,</span> <span class="s2">&quot;window_ysize&quot;</span><span class="p">],</span>
<a id="__codelineno-0-1058" name="__codelineno-0-1058"></a>    <span class="p">)</span>
<a id="__codelineno-0-1059" name="__codelineno-0-1059"></a>    <span class="k">return</span> <span class="n">df</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.copy" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.copy" class="toclink">
            <code class="highlight language-python"><span class="n">copy</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.copy" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Deep copy.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Destination path to save the copied dataset. If None is passed, the copied dataset will be created in memory.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>First, we will create a dataset with 1 band, 3 rows and 5 columns.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">0.05</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">5</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">4326</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">1</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">]</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">9999.0</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">float64</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>            <span class="n">File</span><span class="p">:</span><span class="o">...</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
</code></pre></div>
<ul>
<li>Now, we will create a copy of the dataset.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">copied_dataset</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;copy-dataset.tif&quot;</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">copied_dataset</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">0.05</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">5</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">4326</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">1</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">]</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">9999.0</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">float64</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>            <span class="n">File</span><span class="p">:</span> <span class="n">copy</span><span class="o">-</span><span class="n">dataset</span><span class="o">.</span><span class="n">tif</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
</code></pre></div>
<ul>
<li>Now close the dataset.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">copied_dataset</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1061">1061</a></span>
<span class="normal"><a href="#__codelineno-0-1062">1062</a></span>
<span class="normal"><a href="#__codelineno-0-1063">1063</a></span>
<span class="normal"><a href="#__codelineno-0-1064">1064</a></span>
<span class="normal"><a href="#__codelineno-0-1065">1065</a></span>
<span class="normal"><a href="#__codelineno-0-1066">1066</a></span>
<span class="normal"><a href="#__codelineno-0-1067">1067</a></span>
<span class="normal"><a href="#__codelineno-0-1068">1068</a></span>
<span class="normal"><a href="#__codelineno-0-1069">1069</a></span>
<span class="normal"><a href="#__codelineno-0-1070">1070</a></span>
<span class="normal"><a href="#__codelineno-0-1071">1071</a></span>
<span class="normal"><a href="#__codelineno-0-1072">1072</a></span>
<span class="normal"><a href="#__codelineno-0-1073">1073</a></span>
<span class="normal"><a href="#__codelineno-0-1074">1074</a></span>
<span class="normal"><a href="#__codelineno-0-1075">1075</a></span>
<span class="normal"><a href="#__codelineno-0-1076">1076</a></span>
<span class="normal"><a href="#__codelineno-0-1077">1077</a></span>
<span class="normal"><a href="#__codelineno-0-1078">1078</a></span>
<span class="normal"><a href="#__codelineno-0-1079">1079</a></span>
<span class="normal"><a href="#__codelineno-0-1080">1080</a></span>
<span class="normal"><a href="#__codelineno-0-1081">1081</a></span>
<span class="normal"><a href="#__codelineno-0-1082">1082</a></span>
<span class="normal"><a href="#__codelineno-0-1083">1083</a></span>
<span class="normal"><a href="#__codelineno-0-1084">1084</a></span>
<span class="normal"><a href="#__codelineno-0-1085">1085</a></span>
<span class="normal"><a href="#__codelineno-0-1086">1086</a></span>
<span class="normal"><a href="#__codelineno-0-1087">1087</a></span>
<span class="normal"><a href="#__codelineno-0-1088">1088</a></span>
<span class="normal"><a href="#__codelineno-0-1089">1089</a></span>
<span class="normal"><a href="#__codelineno-0-1090">1090</a></span>
<span class="normal"><a href="#__codelineno-0-1091">1091</a></span>
<span class="normal"><a href="#__codelineno-0-1092">1092</a></span>
<span class="normal"><a href="#__codelineno-0-1093">1093</a></span>
<span class="normal"><a href="#__codelineno-0-1094">1094</a></span>
<span class="normal"><a href="#__codelineno-0-1095">1095</a></span>
<span class="normal"><a href="#__codelineno-0-1096">1096</a></span>
<span class="normal"><a href="#__codelineno-0-1097">1097</a></span>
<span class="normal"><a href="#__codelineno-0-1098">1098</a></span>
<span class="normal"><a href="#__codelineno-0-1099">1099</a></span>
<span class="normal"><a href="#__codelineno-0-1100">1100</a></span>
<span class="normal"><a href="#__codelineno-0-1101">1101</a></span>
<span class="normal"><a href="#__codelineno-0-1102">1102</a></span>
<span class="normal"><a href="#__codelineno-0-1103">1103</a></span>
<span class="normal"><a href="#__codelineno-0-1104">1104</a></span>
<span class="normal"><a href="#__codelineno-0-1105">1105</a></span>
<span class="normal"><a href="#__codelineno-0-1106">1106</a></span>
<span class="normal"><a href="#__codelineno-0-1107">1107</a></span>
<span class="normal"><a href="#__codelineno-0-1108">1108</a></span>
<span class="normal"><a href="#__codelineno-0-1109">1109</a></span>
<span class="normal"><a href="#__codelineno-0-1110">1110</a></span>
<span class="normal"><a href="#__codelineno-0-1111">1111</a></span>
<span class="normal"><a href="#__codelineno-0-1112">1112</a></span>
<span class="normal"><a href="#__codelineno-0-1113">1113</a></span>
<span class="normal"><a href="#__codelineno-0-1114">1114</a></span>
<span class="normal"><a href="#__codelineno-0-1115">1115</a></span>
<span class="normal"><a href="#__codelineno-0-1116">1116</a></span>
<span class="normal"><a href="#__codelineno-0-1117">1117</a></span>
<span class="normal"><a href="#__codelineno-0-1118">1118</a></span>
<span class="normal"><a href="#__codelineno-0-1119">1119</a></span>
<span class="normal"><a href="#__codelineno-0-1120">1120</a></span>
<span class="normal"><a href="#__codelineno-0-1121">1121</a></span>
<span class="normal"><a href="#__codelineno-0-1122">1122</a></span>
<span class="normal"><a href="#__codelineno-0-1123">1123</a></span>
<span class="normal"><a href="#__codelineno-0-1124">1124</a></span>
<span class="normal"><a href="#__codelineno-0-1125">1125</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1061" name="__codelineno-0-1061"></a><span class="k">def</span><span class="w"> </span><span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1062" name="__codelineno-0-1062"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Deep copy.</span>
<a id="__codelineno-0-1063" name="__codelineno-0-1063"></a>
<a id="__codelineno-0-1064" name="__codelineno-0-1064"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1065" name="__codelineno-0-1065"></a><span class="sd">        path (str, optional):</span>
<a id="__codelineno-0-1066" name="__codelineno-0-1066"></a><span class="sd">            Destination path to save the copied dataset. If None is passed, the copied dataset will be created in memory.</span>
<a id="__codelineno-0-1067" name="__codelineno-0-1067"></a>
<a id="__codelineno-0-1068" name="__codelineno-0-1068"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-1069" name="__codelineno-0-1069"></a><span class="sd">        - First, we will create a dataset with 1 band, 3 rows and 5 columns.</span>
<a id="__codelineno-0-1070" name="__codelineno-0-1070"></a>
<a id="__codelineno-0-1071" name="__codelineno-0-1071"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-1072" name="__codelineno-0-1072"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-1073" name="__codelineno-0-1073"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.rand(3, 5)</span>
<a id="__codelineno-0-1074" name="__codelineno-0-1074"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-1075" name="__codelineno-0-1075"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-1076" name="__codelineno-0-1076"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-1077" name="__codelineno-0-1077"></a><span class="sd">          &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-1078" name="__codelineno-0-1078"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1079" name="__codelineno-0-1079"></a><span class="sd">                      Cell size: 0.05</span>
<a id="__codelineno-0-1080" name="__codelineno-0-1080"></a><span class="sd">                      Dimension: 3 * 5</span>
<a id="__codelineno-0-1081" name="__codelineno-0-1081"></a><span class="sd">                      EPSG: 4326</span>
<a id="__codelineno-0-1082" name="__codelineno-0-1082"></a><span class="sd">                      Number of Bands: 1</span>
<a id="__codelineno-0-1083" name="__codelineno-0-1083"></a><span class="sd">                      Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-1084" name="__codelineno-0-1084"></a><span class="sd">                      Mask: -9999.0</span>
<a id="__codelineno-0-1085" name="__codelineno-0-1085"></a><span class="sd">                      Data type: float64</span>
<a id="__codelineno-0-1086" name="__codelineno-0-1086"></a><span class="sd">                      File:...</span>
<a id="__codelineno-0-1087" name="__codelineno-0-1087"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1088" name="__codelineno-0-1088"></a>
<a id="__codelineno-0-1089" name="__codelineno-0-1089"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1090" name="__codelineno-0-1090"></a>
<a id="__codelineno-0-1091" name="__codelineno-0-1091"></a><span class="sd">        - Now, we will create a copy of the dataset.</span>
<a id="__codelineno-0-1092" name="__codelineno-0-1092"></a>
<a id="__codelineno-0-1093" name="__codelineno-0-1093"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-1094" name="__codelineno-0-1094"></a><span class="sd">          &gt;&gt;&gt; copied_dataset = dataset.copy(path=&quot;copy-dataset.tif&quot;)</span>
<a id="__codelineno-0-1095" name="__codelineno-0-1095"></a><span class="sd">          &gt;&gt;&gt; print(copied_dataset)</span>
<a id="__codelineno-0-1096" name="__codelineno-0-1096"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1097" name="__codelineno-0-1097"></a><span class="sd">                      Cell size: 0.05</span>
<a id="__codelineno-0-1098" name="__codelineno-0-1098"></a><span class="sd">                      Dimension: 3 * 5</span>
<a id="__codelineno-0-1099" name="__codelineno-0-1099"></a><span class="sd">                      EPSG: 4326</span>
<a id="__codelineno-0-1100" name="__codelineno-0-1100"></a><span class="sd">                      Number of Bands: 1</span>
<a id="__codelineno-0-1101" name="__codelineno-0-1101"></a><span class="sd">                      Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-1102" name="__codelineno-0-1102"></a><span class="sd">                      Mask: -9999.0</span>
<a id="__codelineno-0-1103" name="__codelineno-0-1103"></a><span class="sd">                      Data type: float64</span>
<a id="__codelineno-0-1104" name="__codelineno-0-1104"></a><span class="sd">                      File: copy-dataset.tif</span>
<a id="__codelineno-0-1105" name="__codelineno-0-1105"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1106" name="__codelineno-0-1106"></a>
<a id="__codelineno-0-1107" name="__codelineno-0-1107"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1108" name="__codelineno-0-1108"></a>
<a id="__codelineno-0-1109" name="__codelineno-0-1109"></a><span class="sd">        - Now close the dataset.</span>
<a id="__codelineno-0-1110" name="__codelineno-0-1110"></a>
<a id="__codelineno-0-1111" name="__codelineno-0-1111"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-1112" name="__codelineno-0-1112"></a><span class="sd">          &gt;&gt;&gt; copied_dataset.close()</span>
<a id="__codelineno-0-1113" name="__codelineno-0-1113"></a>
<a id="__codelineno-0-1114" name="__codelineno-0-1114"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1115" name="__codelineno-0-1115"></a>
<a id="__codelineno-0-1116" name="__codelineno-0-1116"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1117" name="__codelineno-0-1117"></a>    <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1118" name="__codelineno-0-1118"></a>        <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<a id="__codelineno-0-1119" name="__codelineno-0-1119"></a>        <span class="n">driver</span> <span class="o">=</span> <span class="s2">&quot;MEM&quot;</span>
<a id="__codelineno-0-1120" name="__codelineno-0-1120"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1121" name="__codelineno-0-1121"></a>        <span class="n">driver</span> <span class="o">=</span> <span class="s2">&quot;GTiff&quot;</span>
<a id="__codelineno-0-1122" name="__codelineno-0-1122"></a>
<a id="__codelineno-0-1123" name="__codelineno-0-1123"></a>    <span class="n">src</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span><span class="o">.</span><span class="n">CreateCopy</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_raster</span><span class="p">)</span>
<a id="__codelineno-0-1124" name="__codelineno-0-1124"></a>
<a id="__codelineno-0-1125" name="__codelineno-0-1125"></a>    <span class="k">return</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">access</span><span class="o">=</span><span class="s2">&quot;write&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.close" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.close" class="toclink">
            <code class="highlight language-python"><span class="n">close</span><span class="p">()</span></code>

</a><a href="#pyramids.dataset.Dataset.close" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Close the dataset.</p>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1127">1127</a></span>
<span class="normal"><a href="#__codelineno-0-1128">1128</a></span>
<span class="normal"><a href="#__codelineno-0-1129">1129</a></span>
<span class="normal"><a href="#__codelineno-0-1130">1130</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1127" name="__codelineno-0-1127"></a><span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-1128" name="__codelineno-0-1128"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Close the dataset.&quot;&quot;&quot;</span>
<a id="__codelineno-0-1129" name="__codelineno-0-1129"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_raster</span><span class="o">.</span><span class="n">FlushCache</span><span class="p">()</span>
<a id="__codelineno-0-1130" name="__codelineno-0-1130"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_raster</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.get_attribute_table" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.get_attribute_table" class="toclink">
            <code class="highlight language-python"><span class="n">get_attribute_table</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.get_attribute_table" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Get the attribute table for a given band.</p>
<div class="highlight"><pre><span></span><code>- Get the attribute table of a band.
</code></pre></div>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>band</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Band index, the index starts from 1.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DataFrame</code></td>            <td>
                  <code><span title="geopandas.geodataframe.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame with the attribute table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Read a dataset and fetch its attribute table:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&quot;examples/data/geotiff/south-america-mswep_1979010100.tif&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_attribute_table</span><span class="p">()</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>  <span class="n">Precipitation</span> <span class="n">Range</span> <span class="p">(</span><span class="n">mm</span><span class="p">)</span>   <span class="n">Category</span>              <span class="n">Description</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="mi">0</span>                     <span class="mi">0</span><span class="o">-</span><span class="mi">50</span>        <span class="n">Low</span>   <span class="n">Very</span> <span class="n">low</span> <span class="n">precipitation</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="mi">1</span>                   <span class="mi">51</span><span class="o">-</span><span class="mi">100</span>   <span class="n">Moderate</span>   <span class="n">Moderate</span> <span class="n">precipitation</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="mi">2</span>                  <span class="mi">101</span><span class="o">-</span><span class="mi">200</span>       <span class="n">High</span>       <span class="n">High</span> <span class="n">precipitation</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="mi">3</span>                  <span class="mi">201</span><span class="o">-</span><span class="mi">500</span>  <span class="n">Very</span> <span class="n">High</span>  <span class="n">Very</span> <span class="n">high</span> <span class="n">precipitation</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="mi">4</span>                     <span class="o">&gt;</span><span class="mi">500</span>    <span class="n">Extreme</span>    <span class="n">Extreme</span> <span class="n">precipitation</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1155">1155</a></span>
<span class="normal"><a href="#__codelineno-0-1156">1156</a></span>
<span class="normal"><a href="#__codelineno-0-1157">1157</a></span>
<span class="normal"><a href="#__codelineno-0-1158">1158</a></span>
<span class="normal"><a href="#__codelineno-0-1159">1159</a></span>
<span class="normal"><a href="#__codelineno-0-1160">1160</a></span>
<span class="normal"><a href="#__codelineno-0-1161">1161</a></span>
<span class="normal"><a href="#__codelineno-0-1162">1162</a></span>
<span class="normal"><a href="#__codelineno-0-1163">1163</a></span>
<span class="normal"><a href="#__codelineno-0-1164">1164</a></span>
<span class="normal"><a href="#__codelineno-0-1165">1165</a></span>
<span class="normal"><a href="#__codelineno-0-1166">1166</a></span>
<span class="normal"><a href="#__codelineno-0-1167">1167</a></span>
<span class="normal"><a href="#__codelineno-0-1168">1168</a></span>
<span class="normal"><a href="#__codelineno-0-1169">1169</a></span>
<span class="normal"><a href="#__codelineno-0-1170">1170</a></span>
<span class="normal"><a href="#__codelineno-0-1171">1171</a></span>
<span class="normal"><a href="#__codelineno-0-1172">1172</a></span>
<span class="normal"><a href="#__codelineno-0-1173">1173</a></span>
<span class="normal"><a href="#__codelineno-0-1174">1174</a></span>
<span class="normal"><a href="#__codelineno-0-1175">1175</a></span>
<span class="normal"><a href="#__codelineno-0-1176">1176</a></span>
<span class="normal"><a href="#__codelineno-0-1177">1177</a></span>
<span class="normal"><a href="#__codelineno-0-1178">1178</a></span>
<span class="normal"><a href="#__codelineno-0-1179">1179</a></span>
<span class="normal"><a href="#__codelineno-0-1180">1180</a></span>
<span class="normal"><a href="#__codelineno-0-1181">1181</a></span>
<span class="normal"><a href="#__codelineno-0-1182">1182</a></span>
<span class="normal"><a href="#__codelineno-0-1183">1183</a></span>
<span class="normal"><a href="#__codelineno-0-1184">1184</a></span>
<span class="normal"><a href="#__codelineno-0-1185">1185</a></span>
<span class="normal"><a href="#__codelineno-0-1186">1186</a></span>
<span class="normal"><a href="#__codelineno-0-1187">1187</a></span>
<span class="normal"><a href="#__codelineno-0-1188">1188</a></span>
<span class="normal"><a href="#__codelineno-0-1189">1189</a></span>
<span class="normal"><a href="#__codelineno-0-1190">1190</a></span>
<span class="normal"><a href="#__codelineno-0-1191">1191</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1155" name="__codelineno-0-1155"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_attribute_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-1156" name="__codelineno-0-1156"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the attribute table for a given band.</span>
<a id="__codelineno-0-1157" name="__codelineno-0-1157"></a>
<a id="__codelineno-0-1158" name="__codelineno-0-1158"></a><span class="sd">        - Get the attribute table of a band.</span>
<a id="__codelineno-0-1159" name="__codelineno-0-1159"></a>
<a id="__codelineno-0-1160" name="__codelineno-0-1160"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1161" name="__codelineno-0-1161"></a><span class="sd">        band (int):</span>
<a id="__codelineno-0-1162" name="__codelineno-0-1162"></a><span class="sd">            Band index, the index starts from 1.</span>
<a id="__codelineno-0-1163" name="__codelineno-0-1163"></a>
<a id="__codelineno-0-1164" name="__codelineno-0-1164"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1165" name="__codelineno-0-1165"></a><span class="sd">        DataFrame:</span>
<a id="__codelineno-0-1166" name="__codelineno-0-1166"></a><span class="sd">            DataFrame with the attribute table.</span>
<a id="__codelineno-0-1167" name="__codelineno-0-1167"></a>
<a id="__codelineno-0-1168" name="__codelineno-0-1168"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-1169" name="__codelineno-0-1169"></a><span class="sd">        - Read a dataset and fetch its attribute table:</span>
<a id="__codelineno-0-1170" name="__codelineno-0-1170"></a>
<a id="__codelineno-0-1171" name="__codelineno-0-1171"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-1172" name="__codelineno-0-1172"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.read_file(&quot;examples/data/geotiff/south-america-mswep_1979010100.tif&quot;)</span>
<a id="__codelineno-0-1173" name="__codelineno-0-1173"></a><span class="sd">          &gt;&gt;&gt; df = dataset.get_attribute_table()</span>
<a id="__codelineno-0-1174" name="__codelineno-0-1174"></a><span class="sd">          &gt;&gt;&gt; print(df)</span>
<a id="__codelineno-0-1175" name="__codelineno-0-1175"></a><span class="sd">            Precipitation Range (mm)   Category              Description</span>
<a id="__codelineno-0-1176" name="__codelineno-0-1176"></a><span class="sd">          0                     0-50        Low   Very low precipitation</span>
<a id="__codelineno-0-1177" name="__codelineno-0-1177"></a><span class="sd">          1                   51-100   Moderate   Moderate precipitation</span>
<a id="__codelineno-0-1178" name="__codelineno-0-1178"></a><span class="sd">          2                  101-200       High       High precipitation</span>
<a id="__codelineno-0-1179" name="__codelineno-0-1179"></a><span class="sd">          3                  201-500  Very High  Very high precipitation</span>
<a id="__codelineno-0-1180" name="__codelineno-0-1180"></a><span class="sd">          4                     &gt;500    Extreme    Extreme precipitation</span>
<a id="__codelineno-0-1181" name="__codelineno-0-1181"></a>
<a id="__codelineno-0-1182" name="__codelineno-0-1182"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1183" name="__codelineno-0-1183"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1184" name="__codelineno-0-1184"></a>    <span class="n">band</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-1185" name="__codelineno-0-1185"></a>    <span class="n">rat</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">GetDefaultRAT</span><span class="p">()</span>
<a id="__codelineno-0-1186" name="__codelineno-0-1186"></a>    <span class="k">if</span> <span class="n">rat</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1187" name="__codelineno-0-1187"></a>        <span class="n">df</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-1188" name="__codelineno-0-1188"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1189" name="__codelineno-0-1189"></a>        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attribute_table_to_df</span><span class="p">(</span><span class="n">rat</span><span class="p">)</span>
<a id="__codelineno-0-1190" name="__codelineno-0-1190"></a>
<a id="__codelineno-0-1191" name="__codelineno-0-1191"></a>    <span class="k">return</span> <span class="n">df</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.set_attribute_table" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.set_attribute_table" class="toclink">
            <code class="highlight language-python"><span class="n">set_attribute_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.set_attribute_table" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Set the attribute table for a band.</p>
<p>The attribute table can be used to associate tabular data with the values of a raster band.
This is particularly useful for categorical raster data, such as land cover classifications, where each pixel
value corresponds to a category that has additional attributes (e.g., class name, color description).</p>


<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>The attribute table is stored in an xml file by the name of the raster file with the extension of .aux.xml.</li>
<li>Setting an attribute table to a band will overwrite the existing attribute table if it exists.</li>
<li>Setting an attribute table to a band does not need the dataset to be opened in a write mode.</li>
</ul>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df</code>
            </td>
            <td>
                  <code><span title="geopandas.geodataframe.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame with the attribute table.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>band</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Band index.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>First create a dataset:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">...</span> <span class="n">cell_size</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;float32&quot;</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">...</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">,</span> <span class="n">no_data_value</span><span class="o">=-</span><span class="mi">9999</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">...</span> <span class="p">)</span>
</code></pre></div>
<ul>
<li>Create a DataFrame with the attribute table:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">...</span>     <span class="s2">&quot;Value&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="o">...</span>     <span class="s2">&quot;ClassName&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Forest&quot;</span><span class="p">,</span> <span class="s2">&quot;Water&quot;</span><span class="p">,</span> <span class="s2">&quot;Urban&quot;</span><span class="p">],</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="o">...</span>     <span class="s2">&quot;Color&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;#008000&quot;</span><span class="p">,</span> <span class="s2">&quot;#0000FF&quot;</span><span class="p">,</span> <span class="s2">&quot;#808080&quot;</span><span class="p">],</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="o">...</span> <span class="p">}</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>Set the attribute table to the dataset:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">set_attribute_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>Then the attribute table can be retrieved using the <code>get_attribute_table</code> method.</li>
<li>The content of the attribute table will be stored in an xml file by the name of the raster file with
  the extension of .aux.xml. The content of the file will be like the following:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="w">    </span><span class="nt">&lt;PAMDataset&gt;</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">      </span><span class="nt">&lt;PAMRasterBand</span><span class="w"> </span><span class="na">band=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">        </span><span class="nt">&lt;GDALRasterAttributeTable</span><span class="w"> </span><span class="na">tableType=</span><span class="s">&quot;thematic&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">          </span><span class="nt">&lt;FieldDefn</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">            </span><span class="nt">&lt;Name&gt;</span>Precipitation<span class="w"> </span>Range<span class="w"> </span>(mm)<span class="nt">&lt;/Name&gt;</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">            </span><span class="nt">&lt;Type&gt;</span>2<span class="nt">&lt;/Type&gt;</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">            </span><span class="nt">&lt;Usage&gt;</span>0<span class="nt">&lt;/Usage&gt;</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">          </span><span class="nt">&lt;/FieldDefn&gt;</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">          </span><span class="nt">&lt;FieldDefn</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">            </span><span class="nt">&lt;Name&gt;</span>Category<span class="nt">&lt;/Name&gt;</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">            </span><span class="nt">&lt;Type&gt;</span>2<span class="nt">&lt;/Type&gt;</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">            </span><span class="nt">&lt;Usage&gt;</span>0<span class="nt">&lt;/Usage&gt;</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">          </span><span class="nt">&lt;/FieldDefn&gt;</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">          </span><span class="nt">&lt;FieldDefn</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">            </span><span class="nt">&lt;Name&gt;</span>Description<span class="nt">&lt;/Name&gt;</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">            </span><span class="nt">&lt;Type&gt;</span>2<span class="nt">&lt;/Type&gt;</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="w">            </span><span class="nt">&lt;Usage&gt;</span>0<span class="nt">&lt;/Usage&gt;</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="w">          </span><span class="nt">&lt;/FieldDefn&gt;</span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="w">          </span><span class="nt">&lt;Row</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="w">            </span><span class="nt">&lt;F&gt;</span>0-50<span class="nt">&lt;/F&gt;</span>
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="w">            </span><span class="nt">&lt;F&gt;</span>Low<span class="nt">&lt;/F&gt;</span>
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="w">            </span><span class="nt">&lt;F&gt;</span>Very<span class="w"> </span>low<span class="w"> </span>precipitation<span class="nt">&lt;/F&gt;</span>
<a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a><span class="w">          </span><span class="nt">&lt;/Row&gt;</span>
<a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a><span class="w">          </span><span class="nt">&lt;Row</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a><span class="w">            </span><span class="nt">&lt;F&gt;</span>51-100<span class="nt">&lt;/F&gt;</span>
<a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a><span class="w">            </span><span class="nt">&lt;F&gt;</span>Moderate<span class="nt">&lt;/F&gt;</span>
<a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a><span class="w">            </span><span class="nt">&lt;F&gt;</span>Moderate<span class="w"> </span>precipitation<span class="nt">&lt;/F&gt;</span>
<a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a><span class="w">          </span><span class="nt">&lt;/Row&gt;</span>
<a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a><span class="w">          </span><span class="nt">&lt;Row</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a><span class="w">            </span><span class="nt">&lt;F&gt;</span>101-200<span class="nt">&lt;/F&gt;</span>
<a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a><span class="w">            </span><span class="nt">&lt;F&gt;</span>High<span class="nt">&lt;/F&gt;</span>
<a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a><span class="w">            </span><span class="nt">&lt;F&gt;</span>High<span class="w"> </span>precipitation<span class="nt">&lt;/F&gt;</span>
<a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a><span class="w">          </span><span class="nt">&lt;/Row&gt;</span>
<a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a><span class="w">          </span><span class="nt">&lt;Row</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;3&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a><span class="w">            </span><span class="nt">&lt;F&gt;</span>201-500<span class="nt">&lt;/F&gt;</span>
<a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a><span class="w">            </span><span class="nt">&lt;F&gt;</span>Very<span class="w"> </span>High<span class="nt">&lt;/F&gt;</span>
<a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a><span class="w">            </span><span class="nt">&lt;F&gt;</span>Very<span class="w"> </span>high<span class="w"> </span>precipitation<span class="nt">&lt;/F&gt;</span>
<a id="__codelineno-3-38" name="__codelineno-3-38" href="#__codelineno-3-38"></a><span class="w">          </span><span class="nt">&lt;/Row&gt;</span>
<a id="__codelineno-3-39" name="__codelineno-3-39" href="#__codelineno-3-39"></a><span class="w">          </span><span class="nt">&lt;Row</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-3-40" name="__codelineno-3-40" href="#__codelineno-3-40"></a><span class="w">            </span><span class="nt">&lt;F&gt;</span><span class="ni">&amp;gt;</span>500<span class="nt">&lt;/F&gt;</span>
<a id="__codelineno-3-41" name="__codelineno-3-41" href="#__codelineno-3-41"></a><span class="w">            </span><span class="nt">&lt;F&gt;</span>Extreme<span class="nt">&lt;/F&gt;</span>
<a id="__codelineno-3-42" name="__codelineno-3-42" href="#__codelineno-3-42"></a><span class="w">            </span><span class="nt">&lt;F&gt;</span>Extreme<span class="w"> </span>precipitation<span class="nt">&lt;/F&gt;</span>
<a id="__codelineno-3-43" name="__codelineno-3-43" href="#__codelineno-3-43"></a><span class="w">          </span><span class="nt">&lt;/Row&gt;</span>
<a id="__codelineno-3-44" name="__codelineno-3-44" href="#__codelineno-3-44"></a><span class="w">        </span><span class="nt">&lt;/GDALRasterAttributeTable&gt;</span>
<a id="__codelineno-3-45" name="__codelineno-3-45" href="#__codelineno-3-45"></a><span class="w">      </span><span class="nt">&lt;/PAMRasterBand&gt;</span>
<a id="__codelineno-3-46" name="__codelineno-3-46" href="#__codelineno-3-46"></a><span class="w">    </span><span class="nt">&lt;/PAMDataset&gt;</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1193">1193</a></span>
<span class="normal"><a href="#__codelineno-0-1194">1194</a></span>
<span class="normal"><a href="#__codelineno-0-1195">1195</a></span>
<span class="normal"><a href="#__codelineno-0-1196">1196</a></span>
<span class="normal"><a href="#__codelineno-0-1197">1197</a></span>
<span class="normal"><a href="#__codelineno-0-1198">1198</a></span>
<span class="normal"><a href="#__codelineno-0-1199">1199</a></span>
<span class="normal"><a href="#__codelineno-0-1200">1200</a></span>
<span class="normal"><a href="#__codelineno-0-1201">1201</a></span>
<span class="normal"><a href="#__codelineno-0-1202">1202</a></span>
<span class="normal"><a href="#__codelineno-0-1203">1203</a></span>
<span class="normal"><a href="#__codelineno-0-1204">1204</a></span>
<span class="normal"><a href="#__codelineno-0-1205">1205</a></span>
<span class="normal"><a href="#__codelineno-0-1206">1206</a></span>
<span class="normal"><a href="#__codelineno-0-1207">1207</a></span>
<span class="normal"><a href="#__codelineno-0-1208">1208</a></span>
<span class="normal"><a href="#__codelineno-0-1209">1209</a></span>
<span class="normal"><a href="#__codelineno-0-1210">1210</a></span>
<span class="normal"><a href="#__codelineno-0-1211">1211</a></span>
<span class="normal"><a href="#__codelineno-0-1212">1212</a></span>
<span class="normal"><a href="#__codelineno-0-1213">1213</a></span>
<span class="normal"><a href="#__codelineno-0-1214">1214</a></span>
<span class="normal"><a href="#__codelineno-0-1215">1215</a></span>
<span class="normal"><a href="#__codelineno-0-1216">1216</a></span>
<span class="normal"><a href="#__codelineno-0-1217">1217</a></span>
<span class="normal"><a href="#__codelineno-0-1218">1218</a></span>
<span class="normal"><a href="#__codelineno-0-1219">1219</a></span>
<span class="normal"><a href="#__codelineno-0-1220">1220</a></span>
<span class="normal"><a href="#__codelineno-0-1221">1221</a></span>
<span class="normal"><a href="#__codelineno-0-1222">1222</a></span>
<span class="normal"><a href="#__codelineno-0-1223">1223</a></span>
<span class="normal"><a href="#__codelineno-0-1224">1224</a></span>
<span class="normal"><a href="#__codelineno-0-1225">1225</a></span>
<span class="normal"><a href="#__codelineno-0-1226">1226</a></span>
<span class="normal"><a href="#__codelineno-0-1227">1227</a></span>
<span class="normal"><a href="#__codelineno-0-1228">1228</a></span>
<span class="normal"><a href="#__codelineno-0-1229">1229</a></span>
<span class="normal"><a href="#__codelineno-0-1230">1230</a></span>
<span class="normal"><a href="#__codelineno-0-1231">1231</a></span>
<span class="normal"><a href="#__codelineno-0-1232">1232</a></span>
<span class="normal"><a href="#__codelineno-0-1233">1233</a></span>
<span class="normal"><a href="#__codelineno-0-1234">1234</a></span>
<span class="normal"><a href="#__codelineno-0-1235">1235</a></span>
<span class="normal"><a href="#__codelineno-0-1236">1236</a></span>
<span class="normal"><a href="#__codelineno-0-1237">1237</a></span>
<span class="normal"><a href="#__codelineno-0-1238">1238</a></span>
<span class="normal"><a href="#__codelineno-0-1239">1239</a></span>
<span class="normal"><a href="#__codelineno-0-1240">1240</a></span>
<span class="normal"><a href="#__codelineno-0-1241">1241</a></span>
<span class="normal"><a href="#__codelineno-0-1242">1242</a></span>
<span class="normal"><a href="#__codelineno-0-1243">1243</a></span>
<span class="normal"><a href="#__codelineno-0-1244">1244</a></span>
<span class="normal"><a href="#__codelineno-0-1245">1245</a></span>
<span class="normal"><a href="#__codelineno-0-1246">1246</a></span>
<span class="normal"><a href="#__codelineno-0-1247">1247</a></span>
<span class="normal"><a href="#__codelineno-0-1248">1248</a></span>
<span class="normal"><a href="#__codelineno-0-1249">1249</a></span>
<span class="normal"><a href="#__codelineno-0-1250">1250</a></span>
<span class="normal"><a href="#__codelineno-0-1251">1251</a></span>
<span class="normal"><a href="#__codelineno-0-1252">1252</a></span>
<span class="normal"><a href="#__codelineno-0-1253">1253</a></span>
<span class="normal"><a href="#__codelineno-0-1254">1254</a></span>
<span class="normal"><a href="#__codelineno-0-1255">1255</a></span>
<span class="normal"><a href="#__codelineno-0-1256">1256</a></span>
<span class="normal"><a href="#__codelineno-0-1257">1257</a></span>
<span class="normal"><a href="#__codelineno-0-1258">1258</a></span>
<span class="normal"><a href="#__codelineno-0-1259">1259</a></span>
<span class="normal"><a href="#__codelineno-0-1260">1260</a></span>
<span class="normal"><a href="#__codelineno-0-1261">1261</a></span>
<span class="normal"><a href="#__codelineno-0-1262">1262</a></span>
<span class="normal"><a href="#__codelineno-0-1263">1263</a></span>
<span class="normal"><a href="#__codelineno-0-1264">1264</a></span>
<span class="normal"><a href="#__codelineno-0-1265">1265</a></span>
<span class="normal"><a href="#__codelineno-0-1266">1266</a></span>
<span class="normal"><a href="#__codelineno-0-1267">1267</a></span>
<span class="normal"><a href="#__codelineno-0-1268">1268</a></span>
<span class="normal"><a href="#__codelineno-0-1269">1269</a></span>
<span class="normal"><a href="#__codelineno-0-1270">1270</a></span>
<span class="normal"><a href="#__codelineno-0-1271">1271</a></span>
<span class="normal"><a href="#__codelineno-0-1272">1272</a></span>
<span class="normal"><a href="#__codelineno-0-1273">1273</a></span>
<span class="normal"><a href="#__codelineno-0-1274">1274</a></span>
<span class="normal"><a href="#__codelineno-0-1275">1275</a></span>
<span class="normal"><a href="#__codelineno-0-1276">1276</a></span>
<span class="normal"><a href="#__codelineno-0-1277">1277</a></span>
<span class="normal"><a href="#__codelineno-0-1278">1278</a></span>
<span class="normal"><a href="#__codelineno-0-1279">1279</a></span>
<span class="normal"><a href="#__codelineno-0-1280">1280</a></span>
<span class="normal"><a href="#__codelineno-0-1281">1281</a></span>
<span class="normal"><a href="#__codelineno-0-1282">1282</a></span>
<span class="normal"><a href="#__codelineno-0-1283">1283</a></span>
<span class="normal"><a href="#__codelineno-0-1284">1284</a></span>
<span class="normal"><a href="#__codelineno-0-1285">1285</a></span>
<span class="normal"><a href="#__codelineno-0-1286">1286</a></span>
<span class="normal"><a href="#__codelineno-0-1287">1287</a></span>
<span class="normal"><a href="#__codelineno-0-1288">1288</a></span>
<span class="normal"><a href="#__codelineno-0-1289">1289</a></span>
<span class="normal"><a href="#__codelineno-0-1290">1290</a></span>
<span class="normal"><a href="#__codelineno-0-1291">1291</a></span>
<span class="normal"><a href="#__codelineno-0-1292">1292</a></span>
<span class="normal"><a href="#__codelineno-0-1293">1293</a></span>
<span class="normal"><a href="#__codelineno-0-1294">1294</a></span>
<span class="normal"><a href="#__codelineno-0-1295">1295</a></span>
<span class="normal"><a href="#__codelineno-0-1296">1296</a></span>
<span class="normal"><a href="#__codelineno-0-1297">1297</a></span>
<span class="normal"><a href="#__codelineno-0-1298">1298</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1193" name="__codelineno-0-1193"></a><span class="k">def</span><span class="w"> </span><span class="nf">set_attribute_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">DataFrame</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1194" name="__codelineno-0-1194"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the attribute table for a band.</span>
<a id="__codelineno-0-1195" name="__codelineno-0-1195"></a>
<a id="__codelineno-0-1196" name="__codelineno-0-1196"></a><span class="sd">    The attribute table can be used to associate tabular data with the values of a raster band.</span>
<a id="__codelineno-0-1197" name="__codelineno-0-1197"></a><span class="sd">    This is particularly useful for categorical raster data, such as land cover classifications, where each pixel</span>
<a id="__codelineno-0-1198" name="__codelineno-0-1198"></a><span class="sd">    value corresponds to a category that has additional attributes (e.g., class name, color description).</span>
<a id="__codelineno-0-1199" name="__codelineno-0-1199"></a>
<a id="__codelineno-0-1200" name="__codelineno-0-1200"></a><span class="sd">    Notes:</span>
<a id="__codelineno-0-1201" name="__codelineno-0-1201"></a><span class="sd">        - The attribute table is stored in an xml file by the name of the raster file with the extension of .aux.xml.</span>
<a id="__codelineno-0-1202" name="__codelineno-0-1202"></a><span class="sd">        - Setting an attribute table to a band will overwrite the existing attribute table if it exists.</span>
<a id="__codelineno-0-1203" name="__codelineno-0-1203"></a><span class="sd">        - Setting an attribute table to a band does not need the dataset to be opened in a write mode.</span>
<a id="__codelineno-0-1204" name="__codelineno-0-1204"></a>
<a id="__codelineno-0-1205" name="__codelineno-0-1205"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1206" name="__codelineno-0-1206"></a><span class="sd">        df (DataFrame):</span>
<a id="__codelineno-0-1207" name="__codelineno-0-1207"></a><span class="sd">            DataFrame with the attribute table.</span>
<a id="__codelineno-0-1208" name="__codelineno-0-1208"></a><span class="sd">        band (int):</span>
<a id="__codelineno-0-1209" name="__codelineno-0-1209"></a><span class="sd">            Band index.</span>
<a id="__codelineno-0-1210" name="__codelineno-0-1210"></a>
<a id="__codelineno-0-1211" name="__codelineno-0-1211"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-1212" name="__codelineno-0-1212"></a><span class="sd">        - First create a dataset:</span>
<a id="__codelineno-0-1213" name="__codelineno-0-1213"></a>
<a id="__codelineno-0-1214" name="__codelineno-0-1214"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-1215" name="__codelineno-0-1215"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create(</span>
<a id="__codelineno-0-1216" name="__codelineno-0-1216"></a><span class="sd">          ... cell_size=0.05, rows=10, columns=10, dtype=&quot;float32&quot;, bands=1, top_left_corner=(0, 0),</span>
<a id="__codelineno-0-1217" name="__codelineno-0-1217"></a><span class="sd">          ... epsg=4326, no_data_value=-9999</span>
<a id="__codelineno-0-1218" name="__codelineno-0-1218"></a><span class="sd">          ... )</span>
<a id="__codelineno-0-1219" name="__codelineno-0-1219"></a>
<a id="__codelineno-0-1220" name="__codelineno-0-1220"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1221" name="__codelineno-0-1221"></a>
<a id="__codelineno-0-1222" name="__codelineno-0-1222"></a><span class="sd">        - Create a DataFrame with the attribute table:</span>
<a id="__codelineno-0-1223" name="__codelineno-0-1223"></a>
<a id="__codelineno-0-1224" name="__codelineno-0-1224"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-1225" name="__codelineno-0-1225"></a><span class="sd">          &gt;&gt;&gt; data = {</span>
<a id="__codelineno-0-1226" name="__codelineno-0-1226"></a><span class="sd">          ...     &quot;Value&quot;: [1, 2, 3],</span>
<a id="__codelineno-0-1227" name="__codelineno-0-1227"></a><span class="sd">          ...     &quot;ClassName&quot;: [&quot;Forest&quot;, &quot;Water&quot;, &quot;Urban&quot;],</span>
<a id="__codelineno-0-1228" name="__codelineno-0-1228"></a><span class="sd">          ...     &quot;Color&quot;: [&quot;#008000&quot;, &quot;#0000FF&quot;, &quot;#808080&quot;],</span>
<a id="__codelineno-0-1229" name="__codelineno-0-1229"></a><span class="sd">          ... }</span>
<a id="__codelineno-0-1230" name="__codelineno-0-1230"></a><span class="sd">          &gt;&gt;&gt; df = pd.DataFrame(data)</span>
<a id="__codelineno-0-1231" name="__codelineno-0-1231"></a>
<a id="__codelineno-0-1232" name="__codelineno-0-1232"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1233" name="__codelineno-0-1233"></a>
<a id="__codelineno-0-1234" name="__codelineno-0-1234"></a><span class="sd">        - Set the attribute table to the dataset:</span>
<a id="__codelineno-0-1235" name="__codelineno-0-1235"></a>
<a id="__codelineno-0-1236" name="__codelineno-0-1236"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-1237" name="__codelineno-0-1237"></a><span class="sd">          &gt;&gt;&gt; dataset.set_attribute_table(df, band=0)</span>
<a id="__codelineno-0-1238" name="__codelineno-0-1238"></a>
<a id="__codelineno-0-1239" name="__codelineno-0-1239"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1240" name="__codelineno-0-1240"></a>
<a id="__codelineno-0-1241" name="__codelineno-0-1241"></a><span class="sd">        - Then the attribute table can be retrieved using the `get_attribute_table` method.</span>
<a id="__codelineno-0-1242" name="__codelineno-0-1242"></a><span class="sd">        - The content of the attribute table will be stored in an xml file by the name of the raster file with</span>
<a id="__codelineno-0-1243" name="__codelineno-0-1243"></a><span class="sd">          the extension of .aux.xml. The content of the file will be like the following:</span>
<a id="__codelineno-0-1244" name="__codelineno-0-1244"></a>
<a id="__codelineno-0-1245" name="__codelineno-0-1245"></a><span class="sd">          ```xml</span>
<a id="__codelineno-0-1246" name="__codelineno-0-1246"></a>
<a id="__codelineno-0-1247" name="__codelineno-0-1247"></a><span class="sd">              &lt;PAMDataset&gt;</span>
<a id="__codelineno-0-1248" name="__codelineno-0-1248"></a><span class="sd">                &lt;PAMRasterBand band=&quot;1&quot;&gt;</span>
<a id="__codelineno-0-1249" name="__codelineno-0-1249"></a><span class="sd">                  &lt;GDALRasterAttributeTable tableType=&quot;thematic&quot;&gt;</span>
<a id="__codelineno-0-1250" name="__codelineno-0-1250"></a><span class="sd">                    &lt;FieldDefn index=&quot;0&quot;&gt;</span>
<a id="__codelineno-0-1251" name="__codelineno-0-1251"></a><span class="sd">                      &lt;Name&gt;Precipitation Range (mm)&lt;/Name&gt;</span>
<a id="__codelineno-0-1252" name="__codelineno-0-1252"></a><span class="sd">                      &lt;Type&gt;2&lt;/Type&gt;</span>
<a id="__codelineno-0-1253" name="__codelineno-0-1253"></a><span class="sd">                      &lt;Usage&gt;0&lt;/Usage&gt;</span>
<a id="__codelineno-0-1254" name="__codelineno-0-1254"></a><span class="sd">                    &lt;/FieldDefn&gt;</span>
<a id="__codelineno-0-1255" name="__codelineno-0-1255"></a><span class="sd">                    &lt;FieldDefn index=&quot;1&quot;&gt;</span>
<a id="__codelineno-0-1256" name="__codelineno-0-1256"></a><span class="sd">                      &lt;Name&gt;Category&lt;/Name&gt;</span>
<a id="__codelineno-0-1257" name="__codelineno-0-1257"></a><span class="sd">                      &lt;Type&gt;2&lt;/Type&gt;</span>
<a id="__codelineno-0-1258" name="__codelineno-0-1258"></a><span class="sd">                      &lt;Usage&gt;0&lt;/Usage&gt;</span>
<a id="__codelineno-0-1259" name="__codelineno-0-1259"></a><span class="sd">                    &lt;/FieldDefn&gt;</span>
<a id="__codelineno-0-1260" name="__codelineno-0-1260"></a><span class="sd">                    &lt;FieldDefn index=&quot;2&quot;&gt;</span>
<a id="__codelineno-0-1261" name="__codelineno-0-1261"></a><span class="sd">                      &lt;Name&gt;Description&lt;/Name&gt;</span>
<a id="__codelineno-0-1262" name="__codelineno-0-1262"></a><span class="sd">                      &lt;Type&gt;2&lt;/Type&gt;</span>
<a id="__codelineno-0-1263" name="__codelineno-0-1263"></a><span class="sd">                      &lt;Usage&gt;0&lt;/Usage&gt;</span>
<a id="__codelineno-0-1264" name="__codelineno-0-1264"></a><span class="sd">                    &lt;/FieldDefn&gt;</span>
<a id="__codelineno-0-1265" name="__codelineno-0-1265"></a><span class="sd">                    &lt;Row index=&quot;0&quot;&gt;</span>
<a id="__codelineno-0-1266" name="__codelineno-0-1266"></a><span class="sd">                      &lt;F&gt;0-50&lt;/F&gt;</span>
<a id="__codelineno-0-1267" name="__codelineno-0-1267"></a><span class="sd">                      &lt;F&gt;Low&lt;/F&gt;</span>
<a id="__codelineno-0-1268" name="__codelineno-0-1268"></a><span class="sd">                      &lt;F&gt;Very low precipitation&lt;/F&gt;</span>
<a id="__codelineno-0-1269" name="__codelineno-0-1269"></a><span class="sd">                    &lt;/Row&gt;</span>
<a id="__codelineno-0-1270" name="__codelineno-0-1270"></a><span class="sd">                    &lt;Row index=&quot;1&quot;&gt;</span>
<a id="__codelineno-0-1271" name="__codelineno-0-1271"></a><span class="sd">                      &lt;F&gt;51-100&lt;/F&gt;</span>
<a id="__codelineno-0-1272" name="__codelineno-0-1272"></a><span class="sd">                      &lt;F&gt;Moderate&lt;/F&gt;</span>
<a id="__codelineno-0-1273" name="__codelineno-0-1273"></a><span class="sd">                      &lt;F&gt;Moderate precipitation&lt;/F&gt;</span>
<a id="__codelineno-0-1274" name="__codelineno-0-1274"></a><span class="sd">                    &lt;/Row&gt;</span>
<a id="__codelineno-0-1275" name="__codelineno-0-1275"></a><span class="sd">                    &lt;Row index=&quot;2&quot;&gt;</span>
<a id="__codelineno-0-1276" name="__codelineno-0-1276"></a><span class="sd">                      &lt;F&gt;101-200&lt;/F&gt;</span>
<a id="__codelineno-0-1277" name="__codelineno-0-1277"></a><span class="sd">                      &lt;F&gt;High&lt;/F&gt;</span>
<a id="__codelineno-0-1278" name="__codelineno-0-1278"></a><span class="sd">                      &lt;F&gt;High precipitation&lt;/F&gt;</span>
<a id="__codelineno-0-1279" name="__codelineno-0-1279"></a><span class="sd">                    &lt;/Row&gt;</span>
<a id="__codelineno-0-1280" name="__codelineno-0-1280"></a><span class="sd">                    &lt;Row index=&quot;3&quot;&gt;</span>
<a id="__codelineno-0-1281" name="__codelineno-0-1281"></a><span class="sd">                      &lt;F&gt;201-500&lt;/F&gt;</span>
<a id="__codelineno-0-1282" name="__codelineno-0-1282"></a><span class="sd">                      &lt;F&gt;Very High&lt;/F&gt;</span>
<a id="__codelineno-0-1283" name="__codelineno-0-1283"></a><span class="sd">                      &lt;F&gt;Very high precipitation&lt;/F&gt;</span>
<a id="__codelineno-0-1284" name="__codelineno-0-1284"></a><span class="sd">                    &lt;/Row&gt;</span>
<a id="__codelineno-0-1285" name="__codelineno-0-1285"></a><span class="sd">                    &lt;Row index=&quot;4&quot;&gt;</span>
<a id="__codelineno-0-1286" name="__codelineno-0-1286"></a><span class="sd">                      &lt;F&gt;&amp;gt;500&lt;/F&gt;</span>
<a id="__codelineno-0-1287" name="__codelineno-0-1287"></a><span class="sd">                      &lt;F&gt;Extreme&lt;/F&gt;</span>
<a id="__codelineno-0-1288" name="__codelineno-0-1288"></a><span class="sd">                      &lt;F&gt;Extreme precipitation&lt;/F&gt;</span>
<a id="__codelineno-0-1289" name="__codelineno-0-1289"></a><span class="sd">                    &lt;/Row&gt;</span>
<a id="__codelineno-0-1290" name="__codelineno-0-1290"></a><span class="sd">                  &lt;/GDALRasterAttributeTable&gt;</span>
<a id="__codelineno-0-1291" name="__codelineno-0-1291"></a><span class="sd">                &lt;/PAMRasterBand&gt;</span>
<a id="__codelineno-0-1292" name="__codelineno-0-1292"></a><span class="sd">              &lt;/PAMDataset&gt;</span>
<a id="__codelineno-0-1293" name="__codelineno-0-1293"></a>
<a id="__codelineno-0-1294" name="__codelineno-0-1294"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1295" name="__codelineno-0-1295"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1296" name="__codelineno-0-1296"></a>    <span class="n">rat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df_to_attribute_table</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-0-1297" name="__codelineno-0-1297"></a>    <span class="n">band</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-1298" name="__codelineno-0-1298"></a>    <span class="n">band</span><span class="o">.</span><span class="n">SetDefaultRAT</span><span class="p">(</span><span class="n">rat</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.add_band" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.add_band" class="toclink">
            <code class="highlight language-python"><span class="n">add_band</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attribute_table</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.add_band" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Add a new band to the dataset.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>array</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>2D array to add as a new band.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>unit</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unit of the values in the new band.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>attribute_table</code>
            </td>
            <td>
                  <code><span title="geopandas.geodataframe.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Attribute table provides a way to associate tabular data with the values of a raster band. This is
particularly useful for categorical raster data, such as land cover classifications, where each pixel
value corresponds to a category that has additional attributes (e.g., class name, color, description).
Default is None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>inplace</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True the new band will be added to the current dataset, if False the new band will be added to a
new dataset. Default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[None, <a class="autorefs autorefs-internal" title="&lt;code&gt;pyramids.dataset.Dataset&lt;/code&gt;" href="#pyramids.dataset.Dataset">Dataset</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>First create a dataset:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">...</span> <span class="n">cell_size</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;float32&quot;</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">...</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">,</span> <span class="n">no_data_value</span><span class="o">=-</span><span class="mi">9999</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">...</span> <span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">0.05</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">10</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">4326</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">1</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">]</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">9999.0</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">float32</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>            <span class="n">File</span><span class="p">:</span><span class="o">...</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
</code></pre></div>
<ul>
<li>Create a 2D array to add as a new band:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>Add the new band to the dataset inplace:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">add_band</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;m&quot;</span><span class="p">,</span> <span class="n">attribute_table</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">0.05</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">10</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">4326</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">2</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_2&#39;</span><span class="p">]</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">9999.0</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">float32</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>            <span class="n">File</span><span class="p">:</span><span class="o">...</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
</code></pre></div>
<ul>
<li>The new band will be added to the dataset inplace.</li>
<li>You can also add an attribute table to the band when you add a new band to the dataset.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="o">...</span>     <span class="s2">&quot;Value&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="o">...</span>     <span class="s2">&quot;ClassName&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Forest&quot;</span><span class="p">,</span> <span class="s2">&quot;Water&quot;</span><span class="p">,</span> <span class="s2">&quot;Urban&quot;</span><span class="p">],</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="o">...</span>     <span class="s2">&quot;Color&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;#008000&quot;</span><span class="p">,</span> <span class="s2">&quot;#0000FF&quot;</span><span class="p">,</span> <span class="s2">&quot;#808080&quot;</span><span class="p">],</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="o">...</span> <span class="p">}</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">add_band</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;m&quot;</span><span class="p">,</span> <span class="n">attribute_table</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>


<details class="see-also" open>
  <summary>See Also</summary>
  <p>Dataset.create_from_array: create a new dataset from an array.
Dataset.create: create a new dataset with an empty band.
Dataset.dataset_like: create a new dataset from another dataset.
Dataset.get_attribute_table: get the attribute table for a specific band.
Dataset.set_attribute_table: Set the attribute table for a specific band.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1382">1382</a></span>
<span class="normal"><a href="#__codelineno-0-1383">1383</a></span>
<span class="normal"><a href="#__codelineno-0-1384">1384</a></span>
<span class="normal"><a href="#__codelineno-0-1385">1385</a></span>
<span class="normal"><a href="#__codelineno-0-1386">1386</a></span>
<span class="normal"><a href="#__codelineno-0-1387">1387</a></span>
<span class="normal"><a href="#__codelineno-0-1388">1388</a></span>
<span class="normal"><a href="#__codelineno-0-1389">1389</a></span>
<span class="normal"><a href="#__codelineno-0-1390">1390</a></span>
<span class="normal"><a href="#__codelineno-0-1391">1391</a></span>
<span class="normal"><a href="#__codelineno-0-1392">1392</a></span>
<span class="normal"><a href="#__codelineno-0-1393">1393</a></span>
<span class="normal"><a href="#__codelineno-0-1394">1394</a></span>
<span class="normal"><a href="#__codelineno-0-1395">1395</a></span>
<span class="normal"><a href="#__codelineno-0-1396">1396</a></span>
<span class="normal"><a href="#__codelineno-0-1397">1397</a></span>
<span class="normal"><a href="#__codelineno-0-1398">1398</a></span>
<span class="normal"><a href="#__codelineno-0-1399">1399</a></span>
<span class="normal"><a href="#__codelineno-0-1400">1400</a></span>
<span class="normal"><a href="#__codelineno-0-1401">1401</a></span>
<span class="normal"><a href="#__codelineno-0-1402">1402</a></span>
<span class="normal"><a href="#__codelineno-0-1403">1403</a></span>
<span class="normal"><a href="#__codelineno-0-1404">1404</a></span>
<span class="normal"><a href="#__codelineno-0-1405">1405</a></span>
<span class="normal"><a href="#__codelineno-0-1406">1406</a></span>
<span class="normal"><a href="#__codelineno-0-1407">1407</a></span>
<span class="normal"><a href="#__codelineno-0-1408">1408</a></span>
<span class="normal"><a href="#__codelineno-0-1409">1409</a></span>
<span class="normal"><a href="#__codelineno-0-1410">1410</a></span>
<span class="normal"><a href="#__codelineno-0-1411">1411</a></span>
<span class="normal"><a href="#__codelineno-0-1412">1412</a></span>
<span class="normal"><a href="#__codelineno-0-1413">1413</a></span>
<span class="normal"><a href="#__codelineno-0-1414">1414</a></span>
<span class="normal"><a href="#__codelineno-0-1415">1415</a></span>
<span class="normal"><a href="#__codelineno-0-1416">1416</a></span>
<span class="normal"><a href="#__codelineno-0-1417">1417</a></span>
<span class="normal"><a href="#__codelineno-0-1418">1418</a></span>
<span class="normal"><a href="#__codelineno-0-1419">1419</a></span>
<span class="normal"><a href="#__codelineno-0-1420">1420</a></span>
<span class="normal"><a href="#__codelineno-0-1421">1421</a></span>
<span class="normal"><a href="#__codelineno-0-1422">1422</a></span>
<span class="normal"><a href="#__codelineno-0-1423">1423</a></span>
<span class="normal"><a href="#__codelineno-0-1424">1424</a></span>
<span class="normal"><a href="#__codelineno-0-1425">1425</a></span>
<span class="normal"><a href="#__codelineno-0-1426">1426</a></span>
<span class="normal"><a href="#__codelineno-0-1427">1427</a></span>
<span class="normal"><a href="#__codelineno-0-1428">1428</a></span>
<span class="normal"><a href="#__codelineno-0-1429">1429</a></span>
<span class="normal"><a href="#__codelineno-0-1430">1430</a></span>
<span class="normal"><a href="#__codelineno-0-1431">1431</a></span>
<span class="normal"><a href="#__codelineno-0-1432">1432</a></span>
<span class="normal"><a href="#__codelineno-0-1433">1433</a></span>
<span class="normal"><a href="#__codelineno-0-1434">1434</a></span>
<span class="normal"><a href="#__codelineno-0-1435">1435</a></span>
<span class="normal"><a href="#__codelineno-0-1436">1436</a></span>
<span class="normal"><a href="#__codelineno-0-1437">1437</a></span>
<span class="normal"><a href="#__codelineno-0-1438">1438</a></span>
<span class="normal"><a href="#__codelineno-0-1439">1439</a></span>
<span class="normal"><a href="#__codelineno-0-1440">1440</a></span>
<span class="normal"><a href="#__codelineno-0-1441">1441</a></span>
<span class="normal"><a href="#__codelineno-0-1442">1442</a></span>
<span class="normal"><a href="#__codelineno-0-1443">1443</a></span>
<span class="normal"><a href="#__codelineno-0-1444">1444</a></span>
<span class="normal"><a href="#__codelineno-0-1445">1445</a></span>
<span class="normal"><a href="#__codelineno-0-1446">1446</a></span>
<span class="normal"><a href="#__codelineno-0-1447">1447</a></span>
<span class="normal"><a href="#__codelineno-0-1448">1448</a></span>
<span class="normal"><a href="#__codelineno-0-1449">1449</a></span>
<span class="normal"><a href="#__codelineno-0-1450">1450</a></span>
<span class="normal"><a href="#__codelineno-0-1451">1451</a></span>
<span class="normal"><a href="#__codelineno-0-1452">1452</a></span>
<span class="normal"><a href="#__codelineno-0-1453">1453</a></span>
<span class="normal"><a href="#__codelineno-0-1454">1454</a></span>
<span class="normal"><a href="#__codelineno-0-1455">1455</a></span>
<span class="normal"><a href="#__codelineno-0-1456">1456</a></span>
<span class="normal"><a href="#__codelineno-0-1457">1457</a></span>
<span class="normal"><a href="#__codelineno-0-1458">1458</a></span>
<span class="normal"><a href="#__codelineno-0-1459">1459</a></span>
<span class="normal"><a href="#__codelineno-0-1460">1460</a></span>
<span class="normal"><a href="#__codelineno-0-1461">1461</a></span>
<span class="normal"><a href="#__codelineno-0-1462">1462</a></span>
<span class="normal"><a href="#__codelineno-0-1463">1463</a></span>
<span class="normal"><a href="#__codelineno-0-1464">1464</a></span>
<span class="normal"><a href="#__codelineno-0-1465">1465</a></span>
<span class="normal"><a href="#__codelineno-0-1466">1466</a></span>
<span class="normal"><a href="#__codelineno-0-1467">1467</a></span>
<span class="normal"><a href="#__codelineno-0-1468">1468</a></span>
<span class="normal"><a href="#__codelineno-0-1469">1469</a></span>
<span class="normal"><a href="#__codelineno-0-1470">1470</a></span>
<span class="normal"><a href="#__codelineno-0-1471">1471</a></span>
<span class="normal"><a href="#__codelineno-0-1472">1472</a></span>
<span class="normal"><a href="#__codelineno-0-1473">1473</a></span>
<span class="normal"><a href="#__codelineno-0-1474">1474</a></span>
<span class="normal"><a href="#__codelineno-0-1475">1475</a></span>
<span class="normal"><a href="#__codelineno-0-1476">1476</a></span>
<span class="normal"><a href="#__codelineno-0-1477">1477</a></span>
<span class="normal"><a href="#__codelineno-0-1478">1478</a></span>
<span class="normal"><a href="#__codelineno-0-1479">1479</a></span>
<span class="normal"><a href="#__codelineno-0-1480">1480</a></span>
<span class="normal"><a href="#__codelineno-0-1481">1481</a></span>
<span class="normal"><a href="#__codelineno-0-1482">1482</a></span>
<span class="normal"><a href="#__codelineno-0-1483">1483</a></span>
<span class="normal"><a href="#__codelineno-0-1484">1484</a></span>
<span class="normal"><a href="#__codelineno-0-1485">1485</a></span>
<span class="normal"><a href="#__codelineno-0-1486">1486</a></span>
<span class="normal"><a href="#__codelineno-0-1487">1487</a></span>
<span class="normal"><a href="#__codelineno-0-1488">1488</a></span>
<span class="normal"><a href="#__codelineno-0-1489">1489</a></span>
<span class="normal"><a href="#__codelineno-0-1490">1490</a></span>
<span class="normal"><a href="#__codelineno-0-1491">1491</a></span>
<span class="normal"><a href="#__codelineno-0-1492">1492</a></span>
<span class="normal"><a href="#__codelineno-0-1493">1493</a></span>
<span class="normal"><a href="#__codelineno-0-1494">1494</a></span>
<span class="normal"><a href="#__codelineno-0-1495">1495</a></span>
<span class="normal"><a href="#__codelineno-0-1496">1496</a></span>
<span class="normal"><a href="#__codelineno-0-1497">1497</a></span>
<span class="normal"><a href="#__codelineno-0-1498">1498</a></span>
<span class="normal"><a href="#__codelineno-0-1499">1499</a></span>
<span class="normal"><a href="#__codelineno-0-1500">1500</a></span>
<span class="normal"><a href="#__codelineno-0-1501">1501</a></span>
<span class="normal"><a href="#__codelineno-0-1502">1502</a></span>
<span class="normal"><a href="#__codelineno-0-1503">1503</a></span>
<span class="normal"><a href="#__codelineno-0-1504">1504</a></span>
<span class="normal"><a href="#__codelineno-0-1505">1505</a></span>
<span class="normal"><a href="#__codelineno-0-1506">1506</a></span>
<span class="normal"><a href="#__codelineno-0-1507">1507</a></span>
<span class="normal"><a href="#__codelineno-0-1508">1508</a></span>
<span class="normal"><a href="#__codelineno-0-1509">1509</a></span>
<span class="normal"><a href="#__codelineno-0-1510">1510</a></span>
<span class="normal"><a href="#__codelineno-0-1511">1511</a></span>
<span class="normal"><a href="#__codelineno-0-1512">1512</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1382" name="__codelineno-0-1382"></a><span class="k">def</span><span class="w"> </span><span class="nf">add_band</span><span class="p">(</span>
<a id="__codelineno-0-1383" name="__codelineno-0-1383"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-1384" name="__codelineno-0-1384"></a>    <span class="n">array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<a id="__codelineno-0-1385" name="__codelineno-0-1385"></a>    <span class="n">unit</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1386" name="__codelineno-0-1386"></a>    <span class="n">attribute_table</span><span class="p">:</span> <span class="n">DataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1387" name="__codelineno-0-1387"></a>    <span class="n">inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-1388" name="__codelineno-0-1388"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-1389" name="__codelineno-0-1389"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a new band to the dataset.</span>
<a id="__codelineno-0-1390" name="__codelineno-0-1390"></a>
<a id="__codelineno-0-1391" name="__codelineno-0-1391"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1392" name="__codelineno-0-1392"></a><span class="sd">        array (np.ndarray):</span>
<a id="__codelineno-0-1393" name="__codelineno-0-1393"></a><span class="sd">            2D array to add as a new band.</span>
<a id="__codelineno-0-1394" name="__codelineno-0-1394"></a><span class="sd">        unit (Any, optional):</span>
<a id="__codelineno-0-1395" name="__codelineno-0-1395"></a><span class="sd">            Unit of the values in the new band.</span>
<a id="__codelineno-0-1396" name="__codelineno-0-1396"></a><span class="sd">        attribute_table (DataFrame, optional):</span>
<a id="__codelineno-0-1397" name="__codelineno-0-1397"></a><span class="sd">            Attribute table provides a way to associate tabular data with the values of a raster band. This is</span>
<a id="__codelineno-0-1398" name="__codelineno-0-1398"></a><span class="sd">            particularly useful for categorical raster data, such as land cover classifications, where each pixel</span>
<a id="__codelineno-0-1399" name="__codelineno-0-1399"></a><span class="sd">            value corresponds to a category that has additional attributes (e.g., class name, color, description).</span>
<a id="__codelineno-0-1400" name="__codelineno-0-1400"></a><span class="sd">            Default is None.</span>
<a id="__codelineno-0-1401" name="__codelineno-0-1401"></a><span class="sd">        inplace (bool, optional):</span>
<a id="__codelineno-0-1402" name="__codelineno-0-1402"></a><span class="sd">            If True the new band will be added to the current dataset, if False the new band will be added to a</span>
<a id="__codelineno-0-1403" name="__codelineno-0-1403"></a><span class="sd">            new dataset. Default is False.</span>
<a id="__codelineno-0-1404" name="__codelineno-0-1404"></a>
<a id="__codelineno-0-1405" name="__codelineno-0-1405"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1406" name="__codelineno-0-1406"></a><span class="sd">        None</span>
<a id="__codelineno-0-1407" name="__codelineno-0-1407"></a>
<a id="__codelineno-0-1408" name="__codelineno-0-1408"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-1409" name="__codelineno-0-1409"></a><span class="sd">        - First create a dataset:</span>
<a id="__codelineno-0-1410" name="__codelineno-0-1410"></a>
<a id="__codelineno-0-1411" name="__codelineno-0-1411"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-1412" name="__codelineno-0-1412"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create(</span>
<a id="__codelineno-0-1413" name="__codelineno-0-1413"></a><span class="sd">          ... cell_size=0.05, rows=10, columns=10, dtype=&quot;float32&quot;, bands=1, top_left_corner=(0, 0),</span>
<a id="__codelineno-0-1414" name="__codelineno-0-1414"></a><span class="sd">          ... epsg=4326, no_data_value=-9999</span>
<a id="__codelineno-0-1415" name="__codelineno-0-1415"></a><span class="sd">          ... )</span>
<a id="__codelineno-0-1416" name="__codelineno-0-1416"></a><span class="sd">          &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-1417" name="__codelineno-0-1417"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1418" name="__codelineno-0-1418"></a><span class="sd">                      Cell size: 0.05</span>
<a id="__codelineno-0-1419" name="__codelineno-0-1419"></a><span class="sd">                      Dimension: 10 * 10</span>
<a id="__codelineno-0-1420" name="__codelineno-0-1420"></a><span class="sd">                      EPSG: 4326</span>
<a id="__codelineno-0-1421" name="__codelineno-0-1421"></a><span class="sd">                      Number of Bands: 1</span>
<a id="__codelineno-0-1422" name="__codelineno-0-1422"></a><span class="sd">                      Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-1423" name="__codelineno-0-1423"></a><span class="sd">                      Mask: -9999.0</span>
<a id="__codelineno-0-1424" name="__codelineno-0-1424"></a><span class="sd">                      Data type: float32</span>
<a id="__codelineno-0-1425" name="__codelineno-0-1425"></a><span class="sd">                      File:...</span>
<a id="__codelineno-0-1426" name="__codelineno-0-1426"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1427" name="__codelineno-0-1427"></a>
<a id="__codelineno-0-1428" name="__codelineno-0-1428"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1429" name="__codelineno-0-1429"></a>
<a id="__codelineno-0-1430" name="__codelineno-0-1430"></a><span class="sd">        - Create a 2D array to add as a new band:</span>
<a id="__codelineno-0-1431" name="__codelineno-0-1431"></a>
<a id="__codelineno-0-1432" name="__codelineno-0-1432"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-1433" name="__codelineno-0-1433"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-1434" name="__codelineno-0-1434"></a><span class="sd">          &gt;&gt;&gt; array = np.random.rand(10, 10)</span>
<a id="__codelineno-0-1435" name="__codelineno-0-1435"></a>
<a id="__codelineno-0-1436" name="__codelineno-0-1436"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1437" name="__codelineno-0-1437"></a>
<a id="__codelineno-0-1438" name="__codelineno-0-1438"></a><span class="sd">        - Add the new band to the dataset inplace:</span>
<a id="__codelineno-0-1439" name="__codelineno-0-1439"></a>
<a id="__codelineno-0-1440" name="__codelineno-0-1440"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-1441" name="__codelineno-0-1441"></a><span class="sd">          &gt;&gt;&gt; dataset.add_band(array, unit=&quot;m&quot;, attribute_table=None, inplace=True)</span>
<a id="__codelineno-0-1442" name="__codelineno-0-1442"></a><span class="sd">          &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-1443" name="__codelineno-0-1443"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1444" name="__codelineno-0-1444"></a><span class="sd">                      Cell size: 0.05</span>
<a id="__codelineno-0-1445" name="__codelineno-0-1445"></a><span class="sd">                      Dimension: 10 * 10</span>
<a id="__codelineno-0-1446" name="__codelineno-0-1446"></a><span class="sd">                      EPSG: 4326</span>
<a id="__codelineno-0-1447" name="__codelineno-0-1447"></a><span class="sd">                      Number of Bands: 2</span>
<a id="__codelineno-0-1448" name="__codelineno-0-1448"></a><span class="sd">                      Band names: [&#39;Band_1&#39;, &#39;Band_2&#39;]</span>
<a id="__codelineno-0-1449" name="__codelineno-0-1449"></a><span class="sd">                      Mask: -9999.0</span>
<a id="__codelineno-0-1450" name="__codelineno-0-1450"></a><span class="sd">                      Data type: float32</span>
<a id="__codelineno-0-1451" name="__codelineno-0-1451"></a><span class="sd">                      File:...</span>
<a id="__codelineno-0-1452" name="__codelineno-0-1452"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1453" name="__codelineno-0-1453"></a>
<a id="__codelineno-0-1454" name="__codelineno-0-1454"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1455" name="__codelineno-0-1455"></a>
<a id="__codelineno-0-1456" name="__codelineno-0-1456"></a><span class="sd">        - The new band will be added to the dataset inplace.</span>
<a id="__codelineno-0-1457" name="__codelineno-0-1457"></a><span class="sd">        - You can also add an attribute table to the band when you add a new band to the dataset.</span>
<a id="__codelineno-0-1458" name="__codelineno-0-1458"></a>
<a id="__codelineno-0-1459" name="__codelineno-0-1459"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-1460" name="__codelineno-0-1460"></a><span class="sd">          &gt;&gt;&gt; import pandas as pd</span>
<a id="__codelineno-0-1461" name="__codelineno-0-1461"></a><span class="sd">          &gt;&gt;&gt; data = {</span>
<a id="__codelineno-0-1462" name="__codelineno-0-1462"></a><span class="sd">          ...     &quot;Value&quot;: [1, 2, 3],</span>
<a id="__codelineno-0-1463" name="__codelineno-0-1463"></a><span class="sd">          ...     &quot;ClassName&quot;: [&quot;Forest&quot;, &quot;Water&quot;, &quot;Urban&quot;],</span>
<a id="__codelineno-0-1464" name="__codelineno-0-1464"></a><span class="sd">          ...     &quot;Color&quot;: [&quot;#008000&quot;, &quot;#0000FF&quot;, &quot;#808080&quot;],</span>
<a id="__codelineno-0-1465" name="__codelineno-0-1465"></a><span class="sd">          ... }</span>
<a id="__codelineno-0-1466" name="__codelineno-0-1466"></a><span class="sd">          &gt;&gt;&gt; df = pd.DataFrame(data)</span>
<a id="__codelineno-0-1467" name="__codelineno-0-1467"></a><span class="sd">          &gt;&gt;&gt; dataset.add_band(array, unit=&quot;m&quot;, attribute_table=df, inplace=True)</span>
<a id="__codelineno-0-1468" name="__codelineno-0-1468"></a>
<a id="__codelineno-0-1469" name="__codelineno-0-1469"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1470" name="__codelineno-0-1470"></a>
<a id="__codelineno-0-1471" name="__codelineno-0-1471"></a><span class="sd">    See Also:</span>
<a id="__codelineno-0-1472" name="__codelineno-0-1472"></a><span class="sd">        Dataset.create_from_array: create a new dataset from an array.</span>
<a id="__codelineno-0-1473" name="__codelineno-0-1473"></a><span class="sd">        Dataset.create: create a new dataset with an empty band.</span>
<a id="__codelineno-0-1474" name="__codelineno-0-1474"></a><span class="sd">        Dataset.dataset_like: create a new dataset from another dataset.</span>
<a id="__codelineno-0-1475" name="__codelineno-0-1475"></a><span class="sd">        Dataset.get_attribute_table: get the attribute table for a specific band.</span>
<a id="__codelineno-0-1476" name="__codelineno-0-1476"></a><span class="sd">        Dataset.set_attribute_table: Set the attribute table for a specific band.</span>
<a id="__codelineno-0-1477" name="__codelineno-0-1477"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1478" name="__codelineno-0-1478"></a>    <span class="c1"># check the dimensions of the new array</span>
<a id="__codelineno-0-1479" name="__codelineno-0-1479"></a>    <span class="k">if</span> <span class="n">array</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-1480" name="__codelineno-0-1480"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The array must be 2D.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1481" name="__codelineno-0-1481"></a>    <span class="k">if</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="ow">or</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
<a id="__codelineno-0-1482" name="__codelineno-0-1482"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1483" name="__codelineno-0-1483"></a>            <span class="sa">f</span><span class="s2">&quot;The array must have the same dimensions as the raster.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">rows</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1484" name="__codelineno-0-1484"></a>        <span class="p">)</span>
<a id="__codelineno-0-1485" name="__codelineno-0-1485"></a>    <span class="c1"># check if the dataset is opened in a write mode</span>
<a id="__codelineno-0-1486" name="__codelineno-0-1486"></a>    <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
<a id="__codelineno-0-1487" name="__codelineno-0-1487"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">access</span> <span class="o">==</span> <span class="s2">&quot;read_only&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1488" name="__codelineno-0-1488"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The dataset is not opened in a write mode.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1489" name="__codelineno-0-1489"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1490" name="__codelineno-0-1490"></a>            <span class="n">src</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_raster</span>
<a id="__codelineno-0-1491" name="__codelineno-0-1491"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1492" name="__codelineno-0-1492"></a>        <span class="n">src</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="s2">&quot;MEM&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">CreateCopy</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_raster</span><span class="p">)</span>
<a id="__codelineno-0-1493" name="__codelineno-0-1493"></a>
<a id="__codelineno-0-1494" name="__codelineno-0-1494"></a>    <span class="n">dtype</span> <span class="o">=</span> <span class="n">numpy_to_gdal_dtype</span><span class="p">(</span><span class="n">array</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<a id="__codelineno-0-1495" name="__codelineno-0-1495"></a>    <span class="n">num_bands</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">RasterCount</span>
<a id="__codelineno-0-1496" name="__codelineno-0-1496"></a>    <span class="n">src</span><span class="o">.</span><span class="n">AddBand</span><span class="p">(</span><span class="n">dtype</span><span class="p">,</span> <span class="p">[])</span>
<a id="__codelineno-0-1497" name="__codelineno-0-1497"></a>    <span class="n">band</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">num_bands</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-1498" name="__codelineno-0-1498"></a>
<a id="__codelineno-0-1499" name="__codelineno-0-1499"></a>    <span class="k">if</span> <span class="n">unit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1500" name="__codelineno-0-1500"></a>        <span class="n">band</span><span class="o">.</span><span class="n">SetUnitType</span><span class="p">(</span><span class="n">unit</span><span class="p">)</span>
<a id="__codelineno-0-1501" name="__codelineno-0-1501"></a>
<a id="__codelineno-0-1502" name="__codelineno-0-1502"></a>    <span class="k">if</span> <span class="n">attribute_table</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1503" name="__codelineno-0-1503"></a>        <span class="c1"># Attach the RAT to the raster band</span>
<a id="__codelineno-0-1504" name="__codelineno-0-1504"></a>        <span class="n">rat</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_df_to_attribute_table</span><span class="p">(</span><span class="n">attribute_table</span><span class="p">)</span>
<a id="__codelineno-0-1505" name="__codelineno-0-1505"></a>        <span class="n">band</span><span class="o">.</span><span class="n">SetDefaultRAT</span><span class="p">(</span><span class="n">rat</span><span class="p">)</span>
<a id="__codelineno-0-1506" name="__codelineno-0-1506"></a>
<a id="__codelineno-0-1507" name="__codelineno-0-1507"></a>    <span class="n">band</span><span class="o">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
<a id="__codelineno-0-1508" name="__codelineno-0-1508"></a>
<a id="__codelineno-0-1509" name="__codelineno-0-1509"></a>    <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
<a id="__codelineno-0-1510" name="__codelineno-0-1510"></a>        <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">access</span><span class="p">)</span>
<a id="__codelineno-0-1511" name="__codelineno-0-1511"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1512" name="__codelineno-0-1512"></a>        <span class="k">return</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">access</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.stats" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.stats" class="toclink">
            <code class="highlight language-python"><span class="n">stats</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.stats" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Get statistics of a band [Min, max, mean, std].</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>band</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Band index. If None, the statistics of all bands will be returned.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>mask</code>
            </td>
            <td>
                  <code>Polygon GeoDataFrame or Dataset</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>GeodataFrame with a geometry of polygon type.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DataFrame</code></td>            <td>
                  <code><span title="geopandas.geodataframe.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame wit the stats of each band, the dataframe has the following columns
[min, max, mean, std], the index of the dataframe is the band names.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>                   Min         max        mean       std
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    Band_1  270.369720  270.762299  270.551361  0.154270
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    Band_2  269.611938  269.744751  269.673645  0.043788
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    Band_3  273.641479  274.168823  273.953979  0.198447
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    Band_4  273.991516  274.540344  274.310669  0.205754
</code></pre></div>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>The value of the stats will be stored in an xml file by the name of the raster file with the extension of
  .aux.xml.</li>
<li>The content of the file will be like the following:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="w">    </span><span class="nt">&lt;PAMDataset&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">      </span><span class="nt">&lt;PAMRasterBand</span><span class="w"> </span><span class="na">band=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">        </span><span class="nt">&lt;Description&gt;</span>Band_1<span class="nt">&lt;/Description&gt;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">        </span><span class="nt">&lt;Metadata&gt;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">          </span><span class="nt">&lt;MDI</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;RepresentationType&quot;</span><span class="nt">&gt;</span>ATHEMATIC<span class="nt">&lt;/MDI&gt;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">          </span><span class="nt">&lt;MDI</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;STATISTICS_MAXIMUM&quot;</span><span class="nt">&gt;</span>88<span class="nt">&lt;/MDI&gt;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">          </span><span class="nt">&lt;MDI</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;STATISTICS_MEAN&quot;</span><span class="nt">&gt;</span>7.9662921348315<span class="nt">&lt;/MDI&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">          </span><span class="nt">&lt;MDI</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;STATISTICS_MINIMUM&quot;</span><span class="nt">&gt;</span>0<span class="nt">&lt;/MDI&gt;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">          </span><span class="nt">&lt;MDI</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;STATISTICS_STDDEV&quot;</span><span class="nt">&gt;</span>18.294377743948<span class="nt">&lt;/MDI&gt;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">          </span><span class="nt">&lt;MDI</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;STATISTICS_VALID_PERCENT&quot;</span><span class="nt">&gt;</span>48.9<span class="nt">&lt;/MDI&gt;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">        </span><span class="nt">&lt;/Metadata&gt;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">      </span><span class="nt">&lt;/PAMRasterBand&gt;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">    </span><span class="nt">&lt;/PAMDataset&gt;</span>
</code></pre></div>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Get the statistics of all bands in the dataset:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">geotransform</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">geo</span><span class="o">=</span><span class="n">geotransform</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">stats</span><span class="p">())</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>             <span class="nb">min</span>       <span class="nb">max</span>      <span class="n">mean</span>       <span class="n">std</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="n">Band_1</span>  <span class="mf">0.006443</span>  <span class="mf">0.942943</span>  <span class="mf">0.468935</span>  <span class="mf">0.266634</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="n">Band_2</span>  <span class="mf">0.020377</span>  <span class="mf">0.978130</span>  <span class="mf">0.477189</span>  <span class="mf">0.306864</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="n">Band_3</span>  <span class="mf">0.019652</span>  <span class="mf">0.992184</span>  <span class="mf">0.537215</span>  <span class="mf">0.286502</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="n">Band_4</span>  <span class="mf">0.011955</span>  <span class="mf">0.984313</span>  <span class="mf">0.503616</span>  <span class="mf">0.295852</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">stats</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>             <span class="nb">min</span>      <span class="nb">max</span>      <span class="n">mean</span>       <span class="n">std</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="n">Band_2</span>  <span class="mf">0.020377</span>  <span class="mf">0.97813</span>  <span class="mf">0.477189</span>  <span class="mf">0.306864</span>
</code></pre></div>
<ul>
<li>
<p>Get the statistics of all the bands using a mask polygon.</p>
</li>
<li>
<p>Create the polygon using shapely polygon, and use the xmin, ymin, xmax, ymax = [0.1, -0.2,
    0.2 -0.1] to cover the 4 cells.
  <div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">shapely.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Polygon</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">mask</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">geometry</span><span class="o">=</span><span class="p">[</span><span class="n">Polygon</span><span class="p">([(</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">)])],</span><span class="n">crs</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">stats</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">))</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>             <span class="nb">min</span>       <span class="nb">max</span>      <span class="n">mean</span>       <span class="n">std</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="n">Band_1</span>  <span class="mf">0.193441</span>  <span class="mf">0.702108</span>  <span class="mf">0.541478</span>  <span class="mf">0.202932</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="n">Band_2</span>  <span class="mf">0.281281</span>  <span class="mf">0.932573</span>  <span class="mf">0.665602</span>  <span class="mf">0.239410</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="n">Band_3</span>  <span class="mf">0.031395</span>  <span class="mf">0.982235</span>  <span class="mf">0.493086</span>  <span class="mf">0.377608</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="n">Band_4</span>  <span class="mf">0.079562</span>  <span class="mf">0.930965</span>  <span class="mf">0.591025</span>  <span class="mf">0.341578</span>
</code></pre></div></p>
</li>
</ul>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1514">1514</a></span>
<span class="normal"><a href="#__codelineno-0-1515">1515</a></span>
<span class="normal"><a href="#__codelineno-0-1516">1516</a></span>
<span class="normal"><a href="#__codelineno-0-1517">1517</a></span>
<span class="normal"><a href="#__codelineno-0-1518">1518</a></span>
<span class="normal"><a href="#__codelineno-0-1519">1519</a></span>
<span class="normal"><a href="#__codelineno-0-1520">1520</a></span>
<span class="normal"><a href="#__codelineno-0-1521">1521</a></span>
<span class="normal"><a href="#__codelineno-0-1522">1522</a></span>
<span class="normal"><a href="#__codelineno-0-1523">1523</a></span>
<span class="normal"><a href="#__codelineno-0-1524">1524</a></span>
<span class="normal"><a href="#__codelineno-0-1525">1525</a></span>
<span class="normal"><a href="#__codelineno-0-1526">1526</a></span>
<span class="normal"><a href="#__codelineno-0-1527">1527</a></span>
<span class="normal"><a href="#__codelineno-0-1528">1528</a></span>
<span class="normal"><a href="#__codelineno-0-1529">1529</a></span>
<span class="normal"><a href="#__codelineno-0-1530">1530</a></span>
<span class="normal"><a href="#__codelineno-0-1531">1531</a></span>
<span class="normal"><a href="#__codelineno-0-1532">1532</a></span>
<span class="normal"><a href="#__codelineno-0-1533">1533</a></span>
<span class="normal"><a href="#__codelineno-0-1534">1534</a></span>
<span class="normal"><a href="#__codelineno-0-1535">1535</a></span>
<span class="normal"><a href="#__codelineno-0-1536">1536</a></span>
<span class="normal"><a href="#__codelineno-0-1537">1537</a></span>
<span class="normal"><a href="#__codelineno-0-1538">1538</a></span>
<span class="normal"><a href="#__codelineno-0-1539">1539</a></span>
<span class="normal"><a href="#__codelineno-0-1540">1540</a></span>
<span class="normal"><a href="#__codelineno-0-1541">1541</a></span>
<span class="normal"><a href="#__codelineno-0-1542">1542</a></span>
<span class="normal"><a href="#__codelineno-0-1543">1543</a></span>
<span class="normal"><a href="#__codelineno-0-1544">1544</a></span>
<span class="normal"><a href="#__codelineno-0-1545">1545</a></span>
<span class="normal"><a href="#__codelineno-0-1546">1546</a></span>
<span class="normal"><a href="#__codelineno-0-1547">1547</a></span>
<span class="normal"><a href="#__codelineno-0-1548">1548</a></span>
<span class="normal"><a href="#__codelineno-0-1549">1549</a></span>
<span class="normal"><a href="#__codelineno-0-1550">1550</a></span>
<span class="normal"><a href="#__codelineno-0-1551">1551</a></span>
<span class="normal"><a href="#__codelineno-0-1552">1552</a></span>
<span class="normal"><a href="#__codelineno-0-1553">1553</a></span>
<span class="normal"><a href="#__codelineno-0-1554">1554</a></span>
<span class="normal"><a href="#__codelineno-0-1555">1555</a></span>
<span class="normal"><a href="#__codelineno-0-1556">1556</a></span>
<span class="normal"><a href="#__codelineno-0-1557">1557</a></span>
<span class="normal"><a href="#__codelineno-0-1558">1558</a></span>
<span class="normal"><a href="#__codelineno-0-1559">1559</a></span>
<span class="normal"><a href="#__codelineno-0-1560">1560</a></span>
<span class="normal"><a href="#__codelineno-0-1561">1561</a></span>
<span class="normal"><a href="#__codelineno-0-1562">1562</a></span>
<span class="normal"><a href="#__codelineno-0-1563">1563</a></span>
<span class="normal"><a href="#__codelineno-0-1564">1564</a></span>
<span class="normal"><a href="#__codelineno-0-1565">1565</a></span>
<span class="normal"><a href="#__codelineno-0-1566">1566</a></span>
<span class="normal"><a href="#__codelineno-0-1567">1567</a></span>
<span class="normal"><a href="#__codelineno-0-1568">1568</a></span>
<span class="normal"><a href="#__codelineno-0-1569">1569</a></span>
<span class="normal"><a href="#__codelineno-0-1570">1570</a></span>
<span class="normal"><a href="#__codelineno-0-1571">1571</a></span>
<span class="normal"><a href="#__codelineno-0-1572">1572</a></span>
<span class="normal"><a href="#__codelineno-0-1573">1573</a></span>
<span class="normal"><a href="#__codelineno-0-1574">1574</a></span>
<span class="normal"><a href="#__codelineno-0-1575">1575</a></span>
<span class="normal"><a href="#__codelineno-0-1576">1576</a></span>
<span class="normal"><a href="#__codelineno-0-1577">1577</a></span>
<span class="normal"><a href="#__codelineno-0-1578">1578</a></span>
<span class="normal"><a href="#__codelineno-0-1579">1579</a></span>
<span class="normal"><a href="#__codelineno-0-1580">1580</a></span>
<span class="normal"><a href="#__codelineno-0-1581">1581</a></span>
<span class="normal"><a href="#__codelineno-0-1582">1582</a></span>
<span class="normal"><a href="#__codelineno-0-1583">1583</a></span>
<span class="normal"><a href="#__codelineno-0-1584">1584</a></span>
<span class="normal"><a href="#__codelineno-0-1585">1585</a></span>
<span class="normal"><a href="#__codelineno-0-1586">1586</a></span>
<span class="normal"><a href="#__codelineno-0-1587">1587</a></span>
<span class="normal"><a href="#__codelineno-0-1588">1588</a></span>
<span class="normal"><a href="#__codelineno-0-1589">1589</a></span>
<span class="normal"><a href="#__codelineno-0-1590">1590</a></span>
<span class="normal"><a href="#__codelineno-0-1591">1591</a></span>
<span class="normal"><a href="#__codelineno-0-1592">1592</a></span>
<span class="normal"><a href="#__codelineno-0-1593">1593</a></span>
<span class="normal"><a href="#__codelineno-0-1594">1594</a></span>
<span class="normal"><a href="#__codelineno-0-1595">1595</a></span>
<span class="normal"><a href="#__codelineno-0-1596">1596</a></span>
<span class="normal"><a href="#__codelineno-0-1597">1597</a></span>
<span class="normal"><a href="#__codelineno-0-1598">1598</a></span>
<span class="normal"><a href="#__codelineno-0-1599">1599</a></span>
<span class="normal"><a href="#__codelineno-0-1600">1600</a></span>
<span class="normal"><a href="#__codelineno-0-1601">1601</a></span>
<span class="normal"><a href="#__codelineno-0-1602">1602</a></span>
<span class="normal"><a href="#__codelineno-0-1603">1603</a></span>
<span class="normal"><a href="#__codelineno-0-1604">1604</a></span>
<span class="normal"><a href="#__codelineno-0-1605">1605</a></span>
<span class="normal"><a href="#__codelineno-0-1606">1606</a></span>
<span class="normal"><a href="#__codelineno-0-1607">1607</a></span>
<span class="normal"><a href="#__codelineno-0-1608">1608</a></span>
<span class="normal"><a href="#__codelineno-0-1609">1609</a></span>
<span class="normal"><a href="#__codelineno-0-1610">1610</a></span>
<span class="normal"><a href="#__codelineno-0-1611">1611</a></span>
<span class="normal"><a href="#__codelineno-0-1612">1612</a></span>
<span class="normal"><a href="#__codelineno-0-1613">1613</a></span>
<span class="normal"><a href="#__codelineno-0-1614">1614</a></span>
<span class="normal"><a href="#__codelineno-0-1615">1615</a></span>
<span class="normal"><a href="#__codelineno-0-1616">1616</a></span>
<span class="normal"><a href="#__codelineno-0-1617">1617</a></span>
<span class="normal"><a href="#__codelineno-0-1618">1618</a></span>
<span class="normal"><a href="#__codelineno-0-1619">1619</a></span>
<span class="normal"><a href="#__codelineno-0-1620">1620</a></span>
<span class="normal"><a href="#__codelineno-0-1621">1621</a></span>
<span class="normal"><a href="#__codelineno-0-1622">1622</a></span>
<span class="normal"><a href="#__codelineno-0-1623">1623</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1514" name="__codelineno-0-1514"></a><span class="k">def</span><span class="w"> </span><span class="nf">stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">mask</span><span class="p">:</span> <span class="n">GeoDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-1515" name="__codelineno-0-1515"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get statistics of a band [Min, max, mean, std].</span>
<a id="__codelineno-0-1516" name="__codelineno-0-1516"></a>
<a id="__codelineno-0-1517" name="__codelineno-0-1517"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1518" name="__codelineno-0-1518"></a><span class="sd">        band (int, optional):</span>
<a id="__codelineno-0-1519" name="__codelineno-0-1519"></a><span class="sd">            Band index. If None, the statistics of all bands will be returned.</span>
<a id="__codelineno-0-1520" name="__codelineno-0-1520"></a><span class="sd">        mask (Polygon GeoDataFrame or Dataset, optional):</span>
<a id="__codelineno-0-1521" name="__codelineno-0-1521"></a><span class="sd">            GeodataFrame with a geometry of polygon type.</span>
<a id="__codelineno-0-1522" name="__codelineno-0-1522"></a>
<a id="__codelineno-0-1523" name="__codelineno-0-1523"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1524" name="__codelineno-0-1524"></a><span class="sd">        DataFrame:</span>
<a id="__codelineno-0-1525" name="__codelineno-0-1525"></a><span class="sd">            DataFrame wit the stats of each band, the dataframe has the following columns</span>
<a id="__codelineno-0-1526" name="__codelineno-0-1526"></a><span class="sd">            [min, max, mean, std], the index of the dataframe is the band names.</span>
<a id="__codelineno-0-1527" name="__codelineno-0-1527"></a>
<a id="__codelineno-0-1528" name="__codelineno-0-1528"></a><span class="sd">            ```text</span>
<a id="__codelineno-0-1529" name="__codelineno-0-1529"></a>
<a id="__codelineno-0-1530" name="__codelineno-0-1530"></a><span class="sd">                               Min         max        mean       std</span>
<a id="__codelineno-0-1531" name="__codelineno-0-1531"></a><span class="sd">                Band_1  270.369720  270.762299  270.551361  0.154270</span>
<a id="__codelineno-0-1532" name="__codelineno-0-1532"></a><span class="sd">                Band_2  269.611938  269.744751  269.673645  0.043788</span>
<a id="__codelineno-0-1533" name="__codelineno-0-1533"></a><span class="sd">                Band_3  273.641479  274.168823  273.953979  0.198447</span>
<a id="__codelineno-0-1534" name="__codelineno-0-1534"></a><span class="sd">                Band_4  273.991516  274.540344  274.310669  0.205754</span>
<a id="__codelineno-0-1535" name="__codelineno-0-1535"></a><span class="sd">            ```</span>
<a id="__codelineno-0-1536" name="__codelineno-0-1536"></a>
<a id="__codelineno-0-1537" name="__codelineno-0-1537"></a><span class="sd">    Notes:</span>
<a id="__codelineno-0-1538" name="__codelineno-0-1538"></a><span class="sd">        - The value of the stats will be stored in an xml file by the name of the raster file with the extension of</span>
<a id="__codelineno-0-1539" name="__codelineno-0-1539"></a><span class="sd">          .aux.xml.</span>
<a id="__codelineno-0-1540" name="__codelineno-0-1540"></a><span class="sd">        - The content of the file will be like the following:</span>
<a id="__codelineno-0-1541" name="__codelineno-0-1541"></a>
<a id="__codelineno-0-1542" name="__codelineno-0-1542"></a><span class="sd">          ```xml</span>
<a id="__codelineno-0-1543" name="__codelineno-0-1543"></a>
<a id="__codelineno-0-1544" name="__codelineno-0-1544"></a><span class="sd">              &lt;PAMDataset&gt;</span>
<a id="__codelineno-0-1545" name="__codelineno-0-1545"></a><span class="sd">                &lt;PAMRasterBand band=&quot;1&quot;&gt;</span>
<a id="__codelineno-0-1546" name="__codelineno-0-1546"></a><span class="sd">                  &lt;Description&gt;Band_1&lt;/Description&gt;</span>
<a id="__codelineno-0-1547" name="__codelineno-0-1547"></a><span class="sd">                  &lt;Metadata&gt;</span>
<a id="__codelineno-0-1548" name="__codelineno-0-1548"></a><span class="sd">                    &lt;MDI key=&quot;RepresentationType&quot;&gt;ATHEMATIC&lt;/MDI&gt;</span>
<a id="__codelineno-0-1549" name="__codelineno-0-1549"></a><span class="sd">                    &lt;MDI key=&quot;STATISTICS_MAXIMUM&quot;&gt;88&lt;/MDI&gt;</span>
<a id="__codelineno-0-1550" name="__codelineno-0-1550"></a><span class="sd">                    &lt;MDI key=&quot;STATISTICS_MEAN&quot;&gt;7.9662921348315&lt;/MDI&gt;</span>
<a id="__codelineno-0-1551" name="__codelineno-0-1551"></a><span class="sd">                    &lt;MDI key=&quot;STATISTICS_MINIMUM&quot;&gt;0&lt;/MDI&gt;</span>
<a id="__codelineno-0-1552" name="__codelineno-0-1552"></a><span class="sd">                    &lt;MDI key=&quot;STATISTICS_STDDEV&quot;&gt;18.294377743948&lt;/MDI&gt;</span>
<a id="__codelineno-0-1553" name="__codelineno-0-1553"></a><span class="sd">                    &lt;MDI key=&quot;STATISTICS_VALID_PERCENT&quot;&gt;48.9&lt;/MDI&gt;</span>
<a id="__codelineno-0-1554" name="__codelineno-0-1554"></a><span class="sd">                  &lt;/Metadata&gt;</span>
<a id="__codelineno-0-1555" name="__codelineno-0-1555"></a><span class="sd">                &lt;/PAMRasterBand&gt;</span>
<a id="__codelineno-0-1556" name="__codelineno-0-1556"></a><span class="sd">              &lt;/PAMDataset&gt;</span>
<a id="__codelineno-0-1557" name="__codelineno-0-1557"></a>
<a id="__codelineno-0-1558" name="__codelineno-0-1558"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1559" name="__codelineno-0-1559"></a>
<a id="__codelineno-0-1560" name="__codelineno-0-1560"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-1561" name="__codelineno-0-1561"></a><span class="sd">        - Get the statistics of all bands in the dataset:</span>
<a id="__codelineno-0-1562" name="__codelineno-0-1562"></a>
<a id="__codelineno-0-1563" name="__codelineno-0-1563"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-1564" name="__codelineno-0-1564"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-1565" name="__codelineno-0-1565"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.rand(4, 10, 10)</span>
<a id="__codelineno-0-1566" name="__codelineno-0-1566"></a><span class="sd">          &gt;&gt;&gt; geotransform = (0, 0.05, 0, 0, 0, -0.05)</span>
<a id="__codelineno-0-1567" name="__codelineno-0-1567"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, geo=geotransform, epsg=4326)</span>
<a id="__codelineno-0-1568" name="__codelineno-0-1568"></a><span class="sd">          &gt;&gt;&gt; print(dataset.stats()) # doctest: +SKIP</span>
<a id="__codelineno-0-1569" name="__codelineno-0-1569"></a><span class="sd">                       min       max      mean       std</span>
<a id="__codelineno-0-1570" name="__codelineno-0-1570"></a><span class="sd">          Band_1  0.006443  0.942943  0.468935  0.266634</span>
<a id="__codelineno-0-1571" name="__codelineno-0-1571"></a><span class="sd">          Band_2  0.020377  0.978130  0.477189  0.306864</span>
<a id="__codelineno-0-1572" name="__codelineno-0-1572"></a><span class="sd">          Band_3  0.019652  0.992184  0.537215  0.286502</span>
<a id="__codelineno-0-1573" name="__codelineno-0-1573"></a><span class="sd">          Band_4  0.011955  0.984313  0.503616  0.295852</span>
<a id="__codelineno-0-1574" name="__codelineno-0-1574"></a><span class="sd">          &gt;&gt;&gt; print(dataset.stats(band=1))  # doctest: +SKIP</span>
<a id="__codelineno-0-1575" name="__codelineno-0-1575"></a><span class="sd">                       min      max      mean       std</span>
<a id="__codelineno-0-1576" name="__codelineno-0-1576"></a><span class="sd">          Band_2  0.020377  0.97813  0.477189  0.306864</span>
<a id="__codelineno-0-1577" name="__codelineno-0-1577"></a>
<a id="__codelineno-0-1578" name="__codelineno-0-1578"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1579" name="__codelineno-0-1579"></a>
<a id="__codelineno-0-1580" name="__codelineno-0-1580"></a><span class="sd">        - Get the statistics of all the bands using a mask polygon.</span>
<a id="__codelineno-0-1581" name="__codelineno-0-1581"></a>
<a id="__codelineno-0-1582" name="__codelineno-0-1582"></a><span class="sd">          - Create the polygon using shapely polygon, and use the xmin, ymin, xmax, ymax = [0.1, -0.2,</span>
<a id="__codelineno-0-1583" name="__codelineno-0-1583"></a><span class="sd">            0.2 -0.1] to cover the 4 cells.</span>
<a id="__codelineno-0-1584" name="__codelineno-0-1584"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-1585" name="__codelineno-0-1585"></a><span class="sd">          &gt;&gt;&gt; from shapely.geometry import Polygon</span>
<a id="__codelineno-0-1586" name="__codelineno-0-1586"></a><span class="sd">          &gt;&gt;&gt; import geopandas as gpd</span>
<a id="__codelineno-0-1587" name="__codelineno-0-1587"></a><span class="sd">          &gt;&gt;&gt; mask = gpd.GeoDataFrame(geometry=[Polygon([(0.1, -0.1), (0.1, -0.2), (0.2, -0.2), (0.2, -0.1)])],crs=4326)</span>
<a id="__codelineno-0-1588" name="__codelineno-0-1588"></a><span class="sd">          &gt;&gt;&gt; print(dataset.stats(mask=mask))  # doctest: +SKIP</span>
<a id="__codelineno-0-1589" name="__codelineno-0-1589"></a><span class="sd">                       min       max      mean       std</span>
<a id="__codelineno-0-1590" name="__codelineno-0-1590"></a><span class="sd">          Band_1  0.193441  0.702108  0.541478  0.202932</span>
<a id="__codelineno-0-1591" name="__codelineno-0-1591"></a><span class="sd">          Band_2  0.281281  0.932573  0.665602  0.239410</span>
<a id="__codelineno-0-1592" name="__codelineno-0-1592"></a><span class="sd">          Band_3  0.031395  0.982235  0.493086  0.377608</span>
<a id="__codelineno-0-1593" name="__codelineno-0-1593"></a><span class="sd">          Band_4  0.079562  0.930965  0.591025  0.341578</span>
<a id="__codelineno-0-1594" name="__codelineno-0-1594"></a>
<a id="__codelineno-0-1595" name="__codelineno-0-1595"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1596" name="__codelineno-0-1596"></a>
<a id="__codelineno-0-1597" name="__codelineno-0-1597"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1598" name="__codelineno-0-1598"></a>    <span class="k">if</span> <span class="n">mask</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1599" name="__codelineno-0-1599"></a>        <span class="n">dst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">touch</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-1600" name="__codelineno-0-1600"></a>
<a id="__codelineno-0-1601" name="__codelineno-0-1601"></a>    <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1602" name="__codelineno-0-1602"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<a id="__codelineno-0-1603" name="__codelineno-0-1603"></a>            <span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">band_names</span><span class="p">,</span>
<a id="__codelineno-0-1604" name="__codelineno-0-1604"></a>            <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;std&quot;</span><span class="p">],</span>
<a id="__codelineno-0-1605" name="__codelineno-0-1605"></a>            <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span>
<a id="__codelineno-0-1606" name="__codelineno-0-1606"></a>        <span class="p">)</span>
<a id="__codelineno-0-1607" name="__codelineno-0-1607"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-1608" name="__codelineno-0-1608"></a>            <span class="k">if</span> <span class="n">mask</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1609" name="__codelineno-0-1609"></a>                <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">dst</span><span class="o">.</span><span class="n">_get_stats</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-0-1610" name="__codelineno-0-1610"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1611" name="__codelineno-0-1611"></a>                <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_stats</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-0-1612" name="__codelineno-0-1612"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1613" name="__codelineno-0-1613"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<a id="__codelineno-0-1614" name="__codelineno-0-1614"></a>            <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">band_names</span><span class="p">[</span><span class="n">band</span><span class="p">]],</span>
<a id="__codelineno-0-1615" name="__codelineno-0-1615"></a>            <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;std&quot;</span><span class="p">],</span>
<a id="__codelineno-0-1616" name="__codelineno-0-1616"></a>            <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span>
<a id="__codelineno-0-1617" name="__codelineno-0-1617"></a>        <span class="p">)</span>
<a id="__codelineno-0-1618" name="__codelineno-0-1618"></a>        <span class="k">if</span> <span class="n">mask</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1619" name="__codelineno-0-1619"></a>            <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">dst</span><span class="o">.</span><span class="n">_get_stats</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-1620" name="__codelineno-0-1620"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1621" name="__codelineno-0-1621"></a>            <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_stats</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-1622" name="__codelineno-0-1622"></a>
<a id="__codelineno-0-1623" name="__codelineno-0-1623"></a>    <span class="k">return</span> <span class="n">df</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.plot" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.plot" class="toclink">
            <code class="highlight language-python"><span class="n">plot</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exclude_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rgb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">surface_reflectance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overview</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">overview_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">percentile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.plot" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Plot the values/overviews of a given band.</p>
<p>The plot function uses the <code>cleopatra</code> as a backend to plot the raster data, for more information check
<a href="https://serapieum-of-alex.github.io/cleopatra/latest/api/array-glyph-class/#cleopatra.array_glyph.ArrayGlyph.plot">ArrayGlyph</a>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>band</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The band you want to get its data. Default is 0.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exclude_value</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Value to exclude from the plot. Default is None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>rgb</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The indices of the red, green, and blue bands in the <code>Dataset</code>. the <code>rgb</code> parameter can be a list of
three values, or a list of four values if the alpha band is also included.
The <code>plot</code> method will check if the rgb bands are defined in the <code>Dataset</code>, if all the three bands (
red, green, blue)) are defined, the method will use them to plot the real image, if not the rgb bands
will be considered as [2,1,0] as the default order for sentinel tif files.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>surface_reflectance</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Surface reflectance value for normalizing satellite data, by default None.
Typically 10000 for Sentinel-2 data.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cutoff</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>clip the range of pixel values for each band. (take only the pixel values from 0 to the value of the cutoff
and scale them back to between 0 and 1). Default is None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overview</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if you want to plot the overview. Default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overview_index</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index of the overview. Default is 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>percentile</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>int
The percentile value to be used for scaling.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>
        <p>kwargs:
        | Parameter                   | Type                | Description |
        |-----------------------------|---------------------|-------------|
        | <code>points</code>                    | array               | 3 column array with the first column as the value to display for the point, the second as the row index, and the third as the column index in the array. The second and third columns tell the location of the point. |
        | <code>point_color</code>               | str                 | Color of the point. |
        | <code>point_size</code>                | Any                 | Size of the point. |
        | <code>pid_color</code>                 | str                 | Color of the annotation of the point. Default is blue. |
        | <code>pid_size</code>                  | Any                 | Size of the point annotation. |
        | <code>figsize</code>                   | tuple, optional     | Figure size. Default is <code>(8, 8)</code>. |
        | <code>title</code>                     | str, optional       | Title of the plot. Default is <code>'Total Discharge'</code>. |
        | <code>title_size</code>                | int, optional       | Title size. Default is <code>15</code>. |
        | <code>orientation</code>               | str, optional       | Orientation of the color bar (<code>horizontal</code> or <code>vertical</code>). Default is <code>'vertical'</code>. |
        | <code>rotation</code>                  | number, optional    | Rotation of the color bar label. Default is <code>-90</code>. |
        | <code>cbar_length</code>               | float, optional     | Ratio to control the height of the color bar. Default is <code>0.75</code>. |
        | <code>ticks_spacing</code>             | int, optional       | Spacing between color bar ticks. Default is <code>2</code>. |
        | <code>cbar_label_size</code>           | int, optional       | Size of the color bar label. Default is <code>12</code>. |
        | <code>cbar_label</code>                | str, optional       | Label of the color bar. Default is <code>'Discharge m/s'</code>. |
        | <code>color_scale</code>               | int, optional       | Scale mode for colors. Options: 1 = normal, 2 = power, 3 = SymLogNorm, 4 = PowerNorm, 5 = BoundaryNorm. Default is <code>1</code>. |
        | <code>gamma</code>                     | float, optional     | Value needed for color scale option 2. Default is <code>1/2</code>. |
        | <code>line_threshold</code>            | float, optional     | Value needed for color scale option 3. Default is <code>0.0001</code>. |
        | <code>line_scale</code>                | float, optional     | Value needed for color scale option 3. Default is <code>0.001</code>. |
        | <code>bounds</code>                    | list, optional      | Discrete bounds for color scale option 4. Default is <code>None</code>. |
        | <code>midpoint</code>                  | float, optional     | Value needed for color scale option 5. Default is <code>0</code>. |
        | <code>cmap</code>                      | str, optional       | Color map style. Default is <code>'coolwarm_r'</code>. |
        | <code>display_cell_value</code>        | bool, optional      | Whether to display cell values as text. |
        | <code>num_size</code>                  | int, optional       | Size of numbers plotted on top of each cell. Default is <code>8</code>. |
        | <code>background_color_threshold</code>| float or int, optional | Threshold for deciding text color over cells: if value &gt; threshold  black text; else white text. If <code>None</code>, max value / 2 is used. Default is <code>None</code>. |</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>ArrayGlyph</code></td>            <td>
                  <code><span title="ArrayGlyph">ArrayGlyph</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ArrayGlyph object. For more details of the ArrayGlyph object check the <a href="https://serapieum-of-alex.github.io/cleopatra/latest/api/array-glyph-class/">ArrayGlyph</a>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Plot a certain band:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span><span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="p">(</span><span class="o">&lt;</span><span class="n">Figure</span> <span class="n">size</span> <span class="mi">800</span><span class="n">x800</span> <span class="k">with</span> <span class="mi">2</span> <span class="n">Axes</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Axes</span><span class="p">:</span> <span class="o">&gt;</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>plot using power scale.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">color_scale</span><span class="o">=</span><span class="s2">&quot;power&quot;</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="p">(</span><span class="o">&lt;</span><span class="n">Figure</span> <span class="n">size</span> <span class="mi">800</span><span class="n">x800</span> <span class="k">with</span> <span class="mi">2</span> <span class="n">Axes</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Axes</span><span class="p">:</span> <span class="o">&gt;</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>plot using SymLogNorm scale.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">color_scale</span><span class="o">=</span><span class="s2">&quot;sym-lognorm&quot;</span><span class="p">)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="p">(</span><span class="o">&lt;</span><span class="n">Figure</span> <span class="n">size</span> <span class="mi">800</span><span class="n">x800</span> <span class="k">with</span> <span class="mi">2</span> <span class="n">Axes</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Axes</span><span class="p">:</span> <span class="o">&gt;</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>plot using PowerNorm scale.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">color_scale</span><span class="o">=</span><span class="s2">&quot;boundary-norm&quot;</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="p">(</span><span class="o">&lt;</span><span class="n">Figure</span> <span class="n">size</span> <span class="mi">800</span><span class="n">x800</span> <span class="k">with</span> <span class="mi">2</span> <span class="n">Axes</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Axes</span><span class="p">:</span> <span class="o">&gt;</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>plot using BoundaryNorm scale.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">color_scale</span><span class="o">=</span><span class="s2">&quot;midpoint&quot;</span><span class="p">)</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="p">(</span><span class="o">&lt;</span><span class="n">Figure</span> <span class="n">size</span> <span class="mi">800</span><span class="n">x800</span> <span class="k">with</span> <span class="mi">2</span> <span class="n">Axes</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Axes</span><span class="p">:</span> <span class="o">&gt;</span><span class="p">)</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1643">1643</a></span>
<span class="normal"><a href="#__codelineno-0-1644">1644</a></span>
<span class="normal"><a href="#__codelineno-0-1645">1645</a></span>
<span class="normal"><a href="#__codelineno-0-1646">1646</a></span>
<span class="normal"><a href="#__codelineno-0-1647">1647</a></span>
<span class="normal"><a href="#__codelineno-0-1648">1648</a></span>
<span class="normal"><a href="#__codelineno-0-1649">1649</a></span>
<span class="normal"><a href="#__codelineno-0-1650">1650</a></span>
<span class="normal"><a href="#__codelineno-0-1651">1651</a></span>
<span class="normal"><a href="#__codelineno-0-1652">1652</a></span>
<span class="normal"><a href="#__codelineno-0-1653">1653</a></span>
<span class="normal"><a href="#__codelineno-0-1654">1654</a></span>
<span class="normal"><a href="#__codelineno-0-1655">1655</a></span>
<span class="normal"><a href="#__codelineno-0-1656">1656</a></span>
<span class="normal"><a href="#__codelineno-0-1657">1657</a></span>
<span class="normal"><a href="#__codelineno-0-1658">1658</a></span>
<span class="normal"><a href="#__codelineno-0-1659">1659</a></span>
<span class="normal"><a href="#__codelineno-0-1660">1660</a></span>
<span class="normal"><a href="#__codelineno-0-1661">1661</a></span>
<span class="normal"><a href="#__codelineno-0-1662">1662</a></span>
<span class="normal"><a href="#__codelineno-0-1663">1663</a></span>
<span class="normal"><a href="#__codelineno-0-1664">1664</a></span>
<span class="normal"><a href="#__codelineno-0-1665">1665</a></span>
<span class="normal"><a href="#__codelineno-0-1666">1666</a></span>
<span class="normal"><a href="#__codelineno-0-1667">1667</a></span>
<span class="normal"><a href="#__codelineno-0-1668">1668</a></span>
<span class="normal"><a href="#__codelineno-0-1669">1669</a></span>
<span class="normal"><a href="#__codelineno-0-1670">1670</a></span>
<span class="normal"><a href="#__codelineno-0-1671">1671</a></span>
<span class="normal"><a href="#__codelineno-0-1672">1672</a></span>
<span class="normal"><a href="#__codelineno-0-1673">1673</a></span>
<span class="normal"><a href="#__codelineno-0-1674">1674</a></span>
<span class="normal"><a href="#__codelineno-0-1675">1675</a></span>
<span class="normal"><a href="#__codelineno-0-1676">1676</a></span>
<span class="normal"><a href="#__codelineno-0-1677">1677</a></span>
<span class="normal"><a href="#__codelineno-0-1678">1678</a></span>
<span class="normal"><a href="#__codelineno-0-1679">1679</a></span>
<span class="normal"><a href="#__codelineno-0-1680">1680</a></span>
<span class="normal"><a href="#__codelineno-0-1681">1681</a></span>
<span class="normal"><a href="#__codelineno-0-1682">1682</a></span>
<span class="normal"><a href="#__codelineno-0-1683">1683</a></span>
<span class="normal"><a href="#__codelineno-0-1684">1684</a></span>
<span class="normal"><a href="#__codelineno-0-1685">1685</a></span>
<span class="normal"><a href="#__codelineno-0-1686">1686</a></span>
<span class="normal"><a href="#__codelineno-0-1687">1687</a></span>
<span class="normal"><a href="#__codelineno-0-1688">1688</a></span>
<span class="normal"><a href="#__codelineno-0-1689">1689</a></span>
<span class="normal"><a href="#__codelineno-0-1690">1690</a></span>
<span class="normal"><a href="#__codelineno-0-1691">1691</a></span>
<span class="normal"><a href="#__codelineno-0-1692">1692</a></span>
<span class="normal"><a href="#__codelineno-0-1693">1693</a></span>
<span class="normal"><a href="#__codelineno-0-1694">1694</a></span>
<span class="normal"><a href="#__codelineno-0-1695">1695</a></span>
<span class="normal"><a href="#__codelineno-0-1696">1696</a></span>
<span class="normal"><a href="#__codelineno-0-1697">1697</a></span>
<span class="normal"><a href="#__codelineno-0-1698">1698</a></span>
<span class="normal"><a href="#__codelineno-0-1699">1699</a></span>
<span class="normal"><a href="#__codelineno-0-1700">1700</a></span>
<span class="normal"><a href="#__codelineno-0-1701">1701</a></span>
<span class="normal"><a href="#__codelineno-0-1702">1702</a></span>
<span class="normal"><a href="#__codelineno-0-1703">1703</a></span>
<span class="normal"><a href="#__codelineno-0-1704">1704</a></span>
<span class="normal"><a href="#__codelineno-0-1705">1705</a></span>
<span class="normal"><a href="#__codelineno-0-1706">1706</a></span>
<span class="normal"><a href="#__codelineno-0-1707">1707</a></span>
<span class="normal"><a href="#__codelineno-0-1708">1708</a></span>
<span class="normal"><a href="#__codelineno-0-1709">1709</a></span>
<span class="normal"><a href="#__codelineno-0-1710">1710</a></span>
<span class="normal"><a href="#__codelineno-0-1711">1711</a></span>
<span class="normal"><a href="#__codelineno-0-1712">1712</a></span>
<span class="normal"><a href="#__codelineno-0-1713">1713</a></span>
<span class="normal"><a href="#__codelineno-0-1714">1714</a></span>
<span class="normal"><a href="#__codelineno-0-1715">1715</a></span>
<span class="normal"><a href="#__codelineno-0-1716">1716</a></span>
<span class="normal"><a href="#__codelineno-0-1717">1717</a></span>
<span class="normal"><a href="#__codelineno-0-1718">1718</a></span>
<span class="normal"><a href="#__codelineno-0-1719">1719</a></span>
<span class="normal"><a href="#__codelineno-0-1720">1720</a></span>
<span class="normal"><a href="#__codelineno-0-1721">1721</a></span>
<span class="normal"><a href="#__codelineno-0-1722">1722</a></span>
<span class="normal"><a href="#__codelineno-0-1723">1723</a></span>
<span class="normal"><a href="#__codelineno-0-1724">1724</a></span>
<span class="normal"><a href="#__codelineno-0-1725">1725</a></span>
<span class="normal"><a href="#__codelineno-0-1726">1726</a></span>
<span class="normal"><a href="#__codelineno-0-1727">1727</a></span>
<span class="normal"><a href="#__codelineno-0-1728">1728</a></span>
<span class="normal"><a href="#__codelineno-0-1729">1729</a></span>
<span class="normal"><a href="#__codelineno-0-1730">1730</a></span>
<span class="normal"><a href="#__codelineno-0-1731">1731</a></span>
<span class="normal"><a href="#__codelineno-0-1732">1732</a></span>
<span class="normal"><a href="#__codelineno-0-1733">1733</a></span>
<span class="normal"><a href="#__codelineno-0-1734">1734</a></span>
<span class="normal"><a href="#__codelineno-0-1735">1735</a></span>
<span class="normal"><a href="#__codelineno-0-1736">1736</a></span>
<span class="normal"><a href="#__codelineno-0-1737">1737</a></span>
<span class="normal"><a href="#__codelineno-0-1738">1738</a></span>
<span class="normal"><a href="#__codelineno-0-1739">1739</a></span>
<span class="normal"><a href="#__codelineno-0-1740">1740</a></span>
<span class="normal"><a href="#__codelineno-0-1741">1741</a></span>
<span class="normal"><a href="#__codelineno-0-1742">1742</a></span>
<span class="normal"><a href="#__codelineno-0-1743">1743</a></span>
<span class="normal"><a href="#__codelineno-0-1744">1744</a></span>
<span class="normal"><a href="#__codelineno-0-1745">1745</a></span>
<span class="normal"><a href="#__codelineno-0-1746">1746</a></span>
<span class="normal"><a href="#__codelineno-0-1747">1747</a></span>
<span class="normal"><a href="#__codelineno-0-1748">1748</a></span>
<span class="normal"><a href="#__codelineno-0-1749">1749</a></span>
<span class="normal"><a href="#__codelineno-0-1750">1750</a></span>
<span class="normal"><a href="#__codelineno-0-1751">1751</a></span>
<span class="normal"><a href="#__codelineno-0-1752">1752</a></span>
<span class="normal"><a href="#__codelineno-0-1753">1753</a></span>
<span class="normal"><a href="#__codelineno-0-1754">1754</a></span>
<span class="normal"><a href="#__codelineno-0-1755">1755</a></span>
<span class="normal"><a href="#__codelineno-0-1756">1756</a></span>
<span class="normal"><a href="#__codelineno-0-1757">1757</a></span>
<span class="normal"><a href="#__codelineno-0-1758">1758</a></span>
<span class="normal"><a href="#__codelineno-0-1759">1759</a></span>
<span class="normal"><a href="#__codelineno-0-1760">1760</a></span>
<span class="normal"><a href="#__codelineno-0-1761">1761</a></span>
<span class="normal"><a href="#__codelineno-0-1762">1762</a></span>
<span class="normal"><a href="#__codelineno-0-1763">1763</a></span>
<span class="normal"><a href="#__codelineno-0-1764">1764</a></span>
<span class="normal"><a href="#__codelineno-0-1765">1765</a></span>
<span class="normal"><a href="#__codelineno-0-1766">1766</a></span>
<span class="normal"><a href="#__codelineno-0-1767">1767</a></span>
<span class="normal"><a href="#__codelineno-0-1768">1768</a></span>
<span class="normal"><a href="#__codelineno-0-1769">1769</a></span>
<span class="normal"><a href="#__codelineno-0-1770">1770</a></span>
<span class="normal"><a href="#__codelineno-0-1771">1771</a></span>
<span class="normal"><a href="#__codelineno-0-1772">1772</a></span>
<span class="normal"><a href="#__codelineno-0-1773">1773</a></span>
<span class="normal"><a href="#__codelineno-0-1774">1774</a></span>
<span class="normal"><a href="#__codelineno-0-1775">1775</a></span>
<span class="normal"><a href="#__codelineno-0-1776">1776</a></span>
<span class="normal"><a href="#__codelineno-0-1777">1777</a></span>
<span class="normal"><a href="#__codelineno-0-1778">1778</a></span>
<span class="normal"><a href="#__codelineno-0-1779">1779</a></span>
<span class="normal"><a href="#__codelineno-0-1780">1780</a></span>
<span class="normal"><a href="#__codelineno-0-1781">1781</a></span>
<span class="normal"><a href="#__codelineno-0-1782">1782</a></span>
<span class="normal"><a href="#__codelineno-0-1783">1783</a></span>
<span class="normal"><a href="#__codelineno-0-1784">1784</a></span>
<span class="normal"><a href="#__codelineno-0-1785">1785</a></span>
<span class="normal"><a href="#__codelineno-0-1786">1786</a></span>
<span class="normal"><a href="#__codelineno-0-1787">1787</a></span>
<span class="normal"><a href="#__codelineno-0-1788">1788</a></span>
<span class="normal"><a href="#__codelineno-0-1789">1789</a></span>
<span class="normal"><a href="#__codelineno-0-1790">1790</a></span>
<span class="normal"><a href="#__codelineno-0-1791">1791</a></span>
<span class="normal"><a href="#__codelineno-0-1792">1792</a></span>
<span class="normal"><a href="#__codelineno-0-1793">1793</a></span>
<span class="normal"><a href="#__codelineno-0-1794">1794</a></span>
<span class="normal"><a href="#__codelineno-0-1795">1795</a></span>
<span class="normal"><a href="#__codelineno-0-1796">1796</a></span>
<span class="normal"><a href="#__codelineno-0-1797">1797</a></span>
<span class="normal"><a href="#__codelineno-0-1798">1798</a></span>
<span class="normal"><a href="#__codelineno-0-1799">1799</a></span>
<span class="normal"><a href="#__codelineno-0-1800">1800</a></span>
<span class="normal"><a href="#__codelineno-0-1801">1801</a></span>
<span class="normal"><a href="#__codelineno-0-1802">1802</a></span>
<span class="normal"><a href="#__codelineno-0-1803">1803</a></span>
<span class="normal"><a href="#__codelineno-0-1804">1804</a></span>
<span class="normal"><a href="#__codelineno-0-1805">1805</a></span>
<span class="normal"><a href="#__codelineno-0-1806">1806</a></span>
<span class="normal"><a href="#__codelineno-0-1807">1807</a></span>
<span class="normal"><a href="#__codelineno-0-1808">1808</a></span>
<span class="normal"><a href="#__codelineno-0-1809">1809</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1643" name="__codelineno-0-1643"></a><span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span>
<a id="__codelineno-0-1644" name="__codelineno-0-1644"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-1645" name="__codelineno-0-1645"></a>    <span class="n">band</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1646" name="__codelineno-0-1646"></a>    <span class="n">exclude_value</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1647" name="__codelineno-0-1647"></a>    <span class="n">rgb</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1648" name="__codelineno-0-1648"></a>    <span class="n">surface_reflectance</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1649" name="__codelineno-0-1649"></a>    <span class="n">cutoff</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1650" name="__codelineno-0-1650"></a>    <span class="n">overview</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-1651" name="__codelineno-0-1651"></a>    <span class="n">overview_index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-1652" name="__codelineno-0-1652"></a>    <span class="n">percentile</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1653" name="__codelineno-0-1653"></a>    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<a id="__codelineno-0-1654" name="__codelineno-0-1654"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ArrayGlyph&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1655" name="__codelineno-0-1655"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Plot the values/overviews of a given band.</span>
<a id="__codelineno-0-1656" name="__codelineno-0-1656"></a>
<a id="__codelineno-0-1657" name="__codelineno-0-1657"></a><span class="sd">    The plot function uses the `cleopatra` as a backend to plot the raster data, for more information check</span>
<a id="__codelineno-0-1658" name="__codelineno-0-1658"></a><span class="sd">    [ArrayGlyph](https://serapieum-of-alex.github.io/cleopatra/latest/api/array-glyph-class/#cleopatra.array_glyph.ArrayGlyph.plot).</span>
<a id="__codelineno-0-1659" name="__codelineno-0-1659"></a>
<a id="__codelineno-0-1660" name="__codelineno-0-1660"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1661" name="__codelineno-0-1661"></a><span class="sd">        band (int, optional):</span>
<a id="__codelineno-0-1662" name="__codelineno-0-1662"></a><span class="sd">            The band you want to get its data. Default is 0.</span>
<a id="__codelineno-0-1663" name="__codelineno-0-1663"></a><span class="sd">        exclude_value (Any, optional):</span>
<a id="__codelineno-0-1664" name="__codelineno-0-1664"></a><span class="sd">            Value to exclude from the plot. Default is None.</span>
<a id="__codelineno-0-1665" name="__codelineno-0-1665"></a><span class="sd">        rgb (List[int], optional):</span>
<a id="__codelineno-0-1666" name="__codelineno-0-1666"></a><span class="sd">            The indices of the red, green, and blue bands in the `Dataset`. the `rgb` parameter can be a list of</span>
<a id="__codelineno-0-1667" name="__codelineno-0-1667"></a><span class="sd">            three values, or a list of four values if the alpha band is also included.</span>
<a id="__codelineno-0-1668" name="__codelineno-0-1668"></a><span class="sd">            The `plot` method will check if the rgb bands are defined in the `Dataset`, if all the three bands (</span>
<a id="__codelineno-0-1669" name="__codelineno-0-1669"></a><span class="sd">            red, green, blue)) are defined, the method will use them to plot the real image, if not the rgb bands</span>
<a id="__codelineno-0-1670" name="__codelineno-0-1670"></a><span class="sd">            will be considered as [2,1,0] as the default order for sentinel tif files.</span>
<a id="__codelineno-0-1671" name="__codelineno-0-1671"></a><span class="sd">        surface_reflectance (int, optional):</span>
<a id="__codelineno-0-1672" name="__codelineno-0-1672"></a><span class="sd">            Surface reflectance value for normalizing satellite data, by default None.</span>
<a id="__codelineno-0-1673" name="__codelineno-0-1673"></a><span class="sd">            Typically 10000 for Sentinel-2 data.</span>
<a id="__codelineno-0-1674" name="__codelineno-0-1674"></a><span class="sd">        cutoff (List, optional):</span>
<a id="__codelineno-0-1675" name="__codelineno-0-1675"></a><span class="sd">            clip the range of pixel values for each band. (take only the pixel values from 0 to the value of the cutoff</span>
<a id="__codelineno-0-1676" name="__codelineno-0-1676"></a><span class="sd">            and scale them back to between 0 and 1). Default is None.</span>
<a id="__codelineno-0-1677" name="__codelineno-0-1677"></a><span class="sd">        overview (bool, optional):</span>
<a id="__codelineno-0-1678" name="__codelineno-0-1678"></a><span class="sd">            True if you want to plot the overview. Default is False.</span>
<a id="__codelineno-0-1679" name="__codelineno-0-1679"></a><span class="sd">        overview_index (int, optional):</span>
<a id="__codelineno-0-1680" name="__codelineno-0-1680"></a><span class="sd">            Index of the overview. Default is 0.</span>
<a id="__codelineno-0-1681" name="__codelineno-0-1681"></a><span class="sd">        percentile: int</span>
<a id="__codelineno-0-1682" name="__codelineno-0-1682"></a><span class="sd">            The percentile value to be used for scaling.</span>
<a id="__codelineno-0-1683" name="__codelineno-0-1683"></a><span class="sd">    kwargs:</span>
<a id="__codelineno-0-1684" name="__codelineno-0-1684"></a><span class="sd">            | Parameter                   | Type                | Description |</span>
<a id="__codelineno-0-1685" name="__codelineno-0-1685"></a><span class="sd">            |-----------------------------|---------------------|-------------|</span>
<a id="__codelineno-0-1686" name="__codelineno-0-1686"></a><span class="sd">            | `points`                    | array               | 3 column array with the first column as the value to display for the point, the second as the row index, and the third as the column index in the array. The second and third columns tell the location of the point. |</span>
<a id="__codelineno-0-1687" name="__codelineno-0-1687"></a><span class="sd">            | `point_color`               | str                 | Color of the point. |</span>
<a id="__codelineno-0-1688" name="__codelineno-0-1688"></a><span class="sd">            | `point_size`                | Any                 | Size of the point. |</span>
<a id="__codelineno-0-1689" name="__codelineno-0-1689"></a><span class="sd">            | `pid_color`                 | str                 | Color of the annotation of the point. Default is blue. |</span>
<a id="__codelineno-0-1690" name="__codelineno-0-1690"></a><span class="sd">            | `pid_size`                  | Any                 | Size of the point annotation. |</span>
<a id="__codelineno-0-1691" name="__codelineno-0-1691"></a><span class="sd">            | `figsize`                   | tuple, optional     | Figure size. Default is `(8, 8)`. |</span>
<a id="__codelineno-0-1692" name="__codelineno-0-1692"></a><span class="sd">            | `title`                     | str, optional       | Title of the plot. Default is `&#39;Total Discharge&#39;`. |</span>
<a id="__codelineno-0-1693" name="__codelineno-0-1693"></a><span class="sd">            | `title_size`                | int, optional       | Title size. Default is `15`. |</span>
<a id="__codelineno-0-1694" name="__codelineno-0-1694"></a><span class="sd">            | `orientation`               | str, optional       | Orientation of the color bar (`horizontal` or `vertical`). Default is `&#39;vertical&#39;`. |</span>
<a id="__codelineno-0-1695" name="__codelineno-0-1695"></a><span class="sd">            | `rotation`                  | number, optional    | Rotation of the color bar label. Default is `-90`. |</span>
<a id="__codelineno-0-1696" name="__codelineno-0-1696"></a><span class="sd">            | `cbar_length`               | float, optional     | Ratio to control the height of the color bar. Default is `0.75`. |</span>
<a id="__codelineno-0-1697" name="__codelineno-0-1697"></a><span class="sd">            | `ticks_spacing`             | int, optional       | Spacing between color bar ticks. Default is `2`. |</span>
<a id="__codelineno-0-1698" name="__codelineno-0-1698"></a><span class="sd">            | `cbar_label_size`           | int, optional       | Size of the color bar label. Default is `12`. |</span>
<a id="__codelineno-0-1699" name="__codelineno-0-1699"></a><span class="sd">            | `cbar_label`                | str, optional       | Label of the color bar. Default is `&#39;Discharge m/s&#39;`. |</span>
<a id="__codelineno-0-1700" name="__codelineno-0-1700"></a><span class="sd">            | `color_scale`               | int, optional       | Scale mode for colors. Options: 1 = normal, 2 = power, 3 = SymLogNorm, 4 = PowerNorm, 5 = BoundaryNorm. Default is `1`. |</span>
<a id="__codelineno-0-1701" name="__codelineno-0-1701"></a><span class="sd">            | `gamma`                     | float, optional     | Value needed for color scale option 2. Default is `1/2`. |</span>
<a id="__codelineno-0-1702" name="__codelineno-0-1702"></a><span class="sd">            | `line_threshold`            | float, optional     | Value needed for color scale option 3. Default is `0.0001`. |</span>
<a id="__codelineno-0-1703" name="__codelineno-0-1703"></a><span class="sd">            | `line_scale`                | float, optional     | Value needed for color scale option 3. Default is `0.001`. |</span>
<a id="__codelineno-0-1704" name="__codelineno-0-1704"></a><span class="sd">            | `bounds`                    | list, optional      | Discrete bounds for color scale option 4. Default is `None`. |</span>
<a id="__codelineno-0-1705" name="__codelineno-0-1705"></a><span class="sd">            | `midpoint`                  | float, optional     | Value needed for color scale option 5. Default is `0`. |</span>
<a id="__codelineno-0-1706" name="__codelineno-0-1706"></a><span class="sd">            | `cmap`                      | str, optional       | Color map style. Default is `&#39;coolwarm_r&#39;`. |</span>
<a id="__codelineno-0-1707" name="__codelineno-0-1707"></a><span class="sd">            | `display_cell_value`        | bool, optional      | Whether to display cell values as text. |</span>
<a id="__codelineno-0-1708" name="__codelineno-0-1708"></a><span class="sd">            | `num_size`                  | int, optional       | Size of numbers plotted on top of each cell. Default is `8`. |</span>
<a id="__codelineno-0-1709" name="__codelineno-0-1709"></a><span class="sd">            | `background_color_threshold`| float or int, optional | Threshold for deciding text color over cells: if value &gt; threshold  black text; else white text. If `None`, max value / 2 is used. Default is `None`. |</span>
<a id="__codelineno-0-1710" name="__codelineno-0-1710"></a>
<a id="__codelineno-0-1711" name="__codelineno-0-1711"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1712" name="__codelineno-0-1712"></a><span class="sd">        ArrayGlyph:</span>
<a id="__codelineno-0-1713" name="__codelineno-0-1713"></a><span class="sd">            ArrayGlyph object. For more details of the ArrayGlyph object check the [ArrayGlyph](https://serapieum-of-alex.github.io/cleopatra/latest/api/array-glyph-class/).</span>
<a id="__codelineno-0-1714" name="__codelineno-0-1714"></a>
<a id="__codelineno-0-1715" name="__codelineno-0-1715"></a>
<a id="__codelineno-0-1716" name="__codelineno-0-1716"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-1717" name="__codelineno-0-1717"></a><span class="sd">        - Plot a certain band:</span>
<a id="__codelineno-0-1718" name="__codelineno-0-1718"></a>
<a id="__codelineno-0-1719" name="__codelineno-0-1719"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-1720" name="__codelineno-0-1720"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-1721" name="__codelineno-0-1721"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.rand(4, 10, 10)</span>
<a id="__codelineno-0-1722" name="__codelineno-0-1722"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-1723" name="__codelineno-0-1723"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-1724" name="__codelineno-0-1724"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,epsg=4326)</span>
<a id="__codelineno-0-1725" name="__codelineno-0-1725"></a><span class="sd">          &gt;&gt;&gt; dataset.plot(band=0)</span>
<a id="__codelineno-0-1726" name="__codelineno-0-1726"></a><span class="sd">          (&lt;Figure size 800x800 with 2 Axes&gt;, &lt;Axes: &gt;)</span>
<a id="__codelineno-0-1727" name="__codelineno-0-1727"></a>
<a id="__codelineno-0-1728" name="__codelineno-0-1728"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1729" name="__codelineno-0-1729"></a>
<a id="__codelineno-0-1730" name="__codelineno-0-1730"></a><span class="sd">        - plot using power scale.</span>
<a id="__codelineno-0-1731" name="__codelineno-0-1731"></a>
<a id="__codelineno-0-1732" name="__codelineno-0-1732"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-1733" name="__codelineno-0-1733"></a><span class="sd">          &gt;&gt;&gt; dataset.plot(band=0, color_scale=&quot;power&quot;)</span>
<a id="__codelineno-0-1734" name="__codelineno-0-1734"></a><span class="sd">          (&lt;Figure size 800x800 with 2 Axes&gt;, &lt;Axes: &gt;)</span>
<a id="__codelineno-0-1735" name="__codelineno-0-1735"></a>
<a id="__codelineno-0-1736" name="__codelineno-0-1736"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1737" name="__codelineno-0-1737"></a>
<a id="__codelineno-0-1738" name="__codelineno-0-1738"></a><span class="sd">        - plot using SymLogNorm scale.</span>
<a id="__codelineno-0-1739" name="__codelineno-0-1739"></a>
<a id="__codelineno-0-1740" name="__codelineno-0-1740"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-1741" name="__codelineno-0-1741"></a><span class="sd">          &gt;&gt;&gt; dataset.plot(band=0, color_scale=&quot;sym-lognorm&quot;)</span>
<a id="__codelineno-0-1742" name="__codelineno-0-1742"></a><span class="sd">          (&lt;Figure size 800x800 with 2 Axes&gt;, &lt;Axes: &gt;)</span>
<a id="__codelineno-0-1743" name="__codelineno-0-1743"></a>
<a id="__codelineno-0-1744" name="__codelineno-0-1744"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1745" name="__codelineno-0-1745"></a>
<a id="__codelineno-0-1746" name="__codelineno-0-1746"></a><span class="sd">        - plot using PowerNorm scale.</span>
<a id="__codelineno-0-1747" name="__codelineno-0-1747"></a>
<a id="__codelineno-0-1748" name="__codelineno-0-1748"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-1749" name="__codelineno-0-1749"></a><span class="sd">          &gt;&gt;&gt; dataset.plot(band=0, color_scale=&quot;boundary-norm&quot;, bounds=[0, 0.2, 0.4, 0.6, 0.8, 1])</span>
<a id="__codelineno-0-1750" name="__codelineno-0-1750"></a><span class="sd">          (&lt;Figure size 800x800 with 2 Axes&gt;, &lt;Axes: &gt;)</span>
<a id="__codelineno-0-1751" name="__codelineno-0-1751"></a>
<a id="__codelineno-0-1752" name="__codelineno-0-1752"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1753" name="__codelineno-0-1753"></a>
<a id="__codelineno-0-1754" name="__codelineno-0-1754"></a><span class="sd">        - plot using BoundaryNorm scale.</span>
<a id="__codelineno-0-1755" name="__codelineno-0-1755"></a>
<a id="__codelineno-0-1756" name="__codelineno-0-1756"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-1757" name="__codelineno-0-1757"></a><span class="sd">          &gt;&gt;&gt; dataset.plot(band=0, color_scale=&quot;midpoint&quot;)</span>
<a id="__codelineno-0-1758" name="__codelineno-0-1758"></a><span class="sd">          (&lt;Figure size 800x800 with 2 Axes&gt;, &lt;Axes: &gt;)</span>
<a id="__codelineno-0-1759" name="__codelineno-0-1759"></a>
<a id="__codelineno-0-1760" name="__codelineno-0-1760"></a><span class="sd">          ```</span>
<a id="__codelineno-0-1761" name="__codelineno-0-1761"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1762" name="__codelineno-0-1762"></a>    <span class="n">import_cleopatra</span><span class="p">(</span>
<a id="__codelineno-0-1763" name="__codelineno-0-1763"></a>        <span class="s2">&quot;The current function uses cleopatra package to for plotting, please install it manually, for more info &quot;</span>
<a id="__codelineno-0-1764" name="__codelineno-0-1764"></a>        <span class="s2">&quot;check https://github.com/Serapieum-of-alex/cleopatra&quot;</span>
<a id="__codelineno-0-1765" name="__codelineno-0-1765"></a>    <span class="p">)</span>
<a id="__codelineno-0-1766" name="__codelineno-0-1766"></a>    <span class="kn">from</span><span class="w"> </span><span class="nn">cleopatra.array_glyph</span><span class="w"> </span><span class="kn">import</span> <span class="n">ArrayGlyph</span>
<a id="__codelineno-0-1767" name="__codelineno-0-1767"></a>
<a id="__codelineno-0-1768" name="__codelineno-0-1768"></a>    <span class="n">no_data_value</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">]</span>
<a id="__codelineno-0-1769" name="__codelineno-0-1769"></a>    <span class="k">if</span> <span class="n">overview</span><span class="p">:</span>
<a id="__codelineno-0-1770" name="__codelineno-0-1770"></a>        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_overview_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">,</span> <span class="n">overview_index</span><span class="o">=</span><span class="n">overview_index</span><span class="p">)</span>
<a id="__codelineno-0-1771" name="__codelineno-0-1771"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1772" name="__codelineno-0-1772"></a>        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-1773" name="__codelineno-0-1773"></a>    <span class="c1"># if the raster has three bands or more.</span>
<a id="__codelineno-0-1774" name="__codelineno-0-1774"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
<a id="__codelineno-0-1775" name="__codelineno-0-1775"></a>        <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1776" name="__codelineno-0-1776"></a>            <span class="k">if</span> <span class="n">rgb</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1777" name="__codelineno-0-1777"></a>                <span class="n">rgb</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-1778" name="__codelineno-0-1778"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">get_band_by_color</span><span class="p">(</span><span class="s2">&quot;red&quot;</span><span class="p">),</span>
<a id="__codelineno-0-1779" name="__codelineno-0-1779"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">get_band_by_color</span><span class="p">(</span><span class="s2">&quot;green&quot;</span><span class="p">),</span>
<a id="__codelineno-0-1780" name="__codelineno-0-1780"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">get_band_by_color</span><span class="p">(</span><span class="s2">&quot;blue&quot;</span><span class="p">),</span>
<a id="__codelineno-0-1781" name="__codelineno-0-1781"></a>                <span class="p">]</span>
<a id="__codelineno-0-1782" name="__codelineno-0-1782"></a>                <span class="k">if</span> <span class="kc">None</span> <span class="ow">in</span> <span class="n">rgb</span><span class="p">:</span>
<a id="__codelineno-0-1783" name="__codelineno-0-1783"></a>                    <span class="n">rgb</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-1784" name="__codelineno-0-1784"></a>            <span class="c1"># first make the band index the first band in the rgb list (red band)</span>
<a id="__codelineno-0-1785" name="__codelineno-0-1785"></a>            <span class="n">band</span> <span class="o">=</span> <span class="n">rgb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-1786" name="__codelineno-0-1786"></a>    <span class="c1"># elif self.band_count == 1:</span>
<a id="__codelineno-0-1787" name="__codelineno-0-1787"></a>    <span class="c1">#     band = 0</span>
<a id="__codelineno-0-1788" name="__codelineno-0-1788"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1789" name="__codelineno-0-1789"></a>        <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1790" name="__codelineno-0-1790"></a>            <span class="n">band</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-1791" name="__codelineno-0-1791"></a>
<a id="__codelineno-0-1792" name="__codelineno-0-1792"></a>    <span class="n">exclude_value</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-1793" name="__codelineno-0-1793"></a>        <span class="p">[</span><span class="n">no_data_value</span><span class="p">[</span><span class="n">band</span><span class="p">],</span> <span class="n">exclude_value</span><span class="p">]</span>
<a id="__codelineno-0-1794" name="__codelineno-0-1794"></a>        <span class="k">if</span> <span class="n">exclude_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-1795" name="__codelineno-0-1795"></a>        <span class="k">else</span> <span class="p">[</span><span class="n">no_data_value</span><span class="p">[</span><span class="n">band</span><span class="p">]]</span>
<a id="__codelineno-0-1796" name="__codelineno-0-1796"></a>    <span class="p">)</span>
<a id="__codelineno-0-1797" name="__codelineno-0-1797"></a>
<a id="__codelineno-0-1798" name="__codelineno-0-1798"></a>    <span class="n">cleo</span> <span class="o">=</span> <span class="n">ArrayGlyph</span><span class="p">(</span>
<a id="__codelineno-0-1799" name="__codelineno-0-1799"></a>        <span class="n">arr</span><span class="p">,</span>
<a id="__codelineno-0-1800" name="__codelineno-0-1800"></a>        <span class="n">exclude_value</span><span class="o">=</span><span class="n">exclude_value</span><span class="p">,</span>
<a id="__codelineno-0-1801" name="__codelineno-0-1801"></a>        <span class="n">extent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">,</span>
<a id="__codelineno-0-1802" name="__codelineno-0-1802"></a>        <span class="n">rgb</span><span class="o">=</span><span class="n">rgb</span><span class="p">,</span>
<a id="__codelineno-0-1803" name="__codelineno-0-1803"></a>        <span class="n">surface_reflectance</span><span class="o">=</span><span class="n">surface_reflectance</span><span class="p">,</span>
<a id="__codelineno-0-1804" name="__codelineno-0-1804"></a>        <span class="n">cutoff</span><span class="o">=</span><span class="n">cutoff</span><span class="p">,</span>
<a id="__codelineno-0-1805" name="__codelineno-0-1805"></a>        <span class="n">percentile</span><span class="o">=</span><span class="n">percentile</span><span class="p">,</span>
<a id="__codelineno-0-1806" name="__codelineno-0-1806"></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<a id="__codelineno-0-1807" name="__codelineno-0-1807"></a>    <span class="p">)</span>
<a id="__codelineno-0-1808" name="__codelineno-0-1808"></a>    <span class="n">cleo</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-1809" name="__codelineno-0-1809"></a>    <span class="k">return</span> <span class="n">cleo</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.translate" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.translate" class="toclink">
            <code class="highlight language-python"><span class="n">translate</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.translate" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Translate.</p>
<p>The translate function can be used to
- Convert Between Formats: Convert a raster from one format to another (e.g., from GeoTIFF to JPEG).
- Subset: Extract a subregion of a raster.
- Resample: Change the resolution of a raster.
- Reproject: Change the coordinate reference system of a raster.
- Scale Values: Scale pixel values to a new range.
- Change Data Type: Convert the data type of the raster.
- Apply Compression: Apply compression to the output raster.
- Apply No-Data Values: Define no-data values for the output raster.</p>
<h6 id="pyramids.dataset.Dataset.translate--parameters"><a class="toclink" href="#pyramids.dataset.Dataset.translate--parameters">Parameters</a><a class="headerlink" href="#pyramids.dataset.Dataset.translate--parameters" title="Permanent link">#</a></h6>
<p>path: str, optional, default is None.
    path to save the output, if None, the output will be saved in memory.
kwargs:
    unscale:
        unscale values with scale and offset metadata.
    scaleParams:
        list of scale parameters, each of the form [src_min,src_max] or [src_min,src_max,dst_min,dst_max]
    outputType:
        output type (gdalconst.GDT_Byte, etc...)
    exponents:
        list of exponentiation parameters
    bandList:
        array of band numbers (index start at 1)
    maskBand:
        mask band to generate or not ("none", "auto", "mask", 1, ...)
    creationOptions:
        list or dict of creation options
    srcWin:
        subwindow in pixels to extract: [left_x, top_y, width, height]
    projWin:
        subwindow in projected coordinates to extract: [ulx, uly, lrx, lry]
    projWinSRS:
        SRS in which projWin is expressed
    outputBounds:
        assigned output bounds: [ulx, uly, lrx, lry]
    outputGeotransform:
        assigned geotransform matrix (array of 6 values) (mutually exclusive with outputBounds)
    metadataOptions:
        list or dict of metadata options
    outputSRS:
        assigned output SRS
    noData:
        nodata value (or "none" to unset it)
    rgbExpand:
        Color palette expansion mode: "gray", "rgb", "rgba"
    xmp:
        whether to copy XMP metadata
    resampleAlg:
        resampling mode
    overviewLevel:
        To specify which overview level of source files must be used
    domainMetadataOptions:
        list or dict of domain-specific metadata options</p>
<h6 id="pyramids.dataset.Dataset.translate--returns"><a class="toclink" href="#pyramids.dataset.Dataset.translate--returns">Returns</a><a class="headerlink" href="#pyramids.dataset.Dataset.translate--returns" title="Permanent link">#</a></h6>
<p>Dataset</p>
<h6 id="pyramids.dataset.Dataset.translate--examples"><a class="toclink" href="#pyramids.dataset.Dataset.translate--examples">Examples</a><a class="headerlink" href="#pyramids.dataset.Dataset.translate--examples" title="Permanent link">#</a></h6>
<p>Scale &amp; offset:
    - the translate function can be used to get rid of the scale and offset that are used to manipulate the
    dataset, to get the real values of the dataset.</p>
<div class="highlight"><pre><span></span><code>Scale:
    - First we will create a dataset from a float32 array with values between 1 and 10, and then we will
        assign a scale of 0.1 to the dataset.

        &gt;&gt;&gt; import numpy as np
        &gt;&gt;&gt; arr = np.random.randint(1, 10, size=(5, 5)).astype(np.float32)
        &gt;&gt;&gt; print(arr) # doctest: +SKIP
        [[5. 5. 3. 4. 2.]
         [2. 5. 5. 8. 5.]
         [7. 5. 6. 1. 2.]
         [6. 8. 1. 5. 8.]
         [2. 5. 2. 2. 9.]]
        &gt;&gt;&gt; top_left_corner = (0, 0)
        &gt;&gt;&gt; cell_size = 0.05
        &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,epsg=4326)
        &gt;&gt;&gt; print(dataset)
        &lt;BLANKLINE&gt;
                    Top Left Corner: (0.0, 0.0)
                    Cell size: 0.05
                    Dimension: 5 * 5
                    EPSG: 4326
                    Number of Bands: 1
                    Band names: [&#39;Band_1&#39;]
                    Band colors: {0: &#39;undefined&#39;}
                    Band units: [&#39;&#39;]
                    Scale: [1.0]
                    Offset: [0]
                    Mask: -9999.0
                    Data type: float32
                    File: ...
        &lt;BLANKLINE&gt;
        &gt;&gt;&gt; dataset.scale = [0.1]

    - now lets unscale the dataset values.

        &gt;&gt;&gt; unscaled_dataset = dataset.translate(unscale=True)
        &gt;&gt;&gt; print(unscaled_dataset) # doctest: +SKIP
        &lt;BLANKLINE&gt;
                    Top Left Corner: (0.0, 0.0)
                    Cell size: 0.05
                    Dimension: 5 * 5
                    EPSG: 4326
                    Number of Bands: 1
                    Band names: [&#39;Band_1&#39;]
                    Band colors: {0: &#39;undefined&#39;}
                    Band units: [&#39;&#39;]
                    Scale: [1.0]
                    Offset: [0]
                    Mask: -9999.0
                    Data type: float32
                    File:
        &lt;BLANKLINE&gt;
        &gt;&gt;&gt; print(unscaled_dataset.read_array()) # doctest: +SKIP
        [[0.5 0.5 0.3 0.4 0.2]
         [0.2 0.5 0.5 0.8 0.5]
         [0.7 0.5 0.6 0.1 0.2]
         [0.6 0.8 0.1 0.5 0.8]
         [0.2 0.5 0.2 0.2 0.9]]

offset:
    - You can also unshift the values of the dataset if the dataset has an offset. To remove the offset from
        all values in the dataset, you can read the values using the `read_array` and then add the offset value
        to the array. we will create a dataset from the same array we created above (values are between 1, and 10)
        with an offset of 100.

        &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,epsg=4326)
        &gt;&gt;&gt; print(dataset)
        &lt;BLANKLINE&gt;
                    Top Left Corner: (0.0, 0.0)
                    Cell size: 0.05
                    Dimension: 5 * 5
                    EPSG: 4326
                    Number of Bands: 1
                    Band names: [&#39;Band_1&#39;]
                    Band colors: {0: &#39;undefined&#39;}
                    Band units: [&#39;&#39;]
                    Scale: [1.0]
                    Offset: [0]
                    Mask: -9999.0
                    Data type: float32
                    File: ...
        &lt;BLANKLINE&gt;

    - set the offset to 100.

        &gt;&gt;&gt; dataset.offset = [100]

    - check if the offset has been set.

        &gt;&gt;&gt; print(dataset.offset)
        [100.0]

    - now lets unscale the dataset values.

        &gt;&gt;&gt; unscaled_dataset = dataset.translate(unscale=True)
        &gt;&gt;&gt; print(unscaled_dataset.read_array()) # doctest: +SKIP
        [[105. 105. 103. 104. 102.]
         [102. 105. 105. 108. 105.]
         [107. 105. 106. 101. 102.]
         [106. 108. 101. 105. 108.]
         [102. 105. 102. 102. 109.]]

    - as you see, all the values have been shifted by 100. now if you check the offset of the dataset

        &gt;&gt;&gt; print(unscaled_dataset.offset)
        [0]

Offset and Scale together:
    - we can unscale and get rid of the offset at the same time.

        &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,epsg=4326)

    - set the offset to 100, and a scale of 0.1.

        &gt;&gt;&gt; dataset.offset = [100]
        &gt;&gt;&gt; dataset.scale = [0.1]

    - check if the offset has been set.

        &gt;&gt;&gt; print(dataset.offset)
        [100.0]
        &gt;&gt;&gt; print(dataset.scale)
        [0.1]

    - now lets unscale the dataset values.

        &gt;&gt;&gt; unscaled_dataset = dataset.translate(unscale=True)
        &gt;&gt;&gt; print(unscaled_dataset.read_array()) # doctest: +SKIP
        [[100.5 100.5 100.3 100.4 100.2]
         [100.2 100.5 100.5 100.8 100.5]
         [100.7 100.5 100.6 100.1 100.2]
         [100.6 100.8 100.1 100.5 100.8]
         [100.2 100.5 100.2 100.2 100.9]]

    - Now you can see that the values were multiplied first by the scale; then the offset value was added.
        `value * scale + offset`

        &gt;&gt;&gt; print(unscaled_dataset.offset)
        [0]
        &gt;&gt;&gt; print(unscaled_dataset.scale)
        [1.0]
</code></pre></div>


<details class="scale-between-two-values" open>
  <summary>Scale between two values</summary>
  <ul>
<li>
<p>you can scale the values of the dataset between two values, for example, you can scale the values between
    two values 0 and 1.</p>
<blockquote>
<blockquote>
<blockquote>
<p>dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,epsg=4326)
print(dataset.stats()) # doctest: +SKIP
        min  max  mean      std
Band_1  1.0  9.0   4.0  2.19089
scaled_dataset = dataset.translate(scaleParams=[[1, 9, 0, 255]], outputType=gdal.GDT_Byte)
print(scaled_dataset.read_array()) # doctest: +SKIP
[[128 128  64  96  32]
 [ 32 128 128 223 128]
 [191 128 159   0  32]
 [159 223   0 128 223]
 [ 32 128  32  32 255]]</p>
</blockquote>
</blockquote>
</blockquote>
</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1811">1811</a></span>
<span class="normal"><a href="#__codelineno-0-1812">1812</a></span>
<span class="normal"><a href="#__codelineno-0-1813">1813</a></span>
<span class="normal"><a href="#__codelineno-0-1814">1814</a></span>
<span class="normal"><a href="#__codelineno-0-1815">1815</a></span>
<span class="normal"><a href="#__codelineno-0-1816">1816</a></span>
<span class="normal"><a href="#__codelineno-0-1817">1817</a></span>
<span class="normal"><a href="#__codelineno-0-1818">1818</a></span>
<span class="normal"><a href="#__codelineno-0-1819">1819</a></span>
<span class="normal"><a href="#__codelineno-0-1820">1820</a></span>
<span class="normal"><a href="#__codelineno-0-1821">1821</a></span>
<span class="normal"><a href="#__codelineno-0-1822">1822</a></span>
<span class="normal"><a href="#__codelineno-0-1823">1823</a></span>
<span class="normal"><a href="#__codelineno-0-1824">1824</a></span>
<span class="normal"><a href="#__codelineno-0-1825">1825</a></span>
<span class="normal"><a href="#__codelineno-0-1826">1826</a></span>
<span class="normal"><a href="#__codelineno-0-1827">1827</a></span>
<span class="normal"><a href="#__codelineno-0-1828">1828</a></span>
<span class="normal"><a href="#__codelineno-0-1829">1829</a></span>
<span class="normal"><a href="#__codelineno-0-1830">1830</a></span>
<span class="normal"><a href="#__codelineno-0-1831">1831</a></span>
<span class="normal"><a href="#__codelineno-0-1832">1832</a></span>
<span class="normal"><a href="#__codelineno-0-1833">1833</a></span>
<span class="normal"><a href="#__codelineno-0-1834">1834</a></span>
<span class="normal"><a href="#__codelineno-0-1835">1835</a></span>
<span class="normal"><a href="#__codelineno-0-1836">1836</a></span>
<span class="normal"><a href="#__codelineno-0-1837">1837</a></span>
<span class="normal"><a href="#__codelineno-0-1838">1838</a></span>
<span class="normal"><a href="#__codelineno-0-1839">1839</a></span>
<span class="normal"><a href="#__codelineno-0-1840">1840</a></span>
<span class="normal"><a href="#__codelineno-0-1841">1841</a></span>
<span class="normal"><a href="#__codelineno-0-1842">1842</a></span>
<span class="normal"><a href="#__codelineno-0-1843">1843</a></span>
<span class="normal"><a href="#__codelineno-0-1844">1844</a></span>
<span class="normal"><a href="#__codelineno-0-1845">1845</a></span>
<span class="normal"><a href="#__codelineno-0-1846">1846</a></span>
<span class="normal"><a href="#__codelineno-0-1847">1847</a></span>
<span class="normal"><a href="#__codelineno-0-1848">1848</a></span>
<span class="normal"><a href="#__codelineno-0-1849">1849</a></span>
<span class="normal"><a href="#__codelineno-0-1850">1850</a></span>
<span class="normal"><a href="#__codelineno-0-1851">1851</a></span>
<span class="normal"><a href="#__codelineno-0-1852">1852</a></span>
<span class="normal"><a href="#__codelineno-0-1853">1853</a></span>
<span class="normal"><a href="#__codelineno-0-1854">1854</a></span>
<span class="normal"><a href="#__codelineno-0-1855">1855</a></span>
<span class="normal"><a href="#__codelineno-0-1856">1856</a></span>
<span class="normal"><a href="#__codelineno-0-1857">1857</a></span>
<span class="normal"><a href="#__codelineno-0-1858">1858</a></span>
<span class="normal"><a href="#__codelineno-0-1859">1859</a></span>
<span class="normal"><a href="#__codelineno-0-1860">1860</a></span>
<span class="normal"><a href="#__codelineno-0-1861">1861</a></span>
<span class="normal"><a href="#__codelineno-0-1862">1862</a></span>
<span class="normal"><a href="#__codelineno-0-1863">1863</a></span>
<span class="normal"><a href="#__codelineno-0-1864">1864</a></span>
<span class="normal"><a href="#__codelineno-0-1865">1865</a></span>
<span class="normal"><a href="#__codelineno-0-1866">1866</a></span>
<span class="normal"><a href="#__codelineno-0-1867">1867</a></span>
<span class="normal"><a href="#__codelineno-0-1868">1868</a></span>
<span class="normal"><a href="#__codelineno-0-1869">1869</a></span>
<span class="normal"><a href="#__codelineno-0-1870">1870</a></span>
<span class="normal"><a href="#__codelineno-0-1871">1871</a></span>
<span class="normal"><a href="#__codelineno-0-1872">1872</a></span>
<span class="normal"><a href="#__codelineno-0-1873">1873</a></span>
<span class="normal"><a href="#__codelineno-0-1874">1874</a></span>
<span class="normal"><a href="#__codelineno-0-1875">1875</a></span>
<span class="normal"><a href="#__codelineno-0-1876">1876</a></span>
<span class="normal"><a href="#__codelineno-0-1877">1877</a></span>
<span class="normal"><a href="#__codelineno-0-1878">1878</a></span>
<span class="normal"><a href="#__codelineno-0-1879">1879</a></span>
<span class="normal"><a href="#__codelineno-0-1880">1880</a></span>
<span class="normal"><a href="#__codelineno-0-1881">1881</a></span>
<span class="normal"><a href="#__codelineno-0-1882">1882</a></span>
<span class="normal"><a href="#__codelineno-0-1883">1883</a></span>
<span class="normal"><a href="#__codelineno-0-1884">1884</a></span>
<span class="normal"><a href="#__codelineno-0-1885">1885</a></span>
<span class="normal"><a href="#__codelineno-0-1886">1886</a></span>
<span class="normal"><a href="#__codelineno-0-1887">1887</a></span>
<span class="normal"><a href="#__codelineno-0-1888">1888</a></span>
<span class="normal"><a href="#__codelineno-0-1889">1889</a></span>
<span class="normal"><a href="#__codelineno-0-1890">1890</a></span>
<span class="normal"><a href="#__codelineno-0-1891">1891</a></span>
<span class="normal"><a href="#__codelineno-0-1892">1892</a></span>
<span class="normal"><a href="#__codelineno-0-1893">1893</a></span>
<span class="normal"><a href="#__codelineno-0-1894">1894</a></span>
<span class="normal"><a href="#__codelineno-0-1895">1895</a></span>
<span class="normal"><a href="#__codelineno-0-1896">1896</a></span>
<span class="normal"><a href="#__codelineno-0-1897">1897</a></span>
<span class="normal"><a href="#__codelineno-0-1898">1898</a></span>
<span class="normal"><a href="#__codelineno-0-1899">1899</a></span>
<span class="normal"><a href="#__codelineno-0-1900">1900</a></span>
<span class="normal"><a href="#__codelineno-0-1901">1901</a></span>
<span class="normal"><a href="#__codelineno-0-1902">1902</a></span>
<span class="normal"><a href="#__codelineno-0-1903">1903</a></span>
<span class="normal"><a href="#__codelineno-0-1904">1904</a></span>
<span class="normal"><a href="#__codelineno-0-1905">1905</a></span>
<span class="normal"><a href="#__codelineno-0-1906">1906</a></span>
<span class="normal"><a href="#__codelineno-0-1907">1907</a></span>
<span class="normal"><a href="#__codelineno-0-1908">1908</a></span>
<span class="normal"><a href="#__codelineno-0-1909">1909</a></span>
<span class="normal"><a href="#__codelineno-0-1910">1910</a></span>
<span class="normal"><a href="#__codelineno-0-1911">1911</a></span>
<span class="normal"><a href="#__codelineno-0-1912">1912</a></span>
<span class="normal"><a href="#__codelineno-0-1913">1913</a></span>
<span class="normal"><a href="#__codelineno-0-1914">1914</a></span>
<span class="normal"><a href="#__codelineno-0-1915">1915</a></span>
<span class="normal"><a href="#__codelineno-0-1916">1916</a></span>
<span class="normal"><a href="#__codelineno-0-1917">1917</a></span>
<span class="normal"><a href="#__codelineno-0-1918">1918</a></span>
<span class="normal"><a href="#__codelineno-0-1919">1919</a></span>
<span class="normal"><a href="#__codelineno-0-1920">1920</a></span>
<span class="normal"><a href="#__codelineno-0-1921">1921</a></span>
<span class="normal"><a href="#__codelineno-0-1922">1922</a></span>
<span class="normal"><a href="#__codelineno-0-1923">1923</a></span>
<span class="normal"><a href="#__codelineno-0-1924">1924</a></span>
<span class="normal"><a href="#__codelineno-0-1925">1925</a></span>
<span class="normal"><a href="#__codelineno-0-1926">1926</a></span>
<span class="normal"><a href="#__codelineno-0-1927">1927</a></span>
<span class="normal"><a href="#__codelineno-0-1928">1928</a></span>
<span class="normal"><a href="#__codelineno-0-1929">1929</a></span>
<span class="normal"><a href="#__codelineno-0-1930">1930</a></span>
<span class="normal"><a href="#__codelineno-0-1931">1931</a></span>
<span class="normal"><a href="#__codelineno-0-1932">1932</a></span>
<span class="normal"><a href="#__codelineno-0-1933">1933</a></span>
<span class="normal"><a href="#__codelineno-0-1934">1934</a></span>
<span class="normal"><a href="#__codelineno-0-1935">1935</a></span>
<span class="normal"><a href="#__codelineno-0-1936">1936</a></span>
<span class="normal"><a href="#__codelineno-0-1937">1937</a></span>
<span class="normal"><a href="#__codelineno-0-1938">1938</a></span>
<span class="normal"><a href="#__codelineno-0-1939">1939</a></span>
<span class="normal"><a href="#__codelineno-0-1940">1940</a></span>
<span class="normal"><a href="#__codelineno-0-1941">1941</a></span>
<span class="normal"><a href="#__codelineno-0-1942">1942</a></span>
<span class="normal"><a href="#__codelineno-0-1943">1943</a></span>
<span class="normal"><a href="#__codelineno-0-1944">1944</a></span>
<span class="normal"><a href="#__codelineno-0-1945">1945</a></span>
<span class="normal"><a href="#__codelineno-0-1946">1946</a></span>
<span class="normal"><a href="#__codelineno-0-1947">1947</a></span>
<span class="normal"><a href="#__codelineno-0-1948">1948</a></span>
<span class="normal"><a href="#__codelineno-0-1949">1949</a></span>
<span class="normal"><a href="#__codelineno-0-1950">1950</a></span>
<span class="normal"><a href="#__codelineno-0-1951">1951</a></span>
<span class="normal"><a href="#__codelineno-0-1952">1952</a></span>
<span class="normal"><a href="#__codelineno-0-1953">1953</a></span>
<span class="normal"><a href="#__codelineno-0-1954">1954</a></span>
<span class="normal"><a href="#__codelineno-0-1955">1955</a></span>
<span class="normal"><a href="#__codelineno-0-1956">1956</a></span>
<span class="normal"><a href="#__codelineno-0-1957">1957</a></span>
<span class="normal"><a href="#__codelineno-0-1958">1958</a></span>
<span class="normal"><a href="#__codelineno-0-1959">1959</a></span>
<span class="normal"><a href="#__codelineno-0-1960">1960</a></span>
<span class="normal"><a href="#__codelineno-0-1961">1961</a></span>
<span class="normal"><a href="#__codelineno-0-1962">1962</a></span>
<span class="normal"><a href="#__codelineno-0-1963">1963</a></span>
<span class="normal"><a href="#__codelineno-0-1964">1964</a></span>
<span class="normal"><a href="#__codelineno-0-1965">1965</a></span>
<span class="normal"><a href="#__codelineno-0-1966">1966</a></span>
<span class="normal"><a href="#__codelineno-0-1967">1967</a></span>
<span class="normal"><a href="#__codelineno-0-1968">1968</a></span>
<span class="normal"><a href="#__codelineno-0-1969">1969</a></span>
<span class="normal"><a href="#__codelineno-0-1970">1970</a></span>
<span class="normal"><a href="#__codelineno-0-1971">1971</a></span>
<span class="normal"><a href="#__codelineno-0-1972">1972</a></span>
<span class="normal"><a href="#__codelineno-0-1973">1973</a></span>
<span class="normal"><a href="#__codelineno-0-1974">1974</a></span>
<span class="normal"><a href="#__codelineno-0-1975">1975</a></span>
<span class="normal"><a href="#__codelineno-0-1976">1976</a></span>
<span class="normal"><a href="#__codelineno-0-1977">1977</a></span>
<span class="normal"><a href="#__codelineno-0-1978">1978</a></span>
<span class="normal"><a href="#__codelineno-0-1979">1979</a></span>
<span class="normal"><a href="#__codelineno-0-1980">1980</a></span>
<span class="normal"><a href="#__codelineno-0-1981">1981</a></span>
<span class="normal"><a href="#__codelineno-0-1982">1982</a></span>
<span class="normal"><a href="#__codelineno-0-1983">1983</a></span>
<span class="normal"><a href="#__codelineno-0-1984">1984</a></span>
<span class="normal"><a href="#__codelineno-0-1985">1985</a></span>
<span class="normal"><a href="#__codelineno-0-1986">1986</a></span>
<span class="normal"><a href="#__codelineno-0-1987">1987</a></span>
<span class="normal"><a href="#__codelineno-0-1988">1988</a></span>
<span class="normal"><a href="#__codelineno-0-1989">1989</a></span>
<span class="normal"><a href="#__codelineno-0-1990">1990</a></span>
<span class="normal"><a href="#__codelineno-0-1991">1991</a></span>
<span class="normal"><a href="#__codelineno-0-1992">1992</a></span>
<span class="normal"><a href="#__codelineno-0-1993">1993</a></span>
<span class="normal"><a href="#__codelineno-0-1994">1994</a></span>
<span class="normal"><a href="#__codelineno-0-1995">1995</a></span>
<span class="normal"><a href="#__codelineno-0-1996">1996</a></span>
<span class="normal"><a href="#__codelineno-0-1997">1997</a></span>
<span class="normal"><a href="#__codelineno-0-1998">1998</a></span>
<span class="normal"><a href="#__codelineno-0-1999">1999</a></span>
<span class="normal"><a href="#__codelineno-0-2000">2000</a></span>
<span class="normal"><a href="#__codelineno-0-2001">2001</a></span>
<span class="normal"><a href="#__codelineno-0-2002">2002</a></span>
<span class="normal"><a href="#__codelineno-0-2003">2003</a></span>
<span class="normal"><a href="#__codelineno-0-2004">2004</a></span>
<span class="normal"><a href="#__codelineno-0-2005">2005</a></span>
<span class="normal"><a href="#__codelineno-0-2006">2006</a></span>
<span class="normal"><a href="#__codelineno-0-2007">2007</a></span>
<span class="normal"><a href="#__codelineno-0-2008">2008</a></span>
<span class="normal"><a href="#__codelineno-0-2009">2009</a></span>
<span class="normal"><a href="#__codelineno-0-2010">2010</a></span>
<span class="normal"><a href="#__codelineno-0-2011">2011</a></span>
<span class="normal"><a href="#__codelineno-0-2012">2012</a></span>
<span class="normal"><a href="#__codelineno-0-2013">2013</a></span>
<span class="normal"><a href="#__codelineno-0-2014">2014</a></span>
<span class="normal"><a href="#__codelineno-0-2015">2015</a></span>
<span class="normal"><a href="#__codelineno-0-2016">2016</a></span>
<span class="normal"><a href="#__codelineno-0-2017">2017</a></span>
<span class="normal"><a href="#__codelineno-0-2018">2018</a></span>
<span class="normal"><a href="#__codelineno-0-2019">2019</a></span>
<span class="normal"><a href="#__codelineno-0-2020">2020</a></span>
<span class="normal"><a href="#__codelineno-0-2021">2021</a></span>
<span class="normal"><a href="#__codelineno-0-2022">2022</a></span>
<span class="normal"><a href="#__codelineno-0-2023">2023</a></span>
<span class="normal"><a href="#__codelineno-0-2024">2024</a></span>
<span class="normal"><a href="#__codelineno-0-2025">2025</a></span>
<span class="normal"><a href="#__codelineno-0-2026">2026</a></span>
<span class="normal"><a href="#__codelineno-0-2027">2027</a></span>
<span class="normal"><a href="#__codelineno-0-2028">2028</a></span>
<span class="normal"><a href="#__codelineno-0-2029">2029</a></span>
<span class="normal"><a href="#__codelineno-0-2030">2030</a></span>
<span class="normal"><a href="#__codelineno-0-2031">2031</a></span>
<span class="normal"><a href="#__codelineno-0-2032">2032</a></span>
<span class="normal"><a href="#__codelineno-0-2033">2033</a></span>
<span class="normal"><a href="#__codelineno-0-2034">2034</a></span>
<span class="normal"><a href="#__codelineno-0-2035">2035</a></span>
<span class="normal"><a href="#__codelineno-0-2036">2036</a></span>
<span class="normal"><a href="#__codelineno-0-2037">2037</a></span>
<span class="normal"><a href="#__codelineno-0-2038">2038</a></span>
<span class="normal"><a href="#__codelineno-0-2039">2039</a></span>
<span class="normal"><a href="#__codelineno-0-2040">2040</a></span>
<span class="normal"><a href="#__codelineno-0-2041">2041</a></span>
<span class="normal"><a href="#__codelineno-0-2042">2042</a></span>
<span class="normal"><a href="#__codelineno-0-2043">2043</a></span>
<span class="normal"><a href="#__codelineno-0-2044">2044</a></span>
<span class="normal"><a href="#__codelineno-0-2045">2045</a></span>
<span class="normal"><a href="#__codelineno-0-2046">2046</a></span>
<span class="normal"><a href="#__codelineno-0-2047">2047</a></span>
<span class="normal"><a href="#__codelineno-0-2048">2048</a></span>
<span class="normal"><a href="#__codelineno-0-2049">2049</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1811" name="__codelineno-0-1811"></a><span class="k">def</span><span class="w"> </span><span class="nf">translate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-1812" name="__codelineno-0-1812"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Translate.</span>
<a id="__codelineno-0-1813" name="__codelineno-0-1813"></a>
<a id="__codelineno-0-1814" name="__codelineno-0-1814"></a><span class="sd">    The translate function can be used to</span>
<a id="__codelineno-0-1815" name="__codelineno-0-1815"></a><span class="sd">    - Convert Between Formats: Convert a raster from one format to another (e.g., from GeoTIFF to JPEG).</span>
<a id="__codelineno-0-1816" name="__codelineno-0-1816"></a><span class="sd">    - Subset: Extract a subregion of a raster.</span>
<a id="__codelineno-0-1817" name="__codelineno-0-1817"></a><span class="sd">    - Resample: Change the resolution of a raster.</span>
<a id="__codelineno-0-1818" name="__codelineno-0-1818"></a><span class="sd">    - Reproject: Change the coordinate reference system of a raster.</span>
<a id="__codelineno-0-1819" name="__codelineno-0-1819"></a><span class="sd">    - Scale Values: Scale pixel values to a new range.</span>
<a id="__codelineno-0-1820" name="__codelineno-0-1820"></a><span class="sd">    - Change Data Type: Convert the data type of the raster.</span>
<a id="__codelineno-0-1821" name="__codelineno-0-1821"></a><span class="sd">    - Apply Compression: Apply compression to the output raster.</span>
<a id="__codelineno-0-1822" name="__codelineno-0-1822"></a><span class="sd">    - Apply No-Data Values: Define no-data values for the output raster.</span>
<a id="__codelineno-0-1823" name="__codelineno-0-1823"></a>
<a id="__codelineno-0-1824" name="__codelineno-0-1824"></a>
<a id="__codelineno-0-1825" name="__codelineno-0-1825"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-1826" name="__codelineno-0-1826"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-1827" name="__codelineno-0-1827"></a><span class="sd">    path: str, optional, default is None.</span>
<a id="__codelineno-0-1828" name="__codelineno-0-1828"></a><span class="sd">        path to save the output, if None, the output will be saved in memory.</span>
<a id="__codelineno-0-1829" name="__codelineno-0-1829"></a><span class="sd">    kwargs:</span>
<a id="__codelineno-0-1830" name="__codelineno-0-1830"></a><span class="sd">        unscale:</span>
<a id="__codelineno-0-1831" name="__codelineno-0-1831"></a><span class="sd">            unscale values with scale and offset metadata.</span>
<a id="__codelineno-0-1832" name="__codelineno-0-1832"></a><span class="sd">        scaleParams:</span>
<a id="__codelineno-0-1833" name="__codelineno-0-1833"></a><span class="sd">            list of scale parameters, each of the form [src_min,src_max] or [src_min,src_max,dst_min,dst_max]</span>
<a id="__codelineno-0-1834" name="__codelineno-0-1834"></a><span class="sd">        outputType:</span>
<a id="__codelineno-0-1835" name="__codelineno-0-1835"></a><span class="sd">            output type (gdalconst.GDT_Byte, etc...)</span>
<a id="__codelineno-0-1836" name="__codelineno-0-1836"></a><span class="sd">        exponents:</span>
<a id="__codelineno-0-1837" name="__codelineno-0-1837"></a><span class="sd">            list of exponentiation parameters</span>
<a id="__codelineno-0-1838" name="__codelineno-0-1838"></a><span class="sd">        bandList:</span>
<a id="__codelineno-0-1839" name="__codelineno-0-1839"></a><span class="sd">            array of band numbers (index start at 1)</span>
<a id="__codelineno-0-1840" name="__codelineno-0-1840"></a><span class="sd">        maskBand:</span>
<a id="__codelineno-0-1841" name="__codelineno-0-1841"></a><span class="sd">            mask band to generate or not (&quot;none&quot;, &quot;auto&quot;, &quot;mask&quot;, 1, ...)</span>
<a id="__codelineno-0-1842" name="__codelineno-0-1842"></a><span class="sd">        creationOptions:</span>
<a id="__codelineno-0-1843" name="__codelineno-0-1843"></a><span class="sd">            list or dict of creation options</span>
<a id="__codelineno-0-1844" name="__codelineno-0-1844"></a><span class="sd">        srcWin:</span>
<a id="__codelineno-0-1845" name="__codelineno-0-1845"></a><span class="sd">            subwindow in pixels to extract: [left_x, top_y, width, height]</span>
<a id="__codelineno-0-1846" name="__codelineno-0-1846"></a><span class="sd">        projWin:</span>
<a id="__codelineno-0-1847" name="__codelineno-0-1847"></a><span class="sd">            subwindow in projected coordinates to extract: [ulx, uly, lrx, lry]</span>
<a id="__codelineno-0-1848" name="__codelineno-0-1848"></a><span class="sd">        projWinSRS:</span>
<a id="__codelineno-0-1849" name="__codelineno-0-1849"></a><span class="sd">            SRS in which projWin is expressed</span>
<a id="__codelineno-0-1850" name="__codelineno-0-1850"></a><span class="sd">        outputBounds:</span>
<a id="__codelineno-0-1851" name="__codelineno-0-1851"></a><span class="sd">            assigned output bounds: [ulx, uly, lrx, lry]</span>
<a id="__codelineno-0-1852" name="__codelineno-0-1852"></a><span class="sd">        outputGeotransform:</span>
<a id="__codelineno-0-1853" name="__codelineno-0-1853"></a><span class="sd">            assigned geotransform matrix (array of 6 values) (mutually exclusive with outputBounds)</span>
<a id="__codelineno-0-1854" name="__codelineno-0-1854"></a><span class="sd">        metadataOptions:</span>
<a id="__codelineno-0-1855" name="__codelineno-0-1855"></a><span class="sd">            list or dict of metadata options</span>
<a id="__codelineno-0-1856" name="__codelineno-0-1856"></a><span class="sd">        outputSRS:</span>
<a id="__codelineno-0-1857" name="__codelineno-0-1857"></a><span class="sd">            assigned output SRS</span>
<a id="__codelineno-0-1858" name="__codelineno-0-1858"></a><span class="sd">        noData:</span>
<a id="__codelineno-0-1859" name="__codelineno-0-1859"></a><span class="sd">            nodata value (or &quot;none&quot; to unset it)</span>
<a id="__codelineno-0-1860" name="__codelineno-0-1860"></a><span class="sd">        rgbExpand:</span>
<a id="__codelineno-0-1861" name="__codelineno-0-1861"></a><span class="sd">            Color palette expansion mode: &quot;gray&quot;, &quot;rgb&quot;, &quot;rgba&quot;</span>
<a id="__codelineno-0-1862" name="__codelineno-0-1862"></a><span class="sd">        xmp:</span>
<a id="__codelineno-0-1863" name="__codelineno-0-1863"></a><span class="sd">            whether to copy XMP metadata</span>
<a id="__codelineno-0-1864" name="__codelineno-0-1864"></a><span class="sd">        resampleAlg:</span>
<a id="__codelineno-0-1865" name="__codelineno-0-1865"></a><span class="sd">            resampling mode</span>
<a id="__codelineno-0-1866" name="__codelineno-0-1866"></a><span class="sd">        overviewLevel:</span>
<a id="__codelineno-0-1867" name="__codelineno-0-1867"></a><span class="sd">            To specify which overview level of source files must be used</span>
<a id="__codelineno-0-1868" name="__codelineno-0-1868"></a><span class="sd">        domainMetadataOptions:</span>
<a id="__codelineno-0-1869" name="__codelineno-0-1869"></a><span class="sd">            list or dict of domain-specific metadata options</span>
<a id="__codelineno-0-1870" name="__codelineno-0-1870"></a>
<a id="__codelineno-0-1871" name="__codelineno-0-1871"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-1872" name="__codelineno-0-1872"></a><span class="sd">    -------</span>
<a id="__codelineno-0-1873" name="__codelineno-0-1873"></a><span class="sd">    Dataset</span>
<a id="__codelineno-0-1874" name="__codelineno-0-1874"></a>
<a id="__codelineno-0-1875" name="__codelineno-0-1875"></a><span class="sd">    Examples</span>
<a id="__codelineno-0-1876" name="__codelineno-0-1876"></a><span class="sd">    --------</span>
<a id="__codelineno-0-1877" name="__codelineno-0-1877"></a><span class="sd">    Scale &amp; offset:</span>
<a id="__codelineno-0-1878" name="__codelineno-0-1878"></a><span class="sd">        - the translate function can be used to get rid of the scale and offset that are used to manipulate the</span>
<a id="__codelineno-0-1879" name="__codelineno-0-1879"></a><span class="sd">        dataset, to get the real values of the dataset.</span>
<a id="__codelineno-0-1880" name="__codelineno-0-1880"></a>
<a id="__codelineno-0-1881" name="__codelineno-0-1881"></a><span class="sd">        Scale:</span>
<a id="__codelineno-0-1882" name="__codelineno-0-1882"></a><span class="sd">            - First we will create a dataset from a float32 array with values between 1 and 10, and then we will</span>
<a id="__codelineno-0-1883" name="__codelineno-0-1883"></a><span class="sd">                assign a scale of 0.1 to the dataset.</span>
<a id="__codelineno-0-1884" name="__codelineno-0-1884"></a>
<a id="__codelineno-0-1885" name="__codelineno-0-1885"></a><span class="sd">                &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-1886" name="__codelineno-0-1886"></a><span class="sd">                &gt;&gt;&gt; arr = np.random.randint(1, 10, size=(5, 5)).astype(np.float32)</span>
<a id="__codelineno-0-1887" name="__codelineno-0-1887"></a><span class="sd">                &gt;&gt;&gt; print(arr) # doctest: +SKIP</span>
<a id="__codelineno-0-1888" name="__codelineno-0-1888"></a><span class="sd">                [[5. 5. 3. 4. 2.]</span>
<a id="__codelineno-0-1889" name="__codelineno-0-1889"></a><span class="sd">                 [2. 5. 5. 8. 5.]</span>
<a id="__codelineno-0-1890" name="__codelineno-0-1890"></a><span class="sd">                 [7. 5. 6. 1. 2.]</span>
<a id="__codelineno-0-1891" name="__codelineno-0-1891"></a><span class="sd">                 [6. 8. 1. 5. 8.]</span>
<a id="__codelineno-0-1892" name="__codelineno-0-1892"></a><span class="sd">                 [2. 5. 2. 2. 9.]]</span>
<a id="__codelineno-0-1893" name="__codelineno-0-1893"></a><span class="sd">                &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-1894" name="__codelineno-0-1894"></a><span class="sd">                &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-1895" name="__codelineno-0-1895"></a><span class="sd">                &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,epsg=4326)</span>
<a id="__codelineno-0-1896" name="__codelineno-0-1896"></a><span class="sd">                &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-1897" name="__codelineno-0-1897"></a><span class="sd">                &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1898" name="__codelineno-0-1898"></a><span class="sd">                            Top Left Corner: (0.0, 0.0)</span>
<a id="__codelineno-0-1899" name="__codelineno-0-1899"></a><span class="sd">                            Cell size: 0.05</span>
<a id="__codelineno-0-1900" name="__codelineno-0-1900"></a><span class="sd">                            Dimension: 5 * 5</span>
<a id="__codelineno-0-1901" name="__codelineno-0-1901"></a><span class="sd">                            EPSG: 4326</span>
<a id="__codelineno-0-1902" name="__codelineno-0-1902"></a><span class="sd">                            Number of Bands: 1</span>
<a id="__codelineno-0-1903" name="__codelineno-0-1903"></a><span class="sd">                            Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-1904" name="__codelineno-0-1904"></a><span class="sd">                            Band colors: {0: &#39;undefined&#39;}</span>
<a id="__codelineno-0-1905" name="__codelineno-0-1905"></a><span class="sd">                            Band units: [&#39;&#39;]</span>
<a id="__codelineno-0-1906" name="__codelineno-0-1906"></a><span class="sd">                            Scale: [1.0]</span>
<a id="__codelineno-0-1907" name="__codelineno-0-1907"></a><span class="sd">                            Offset: [0]</span>
<a id="__codelineno-0-1908" name="__codelineno-0-1908"></a><span class="sd">                            Mask: -9999.0</span>
<a id="__codelineno-0-1909" name="__codelineno-0-1909"></a><span class="sd">                            Data type: float32</span>
<a id="__codelineno-0-1910" name="__codelineno-0-1910"></a><span class="sd">                            File: ...</span>
<a id="__codelineno-0-1911" name="__codelineno-0-1911"></a><span class="sd">                &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1912" name="__codelineno-0-1912"></a><span class="sd">                &gt;&gt;&gt; dataset.scale = [0.1]</span>
<a id="__codelineno-0-1913" name="__codelineno-0-1913"></a>
<a id="__codelineno-0-1914" name="__codelineno-0-1914"></a><span class="sd">            - now lets unscale the dataset values.</span>
<a id="__codelineno-0-1915" name="__codelineno-0-1915"></a>
<a id="__codelineno-0-1916" name="__codelineno-0-1916"></a><span class="sd">                &gt;&gt;&gt; unscaled_dataset = dataset.translate(unscale=True)</span>
<a id="__codelineno-0-1917" name="__codelineno-0-1917"></a><span class="sd">                &gt;&gt;&gt; print(unscaled_dataset) # doctest: +SKIP</span>
<a id="__codelineno-0-1918" name="__codelineno-0-1918"></a><span class="sd">                &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1919" name="__codelineno-0-1919"></a><span class="sd">                            Top Left Corner: (0.0, 0.0)</span>
<a id="__codelineno-0-1920" name="__codelineno-0-1920"></a><span class="sd">                            Cell size: 0.05</span>
<a id="__codelineno-0-1921" name="__codelineno-0-1921"></a><span class="sd">                            Dimension: 5 * 5</span>
<a id="__codelineno-0-1922" name="__codelineno-0-1922"></a><span class="sd">                            EPSG: 4326</span>
<a id="__codelineno-0-1923" name="__codelineno-0-1923"></a><span class="sd">                            Number of Bands: 1</span>
<a id="__codelineno-0-1924" name="__codelineno-0-1924"></a><span class="sd">                            Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-1925" name="__codelineno-0-1925"></a><span class="sd">                            Band colors: {0: &#39;undefined&#39;}</span>
<a id="__codelineno-0-1926" name="__codelineno-0-1926"></a><span class="sd">                            Band units: [&#39;&#39;]</span>
<a id="__codelineno-0-1927" name="__codelineno-0-1927"></a><span class="sd">                            Scale: [1.0]</span>
<a id="__codelineno-0-1928" name="__codelineno-0-1928"></a><span class="sd">                            Offset: [0]</span>
<a id="__codelineno-0-1929" name="__codelineno-0-1929"></a><span class="sd">                            Mask: -9999.0</span>
<a id="__codelineno-0-1930" name="__codelineno-0-1930"></a><span class="sd">                            Data type: float32</span>
<a id="__codelineno-0-1931" name="__codelineno-0-1931"></a><span class="sd">                            File:</span>
<a id="__codelineno-0-1932" name="__codelineno-0-1932"></a><span class="sd">                &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1933" name="__codelineno-0-1933"></a><span class="sd">                &gt;&gt;&gt; print(unscaled_dataset.read_array()) # doctest: +SKIP</span>
<a id="__codelineno-0-1934" name="__codelineno-0-1934"></a><span class="sd">                [[0.5 0.5 0.3 0.4 0.2]</span>
<a id="__codelineno-0-1935" name="__codelineno-0-1935"></a><span class="sd">                 [0.2 0.5 0.5 0.8 0.5]</span>
<a id="__codelineno-0-1936" name="__codelineno-0-1936"></a><span class="sd">                 [0.7 0.5 0.6 0.1 0.2]</span>
<a id="__codelineno-0-1937" name="__codelineno-0-1937"></a><span class="sd">                 [0.6 0.8 0.1 0.5 0.8]</span>
<a id="__codelineno-0-1938" name="__codelineno-0-1938"></a><span class="sd">                 [0.2 0.5 0.2 0.2 0.9]]</span>
<a id="__codelineno-0-1939" name="__codelineno-0-1939"></a>
<a id="__codelineno-0-1940" name="__codelineno-0-1940"></a><span class="sd">        offset:</span>
<a id="__codelineno-0-1941" name="__codelineno-0-1941"></a><span class="sd">            - You can also unshift the values of the dataset if the dataset has an offset. To remove the offset from</span>
<a id="__codelineno-0-1942" name="__codelineno-0-1942"></a><span class="sd">                all values in the dataset, you can read the values using the `read_array` and then add the offset value</span>
<a id="__codelineno-0-1943" name="__codelineno-0-1943"></a><span class="sd">                to the array. we will create a dataset from the same array we created above (values are between 1, and 10)</span>
<a id="__codelineno-0-1944" name="__codelineno-0-1944"></a><span class="sd">                with an offset of 100.</span>
<a id="__codelineno-0-1945" name="__codelineno-0-1945"></a>
<a id="__codelineno-0-1946" name="__codelineno-0-1946"></a><span class="sd">                &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,epsg=4326)</span>
<a id="__codelineno-0-1947" name="__codelineno-0-1947"></a><span class="sd">                &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-1948" name="__codelineno-0-1948"></a><span class="sd">                &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1949" name="__codelineno-0-1949"></a><span class="sd">                            Top Left Corner: (0.0, 0.0)</span>
<a id="__codelineno-0-1950" name="__codelineno-0-1950"></a><span class="sd">                            Cell size: 0.05</span>
<a id="__codelineno-0-1951" name="__codelineno-0-1951"></a><span class="sd">                            Dimension: 5 * 5</span>
<a id="__codelineno-0-1952" name="__codelineno-0-1952"></a><span class="sd">                            EPSG: 4326</span>
<a id="__codelineno-0-1953" name="__codelineno-0-1953"></a><span class="sd">                            Number of Bands: 1</span>
<a id="__codelineno-0-1954" name="__codelineno-0-1954"></a><span class="sd">                            Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-1955" name="__codelineno-0-1955"></a><span class="sd">                            Band colors: {0: &#39;undefined&#39;}</span>
<a id="__codelineno-0-1956" name="__codelineno-0-1956"></a><span class="sd">                            Band units: [&#39;&#39;]</span>
<a id="__codelineno-0-1957" name="__codelineno-0-1957"></a><span class="sd">                            Scale: [1.0]</span>
<a id="__codelineno-0-1958" name="__codelineno-0-1958"></a><span class="sd">                            Offset: [0]</span>
<a id="__codelineno-0-1959" name="__codelineno-0-1959"></a><span class="sd">                            Mask: -9999.0</span>
<a id="__codelineno-0-1960" name="__codelineno-0-1960"></a><span class="sd">                            Data type: float32</span>
<a id="__codelineno-0-1961" name="__codelineno-0-1961"></a><span class="sd">                            File: ...</span>
<a id="__codelineno-0-1962" name="__codelineno-0-1962"></a><span class="sd">                &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-1963" name="__codelineno-0-1963"></a>
<a id="__codelineno-0-1964" name="__codelineno-0-1964"></a><span class="sd">            - set the offset to 100.</span>
<a id="__codelineno-0-1965" name="__codelineno-0-1965"></a>
<a id="__codelineno-0-1966" name="__codelineno-0-1966"></a><span class="sd">                &gt;&gt;&gt; dataset.offset = [100]</span>
<a id="__codelineno-0-1967" name="__codelineno-0-1967"></a>
<a id="__codelineno-0-1968" name="__codelineno-0-1968"></a><span class="sd">            - check if the offset has been set.</span>
<a id="__codelineno-0-1969" name="__codelineno-0-1969"></a>
<a id="__codelineno-0-1970" name="__codelineno-0-1970"></a><span class="sd">                &gt;&gt;&gt; print(dataset.offset)</span>
<a id="__codelineno-0-1971" name="__codelineno-0-1971"></a><span class="sd">                [100.0]</span>
<a id="__codelineno-0-1972" name="__codelineno-0-1972"></a>
<a id="__codelineno-0-1973" name="__codelineno-0-1973"></a><span class="sd">            - now lets unscale the dataset values.</span>
<a id="__codelineno-0-1974" name="__codelineno-0-1974"></a>
<a id="__codelineno-0-1975" name="__codelineno-0-1975"></a><span class="sd">                &gt;&gt;&gt; unscaled_dataset = dataset.translate(unscale=True)</span>
<a id="__codelineno-0-1976" name="__codelineno-0-1976"></a><span class="sd">                &gt;&gt;&gt; print(unscaled_dataset.read_array()) # doctest: +SKIP</span>
<a id="__codelineno-0-1977" name="__codelineno-0-1977"></a><span class="sd">                [[105. 105. 103. 104. 102.]</span>
<a id="__codelineno-0-1978" name="__codelineno-0-1978"></a><span class="sd">                 [102. 105. 105. 108. 105.]</span>
<a id="__codelineno-0-1979" name="__codelineno-0-1979"></a><span class="sd">                 [107. 105. 106. 101. 102.]</span>
<a id="__codelineno-0-1980" name="__codelineno-0-1980"></a><span class="sd">                 [106. 108. 101. 105. 108.]</span>
<a id="__codelineno-0-1981" name="__codelineno-0-1981"></a><span class="sd">                 [102. 105. 102. 102. 109.]]</span>
<a id="__codelineno-0-1982" name="__codelineno-0-1982"></a>
<a id="__codelineno-0-1983" name="__codelineno-0-1983"></a><span class="sd">            - as you see, all the values have been shifted by 100. now if you check the offset of the dataset</span>
<a id="__codelineno-0-1984" name="__codelineno-0-1984"></a>
<a id="__codelineno-0-1985" name="__codelineno-0-1985"></a><span class="sd">                &gt;&gt;&gt; print(unscaled_dataset.offset)</span>
<a id="__codelineno-0-1986" name="__codelineno-0-1986"></a><span class="sd">                [0]</span>
<a id="__codelineno-0-1987" name="__codelineno-0-1987"></a>
<a id="__codelineno-0-1988" name="__codelineno-0-1988"></a><span class="sd">        Offset and Scale together:</span>
<a id="__codelineno-0-1989" name="__codelineno-0-1989"></a><span class="sd">            - we can unscale and get rid of the offset at the same time.</span>
<a id="__codelineno-0-1990" name="__codelineno-0-1990"></a>
<a id="__codelineno-0-1991" name="__codelineno-0-1991"></a><span class="sd">                &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,epsg=4326)</span>
<a id="__codelineno-0-1992" name="__codelineno-0-1992"></a>
<a id="__codelineno-0-1993" name="__codelineno-0-1993"></a><span class="sd">            - set the offset to 100, and a scale of 0.1.</span>
<a id="__codelineno-0-1994" name="__codelineno-0-1994"></a>
<a id="__codelineno-0-1995" name="__codelineno-0-1995"></a><span class="sd">                &gt;&gt;&gt; dataset.offset = [100]</span>
<a id="__codelineno-0-1996" name="__codelineno-0-1996"></a><span class="sd">                &gt;&gt;&gt; dataset.scale = [0.1]</span>
<a id="__codelineno-0-1997" name="__codelineno-0-1997"></a>
<a id="__codelineno-0-1998" name="__codelineno-0-1998"></a><span class="sd">            - check if the offset has been set.</span>
<a id="__codelineno-0-1999" name="__codelineno-0-1999"></a>
<a id="__codelineno-0-2000" name="__codelineno-0-2000"></a><span class="sd">                &gt;&gt;&gt; print(dataset.offset)</span>
<a id="__codelineno-0-2001" name="__codelineno-0-2001"></a><span class="sd">                [100.0]</span>
<a id="__codelineno-0-2002" name="__codelineno-0-2002"></a><span class="sd">                &gt;&gt;&gt; print(dataset.scale)</span>
<a id="__codelineno-0-2003" name="__codelineno-0-2003"></a><span class="sd">                [0.1]</span>
<a id="__codelineno-0-2004" name="__codelineno-0-2004"></a>
<a id="__codelineno-0-2005" name="__codelineno-0-2005"></a><span class="sd">            - now lets unscale the dataset values.</span>
<a id="__codelineno-0-2006" name="__codelineno-0-2006"></a>
<a id="__codelineno-0-2007" name="__codelineno-0-2007"></a><span class="sd">                &gt;&gt;&gt; unscaled_dataset = dataset.translate(unscale=True)</span>
<a id="__codelineno-0-2008" name="__codelineno-0-2008"></a><span class="sd">                &gt;&gt;&gt; print(unscaled_dataset.read_array()) # doctest: +SKIP</span>
<a id="__codelineno-0-2009" name="__codelineno-0-2009"></a><span class="sd">                [[100.5 100.5 100.3 100.4 100.2]</span>
<a id="__codelineno-0-2010" name="__codelineno-0-2010"></a><span class="sd">                 [100.2 100.5 100.5 100.8 100.5]</span>
<a id="__codelineno-0-2011" name="__codelineno-0-2011"></a><span class="sd">                 [100.7 100.5 100.6 100.1 100.2]</span>
<a id="__codelineno-0-2012" name="__codelineno-0-2012"></a><span class="sd">                 [100.6 100.8 100.1 100.5 100.8]</span>
<a id="__codelineno-0-2013" name="__codelineno-0-2013"></a><span class="sd">                 [100.2 100.5 100.2 100.2 100.9]]</span>
<a id="__codelineno-0-2014" name="__codelineno-0-2014"></a>
<a id="__codelineno-0-2015" name="__codelineno-0-2015"></a><span class="sd">            - Now you can see that the values were multiplied first by the scale; then the offset value was added.</span>
<a id="__codelineno-0-2016" name="__codelineno-0-2016"></a><span class="sd">                `value * scale + offset`</span>
<a id="__codelineno-0-2017" name="__codelineno-0-2017"></a>
<a id="__codelineno-0-2018" name="__codelineno-0-2018"></a><span class="sd">                &gt;&gt;&gt; print(unscaled_dataset.offset)</span>
<a id="__codelineno-0-2019" name="__codelineno-0-2019"></a><span class="sd">                [0]</span>
<a id="__codelineno-0-2020" name="__codelineno-0-2020"></a><span class="sd">                &gt;&gt;&gt; print(unscaled_dataset.scale)</span>
<a id="__codelineno-0-2021" name="__codelineno-0-2021"></a><span class="sd">                [1.0]</span>
<a id="__codelineno-0-2022" name="__codelineno-0-2022"></a>
<a id="__codelineno-0-2023" name="__codelineno-0-2023"></a><span class="sd">    Scale between two values:</span>
<a id="__codelineno-0-2024" name="__codelineno-0-2024"></a><span class="sd">        - you can scale the values of the dataset between two values, for example, you can scale the values between</span>
<a id="__codelineno-0-2025" name="__codelineno-0-2025"></a><span class="sd">            two values 0 and 1.</span>
<a id="__codelineno-0-2026" name="__codelineno-0-2026"></a>
<a id="__codelineno-0-2027" name="__codelineno-0-2027"></a><span class="sd">            &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,epsg=4326)</span>
<a id="__codelineno-0-2028" name="__codelineno-0-2028"></a><span class="sd">            &gt;&gt;&gt; print(dataset.stats()) # doctest: +SKIP</span>
<a id="__codelineno-0-2029" name="__codelineno-0-2029"></a><span class="sd">                    min  max  mean      std</span>
<a id="__codelineno-0-2030" name="__codelineno-0-2030"></a><span class="sd">            Band_1  1.0  9.0   4.0  2.19089</span>
<a id="__codelineno-0-2031" name="__codelineno-0-2031"></a><span class="sd">            &gt;&gt;&gt; scaled_dataset = dataset.translate(scaleParams=[[1, 9, 0, 255]], outputType=gdal.GDT_Byte)</span>
<a id="__codelineno-0-2032" name="__codelineno-0-2032"></a><span class="sd">            &gt;&gt;&gt; print(scaled_dataset.read_array()) # doctest: +SKIP</span>
<a id="__codelineno-0-2033" name="__codelineno-0-2033"></a><span class="sd">            [[128 128  64  96  32]</span>
<a id="__codelineno-0-2034" name="__codelineno-0-2034"></a><span class="sd">             [ 32 128 128 223 128]</span>
<a id="__codelineno-0-2035" name="__codelineno-0-2035"></a><span class="sd">             [191 128 159   0  32]</span>
<a id="__codelineno-0-2036" name="__codelineno-0-2036"></a><span class="sd">             [159 223   0 128 223]</span>
<a id="__codelineno-0-2037" name="__codelineno-0-2037"></a><span class="sd">             [ 32 128  32  32 255]]</span>
<a id="__codelineno-0-2038" name="__codelineno-0-2038"></a>
<a id="__codelineno-0-2039" name="__codelineno-0-2039"></a>
<a id="__codelineno-0-2040" name="__codelineno-0-2040"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2041" name="__codelineno-0-2041"></a>    <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2042" name="__codelineno-0-2042"></a>        <span class="n">driver</span> <span class="o">=</span> <span class="s2">&quot;MEM&quot;</span>
<a id="__codelineno-0-2043" name="__codelineno-0-2043"></a>        <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<a id="__codelineno-0-2044" name="__codelineno-0-2044"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2045" name="__codelineno-0-2045"></a>        <span class="n">driver</span> <span class="o">=</span> <span class="s2">&quot;GTiff&quot;</span>
<a id="__codelineno-0-2046" name="__codelineno-0-2046"></a>
<a id="__codelineno-0-2047" name="__codelineno-0-2047"></a>    <span class="n">options</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">TranslateOptions</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">driver</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-2048" name="__codelineno-0-2048"></a>    <span class="n">dst</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Translate</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
<a id="__codelineno-0-2049" name="__codelineno-0-2049"></a>    <span class="k">return</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="n">access</span><span class="o">=</span><span class="s2">&quot;write&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.create" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.create" class="toclink">
            <code class="highlight language-python"><span class="n">create</span><span class="p">(</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">rows</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="p">,</span> <span class="n">epsg</span><span class="p">,</span> <span class="n">no_data_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.create" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Create a new dataset and fill it with the no_data_value.</p>
<p>The new dataset will have an array filled with the no_data_value.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>cell_size</code>
            </td>
            <td>
                  <code><span title="int">int</span> | <span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Cell size.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>rows</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of rows.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>columns</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of columns.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dtype</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Data type. One of: None, "byte", "uint16", "int16", "uint32", "int32", "float32", "float64",
"complex-int16", "complex-int32", "complex-float32", "complex-float64", "uint64", "int64", "int8",
"count".</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bands</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of bands to create in the output raster.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>top_left_corner</code>
            </td>
            <td>
                  <code><span title="typing.Tuple">Tuple</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Coordinates of the top left corner point.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>epsg</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>EPSG number to identify the projection of the coordinates in the created raster.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>no_data_value</code>
            </td>
            <td>
                  <code><span title="float">float</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>No data value.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path on disk; if None, the dataset is created in memory. Default is None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Dataset</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;pyramids.dataset.Dataset&lt;/code&gt;" href="#pyramids.dataset.Dataset">Dataset</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A new dataset</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="hint" open>
  <summary>Hint</summary>
  <ul>
<li>The no_data_value will be filled in the array of the output dataset.</li>
<li>The coordinates of the top left corner point should be in the same projection as the epsg.</li>
<li>The cell size should be in the same unit as the coordinates.</li>
<li>The number of rows and columns should be positive integers.</li>
</ul>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>To create a dataset using the <code>create</code> method you need to provide all the information needed to locate the
 dataset in space <code>top_left_corner</code> and <code>epsg</code>, then the information needed to specify the data to be stored
 in the dataset like <code>dtype</code>, <code>rows</code>, <code>columns</code>, <code>cell_size</code>, <code>bands</code> and <code>no_data_value</code>.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mi">10</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">rows</span> <span class="o">=</span> <span class="mi">5</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">columns</span> <span class="o">=</span> <span class="mi">5</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s2">&quot;float32&quot;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">bands</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">epsg</span> <span class="o">=</span> <span class="mi">32618</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">no_data_value</span> <span class="o">=</span> <span class="o">-</span><span class="mi">9999</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;create-new-dataset.tif&quot;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">rows</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="p">,</span> <span class="n">epsg</span><span class="p">,</span> <span class="n">no_data_value</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">10.0</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">5</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">32618</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">1</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">]</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">9999.0</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">float32</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>            <span class="n">File</span><span class="p">:</span> <span class="n">create</span><span class="o">-</span><span class="n">new</span><span class="o">-</span><span class="n">dataset</span><span class="o">.</span><span class="n">tif</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
</code></pre></div>
<ul>
<li>If you check the value stored in the band using the <code>read_array</code> method, you will find that the band is
    full of the <code>no_data_value</code> value which we used here as -9999.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="p">[[</span><span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span><span class="p">]</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a> <span class="p">[</span><span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span><span class="p">]</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a> <span class="p">[</span><span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span><span class="p">]</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a> <span class="p">[</span><span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span><span class="p">]</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a> <span class="p">[</span><span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span> <span class="o">-</span><span class="mf">9999.</span><span class="p">]]</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2139">2139</a></span>
<span class="normal"><a href="#__codelineno-0-2140">2140</a></span>
<span class="normal"><a href="#__codelineno-0-2141">2141</a></span>
<span class="normal"><a href="#__codelineno-0-2142">2142</a></span>
<span class="normal"><a href="#__codelineno-0-2143">2143</a></span>
<span class="normal"><a href="#__codelineno-0-2144">2144</a></span>
<span class="normal"><a href="#__codelineno-0-2145">2145</a></span>
<span class="normal"><a href="#__codelineno-0-2146">2146</a></span>
<span class="normal"><a href="#__codelineno-0-2147">2147</a></span>
<span class="normal"><a href="#__codelineno-0-2148">2148</a></span>
<span class="normal"><a href="#__codelineno-0-2149">2149</a></span>
<span class="normal"><a href="#__codelineno-0-2150">2150</a></span>
<span class="normal"><a href="#__codelineno-0-2151">2151</a></span>
<span class="normal"><a href="#__codelineno-0-2152">2152</a></span>
<span class="normal"><a href="#__codelineno-0-2153">2153</a></span>
<span class="normal"><a href="#__codelineno-0-2154">2154</a></span>
<span class="normal"><a href="#__codelineno-0-2155">2155</a></span>
<span class="normal"><a href="#__codelineno-0-2156">2156</a></span>
<span class="normal"><a href="#__codelineno-0-2157">2157</a></span>
<span class="normal"><a href="#__codelineno-0-2158">2158</a></span>
<span class="normal"><a href="#__codelineno-0-2159">2159</a></span>
<span class="normal"><a href="#__codelineno-0-2160">2160</a></span>
<span class="normal"><a href="#__codelineno-0-2161">2161</a></span>
<span class="normal"><a href="#__codelineno-0-2162">2162</a></span>
<span class="normal"><a href="#__codelineno-0-2163">2163</a></span>
<span class="normal"><a href="#__codelineno-0-2164">2164</a></span>
<span class="normal"><a href="#__codelineno-0-2165">2165</a></span>
<span class="normal"><a href="#__codelineno-0-2166">2166</a></span>
<span class="normal"><a href="#__codelineno-0-2167">2167</a></span>
<span class="normal"><a href="#__codelineno-0-2168">2168</a></span>
<span class="normal"><a href="#__codelineno-0-2169">2169</a></span>
<span class="normal"><a href="#__codelineno-0-2170">2170</a></span>
<span class="normal"><a href="#__codelineno-0-2171">2171</a></span>
<span class="normal"><a href="#__codelineno-0-2172">2172</a></span>
<span class="normal"><a href="#__codelineno-0-2173">2173</a></span>
<span class="normal"><a href="#__codelineno-0-2174">2174</a></span>
<span class="normal"><a href="#__codelineno-0-2175">2175</a></span>
<span class="normal"><a href="#__codelineno-0-2176">2176</a></span>
<span class="normal"><a href="#__codelineno-0-2177">2177</a></span>
<span class="normal"><a href="#__codelineno-0-2178">2178</a></span>
<span class="normal"><a href="#__codelineno-0-2179">2179</a></span>
<span class="normal"><a href="#__codelineno-0-2180">2180</a></span>
<span class="normal"><a href="#__codelineno-0-2181">2181</a></span>
<span class="normal"><a href="#__codelineno-0-2182">2182</a></span>
<span class="normal"><a href="#__codelineno-0-2183">2183</a></span>
<span class="normal"><a href="#__codelineno-0-2184">2184</a></span>
<span class="normal"><a href="#__codelineno-0-2185">2185</a></span>
<span class="normal"><a href="#__codelineno-0-2186">2186</a></span>
<span class="normal"><a href="#__codelineno-0-2187">2187</a></span>
<span class="normal"><a href="#__codelineno-0-2188">2188</a></span>
<span class="normal"><a href="#__codelineno-0-2189">2189</a></span>
<span class="normal"><a href="#__codelineno-0-2190">2190</a></span>
<span class="normal"><a href="#__codelineno-0-2191">2191</a></span>
<span class="normal"><a href="#__codelineno-0-2192">2192</a></span>
<span class="normal"><a href="#__codelineno-0-2193">2193</a></span>
<span class="normal"><a href="#__codelineno-0-2194">2194</a></span>
<span class="normal"><a href="#__codelineno-0-2195">2195</a></span>
<span class="normal"><a href="#__codelineno-0-2196">2196</a></span>
<span class="normal"><a href="#__codelineno-0-2197">2197</a></span>
<span class="normal"><a href="#__codelineno-0-2198">2198</a></span>
<span class="normal"><a href="#__codelineno-0-2199">2199</a></span>
<span class="normal"><a href="#__codelineno-0-2200">2200</a></span>
<span class="normal"><a href="#__codelineno-0-2201">2201</a></span>
<span class="normal"><a href="#__codelineno-0-2202">2202</a></span>
<span class="normal"><a href="#__codelineno-0-2203">2203</a></span>
<span class="normal"><a href="#__codelineno-0-2204">2204</a></span>
<span class="normal"><a href="#__codelineno-0-2205">2205</a></span>
<span class="normal"><a href="#__codelineno-0-2206">2206</a></span>
<span class="normal"><a href="#__codelineno-0-2207">2207</a></span>
<span class="normal"><a href="#__codelineno-0-2208">2208</a></span>
<span class="normal"><a href="#__codelineno-0-2209">2209</a></span>
<span class="normal"><a href="#__codelineno-0-2210">2210</a></span>
<span class="normal"><a href="#__codelineno-0-2211">2211</a></span>
<span class="normal"><a href="#__codelineno-0-2212">2212</a></span>
<span class="normal"><a href="#__codelineno-0-2213">2213</a></span>
<span class="normal"><a href="#__codelineno-0-2214">2214</a></span>
<span class="normal"><a href="#__codelineno-0-2215">2215</a></span>
<span class="normal"><a href="#__codelineno-0-2216">2216</a></span>
<span class="normal"><a href="#__codelineno-0-2217">2217</a></span>
<span class="normal"><a href="#__codelineno-0-2218">2218</a></span>
<span class="normal"><a href="#__codelineno-0-2219">2219</a></span>
<span class="normal"><a href="#__codelineno-0-2220">2220</a></span>
<span class="normal"><a href="#__codelineno-0-2221">2221</a></span>
<span class="normal"><a href="#__codelineno-0-2222">2222</a></span>
<span class="normal"><a href="#__codelineno-0-2223">2223</a></span>
<span class="normal"><a href="#__codelineno-0-2224">2224</a></span>
<span class="normal"><a href="#__codelineno-0-2225">2225</a></span>
<span class="normal"><a href="#__codelineno-0-2226">2226</a></span>
<span class="normal"><a href="#__codelineno-0-2227">2227</a></span>
<span class="normal"><a href="#__codelineno-0-2228">2228</a></span>
<span class="normal"><a href="#__codelineno-0-2229">2229</a></span>
<span class="normal"><a href="#__codelineno-0-2230">2230</a></span>
<span class="normal"><a href="#__codelineno-0-2231">2231</a></span>
<span class="normal"><a href="#__codelineno-0-2232">2232</a></span>
<span class="normal"><a href="#__codelineno-0-2233">2233</a></span>
<span class="normal"><a href="#__codelineno-0-2234">2234</a></span>
<span class="normal"><a href="#__codelineno-0-2235">2235</a></span>
<span class="normal"><a href="#__codelineno-0-2236">2236</a></span>
<span class="normal"><a href="#__codelineno-0-2237">2237</a></span>
<span class="normal"><a href="#__codelineno-0-2238">2238</a></span>
<span class="normal"><a href="#__codelineno-0-2239">2239</a></span>
<span class="normal"><a href="#__codelineno-0-2240">2240</a></span>
<span class="normal"><a href="#__codelineno-0-2241">2241</a></span>
<span class="normal"><a href="#__codelineno-0-2242">2242</a></span>
<span class="normal"><a href="#__codelineno-0-2243">2243</a></span>
<span class="normal"><a href="#__codelineno-0-2244">2244</a></span>
<span class="normal"><a href="#__codelineno-0-2245">2245</a></span>
<span class="normal"><a href="#__codelineno-0-2246">2246</a></span>
<span class="normal"><a href="#__codelineno-0-2247">2247</a></span>
<span class="normal"><a href="#__codelineno-0-2248">2248</a></span>
<span class="normal"><a href="#__codelineno-0-2249">2249</a></span>
<span class="normal"><a href="#__codelineno-0-2250">2250</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2139" name="__codelineno-0-2139"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-2140" name="__codelineno-0-2140"></a><span class="k">def</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span>
<a id="__codelineno-0-2141" name="__codelineno-0-2141"></a>    <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-0-2142" name="__codelineno-0-2142"></a>    <span class="n">cell_size</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
<a id="__codelineno-0-2143" name="__codelineno-0-2143"></a>    <span class="n">rows</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-2144" name="__codelineno-0-2144"></a>    <span class="n">columns</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-2145" name="__codelineno-0-2145"></a>    <span class="n">dtype</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-2146" name="__codelineno-0-2146"></a>    <span class="n">bands</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-2147" name="__codelineno-0-2147"></a>    <span class="n">top_left_corner</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">,</span>
<a id="__codelineno-0-2148" name="__codelineno-0-2148"></a>    <span class="n">epsg</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-2149" name="__codelineno-0-2149"></a>    <span class="n">no_data_value</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2150" name="__codelineno-0-2150"></a>    <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2151" name="__codelineno-0-2151"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2152" name="__codelineno-0-2152"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new dataset and fill it with the no_data_value.</span>
<a id="__codelineno-0-2153" name="__codelineno-0-2153"></a>
<a id="__codelineno-0-2154" name="__codelineno-0-2154"></a><span class="sd">    The new dataset will have an array filled with the no_data_value.</span>
<a id="__codelineno-0-2155" name="__codelineno-0-2155"></a>
<a id="__codelineno-0-2156" name="__codelineno-0-2156"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-2157" name="__codelineno-0-2157"></a><span class="sd">        cell_size (int|float):</span>
<a id="__codelineno-0-2158" name="__codelineno-0-2158"></a><span class="sd">            Cell size.</span>
<a id="__codelineno-0-2159" name="__codelineno-0-2159"></a><span class="sd">        rows (int):</span>
<a id="__codelineno-0-2160" name="__codelineno-0-2160"></a><span class="sd">            Number of rows.</span>
<a id="__codelineno-0-2161" name="__codelineno-0-2161"></a><span class="sd">        columns (int):</span>
<a id="__codelineno-0-2162" name="__codelineno-0-2162"></a><span class="sd">            Number of columns.</span>
<a id="__codelineno-0-2163" name="__codelineno-0-2163"></a><span class="sd">        dtype (str):</span>
<a id="__codelineno-0-2164" name="__codelineno-0-2164"></a><span class="sd">            Data type. One of: None, &quot;byte&quot;, &quot;uint16&quot;, &quot;int16&quot;, &quot;uint32&quot;, &quot;int32&quot;, &quot;float32&quot;, &quot;float64&quot;,</span>
<a id="__codelineno-0-2165" name="__codelineno-0-2165"></a><span class="sd">            &quot;complex-int16&quot;, &quot;complex-int32&quot;, &quot;complex-float32&quot;, &quot;complex-float64&quot;, &quot;uint64&quot;, &quot;int64&quot;, &quot;int8&quot;,</span>
<a id="__codelineno-0-2166" name="__codelineno-0-2166"></a><span class="sd">            &quot;count&quot;.</span>
<a id="__codelineno-0-2167" name="__codelineno-0-2167"></a><span class="sd">        bands (int|None):</span>
<a id="__codelineno-0-2168" name="__codelineno-0-2168"></a><span class="sd">            Number of bands to create in the output raster.</span>
<a id="__codelineno-0-2169" name="__codelineno-0-2169"></a><span class="sd">        top_left_corner (Tuple):</span>
<a id="__codelineno-0-2170" name="__codelineno-0-2170"></a><span class="sd">            Coordinates of the top left corner point.</span>
<a id="__codelineno-0-2171" name="__codelineno-0-2171"></a><span class="sd">        epsg (int):</span>
<a id="__codelineno-0-2172" name="__codelineno-0-2172"></a><span class="sd">            EPSG number to identify the projection of the coordinates in the created raster.</span>
<a id="__codelineno-0-2173" name="__codelineno-0-2173"></a><span class="sd">        no_data_value (float|None):</span>
<a id="__codelineno-0-2174" name="__codelineno-0-2174"></a><span class="sd">            No data value.</span>
<a id="__codelineno-0-2175" name="__codelineno-0-2175"></a><span class="sd">        path (str, optional):</span>
<a id="__codelineno-0-2176" name="__codelineno-0-2176"></a><span class="sd">            Path on disk; if None, the dataset is created in memory. Default is None.</span>
<a id="__codelineno-0-2177" name="__codelineno-0-2177"></a>
<a id="__codelineno-0-2178" name="__codelineno-0-2178"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-2179" name="__codelineno-0-2179"></a><span class="sd">        Dataset: A new dataset</span>
<a id="__codelineno-0-2180" name="__codelineno-0-2180"></a>
<a id="__codelineno-0-2181" name="__codelineno-0-2181"></a><span class="sd">    Hint:</span>
<a id="__codelineno-0-2182" name="__codelineno-0-2182"></a><span class="sd">        - The no_data_value will be filled in the array of the output dataset.</span>
<a id="__codelineno-0-2183" name="__codelineno-0-2183"></a><span class="sd">        - The coordinates of the top left corner point should be in the same projection as the epsg.</span>
<a id="__codelineno-0-2184" name="__codelineno-0-2184"></a><span class="sd">        - The cell size should be in the same unit as the coordinates.</span>
<a id="__codelineno-0-2185" name="__codelineno-0-2185"></a><span class="sd">        - The number of rows and columns should be positive integers.</span>
<a id="__codelineno-0-2186" name="__codelineno-0-2186"></a>
<a id="__codelineno-0-2187" name="__codelineno-0-2187"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-2188" name="__codelineno-0-2188"></a><span class="sd">        - To create a dataset using the `create` method you need to provide all the information needed to locate the</span>
<a id="__codelineno-0-2189" name="__codelineno-0-2189"></a><span class="sd">         dataset in space `top_left_corner` and `epsg`, then the information needed to specify the data to be stored</span>
<a id="__codelineno-0-2190" name="__codelineno-0-2190"></a><span class="sd">         in the dataset like `dtype`, `rows`, `columns`, `cell_size`, `bands` and `no_data_value`.</span>
<a id="__codelineno-0-2191" name="__codelineno-0-2191"></a>
<a id="__codelineno-0-2192" name="__codelineno-0-2192"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-2193" name="__codelineno-0-2193"></a><span class="sd">          &gt;&gt;&gt; cell_size = 10</span>
<a id="__codelineno-0-2194" name="__codelineno-0-2194"></a><span class="sd">          &gt;&gt;&gt; rows = 5</span>
<a id="__codelineno-0-2195" name="__codelineno-0-2195"></a><span class="sd">          &gt;&gt;&gt; columns = 5</span>
<a id="__codelineno-0-2196" name="__codelineno-0-2196"></a><span class="sd">          &gt;&gt;&gt; dtype = &quot;float32&quot;</span>
<a id="__codelineno-0-2197" name="__codelineno-0-2197"></a><span class="sd">          &gt;&gt;&gt; bands = 1</span>
<a id="__codelineno-0-2198" name="__codelineno-0-2198"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-2199" name="__codelineno-0-2199"></a><span class="sd">          &gt;&gt;&gt; epsg = 32618</span>
<a id="__codelineno-0-2200" name="__codelineno-0-2200"></a><span class="sd">          &gt;&gt;&gt; no_data_value = -9999</span>
<a id="__codelineno-0-2201" name="__codelineno-0-2201"></a><span class="sd">          &gt;&gt;&gt; path = &quot;create-new-dataset.tif&quot;</span>
<a id="__codelineno-0-2202" name="__codelineno-0-2202"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create(cell_size, rows, columns, dtype, bands, top_left_corner, epsg, no_data_value, path)</span>
<a id="__codelineno-0-2203" name="__codelineno-0-2203"></a><span class="sd">          &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-2204" name="__codelineno-0-2204"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2205" name="__codelineno-0-2205"></a><span class="sd">                      Cell size: 10.0</span>
<a id="__codelineno-0-2206" name="__codelineno-0-2206"></a><span class="sd">                      Dimension: 5 * 5</span>
<a id="__codelineno-0-2207" name="__codelineno-0-2207"></a><span class="sd">                      EPSG: 32618</span>
<a id="__codelineno-0-2208" name="__codelineno-0-2208"></a><span class="sd">                      Number of Bands: 1</span>
<a id="__codelineno-0-2209" name="__codelineno-0-2209"></a><span class="sd">                      Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-2210" name="__codelineno-0-2210"></a><span class="sd">                      Mask: -9999.0</span>
<a id="__codelineno-0-2211" name="__codelineno-0-2211"></a><span class="sd">                      Data type: float32</span>
<a id="__codelineno-0-2212" name="__codelineno-0-2212"></a><span class="sd">                      File: create-new-dataset.tif</span>
<a id="__codelineno-0-2213" name="__codelineno-0-2213"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2214" name="__codelineno-0-2214"></a>
<a id="__codelineno-0-2215" name="__codelineno-0-2215"></a><span class="sd">          ```</span>
<a id="__codelineno-0-2216" name="__codelineno-0-2216"></a>
<a id="__codelineno-0-2217" name="__codelineno-0-2217"></a><span class="sd">        - If you check the value stored in the band using the `read_array` method, you will find that the band is</span>
<a id="__codelineno-0-2218" name="__codelineno-0-2218"></a><span class="sd">            full of the `no_data_value` value which we used here as -9999.</span>
<a id="__codelineno-0-2219" name="__codelineno-0-2219"></a>
<a id="__codelineno-0-2220" name="__codelineno-0-2220"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-2221" name="__codelineno-0-2221"></a><span class="sd">          &gt;&gt;&gt; print(dataset.read_array(band=0))</span>
<a id="__codelineno-0-2222" name="__codelineno-0-2222"></a><span class="sd">          [[-9999. -9999. -9999. -9999. -9999.]</span>
<a id="__codelineno-0-2223" name="__codelineno-0-2223"></a><span class="sd">           [-9999. -9999. -9999. -9999. -9999.]</span>
<a id="__codelineno-0-2224" name="__codelineno-0-2224"></a><span class="sd">           [-9999. -9999. -9999. -9999. -9999.]</span>
<a id="__codelineno-0-2225" name="__codelineno-0-2225"></a><span class="sd">           [-9999. -9999. -9999. -9999. -9999.]</span>
<a id="__codelineno-0-2226" name="__codelineno-0-2226"></a><span class="sd">           [-9999. -9999. -9999. -9999. -9999.]]</span>
<a id="__codelineno-0-2227" name="__codelineno-0-2227"></a>
<a id="__codelineno-0-2228" name="__codelineno-0-2228"></a><span class="sd">          ```</span>
<a id="__codelineno-0-2229" name="__codelineno-0-2229"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2230" name="__codelineno-0-2230"></a>    <span class="c1"># Create the driver.</span>
<a id="__codelineno-0-2231" name="__codelineno-0-2231"></a>    <span class="n">dtype</span> <span class="o">=</span> <span class="n">numpy_to_gdal_dtype</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span>
<a id="__codelineno-0-2232" name="__codelineno-0-2232"></a>    <span class="n">dst</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_create_dataset</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="n">rows</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-2233" name="__codelineno-0-2233"></a>    <span class="n">sr</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_create_sr_from_epsg</span><span class="p">(</span><span class="n">epsg</span><span class="p">)</span>
<a id="__codelineno-0-2234" name="__codelineno-0-2234"></a>    <span class="n">geotransform</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-2235" name="__codelineno-0-2235"></a>        <span class="n">top_left_corner</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-0-2236" name="__codelineno-0-2236"></a>        <span class="n">cell_size</span><span class="p">,</span>
<a id="__codelineno-0-2237" name="__codelineno-0-2237"></a>        <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-2238" name="__codelineno-0-2238"></a>        <span class="n">top_left_corner</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<a id="__codelineno-0-2239" name="__codelineno-0-2239"></a>        <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-2240" name="__codelineno-0-2240"></a>        <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">cell_size</span><span class="p">,</span>
<a id="__codelineno-0-2241" name="__codelineno-0-2241"></a>    <span class="p">)</span>
<a id="__codelineno-0-2242" name="__codelineno-0-2242"></a>    <span class="n">dst</span><span class="o">.</span><span class="n">SetGeoTransform</span><span class="p">(</span><span class="n">geotransform</span><span class="p">)</span>
<a id="__codelineno-0-2243" name="__codelineno-0-2243"></a>    <span class="c1"># Set the projection.</span>
<a id="__codelineno-0-2244" name="__codelineno-0-2244"></a>    <span class="n">dst</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">sr</span><span class="o">.</span><span class="n">ExportToWkt</span><span class="p">())</span>
<a id="__codelineno-0-2245" name="__codelineno-0-2245"></a>
<a id="__codelineno-0-2246" name="__codelineno-0-2246"></a>    <span class="n">dst</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="n">access</span><span class="o">=</span><span class="s2">&quot;write&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2247" name="__codelineno-0-2247"></a>    <span class="k">if</span> <span class="n">no_data_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2248" name="__codelineno-0-2248"></a>        <span class="n">dst</span><span class="o">.</span><span class="n">_set_no_data_value</span><span class="p">(</span><span class="n">no_data_value</span><span class="o">=</span><span class="n">no_data_value</span><span class="p">)</span>
<a id="__codelineno-0-2249" name="__codelineno-0-2249"></a>
<a id="__codelineno-0-2250" name="__codelineno-0-2250"></a>    <span class="k">return</span> <span class="n">dst</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.create_from_array" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.create_from_array" class="toclink">
            <code class="highlight language-python"><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">geo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">,</span> <span class="n">no_data_value</span><span class="o">=</span><span class="n">DEFAULT_NO_DATA_VALUE</span><span class="p">,</span> <span class="n">driver_type</span><span class="o">=</span><span class="s1">&#39;MEM&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.create_from_array" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Create a new dataset from an array.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>arr</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Numpy array.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>top_left_corner</code>
            </td>
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The coordinates of the top left corner of the dataset.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cell_size</code>
            </td>
            <td>
                  <code><span title="int">int</span> | <span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Cell size in the same units of the coordinate reference system defined by the <code>epsg</code> parameter.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>geo</code>
            </td>
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="float">float</span>, <span title="float">float</span>, <span title="float">float</span>, <span title="float">float</span>, <span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Geotransform tuple (minimum lon/x, pixel-size, rotation, maximum lat/y, rotation, pixel-size).</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>epsg</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Integer reference number to the projection (https://epsg.io/).</p>
              </div>
            </td>
            <td>
                  <code>4326</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>no_data_value</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>No data value to mask the cells out of the domain. The default is -9999.</p>
              </div>
            </td>
            <td>
                  <code><span title="pyramids.abstract_dataset.DEFAULT_NO_DATA_VALUE">DEFAULT_NO_DATA_VALUE</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>driver_type</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Driver type ["GTiff", "MEM", "netcdf"]. Default is "MEM".</p>
              </div>
            </td>
            <td>
                  <code>&#39;MEM&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to save the driver.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Dataset</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;pyramids.dataset.Dataset&lt;/code&gt;" href="#pyramids.dataset.Dataset">Dataset</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dataset object will be returned.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="hint" open>
  <summary>Hint</summary>
  <ul>
<li>The <code>geo</code> parameter can replace both the <code>cell_size</code> and the <code>top_left_corner</code> parameters.</li>
<li>The function checks first if the <code>geo</code> parameter is defined; it will ignore the <code>cell_size</code> and the <code>top_left_corner</code> parameters if given.</li>
</ul>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create dataset using the <code>cell_size</code> and <code>top_left_corner</code> parameters.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span><span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">0.05</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">10</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">4326</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">4</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_2&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_3&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_4&#39;</span><span class="p">]</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">9999.0</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">float64</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>            <span class="n">File</span><span class="p">:</span> <span class="o">...</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
</code></pre></div>
<ul>
<li>
<p>Create dataset using the <code>geo</code> parameter.</p>
</li>
<li>
<p>To create the same dataset using the <code>geotransform</code> parameter, we will use the dataset <code>top_left_corner</code>
    coordinates and the <code>cell_size</code> to create it.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">geotransform</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">geo</span><span class="o">=</span><span class="n">geotransform</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">0.05</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">10</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">4326</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">4</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_2&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_3&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_4&#39;</span><span class="p">]</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">9999.0</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">float64</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>            <span class="n">File</span><span class="p">:</span> <span class="o">...</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2252">2252</a></span>
<span class="normal"><a href="#__codelineno-0-2253">2253</a></span>
<span class="normal"><a href="#__codelineno-0-2254">2254</a></span>
<span class="normal"><a href="#__codelineno-0-2255">2255</a></span>
<span class="normal"><a href="#__codelineno-0-2256">2256</a></span>
<span class="normal"><a href="#__codelineno-0-2257">2257</a></span>
<span class="normal"><a href="#__codelineno-0-2258">2258</a></span>
<span class="normal"><a href="#__codelineno-0-2259">2259</a></span>
<span class="normal"><a href="#__codelineno-0-2260">2260</a></span>
<span class="normal"><a href="#__codelineno-0-2261">2261</a></span>
<span class="normal"><a href="#__codelineno-0-2262">2262</a></span>
<span class="normal"><a href="#__codelineno-0-2263">2263</a></span>
<span class="normal"><a href="#__codelineno-0-2264">2264</a></span>
<span class="normal"><a href="#__codelineno-0-2265">2265</a></span>
<span class="normal"><a href="#__codelineno-0-2266">2266</a></span>
<span class="normal"><a href="#__codelineno-0-2267">2267</a></span>
<span class="normal"><a href="#__codelineno-0-2268">2268</a></span>
<span class="normal"><a href="#__codelineno-0-2269">2269</a></span>
<span class="normal"><a href="#__codelineno-0-2270">2270</a></span>
<span class="normal"><a href="#__codelineno-0-2271">2271</a></span>
<span class="normal"><a href="#__codelineno-0-2272">2272</a></span>
<span class="normal"><a href="#__codelineno-0-2273">2273</a></span>
<span class="normal"><a href="#__codelineno-0-2274">2274</a></span>
<span class="normal"><a href="#__codelineno-0-2275">2275</a></span>
<span class="normal"><a href="#__codelineno-0-2276">2276</a></span>
<span class="normal"><a href="#__codelineno-0-2277">2277</a></span>
<span class="normal"><a href="#__codelineno-0-2278">2278</a></span>
<span class="normal"><a href="#__codelineno-0-2279">2279</a></span>
<span class="normal"><a href="#__codelineno-0-2280">2280</a></span>
<span class="normal"><a href="#__codelineno-0-2281">2281</a></span>
<span class="normal"><a href="#__codelineno-0-2282">2282</a></span>
<span class="normal"><a href="#__codelineno-0-2283">2283</a></span>
<span class="normal"><a href="#__codelineno-0-2284">2284</a></span>
<span class="normal"><a href="#__codelineno-0-2285">2285</a></span>
<span class="normal"><a href="#__codelineno-0-2286">2286</a></span>
<span class="normal"><a href="#__codelineno-0-2287">2287</a></span>
<span class="normal"><a href="#__codelineno-0-2288">2288</a></span>
<span class="normal"><a href="#__codelineno-0-2289">2289</a></span>
<span class="normal"><a href="#__codelineno-0-2290">2290</a></span>
<span class="normal"><a href="#__codelineno-0-2291">2291</a></span>
<span class="normal"><a href="#__codelineno-0-2292">2292</a></span>
<span class="normal"><a href="#__codelineno-0-2293">2293</a></span>
<span class="normal"><a href="#__codelineno-0-2294">2294</a></span>
<span class="normal"><a href="#__codelineno-0-2295">2295</a></span>
<span class="normal"><a href="#__codelineno-0-2296">2296</a></span>
<span class="normal"><a href="#__codelineno-0-2297">2297</a></span>
<span class="normal"><a href="#__codelineno-0-2298">2298</a></span>
<span class="normal"><a href="#__codelineno-0-2299">2299</a></span>
<span class="normal"><a href="#__codelineno-0-2300">2300</a></span>
<span class="normal"><a href="#__codelineno-0-2301">2301</a></span>
<span class="normal"><a href="#__codelineno-0-2302">2302</a></span>
<span class="normal"><a href="#__codelineno-0-2303">2303</a></span>
<span class="normal"><a href="#__codelineno-0-2304">2304</a></span>
<span class="normal"><a href="#__codelineno-0-2305">2305</a></span>
<span class="normal"><a href="#__codelineno-0-2306">2306</a></span>
<span class="normal"><a href="#__codelineno-0-2307">2307</a></span>
<span class="normal"><a href="#__codelineno-0-2308">2308</a></span>
<span class="normal"><a href="#__codelineno-0-2309">2309</a></span>
<span class="normal"><a href="#__codelineno-0-2310">2310</a></span>
<span class="normal"><a href="#__codelineno-0-2311">2311</a></span>
<span class="normal"><a href="#__codelineno-0-2312">2312</a></span>
<span class="normal"><a href="#__codelineno-0-2313">2313</a></span>
<span class="normal"><a href="#__codelineno-0-2314">2314</a></span>
<span class="normal"><a href="#__codelineno-0-2315">2315</a></span>
<span class="normal"><a href="#__codelineno-0-2316">2316</a></span>
<span class="normal"><a href="#__codelineno-0-2317">2317</a></span>
<span class="normal"><a href="#__codelineno-0-2318">2318</a></span>
<span class="normal"><a href="#__codelineno-0-2319">2319</a></span>
<span class="normal"><a href="#__codelineno-0-2320">2320</a></span>
<span class="normal"><a href="#__codelineno-0-2321">2321</a></span>
<span class="normal"><a href="#__codelineno-0-2322">2322</a></span>
<span class="normal"><a href="#__codelineno-0-2323">2323</a></span>
<span class="normal"><a href="#__codelineno-0-2324">2324</a></span>
<span class="normal"><a href="#__codelineno-0-2325">2325</a></span>
<span class="normal"><a href="#__codelineno-0-2326">2326</a></span>
<span class="normal"><a href="#__codelineno-0-2327">2327</a></span>
<span class="normal"><a href="#__codelineno-0-2328">2328</a></span>
<span class="normal"><a href="#__codelineno-0-2329">2329</a></span>
<span class="normal"><a href="#__codelineno-0-2330">2330</a></span>
<span class="normal"><a href="#__codelineno-0-2331">2331</a></span>
<span class="normal"><a href="#__codelineno-0-2332">2332</a></span>
<span class="normal"><a href="#__codelineno-0-2333">2333</a></span>
<span class="normal"><a href="#__codelineno-0-2334">2334</a></span>
<span class="normal"><a href="#__codelineno-0-2335">2335</a></span>
<span class="normal"><a href="#__codelineno-0-2336">2336</a></span>
<span class="normal"><a href="#__codelineno-0-2337">2337</a></span>
<span class="normal"><a href="#__codelineno-0-2338">2338</a></span>
<span class="normal"><a href="#__codelineno-0-2339">2339</a></span>
<span class="normal"><a href="#__codelineno-0-2340">2340</a></span>
<span class="normal"><a href="#__codelineno-0-2341">2341</a></span>
<span class="normal"><a href="#__codelineno-0-2342">2342</a></span>
<span class="normal"><a href="#__codelineno-0-2343">2343</a></span>
<span class="normal"><a href="#__codelineno-0-2344">2344</a></span>
<span class="normal"><a href="#__codelineno-0-2345">2345</a></span>
<span class="normal"><a href="#__codelineno-0-2346">2346</a></span>
<span class="normal"><a href="#__codelineno-0-2347">2347</a></span>
<span class="normal"><a href="#__codelineno-0-2348">2348</a></span>
<span class="normal"><a href="#__codelineno-0-2349">2349</a></span>
<span class="normal"><a href="#__codelineno-0-2350">2350</a></span>
<span class="normal"><a href="#__codelineno-0-2351">2351</a></span>
<span class="normal"><a href="#__codelineno-0-2352">2352</a></span>
<span class="normal"><a href="#__codelineno-0-2353">2353</a></span>
<span class="normal"><a href="#__codelineno-0-2354">2354</a></span>
<span class="normal"><a href="#__codelineno-0-2355">2355</a></span>
<span class="normal"><a href="#__codelineno-0-2356">2356</a></span>
<span class="normal"><a href="#__codelineno-0-2357">2357</a></span>
<span class="normal"><a href="#__codelineno-0-2358">2358</a></span>
<span class="normal"><a href="#__codelineno-0-2359">2359</a></span>
<span class="normal"><a href="#__codelineno-0-2360">2360</a></span>
<span class="normal"><a href="#__codelineno-0-2361">2361</a></span>
<span class="normal"><a href="#__codelineno-0-2362">2362</a></span>
<span class="normal"><a href="#__codelineno-0-2363">2363</a></span>
<span class="normal"><a href="#__codelineno-0-2364">2364</a></span>
<span class="normal"><a href="#__codelineno-0-2365">2365</a></span>
<span class="normal"><a href="#__codelineno-0-2366">2366</a></span>
<span class="normal"><a href="#__codelineno-0-2367">2367</a></span>
<span class="normal"><a href="#__codelineno-0-2368">2368</a></span>
<span class="normal"><a href="#__codelineno-0-2369">2369</a></span>
<span class="normal"><a href="#__codelineno-0-2370">2370</a></span>
<span class="normal"><a href="#__codelineno-0-2371">2371</a></span>
<span class="normal"><a href="#__codelineno-0-2372">2372</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2252" name="__codelineno-0-2252"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-2253" name="__codelineno-0-2253"></a><span class="k">def</span><span class="w"> </span><span class="nf">create_from_array</span><span class="p">(</span>
<a id="__codelineno-0-2254" name="__codelineno-0-2254"></a>    <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-0-2255" name="__codelineno-0-2255"></a>    <span class="n">arr</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<a id="__codelineno-0-2256" name="__codelineno-0-2256"></a>    <span class="n">top_left_corner</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2257" name="__codelineno-0-2257"></a>    <span class="n">cell_size</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2258" name="__codelineno-0-2258"></a>    <span class="n">geo</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2259" name="__codelineno-0-2259"></a>    <span class="n">epsg</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4326</span><span class="p">,</span>
<a id="__codelineno-0-2260" name="__codelineno-0-2260"></a>    <span class="n">no_data_value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_NO_DATA_VALUE</span><span class="p">,</span>
<a id="__codelineno-0-2261" name="__codelineno-0-2261"></a>    <span class="n">driver_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;MEM&quot;</span><span class="p">,</span>
<a id="__codelineno-0-2262" name="__codelineno-0-2262"></a>    <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2263" name="__codelineno-0-2263"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2264" name="__codelineno-0-2264"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new dataset from an array.</span>
<a id="__codelineno-0-2265" name="__codelineno-0-2265"></a>
<a id="__codelineno-0-2266" name="__codelineno-0-2266"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-2267" name="__codelineno-0-2267"></a><span class="sd">        arr (np.ndarray):</span>
<a id="__codelineno-0-2268" name="__codelineno-0-2268"></a><span class="sd">            Numpy array.</span>
<a id="__codelineno-0-2269" name="__codelineno-0-2269"></a><span class="sd">        top_left_corner (Tuple[float, float], optional):</span>
<a id="__codelineno-0-2270" name="__codelineno-0-2270"></a><span class="sd">            The coordinates of the top left corner of the dataset.</span>
<a id="__codelineno-0-2271" name="__codelineno-0-2271"></a><span class="sd">        cell_size (int|float, optional):</span>
<a id="__codelineno-0-2272" name="__codelineno-0-2272"></a><span class="sd">            Cell size in the same units of the coordinate reference system defined by the `epsg` parameter.</span>
<a id="__codelineno-0-2273" name="__codelineno-0-2273"></a><span class="sd">        geo (Tuple[float, float, float, float, float, float], optional):</span>
<a id="__codelineno-0-2274" name="__codelineno-0-2274"></a><span class="sd">            Geotransform tuple (minimum lon/x, pixel-size, rotation, maximum lat/y, rotation, pixel-size).</span>
<a id="__codelineno-0-2275" name="__codelineno-0-2275"></a><span class="sd">        epsg (int):</span>
<a id="__codelineno-0-2276" name="__codelineno-0-2276"></a><span class="sd">            Integer reference number to the projection (https://epsg.io/).</span>
<a id="__codelineno-0-2277" name="__codelineno-0-2277"></a><span class="sd">        no_data_value (Any, optional):</span>
<a id="__codelineno-0-2278" name="__codelineno-0-2278"></a><span class="sd">            No data value to mask the cells out of the domain. The default is -9999.</span>
<a id="__codelineno-0-2279" name="__codelineno-0-2279"></a><span class="sd">        driver_type (str, optional):</span>
<a id="__codelineno-0-2280" name="__codelineno-0-2280"></a><span class="sd">            Driver type [&quot;GTiff&quot;, &quot;MEM&quot;, &quot;netcdf&quot;]. Default is &quot;MEM&quot;.</span>
<a id="__codelineno-0-2281" name="__codelineno-0-2281"></a><span class="sd">        path (str, optional):</span>
<a id="__codelineno-0-2282" name="__codelineno-0-2282"></a><span class="sd">            Path to save the driver.</span>
<a id="__codelineno-0-2283" name="__codelineno-0-2283"></a>
<a id="__codelineno-0-2284" name="__codelineno-0-2284"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-2285" name="__codelineno-0-2285"></a><span class="sd">        Dataset:</span>
<a id="__codelineno-0-2286" name="__codelineno-0-2286"></a><span class="sd">            Dataset object will be returned.</span>
<a id="__codelineno-0-2287" name="__codelineno-0-2287"></a>
<a id="__codelineno-0-2288" name="__codelineno-0-2288"></a><span class="sd">    Hint:</span>
<a id="__codelineno-0-2289" name="__codelineno-0-2289"></a><span class="sd">        - The `geo` parameter can replace both the `cell_size` and the `top_left_corner` parameters.</span>
<a id="__codelineno-0-2290" name="__codelineno-0-2290"></a><span class="sd">        - The function checks first if the `geo` parameter is defined; it will ignore the `cell_size` and the `top_left_corner` parameters if given.</span>
<a id="__codelineno-0-2291" name="__codelineno-0-2291"></a>
<a id="__codelineno-0-2292" name="__codelineno-0-2292"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-2293" name="__codelineno-0-2293"></a><span class="sd">        - Create dataset using the `cell_size` and `top_left_corner` parameters.</span>
<a id="__codelineno-0-2294" name="__codelineno-0-2294"></a>
<a id="__codelineno-0-2295" name="__codelineno-0-2295"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-2296" name="__codelineno-0-2296"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-2297" name="__codelineno-0-2297"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.rand(4, 10, 10)</span>
<a id="__codelineno-0-2298" name="__codelineno-0-2298"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-2299" name="__codelineno-0-2299"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-2300" name="__codelineno-0-2300"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,epsg=4326)</span>
<a id="__codelineno-0-2301" name="__codelineno-0-2301"></a><span class="sd">          &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-2302" name="__codelineno-0-2302"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2303" name="__codelineno-0-2303"></a><span class="sd">                      Cell size: 0.05</span>
<a id="__codelineno-0-2304" name="__codelineno-0-2304"></a><span class="sd">                      Dimension: 10 * 10</span>
<a id="__codelineno-0-2305" name="__codelineno-0-2305"></a><span class="sd">                      EPSG: 4326</span>
<a id="__codelineno-0-2306" name="__codelineno-0-2306"></a><span class="sd">                      Number of Bands: 4</span>
<a id="__codelineno-0-2307" name="__codelineno-0-2307"></a><span class="sd">                      Band names: [&#39;Band_1&#39;, &#39;Band_2&#39;, &#39;Band_3&#39;, &#39;Band_4&#39;]</span>
<a id="__codelineno-0-2308" name="__codelineno-0-2308"></a><span class="sd">                      Mask: -9999.0</span>
<a id="__codelineno-0-2309" name="__codelineno-0-2309"></a><span class="sd">                      Data type: float64</span>
<a id="__codelineno-0-2310" name="__codelineno-0-2310"></a><span class="sd">                      File: ...</span>
<a id="__codelineno-0-2311" name="__codelineno-0-2311"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2312" name="__codelineno-0-2312"></a>
<a id="__codelineno-0-2313" name="__codelineno-0-2313"></a><span class="sd">          ```</span>
<a id="__codelineno-0-2314" name="__codelineno-0-2314"></a>
<a id="__codelineno-0-2315" name="__codelineno-0-2315"></a><span class="sd">        - Create dataset using the `geo` parameter.</span>
<a id="__codelineno-0-2316" name="__codelineno-0-2316"></a>
<a id="__codelineno-0-2317" name="__codelineno-0-2317"></a><span class="sd">          - To create the same dataset using the `geotransform` parameter, we will use the dataset `top_left_corner`</span>
<a id="__codelineno-0-2318" name="__codelineno-0-2318"></a><span class="sd">            coordinates and the `cell_size` to create it.</span>
<a id="__codelineno-0-2319" name="__codelineno-0-2319"></a>
<a id="__codelineno-0-2320" name="__codelineno-0-2320"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-2321" name="__codelineno-0-2321"></a><span class="sd">          &gt;&gt;&gt; geotransform = (0, 0.05, 0, 0, 0, -0.05)</span>
<a id="__codelineno-0-2322" name="__codelineno-0-2322"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, geo=geotransform, epsg=4326)</span>
<a id="__codelineno-0-2323" name="__codelineno-0-2323"></a><span class="sd">          &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-2324" name="__codelineno-0-2324"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2325" name="__codelineno-0-2325"></a><span class="sd">                      Cell size: 0.05</span>
<a id="__codelineno-0-2326" name="__codelineno-0-2326"></a><span class="sd">                      Dimension: 10 * 10</span>
<a id="__codelineno-0-2327" name="__codelineno-0-2327"></a><span class="sd">                      EPSG: 4326</span>
<a id="__codelineno-0-2328" name="__codelineno-0-2328"></a><span class="sd">                      Number of Bands: 4</span>
<a id="__codelineno-0-2329" name="__codelineno-0-2329"></a><span class="sd">                      Band names: [&#39;Band_1&#39;, &#39;Band_2&#39;, &#39;Band_3&#39;, &#39;Band_4&#39;]</span>
<a id="__codelineno-0-2330" name="__codelineno-0-2330"></a><span class="sd">                      Mask: -9999.0</span>
<a id="__codelineno-0-2331" name="__codelineno-0-2331"></a><span class="sd">                      Data type: float64</span>
<a id="__codelineno-0-2332" name="__codelineno-0-2332"></a><span class="sd">                      File: ...</span>
<a id="__codelineno-0-2333" name="__codelineno-0-2333"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2334" name="__codelineno-0-2334"></a>
<a id="__codelineno-0-2335" name="__codelineno-0-2335"></a><span class="sd">          ```</span>
<a id="__codelineno-0-2336" name="__codelineno-0-2336"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2337" name="__codelineno-0-2337"></a>    <span class="k">if</span> <span class="n">geo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2338" name="__codelineno-0-2338"></a>        <span class="k">if</span> <span class="n">top_left_corner</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">cell_size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2339" name="__codelineno-0-2339"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-2340" name="__codelineno-0-2340"></a>                <span class="s2">&quot;Either top_left_corner and cell_size or geo should be provided.&quot;</span>
<a id="__codelineno-0-2341" name="__codelineno-0-2341"></a>            <span class="p">)</span>
<a id="__codelineno-0-2342" name="__codelineno-0-2342"></a>        <span class="n">geo</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-2343" name="__codelineno-0-2343"></a>            <span class="n">top_left_corner</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-0-2344" name="__codelineno-0-2344"></a>            <span class="n">cell_size</span><span class="p">,</span>
<a id="__codelineno-0-2345" name="__codelineno-0-2345"></a>            <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-2346" name="__codelineno-0-2346"></a>            <span class="n">top_left_corner</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<a id="__codelineno-0-2347" name="__codelineno-0-2347"></a>            <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-2348" name="__codelineno-0-2348"></a>            <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">cell_size</span><span class="p">,</span>
<a id="__codelineno-0-2349" name="__codelineno-0-2349"></a>        <span class="p">)</span>
<a id="__codelineno-0-2350" name="__codelineno-0-2350"></a>
<a id="__codelineno-0-2351" name="__codelineno-0-2351"></a>    <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-2352" name="__codelineno-0-2352"></a>        <span class="n">bands</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-2353" name="__codelineno-0-2353"></a>        <span class="n">rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-2354" name="__codelineno-0-2354"></a>        <span class="n">cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-2355" name="__codelineno-0-2355"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2356" name="__codelineno-0-2356"></a>        <span class="n">bands</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-2357" name="__codelineno-0-2357"></a>        <span class="n">rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-2358" name="__codelineno-0-2358"></a>        <span class="n">cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<a id="__codelineno-0-2359" name="__codelineno-0-2359"></a>
<a id="__codelineno-0-2360" name="__codelineno-0-2360"></a>    <span class="n">dst_obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_create_gtiff_from_array</span><span class="p">(</span>
<a id="__codelineno-0-2361" name="__codelineno-0-2361"></a>        <span class="n">arr</span><span class="p">,</span>
<a id="__codelineno-0-2362" name="__codelineno-0-2362"></a>        <span class="n">cols</span><span class="p">,</span>
<a id="__codelineno-0-2363" name="__codelineno-0-2363"></a>        <span class="n">rows</span><span class="p">,</span>
<a id="__codelineno-0-2364" name="__codelineno-0-2364"></a>        <span class="n">bands</span><span class="p">,</span>
<a id="__codelineno-0-2365" name="__codelineno-0-2365"></a>        <span class="n">geo</span><span class="p">,</span>
<a id="__codelineno-0-2366" name="__codelineno-0-2366"></a>        <span class="n">epsg</span><span class="p">,</span>
<a id="__codelineno-0-2367" name="__codelineno-0-2367"></a>        <span class="n">no_data_value</span><span class="p">,</span>
<a id="__codelineno-0-2368" name="__codelineno-0-2368"></a>        <span class="n">driver_type</span><span class="o">=</span><span class="n">driver_type</span><span class="p">,</span>
<a id="__codelineno-0-2369" name="__codelineno-0-2369"></a>        <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>
<a id="__codelineno-0-2370" name="__codelineno-0-2370"></a>    <span class="p">)</span>
<a id="__codelineno-0-2371" name="__codelineno-0-2371"></a>
<a id="__codelineno-0-2372" name="__codelineno-0-2372"></a>    <span class="k">return</span> <span class="n">dst_obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.dataset_like" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.dataset_like" class="toclink">
            <code class="highlight language-python"><span class="n">dataset_like</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">array</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.dataset_like" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Create a new dataset like another dataset.</p>
<p>dataset_like method creates a Dataset from an array like another source dataset. The new dataset
will have the same <code>projection</code>, <code>coordinates</code> or the <code>top left corner</code> of the original dataset,
<code>cell size</code>, <code>no_data_velue</code>, and number of <code>rows</code> and <code>columns</code>.
the array and the source dataset should have the same number of columns and rows</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>src</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;pyramids.dataset.Dataset&lt;/code&gt;" href="#pyramids.dataset.Dataset">Dataset</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>source raster to get the spatial information</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>array</code>
            </td>
            <td>
                  <code><span title="ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>data to store in the new dataset.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>path to save the new dataset, if not given, the method will return in-memory dataset.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Dataset</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;pyramids.dataset.Dataset&lt;/code&gt;" href="#pyramids.dataset.Dataset">Dataset</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if the <code>path</code> is given, the method will save the new raster to the given path, else the method will
return an in-memory dataset.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="hint" open>
  <summary>Hint</summary>
  <ul>
<li>If the given array is 3D, the bands have to be the first dimension, the x/lon has to be the second
  dimension, and the y/lon has to be the third dimension of the array.</li>
</ul>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create a source dataset and then create another dataset like it:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>Now let's create another <code>dataset</code> from the previous dataset using the <code>dataset_like</code>:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">new_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset_new</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">dataset_like</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">new_arr</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">0.05</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">5</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">4326</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">1</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">]</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">9999.0</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">float64</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>            <span class="n">File</span><span class="p">:</span><span class="o">...</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2409">2409</a></span>
<span class="normal"><a href="#__codelineno-0-2410">2410</a></span>
<span class="normal"><a href="#__codelineno-0-2411">2411</a></span>
<span class="normal"><a href="#__codelineno-0-2412">2412</a></span>
<span class="normal"><a href="#__codelineno-0-2413">2413</a></span>
<span class="normal"><a href="#__codelineno-0-2414">2414</a></span>
<span class="normal"><a href="#__codelineno-0-2415">2415</a></span>
<span class="normal"><a href="#__codelineno-0-2416">2416</a></span>
<span class="normal"><a href="#__codelineno-0-2417">2417</a></span>
<span class="normal"><a href="#__codelineno-0-2418">2418</a></span>
<span class="normal"><a href="#__codelineno-0-2419">2419</a></span>
<span class="normal"><a href="#__codelineno-0-2420">2420</a></span>
<span class="normal"><a href="#__codelineno-0-2421">2421</a></span>
<span class="normal"><a href="#__codelineno-0-2422">2422</a></span>
<span class="normal"><a href="#__codelineno-0-2423">2423</a></span>
<span class="normal"><a href="#__codelineno-0-2424">2424</a></span>
<span class="normal"><a href="#__codelineno-0-2425">2425</a></span>
<span class="normal"><a href="#__codelineno-0-2426">2426</a></span>
<span class="normal"><a href="#__codelineno-0-2427">2427</a></span>
<span class="normal"><a href="#__codelineno-0-2428">2428</a></span>
<span class="normal"><a href="#__codelineno-0-2429">2429</a></span>
<span class="normal"><a href="#__codelineno-0-2430">2430</a></span>
<span class="normal"><a href="#__codelineno-0-2431">2431</a></span>
<span class="normal"><a href="#__codelineno-0-2432">2432</a></span>
<span class="normal"><a href="#__codelineno-0-2433">2433</a></span>
<span class="normal"><a href="#__codelineno-0-2434">2434</a></span>
<span class="normal"><a href="#__codelineno-0-2435">2435</a></span>
<span class="normal"><a href="#__codelineno-0-2436">2436</a></span>
<span class="normal"><a href="#__codelineno-0-2437">2437</a></span>
<span class="normal"><a href="#__codelineno-0-2438">2438</a></span>
<span class="normal"><a href="#__codelineno-0-2439">2439</a></span>
<span class="normal"><a href="#__codelineno-0-2440">2440</a></span>
<span class="normal"><a href="#__codelineno-0-2441">2441</a></span>
<span class="normal"><a href="#__codelineno-0-2442">2442</a></span>
<span class="normal"><a href="#__codelineno-0-2443">2443</a></span>
<span class="normal"><a href="#__codelineno-0-2444">2444</a></span>
<span class="normal"><a href="#__codelineno-0-2445">2445</a></span>
<span class="normal"><a href="#__codelineno-0-2446">2446</a></span>
<span class="normal"><a href="#__codelineno-0-2447">2447</a></span>
<span class="normal"><a href="#__codelineno-0-2448">2448</a></span>
<span class="normal"><a href="#__codelineno-0-2449">2449</a></span>
<span class="normal"><a href="#__codelineno-0-2450">2450</a></span>
<span class="normal"><a href="#__codelineno-0-2451">2451</a></span>
<span class="normal"><a href="#__codelineno-0-2452">2452</a></span>
<span class="normal"><a href="#__codelineno-0-2453">2453</a></span>
<span class="normal"><a href="#__codelineno-0-2454">2454</a></span>
<span class="normal"><a href="#__codelineno-0-2455">2455</a></span>
<span class="normal"><a href="#__codelineno-0-2456">2456</a></span>
<span class="normal"><a href="#__codelineno-0-2457">2457</a></span>
<span class="normal"><a href="#__codelineno-0-2458">2458</a></span>
<span class="normal"><a href="#__codelineno-0-2459">2459</a></span>
<span class="normal"><a href="#__codelineno-0-2460">2460</a></span>
<span class="normal"><a href="#__codelineno-0-2461">2461</a></span>
<span class="normal"><a href="#__codelineno-0-2462">2462</a></span>
<span class="normal"><a href="#__codelineno-0-2463">2463</a></span>
<span class="normal"><a href="#__codelineno-0-2464">2464</a></span>
<span class="normal"><a href="#__codelineno-0-2465">2465</a></span>
<span class="normal"><a href="#__codelineno-0-2466">2466</a></span>
<span class="normal"><a href="#__codelineno-0-2467">2467</a></span>
<span class="normal"><a href="#__codelineno-0-2468">2468</a></span>
<span class="normal"><a href="#__codelineno-0-2469">2469</a></span>
<span class="normal"><a href="#__codelineno-0-2470">2470</a></span>
<span class="normal"><a href="#__codelineno-0-2471">2471</a></span>
<span class="normal"><a href="#__codelineno-0-2472">2472</a></span>
<span class="normal"><a href="#__codelineno-0-2473">2473</a></span>
<span class="normal"><a href="#__codelineno-0-2474">2474</a></span>
<span class="normal"><a href="#__codelineno-0-2475">2475</a></span>
<span class="normal"><a href="#__codelineno-0-2476">2476</a></span>
<span class="normal"><a href="#__codelineno-0-2477">2477</a></span>
<span class="normal"><a href="#__codelineno-0-2478">2478</a></span>
<span class="normal"><a href="#__codelineno-0-2479">2479</a></span>
<span class="normal"><a href="#__codelineno-0-2480">2480</a></span>
<span class="normal"><a href="#__codelineno-0-2481">2481</a></span>
<span class="normal"><a href="#__codelineno-0-2482">2482</a></span>
<span class="normal"><a href="#__codelineno-0-2483">2483</a></span>
<span class="normal"><a href="#__codelineno-0-2484">2484</a></span>
<span class="normal"><a href="#__codelineno-0-2485">2485</a></span>
<span class="normal"><a href="#__codelineno-0-2486">2486</a></span>
<span class="normal"><a href="#__codelineno-0-2487">2487</a></span>
<span class="normal"><a href="#__codelineno-0-2488">2488</a></span>
<span class="normal"><a href="#__codelineno-0-2489">2489</a></span>
<span class="normal"><a href="#__codelineno-0-2490">2490</a></span>
<span class="normal"><a href="#__codelineno-0-2491">2491</a></span>
<span class="normal"><a href="#__codelineno-0-2492">2492</a></span>
<span class="normal"><a href="#__codelineno-0-2493">2493</a></span>
<span class="normal"><a href="#__codelineno-0-2494">2494</a></span>
<span class="normal"><a href="#__codelineno-0-2495">2495</a></span>
<span class="normal"><a href="#__codelineno-0-2496">2496</a></span>
<span class="normal"><a href="#__codelineno-0-2497">2497</a></span>
<span class="normal"><a href="#__codelineno-0-2498">2498</a></span>
<span class="normal"><a href="#__codelineno-0-2499">2499</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2409" name="__codelineno-0-2409"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-2410" name="__codelineno-0-2410"></a><span class="k">def</span><span class="w"> </span><span class="nf">dataset_like</span><span class="p">(</span>
<a id="__codelineno-0-2411" name="__codelineno-0-2411"></a>    <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-0-2412" name="__codelineno-0-2412"></a>    <span class="n">src</span><span class="p">:</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">,</span>
<a id="__codelineno-0-2413" name="__codelineno-0-2413"></a>    <span class="n">array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<a id="__codelineno-0-2414" name="__codelineno-0-2414"></a>    <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-2415" name="__codelineno-0-2415"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2416" name="__codelineno-0-2416"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new dataset like another dataset.</span>
<a id="__codelineno-0-2417" name="__codelineno-0-2417"></a>
<a id="__codelineno-0-2418" name="__codelineno-0-2418"></a><span class="sd">    dataset_like method creates a Dataset from an array like another source dataset. The new dataset</span>
<a id="__codelineno-0-2419" name="__codelineno-0-2419"></a><span class="sd">    will have the same `projection`, `coordinates` or the `top left corner` of the original dataset,</span>
<a id="__codelineno-0-2420" name="__codelineno-0-2420"></a><span class="sd">    `cell size`, `no_data_velue`, and number of `rows` and `columns`.</span>
<a id="__codelineno-0-2421" name="__codelineno-0-2421"></a><span class="sd">    the array and the source dataset should have the same number of columns and rows</span>
<a id="__codelineno-0-2422" name="__codelineno-0-2422"></a>
<a id="__codelineno-0-2423" name="__codelineno-0-2423"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-2424" name="__codelineno-0-2424"></a><span class="sd">        src (Dataset):</span>
<a id="__codelineno-0-2425" name="__codelineno-0-2425"></a><span class="sd">            source raster to get the spatial information</span>
<a id="__codelineno-0-2426" name="__codelineno-0-2426"></a><span class="sd">        array (ndarray):</span>
<a id="__codelineno-0-2427" name="__codelineno-0-2427"></a><span class="sd">            data to store in the new dataset.</span>
<a id="__codelineno-0-2428" name="__codelineno-0-2428"></a><span class="sd">        path (str, optional):</span>
<a id="__codelineno-0-2429" name="__codelineno-0-2429"></a><span class="sd">            path to save the new dataset, if not given, the method will return in-memory dataset.</span>
<a id="__codelineno-0-2430" name="__codelineno-0-2430"></a>
<a id="__codelineno-0-2431" name="__codelineno-0-2431"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-2432" name="__codelineno-0-2432"></a><span class="sd">        Dataset:</span>
<a id="__codelineno-0-2433" name="__codelineno-0-2433"></a><span class="sd">            if the `path` is given, the method will save the new raster to the given path, else the method will</span>
<a id="__codelineno-0-2434" name="__codelineno-0-2434"></a><span class="sd">            return an in-memory dataset.</span>
<a id="__codelineno-0-2435" name="__codelineno-0-2435"></a>
<a id="__codelineno-0-2436" name="__codelineno-0-2436"></a><span class="sd">    Hint:</span>
<a id="__codelineno-0-2437" name="__codelineno-0-2437"></a><span class="sd">        - If the given array is 3D, the bands have to be the first dimension, the x/lon has to be the second</span>
<a id="__codelineno-0-2438" name="__codelineno-0-2438"></a><span class="sd">          dimension, and the y/lon has to be the third dimension of the array.</span>
<a id="__codelineno-0-2439" name="__codelineno-0-2439"></a>
<a id="__codelineno-0-2440" name="__codelineno-0-2440"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-2441" name="__codelineno-0-2441"></a><span class="sd">        - Create a source dataset and then create another dataset like it:</span>
<a id="__codelineno-0-2442" name="__codelineno-0-2442"></a>
<a id="__codelineno-0-2443" name="__codelineno-0-2443"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-2444" name="__codelineno-0-2444"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-2445" name="__codelineno-0-2445"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.rand(5, 5)</span>
<a id="__codelineno-0-2446" name="__codelineno-0-2446"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-2447" name="__codelineno-0-2447"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-2448" name="__codelineno-0-2448"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-2449" name="__codelineno-0-2449"></a>
<a id="__codelineno-0-2450" name="__codelineno-0-2450"></a><span class="sd">          ```</span>
<a id="__codelineno-0-2451" name="__codelineno-0-2451"></a>
<a id="__codelineno-0-2452" name="__codelineno-0-2452"></a><span class="sd">        - Now let&#39;s create another `dataset` from the previous dataset using the `dataset_like`:</span>
<a id="__codelineno-0-2453" name="__codelineno-0-2453"></a>
<a id="__codelineno-0-2454" name="__codelineno-0-2454"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-2455" name="__codelineno-0-2455"></a><span class="sd">          &gt;&gt;&gt; new_arr = np.random.rand(5, 5)</span>
<a id="__codelineno-0-2456" name="__codelineno-0-2456"></a><span class="sd">          &gt;&gt;&gt; dataset_new = Dataset.dataset_like(dataset, new_arr)</span>
<a id="__codelineno-0-2457" name="__codelineno-0-2457"></a><span class="sd">          &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-2458" name="__codelineno-0-2458"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2459" name="__codelineno-0-2459"></a><span class="sd">                      Cell size: 0.05</span>
<a id="__codelineno-0-2460" name="__codelineno-0-2460"></a><span class="sd">                      Dimension: 5 * 5</span>
<a id="__codelineno-0-2461" name="__codelineno-0-2461"></a><span class="sd">                      EPSG: 4326</span>
<a id="__codelineno-0-2462" name="__codelineno-0-2462"></a><span class="sd">                      Number of Bands: 1</span>
<a id="__codelineno-0-2463" name="__codelineno-0-2463"></a><span class="sd">                      Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-2464" name="__codelineno-0-2464"></a><span class="sd">                      Mask: -9999.0</span>
<a id="__codelineno-0-2465" name="__codelineno-0-2465"></a><span class="sd">                      Data type: float64</span>
<a id="__codelineno-0-2466" name="__codelineno-0-2466"></a><span class="sd">                      File:...</span>
<a id="__codelineno-0-2467" name="__codelineno-0-2467"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2468" name="__codelineno-0-2468"></a>
<a id="__codelineno-0-2469" name="__codelineno-0-2469"></a><span class="sd">          ```</span>
<a id="__codelineno-0-2470" name="__codelineno-0-2470"></a>
<a id="__codelineno-0-2471" name="__codelineno-0-2471"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2472" name="__codelineno-0-2472"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
<a id="__codelineno-0-2473" name="__codelineno-0-2473"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;array should be of type numpy array&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2474" name="__codelineno-0-2474"></a>
<a id="__codelineno-0-2475" name="__codelineno-0-2475"></a>    <span class="k">if</span> <span class="n">array</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-2476" name="__codelineno-0-2476"></a>        <span class="n">bands</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-2477" name="__codelineno-0-2477"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2478" name="__codelineno-0-2478"></a>        <span class="n">bands</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-2479" name="__codelineno-0-2479"></a>
<a id="__codelineno-0-2480" name="__codelineno-0-2480"></a>    <span class="n">dtype</span> <span class="o">=</span> <span class="n">numpy_to_gdal_dtype</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
<a id="__codelineno-0-2481" name="__codelineno-0-2481"></a>
<a id="__codelineno-0-2482" name="__codelineno-0-2482"></a>    <span class="n">dst</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_create_dataset</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">src</span><span class="o">.</span><span class="n">rows</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-2483" name="__codelineno-0-2483"></a>
<a id="__codelineno-0-2484" name="__codelineno-0-2484"></a>    <span class="n">dst</span><span class="o">.</span><span class="n">SetGeoTransform</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">geotransform</span><span class="p">)</span>
<a id="__codelineno-0-2485" name="__codelineno-0-2485"></a>    <span class="n">dst</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-0-2486" name="__codelineno-0-2486"></a>    <span class="c1"># setting the NoDataValue does not accept double precision numbers</span>
<a id="__codelineno-0-2487" name="__codelineno-0-2487"></a>    <span class="n">dst_obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="n">access</span><span class="o">=</span><span class="s2">&quot;write&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2488" name="__codelineno-0-2488"></a>    <span class="n">dst_obj</span><span class="o">.</span><span class="n">_set_no_data_value</span><span class="p">(</span><span class="n">no_data_value</span><span class="o">=</span><span class="n">src</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-2489" name="__codelineno-0-2489"></a>
<a id="__codelineno-0-2490" name="__codelineno-0-2490"></a>    <span class="k">if</span> <span class="n">bands</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-2491" name="__codelineno-0-2491"></a>        <span class="n">dst_obj</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
<a id="__codelineno-0-2492" name="__codelineno-0-2492"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2493" name="__codelineno-0-2493"></a>        <span class="k">for</span> <span class="n">band_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">bands</span><span class="p">):</span>
<a id="__codelineno-0-2494" name="__codelineno-0-2494"></a>            <span class="n">dst_obj</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">band_i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">band_i</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:])</span>
<a id="__codelineno-0-2495" name="__codelineno-0-2495"></a>
<a id="__codelineno-0-2496" name="__codelineno-0-2496"></a>    <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2497" name="__codelineno-0-2497"></a>        <span class="n">dst_obj</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">FlushCache</span><span class="p">()</span>
<a id="__codelineno-0-2498" name="__codelineno-0-2498"></a>
<a id="__codelineno-0-2499" name="__codelineno-0-2499"></a>    <span class="k">return</span> <span class="n">dst_obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.write_array" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.write_array" class="toclink">
            <code class="highlight language-python"><span class="n">write_array</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.write_array" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Write an array to the dataset at the given xoff, yoff position.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>array</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The array to write</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>top_left_corner</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>indices [row, column]/[y_offset, x_offset] of the cell to write the array to. If None, the array will
be written to the top left corner of the dataset.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the array is not written successfully.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="hint" open>
  <summary>Hint</summary>
  <ul>
<li>The <code>Dataset</code> has to be opened in a write mode <code>read_only=False</code>.</li>
</ul>
</details>        <p>Returns:
None</p>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>First, create a dataset on disk:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;write_array.tif&#39;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="o">...</span>     <span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="o">...</span> <span class="p">)</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>
<ul>
<li>In a later session you can read the dataset in a <code>write</code> mode and update it:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]])</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">write_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">read_array</span><span class="p">()</span>    <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="n">array</span><span class="p">([[</span><span class="mf">0.77359738</span><span class="p">,</span> <span class="mf">0.64789596</span><span class="p">,</span> <span class="mf">0.37912658</span><span class="p">,</span> <span class="mf">0.03673771</span><span class="p">,</span> <span class="mf">0.69571106</span><span class="p">],</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>       <span class="p">[</span><span class="mf">0.60804387</span><span class="p">,</span> <span class="mf">1.</span>        <span class="p">,</span> <span class="mf">2.</span>        <span class="p">,</span> <span class="mf">0.501909</span>  <span class="p">,</span> <span class="mf">0.99597122</span><span class="p">],</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>       <span class="p">[</span><span class="mf">0.83879291</span><span class="p">,</span> <span class="mf">3.</span>        <span class="p">,</span> <span class="mf">4.</span>        <span class="p">,</span> <span class="mf">0.33058081</span><span class="p">,</span> <span class="mf">0.59824467</span><span class="p">],</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>       <span class="p">[</span><span class="mf">0.774213</span>  <span class="p">,</span> <span class="mf">0.94338147</span><span class="p">,</span> <span class="mf">0.16443719</span><span class="p">,</span> <span class="mf">0.28041457</span><span class="p">,</span> <span class="mf">0.61914179</span><span class="p">],</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>       <span class="p">[</span><span class="mf">0.97201104</span><span class="p">,</span> <span class="mf">0.81364799</span><span class="p">,</span> <span class="mf">0.35157525</span><span class="p">,</span> <span class="mf">0.65554998</span><span class="p">,</span> <span class="mf">0.8589739</span> <span class="p">]])</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2501">2501</a></span>
<span class="normal"><a href="#__codelineno-0-2502">2502</a></span>
<span class="normal"><a href="#__codelineno-0-2503">2503</a></span>
<span class="normal"><a href="#__codelineno-0-2504">2504</a></span>
<span class="normal"><a href="#__codelineno-0-2505">2505</a></span>
<span class="normal"><a href="#__codelineno-0-2506">2506</a></span>
<span class="normal"><a href="#__codelineno-0-2507">2507</a></span>
<span class="normal"><a href="#__codelineno-0-2508">2508</a></span>
<span class="normal"><a href="#__codelineno-0-2509">2509</a></span>
<span class="normal"><a href="#__codelineno-0-2510">2510</a></span>
<span class="normal"><a href="#__codelineno-0-2511">2511</a></span>
<span class="normal"><a href="#__codelineno-0-2512">2512</a></span>
<span class="normal"><a href="#__codelineno-0-2513">2513</a></span>
<span class="normal"><a href="#__codelineno-0-2514">2514</a></span>
<span class="normal"><a href="#__codelineno-0-2515">2515</a></span>
<span class="normal"><a href="#__codelineno-0-2516">2516</a></span>
<span class="normal"><a href="#__codelineno-0-2517">2517</a></span>
<span class="normal"><a href="#__codelineno-0-2518">2518</a></span>
<span class="normal"><a href="#__codelineno-0-2519">2519</a></span>
<span class="normal"><a href="#__codelineno-0-2520">2520</a></span>
<span class="normal"><a href="#__codelineno-0-2521">2521</a></span>
<span class="normal"><a href="#__codelineno-0-2522">2522</a></span>
<span class="normal"><a href="#__codelineno-0-2523">2523</a></span>
<span class="normal"><a href="#__codelineno-0-2524">2524</a></span>
<span class="normal"><a href="#__codelineno-0-2525">2525</a></span>
<span class="normal"><a href="#__codelineno-0-2526">2526</a></span>
<span class="normal"><a href="#__codelineno-0-2527">2527</a></span>
<span class="normal"><a href="#__codelineno-0-2528">2528</a></span>
<span class="normal"><a href="#__codelineno-0-2529">2529</a></span>
<span class="normal"><a href="#__codelineno-0-2530">2530</a></span>
<span class="normal"><a href="#__codelineno-0-2531">2531</a></span>
<span class="normal"><a href="#__codelineno-0-2532">2532</a></span>
<span class="normal"><a href="#__codelineno-0-2533">2533</a></span>
<span class="normal"><a href="#__codelineno-0-2534">2534</a></span>
<span class="normal"><a href="#__codelineno-0-2535">2535</a></span>
<span class="normal"><a href="#__codelineno-0-2536">2536</a></span>
<span class="normal"><a href="#__codelineno-0-2537">2537</a></span>
<span class="normal"><a href="#__codelineno-0-2538">2538</a></span>
<span class="normal"><a href="#__codelineno-0-2539">2539</a></span>
<span class="normal"><a href="#__codelineno-0-2540">2540</a></span>
<span class="normal"><a href="#__codelineno-0-2541">2541</a></span>
<span class="normal"><a href="#__codelineno-0-2542">2542</a></span>
<span class="normal"><a href="#__codelineno-0-2543">2543</a></span>
<span class="normal"><a href="#__codelineno-0-2544">2544</a></span>
<span class="normal"><a href="#__codelineno-0-2545">2545</a></span>
<span class="normal"><a href="#__codelineno-0-2546">2546</a></span>
<span class="normal"><a href="#__codelineno-0-2547">2547</a></span>
<span class="normal"><a href="#__codelineno-0-2548">2548</a></span>
<span class="normal"><a href="#__codelineno-0-2549">2549</a></span>
<span class="normal"><a href="#__codelineno-0-2550">2550</a></span>
<span class="normal"><a href="#__codelineno-0-2551">2551</a></span>
<span class="normal"><a href="#__codelineno-0-2552">2552</a></span>
<span class="normal"><a href="#__codelineno-0-2553">2553</a></span>
<span class="normal"><a href="#__codelineno-0-2554">2554</a></span>
<span class="normal"><a href="#__codelineno-0-2555">2555</a></span>
<span class="normal"><a href="#__codelineno-0-2556">2556</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2501" name="__codelineno-0-2501"></a><span class="k">def</span><span class="w"> </span><span class="nf">write_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-2502" name="__codelineno-0-2502"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Write an array to the dataset at the given xoff, yoff position.</span>
<a id="__codelineno-0-2503" name="__codelineno-0-2503"></a>
<a id="__codelineno-0-2504" name="__codelineno-0-2504"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-2505" name="__codelineno-0-2505"></a><span class="sd">        array (np.ndarray):</span>
<a id="__codelineno-0-2506" name="__codelineno-0-2506"></a><span class="sd">            The array to write</span>
<a id="__codelineno-0-2507" name="__codelineno-0-2507"></a><span class="sd">        top_left_corner (List[float, float]):</span>
<a id="__codelineno-0-2508" name="__codelineno-0-2508"></a><span class="sd">            indices [row, column]/[y_offset, x_offset] of the cell to write the array to. If None, the array will</span>
<a id="__codelineno-0-2509" name="__codelineno-0-2509"></a><span class="sd">            be written to the top left corner of the dataset.</span>
<a id="__codelineno-0-2510" name="__codelineno-0-2510"></a>
<a id="__codelineno-0-2511" name="__codelineno-0-2511"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-2512" name="__codelineno-0-2512"></a><span class="sd">        Exception: If the array is not written successfully.</span>
<a id="__codelineno-0-2513" name="__codelineno-0-2513"></a>
<a id="__codelineno-0-2514" name="__codelineno-0-2514"></a><span class="sd">    Hint:</span>
<a id="__codelineno-0-2515" name="__codelineno-0-2515"></a><span class="sd">        - The `Dataset` has to be opened in a write mode `read_only=False`.</span>
<a id="__codelineno-0-2516" name="__codelineno-0-2516"></a>
<a id="__codelineno-0-2517" name="__codelineno-0-2517"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-2518" name="__codelineno-0-2518"></a><span class="sd">    None</span>
<a id="__codelineno-0-2519" name="__codelineno-0-2519"></a>
<a id="__codelineno-0-2520" name="__codelineno-0-2520"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-2521" name="__codelineno-0-2521"></a><span class="sd">        - First, create a dataset on disk:</span>
<a id="__codelineno-0-2522" name="__codelineno-0-2522"></a>
<a id="__codelineno-0-2523" name="__codelineno-0-2523"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-2524" name="__codelineno-0-2524"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-2525" name="__codelineno-0-2525"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.rand(5, 5)</span>
<a id="__codelineno-0-2526" name="__codelineno-0-2526"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-2527" name="__codelineno-0-2527"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-2528" name="__codelineno-0-2528"></a><span class="sd">          &gt;&gt;&gt; path = &#39;write_array.tif&#39;</span>
<a id="__codelineno-0-2529" name="__codelineno-0-2529"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(</span>
<a id="__codelineno-0-2530" name="__codelineno-0-2530"></a><span class="sd">          ...     arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326, path=path</span>
<a id="__codelineno-0-2531" name="__codelineno-0-2531"></a><span class="sd">          ... )</span>
<a id="__codelineno-0-2532" name="__codelineno-0-2532"></a><span class="sd">          &gt;&gt;&gt; dataset = None</span>
<a id="__codelineno-0-2533" name="__codelineno-0-2533"></a>
<a id="__codelineno-0-2534" name="__codelineno-0-2534"></a><span class="sd">          ```</span>
<a id="__codelineno-0-2535" name="__codelineno-0-2535"></a>
<a id="__codelineno-0-2536" name="__codelineno-0-2536"></a><span class="sd">        - In a later session you can read the dataset in a `write` mode and update it:</span>
<a id="__codelineno-0-2537" name="__codelineno-0-2537"></a>
<a id="__codelineno-0-2538" name="__codelineno-0-2538"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-2539" name="__codelineno-0-2539"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.read_file(path, read_only=False)</span>
<a id="__codelineno-0-2540" name="__codelineno-0-2540"></a><span class="sd">          &gt;&gt;&gt; arr = np.array([[1, 2], [3, 4]])</span>
<a id="__codelineno-0-2541" name="__codelineno-0-2541"></a><span class="sd">          &gt;&gt;&gt; dataset.write_array(arr, top_left_corner=[1, 1])</span>
<a id="__codelineno-0-2542" name="__codelineno-0-2542"></a><span class="sd">          &gt;&gt;&gt; dataset.read_array()    # doctest: +SKIP</span>
<a id="__codelineno-0-2543" name="__codelineno-0-2543"></a><span class="sd">          array([[0.77359738, 0.64789596, 0.37912658, 0.03673771, 0.69571106],</span>
<a id="__codelineno-0-2544" name="__codelineno-0-2544"></a><span class="sd">                 [0.60804387, 1.        , 2.        , 0.501909  , 0.99597122],</span>
<a id="__codelineno-0-2545" name="__codelineno-0-2545"></a><span class="sd">                 [0.83879291, 3.        , 4.        , 0.33058081, 0.59824467],</span>
<a id="__codelineno-0-2546" name="__codelineno-0-2546"></a><span class="sd">                 [0.774213  , 0.94338147, 0.16443719, 0.28041457, 0.61914179],</span>
<a id="__codelineno-0-2547" name="__codelineno-0-2547"></a><span class="sd">                 [0.97201104, 0.81364799, 0.35157525, 0.65554998, 0.8589739 ]])</span>
<a id="__codelineno-0-2548" name="__codelineno-0-2548"></a>
<a id="__codelineno-0-2549" name="__codelineno-0-2549"></a><span class="sd">          ```</span>
<a id="__codelineno-0-2550" name="__codelineno-0-2550"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2551" name="__codelineno-0-2551"></a>    <span class="n">yoff</span><span class="p">,</span> <span class="n">xoff</span> <span class="o">=</span> <span class="n">top_left_corner</span>
<a id="__codelineno-0-2552" name="__codelineno-0-2552"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-2553" name="__codelineno-0-2553"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_raster</span><span class="o">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">xoff</span><span class="o">=</span><span class="n">xoff</span><span class="p">,</span> <span class="n">yoff</span><span class="o">=</span><span class="n">yoff</span><span class="p">)</span>
<a id="__codelineno-0-2554" name="__codelineno-0-2554"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_raster</span><span class="o">.</span><span class="n">FlushCache</span><span class="p">()</span>
<a id="__codelineno-0-2555" name="__codelineno-0-2555"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-2556" name="__codelineno-0-2556"></a>        <span class="k">raise</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.set_crs" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.set_crs" class="toclink">
            <code class="highlight language-python"><span class="n">set_crs</span><span class="p">(</span><span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.set_crs" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Set the Coordinate Reference System (CRS).</p>
<div class="highlight"><pre><span></span><code>Set the Coordinate Reference System (CRS) of a
</code></pre></div>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>crs</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional if epsg is specified. WKT string. i.e.
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>&#39;GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;, 6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;],
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AXIS[&quot;Latitude&quot;,NORTH],AXIS[&quot;Longitude&quot;,EAST],
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]&#39;
</code></pre></div></p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>epsg</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional if crs is specified. EPSG code specifying the projection.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2562">2562</a></span>
<span class="normal"><a href="#__codelineno-0-2563">2563</a></span>
<span class="normal"><a href="#__codelineno-0-2564">2564</a></span>
<span class="normal"><a href="#__codelineno-0-2565">2565</a></span>
<span class="normal"><a href="#__codelineno-0-2566">2566</a></span>
<span class="normal"><a href="#__codelineno-0-2567">2567</a></span>
<span class="normal"><a href="#__codelineno-0-2568">2568</a></span>
<span class="normal"><a href="#__codelineno-0-2569">2569</a></span>
<span class="normal"><a href="#__codelineno-0-2570">2570</a></span>
<span class="normal"><a href="#__codelineno-0-2571">2571</a></span>
<span class="normal"><a href="#__codelineno-0-2572">2572</a></span>
<span class="normal"><a href="#__codelineno-0-2573">2573</a></span>
<span class="normal"><a href="#__codelineno-0-2574">2574</a></span>
<span class="normal"><a href="#__codelineno-0-2575">2575</a></span>
<span class="normal"><a href="#__codelineno-0-2576">2576</a></span>
<span class="normal"><a href="#__codelineno-0-2577">2577</a></span>
<span class="normal"><a href="#__codelineno-0-2578">2578</a></span>
<span class="normal"><a href="#__codelineno-0-2579">2579</a></span>
<span class="normal"><a href="#__codelineno-0-2580">2580</a></span>
<span class="normal"><a href="#__codelineno-0-2581">2581</a></span>
<span class="normal"><a href="#__codelineno-0-2582">2582</a></span>
<span class="normal"><a href="#__codelineno-0-2583">2583</a></span>
<span class="normal"><a href="#__codelineno-0-2584">2584</a></span>
<span class="normal"><a href="#__codelineno-0-2585">2585</a></span>
<span class="normal"><a href="#__codelineno-0-2586">2586</a></span>
<span class="normal"><a href="#__codelineno-0-2587">2587</a></span>
<span class="normal"><a href="#__codelineno-0-2588">2588</a></span>
<span class="normal"><a href="#__codelineno-0-2589">2589</a></span>
<span class="normal"><a href="#__codelineno-0-2590">2590</a></span>
<span class="normal"><a href="#__codelineno-0-2591">2591</a></span>
<span class="normal"><a href="#__codelineno-0-2592">2592</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2562" name="__codelineno-0-2562"></a><span class="k">def</span><span class="w"> </span><span class="nf">set_crs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">crs</span><span class="p">:</span> <span class="n">Optional</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">epsg</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-2563" name="__codelineno-0-2563"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the Coordinate Reference System (CRS).</span>
<a id="__codelineno-0-2564" name="__codelineno-0-2564"></a>
<a id="__codelineno-0-2565" name="__codelineno-0-2565"></a><span class="sd">        Set the Coordinate Reference System (CRS) of a</span>
<a id="__codelineno-0-2566" name="__codelineno-0-2566"></a>
<a id="__codelineno-0-2567" name="__codelineno-0-2567"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-2568" name="__codelineno-0-2568"></a><span class="sd">        crs (str):</span>
<a id="__codelineno-0-2569" name="__codelineno-0-2569"></a><span class="sd">            Optional if epsg is specified. WKT string. i.e.</span>
<a id="__codelineno-0-2570" name="__codelineno-0-2570"></a><span class="sd">                ```</span>
<a id="__codelineno-0-2571" name="__codelineno-0-2571"></a><span class="sd">                &#39;GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;, 6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;],</span>
<a id="__codelineno-0-2572" name="__codelineno-0-2572"></a><span class="sd">                AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,</span>
<a id="__codelineno-0-2573" name="__codelineno-0-2573"></a><span class="sd">                0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AXIS[&quot;Latitude&quot;,NORTH],AXIS[&quot;Longitude&quot;,EAST],</span>
<a id="__codelineno-0-2574" name="__codelineno-0-2574"></a><span class="sd">                AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]&#39;</span>
<a id="__codelineno-0-2575" name="__codelineno-0-2575"></a><span class="sd">                ```</span>
<a id="__codelineno-0-2576" name="__codelineno-0-2576"></a><span class="sd">        epsg (int):</span>
<a id="__codelineno-0-2577" name="__codelineno-0-2577"></a><span class="sd">            Optional if crs is specified. EPSG code specifying the projection.</span>
<a id="__codelineno-0-2578" name="__codelineno-0-2578"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2579" name="__codelineno-0-2579"></a>    <span class="c1"># first change the projection of the gdal dataset object</span>
<a id="__codelineno-0-2580" name="__codelineno-0-2580"></a>    <span class="c1"># second change the epsg attribute of the Dataset object</span>
<a id="__codelineno-0-2581" name="__codelineno-0-2581"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">driver_type</span> <span class="o">==</span> <span class="s2">&quot;ascii&quot;</span><span class="p">:</span>
<a id="__codelineno-0-2582" name="__codelineno-0-2582"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-2583" name="__codelineno-0-2583"></a>            <span class="s2">&quot;Setting CRS for ASCII file is not possible, you can save the files to a geotiff and then reset the crs&quot;</span>
<a id="__codelineno-0-2584" name="__codelineno-0-2584"></a>        <span class="p">)</span>
<a id="__codelineno-0-2585" name="__codelineno-0-2585"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2586" name="__codelineno-0-2586"></a>        <span class="k">if</span> <span class="n">crs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-2587" name="__codelineno-0-2587"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-0-2588" name="__codelineno-0-2588"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_epsg</span> <span class="o">=</span> <span class="n">FeatureCollection</span><span class="o">.</span><span class="n">get_epsg_from_prj</span><span class="p">(</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-0-2589" name="__codelineno-0-2589"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2590" name="__codelineno-0-2590"></a>            <span class="n">sr</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_create_sr_from_epsg</span><span class="p">(</span><span class="n">epsg</span><span class="p">)</span>
<a id="__codelineno-0-2591" name="__codelineno-0-2591"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">sr</span><span class="o">.</span><span class="n">ExportToWkt</span><span class="p">())</span>
<a id="__codelineno-0-2592" name="__codelineno-0-2592"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_epsg</span> <span class="o">=</span> <span class="n">epsg</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.to_crs" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.to_crs" class="toclink">
            <code class="highlight language-python"><span class="n">to_crs</span><span class="p">(</span><span class="n">to_epsg</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;nearest neighbor&#39;</span><span class="p">,</span> <span class="n">maintain_alignment</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.to_crs" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Reproject the dataset to any projection.</p>
<div class="highlight"><pre><span></span><code>(default the WGS84 web mercator projection, without resampling)
</code></pre></div>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>to_epsg</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>reference number to the new projection (https://epsg.io/). Default 3857 is the reference number of WGS84
web mercator.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>method</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>resampling method. Default is "nearest neighbor". See https://gisgeography.com/raster-resampling/.
Allowed values: "nearest neighbor", "cubic", "bilinear".</p>
              </div>
            </td>
            <td>
                  <code>&#39;nearest neighbor&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>maintain_alignment</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True to maintain the number of rows and columns of the raster the same after reprojection.
Default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>inplace</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True to make changes inplace. Default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Dataset</code></td>            <td>
                  <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;pyramids.dataset.Dataset&lt;/code&gt;" href="#pyramids.dataset.Dataset">Dataset</a>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dataset object, if inplace is True, the method returns None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create a dataset and reproject it:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">0.05</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">5</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">4326</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">4</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_2&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_3&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_4&#39;</span><span class="p">]</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">9999.0</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">float64</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>            <span class="n">File</span><span class="p">:</span><span class="o">...</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="n">GEOGCS</span><span class="p">[</span><span class="s2">&quot;WGS 84&quot;</span><span class="p">,</span><span class="n">DATUM</span><span class="p">[</span><span class="s2">&quot;WGS_1984&quot;</span><span class="p">,</span><span class="n">SPHEROID</span><span class="p">[</span><span class="s2">&quot;WGS 84&quot;</span><span class="p">,</span><span class="mi">6378137</span><span class="p">,</span><span class="mf">298.257223563</span><span class="p">,</span><span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;7030&quot;</span><span class="p">]],</span><span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;6326&quot;</span><span class="p">]],</span><span class="n">PRIMEM</span><span class="p">[</span><span class="s2">&quot;Greenwich&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;8901&quot;</span><span class="p">]],</span><span class="n">UNIT</span><span class="p">[</span><span class="s2">&quot;degree&quot;</span><span class="p">,</span><span class="mf">0.0174532925199433</span><span class="p">,</span><span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;9122&quot;</span><span class="p">]],</span><span class="n">AXIS</span><span class="p">[</span><span class="s2">&quot;Latitude&quot;</span><span class="p">,</span><span class="n">NORTH</span><span class="p">],</span><span class="n">AXIS</span><span class="p">[</span><span class="s2">&quot;Longitude&quot;</span><span class="p">,</span><span class="n">EAST</span><span class="p">],</span><span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;4326&quot;</span><span class="p">]]</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">epsg</span><span class="p">)</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="mi">4326</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">reprojected_dataset</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">to_epsg</span><span class="o">=</span><span class="mi">3857</span><span class="p">)</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">reprojected_dataset</span><span class="p">)</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">5565.983370404396</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">5</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">3857</span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">4</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_2&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_3&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_4&#39;</span><span class="p">]</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">9999.0</span>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">float64</span>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>            <span class="n">File</span><span class="p">:</span><span class="o">...</span>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">reprojected_dataset</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a><span class="n">PROJCS</span><span class="p">[</span><span class="s2">&quot;WGS 84 / Pseudo-Mercator&quot;</span><span class="p">,</span><span class="n">GEOGCS</span><span class="p">[</span><span class="s2">&quot;WGS 84&quot;</span><span class="p">,</span><span class="n">DATUM</span><span class="p">[</span><span class="s2">&quot;WGS_1984&quot;</span><span class="p">,</span><span class="n">SPHEROID</span><span class="p">[</span><span class="s2">&quot;WGS 84&quot;</span><span class="p">,</span><span class="mi">6378137</span><span class="p">,</span><span class="mf">298.257223563</span><span class="p">,</span><span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;7030&quot;</span><span class="p">]],</span><span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;6326&quot;</span><span class="p">]],</span><span class="n">PRIMEM</span><span class="p">[</span><span class="s2">&quot;Greenwich&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;8901&quot;</span><span class="p">]],</span><span class="n">UNIT</span><span class="p">[</span><span class="s2">&quot;degree&quot;</span><span class="p">,</span><span class="mf">0.0174532925199433</span><span class="p">,</span><span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;9122&quot;</span><span class="p">]],</span><span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;4326&quot;</span><span class="p">]],</span><span class="n">PROJECTION</span><span class="p">[</span><span class="s2">&quot;Mercator_1SP&quot;</span><span class="p">],</span><span class="n">PARAMETER</span><span class="p">[</span><span class="s2">&quot;central_meridian&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">PARAMETER</span><span class="p">[</span><span class="s2">&quot;scale_factor&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">PARAMETER</span><span class="p">[</span><span class="s2">&quot;false_easting&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">PARAMETER</span><span class="p">[</span><span class="s2">&quot;false_northing&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">UNIT</span><span class="p">[</span><span class="s2">&quot;metre&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;9001&quot;</span><span class="p">]],</span><span class="n">AXIS</span><span class="p">[</span><span class="s2">&quot;Easting&quot;</span><span class="p">,</span><span class="n">EAST</span><span class="p">],</span><span class="n">AXIS</span><span class="p">[</span><span class="s2">&quot;Northing&quot;</span><span class="p">,</span><span class="n">NORTH</span><span class="p">],</span><span class="n">EXTENSION</span><span class="p">[</span><span class="s2">&quot;PROJ4&quot;</span><span class="p">,</span><span class="s2">&quot;+proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs&quot;</span><span class="p">],</span><span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;3857&quot;</span><span class="p">]]</span>
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">reprojected_dataset</span><span class="o">.</span><span class="n">epsg</span><span class="p">)</span>
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a><span class="mi">3857</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2594">2594</a></span>
<span class="normal"><a href="#__codelineno-0-2595">2595</a></span>
<span class="normal"><a href="#__codelineno-0-2596">2596</a></span>
<span class="normal"><a href="#__codelineno-0-2597">2597</a></span>
<span class="normal"><a href="#__codelineno-0-2598">2598</a></span>
<span class="normal"><a href="#__codelineno-0-2599">2599</a></span>
<span class="normal"><a href="#__codelineno-0-2600">2600</a></span>
<span class="normal"><a href="#__codelineno-0-2601">2601</a></span>
<span class="normal"><a href="#__codelineno-0-2602">2602</a></span>
<span class="normal"><a href="#__codelineno-0-2603">2603</a></span>
<span class="normal"><a href="#__codelineno-0-2604">2604</a></span>
<span class="normal"><a href="#__codelineno-0-2605">2605</a></span>
<span class="normal"><a href="#__codelineno-0-2606">2606</a></span>
<span class="normal"><a href="#__codelineno-0-2607">2607</a></span>
<span class="normal"><a href="#__codelineno-0-2608">2608</a></span>
<span class="normal"><a href="#__codelineno-0-2609">2609</a></span>
<span class="normal"><a href="#__codelineno-0-2610">2610</a></span>
<span class="normal"><a href="#__codelineno-0-2611">2611</a></span>
<span class="normal"><a href="#__codelineno-0-2612">2612</a></span>
<span class="normal"><a href="#__codelineno-0-2613">2613</a></span>
<span class="normal"><a href="#__codelineno-0-2614">2614</a></span>
<span class="normal"><a href="#__codelineno-0-2615">2615</a></span>
<span class="normal"><a href="#__codelineno-0-2616">2616</a></span>
<span class="normal"><a href="#__codelineno-0-2617">2617</a></span>
<span class="normal"><a href="#__codelineno-0-2618">2618</a></span>
<span class="normal"><a href="#__codelineno-0-2619">2619</a></span>
<span class="normal"><a href="#__codelineno-0-2620">2620</a></span>
<span class="normal"><a href="#__codelineno-0-2621">2621</a></span>
<span class="normal"><a href="#__codelineno-0-2622">2622</a></span>
<span class="normal"><a href="#__codelineno-0-2623">2623</a></span>
<span class="normal"><a href="#__codelineno-0-2624">2624</a></span>
<span class="normal"><a href="#__codelineno-0-2625">2625</a></span>
<span class="normal"><a href="#__codelineno-0-2626">2626</a></span>
<span class="normal"><a href="#__codelineno-0-2627">2627</a></span>
<span class="normal"><a href="#__codelineno-0-2628">2628</a></span>
<span class="normal"><a href="#__codelineno-0-2629">2629</a></span>
<span class="normal"><a href="#__codelineno-0-2630">2630</a></span>
<span class="normal"><a href="#__codelineno-0-2631">2631</a></span>
<span class="normal"><a href="#__codelineno-0-2632">2632</a></span>
<span class="normal"><a href="#__codelineno-0-2633">2633</a></span>
<span class="normal"><a href="#__codelineno-0-2634">2634</a></span>
<span class="normal"><a href="#__codelineno-0-2635">2635</a></span>
<span class="normal"><a href="#__codelineno-0-2636">2636</a></span>
<span class="normal"><a href="#__codelineno-0-2637">2637</a></span>
<span class="normal"><a href="#__codelineno-0-2638">2638</a></span>
<span class="normal"><a href="#__codelineno-0-2639">2639</a></span>
<span class="normal"><a href="#__codelineno-0-2640">2640</a></span>
<span class="normal"><a href="#__codelineno-0-2641">2641</a></span>
<span class="normal"><a href="#__codelineno-0-2642">2642</a></span>
<span class="normal"><a href="#__codelineno-0-2643">2643</a></span>
<span class="normal"><a href="#__codelineno-0-2644">2644</a></span>
<span class="normal"><a href="#__codelineno-0-2645">2645</a></span>
<span class="normal"><a href="#__codelineno-0-2646">2646</a></span>
<span class="normal"><a href="#__codelineno-0-2647">2647</a></span>
<span class="normal"><a href="#__codelineno-0-2648">2648</a></span>
<span class="normal"><a href="#__codelineno-0-2649">2649</a></span>
<span class="normal"><a href="#__codelineno-0-2650">2650</a></span>
<span class="normal"><a href="#__codelineno-0-2651">2651</a></span>
<span class="normal"><a href="#__codelineno-0-2652">2652</a></span>
<span class="normal"><a href="#__codelineno-0-2653">2653</a></span>
<span class="normal"><a href="#__codelineno-0-2654">2654</a></span>
<span class="normal"><a href="#__codelineno-0-2655">2655</a></span>
<span class="normal"><a href="#__codelineno-0-2656">2656</a></span>
<span class="normal"><a href="#__codelineno-0-2657">2657</a></span>
<span class="normal"><a href="#__codelineno-0-2658">2658</a></span>
<span class="normal"><a href="#__codelineno-0-2659">2659</a></span>
<span class="normal"><a href="#__codelineno-0-2660">2660</a></span>
<span class="normal"><a href="#__codelineno-0-2661">2661</a></span>
<span class="normal"><a href="#__codelineno-0-2662">2662</a></span>
<span class="normal"><a href="#__codelineno-0-2663">2663</a></span>
<span class="normal"><a href="#__codelineno-0-2664">2664</a></span>
<span class="normal"><a href="#__codelineno-0-2665">2665</a></span>
<span class="normal"><a href="#__codelineno-0-2666">2666</a></span>
<span class="normal"><a href="#__codelineno-0-2667">2667</a></span>
<span class="normal"><a href="#__codelineno-0-2668">2668</a></span>
<span class="normal"><a href="#__codelineno-0-2669">2669</a></span>
<span class="normal"><a href="#__codelineno-0-2670">2670</a></span>
<span class="normal"><a href="#__codelineno-0-2671">2671</a></span>
<span class="normal"><a href="#__codelineno-0-2672">2672</a></span>
<span class="normal"><a href="#__codelineno-0-2673">2673</a></span>
<span class="normal"><a href="#__codelineno-0-2674">2674</a></span>
<span class="normal"><a href="#__codelineno-0-2675">2675</a></span>
<span class="normal"><a href="#__codelineno-0-2676">2676</a></span>
<span class="normal"><a href="#__codelineno-0-2677">2677</a></span>
<span class="normal"><a href="#__codelineno-0-2678">2678</a></span>
<span class="normal"><a href="#__codelineno-0-2679">2679</a></span>
<span class="normal"><a href="#__codelineno-0-2680">2680</a></span>
<span class="normal"><a href="#__codelineno-0-2681">2681</a></span>
<span class="normal"><a href="#__codelineno-0-2682">2682</a></span>
<span class="normal"><a href="#__codelineno-0-2683">2683</a></span>
<span class="normal"><a href="#__codelineno-0-2684">2684</a></span>
<span class="normal"><a href="#__codelineno-0-2685">2685</a></span>
<span class="normal"><a href="#__codelineno-0-2686">2686</a></span>
<span class="normal"><a href="#__codelineno-0-2687">2687</a></span>
<span class="normal"><a href="#__codelineno-0-2688">2688</a></span>
<span class="normal"><a href="#__codelineno-0-2689">2689</a></span>
<span class="normal"><a href="#__codelineno-0-2690">2690</a></span>
<span class="normal"><a href="#__codelineno-0-2691">2691</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2594" name="__codelineno-0-2594"></a><span class="k">def</span><span class="w"> </span><span class="nf">to_crs</span><span class="p">(</span>
<a id="__codelineno-0-2595" name="__codelineno-0-2595"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-2596" name="__codelineno-0-2596"></a>    <span class="n">to_epsg</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-2597" name="__codelineno-0-2597"></a>    <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;nearest neighbor&quot;</span><span class="p">,</span>
<a id="__codelineno-0-2598" name="__codelineno-0-2598"></a>    <span class="n">maintain_alignment</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-2599" name="__codelineno-0-2599"></a>    <span class="n">inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-2600" name="__codelineno-0-2600"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Dataset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<a id="__codelineno-0-2601" name="__codelineno-0-2601"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Reproject the dataset to any projection.</span>
<a id="__codelineno-0-2602" name="__codelineno-0-2602"></a>
<a id="__codelineno-0-2603" name="__codelineno-0-2603"></a><span class="sd">        (default the WGS84 web mercator projection, without resampling)</span>
<a id="__codelineno-0-2604" name="__codelineno-0-2604"></a>
<a id="__codelineno-0-2605" name="__codelineno-0-2605"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-2606" name="__codelineno-0-2606"></a><span class="sd">        to_epsg (int):</span>
<a id="__codelineno-0-2607" name="__codelineno-0-2607"></a><span class="sd">            reference number to the new projection (https://epsg.io/). Default 3857 is the reference number of WGS84</span>
<a id="__codelineno-0-2608" name="__codelineno-0-2608"></a><span class="sd">            web mercator.</span>
<a id="__codelineno-0-2609" name="__codelineno-0-2609"></a><span class="sd">        method (str):</span>
<a id="__codelineno-0-2610" name="__codelineno-0-2610"></a><span class="sd">            resampling method. Default is &quot;nearest neighbor&quot;. See https://gisgeography.com/raster-resampling/.</span>
<a id="__codelineno-0-2611" name="__codelineno-0-2611"></a><span class="sd">            Allowed values: &quot;nearest neighbor&quot;, &quot;cubic&quot;, &quot;bilinear&quot;.</span>
<a id="__codelineno-0-2612" name="__codelineno-0-2612"></a><span class="sd">        maintain_alignment (bool):</span>
<a id="__codelineno-0-2613" name="__codelineno-0-2613"></a><span class="sd">            True to maintain the number of rows and columns of the raster the same after reprojection.</span>
<a id="__codelineno-0-2614" name="__codelineno-0-2614"></a><span class="sd">            Default is False.</span>
<a id="__codelineno-0-2615" name="__codelineno-0-2615"></a><span class="sd">        inplace (bool):</span>
<a id="__codelineno-0-2616" name="__codelineno-0-2616"></a><span class="sd">            True to make changes inplace. Default is False.</span>
<a id="__codelineno-0-2617" name="__codelineno-0-2617"></a>
<a id="__codelineno-0-2618" name="__codelineno-0-2618"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-2619" name="__codelineno-0-2619"></a><span class="sd">        Dataset:</span>
<a id="__codelineno-0-2620" name="__codelineno-0-2620"></a><span class="sd">            Dataset object, if inplace is True, the method returns None.</span>
<a id="__codelineno-0-2621" name="__codelineno-0-2621"></a>
<a id="__codelineno-0-2622" name="__codelineno-0-2622"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-2623" name="__codelineno-0-2623"></a><span class="sd">        - Create a dataset and reproject it:</span>
<a id="__codelineno-0-2624" name="__codelineno-0-2624"></a>
<a id="__codelineno-0-2625" name="__codelineno-0-2625"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-2626" name="__codelineno-0-2626"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-2627" name="__codelineno-0-2627"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.rand(4, 5, 5)</span>
<a id="__codelineno-0-2628" name="__codelineno-0-2628"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-2629" name="__codelineno-0-2629"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-2630" name="__codelineno-0-2630"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-2631" name="__codelineno-0-2631"></a><span class="sd">          &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-2632" name="__codelineno-0-2632"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2633" name="__codelineno-0-2633"></a><span class="sd">                      Cell size: 0.05</span>
<a id="__codelineno-0-2634" name="__codelineno-0-2634"></a><span class="sd">                      Dimension: 5 * 5</span>
<a id="__codelineno-0-2635" name="__codelineno-0-2635"></a><span class="sd">                      EPSG: 4326</span>
<a id="__codelineno-0-2636" name="__codelineno-0-2636"></a><span class="sd">                      Number of Bands: 4</span>
<a id="__codelineno-0-2637" name="__codelineno-0-2637"></a><span class="sd">                      Band names: [&#39;Band_1&#39;, &#39;Band_2&#39;, &#39;Band_3&#39;, &#39;Band_4&#39;]</span>
<a id="__codelineno-0-2638" name="__codelineno-0-2638"></a><span class="sd">                      Mask: -9999.0</span>
<a id="__codelineno-0-2639" name="__codelineno-0-2639"></a><span class="sd">                      Data type: float64</span>
<a id="__codelineno-0-2640" name="__codelineno-0-2640"></a><span class="sd">                      File:...</span>
<a id="__codelineno-0-2641" name="__codelineno-0-2641"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2642" name="__codelineno-0-2642"></a><span class="sd">          &gt;&gt;&gt; print(dataset.crs)</span>
<a id="__codelineno-0-2643" name="__codelineno-0-2643"></a><span class="sd">          GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AXIS[&quot;Latitude&quot;,NORTH],AXIS[&quot;Longitude&quot;,EAST],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]</span>
<a id="__codelineno-0-2644" name="__codelineno-0-2644"></a><span class="sd">          &gt;&gt;&gt; print(dataset.epsg)</span>
<a id="__codelineno-0-2645" name="__codelineno-0-2645"></a><span class="sd">          4326</span>
<a id="__codelineno-0-2646" name="__codelineno-0-2646"></a><span class="sd">          &gt;&gt;&gt; reprojected_dataset = dataset.to_crs(to_epsg=3857)</span>
<a id="__codelineno-0-2647" name="__codelineno-0-2647"></a><span class="sd">          &gt;&gt;&gt; print(reprojected_dataset)</span>
<a id="__codelineno-0-2648" name="__codelineno-0-2648"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2649" name="__codelineno-0-2649"></a><span class="sd">                      Cell size: 5565.983370404396</span>
<a id="__codelineno-0-2650" name="__codelineno-0-2650"></a><span class="sd">                      Dimension: 5 * 5</span>
<a id="__codelineno-0-2651" name="__codelineno-0-2651"></a><span class="sd">                      EPSG: 3857</span>
<a id="__codelineno-0-2652" name="__codelineno-0-2652"></a><span class="sd">                      Number of Bands: 4</span>
<a id="__codelineno-0-2653" name="__codelineno-0-2653"></a><span class="sd">                      Band names: [&#39;Band_1&#39;, &#39;Band_2&#39;, &#39;Band_3&#39;, &#39;Band_4&#39;]</span>
<a id="__codelineno-0-2654" name="__codelineno-0-2654"></a><span class="sd">                      Mask: -9999.0</span>
<a id="__codelineno-0-2655" name="__codelineno-0-2655"></a><span class="sd">                      Data type: float64</span>
<a id="__codelineno-0-2656" name="__codelineno-0-2656"></a><span class="sd">                      File:...</span>
<a id="__codelineno-0-2657" name="__codelineno-0-2657"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-2658" name="__codelineno-0-2658"></a><span class="sd">          &gt;&gt;&gt; print(reprojected_dataset.crs)</span>
<a id="__codelineno-0-2659" name="__codelineno-0-2659"></a><span class="sd">          PROJCS[&quot;WGS 84 / Pseudo-Mercator&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]],PROJECTION[&quot;Mercator_1SP&quot;],PARAMETER[&quot;central_meridian&quot;,0],PARAMETER[&quot;scale_factor&quot;,1],PARAMETER[&quot;false_easting&quot;,0],PARAMETER[&quot;false_northing&quot;,0],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH],EXTENSION[&quot;PROJ4&quot;,&quot;+proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs&quot;],AUTHORITY[&quot;EPSG&quot;,&quot;3857&quot;]]</span>
<a id="__codelineno-0-2660" name="__codelineno-0-2660"></a><span class="sd">          &gt;&gt;&gt; print(reprojected_dataset.epsg)</span>
<a id="__codelineno-0-2661" name="__codelineno-0-2661"></a><span class="sd">          3857</span>
<a id="__codelineno-0-2662" name="__codelineno-0-2662"></a>
<a id="__codelineno-0-2663" name="__codelineno-0-2663"></a><span class="sd">          ```</span>
<a id="__codelineno-0-2664" name="__codelineno-0-2664"></a>
<a id="__codelineno-0-2665" name="__codelineno-0-2665"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2666" name="__codelineno-0-2666"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">to_epsg</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
<a id="__codelineno-0-2667" name="__codelineno-0-2667"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-2668" name="__codelineno-0-2668"></a>            <span class="s2">&quot;please enter correct integer number for to_epsg more information &quot;</span>
<a id="__codelineno-0-2669" name="__codelineno-0-2669"></a>            <span class="sa">f</span><span class="s2">&quot;https://epsg.io/, given </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">to_epsg</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-2670" name="__codelineno-0-2670"></a>        <span class="p">)</span>
<a id="__codelineno-0-2671" name="__codelineno-0-2671"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-2672" name="__codelineno-0-2672"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-2673" name="__codelineno-0-2673"></a>            <span class="s2">&quot;Please enter a correct method, for more information, see documentation &quot;</span>
<a id="__codelineno-0-2674" name="__codelineno-0-2674"></a>        <span class="p">)</span>
<a id="__codelineno-0-2675" name="__codelineno-0-2675"></a>    <span class="k">if</span> <span class="n">method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">INTERPOLATION_METHODS</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<a id="__codelineno-0-2676" name="__codelineno-0-2676"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-2677" name="__codelineno-0-2677"></a>            <span class="sa">f</span><span class="s2">&quot;The given interpolation method: </span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2"> does not exist, existing methods are </span><span class="si">{</span><span class="n">INTERPOLATION_METHODS</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-2678" name="__codelineno-0-2678"></a>        <span class="p">)</span>
<a id="__codelineno-0-2679" name="__codelineno-0-2679"></a>
<a id="__codelineno-0-2680" name="__codelineno-0-2680"></a>    <span class="n">method</span> <span class="o">=</span> <span class="n">INTERPOLATION_METHODS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
<a id="__codelineno-0-2681" name="__codelineno-0-2681"></a>
<a id="__codelineno-0-2682" name="__codelineno-0-2682"></a>    <span class="k">if</span> <span class="n">maintain_alignment</span><span class="p">:</span>
<a id="__codelineno-0-2683" name="__codelineno-0-2683"></a>        <span class="n">dst_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reproject_with_ReprojectImage</span><span class="p">(</span><span class="n">to_epsg</span><span class="p">,</span> <span class="n">method</span><span class="p">)</span>
<a id="__codelineno-0-2684" name="__codelineno-0-2684"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2685" name="__codelineno-0-2685"></a>        <span class="n">dst</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Warp</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span> <span class="n">dstSRS</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;EPSG:</span><span class="si">{</span><span class="n">to_epsg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;VRT&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2686" name="__codelineno-0-2686"></a>        <span class="n">dst_obj</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
<a id="__codelineno-0-2687" name="__codelineno-0-2687"></a>
<a id="__codelineno-0-2688" name="__codelineno-0-2688"></a>    <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
<a id="__codelineno-0-2689" name="__codelineno-0-2689"></a>        <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dst_obj</span><span class="o">.</span><span class="n">raster</span><span class="p">)</span>
<a id="__codelineno-0-2690" name="__codelineno-0-2690"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-2691" name="__codelineno-0-2691"></a>        <span class="k">return</span> <span class="n">dst_obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.count_domain_cells" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.count_domain_cells" class="toclink">
            <code class="highlight language-python"><span class="n">count_domain_cells</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.count_domain_cells" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Count cells inside the domain.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>band</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Band index. Default is 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of cells.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2706">2706</a></span>
<span class="normal"><a href="#__codelineno-0-2707">2707</a></span>
<span class="normal"><a href="#__codelineno-0-2708">2708</a></span>
<span class="normal"><a href="#__codelineno-0-2709">2709</a></span>
<span class="normal"><a href="#__codelineno-0-2710">2710</a></span>
<span class="normal"><a href="#__codelineno-0-2711">2711</a></span>
<span class="normal"><a href="#__codelineno-0-2712">2712</a></span>
<span class="normal"><a href="#__codelineno-0-2713">2713</a></span>
<span class="normal"><a href="#__codelineno-0-2714">2714</a></span>
<span class="normal"><a href="#__codelineno-0-2715">2715</a></span>
<span class="normal"><a href="#__codelineno-0-2716">2716</a></span>
<span class="normal"><a href="#__codelineno-0-2717">2717</a></span>
<span class="normal"><a href="#__codelineno-0-2718">2718</a></span>
<span class="normal"><a href="#__codelineno-0-2719">2719</a></span>
<span class="normal"><a href="#__codelineno-0-2720">2720</a></span>
<span class="normal"><a href="#__codelineno-0-2721">2721</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2706" name="__codelineno-0-2706"></a><span class="k">def</span><span class="w"> </span><span class="nf">count_domain_cells</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-2707" name="__codelineno-0-2707"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Count cells inside the domain.</span>
<a id="__codelineno-0-2708" name="__codelineno-0-2708"></a>
<a id="__codelineno-0-2709" name="__codelineno-0-2709"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-2710" name="__codelineno-0-2710"></a><span class="sd">        band (int):</span>
<a id="__codelineno-0-2711" name="__codelineno-0-2711"></a><span class="sd">            Band index. Default is 0.</span>
<a id="__codelineno-0-2712" name="__codelineno-0-2712"></a>
<a id="__codelineno-0-2713" name="__codelineno-0-2713"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-2714" name="__codelineno-0-2714"></a><span class="sd">        int:</span>
<a id="__codelineno-0-2715" name="__codelineno-0-2715"></a><span class="sd">            Number of cells.</span>
<a id="__codelineno-0-2716" name="__codelineno-0-2716"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2717" name="__codelineno-0-2717"></a>    <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-2718" name="__codelineno-0-2718"></a>    <span class="n">domain_count</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="n">arr</span><span class="p">[:,</span> <span class="p">:])</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span>
<a id="__codelineno-0-2719" name="__codelineno-0-2719"></a>        <span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="n">band</span><span class="p">],</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)])</span>
<a id="__codelineno-0-2720" name="__codelineno-0-2720"></a>    <span class="p">)</span>
<a id="__codelineno-0-2721" name="__codelineno-0-2721"></a>    <span class="k">return</span> <span class="n">domain_count</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.change_no_data_value" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.change_no_data_value" class="toclink">
            <code class="highlight language-python"><span class="n">change_no_data_value</span><span class="p">(</span><span class="n">new_value</span><span class="p">,</span> <span class="n">old_value</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.change_no_data_value" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Change No Data Value.</p>
<div class="highlight"><pre><span></span><code>- Set the no data value in all raster bands.
- Fill the whole raster with the no_data_value.
- Change the no_data_value in the array in all bands.
</code></pre></div>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>new_value</code>
            </td>
            <td>
                  <code><span title="numeric">numeric</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>No data value to set in the raster bands.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>old_value</code>
            </td>
            <td>
                  <code><span title="numeric">numeric</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Old no data value that is already in the raster bands.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<details class="warning" open>
  <summary>Warning</summary>
  <p>The <code>change_no_data_value</code> method creates a new dataset in memory in order to change the <code>no_data_value</code> in the raster bands.</p>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create a Dataset (4 bands, 10 rows, 10 columns) at lon/lat (0, 0):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">...</span>     <span class="n">cell_size</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;float32&quot;</span><span class="p">,</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">...</span>     <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">,</span> <span class="n">no_data_value</span><span class="o">=-</span><span class="mi">9</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">...</span> <span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">read_array</span><span class="p">()</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="p">[[</span><span class="o">-</span><span class="mf">9.</span> <span class="o">-</span><span class="mf">9.</span> <span class="o">-</span><span class="mf">9.</span><span class="p">]</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a> <span class="p">[</span><span class="o">-</span><span class="mf">9.</span> <span class="o">-</span><span class="mf">9.</span> <span class="o">-</span><span class="mf">9.</span><span class="p">]</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a> <span class="p">[</span><span class="o">-</span><span class="mf">9.</span> <span class="o">-</span><span class="mf">9.</span> <span class="o">-</span><span class="mf">9.</span><span class="p">]]</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="p">[</span><span class="o">-</span><span class="mf">9.0</span><span class="p">]</span>
</code></pre></div>
<ul>
<li>The dataset is full of the no_data_value. Now change it using <code>change_no_data_value</code>:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">new_dataset</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">change_no_data_value</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">9</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">new_dataset</span><span class="o">.</span><span class="n">read_array</span><span class="p">()</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="p">[[</span><span class="o">-</span><span class="mf">10.</span> <span class="o">-</span><span class="mf">10.</span> <span class="o">-</span><span class="mf">10.</span><span class="p">]</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a> <span class="p">[</span><span class="o">-</span><span class="mf">10.</span> <span class="o">-</span><span class="mf">10.</span> <span class="o">-</span><span class="mf">10.</span><span class="p">]</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a> <span class="p">[</span><span class="o">-</span><span class="mf">10.</span> <span class="o">-</span><span class="mf">10.</span> <span class="o">-</span><span class="mf">10.</span><span class="p">]]</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">new_dataset</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="p">[</span><span class="o">-</span><span class="mf">10.0</span><span class="p">]</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-2950">2950</a></span>
<span class="normal"><a href="#__codelineno-0-2951">2951</a></span>
<span class="normal"><a href="#__codelineno-0-2952">2952</a></span>
<span class="normal"><a href="#__codelineno-0-2953">2953</a></span>
<span class="normal"><a href="#__codelineno-0-2954">2954</a></span>
<span class="normal"><a href="#__codelineno-0-2955">2955</a></span>
<span class="normal"><a href="#__codelineno-0-2956">2956</a></span>
<span class="normal"><a href="#__codelineno-0-2957">2957</a></span>
<span class="normal"><a href="#__codelineno-0-2958">2958</a></span>
<span class="normal"><a href="#__codelineno-0-2959">2959</a></span>
<span class="normal"><a href="#__codelineno-0-2960">2960</a></span>
<span class="normal"><a href="#__codelineno-0-2961">2961</a></span>
<span class="normal"><a href="#__codelineno-0-2962">2962</a></span>
<span class="normal"><a href="#__codelineno-0-2963">2963</a></span>
<span class="normal"><a href="#__codelineno-0-2964">2964</a></span>
<span class="normal"><a href="#__codelineno-0-2965">2965</a></span>
<span class="normal"><a href="#__codelineno-0-2966">2966</a></span>
<span class="normal"><a href="#__codelineno-0-2967">2967</a></span>
<span class="normal"><a href="#__codelineno-0-2968">2968</a></span>
<span class="normal"><a href="#__codelineno-0-2969">2969</a></span>
<span class="normal"><a href="#__codelineno-0-2970">2970</a></span>
<span class="normal"><a href="#__codelineno-0-2971">2971</a></span>
<span class="normal"><a href="#__codelineno-0-2972">2972</a></span>
<span class="normal"><a href="#__codelineno-0-2973">2973</a></span>
<span class="normal"><a href="#__codelineno-0-2974">2974</a></span>
<span class="normal"><a href="#__codelineno-0-2975">2975</a></span>
<span class="normal"><a href="#__codelineno-0-2976">2976</a></span>
<span class="normal"><a href="#__codelineno-0-2977">2977</a></span>
<span class="normal"><a href="#__codelineno-0-2978">2978</a></span>
<span class="normal"><a href="#__codelineno-0-2979">2979</a></span>
<span class="normal"><a href="#__codelineno-0-2980">2980</a></span>
<span class="normal"><a href="#__codelineno-0-2981">2981</a></span>
<span class="normal"><a href="#__codelineno-0-2982">2982</a></span>
<span class="normal"><a href="#__codelineno-0-2983">2983</a></span>
<span class="normal"><a href="#__codelineno-0-2984">2984</a></span>
<span class="normal"><a href="#__codelineno-0-2985">2985</a></span>
<span class="normal"><a href="#__codelineno-0-2986">2986</a></span>
<span class="normal"><a href="#__codelineno-0-2987">2987</a></span>
<span class="normal"><a href="#__codelineno-0-2988">2988</a></span>
<span class="normal"><a href="#__codelineno-0-2989">2989</a></span>
<span class="normal"><a href="#__codelineno-0-2990">2990</a></span>
<span class="normal"><a href="#__codelineno-0-2991">2991</a></span>
<span class="normal"><a href="#__codelineno-0-2992">2992</a></span>
<span class="normal"><a href="#__codelineno-0-2993">2993</a></span>
<span class="normal"><a href="#__codelineno-0-2994">2994</a></span>
<span class="normal"><a href="#__codelineno-0-2995">2995</a></span>
<span class="normal"><a href="#__codelineno-0-2996">2996</a></span>
<span class="normal"><a href="#__codelineno-0-2997">2997</a></span>
<span class="normal"><a href="#__codelineno-0-2998">2998</a></span>
<span class="normal"><a href="#__codelineno-0-2999">2999</a></span>
<span class="normal"><a href="#__codelineno-0-3000">3000</a></span>
<span class="normal"><a href="#__codelineno-0-3001">3001</a></span>
<span class="normal"><a href="#__codelineno-0-3002">3002</a></span>
<span class="normal"><a href="#__codelineno-0-3003">3003</a></span>
<span class="normal"><a href="#__codelineno-0-3004">3004</a></span>
<span class="normal"><a href="#__codelineno-0-3005">3005</a></span>
<span class="normal"><a href="#__codelineno-0-3006">3006</a></span>
<span class="normal"><a href="#__codelineno-0-3007">3007</a></span>
<span class="normal"><a href="#__codelineno-0-3008">3008</a></span>
<span class="normal"><a href="#__codelineno-0-3009">3009</a></span>
<span class="normal"><a href="#__codelineno-0-3010">3010</a></span>
<span class="normal"><a href="#__codelineno-0-3011">3011</a></span>
<span class="normal"><a href="#__codelineno-0-3012">3012</a></span>
<span class="normal"><a href="#__codelineno-0-3013">3013</a></span>
<span class="normal"><a href="#__codelineno-0-3014">3014</a></span>
<span class="normal"><a href="#__codelineno-0-3015">3015</a></span>
<span class="normal"><a href="#__codelineno-0-3016">3016</a></span>
<span class="normal"><a href="#__codelineno-0-3017">3017</a></span>
<span class="normal"><a href="#__codelineno-0-3018">3018</a></span>
<span class="normal"><a href="#__codelineno-0-3019">3019</a></span>
<span class="normal"><a href="#__codelineno-0-3020">3020</a></span>
<span class="normal"><a href="#__codelineno-0-3021">3021</a></span>
<span class="normal"><a href="#__codelineno-0-3022">3022</a></span>
<span class="normal"><a href="#__codelineno-0-3023">3023</a></span>
<span class="normal"><a href="#__codelineno-0-3024">3024</a></span>
<span class="normal"><a href="#__codelineno-0-3025">3025</a></span>
<span class="normal"><a href="#__codelineno-0-3026">3026</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-2950" name="__codelineno-0-2950"></a><span class="k">def</span><span class="w"> </span><span class="nf">change_no_data_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">old_value</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-2951" name="__codelineno-0-2951"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Change No Data Value.</span>
<a id="__codelineno-0-2952" name="__codelineno-0-2952"></a>
<a id="__codelineno-0-2953" name="__codelineno-0-2953"></a><span class="sd">        - Set the no data value in all raster bands.</span>
<a id="__codelineno-0-2954" name="__codelineno-0-2954"></a><span class="sd">        - Fill the whole raster with the no_data_value.</span>
<a id="__codelineno-0-2955" name="__codelineno-0-2955"></a><span class="sd">        - Change the no_data_value in the array in all bands.</span>
<a id="__codelineno-0-2956" name="__codelineno-0-2956"></a>
<a id="__codelineno-0-2957" name="__codelineno-0-2957"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-2958" name="__codelineno-0-2958"></a><span class="sd">        new_value (numeric):</span>
<a id="__codelineno-0-2959" name="__codelineno-0-2959"></a><span class="sd">            No data value to set in the raster bands.</span>
<a id="__codelineno-0-2960" name="__codelineno-0-2960"></a><span class="sd">        old_value (numeric):</span>
<a id="__codelineno-0-2961" name="__codelineno-0-2961"></a><span class="sd">            Old no data value that is already in the raster bands.</span>
<a id="__codelineno-0-2962" name="__codelineno-0-2962"></a>
<a id="__codelineno-0-2963" name="__codelineno-0-2963"></a><span class="sd">    Warning:</span>
<a id="__codelineno-0-2964" name="__codelineno-0-2964"></a><span class="sd">        The `change_no_data_value` method creates a new dataset in memory in order to change the `no_data_value` in the raster bands.</span>
<a id="__codelineno-0-2965" name="__codelineno-0-2965"></a>
<a id="__codelineno-0-2966" name="__codelineno-0-2966"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-2967" name="__codelineno-0-2967"></a><span class="sd">        - Create a Dataset (4 bands, 10 rows, 10 columns) at lon/lat (0, 0):</span>
<a id="__codelineno-0-2968" name="__codelineno-0-2968"></a>
<a id="__codelineno-0-2969" name="__codelineno-0-2969"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-2970" name="__codelineno-0-2970"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create(</span>
<a id="__codelineno-0-2971" name="__codelineno-0-2971"></a><span class="sd">          ...     cell_size=0.05, rows=3, columns=3, bands=1, top_left_corner=(0, 0),dtype=&quot;float32&quot;,</span>
<a id="__codelineno-0-2972" name="__codelineno-0-2972"></a><span class="sd">          ...     epsg=4326, no_data_value=-9</span>
<a id="__codelineno-0-2973" name="__codelineno-0-2973"></a><span class="sd">          ... )</span>
<a id="__codelineno-0-2974" name="__codelineno-0-2974"></a><span class="sd">          &gt;&gt;&gt; arr = dataset.read_array()</span>
<a id="__codelineno-0-2975" name="__codelineno-0-2975"></a><span class="sd">          &gt;&gt;&gt; print(arr)</span>
<a id="__codelineno-0-2976" name="__codelineno-0-2976"></a><span class="sd">          [[-9. -9. -9.]</span>
<a id="__codelineno-0-2977" name="__codelineno-0-2977"></a><span class="sd">           [-9. -9. -9.]</span>
<a id="__codelineno-0-2978" name="__codelineno-0-2978"></a><span class="sd">           [-9. -9. -9.]]</span>
<a id="__codelineno-0-2979" name="__codelineno-0-2979"></a><span class="sd">          &gt;&gt;&gt; print(dataset.no_data_value) # doctest: +SKIP</span>
<a id="__codelineno-0-2980" name="__codelineno-0-2980"></a><span class="sd">          [-9.0]</span>
<a id="__codelineno-0-2981" name="__codelineno-0-2981"></a>
<a id="__codelineno-0-2982" name="__codelineno-0-2982"></a><span class="sd">          ```</span>
<a id="__codelineno-0-2983" name="__codelineno-0-2983"></a>
<a id="__codelineno-0-2984" name="__codelineno-0-2984"></a><span class="sd">        - The dataset is full of the no_data_value. Now change it using `change_no_data_value`:</span>
<a id="__codelineno-0-2985" name="__codelineno-0-2985"></a>
<a id="__codelineno-0-2986" name="__codelineno-0-2986"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-2987" name="__codelineno-0-2987"></a><span class="sd">          &gt;&gt;&gt; new_dataset = dataset.change_no_data_value(-10, -9)</span>
<a id="__codelineno-0-2988" name="__codelineno-0-2988"></a><span class="sd">          &gt;&gt;&gt; arr = new_dataset.read_array()</span>
<a id="__codelineno-0-2989" name="__codelineno-0-2989"></a><span class="sd">          &gt;&gt;&gt; print(arr)</span>
<a id="__codelineno-0-2990" name="__codelineno-0-2990"></a><span class="sd">          [[-10. -10. -10.]</span>
<a id="__codelineno-0-2991" name="__codelineno-0-2991"></a><span class="sd">           [-10. -10. -10.]</span>
<a id="__codelineno-0-2992" name="__codelineno-0-2992"></a><span class="sd">           [-10. -10. -10.]]</span>
<a id="__codelineno-0-2993" name="__codelineno-0-2993"></a><span class="sd">          &gt;&gt;&gt; print(new_dataset.no_data_value) # doctest: +SKIP</span>
<a id="__codelineno-0-2994" name="__codelineno-0-2994"></a><span class="sd">          [-10.0]</span>
<a id="__codelineno-0-2995" name="__codelineno-0-2995"></a>
<a id="__codelineno-0-2996" name="__codelineno-0-2996"></a><span class="sd">          ```</span>
<a id="__codelineno-0-2997" name="__codelineno-0-2997"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-2998" name="__codelineno-0-2998"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">new_value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-2999" name="__codelineno-0-2999"></a>        <span class="n">new_value</span> <span class="o">=</span> <span class="p">[</span><span class="n">new_value</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span>
<a id="__codelineno-0-3000" name="__codelineno-0-3000"></a>
<a id="__codelineno-0-3001" name="__codelineno-0-3001"></a>    <span class="k">if</span> <span class="n">old_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">old_value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-3002" name="__codelineno-0-3002"></a>        <span class="n">old_value</span> <span class="o">=</span> <span class="p">[</span><span class="n">old_value</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span>
<a id="__codelineno-0-3003" name="__codelineno-0-3003"></a>
<a id="__codelineno-0-3004" name="__codelineno-0-3004"></a>    <span class="n">dst</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="s2">&quot;MEM&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">CreateCopy</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-3005" name="__codelineno-0-3005"></a>    <span class="c1"># create a new dataset</span>
<a id="__codelineno-0-3006" name="__codelineno-0-3006"></a>    <span class="n">new_dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="s2">&quot;write&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3007" name="__codelineno-0-3007"></a>    <span class="c1"># the new_value could change inside the _set_no_data_value method before it is used to set the no_data_value</span>
<a id="__codelineno-0-3008" name="__codelineno-0-3008"></a>    <span class="c1"># attribute in the gdal object/pyramids object and to fill the band.</span>
<a id="__codelineno-0-3009" name="__codelineno-0-3009"></a>    <span class="n">new_dataset</span><span class="o">.</span><span class="n">_set_no_data_value</span><span class="p">(</span><span class="n">new_value</span><span class="p">)</span>
<a id="__codelineno-0-3010" name="__codelineno-0-3010"></a>    <span class="c1"># now we have to use the no_data_value value in the no_data_value attribute in the Dataset object as it is</span>
<a id="__codelineno-0-3011" name="__codelineno-0-3011"></a>    <span class="c1"># updated.</span>
<a id="__codelineno-0-3012" name="__codelineno-0-3012"></a>    <span class="n">new_value</span> <span class="o">=</span> <span class="n">new_dataset</span><span class="o">.</span><span class="n">no_data_value</span>
<a id="__codelineno-0-3013" name="__codelineno-0-3013"></a>    <span class="k">for</span> <span class="n">band</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-3014" name="__codelineno-0-3014"></a>        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-3015" name="__codelineno-0-3015"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-3016" name="__codelineno-0-3016"></a>            <span class="k">if</span> <span class="n">old_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3017" name="__codelineno-0-3017"></a>                <span class="n">arr</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">old_value</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)]</span> <span class="o">=</span> <span class="n">new_value</span><span class="p">[</span><span class="n">band</span><span class="p">]</span>
<a id="__codelineno-0-3018" name="__codelineno-0-3018"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3019" name="__codelineno-0-3019"></a>                <span class="n">arr</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">arr</span><span class="p">)]</span> <span class="o">=</span> <span class="n">new_value</span><span class="p">[</span><span class="n">band</span><span class="p">]</span>
<a id="__codelineno-0-3020" name="__codelineno-0-3020"></a>        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
<a id="__codelineno-0-3021" name="__codelineno-0-3021"></a>            <span class="k">raise</span> <span class="n">NoDataValueError</span><span class="p">(</span>
<a id="__codelineno-0-3022" name="__codelineno-0-3022"></a>                <span class="sa">f</span><span class="s2">&quot;The dtype of the given no_data_value: </span><span class="si">{</span><span class="n">new_value</span><span class="p">[</span><span class="n">band</span><span class="p">]</span><span class="si">}</span><span class="s2"> differs from the dtype of the &quot;</span>
<a id="__codelineno-0-3023" name="__codelineno-0-3023"></a>                <span class="sa">f</span><span class="s2">&quot;band: </span><span class="si">{</span><span class="n">gdal_to_numpy_dtype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gdal_dtype</span><span class="p">[</span><span class="n">band</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-3024" name="__codelineno-0-3024"></a>            <span class="p">)</span>
<a id="__codelineno-0-3025" name="__codelineno-0-3025"></a>        <span class="n">new_dataset</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">band</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<a id="__codelineno-0-3026" name="__codelineno-0-3026"></a>    <span class="k">return</span> <span class="n">new_dataset</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.get_cell_coords" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.get_cell_coords" class="toclink">
            <code class="highlight language-python"><span class="n">get_cell_coords</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.get_cell_coords" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Get coordinates for the center/corner of cells inside the dataset domain.</p>
<p>Returns the coordinates of the cell centers inside the domain (only the cells that
do not have nodata value)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>location</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Location of the coordinates. Use <code>center</code> for the center of a cell, <code>corner</code> for the corner of the
cell (top-left corner).</p>
              </div>
            </td>
            <td>
                  <code>&#39;center&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>mask</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True to exclude the cells out of the domain. Default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>np.ndarray:
Array with a list of the coordinates to be interpolated, without the NaN.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>np.ndarray:
Array with all the centers of cells in the domain of the DEM.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create <code>Dataset</code> consists of 1 bands, 3 rows, 3 columns, at the point lon/lat (0, 0).</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>Get the coordinates of the center of cells inside the domain.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">coords</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_cell_coords</span><span class="p">()</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="p">[[</span> <span class="mf">0.025</span> <span class="o">-</span><span class="mf">0.025</span><span class="p">]</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a> <span class="p">[</span> <span class="mf">0.075</span> <span class="o">-</span><span class="mf">0.025</span><span class="p">]</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a> <span class="p">[</span> <span class="mf">0.125</span> <span class="o">-</span><span class="mf">0.025</span><span class="p">]</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a> <span class="p">[</span> <span class="mf">0.025</span> <span class="o">-</span><span class="mf">0.075</span><span class="p">]</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a> <span class="p">[</span> <span class="mf">0.075</span> <span class="o">-</span><span class="mf">0.075</span><span class="p">]</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a> <span class="p">[</span> <span class="mf">0.125</span> <span class="o">-</span><span class="mf">0.075</span><span class="p">]</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a> <span class="p">[</span> <span class="mf">0.025</span> <span class="o">-</span><span class="mf">0.125</span><span class="p">]</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a> <span class="p">[</span> <span class="mf">0.075</span> <span class="o">-</span><span class="mf">0.125</span><span class="p">]</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a> <span class="p">[</span> <span class="mf">0.125</span> <span class="o">-</span><span class="mf">0.125</span><span class="p">]]</span>
</code></pre></div>
<ul>
<li>Get the coordinates of the top left corner of cells inside the domain.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">coords</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_cell_coords</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="s2">&quot;corner&quot;</span><span class="p">)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="p">[[</span> <span class="mf">0.</span>    <span class="mf">0.</span>  <span class="p">]</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a> <span class="p">[</span> <span class="mf">0.05</span>  <span class="mf">0.</span>  <span class="p">]</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a> <span class="p">[</span> <span class="mf">0.1</span>   <span class="mf">0.</span>  <span class="p">]</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a> <span class="p">[</span> <span class="mf">0.</span>   <span class="o">-</span><span class="mf">0.05</span><span class="p">]</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a> <span class="p">[</span> <span class="mf">0.05</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">]</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a> <span class="p">[</span> <span class="mf">0.1</span>  <span class="o">-</span><span class="mf">0.05</span><span class="p">]</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a> <span class="p">[</span> <span class="mf">0.</span>   <span class="o">-</span><span class="mf">0.1</span> <span class="p">]</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a> <span class="p">[</span> <span class="mf">0.05</span> <span class="o">-</span><span class="mf">0.1</span> <span class="p">]</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a> <span class="p">[</span> <span class="mf">0.1</span>  <span class="o">-</span><span class="mf">0.1</span> <span class="p">]]</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3028">3028</a></span>
<span class="normal"><a href="#__codelineno-0-3029">3029</a></span>
<span class="normal"><a href="#__codelineno-0-3030">3030</a></span>
<span class="normal"><a href="#__codelineno-0-3031">3031</a></span>
<span class="normal"><a href="#__codelineno-0-3032">3032</a></span>
<span class="normal"><a href="#__codelineno-0-3033">3033</a></span>
<span class="normal"><a href="#__codelineno-0-3034">3034</a></span>
<span class="normal"><a href="#__codelineno-0-3035">3035</a></span>
<span class="normal"><a href="#__codelineno-0-3036">3036</a></span>
<span class="normal"><a href="#__codelineno-0-3037">3037</a></span>
<span class="normal"><a href="#__codelineno-0-3038">3038</a></span>
<span class="normal"><a href="#__codelineno-0-3039">3039</a></span>
<span class="normal"><a href="#__codelineno-0-3040">3040</a></span>
<span class="normal"><a href="#__codelineno-0-3041">3041</a></span>
<span class="normal"><a href="#__codelineno-0-3042">3042</a></span>
<span class="normal"><a href="#__codelineno-0-3043">3043</a></span>
<span class="normal"><a href="#__codelineno-0-3044">3044</a></span>
<span class="normal"><a href="#__codelineno-0-3045">3045</a></span>
<span class="normal"><a href="#__codelineno-0-3046">3046</a></span>
<span class="normal"><a href="#__codelineno-0-3047">3047</a></span>
<span class="normal"><a href="#__codelineno-0-3048">3048</a></span>
<span class="normal"><a href="#__codelineno-0-3049">3049</a></span>
<span class="normal"><a href="#__codelineno-0-3050">3050</a></span>
<span class="normal"><a href="#__codelineno-0-3051">3051</a></span>
<span class="normal"><a href="#__codelineno-0-3052">3052</a></span>
<span class="normal"><a href="#__codelineno-0-3053">3053</a></span>
<span class="normal"><a href="#__codelineno-0-3054">3054</a></span>
<span class="normal"><a href="#__codelineno-0-3055">3055</a></span>
<span class="normal"><a href="#__codelineno-0-3056">3056</a></span>
<span class="normal"><a href="#__codelineno-0-3057">3057</a></span>
<span class="normal"><a href="#__codelineno-0-3058">3058</a></span>
<span class="normal"><a href="#__codelineno-0-3059">3059</a></span>
<span class="normal"><a href="#__codelineno-0-3060">3060</a></span>
<span class="normal"><a href="#__codelineno-0-3061">3061</a></span>
<span class="normal"><a href="#__codelineno-0-3062">3062</a></span>
<span class="normal"><a href="#__codelineno-0-3063">3063</a></span>
<span class="normal"><a href="#__codelineno-0-3064">3064</a></span>
<span class="normal"><a href="#__codelineno-0-3065">3065</a></span>
<span class="normal"><a href="#__codelineno-0-3066">3066</a></span>
<span class="normal"><a href="#__codelineno-0-3067">3067</a></span>
<span class="normal"><a href="#__codelineno-0-3068">3068</a></span>
<span class="normal"><a href="#__codelineno-0-3069">3069</a></span>
<span class="normal"><a href="#__codelineno-0-3070">3070</a></span>
<span class="normal"><a href="#__codelineno-0-3071">3071</a></span>
<span class="normal"><a href="#__codelineno-0-3072">3072</a></span>
<span class="normal"><a href="#__codelineno-0-3073">3073</a></span>
<span class="normal"><a href="#__codelineno-0-3074">3074</a></span>
<span class="normal"><a href="#__codelineno-0-3075">3075</a></span>
<span class="normal"><a href="#__codelineno-0-3076">3076</a></span>
<span class="normal"><a href="#__codelineno-0-3077">3077</a></span>
<span class="normal"><a href="#__codelineno-0-3078">3078</a></span>
<span class="normal"><a href="#__codelineno-0-3079">3079</a></span>
<span class="normal"><a href="#__codelineno-0-3080">3080</a></span>
<span class="normal"><a href="#__codelineno-0-3081">3081</a></span>
<span class="normal"><a href="#__codelineno-0-3082">3082</a></span>
<span class="normal"><a href="#__codelineno-0-3083">3083</a></span>
<span class="normal"><a href="#__codelineno-0-3084">3084</a></span>
<span class="normal"><a href="#__codelineno-0-3085">3085</a></span>
<span class="normal"><a href="#__codelineno-0-3086">3086</a></span>
<span class="normal"><a href="#__codelineno-0-3087">3087</a></span>
<span class="normal"><a href="#__codelineno-0-3088">3088</a></span>
<span class="normal"><a href="#__codelineno-0-3089">3089</a></span>
<span class="normal"><a href="#__codelineno-0-3090">3090</a></span>
<span class="normal"><a href="#__codelineno-0-3091">3091</a></span>
<span class="normal"><a href="#__codelineno-0-3092">3092</a></span>
<span class="normal"><a href="#__codelineno-0-3093">3093</a></span>
<span class="normal"><a href="#__codelineno-0-3094">3094</a></span>
<span class="normal"><a href="#__codelineno-0-3095">3095</a></span>
<span class="normal"><a href="#__codelineno-0-3096">3096</a></span>
<span class="normal"><a href="#__codelineno-0-3097">3097</a></span>
<span class="normal"><a href="#__codelineno-0-3098">3098</a></span>
<span class="normal"><a href="#__codelineno-0-3099">3099</a></span>
<span class="normal"><a href="#__codelineno-0-3100">3100</a></span>
<span class="normal"><a href="#__codelineno-0-3101">3101</a></span>
<span class="normal"><a href="#__codelineno-0-3102">3102</a></span>
<span class="normal"><a href="#__codelineno-0-3103">3103</a></span>
<span class="normal"><a href="#__codelineno-0-3104">3104</a></span>
<span class="normal"><a href="#__codelineno-0-3105">3105</a></span>
<span class="normal"><a href="#__codelineno-0-3106">3106</a></span>
<span class="normal"><a href="#__codelineno-0-3107">3107</a></span>
<span class="normal"><a href="#__codelineno-0-3108">3108</a></span>
<span class="normal"><a href="#__codelineno-0-3109">3109</a></span>
<span class="normal"><a href="#__codelineno-0-3110">3110</a></span>
<span class="normal"><a href="#__codelineno-0-3111">3111</a></span>
<span class="normal"><a href="#__codelineno-0-3112">3112</a></span>
<span class="normal"><a href="#__codelineno-0-3113">3113</a></span>
<span class="normal"><a href="#__codelineno-0-3114">3114</a></span>
<span class="normal"><a href="#__codelineno-0-3115">3115</a></span>
<span class="normal"><a href="#__codelineno-0-3116">3116</a></span>
<span class="normal"><a href="#__codelineno-0-3117">3117</a></span>
<span class="normal"><a href="#__codelineno-0-3118">3118</a></span>
<span class="normal"><a href="#__codelineno-0-3119">3119</a></span>
<span class="normal"><a href="#__codelineno-0-3120">3120</a></span>
<span class="normal"><a href="#__codelineno-0-3121">3121</a></span>
<span class="normal"><a href="#__codelineno-0-3122">3122</a></span>
<span class="normal"><a href="#__codelineno-0-3123">3123</a></span>
<span class="normal"><a href="#__codelineno-0-3124">3124</a></span>
<span class="normal"><a href="#__codelineno-0-3125">3125</a></span>
<span class="normal"><a href="#__codelineno-0-3126">3126</a></span>
<span class="normal"><a href="#__codelineno-0-3127">3127</a></span>
<span class="normal"><a href="#__codelineno-0-3128">3128</a></span>
<span class="normal"><a href="#__codelineno-0-3129">3129</a></span>
<span class="normal"><a href="#__codelineno-0-3130">3130</a></span>
<span class="normal"><a href="#__codelineno-0-3131">3131</a></span>
<span class="normal"><a href="#__codelineno-0-3132">3132</a></span>
<span class="normal"><a href="#__codelineno-0-3133">3133</a></span>
<span class="normal"><a href="#__codelineno-0-3134">3134</a></span>
<span class="normal"><a href="#__codelineno-0-3135">3135</a></span>
<span class="normal"><a href="#__codelineno-0-3136">3136</a></span>
<span class="normal"><a href="#__codelineno-0-3137">3137</a></span>
<span class="normal"><a href="#__codelineno-0-3138">3138</a></span>
<span class="normal"><a href="#__codelineno-0-3139">3139</a></span>
<span class="normal"><a href="#__codelineno-0-3140">3140</a></span>
<span class="normal"><a href="#__codelineno-0-3141">3141</a></span>
<span class="normal"><a href="#__codelineno-0-3142">3142</a></span>
<span class="normal"><a href="#__codelineno-0-3143">3143</a></span>
<span class="normal"><a href="#__codelineno-0-3144">3144</a></span>
<span class="normal"><a href="#__codelineno-0-3145">3145</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-3028" name="__codelineno-0-3028"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_cell_coords</span><span class="p">(</span>
<a id="__codelineno-0-3029" name="__codelineno-0-3029"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">mask</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-3030" name="__codelineno-0-3030"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-3031" name="__codelineno-0-3031"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get coordinates for the center/corner of cells inside the dataset domain.</span>
<a id="__codelineno-0-3032" name="__codelineno-0-3032"></a>
<a id="__codelineno-0-3033" name="__codelineno-0-3033"></a><span class="sd">    Returns the coordinates of the cell centers inside the domain (only the cells that</span>
<a id="__codelineno-0-3034" name="__codelineno-0-3034"></a><span class="sd">    do not have nodata value)</span>
<a id="__codelineno-0-3035" name="__codelineno-0-3035"></a>
<a id="__codelineno-0-3036" name="__codelineno-0-3036"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-3037" name="__codelineno-0-3037"></a><span class="sd">        location (str):</span>
<a id="__codelineno-0-3038" name="__codelineno-0-3038"></a><span class="sd">            Location of the coordinates. Use `center` for the center of a cell, `corner` for the corner of the</span>
<a id="__codelineno-0-3039" name="__codelineno-0-3039"></a><span class="sd">            cell (top-left corner).</span>
<a id="__codelineno-0-3040" name="__codelineno-0-3040"></a><span class="sd">        mask (bool):</span>
<a id="__codelineno-0-3041" name="__codelineno-0-3041"></a><span class="sd">            True to exclude the cells out of the domain. Default is False.</span>
<a id="__codelineno-0-3042" name="__codelineno-0-3042"></a>
<a id="__codelineno-0-3043" name="__codelineno-0-3043"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-3044" name="__codelineno-0-3044"></a><span class="sd">        np.ndarray:</span>
<a id="__codelineno-0-3045" name="__codelineno-0-3045"></a><span class="sd">            Array with a list of the coordinates to be interpolated, without the NaN.</span>
<a id="__codelineno-0-3046" name="__codelineno-0-3046"></a><span class="sd">        np.ndarray:</span>
<a id="__codelineno-0-3047" name="__codelineno-0-3047"></a><span class="sd">            Array with all the centers of cells in the domain of the DEM.</span>
<a id="__codelineno-0-3048" name="__codelineno-0-3048"></a>
<a id="__codelineno-0-3049" name="__codelineno-0-3049"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-3050" name="__codelineno-0-3050"></a><span class="sd">        - Create `Dataset` consists of 1 bands, 3 rows, 3 columns, at the point lon/lat (0, 0).</span>
<a id="__codelineno-0-3051" name="__codelineno-0-3051"></a>
<a id="__codelineno-0-3052" name="__codelineno-0-3052"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-3053" name="__codelineno-0-3053"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-3054" name="__codelineno-0-3054"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.randint(1,3, size=(3, 3))</span>
<a id="__codelineno-0-3055" name="__codelineno-0-3055"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-3056" name="__codelineno-0-3056"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-3057" name="__codelineno-0-3057"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-3058" name="__codelineno-0-3058"></a>
<a id="__codelineno-0-3059" name="__codelineno-0-3059"></a><span class="sd">          ```</span>
<a id="__codelineno-0-3060" name="__codelineno-0-3060"></a>
<a id="__codelineno-0-3061" name="__codelineno-0-3061"></a><span class="sd">        - Get the coordinates of the center of cells inside the domain.</span>
<a id="__codelineno-0-3062" name="__codelineno-0-3062"></a>
<a id="__codelineno-0-3063" name="__codelineno-0-3063"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-3064" name="__codelineno-0-3064"></a><span class="sd">          &gt;&gt;&gt; coords = dataset.get_cell_coords()</span>
<a id="__codelineno-0-3065" name="__codelineno-0-3065"></a><span class="sd">          &gt;&gt;&gt; print(coords)</span>
<a id="__codelineno-0-3066" name="__codelineno-0-3066"></a><span class="sd">          [[ 0.025 -0.025]</span>
<a id="__codelineno-0-3067" name="__codelineno-0-3067"></a><span class="sd">           [ 0.075 -0.025]</span>
<a id="__codelineno-0-3068" name="__codelineno-0-3068"></a><span class="sd">           [ 0.125 -0.025]</span>
<a id="__codelineno-0-3069" name="__codelineno-0-3069"></a><span class="sd">           [ 0.025 -0.075]</span>
<a id="__codelineno-0-3070" name="__codelineno-0-3070"></a><span class="sd">           [ 0.075 -0.075]</span>
<a id="__codelineno-0-3071" name="__codelineno-0-3071"></a><span class="sd">           [ 0.125 -0.075]</span>
<a id="__codelineno-0-3072" name="__codelineno-0-3072"></a><span class="sd">           [ 0.025 -0.125]</span>
<a id="__codelineno-0-3073" name="__codelineno-0-3073"></a><span class="sd">           [ 0.075 -0.125]</span>
<a id="__codelineno-0-3074" name="__codelineno-0-3074"></a><span class="sd">           [ 0.125 -0.125]]</span>
<a id="__codelineno-0-3075" name="__codelineno-0-3075"></a>
<a id="__codelineno-0-3076" name="__codelineno-0-3076"></a><span class="sd">          ```</span>
<a id="__codelineno-0-3077" name="__codelineno-0-3077"></a>
<a id="__codelineno-0-3078" name="__codelineno-0-3078"></a><span class="sd">        - Get the coordinates of the top left corner of cells inside the domain.</span>
<a id="__codelineno-0-3079" name="__codelineno-0-3079"></a>
<a id="__codelineno-0-3080" name="__codelineno-0-3080"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-3081" name="__codelineno-0-3081"></a><span class="sd">          &gt;&gt;&gt; coords = dataset.get_cell_coords(location=&quot;corner&quot;)</span>
<a id="__codelineno-0-3082" name="__codelineno-0-3082"></a><span class="sd">          &gt;&gt;&gt; print(coords)</span>
<a id="__codelineno-0-3083" name="__codelineno-0-3083"></a><span class="sd">          [[ 0.    0.  ]</span>
<a id="__codelineno-0-3084" name="__codelineno-0-3084"></a><span class="sd">           [ 0.05  0.  ]</span>
<a id="__codelineno-0-3085" name="__codelineno-0-3085"></a><span class="sd">           [ 0.1   0.  ]</span>
<a id="__codelineno-0-3086" name="__codelineno-0-3086"></a><span class="sd">           [ 0.   -0.05]</span>
<a id="__codelineno-0-3087" name="__codelineno-0-3087"></a><span class="sd">           [ 0.05 -0.05]</span>
<a id="__codelineno-0-3088" name="__codelineno-0-3088"></a><span class="sd">           [ 0.1  -0.05]</span>
<a id="__codelineno-0-3089" name="__codelineno-0-3089"></a><span class="sd">           [ 0.   -0.1 ]</span>
<a id="__codelineno-0-3090" name="__codelineno-0-3090"></a><span class="sd">           [ 0.05 -0.1 ]</span>
<a id="__codelineno-0-3091" name="__codelineno-0-3091"></a><span class="sd">           [ 0.1  -0.1 ]]</span>
<a id="__codelineno-0-3092" name="__codelineno-0-3092"></a>
<a id="__codelineno-0-3093" name="__codelineno-0-3093"></a><span class="sd">          ```</span>
<a id="__codelineno-0-3094" name="__codelineno-0-3094"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-3095" name="__codelineno-0-3095"></a>    <span class="c1"># check the location parameter</span>
<a id="__codelineno-0-3096" name="__codelineno-0-3096"></a>    <span class="n">location</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
<a id="__codelineno-0-3097" name="__codelineno-0-3097"></a>    <span class="k">if</span> <span class="n">location</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="s2">&quot;corner&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-3098" name="__codelineno-0-3098"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-3099" name="__codelineno-0-3099"></a>            <span class="s2">&quot;The location parameter can have one of these values: &#39;center&#39;, &#39;corner&#39;, &quot;</span>
<a id="__codelineno-0-3100" name="__codelineno-0-3100"></a>            <span class="sa">f</span><span class="s2">&quot;but the value: </span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s2"> is given.&quot;</span>
<a id="__codelineno-0-3101" name="__codelineno-0-3101"></a>        <span class="p">)</span>
<a id="__codelineno-0-3102" name="__codelineno-0-3102"></a>
<a id="__codelineno-0-3103" name="__codelineno-0-3103"></a>    <span class="k">if</span> <span class="n">location</span> <span class="o">==</span> <span class="s2">&quot;center&quot;</span><span class="p">:</span>
<a id="__codelineno-0-3104" name="__codelineno-0-3104"></a>        <span class="c1"># Adding 0.5*cell size to get the center</span>
<a id="__codelineno-0-3105" name="__codelineno-0-3105"></a>        <span class="n">add_value</span> <span class="o">=</span> <span class="mf">0.5</span>
<a id="__codelineno-0-3106" name="__codelineno-0-3106"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3107" name="__codelineno-0-3107"></a>        <span class="n">add_value</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-3108" name="__codelineno-0-3108"></a>    <span class="c1"># Getting data for the whole grid</span>
<a id="__codelineno-0-3109" name="__codelineno-0-3109"></a>    <span class="p">(</span>
<a id="__codelineno-0-3110" name="__codelineno-0-3110"></a>        <span class="n">x_init</span><span class="p">,</span>
<a id="__codelineno-0-3111" name="__codelineno-0-3111"></a>        <span class="n">cell_size_x</span><span class="p">,</span>
<a id="__codelineno-0-3112" name="__codelineno-0-3112"></a>        <span class="n">xy_span</span><span class="p">,</span>
<a id="__codelineno-0-3113" name="__codelineno-0-3113"></a>        <span class="n">y_init</span><span class="p">,</span>
<a id="__codelineno-0-3114" name="__codelineno-0-3114"></a>        <span class="n">yy_span</span><span class="p">,</span>
<a id="__codelineno-0-3115" name="__codelineno-0-3115"></a>        <span class="n">cell_size_y</span><span class="p">,</span>
<a id="__codelineno-0-3116" name="__codelineno-0-3116"></a>    <span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span>
<a id="__codelineno-0-3117" name="__codelineno-0-3117"></a>    <span class="k">if</span> <span class="n">cell_size_x</span> <span class="o">!=</span> <span class="n">cell_size_y</span><span class="p">:</span>
<a id="__codelineno-0-3118" name="__codelineno-0-3118"></a>        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">cell_size_x</span><span class="p">)</span> <span class="o">!=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">cell_size_y</span><span class="p">):</span>
<a id="__codelineno-0-3119" name="__codelineno-0-3119"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-3120" name="__codelineno-0-3120"></a>                <span class="sa">f</span><span class="s2">&quot;The given raster does not have a square cells, the cell size is </span><span class="si">{</span><span class="n">cell_size_x</span><span class="si">}</span><span class="s2">*</span><span class="si">{</span><span class="n">cell_size_y</span><span class="si">}</span><span class="s2"> &quot;</span>
<a id="__codelineno-0-3121" name="__codelineno-0-3121"></a>            <span class="p">)</span>
<a id="__codelineno-0-3122" name="__codelineno-0-3122"></a>
<a id="__codelineno-0-3123" name="__codelineno-0-3123"></a>    <span class="c1"># data in the array</span>
<a id="__codelineno-0-3124" name="__codelineno-0-3124"></a>    <span class="n">no_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<a id="__codelineno-0-3125" name="__codelineno-0-3125"></a>    <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-3126" name="__codelineno-0-3126"></a>    <span class="k">if</span> <span class="n">mask</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">no_val</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
<a id="__codelineno-0-3127" name="__codelineno-0-3127"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-3128" name="__codelineno-0-3128"></a>            <span class="s2">&quot;The no data value does not exist in the band, so all the cells will be considered, and the &quot;</span>
<a id="__codelineno-0-3129" name="__codelineno-0-3129"></a>            <span class="s2">&quot;mask will not be considered.&quot;</span>
<a id="__codelineno-0-3130" name="__codelineno-0-3130"></a>        <span class="p">)</span>
<a id="__codelineno-0-3131" name="__codelineno-0-3131"></a>
<a id="__codelineno-0-3132" name="__codelineno-0-3132"></a>    <span class="k">if</span> <span class="n">mask</span><span class="p">:</span>
<a id="__codelineno-0-3133" name="__codelineno-0-3133"></a>        <span class="n">mask</span> <span class="o">=</span> <span class="p">[</span><span class="n">no_val</span><span class="p">]</span>
<a id="__codelineno-0-3134" name="__codelineno-0-3134"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3135" name="__codelineno-0-3135"></a>        <span class="n">mask</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-3136" name="__codelineno-0-3136"></a>    <span class="n">indices</span> <span class="o">=</span> <span class="n">get_indices2</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
<a id="__codelineno-0-3137" name="__codelineno-0-3137"></a>
<a id="__codelineno-0-3138" name="__codelineno-0-3138"></a>    <span class="c1"># exclude the no_data_values cells.</span>
<a id="__codelineno-0-3139" name="__codelineno-0-3139"></a>    <span class="n">f1</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">]</span>
<a id="__codelineno-0-3140" name="__codelineno-0-3140"></a>    <span class="n">f2</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">]</span>
<a id="__codelineno-0-3141" name="__codelineno-0-3141"></a>    <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">x_init</span> <span class="o">+</span> <span class="n">cell_size_x</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">add_value</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">f2</span><span class="p">]</span>
<a id="__codelineno-0-3142" name="__codelineno-0-3142"></a>    <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">y_init</span> <span class="o">+</span> <span class="n">cell_size_y</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">add_value</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">f1</span><span class="p">]</span>
<a id="__codelineno-0-3143" name="__codelineno-0-3143"></a>    <span class="n">coords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)))</span>
<a id="__codelineno-0-3144" name="__codelineno-0-3144"></a>
<a id="__codelineno-0-3145" name="__codelineno-0-3145"></a>    <span class="k">return</span> <span class="n">coords</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.get_cell_polygons" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.get_cell_polygons" class="toclink">
            <code class="highlight language-python"><span class="n">get_cell_polygons</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.get_cell_polygons" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Get a polygon shapely geometry for the raster cells.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>mask</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True to get the polygons of the cells inside the domain.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>GeoDataFrame</code></td>            <td>
                  <code><span title="geopandas.geodataframe.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>With two columns, geometry, and id.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create <code>Dataset</code> consists of 1 band, 3 rows, 3 columns, at the point lon/lat (0, 0).</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>Get the coordinates of the center of cells inside the domain.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">gdf</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_cell_polygons</span><span class="p">()</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>                                       <span class="n">geometry</span>  <span class="nb">id</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="mi">0</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mi">0</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.05</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.05</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mi">0</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">))</span>   <span class="mi">0</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="mi">1</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.05</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.05</span> <span class="o">-</span><span class="mf">0.05</span><span class="o">...</span>   <span class="mi">1</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="mi">2</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.1</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.15</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.15</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.1</span> <span class="o">-</span><span class="mf">0.05</span><span class="o">...</span>   <span class="mi">2</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="mi">3</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mi">0</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.05</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.05</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span> <span class="o">-</span><span class="mf">0.</span><span class="o">..</span>   <span class="mi">3</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="mi">4</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.05</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.1</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.1</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="o">...</span>   <span class="mi">4</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="mi">5</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.1</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.15</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.15</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.</span><span class="o">...</span>   <span class="mi">5</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="mi">6</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mi">0</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span> <span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="mi">0</span> <span class="o">-</span><span class="mf">0.</span><span class="o">...</span>   <span class="mi">6</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="mi">7</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.05</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span> <span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.05</span><span class="o">...</span>   <span class="mi">7</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="mi">8</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.1</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.15</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.15</span> <span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.1</span><span class="o">...</span>   <span class="mi">8</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">gdf</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="o">&lt;</span><span class="n">Axes</span><span class="p">:</span> <span class="o">&gt;</span>
</code></pre></div>
        <p><img alt="get_cell_polygons" src="../../_images/dataset/get_cell_polygons.png" /></p>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3147">3147</a></span>
<span class="normal"><a href="#__codelineno-0-3148">3148</a></span>
<span class="normal"><a href="#__codelineno-0-3149">3149</a></span>
<span class="normal"><a href="#__codelineno-0-3150">3150</a></span>
<span class="normal"><a href="#__codelineno-0-3151">3151</a></span>
<span class="normal"><a href="#__codelineno-0-3152">3152</a></span>
<span class="normal"><a href="#__codelineno-0-3153">3153</a></span>
<span class="normal"><a href="#__codelineno-0-3154">3154</a></span>
<span class="normal"><a href="#__codelineno-0-3155">3155</a></span>
<span class="normal"><a href="#__codelineno-0-3156">3156</a></span>
<span class="normal"><a href="#__codelineno-0-3157">3157</a></span>
<span class="normal"><a href="#__codelineno-0-3158">3158</a></span>
<span class="normal"><a href="#__codelineno-0-3159">3159</a></span>
<span class="normal"><a href="#__codelineno-0-3160">3160</a></span>
<span class="normal"><a href="#__codelineno-0-3161">3161</a></span>
<span class="normal"><a href="#__codelineno-0-3162">3162</a></span>
<span class="normal"><a href="#__codelineno-0-3163">3163</a></span>
<span class="normal"><a href="#__codelineno-0-3164">3164</a></span>
<span class="normal"><a href="#__codelineno-0-3165">3165</a></span>
<span class="normal"><a href="#__codelineno-0-3166">3166</a></span>
<span class="normal"><a href="#__codelineno-0-3167">3167</a></span>
<span class="normal"><a href="#__codelineno-0-3168">3168</a></span>
<span class="normal"><a href="#__codelineno-0-3169">3169</a></span>
<span class="normal"><a href="#__codelineno-0-3170">3170</a></span>
<span class="normal"><a href="#__codelineno-0-3171">3171</a></span>
<span class="normal"><a href="#__codelineno-0-3172">3172</a></span>
<span class="normal"><a href="#__codelineno-0-3173">3173</a></span>
<span class="normal"><a href="#__codelineno-0-3174">3174</a></span>
<span class="normal"><a href="#__codelineno-0-3175">3175</a></span>
<span class="normal"><a href="#__codelineno-0-3176">3176</a></span>
<span class="normal"><a href="#__codelineno-0-3177">3177</a></span>
<span class="normal"><a href="#__codelineno-0-3178">3178</a></span>
<span class="normal"><a href="#__codelineno-0-3179">3179</a></span>
<span class="normal"><a href="#__codelineno-0-3180">3180</a></span>
<span class="normal"><a href="#__codelineno-0-3181">3181</a></span>
<span class="normal"><a href="#__codelineno-0-3182">3182</a></span>
<span class="normal"><a href="#__codelineno-0-3183">3183</a></span>
<span class="normal"><a href="#__codelineno-0-3184">3184</a></span>
<span class="normal"><a href="#__codelineno-0-3185">3185</a></span>
<span class="normal"><a href="#__codelineno-0-3186">3186</a></span>
<span class="normal"><a href="#__codelineno-0-3187">3187</a></span>
<span class="normal"><a href="#__codelineno-0-3188">3188</a></span>
<span class="normal"><a href="#__codelineno-0-3189">3189</a></span>
<span class="normal"><a href="#__codelineno-0-3190">3190</a></span>
<span class="normal"><a href="#__codelineno-0-3191">3191</a></span>
<span class="normal"><a href="#__codelineno-0-3192">3192</a></span>
<span class="normal"><a href="#__codelineno-0-3193">3193</a></span>
<span class="normal"><a href="#__codelineno-0-3194">3194</a></span>
<span class="normal"><a href="#__codelineno-0-3195">3195</a></span>
<span class="normal"><a href="#__codelineno-0-3196">3196</a></span>
<span class="normal"><a href="#__codelineno-0-3197">3197</a></span>
<span class="normal"><a href="#__codelineno-0-3198">3198</a></span>
<span class="normal"><a href="#__codelineno-0-3199">3199</a></span>
<span class="normal"><a href="#__codelineno-0-3200">3200</a></span>
<span class="normal"><a href="#__codelineno-0-3201">3201</a></span>
<span class="normal"><a href="#__codelineno-0-3202">3202</a></span>
<span class="normal"><a href="#__codelineno-0-3203">3203</a></span>
<span class="normal"><a href="#__codelineno-0-3204">3204</a></span>
<span class="normal"><a href="#__codelineno-0-3205">3205</a></span>
<span class="normal"><a href="#__codelineno-0-3206">3206</a></span>
<span class="normal"><a href="#__codelineno-0-3207">3207</a></span>
<span class="normal"><a href="#__codelineno-0-3208">3208</a></span>
<span class="normal"><a href="#__codelineno-0-3209">3209</a></span>
<span class="normal"><a href="#__codelineno-0-3210">3210</a></span>
<span class="normal"><a href="#__codelineno-0-3211">3211</a></span>
<span class="normal"><a href="#__codelineno-0-3212">3212</a></span>
<span class="normal"><a href="#__codelineno-0-3213">3213</a></span>
<span class="normal"><a href="#__codelineno-0-3214">3214</a></span>
<span class="normal"><a href="#__codelineno-0-3215">3215</a></span>
<span class="normal"><a href="#__codelineno-0-3216">3216</a></span>
<span class="normal"><a href="#__codelineno-0-3217">3217</a></span>
<span class="normal"><a href="#__codelineno-0-3218">3218</a></span>
<span class="normal"><a href="#__codelineno-0-3219">3219</a></span>
<span class="normal"><a href="#__codelineno-0-3220">3220</a></span>
<span class="normal"><a href="#__codelineno-0-3221">3221</a></span>
<span class="normal"><a href="#__codelineno-0-3222">3222</a></span>
<span class="normal"><a href="#__codelineno-0-3223">3223</a></span>
<span class="normal"><a href="#__codelineno-0-3224">3224</a></span>
<span class="normal"><a href="#__codelineno-0-3225">3225</a></span>
<span class="normal"><a href="#__codelineno-0-3226">3226</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-3147" name="__codelineno-0-3147"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_cell_polygons</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GeoDataFrame</span><span class="p">:</span>
<a id="__codelineno-0-3148" name="__codelineno-0-3148"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a polygon shapely geometry for the raster cells.</span>
<a id="__codelineno-0-3149" name="__codelineno-0-3149"></a>
<a id="__codelineno-0-3150" name="__codelineno-0-3150"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-3151" name="__codelineno-0-3151"></a><span class="sd">        mask (bool):</span>
<a id="__codelineno-0-3152" name="__codelineno-0-3152"></a><span class="sd">            True to get the polygons of the cells inside the domain.</span>
<a id="__codelineno-0-3153" name="__codelineno-0-3153"></a>
<a id="__codelineno-0-3154" name="__codelineno-0-3154"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-3155" name="__codelineno-0-3155"></a><span class="sd">        GeoDataFrame:</span>
<a id="__codelineno-0-3156" name="__codelineno-0-3156"></a><span class="sd">            With two columns, geometry, and id.</span>
<a id="__codelineno-0-3157" name="__codelineno-0-3157"></a>
<a id="__codelineno-0-3158" name="__codelineno-0-3158"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-3159" name="__codelineno-0-3159"></a><span class="sd">        - Create `Dataset` consists of 1 band, 3 rows, 3 columns, at the point lon/lat (0, 0).</span>
<a id="__codelineno-0-3160" name="__codelineno-0-3160"></a>
<a id="__codelineno-0-3161" name="__codelineno-0-3161"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-3162" name="__codelineno-0-3162"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-3163" name="__codelineno-0-3163"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.randint(1,3, size=(3, 3))</span>
<a id="__codelineno-0-3164" name="__codelineno-0-3164"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-3165" name="__codelineno-0-3165"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-3166" name="__codelineno-0-3166"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-3167" name="__codelineno-0-3167"></a>
<a id="__codelineno-0-3168" name="__codelineno-0-3168"></a><span class="sd">          ```</span>
<a id="__codelineno-0-3169" name="__codelineno-0-3169"></a>
<a id="__codelineno-0-3170" name="__codelineno-0-3170"></a><span class="sd">        - Get the coordinates of the center of cells inside the domain.</span>
<a id="__codelineno-0-3171" name="__codelineno-0-3171"></a>
<a id="__codelineno-0-3172" name="__codelineno-0-3172"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-3173" name="__codelineno-0-3173"></a><span class="sd">          &gt;&gt;&gt; gdf = dataset.get_cell_polygons()</span>
<a id="__codelineno-0-3174" name="__codelineno-0-3174"></a><span class="sd">          &gt;&gt;&gt; print(gdf)</span>
<a id="__codelineno-0-3175" name="__codelineno-0-3175"></a><span class="sd">                                                 geometry  id</span>
<a id="__codelineno-0-3176" name="__codelineno-0-3176"></a><span class="sd">          0  POLYGON ((0 0, 0.05 0, 0.05 -0.05, 0 -0.05, 0 0))   0</span>
<a id="__codelineno-0-3177" name="__codelineno-0-3177"></a><span class="sd">          1  POLYGON ((0.05 0, 0.1 0, 0.1 -0.05, 0.05 -0.05...   1</span>
<a id="__codelineno-0-3178" name="__codelineno-0-3178"></a><span class="sd">          2  POLYGON ((0.1 0, 0.15 0, 0.15 -0.05, 0.1 -0.05...   2</span>
<a id="__codelineno-0-3179" name="__codelineno-0-3179"></a><span class="sd">          3  POLYGON ((0 -0.05, 0.05 -0.05, 0.05 -0.1, 0 -0...   3</span>
<a id="__codelineno-0-3180" name="__codelineno-0-3180"></a><span class="sd">          4  POLYGON ((0.05 -0.05, 0.1 -0.05, 0.1 -0.1, 0.0...   4</span>
<a id="__codelineno-0-3181" name="__codelineno-0-3181"></a><span class="sd">          5  POLYGON ((0.1 -0.05, 0.15 -0.05, 0.15 -0.1, 0....   5</span>
<a id="__codelineno-0-3182" name="__codelineno-0-3182"></a><span class="sd">          6  POLYGON ((0 -0.1, 0.05 -0.1, 0.05 -0.15, 0 -0....   6</span>
<a id="__codelineno-0-3183" name="__codelineno-0-3183"></a><span class="sd">          7  POLYGON ((0.05 -0.1, 0.1 -0.1, 0.1 -0.15, 0.05...   7</span>
<a id="__codelineno-0-3184" name="__codelineno-0-3184"></a><span class="sd">          8  POLYGON ((0.1 -0.1, 0.15 -0.1, 0.15 -0.15, 0.1...   8</span>
<a id="__codelineno-0-3185" name="__codelineno-0-3185"></a><span class="sd">          &gt;&gt;&gt; fig, ax = dataset.plot()</span>
<a id="__codelineno-0-3186" name="__codelineno-0-3186"></a><span class="sd">          &gt;&gt;&gt; gdf.plot(ax=ax, facecolor=&#39;none&#39;, edgecolor=&quot;gray&quot;, linewidth=2)</span>
<a id="__codelineno-0-3187" name="__codelineno-0-3187"></a><span class="sd">          &lt;Axes: &gt;</span>
<a id="__codelineno-0-3188" name="__codelineno-0-3188"></a>
<a id="__codelineno-0-3189" name="__codelineno-0-3189"></a><span class="sd">          ```</span>
<a id="__codelineno-0-3190" name="__codelineno-0-3190"></a>
<a id="__codelineno-0-3191" name="__codelineno-0-3191"></a><span class="sd">    ![get_cell_polygons](./../_images/dataset/get_cell_polygons.png)</span>
<a id="__codelineno-0-3192" name="__codelineno-0-3192"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-3193" name="__codelineno-0-3193"></a>    <span class="n">coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cell_coords</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="s2">&quot;corner&quot;</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
<a id="__codelineno-0-3194" name="__codelineno-0-3194"></a>    <span class="n">cell_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-3195" name="__codelineno-0-3195"></a>    <span class="n">epsg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_epsg</span><span class="p">()</span>
<a id="__codelineno-0-3196" name="__codelineno-0-3196"></a>    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">coords</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">4</span><span class="p">))</span>
<a id="__codelineno-0-3197" name="__codelineno-0-3197"></a>    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">coords</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">4</span><span class="p">))</span>
<a id="__codelineno-0-3198" name="__codelineno-0-3198"></a>    <span class="c1"># fill the top left corner point</span>
<a id="__codelineno-0-3199" name="__codelineno-0-3199"></a>    <span class="n">x</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-3200" name="__codelineno-0-3200"></a>    <span class="n">y</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-3201" name="__codelineno-0-3201"></a>    <span class="c1"># fill the top right</span>
<a id="__codelineno-0-3202" name="__codelineno-0-3202"></a>    <span class="n">x</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">cell_size</span>
<a id="__codelineno-0-3203" name="__codelineno-0-3203"></a>    <span class="n">y</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-3204" name="__codelineno-0-3204"></a>    <span class="c1"># fill the bottom right</span>
<a id="__codelineno-0-3205" name="__codelineno-0-3205"></a>    <span class="n">x</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">cell_size</span>
<a id="__codelineno-0-3206" name="__codelineno-0-3206"></a>    <span class="n">y</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">cell_size</span>
<a id="__codelineno-0-3207" name="__codelineno-0-3207"></a>
<a id="__codelineno-0-3208" name="__codelineno-0-3208"></a>    <span class="c1"># fill the bottom left</span>
<a id="__codelineno-0-3209" name="__codelineno-0-3209"></a>    <span class="n">x</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-3210" name="__codelineno-0-3210"></a>    <span class="n">y</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">cell_size</span>
<a id="__codelineno-0-3211" name="__codelineno-0-3211"></a>
<a id="__codelineno-0-3212" name="__codelineno-0-3212"></a>    <span class="n">coords_tuples</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">x</span><span class="p">[:,</span> <span class="n">i</span><span class="p">],</span> <span class="n">y</span><span class="p">[:,</span> <span class="n">i</span><span class="p">]))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span>
<a id="__codelineno-0-3213" name="__codelineno-0-3213"></a>    <span class="n">polys_coords</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-3214" name="__codelineno-0-3214"></a>        <span class="p">(</span>
<a id="__codelineno-0-3215" name="__codelineno-0-3215"></a>            <span class="n">coords_tuples</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">],</span>
<a id="__codelineno-0-3216" name="__codelineno-0-3216"></a>            <span class="n">coords_tuples</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">],</span>
<a id="__codelineno-0-3217" name="__codelineno-0-3217"></a>            <span class="n">coords_tuples</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="n">i</span><span class="p">],</span>
<a id="__codelineno-0-3218" name="__codelineno-0-3218"></a>            <span class="n">coords_tuples</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="n">i</span><span class="p">],</span>
<a id="__codelineno-0-3219" name="__codelineno-0-3219"></a>        <span class="p">)</span>
<a id="__codelineno-0-3220" name="__codelineno-0-3220"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<a id="__codelineno-0-3221" name="__codelineno-0-3221"></a>    <span class="p">]</span>
<a id="__codelineno-0-3222" name="__codelineno-0-3222"></a>    <span class="n">polygons</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">FeatureCollection</span><span class="o">.</span><span class="n">create_polygon</span><span class="p">,</span> <span class="n">polys_coords</span><span class="p">))</span>
<a id="__codelineno-0-3223" name="__codelineno-0-3223"></a>    <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">geometry</span><span class="o">=</span><span class="n">polygons</span><span class="p">)</span>
<a id="__codelineno-0-3224" name="__codelineno-0-3224"></a>    <span class="n">gdf</span><span class="o">.</span><span class="n">set_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="n">epsg</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-3225" name="__codelineno-0-3225"></a>    <span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">index</span>
<a id="__codelineno-0-3226" name="__codelineno-0-3226"></a>    <span class="k">return</span> <span class="n">gdf</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.get_cell_points" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.get_cell_points" class="toclink">
            <code class="highlight language-python"><span class="n">get_cell_points</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.get_cell_points" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Get a point shapely geometry for the raster cells center point.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>location</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Location of the point, ["corner", "center"]. Default is "center".</p>
              </div>
            </td>
            <td>
                  <code>&#39;center&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>mask</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True to get the polygons of the cells inside the domain.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>GeoDataFrame</code></td>            <td>
                  <code><span title="geopandas.geodataframe.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>With two columns, geometry, and id.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create <code>Dataset</code> consists of 1 band, 3 rows, 3 columns, at the point lon/lat (0, 0).</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>Get the coordinates of the center of cells inside the domain.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">gdf</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_cell_points</span><span class="p">()</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>               <span class="n">geometry</span>  <span class="nb">id</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="mi">0</span>  <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.025</span> <span class="o">-</span><span class="mf">0.025</span><span class="p">)</span>   <span class="mi">0</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="mi">1</span>  <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.075</span> <span class="o">-</span><span class="mf">0.025</span><span class="p">)</span>   <span class="mi">1</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="mi">2</span>  <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.125</span> <span class="o">-</span><span class="mf">0.025</span><span class="p">)</span>   <span class="mi">2</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="mi">3</span>  <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.025</span> <span class="o">-</span><span class="mf">0.075</span><span class="p">)</span>   <span class="mi">3</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="mi">4</span>  <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.075</span> <span class="o">-</span><span class="mf">0.075</span><span class="p">)</span>   <span class="mi">4</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="mi">5</span>  <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.125</span> <span class="o">-</span><span class="mf">0.075</span><span class="p">)</span>   <span class="mi">5</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="mi">6</span>  <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.025</span> <span class="o">-</span><span class="mf">0.125</span><span class="p">)</span>   <span class="mi">6</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="mi">7</span>  <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.075</span> <span class="o">-</span><span class="mf">0.125</span><span class="p">)</span>   <span class="mi">7</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="mi">8</span>  <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.125</span> <span class="o">-</span><span class="mf">0.125</span><span class="p">)</span>   <span class="mi">8</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">gdf</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="o">&lt;</span><span class="n">Axes</span><span class="p">:</span> <span class="o">&gt;</span>
</code></pre></div>
<p><img alt="get_cell_points" src="../../_images/dataset/get_cell_points.png" /></p>
<ul>
<li>Get the coordinates of the top left corner of cells inside the domain.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">gdf</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_cell_points</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="s2">&quot;corner&quot;</span><span class="p">)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>            <span class="n">geometry</span>  <span class="nb">id</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="mi">0</span>         <span class="n">POINT</span> <span class="p">(</span><span class="mi">0</span> <span class="mi">0</span><span class="p">)</span>   <span class="mi">0</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="mi">1</span>      <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.05</span> <span class="mi">0</span><span class="p">)</span>   <span class="mi">1</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="mi">2</span>       <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.1</span> <span class="mi">0</span><span class="p">)</span>   <span class="mi">2</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="mi">3</span>     <span class="n">POINT</span> <span class="p">(</span><span class="mi">0</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">)</span>   <span class="mi">3</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="mi">4</span>  <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.05</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">)</span>   <span class="mi">4</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="mi">5</span>   <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.1</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">)</span>   <span class="mi">5</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="mi">6</span>      <span class="n">POINT</span> <span class="p">(</span><span class="mi">0</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">)</span>   <span class="mi">6</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="mi">7</span>   <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.05</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">)</span>   <span class="mi">7</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="mi">8</span>    <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.1</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">)</span>   <span class="mi">8</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">gdf</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="o">&lt;</span><span class="n">Axes</span><span class="p">:</span> <span class="o">&gt;</span>
</code></pre></div>
<p><img alt="get_cell_points-corner" src="../../_images/dataset/get_cell_points-corner.png" /></p>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3228">3228</a></span>
<span class="normal"><a href="#__codelineno-0-3229">3229</a></span>
<span class="normal"><a href="#__codelineno-0-3230">3230</a></span>
<span class="normal"><a href="#__codelineno-0-3231">3231</a></span>
<span class="normal"><a href="#__codelineno-0-3232">3232</a></span>
<span class="normal"><a href="#__codelineno-0-3233">3233</a></span>
<span class="normal"><a href="#__codelineno-0-3234">3234</a></span>
<span class="normal"><a href="#__codelineno-0-3235">3235</a></span>
<span class="normal"><a href="#__codelineno-0-3236">3236</a></span>
<span class="normal"><a href="#__codelineno-0-3237">3237</a></span>
<span class="normal"><a href="#__codelineno-0-3238">3238</a></span>
<span class="normal"><a href="#__codelineno-0-3239">3239</a></span>
<span class="normal"><a href="#__codelineno-0-3240">3240</a></span>
<span class="normal"><a href="#__codelineno-0-3241">3241</a></span>
<span class="normal"><a href="#__codelineno-0-3242">3242</a></span>
<span class="normal"><a href="#__codelineno-0-3243">3243</a></span>
<span class="normal"><a href="#__codelineno-0-3244">3244</a></span>
<span class="normal"><a href="#__codelineno-0-3245">3245</a></span>
<span class="normal"><a href="#__codelineno-0-3246">3246</a></span>
<span class="normal"><a href="#__codelineno-0-3247">3247</a></span>
<span class="normal"><a href="#__codelineno-0-3248">3248</a></span>
<span class="normal"><a href="#__codelineno-0-3249">3249</a></span>
<span class="normal"><a href="#__codelineno-0-3250">3250</a></span>
<span class="normal"><a href="#__codelineno-0-3251">3251</a></span>
<span class="normal"><a href="#__codelineno-0-3252">3252</a></span>
<span class="normal"><a href="#__codelineno-0-3253">3253</a></span>
<span class="normal"><a href="#__codelineno-0-3254">3254</a></span>
<span class="normal"><a href="#__codelineno-0-3255">3255</a></span>
<span class="normal"><a href="#__codelineno-0-3256">3256</a></span>
<span class="normal"><a href="#__codelineno-0-3257">3257</a></span>
<span class="normal"><a href="#__codelineno-0-3258">3258</a></span>
<span class="normal"><a href="#__codelineno-0-3259">3259</a></span>
<span class="normal"><a href="#__codelineno-0-3260">3260</a></span>
<span class="normal"><a href="#__codelineno-0-3261">3261</a></span>
<span class="normal"><a href="#__codelineno-0-3262">3262</a></span>
<span class="normal"><a href="#__codelineno-0-3263">3263</a></span>
<span class="normal"><a href="#__codelineno-0-3264">3264</a></span>
<span class="normal"><a href="#__codelineno-0-3265">3265</a></span>
<span class="normal"><a href="#__codelineno-0-3266">3266</a></span>
<span class="normal"><a href="#__codelineno-0-3267">3267</a></span>
<span class="normal"><a href="#__codelineno-0-3268">3268</a></span>
<span class="normal"><a href="#__codelineno-0-3269">3269</a></span>
<span class="normal"><a href="#__codelineno-0-3270">3270</a></span>
<span class="normal"><a href="#__codelineno-0-3271">3271</a></span>
<span class="normal"><a href="#__codelineno-0-3272">3272</a></span>
<span class="normal"><a href="#__codelineno-0-3273">3273</a></span>
<span class="normal"><a href="#__codelineno-0-3274">3274</a></span>
<span class="normal"><a href="#__codelineno-0-3275">3275</a></span>
<span class="normal"><a href="#__codelineno-0-3276">3276</a></span>
<span class="normal"><a href="#__codelineno-0-3277">3277</a></span>
<span class="normal"><a href="#__codelineno-0-3278">3278</a></span>
<span class="normal"><a href="#__codelineno-0-3279">3279</a></span>
<span class="normal"><a href="#__codelineno-0-3280">3280</a></span>
<span class="normal"><a href="#__codelineno-0-3281">3281</a></span>
<span class="normal"><a href="#__codelineno-0-3282">3282</a></span>
<span class="normal"><a href="#__codelineno-0-3283">3283</a></span>
<span class="normal"><a href="#__codelineno-0-3284">3284</a></span>
<span class="normal"><a href="#__codelineno-0-3285">3285</a></span>
<span class="normal"><a href="#__codelineno-0-3286">3286</a></span>
<span class="normal"><a href="#__codelineno-0-3287">3287</a></span>
<span class="normal"><a href="#__codelineno-0-3288">3288</a></span>
<span class="normal"><a href="#__codelineno-0-3289">3289</a></span>
<span class="normal"><a href="#__codelineno-0-3290">3290</a></span>
<span class="normal"><a href="#__codelineno-0-3291">3291</a></span>
<span class="normal"><a href="#__codelineno-0-3292">3292</a></span>
<span class="normal"><a href="#__codelineno-0-3293">3293</a></span>
<span class="normal"><a href="#__codelineno-0-3294">3294</a></span>
<span class="normal"><a href="#__codelineno-0-3295">3295</a></span>
<span class="normal"><a href="#__codelineno-0-3296">3296</a></span>
<span class="normal"><a href="#__codelineno-0-3297">3297</a></span>
<span class="normal"><a href="#__codelineno-0-3298">3298</a></span>
<span class="normal"><a href="#__codelineno-0-3299">3299</a></span>
<span class="normal"><a href="#__codelineno-0-3300">3300</a></span>
<span class="normal"><a href="#__codelineno-0-3301">3301</a></span>
<span class="normal"><a href="#__codelineno-0-3302">3302</a></span>
<span class="normal"><a href="#__codelineno-0-3303">3303</a></span>
<span class="normal"><a href="#__codelineno-0-3304">3304</a></span>
<span class="normal"><a href="#__codelineno-0-3305">3305</a></span>
<span class="normal"><a href="#__codelineno-0-3306">3306</a></span>
<span class="normal"><a href="#__codelineno-0-3307">3307</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-3228" name="__codelineno-0-3228"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_cell_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GeoDataFrame</span><span class="p">:</span>
<a id="__codelineno-0-3229" name="__codelineno-0-3229"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a point shapely geometry for the raster cells center point.</span>
<a id="__codelineno-0-3230" name="__codelineno-0-3230"></a>
<a id="__codelineno-0-3231" name="__codelineno-0-3231"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-3232" name="__codelineno-0-3232"></a><span class="sd">        location (str):</span>
<a id="__codelineno-0-3233" name="__codelineno-0-3233"></a><span class="sd">            Location of the point, [&quot;corner&quot;, &quot;center&quot;]. Default is &quot;center&quot;.</span>
<a id="__codelineno-0-3234" name="__codelineno-0-3234"></a><span class="sd">        mask (bool):</span>
<a id="__codelineno-0-3235" name="__codelineno-0-3235"></a><span class="sd">            True to get the polygons of the cells inside the domain.</span>
<a id="__codelineno-0-3236" name="__codelineno-0-3236"></a>
<a id="__codelineno-0-3237" name="__codelineno-0-3237"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-3238" name="__codelineno-0-3238"></a><span class="sd">        GeoDataFrame:</span>
<a id="__codelineno-0-3239" name="__codelineno-0-3239"></a><span class="sd">            With two columns, geometry, and id.</span>
<a id="__codelineno-0-3240" name="__codelineno-0-3240"></a>
<a id="__codelineno-0-3241" name="__codelineno-0-3241"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-3242" name="__codelineno-0-3242"></a><span class="sd">        - Create `Dataset` consists of 1 band, 3 rows, 3 columns, at the point lon/lat (0, 0).</span>
<a id="__codelineno-0-3243" name="__codelineno-0-3243"></a>
<a id="__codelineno-0-3244" name="__codelineno-0-3244"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-3245" name="__codelineno-0-3245"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-3246" name="__codelineno-0-3246"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.randint(1,3, size=(3, 3))</span>
<a id="__codelineno-0-3247" name="__codelineno-0-3247"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-3248" name="__codelineno-0-3248"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-3249" name="__codelineno-0-3249"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-3250" name="__codelineno-0-3250"></a>
<a id="__codelineno-0-3251" name="__codelineno-0-3251"></a><span class="sd">          ```</span>
<a id="__codelineno-0-3252" name="__codelineno-0-3252"></a>
<a id="__codelineno-0-3253" name="__codelineno-0-3253"></a><span class="sd">        - Get the coordinates of the center of cells inside the domain.</span>
<a id="__codelineno-0-3254" name="__codelineno-0-3254"></a>
<a id="__codelineno-0-3255" name="__codelineno-0-3255"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-3256" name="__codelineno-0-3256"></a><span class="sd">          &gt;&gt;&gt; gdf = dataset.get_cell_points()</span>
<a id="__codelineno-0-3257" name="__codelineno-0-3257"></a><span class="sd">          &gt;&gt;&gt; print(gdf)</span>
<a id="__codelineno-0-3258" name="__codelineno-0-3258"></a><span class="sd">                         geometry  id</span>
<a id="__codelineno-0-3259" name="__codelineno-0-3259"></a><span class="sd">          0  POINT (0.025 -0.025)   0</span>
<a id="__codelineno-0-3260" name="__codelineno-0-3260"></a><span class="sd">          1  POINT (0.075 -0.025)   1</span>
<a id="__codelineno-0-3261" name="__codelineno-0-3261"></a><span class="sd">          2  POINT (0.125 -0.025)   2</span>
<a id="__codelineno-0-3262" name="__codelineno-0-3262"></a><span class="sd">          3  POINT (0.025 -0.075)   3</span>
<a id="__codelineno-0-3263" name="__codelineno-0-3263"></a><span class="sd">          4  POINT (0.075 -0.075)   4</span>
<a id="__codelineno-0-3264" name="__codelineno-0-3264"></a><span class="sd">          5  POINT (0.125 -0.075)   5</span>
<a id="__codelineno-0-3265" name="__codelineno-0-3265"></a><span class="sd">          6  POINT (0.025 -0.125)   6</span>
<a id="__codelineno-0-3266" name="__codelineno-0-3266"></a><span class="sd">          7  POINT (0.075 -0.125)   7</span>
<a id="__codelineno-0-3267" name="__codelineno-0-3267"></a><span class="sd">          8  POINT (0.125 -0.125)   8</span>
<a id="__codelineno-0-3268" name="__codelineno-0-3268"></a><span class="sd">          &gt;&gt;&gt; fig, ax = dataset.plot()</span>
<a id="__codelineno-0-3269" name="__codelineno-0-3269"></a><span class="sd">          &gt;&gt;&gt; gdf.plot(ax=ax, facecolor=&#39;black&#39;, linewidth=2)</span>
<a id="__codelineno-0-3270" name="__codelineno-0-3270"></a><span class="sd">          &lt;Axes: &gt;</span>
<a id="__codelineno-0-3271" name="__codelineno-0-3271"></a>
<a id="__codelineno-0-3272" name="__codelineno-0-3272"></a><span class="sd">          ```</span>
<a id="__codelineno-0-3273" name="__codelineno-0-3273"></a>
<a id="__codelineno-0-3274" name="__codelineno-0-3274"></a><span class="sd">        ![get_cell_points](./../_images/dataset/get_cell_points.png)</span>
<a id="__codelineno-0-3275" name="__codelineno-0-3275"></a>
<a id="__codelineno-0-3276" name="__codelineno-0-3276"></a><span class="sd">        - Get the coordinates of the top left corner of cells inside the domain.</span>
<a id="__codelineno-0-3277" name="__codelineno-0-3277"></a>
<a id="__codelineno-0-3278" name="__codelineno-0-3278"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-3279" name="__codelineno-0-3279"></a><span class="sd">          &gt;&gt;&gt; gdf = dataset.get_cell_points(location=&quot;corner&quot;)</span>
<a id="__codelineno-0-3280" name="__codelineno-0-3280"></a><span class="sd">          &gt;&gt;&gt; print(gdf)</span>
<a id="__codelineno-0-3281" name="__codelineno-0-3281"></a><span class="sd">                      geometry  id</span>
<a id="__codelineno-0-3282" name="__codelineno-0-3282"></a><span class="sd">          0         POINT (0 0)   0</span>
<a id="__codelineno-0-3283" name="__codelineno-0-3283"></a><span class="sd">          1      POINT (0.05 0)   1</span>
<a id="__codelineno-0-3284" name="__codelineno-0-3284"></a><span class="sd">          2       POINT (0.1 0)   2</span>
<a id="__codelineno-0-3285" name="__codelineno-0-3285"></a><span class="sd">          3     POINT (0 -0.05)   3</span>
<a id="__codelineno-0-3286" name="__codelineno-0-3286"></a><span class="sd">          4  POINT (0.05 -0.05)   4</span>
<a id="__codelineno-0-3287" name="__codelineno-0-3287"></a><span class="sd">          5   POINT (0.1 -0.05)   5</span>
<a id="__codelineno-0-3288" name="__codelineno-0-3288"></a><span class="sd">          6      POINT (0 -0.1)   6</span>
<a id="__codelineno-0-3289" name="__codelineno-0-3289"></a><span class="sd">          7   POINT (0.05 -0.1)   7</span>
<a id="__codelineno-0-3290" name="__codelineno-0-3290"></a><span class="sd">          8    POINT (0.1 -0.1)   8</span>
<a id="__codelineno-0-3291" name="__codelineno-0-3291"></a><span class="sd">          &gt;&gt;&gt; fig, ax = dataset.plot()</span>
<a id="__codelineno-0-3292" name="__codelineno-0-3292"></a><span class="sd">          &gt;&gt;&gt; gdf.plot(ax=ax, facecolor=&#39;black&#39;, linewidth=4)</span>
<a id="__codelineno-0-3293" name="__codelineno-0-3293"></a><span class="sd">          &lt;Axes: &gt;</span>
<a id="__codelineno-0-3294" name="__codelineno-0-3294"></a>
<a id="__codelineno-0-3295" name="__codelineno-0-3295"></a><span class="sd">          ```</span>
<a id="__codelineno-0-3296" name="__codelineno-0-3296"></a>
<a id="__codelineno-0-3297" name="__codelineno-0-3297"></a><span class="sd">        ![get_cell_points-corner](./../_images/dataset/get_cell_points-corner.png)</span>
<a id="__codelineno-0-3298" name="__codelineno-0-3298"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-3299" name="__codelineno-0-3299"></a>    <span class="n">coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cell_coords</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
<a id="__codelineno-0-3300" name="__codelineno-0-3300"></a>    <span class="n">epsg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_epsg</span><span class="p">()</span>
<a id="__codelineno-0-3301" name="__codelineno-0-3301"></a>
<a id="__codelineno-0-3302" name="__codelineno-0-3302"></a>    <span class="n">coords_tuples</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">coords</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">coords</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]))</span>
<a id="__codelineno-0-3303" name="__codelineno-0-3303"></a>    <span class="n">points</span> <span class="o">=</span> <span class="n">FeatureCollection</span><span class="o">.</span><span class="n">create_point</span><span class="p">(</span><span class="n">coords_tuples</span><span class="p">)</span>
<a id="__codelineno-0-3304" name="__codelineno-0-3304"></a>    <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">geometry</span><span class="o">=</span><span class="n">points</span><span class="p">)</span>
<a id="__codelineno-0-3305" name="__codelineno-0-3305"></a>    <span class="n">gdf</span><span class="o">.</span><span class="n">set_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="n">epsg</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-3306" name="__codelineno-0-3306"></a>    <span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">index</span>
<a id="__codelineno-0-3307" name="__codelineno-0-3307"></a>    <span class="k">return</span> <span class="n">gdf</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.to_file" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.to_file" class="toclink">
            <code class="highlight language-python"><span class="n">to_file</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">tile_length</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">creation_options</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.to_file" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Save dataset to tiff file.</p>
<div class="highlight"><pre><span></span><code>`to_file` saves a raster to disk, the type of the driver (georiff/netcdf/ascii) will be implied from the
extension at the end of the given path.
</code></pre></div>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A path including the name of the dataset.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>band</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Band index, needed only in case of ascii drivers. Default is 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tile_length</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Length of the tiles in the driver. Default is 256.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>creation_options</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List[str], Default is None
List of strings that will be passed to the GDAL driver during the creation of the dataset.
i.e., ['PREDICTOR=2']</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create a Dataset with 4 bands, 5 rows, 5 columns, at the point lon/lat (0, 0):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">file_name</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
</code></pre></div>
<ul>
<li>Now save the dataset as a geotiff file:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;my-dataset.tif&quot;</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">file_name</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">my</span><span class="o">-</span><span class="n">dataset</span><span class="o">.</span><span class="n">tif</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3309">3309</a></span>
<span class="normal"><a href="#__codelineno-0-3310">3310</a></span>
<span class="normal"><a href="#__codelineno-0-3311">3311</a></span>
<span class="normal"><a href="#__codelineno-0-3312">3312</a></span>
<span class="normal"><a href="#__codelineno-0-3313">3313</a></span>
<span class="normal"><a href="#__codelineno-0-3314">3314</a></span>
<span class="normal"><a href="#__codelineno-0-3315">3315</a></span>
<span class="normal"><a href="#__codelineno-0-3316">3316</a></span>
<span class="normal"><a href="#__codelineno-0-3317">3317</a></span>
<span class="normal"><a href="#__codelineno-0-3318">3318</a></span>
<span class="normal"><a href="#__codelineno-0-3319">3319</a></span>
<span class="normal"><a href="#__codelineno-0-3320">3320</a></span>
<span class="normal"><a href="#__codelineno-0-3321">3321</a></span>
<span class="normal"><a href="#__codelineno-0-3322">3322</a></span>
<span class="normal"><a href="#__codelineno-0-3323">3323</a></span>
<span class="normal"><a href="#__codelineno-0-3324">3324</a></span>
<span class="normal"><a href="#__codelineno-0-3325">3325</a></span>
<span class="normal"><a href="#__codelineno-0-3326">3326</a></span>
<span class="normal"><a href="#__codelineno-0-3327">3327</a></span>
<span class="normal"><a href="#__codelineno-0-3328">3328</a></span>
<span class="normal"><a href="#__codelineno-0-3329">3329</a></span>
<span class="normal"><a href="#__codelineno-0-3330">3330</a></span>
<span class="normal"><a href="#__codelineno-0-3331">3331</a></span>
<span class="normal"><a href="#__codelineno-0-3332">3332</a></span>
<span class="normal"><a href="#__codelineno-0-3333">3333</a></span>
<span class="normal"><a href="#__codelineno-0-3334">3334</a></span>
<span class="normal"><a href="#__codelineno-0-3335">3335</a></span>
<span class="normal"><a href="#__codelineno-0-3336">3336</a></span>
<span class="normal"><a href="#__codelineno-0-3337">3337</a></span>
<span class="normal"><a href="#__codelineno-0-3338">3338</a></span>
<span class="normal"><a href="#__codelineno-0-3339">3339</a></span>
<span class="normal"><a href="#__codelineno-0-3340">3340</a></span>
<span class="normal"><a href="#__codelineno-0-3341">3341</a></span>
<span class="normal"><a href="#__codelineno-0-3342">3342</a></span>
<span class="normal"><a href="#__codelineno-0-3343">3343</a></span>
<span class="normal"><a href="#__codelineno-0-3344">3344</a></span>
<span class="normal"><a href="#__codelineno-0-3345">3345</a></span>
<span class="normal"><a href="#__codelineno-0-3346">3346</a></span>
<span class="normal"><a href="#__codelineno-0-3347">3347</a></span>
<span class="normal"><a href="#__codelineno-0-3348">3348</a></span>
<span class="normal"><a href="#__codelineno-0-3349">3349</a></span>
<span class="normal"><a href="#__codelineno-0-3350">3350</a></span>
<span class="normal"><a href="#__codelineno-0-3351">3351</a></span>
<span class="normal"><a href="#__codelineno-0-3352">3352</a></span>
<span class="normal"><a href="#__codelineno-0-3353">3353</a></span>
<span class="normal"><a href="#__codelineno-0-3354">3354</a></span>
<span class="normal"><a href="#__codelineno-0-3355">3355</a></span>
<span class="normal"><a href="#__codelineno-0-3356">3356</a></span>
<span class="normal"><a href="#__codelineno-0-3357">3357</a></span>
<span class="normal"><a href="#__codelineno-0-3358">3358</a></span>
<span class="normal"><a href="#__codelineno-0-3359">3359</a></span>
<span class="normal"><a href="#__codelineno-0-3360">3360</a></span>
<span class="normal"><a href="#__codelineno-0-3361">3361</a></span>
<span class="normal"><a href="#__codelineno-0-3362">3362</a></span>
<span class="normal"><a href="#__codelineno-0-3363">3363</a></span>
<span class="normal"><a href="#__codelineno-0-3364">3364</a></span>
<span class="normal"><a href="#__codelineno-0-3365">3365</a></span>
<span class="normal"><a href="#__codelineno-0-3366">3366</a></span>
<span class="normal"><a href="#__codelineno-0-3367">3367</a></span>
<span class="normal"><a href="#__codelineno-0-3368">3368</a></span>
<span class="normal"><a href="#__codelineno-0-3369">3369</a></span>
<span class="normal"><a href="#__codelineno-0-3370">3370</a></span>
<span class="normal"><a href="#__codelineno-0-3371">3371</a></span>
<span class="normal"><a href="#__codelineno-0-3372">3372</a></span>
<span class="normal"><a href="#__codelineno-0-3373">3373</a></span>
<span class="normal"><a href="#__codelineno-0-3374">3374</a></span>
<span class="normal"><a href="#__codelineno-0-3375">3375</a></span>
<span class="normal"><a href="#__codelineno-0-3376">3376</a></span>
<span class="normal"><a href="#__codelineno-0-3377">3377</a></span>
<span class="normal"><a href="#__codelineno-0-3378">3378</a></span>
<span class="normal"><a href="#__codelineno-0-3379">3379</a></span>
<span class="normal"><a href="#__codelineno-0-3380">3380</a></span>
<span class="normal"><a href="#__codelineno-0-3381">3381</a></span>
<span class="normal"><a href="#__codelineno-0-3382">3382</a></span>
<span class="normal"><a href="#__codelineno-0-3383">3383</a></span>
<span class="normal"><a href="#__codelineno-0-3384">3384</a></span>
<span class="normal"><a href="#__codelineno-0-3385">3385</a></span>
<span class="normal"><a href="#__codelineno-0-3386">3386</a></span>
<span class="normal"><a href="#__codelineno-0-3387">3387</a></span>
<span class="normal"><a href="#__codelineno-0-3388">3388</a></span>
<span class="normal"><a href="#__codelineno-0-3389">3389</a></span>
<span class="normal"><a href="#__codelineno-0-3390">3390</a></span>
<span class="normal"><a href="#__codelineno-0-3391">3391</a></span>
<span class="normal"><a href="#__codelineno-0-3392">3392</a></span>
<span class="normal"><a href="#__codelineno-0-3393">3393</a></span>
<span class="normal"><a href="#__codelineno-0-3394">3394</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-3309" name="__codelineno-0-3309"></a><span class="k">def</span><span class="w"> </span><span class="nf">to_file</span><span class="p">(</span>
<a id="__codelineno-0-3310" name="__codelineno-0-3310"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-3311" name="__codelineno-0-3311"></a>    <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-3312" name="__codelineno-0-3312"></a>    <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-3313" name="__codelineno-0-3313"></a>    <span class="n">tile_length</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3314" name="__codelineno-0-3314"></a>    <span class="n">creation_options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3315" name="__codelineno-0-3315"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3316" name="__codelineno-0-3316"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Save dataset to tiff file.</span>
<a id="__codelineno-0-3317" name="__codelineno-0-3317"></a>
<a id="__codelineno-0-3318" name="__codelineno-0-3318"></a><span class="sd">        `to_file` saves a raster to disk, the type of the driver (georiff/netcdf/ascii) will be implied from the</span>
<a id="__codelineno-0-3319" name="__codelineno-0-3319"></a><span class="sd">        extension at the end of the given path.</span>
<a id="__codelineno-0-3320" name="__codelineno-0-3320"></a>
<a id="__codelineno-0-3321" name="__codelineno-0-3321"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-3322" name="__codelineno-0-3322"></a><span class="sd">        path (str):</span>
<a id="__codelineno-0-3323" name="__codelineno-0-3323"></a><span class="sd">            A path including the name of the dataset.</span>
<a id="__codelineno-0-3324" name="__codelineno-0-3324"></a><span class="sd">        band (int):</span>
<a id="__codelineno-0-3325" name="__codelineno-0-3325"></a><span class="sd">            Band index, needed only in case of ascii drivers. Default is 0.</span>
<a id="__codelineno-0-3326" name="__codelineno-0-3326"></a><span class="sd">        tile_length (int, optional):</span>
<a id="__codelineno-0-3327" name="__codelineno-0-3327"></a><span class="sd">            Length of the tiles in the driver. Default is 256.</span>
<a id="__codelineno-0-3328" name="__codelineno-0-3328"></a><span class="sd">        creation_options: List[str], Default is None</span>
<a id="__codelineno-0-3329" name="__codelineno-0-3329"></a><span class="sd">            List of strings that will be passed to the GDAL driver during the creation of the dataset.</span>
<a id="__codelineno-0-3330" name="__codelineno-0-3330"></a><span class="sd">            i.e., [&#39;PREDICTOR=2&#39;]</span>
<a id="__codelineno-0-3331" name="__codelineno-0-3331"></a>
<a id="__codelineno-0-3332" name="__codelineno-0-3332"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-3333" name="__codelineno-0-3333"></a><span class="sd">        - Create a Dataset with 4 bands, 5 rows, 5 columns, at the point lon/lat (0, 0):</span>
<a id="__codelineno-0-3334" name="__codelineno-0-3334"></a>
<a id="__codelineno-0-3335" name="__codelineno-0-3335"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-3336" name="__codelineno-0-3336"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-3337" name="__codelineno-0-3337"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.rand(4, 5, 5)</span>
<a id="__codelineno-0-3338" name="__codelineno-0-3338"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-3339" name="__codelineno-0-3339"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-3340" name="__codelineno-0-3340"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-3341" name="__codelineno-0-3341"></a><span class="sd">          &gt;&gt;&gt; print(dataset.file_name)</span>
<a id="__codelineno-0-3342" name="__codelineno-0-3342"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-3343" name="__codelineno-0-3343"></a>
<a id="__codelineno-0-3344" name="__codelineno-0-3344"></a><span class="sd">          ```</span>
<a id="__codelineno-0-3345" name="__codelineno-0-3345"></a>
<a id="__codelineno-0-3346" name="__codelineno-0-3346"></a><span class="sd">        - Now save the dataset as a geotiff file:</span>
<a id="__codelineno-0-3347" name="__codelineno-0-3347"></a>
<a id="__codelineno-0-3348" name="__codelineno-0-3348"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-3349" name="__codelineno-0-3349"></a><span class="sd">          &gt;&gt;&gt; dataset.to_file(&quot;my-dataset.tif&quot;)</span>
<a id="__codelineno-0-3350" name="__codelineno-0-3350"></a><span class="sd">          &gt;&gt;&gt; print(dataset.file_name)</span>
<a id="__codelineno-0-3351" name="__codelineno-0-3351"></a><span class="sd">          my-dataset.tif</span>
<a id="__codelineno-0-3352" name="__codelineno-0-3352"></a>
<a id="__codelineno-0-3353" name="__codelineno-0-3353"></a><span class="sd">          ```</span>
<a id="__codelineno-0-3354" name="__codelineno-0-3354"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-3355" name="__codelineno-0-3355"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-3356" name="__codelineno-0-3356"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;path input should be string type&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3357" name="__codelineno-0-3357"></a>
<a id="__codelineno-0-3358" name="__codelineno-0-3358"></a>    <span class="n">extension</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-3359" name="__codelineno-0-3359"></a>    <span class="n">driver</span> <span class="o">=</span> <span class="n">CATALOG</span><span class="o">.</span><span class="n">get_driver_name_by_extension</span><span class="p">(</span><span class="n">extension</span><span class="p">)</span>
<a id="__codelineno-0-3360" name="__codelineno-0-3360"></a>    <span class="n">driver_name</span> <span class="o">=</span> <span class="n">CATALOG</span><span class="o">.</span><span class="n">get_gdal_name</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span>
<a id="__codelineno-0-3361" name="__codelineno-0-3361"></a>
<a id="__codelineno-0-3362" name="__codelineno-0-3362"></a>    <span class="k">if</span> <span class="n">driver</span> <span class="o">==</span> <span class="s2">&quot;ascii&quot;</span><span class="p">:</span>
<a id="__codelineno-0-3363" name="__codelineno-0-3363"></a>        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-3364" name="__codelineno-0-3364"></a>        <span class="n">no_data_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="n">band</span><span class="p">]</span>
<a id="__codelineno-0-3365" name="__codelineno-0-3365"></a>        <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span>
<a id="__codelineno-0-3366" name="__codelineno-0-3366"></a>        <span class="n">_io</span><span class="o">.</span><span class="n">to_ascii</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">no_data_value</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-3367" name="__codelineno-0-3367"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3368" name="__codelineno-0-3368"></a>        <span class="c1"># saving rasters with color table fails with a runtime error</span>
<a id="__codelineno-0-3369" name="__codelineno-0-3369"></a>        <span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;COMPRESS=DEFLATE&quot;</span><span class="p">]</span>
<a id="__codelineno-0-3370" name="__codelineno-0-3370"></a>        <span class="k">if</span> <span class="n">tile_length</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3371" name="__codelineno-0-3371"></a>            <span class="n">options</span> <span class="o">+=</span> <span class="p">[</span>
<a id="__codelineno-0-3372" name="__codelineno-0-3372"></a>                <span class="s2">&quot;TILED=YES&quot;</span><span class="p">,</span>
<a id="__codelineno-0-3373" name="__codelineno-0-3373"></a>                <span class="sa">f</span><span class="s2">&quot;TILE_LENGTH=</span><span class="si">{</span><span class="n">tile_length</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-0-3374" name="__codelineno-0-3374"></a>            <span class="p">]</span>
<a id="__codelineno-0-3375" name="__codelineno-0-3375"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_block_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_block_size</span> <span class="o">!=</span> <span class="p">[]:</span>
<a id="__codelineno-0-3376" name="__codelineno-0-3376"></a>            <span class="n">options</span> <span class="o">+=</span> <span class="p">[</span>
<a id="__codelineno-0-3377" name="__codelineno-0-3377"></a>                <span class="s2">&quot;BLOCKXSIZE=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_block_size</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span>
<a id="__codelineno-0-3378" name="__codelineno-0-3378"></a>                <span class="s2">&quot;BLOCKYSIZE=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_block_size</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span>
<a id="__codelineno-0-3379" name="__codelineno-0-3379"></a>            <span class="p">]</span>
<a id="__codelineno-0-3380" name="__codelineno-0-3380"></a>        <span class="k">if</span> <span class="n">creation_options</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3381" name="__codelineno-0-3381"></a>            <span class="n">options</span> <span class="o">+=</span> <span class="n">creation_options</span>
<a id="__codelineno-0-3382" name="__codelineno-0-3382"></a>
<a id="__codelineno-0-3383" name="__codelineno-0-3383"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-3384" name="__codelineno-0-3384"></a>            <span class="n">dst</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="n">driver_name</span><span class="p">)</span><span class="o">.</span><span class="n">CreateCopy</span><span class="p">(</span>
<a id="__codelineno-0-3385" name="__codelineno-0-3385"></a>                <span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span>
<a id="__codelineno-0-3386" name="__codelineno-0-3386"></a>            <span class="p">)</span>
<a id="__codelineno-0-3387" name="__codelineno-0-3387"></a>            <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="s2">&quot;write&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3388" name="__codelineno-0-3388"></a>            <span class="c1"># flush the data to the dataset on disk.</span>
<a id="__codelineno-0-3389" name="__codelineno-0-3389"></a>            <span class="n">dst</span><span class="o">.</span><span class="n">FlushCache</span><span class="p">()</span>
<a id="__codelineno-0-3390" name="__codelineno-0-3390"></a>        <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
<a id="__codelineno-0-3391" name="__codelineno-0-3391"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
<a id="__codelineno-0-3392" name="__codelineno-0-3392"></a>                <span class="k">raise</span> <span class="n">FailedToSaveError</span><span class="p">(</span>
<a id="__codelineno-0-3393" name="__codelineno-0-3393"></a>                    <span class="sa">f</span><span class="s2">&quot;Failed to save the </span><span class="si">{</span><span class="n">driver_name</span><span class="si">}</span><span class="s2"> raster to the path: </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-3394" name="__codelineno-0-3394"></a>                <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.convert_longitude" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.convert_longitude" class="toclink">
            <code class="highlight language-python"><span class="n">convert_longitude</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.convert_longitude" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Convert Longitude.</p>
<ul>
<li>convert the longitude from 0-360 to -180 - 180.</li>
<li>currently the function works correctly if the raster covers the whole world, it means that the columns
    in the rasters covers from longitude 0 to 360.</li>
</ul>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>inplace</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True to make the changes in place.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Dataset</code></td>            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;pyramids.dataset.Dataset&lt;/code&gt;" href="#pyramids.dataset.Dataset">Dataset</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The converted dataset if inplace is False; otherwise None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3396">3396</a></span>
<span class="normal"><a href="#__codelineno-0-3397">3397</a></span>
<span class="normal"><a href="#__codelineno-0-3398">3398</a></span>
<span class="normal"><a href="#__codelineno-0-3399">3399</a></span>
<span class="normal"><a href="#__codelineno-0-3400">3400</a></span>
<span class="normal"><a href="#__codelineno-0-3401">3401</a></span>
<span class="normal"><a href="#__codelineno-0-3402">3402</a></span>
<span class="normal"><a href="#__codelineno-0-3403">3403</a></span>
<span class="normal"><a href="#__codelineno-0-3404">3404</a></span>
<span class="normal"><a href="#__codelineno-0-3405">3405</a></span>
<span class="normal"><a href="#__codelineno-0-3406">3406</a></span>
<span class="normal"><a href="#__codelineno-0-3407">3407</a></span>
<span class="normal"><a href="#__codelineno-0-3408">3408</a></span>
<span class="normal"><a href="#__codelineno-0-3409">3409</a></span>
<span class="normal"><a href="#__codelineno-0-3410">3410</a></span>
<span class="normal"><a href="#__codelineno-0-3411">3411</a></span>
<span class="normal"><a href="#__codelineno-0-3412">3412</a></span>
<span class="normal"><a href="#__codelineno-0-3413">3413</a></span>
<span class="normal"><a href="#__codelineno-0-3414">3414</a></span>
<span class="normal"><a href="#__codelineno-0-3415">3415</a></span>
<span class="normal"><a href="#__codelineno-0-3416">3416</a></span>
<span class="normal"><a href="#__codelineno-0-3417">3417</a></span>
<span class="normal"><a href="#__codelineno-0-3418">3418</a></span>
<span class="normal"><a href="#__codelineno-0-3419">3419</a></span>
<span class="normal"><a href="#__codelineno-0-3420">3420</a></span>
<span class="normal"><a href="#__codelineno-0-3421">3421</a></span>
<span class="normal"><a href="#__codelineno-0-3422">3422</a></span>
<span class="normal"><a href="#__codelineno-0-3423">3423</a></span>
<span class="normal"><a href="#__codelineno-0-3424">3424</a></span>
<span class="normal"><a href="#__codelineno-0-3425">3425</a></span>
<span class="normal"><a href="#__codelineno-0-3426">3426</a></span>
<span class="normal"><a href="#__codelineno-0-3427">3427</a></span>
<span class="normal"><a href="#__codelineno-0-3428">3428</a></span>
<span class="normal"><a href="#__codelineno-0-3429">3429</a></span>
<span class="normal"><a href="#__codelineno-0-3430">3430</a></span>
<span class="normal"><a href="#__codelineno-0-3431">3431</a></span>
<span class="normal"><a href="#__codelineno-0-3432">3432</a></span>
<span class="normal"><a href="#__codelineno-0-3433">3433</a></span>
<span class="normal"><a href="#__codelineno-0-3434">3434</a></span>
<span class="normal"><a href="#__codelineno-0-3435">3435</a></span>
<span class="normal"><a href="#__codelineno-0-3436">3436</a></span>
<span class="normal"><a href="#__codelineno-0-3437">3437</a></span>
<span class="normal"><a href="#__codelineno-0-3438">3438</a></span>
<span class="normal"><a href="#__codelineno-0-3439">3439</a></span>
<span class="normal"><a href="#__codelineno-0-3440">3440</a></span>
<span class="normal"><a href="#__codelineno-0-3441">3441</a></span>
<span class="normal"><a href="#__codelineno-0-3442">3442</a></span>
<span class="normal"><a href="#__codelineno-0-3443">3443</a></span>
<span class="normal"><a href="#__codelineno-0-3444">3444</a></span>
<span class="normal"><a href="#__codelineno-0-3445">3445</a></span>
<span class="normal"><a href="#__codelineno-0-3446">3446</a></span>
<span class="normal"><a href="#__codelineno-0-3447">3447</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-3396" name="__codelineno-0-3396"></a><span class="k">def</span><span class="w"> </span><span class="nf">convert_longitude</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Dataset&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-3397" name="__codelineno-0-3397"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert Longitude.</span>
<a id="__codelineno-0-3398" name="__codelineno-0-3398"></a>
<a id="__codelineno-0-3399" name="__codelineno-0-3399"></a><span class="sd">    - convert the longitude from 0-360 to -180 - 180.</span>
<a id="__codelineno-0-3400" name="__codelineno-0-3400"></a><span class="sd">    - currently the function works correctly if the raster covers the whole world, it means that the columns</span>
<a id="__codelineno-0-3401" name="__codelineno-0-3401"></a><span class="sd">        in the rasters covers from longitude 0 to 360.</span>
<a id="__codelineno-0-3402" name="__codelineno-0-3402"></a>
<a id="__codelineno-0-3403" name="__codelineno-0-3403"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-3404" name="__codelineno-0-3404"></a><span class="sd">        inplace (bool):</span>
<a id="__codelineno-0-3405" name="__codelineno-0-3405"></a><span class="sd">            True to make the changes in place.</span>
<a id="__codelineno-0-3406" name="__codelineno-0-3406"></a>
<a id="__codelineno-0-3407" name="__codelineno-0-3407"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-3408" name="__codelineno-0-3408"></a><span class="sd">        Dataset:</span>
<a id="__codelineno-0-3409" name="__codelineno-0-3409"></a><span class="sd">            The converted dataset if inplace is False; otherwise None.</span>
<a id="__codelineno-0-3410" name="__codelineno-0-3410"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-3411" name="__codelineno-0-3411"></a>    <span class="c1"># dst = gdal.Warp(</span>
<a id="__codelineno-0-3412" name="__codelineno-0-3412"></a>    <span class="c1">#     &quot;&quot;,</span>
<a id="__codelineno-0-3413" name="__codelineno-0-3413"></a>    <span class="c1">#     self.raster,</span>
<a id="__codelineno-0-3414" name="__codelineno-0-3414"></a>    <span class="c1">#     dstSRS=&quot;+proj=longlat +ellps=WGS84 +datum=WGS84 +lon_0=0 +over&quot;,</span>
<a id="__codelineno-0-3415" name="__codelineno-0-3415"></a>    <span class="c1">#     format=&quot;VRT&quot;,</span>
<a id="__codelineno-0-3416" name="__codelineno-0-3416"></a>    <span class="c1"># )</span>
<a id="__codelineno-0-3417" name="__codelineno-0-3417"></a>    <span class="n">lon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lon</span>
<a id="__codelineno-0-3418" name="__codelineno-0-3418"></a>    <span class="n">src</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span>
<a id="__codelineno-0-3419" name="__codelineno-0-3419"></a>    <span class="c1"># create a copy</span>
<a id="__codelineno-0-3420" name="__codelineno-0-3420"></a>    <span class="n">drv</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="s2">&quot;MEM&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3421" name="__codelineno-0-3421"></a>    <span class="n">dst</span> <span class="o">=</span> <span class="n">drv</span><span class="o">.</span><span class="n">CreateCopy</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-3422" name="__codelineno-0-3422"></a>    <span class="c1"># convert the 0 to 360 to -180 to 180</span>
<a id="__codelineno-0-3423" name="__codelineno-0-3423"></a>    <span class="k">if</span> <span class="n">lon</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">180</span><span class="p">:</span>
<a id="__codelineno-0-3424" name="__codelineno-0-3424"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The raster should cover the whole globe&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3425" name="__codelineno-0-3425"></a>
<a id="__codelineno-0-3426" name="__codelineno-0-3426"></a>    <span class="n">first_to_translated</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">lon</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-3427" name="__codelineno-0-3427"></a>
<a id="__codelineno-0-3428" name="__codelineno-0-3428"></a>    <span class="n">ind</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">first_to_translated</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">lon</span><span class="p">)))</span>
<a id="__codelineno-0-3429" name="__codelineno-0-3429"></a>    <span class="n">ind_2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">first_to_translated</span><span class="p">))</span>
<a id="__codelineno-0-3430" name="__codelineno-0-3430"></a>
<a id="__codelineno-0-3431" name="__codelineno-0-3431"></a>    <span class="k">for</span> <span class="n">band</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-3432" name="__codelineno-0-3432"></a>        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-3433" name="__codelineno-0-3433"></a>        <span class="n">arr_rearranged</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[:,</span> <span class="n">ind</span> <span class="o">+</span> <span class="n">ind_2</span><span class="p">]</span>
<a id="__codelineno-0-3434" name="__codelineno-0-3434"></a>        <span class="n">dst</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">band</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">arr_rearranged</span><span class="p">)</span>
<a id="__codelineno-0-3435" name="__codelineno-0-3435"></a>
<a id="__codelineno-0-3436" name="__codelineno-0-3436"></a>    <span class="c1"># correct the geotransform</span>
<a id="__codelineno-0-3437" name="__codelineno-0-3437"></a>    <span class="n">top_left_corner</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">top_left_corner</span>
<a id="__codelineno-0-3438" name="__codelineno-0-3438"></a>    <span class="n">gt</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">)</span>
<a id="__codelineno-0-3439" name="__codelineno-0-3439"></a>    <span class="k">if</span> <span class="n">lon</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
<a id="__codelineno-0-3440" name="__codelineno-0-3440"></a>        <span class="n">new_gt</span> <span class="o">=</span> <span class="n">top_left_corner</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">180</span>
<a id="__codelineno-0-3441" name="__codelineno-0-3441"></a>        <span class="n">gt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_gt</span>
<a id="__codelineno-0-3442" name="__codelineno-0-3442"></a>
<a id="__codelineno-0-3443" name="__codelineno-0-3443"></a>    <span class="n">dst</span><span class="o">.</span><span class="n">SetGeoTransform</span><span class="p">(</span><span class="n">gt</span><span class="p">)</span>
<a id="__codelineno-0-3444" name="__codelineno-0-3444"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">inplace</span><span class="p">:</span>
<a id="__codelineno-0-3445" name="__codelineno-0-3445"></a>        <span class="k">return</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
<a id="__codelineno-0-3446" name="__codelineno-0-3446"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3447" name="__codelineno-0-3447"></a>        <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.to_feature_collection" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.to_feature_collection" class="toclink">
            <code class="highlight language-python"><span class="n">to_feature_collection</span><span class="p">(</span><span class="n">vector_mask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">add_geometry</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tile</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tile_size</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span> <span class="n">touch</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.to_feature_collection" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Convert a dataset to a vector.</p>


<details class="the-function-does-the-following" open>
  <summary>The function does the following</summary>
  <ul>
<li>Flatten the array in each band in the raster then mask the values if a vector_mask file is given
    otherwise it will flatten all values.</li>
<li>Put the values for each band in a column in a dataframe under the name of the raster band,
    but if no meta-data in the raster band exists, an index number will be used [1, 2, 3, ...]</li>
<li>
<p>The function has an add_geometry parameter with two possible values ["point", "polygon"], which you can
    specify the type of shapely geometry you want to create from each cell,</p>
<ul>
<li>If point is chosen, the created point will be at the center of each cell</li>
<li>If a polygon is chosen, a square polygon will be created that covers the entire cell.</li>
</ul>
</li>
</ul>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>vector_mask</code>
            </td>
            <td>
                  <code><span title="geopandas.geodataframe.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>GeoDataFrame for the vector_mask. If given, it will be used to clip the raster.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>add_geometry</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>"Polygon" or "Point" if you want to add a polygon geometry of the cells as column in dataframe.
Default is None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tile</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True to use tiles in extracting the values from the raster. Default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tile_size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tile size. Default is 1500.</p>
              </div>
            </td>
            <td>
                  <code>256</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>touch</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Include the cells that touch the polygon not only those that lie entirely inside the polygon mask.
Default is True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="geopandas.geodataframe.DataFrame">DataFrame</span>, <span title="geopandas.geodataframe.GeoDataFrame">GeoDataFrame</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame | GeoDataFrame:
The resulting frame will have the band value under the name of the band (if the raster file has
metadata; if not, the bands will be indexed from 1 to the number of bands).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create a dataset from array with 2 bands and 3*3 array each:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="p">[[</span><span class="mf">0.88625832</span> <span class="mf">0.81804328</span> <span class="mf">0.99372706</span><span class="p">]</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a> <span class="p">[</span><span class="mf">0.85333054</span> <span class="mf">0.35448201</span> <span class="mf">0.78079262</span><span class="p">]</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a> <span class="p">[</span><span class="mf">0.43887136</span> <span class="mf">0.68166208</span> <span class="mf">0.53170966</span><span class="p">]]</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="p">[[</span><span class="mf">0.07051872</span> <span class="mf">0.67650833</span> <span class="mf">0.17625027</span><span class="p">]</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a> <span class="p">[</span><span class="mf">0.41258071</span> <span class="mf">0.38327938</span> <span class="mf">0.18783139</span><span class="p">]</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a> <span class="p">[</span><span class="mf">0.83741314</span> <span class="mf">0.70446373</span> <span class="mf">0.64913575</span><span class="p">]]</span>
</code></pre></div>
<ul>
<li>Convert the dataset to dataframe by calling the <code>to_feature_collection</code> method:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">to_feature_collection</span><span class="p">()</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>     <span class="n">Band_1</span>    <span class="n">Band_2</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="mi">0</span>  <span class="mf">0.886258</span>  <span class="mf">0.070519</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="mi">1</span>  <span class="mf">0.818043</span>  <span class="mf">0.676508</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="mi">2</span>  <span class="mf">0.993727</span>  <span class="mf">0.176250</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="mi">3</span>  <span class="mf">0.853331</span>  <span class="mf">0.412581</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="mi">4</span>  <span class="mf">0.354482</span>  <span class="mf">0.383279</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="mi">5</span>  <span class="mf">0.780793</span>  <span class="mf">0.187831</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="mi">6</span>  <span class="mf">0.438871</span>  <span class="mf">0.837413</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="mi">7</span>  <span class="mf">0.681662</span>  <span class="mf">0.704464</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="mi">8</span>  <span class="mf">0.531710</span>  <span class="mf">0.649136</span>
</code></pre></div>
<ul>
<li>
<p>Convert the dataset into geodataframe with either a polygon or a point geometry that represents each cell.
    To specify the geometry type use the parameter <code>add_geometry</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">gdf</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">to_feature_collection</span><span class="p">(</span><span class="n">add_geometry</span><span class="o">=</span><span class="s2">&quot;point&quot;</span><span class="p">)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>     <span class="n">Band_1</span>    <span class="n">Band_2</span>                  <span class="n">geometry</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="mi">0</span>  <span class="mf">0.886258</span>  <span class="mf">0.070519</span>  <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.02500</span> <span class="o">-</span><span class="mf">0.02500</span><span class="p">)</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="mi">1</span>  <span class="mf">0.818043</span>  <span class="mf">0.676508</span>  <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.07500</span> <span class="o">-</span><span class="mf">0.02500</span><span class="p">)</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="mi">2</span>  <span class="mf">0.993727</span>  <span class="mf">0.176250</span>  <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.12500</span> <span class="o">-</span><span class="mf">0.02500</span><span class="p">)</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="mi">3</span>  <span class="mf">0.853331</span>  <span class="mf">0.412581</span>  <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.02500</span> <span class="o">-</span><span class="mf">0.07500</span><span class="p">)</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="mi">4</span>  <span class="mf">0.354482</span>  <span class="mf">0.383279</span>  <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.07500</span> <span class="o">-</span><span class="mf">0.07500</span><span class="p">)</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="mi">5</span>  <span class="mf">0.780793</span>  <span class="mf">0.187831</span>  <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.12500</span> <span class="o">-</span><span class="mf">0.07500</span><span class="p">)</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="mi">6</span>  <span class="mf">0.438871</span>  <span class="mf">0.837413</span>  <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.02500</span> <span class="o">-</span><span class="mf">0.12500</span><span class="p">)</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="mi">7</span>  <span class="mf">0.681662</span>  <span class="mf">0.704464</span>  <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.07500</span> <span class="o">-</span><span class="mf">0.12500</span><span class="p">)</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="mi">8</span>  <span class="mf">0.531710</span>  <span class="mf">0.649136</span>  <span class="n">POINT</span> <span class="p">(</span><span class="mf">0.12500</span> <span class="o">-</span><span class="mf">0.12500</span><span class="p">)</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">gdf</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">to_feature_collection</span><span class="p">(</span><span class="n">add_geometry</span><span class="o">=</span><span class="s2">&quot;polygon&quot;</span><span class="p">)</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>     <span class="n">Band_1</span>    <span class="n">Band_2</span>                                           <span class="n">geometry</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="mi">0</span>  <span class="mf">0.886258</span>  <span class="mf">0.070519</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.00000</span> <span class="mf">0.00000</span><span class="p">,</span> <span class="mf">0.05000</span> <span class="mf">0.00000</span><span class="p">,</span> <span class="mf">0.</span><span class="o">...</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="mi">1</span>  <span class="mf">0.818043</span>  <span class="mf">0.676508</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.05000</span> <span class="mf">0.00000</span><span class="p">,</span> <span class="mf">0.10000</span> <span class="mf">0.00000</span><span class="p">,</span> <span class="mf">0.</span><span class="o">...</span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="mi">2</span>  <span class="mf">0.993727</span>  <span class="mf">0.176250</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.10000</span> <span class="mf">0.00000</span><span class="p">,</span> <span class="mf">0.15000</span> <span class="mf">0.00000</span><span class="p">,</span> <span class="mf">0.</span><span class="o">...</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="mi">3</span>  <span class="mf">0.853331</span>  <span class="mf">0.412581</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.00000</span> <span class="o">-</span><span class="mf">0.05000</span><span class="p">,</span> <span class="mf">0.05000</span> <span class="o">-</span><span class="mf">0.05000</span><span class="p">,</span> <span class="o">...</span>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="mi">4</span>  <span class="mf">0.354482</span>  <span class="mf">0.383279</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.05000</span> <span class="o">-</span><span class="mf">0.05000</span><span class="p">,</span> <span class="mf">0.10000</span> <span class="o">-</span><span class="mf">0.05000</span><span class="p">,</span> <span class="o">...</span>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="mi">5</span>  <span class="mf">0.780793</span>  <span class="mf">0.187831</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.10000</span> <span class="o">-</span><span class="mf">0.05000</span><span class="p">,</span> <span class="mf">0.15000</span> <span class="o">-</span><span class="mf">0.05000</span><span class="p">,</span> <span class="o">...</span>
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="mi">6</span>  <span class="mf">0.438871</span>  <span class="mf">0.837413</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.00000</span> <span class="o">-</span><span class="mf">0.10000</span><span class="p">,</span> <span class="mf">0.05000</span> <span class="o">-</span><span class="mf">0.10000</span><span class="p">,</span> <span class="o">...</span>
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="mi">7</span>  <span class="mf">0.681662</span>  <span class="mf">0.704464</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.05000</span> <span class="o">-</span><span class="mf">0.10000</span><span class="p">,</span> <span class="mf">0.10000</span> <span class="o">-</span><span class="mf">0.10000</span><span class="p">,</span> <span class="o">...</span>
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="mi">8</span>  <span class="mf">0.531710</span>  <span class="mf">0.649136</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.10000</span> <span class="o">-</span><span class="mf">0.10000</span><span class="p">,</span> <span class="mf">0.15000</span> <span class="o">-</span><span class="mf">0.10000</span><span class="p">,</span> <span class="o">...</span>
</code></pre></div>
</li>
<li>
<p>Use a mask to crop part of the dataset, and then convert the cropped part to a dataframe/geodataframe:</p>
</li>
<li>
<p>Create a mask that covers only the cell in the middle of the dataset.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">shapely.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Polygon</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">poly</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="o">...</span>             <span class="n">geometry</span><span class="o">=</span><span class="p">[</span><span class="n">Polygon</span><span class="p">([(</span><span class="mf">0.05</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">)])],</span> <span class="n">crs</span><span class="o">=</span><span class="mi">4326</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="o">...</span> <span class="p">)</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">to_feature_collection</span><span class="p">(</span><span class="n">vector_mask</span><span class="o">=</span><span class="n">poly</span><span class="p">)</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>     <span class="n">Band_1</span>    <span class="n">Band_2</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="mi">0</span>  <span class="mf">0.354482</span>  <span class="mf">0.383279</span>
</code></pre></div>
</li>
<li>
<p>If you have a big dataset, and you want to convert it to dataframe in tiles (do not read the whole dataset
    at once but in tiles), you can use the <code>tile</code> and the <code>tile_size</code> parameters. The values will be the
    same as above; the difference is reading in chunks:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">gdf</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">to_feature_collection</span><span class="p">(</span><span class="n">tile</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tile_size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>     <span class="n">Band_1</span>    <span class="n">Band_2</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="mi">0</span>  <span class="mf">0.886258</span>  <span class="mf">0.070519</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="mi">1</span>  <span class="mf">0.818043</span>  <span class="mf">0.676508</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="mi">2</span>  <span class="mf">0.993727</span>  <span class="mf">0.176250</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="mi">3</span>  <span class="mf">0.853331</span>  <span class="mf">0.412581</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="mi">4</span>  <span class="mf">0.354482</span>  <span class="mf">0.383279</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="mi">5</span>  <span class="mf">0.780793</span>  <span class="mf">0.187831</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="mi">6</span>  <span class="mf">0.438871</span>  <span class="mf">0.837413</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="mi">7</span>  <span class="mf">0.681662</span>  <span class="mf">0.704464</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="mi">8</span>  <span class="mf">0.531710</span>  <span class="mf">0.649136</span>
</code></pre></div>
</li>
</ul>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3464">3464</a></span>
<span class="normal"><a href="#__codelineno-0-3465">3465</a></span>
<span class="normal"><a href="#__codelineno-0-3466">3466</a></span>
<span class="normal"><a href="#__codelineno-0-3467">3467</a></span>
<span class="normal"><a href="#__codelineno-0-3468">3468</a></span>
<span class="normal"><a href="#__codelineno-0-3469">3469</a></span>
<span class="normal"><a href="#__codelineno-0-3470">3470</a></span>
<span class="normal"><a href="#__codelineno-0-3471">3471</a></span>
<span class="normal"><a href="#__codelineno-0-3472">3472</a></span>
<span class="normal"><a href="#__codelineno-0-3473">3473</a></span>
<span class="normal"><a href="#__codelineno-0-3474">3474</a></span>
<span class="normal"><a href="#__codelineno-0-3475">3475</a></span>
<span class="normal"><a href="#__codelineno-0-3476">3476</a></span>
<span class="normal"><a href="#__codelineno-0-3477">3477</a></span>
<span class="normal"><a href="#__codelineno-0-3478">3478</a></span>
<span class="normal"><a href="#__codelineno-0-3479">3479</a></span>
<span class="normal"><a href="#__codelineno-0-3480">3480</a></span>
<span class="normal"><a href="#__codelineno-0-3481">3481</a></span>
<span class="normal"><a href="#__codelineno-0-3482">3482</a></span>
<span class="normal"><a href="#__codelineno-0-3483">3483</a></span>
<span class="normal"><a href="#__codelineno-0-3484">3484</a></span>
<span class="normal"><a href="#__codelineno-0-3485">3485</a></span>
<span class="normal"><a href="#__codelineno-0-3486">3486</a></span>
<span class="normal"><a href="#__codelineno-0-3487">3487</a></span>
<span class="normal"><a href="#__codelineno-0-3488">3488</a></span>
<span class="normal"><a href="#__codelineno-0-3489">3489</a></span>
<span class="normal"><a href="#__codelineno-0-3490">3490</a></span>
<span class="normal"><a href="#__codelineno-0-3491">3491</a></span>
<span class="normal"><a href="#__codelineno-0-3492">3492</a></span>
<span class="normal"><a href="#__codelineno-0-3493">3493</a></span>
<span class="normal"><a href="#__codelineno-0-3494">3494</a></span>
<span class="normal"><a href="#__codelineno-0-3495">3495</a></span>
<span class="normal"><a href="#__codelineno-0-3496">3496</a></span>
<span class="normal"><a href="#__codelineno-0-3497">3497</a></span>
<span class="normal"><a href="#__codelineno-0-3498">3498</a></span>
<span class="normal"><a href="#__codelineno-0-3499">3499</a></span>
<span class="normal"><a href="#__codelineno-0-3500">3500</a></span>
<span class="normal"><a href="#__codelineno-0-3501">3501</a></span>
<span class="normal"><a href="#__codelineno-0-3502">3502</a></span>
<span class="normal"><a href="#__codelineno-0-3503">3503</a></span>
<span class="normal"><a href="#__codelineno-0-3504">3504</a></span>
<span class="normal"><a href="#__codelineno-0-3505">3505</a></span>
<span class="normal"><a href="#__codelineno-0-3506">3506</a></span>
<span class="normal"><a href="#__codelineno-0-3507">3507</a></span>
<span class="normal"><a href="#__codelineno-0-3508">3508</a></span>
<span class="normal"><a href="#__codelineno-0-3509">3509</a></span>
<span class="normal"><a href="#__codelineno-0-3510">3510</a></span>
<span class="normal"><a href="#__codelineno-0-3511">3511</a></span>
<span class="normal"><a href="#__codelineno-0-3512">3512</a></span>
<span class="normal"><a href="#__codelineno-0-3513">3513</a></span>
<span class="normal"><a href="#__codelineno-0-3514">3514</a></span>
<span class="normal"><a href="#__codelineno-0-3515">3515</a></span>
<span class="normal"><a href="#__codelineno-0-3516">3516</a></span>
<span class="normal"><a href="#__codelineno-0-3517">3517</a></span>
<span class="normal"><a href="#__codelineno-0-3518">3518</a></span>
<span class="normal"><a href="#__codelineno-0-3519">3519</a></span>
<span class="normal"><a href="#__codelineno-0-3520">3520</a></span>
<span class="normal"><a href="#__codelineno-0-3521">3521</a></span>
<span class="normal"><a href="#__codelineno-0-3522">3522</a></span>
<span class="normal"><a href="#__codelineno-0-3523">3523</a></span>
<span class="normal"><a href="#__codelineno-0-3524">3524</a></span>
<span class="normal"><a href="#__codelineno-0-3525">3525</a></span>
<span class="normal"><a href="#__codelineno-0-3526">3526</a></span>
<span class="normal"><a href="#__codelineno-0-3527">3527</a></span>
<span class="normal"><a href="#__codelineno-0-3528">3528</a></span>
<span class="normal"><a href="#__codelineno-0-3529">3529</a></span>
<span class="normal"><a href="#__codelineno-0-3530">3530</a></span>
<span class="normal"><a href="#__codelineno-0-3531">3531</a></span>
<span class="normal"><a href="#__codelineno-0-3532">3532</a></span>
<span class="normal"><a href="#__codelineno-0-3533">3533</a></span>
<span class="normal"><a href="#__codelineno-0-3534">3534</a></span>
<span class="normal"><a href="#__codelineno-0-3535">3535</a></span>
<span class="normal"><a href="#__codelineno-0-3536">3536</a></span>
<span class="normal"><a href="#__codelineno-0-3537">3537</a></span>
<span class="normal"><a href="#__codelineno-0-3538">3538</a></span>
<span class="normal"><a href="#__codelineno-0-3539">3539</a></span>
<span class="normal"><a href="#__codelineno-0-3540">3540</a></span>
<span class="normal"><a href="#__codelineno-0-3541">3541</a></span>
<span class="normal"><a href="#__codelineno-0-3542">3542</a></span>
<span class="normal"><a href="#__codelineno-0-3543">3543</a></span>
<span class="normal"><a href="#__codelineno-0-3544">3544</a></span>
<span class="normal"><a href="#__codelineno-0-3545">3545</a></span>
<span class="normal"><a href="#__codelineno-0-3546">3546</a></span>
<span class="normal"><a href="#__codelineno-0-3547">3547</a></span>
<span class="normal"><a href="#__codelineno-0-3548">3548</a></span>
<span class="normal"><a href="#__codelineno-0-3549">3549</a></span>
<span class="normal"><a href="#__codelineno-0-3550">3550</a></span>
<span class="normal"><a href="#__codelineno-0-3551">3551</a></span>
<span class="normal"><a href="#__codelineno-0-3552">3552</a></span>
<span class="normal"><a href="#__codelineno-0-3553">3553</a></span>
<span class="normal"><a href="#__codelineno-0-3554">3554</a></span>
<span class="normal"><a href="#__codelineno-0-3555">3555</a></span>
<span class="normal"><a href="#__codelineno-0-3556">3556</a></span>
<span class="normal"><a href="#__codelineno-0-3557">3557</a></span>
<span class="normal"><a href="#__codelineno-0-3558">3558</a></span>
<span class="normal"><a href="#__codelineno-0-3559">3559</a></span>
<span class="normal"><a href="#__codelineno-0-3560">3560</a></span>
<span class="normal"><a href="#__codelineno-0-3561">3561</a></span>
<span class="normal"><a href="#__codelineno-0-3562">3562</a></span>
<span class="normal"><a href="#__codelineno-0-3563">3563</a></span>
<span class="normal"><a href="#__codelineno-0-3564">3564</a></span>
<span class="normal"><a href="#__codelineno-0-3565">3565</a></span>
<span class="normal"><a href="#__codelineno-0-3566">3566</a></span>
<span class="normal"><a href="#__codelineno-0-3567">3567</a></span>
<span class="normal"><a href="#__codelineno-0-3568">3568</a></span>
<span class="normal"><a href="#__codelineno-0-3569">3569</a></span>
<span class="normal"><a href="#__codelineno-0-3570">3570</a></span>
<span class="normal"><a href="#__codelineno-0-3571">3571</a></span>
<span class="normal"><a href="#__codelineno-0-3572">3572</a></span>
<span class="normal"><a href="#__codelineno-0-3573">3573</a></span>
<span class="normal"><a href="#__codelineno-0-3574">3574</a></span>
<span class="normal"><a href="#__codelineno-0-3575">3575</a></span>
<span class="normal"><a href="#__codelineno-0-3576">3576</a></span>
<span class="normal"><a href="#__codelineno-0-3577">3577</a></span>
<span class="normal"><a href="#__codelineno-0-3578">3578</a></span>
<span class="normal"><a href="#__codelineno-0-3579">3579</a></span>
<span class="normal"><a href="#__codelineno-0-3580">3580</a></span>
<span class="normal"><a href="#__codelineno-0-3581">3581</a></span>
<span class="normal"><a href="#__codelineno-0-3582">3582</a></span>
<span class="normal"><a href="#__codelineno-0-3583">3583</a></span>
<span class="normal"><a href="#__codelineno-0-3584">3584</a></span>
<span class="normal"><a href="#__codelineno-0-3585">3585</a></span>
<span class="normal"><a href="#__codelineno-0-3586">3586</a></span>
<span class="normal"><a href="#__codelineno-0-3587">3587</a></span>
<span class="normal"><a href="#__codelineno-0-3588">3588</a></span>
<span class="normal"><a href="#__codelineno-0-3589">3589</a></span>
<span class="normal"><a href="#__codelineno-0-3590">3590</a></span>
<span class="normal"><a href="#__codelineno-0-3591">3591</a></span>
<span class="normal"><a href="#__codelineno-0-3592">3592</a></span>
<span class="normal"><a href="#__codelineno-0-3593">3593</a></span>
<span class="normal"><a href="#__codelineno-0-3594">3594</a></span>
<span class="normal"><a href="#__codelineno-0-3595">3595</a></span>
<span class="normal"><a href="#__codelineno-0-3596">3596</a></span>
<span class="normal"><a href="#__codelineno-0-3597">3597</a></span>
<span class="normal"><a href="#__codelineno-0-3598">3598</a></span>
<span class="normal"><a href="#__codelineno-0-3599">3599</a></span>
<span class="normal"><a href="#__codelineno-0-3600">3600</a></span>
<span class="normal"><a href="#__codelineno-0-3601">3601</a></span>
<span class="normal"><a href="#__codelineno-0-3602">3602</a></span>
<span class="normal"><a href="#__codelineno-0-3603">3603</a></span>
<span class="normal"><a href="#__codelineno-0-3604">3604</a></span>
<span class="normal"><a href="#__codelineno-0-3605">3605</a></span>
<span class="normal"><a href="#__codelineno-0-3606">3606</a></span>
<span class="normal"><a href="#__codelineno-0-3607">3607</a></span>
<span class="normal"><a href="#__codelineno-0-3608">3608</a></span>
<span class="normal"><a href="#__codelineno-0-3609">3609</a></span>
<span class="normal"><a href="#__codelineno-0-3610">3610</a></span>
<span class="normal"><a href="#__codelineno-0-3611">3611</a></span>
<span class="normal"><a href="#__codelineno-0-3612">3612</a></span>
<span class="normal"><a href="#__codelineno-0-3613">3613</a></span>
<span class="normal"><a href="#__codelineno-0-3614">3614</a></span>
<span class="normal"><a href="#__codelineno-0-3615">3615</a></span>
<span class="normal"><a href="#__codelineno-0-3616">3616</a></span>
<span class="normal"><a href="#__codelineno-0-3617">3617</a></span>
<span class="normal"><a href="#__codelineno-0-3618">3618</a></span>
<span class="normal"><a href="#__codelineno-0-3619">3619</a></span>
<span class="normal"><a href="#__codelineno-0-3620">3620</a></span>
<span class="normal"><a href="#__codelineno-0-3621">3621</a></span>
<span class="normal"><a href="#__codelineno-0-3622">3622</a></span>
<span class="normal"><a href="#__codelineno-0-3623">3623</a></span>
<span class="normal"><a href="#__codelineno-0-3624">3624</a></span>
<span class="normal"><a href="#__codelineno-0-3625">3625</a></span>
<span class="normal"><a href="#__codelineno-0-3626">3626</a></span>
<span class="normal"><a href="#__codelineno-0-3627">3627</a></span>
<span class="normal"><a href="#__codelineno-0-3628">3628</a></span>
<span class="normal"><a href="#__codelineno-0-3629">3629</a></span>
<span class="normal"><a href="#__codelineno-0-3630">3630</a></span>
<span class="normal"><a href="#__codelineno-0-3631">3631</a></span>
<span class="normal"><a href="#__codelineno-0-3632">3632</a></span>
<span class="normal"><a href="#__codelineno-0-3633">3633</a></span>
<span class="normal"><a href="#__codelineno-0-3634">3634</a></span>
<span class="normal"><a href="#__codelineno-0-3635">3635</a></span>
<span class="normal"><a href="#__codelineno-0-3636">3636</a></span>
<span class="normal"><a href="#__codelineno-0-3637">3637</a></span>
<span class="normal"><a href="#__codelineno-0-3638">3638</a></span>
<span class="normal"><a href="#__codelineno-0-3639">3639</a></span>
<span class="normal"><a href="#__codelineno-0-3640">3640</a></span>
<span class="normal"><a href="#__codelineno-0-3641">3641</a></span>
<span class="normal"><a href="#__codelineno-0-3642">3642</a></span>
<span class="normal"><a href="#__codelineno-0-3643">3643</a></span>
<span class="normal"><a href="#__codelineno-0-3644">3644</a></span>
<span class="normal"><a href="#__codelineno-0-3645">3645</a></span>
<span class="normal"><a href="#__codelineno-0-3646">3646</a></span>
<span class="normal"><a href="#__codelineno-0-3647">3647</a></span>
<span class="normal"><a href="#__codelineno-0-3648">3648</a></span>
<span class="normal"><a href="#__codelineno-0-3649">3649</a></span>
<span class="normal"><a href="#__codelineno-0-3650">3650</a></span>
<span class="normal"><a href="#__codelineno-0-3651">3651</a></span>
<span class="normal"><a href="#__codelineno-0-3652">3652</a></span>
<span class="normal"><a href="#__codelineno-0-3653">3653</a></span>
<span class="normal"><a href="#__codelineno-0-3654">3654</a></span>
<span class="normal"><a href="#__codelineno-0-3655">3655</a></span>
<span class="normal"><a href="#__codelineno-0-3656">3656</a></span>
<span class="normal"><a href="#__codelineno-0-3657">3657</a></span>
<span class="normal"><a href="#__codelineno-0-3658">3658</a></span>
<span class="normal"><a href="#__codelineno-0-3659">3659</a></span>
<span class="normal"><a href="#__codelineno-0-3660">3660</a></span>
<span class="normal"><a href="#__codelineno-0-3661">3661</a></span>
<span class="normal"><a href="#__codelineno-0-3662">3662</a></span>
<span class="normal"><a href="#__codelineno-0-3663">3663</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-3464" name="__codelineno-0-3464"></a><span class="k">def</span><span class="w"> </span><span class="nf">to_feature_collection</span><span class="p">(</span>
<a id="__codelineno-0-3465" name="__codelineno-0-3465"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-3466" name="__codelineno-0-3466"></a>    <span class="n">vector_mask</span><span class="p">:</span> <span class="n">GeoDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3467" name="__codelineno-0-3467"></a>    <span class="n">add_geometry</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-3468" name="__codelineno-0-3468"></a>    <span class="n">tile</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-3469" name="__codelineno-0-3469"></a>    <span class="n">tile_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
<a id="__codelineno-0-3470" name="__codelineno-0-3470"></a>    <span class="n">touch</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-3471" name="__codelineno-0-3471"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">GeoDataFrame</span><span class="p">]:</span>
<a id="__codelineno-0-3472" name="__codelineno-0-3472"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a dataset to a vector.</span>
<a id="__codelineno-0-3473" name="__codelineno-0-3473"></a>
<a id="__codelineno-0-3474" name="__codelineno-0-3474"></a><span class="sd">    The function does the following:</span>
<a id="__codelineno-0-3475" name="__codelineno-0-3475"></a><span class="sd">        - Flatten the array in each band in the raster then mask the values if a vector_mask file is given</span>
<a id="__codelineno-0-3476" name="__codelineno-0-3476"></a><span class="sd">            otherwise it will flatten all values.</span>
<a id="__codelineno-0-3477" name="__codelineno-0-3477"></a><span class="sd">        - Put the values for each band in a column in a dataframe under the name of the raster band,</span>
<a id="__codelineno-0-3478" name="__codelineno-0-3478"></a><span class="sd">            but if no meta-data in the raster band exists, an index number will be used [1, 2, 3, ...]</span>
<a id="__codelineno-0-3479" name="__codelineno-0-3479"></a><span class="sd">        - The function has an add_geometry parameter with two possible values [&quot;point&quot;, &quot;polygon&quot;], which you can</span>
<a id="__codelineno-0-3480" name="__codelineno-0-3480"></a><span class="sd">            specify the type of shapely geometry you want to create from each cell,</span>
<a id="__codelineno-0-3481" name="__codelineno-0-3481"></a>
<a id="__codelineno-0-3482" name="__codelineno-0-3482"></a><span class="sd">            - If point is chosen, the created point will be at the center of each cell</span>
<a id="__codelineno-0-3483" name="__codelineno-0-3483"></a><span class="sd">            - If a polygon is chosen, a square polygon will be created that covers the entire cell.</span>
<a id="__codelineno-0-3484" name="__codelineno-0-3484"></a>
<a id="__codelineno-0-3485" name="__codelineno-0-3485"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-3486" name="__codelineno-0-3486"></a><span class="sd">        vector_mask (GeoDataFrame, optional):</span>
<a id="__codelineno-0-3487" name="__codelineno-0-3487"></a><span class="sd">            GeoDataFrame for the vector_mask. If given, it will be used to clip the raster.</span>
<a id="__codelineno-0-3488" name="__codelineno-0-3488"></a><span class="sd">        add_geometry (str):</span>
<a id="__codelineno-0-3489" name="__codelineno-0-3489"></a><span class="sd">            &quot;Polygon&quot; or &quot;Point&quot; if you want to add a polygon geometry of the cells as column in dataframe.</span>
<a id="__codelineno-0-3490" name="__codelineno-0-3490"></a><span class="sd">            Default is None.</span>
<a id="__codelineno-0-3491" name="__codelineno-0-3491"></a><span class="sd">        tile (bool):</span>
<a id="__codelineno-0-3492" name="__codelineno-0-3492"></a><span class="sd">            True to use tiles in extracting the values from the raster. Default is False.</span>
<a id="__codelineno-0-3493" name="__codelineno-0-3493"></a><span class="sd">        tile_size (int):</span>
<a id="__codelineno-0-3494" name="__codelineno-0-3494"></a><span class="sd">            Tile size. Default is 1500.</span>
<a id="__codelineno-0-3495" name="__codelineno-0-3495"></a><span class="sd">        touch (bool):</span>
<a id="__codelineno-0-3496" name="__codelineno-0-3496"></a><span class="sd">            Include the cells that touch the polygon not only those that lie entirely inside the polygon mask.</span>
<a id="__codelineno-0-3497" name="__codelineno-0-3497"></a><span class="sd">            Default is True.</span>
<a id="__codelineno-0-3498" name="__codelineno-0-3498"></a>
<a id="__codelineno-0-3499" name="__codelineno-0-3499"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-3500" name="__codelineno-0-3500"></a><span class="sd">        DataFrame | GeoDataFrame:</span>
<a id="__codelineno-0-3501" name="__codelineno-0-3501"></a><span class="sd">            The resulting frame will have the band value under the name of the band (if the raster file has</span>
<a id="__codelineno-0-3502" name="__codelineno-0-3502"></a><span class="sd">            metadata; if not, the bands will be indexed from 1 to the number of bands).</span>
<a id="__codelineno-0-3503" name="__codelineno-0-3503"></a>
<a id="__codelineno-0-3504" name="__codelineno-0-3504"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-3505" name="__codelineno-0-3505"></a><span class="sd">        - Create a dataset from array with 2 bands and 3*3 array each:</span>
<a id="__codelineno-0-3506" name="__codelineno-0-3506"></a>
<a id="__codelineno-0-3507" name="__codelineno-0-3507"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-3508" name="__codelineno-0-3508"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-3509" name="__codelineno-0-3509"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.rand(2, 3, 3)</span>
<a id="__codelineno-0-3510" name="__codelineno-0-3510"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-3511" name="__codelineno-0-3511"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-3512" name="__codelineno-0-3512"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-3513" name="__codelineno-0-3513"></a><span class="sd">          &gt;&gt;&gt; print(dataset.read_array(band=0)) # doctest: +SKIP</span>
<a id="__codelineno-0-3514" name="__codelineno-0-3514"></a><span class="sd">          [[0.88625832 0.81804328 0.99372706]</span>
<a id="__codelineno-0-3515" name="__codelineno-0-3515"></a><span class="sd">           [0.85333054 0.35448201 0.78079262]</span>
<a id="__codelineno-0-3516" name="__codelineno-0-3516"></a><span class="sd">           [0.43887136 0.68166208 0.53170966]]</span>
<a id="__codelineno-0-3517" name="__codelineno-0-3517"></a><span class="sd">          &gt;&gt;&gt; print(dataset.read_array(band=1)) # doctest: +SKIP</span>
<a id="__codelineno-0-3518" name="__codelineno-0-3518"></a><span class="sd">          [[0.07051872 0.67650833 0.17625027]</span>
<a id="__codelineno-0-3519" name="__codelineno-0-3519"></a><span class="sd">           [0.41258071 0.38327938 0.18783139]</span>
<a id="__codelineno-0-3520" name="__codelineno-0-3520"></a><span class="sd">           [0.83741314 0.70446373 0.64913575]]</span>
<a id="__codelineno-0-3521" name="__codelineno-0-3521"></a>
<a id="__codelineno-0-3522" name="__codelineno-0-3522"></a><span class="sd">          ```</span>
<a id="__codelineno-0-3523" name="__codelineno-0-3523"></a>
<a id="__codelineno-0-3524" name="__codelineno-0-3524"></a><span class="sd">        - Convert the dataset to dataframe by calling the `to_feature_collection` method:</span>
<a id="__codelineno-0-3525" name="__codelineno-0-3525"></a>
<a id="__codelineno-0-3526" name="__codelineno-0-3526"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-3527" name="__codelineno-0-3527"></a><span class="sd">          &gt;&gt;&gt; df = dataset.to_feature_collection()</span>
<a id="__codelineno-0-3528" name="__codelineno-0-3528"></a><span class="sd">          &gt;&gt;&gt; print(df) # doctest: +SKIP</span>
<a id="__codelineno-0-3529" name="__codelineno-0-3529"></a><span class="sd">               Band_1    Band_2</span>
<a id="__codelineno-0-3530" name="__codelineno-0-3530"></a><span class="sd">          0  0.886258  0.070519</span>
<a id="__codelineno-0-3531" name="__codelineno-0-3531"></a><span class="sd">          1  0.818043  0.676508</span>
<a id="__codelineno-0-3532" name="__codelineno-0-3532"></a><span class="sd">          2  0.993727  0.176250</span>
<a id="__codelineno-0-3533" name="__codelineno-0-3533"></a><span class="sd">          3  0.853331  0.412581</span>
<a id="__codelineno-0-3534" name="__codelineno-0-3534"></a><span class="sd">          4  0.354482  0.383279</span>
<a id="__codelineno-0-3535" name="__codelineno-0-3535"></a><span class="sd">          5  0.780793  0.187831</span>
<a id="__codelineno-0-3536" name="__codelineno-0-3536"></a><span class="sd">          6  0.438871  0.837413</span>
<a id="__codelineno-0-3537" name="__codelineno-0-3537"></a><span class="sd">          7  0.681662  0.704464</span>
<a id="__codelineno-0-3538" name="__codelineno-0-3538"></a><span class="sd">          8  0.531710  0.649136</span>
<a id="__codelineno-0-3539" name="__codelineno-0-3539"></a>
<a id="__codelineno-0-3540" name="__codelineno-0-3540"></a><span class="sd">          ```</span>
<a id="__codelineno-0-3541" name="__codelineno-0-3541"></a>
<a id="__codelineno-0-3542" name="__codelineno-0-3542"></a><span class="sd">        - Convert the dataset into geodataframe with either a polygon or a point geometry that represents each cell.</span>
<a id="__codelineno-0-3543" name="__codelineno-0-3543"></a><span class="sd">            To specify the geometry type use the parameter `add_geometry`:</span>
<a id="__codelineno-0-3544" name="__codelineno-0-3544"></a>
<a id="__codelineno-0-3545" name="__codelineno-0-3545"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3546" name="__codelineno-0-3546"></a><span class="sd">              &gt;&gt;&gt; gdf = dataset.to_feature_collection(add_geometry=&quot;point&quot;)</span>
<a id="__codelineno-0-3547" name="__codelineno-0-3547"></a><span class="sd">              &gt;&gt;&gt; print(gdf) # doctest: +SKIP</span>
<a id="__codelineno-0-3548" name="__codelineno-0-3548"></a><span class="sd">                   Band_1    Band_2                  geometry</span>
<a id="__codelineno-0-3549" name="__codelineno-0-3549"></a><span class="sd">              0  0.886258  0.070519  POINT (0.02500 -0.02500)</span>
<a id="__codelineno-0-3550" name="__codelineno-0-3550"></a><span class="sd">              1  0.818043  0.676508  POINT (0.07500 -0.02500)</span>
<a id="__codelineno-0-3551" name="__codelineno-0-3551"></a><span class="sd">              2  0.993727  0.176250  POINT (0.12500 -0.02500)</span>
<a id="__codelineno-0-3552" name="__codelineno-0-3552"></a><span class="sd">              3  0.853331  0.412581  POINT (0.02500 -0.07500)</span>
<a id="__codelineno-0-3553" name="__codelineno-0-3553"></a><span class="sd">              4  0.354482  0.383279  POINT (0.07500 -0.07500)</span>
<a id="__codelineno-0-3554" name="__codelineno-0-3554"></a><span class="sd">              5  0.780793  0.187831  POINT (0.12500 -0.07500)</span>
<a id="__codelineno-0-3555" name="__codelineno-0-3555"></a><span class="sd">              6  0.438871  0.837413  POINT (0.02500 -0.12500)</span>
<a id="__codelineno-0-3556" name="__codelineno-0-3556"></a><span class="sd">              7  0.681662  0.704464  POINT (0.07500 -0.12500)</span>
<a id="__codelineno-0-3557" name="__codelineno-0-3557"></a><span class="sd">              8  0.531710  0.649136  POINT (0.12500 -0.12500)</span>
<a id="__codelineno-0-3558" name="__codelineno-0-3558"></a><span class="sd">              &gt;&gt;&gt; gdf = dataset.to_feature_collection(add_geometry=&quot;polygon&quot;)</span>
<a id="__codelineno-0-3559" name="__codelineno-0-3559"></a><span class="sd">              &gt;&gt;&gt; print(gdf) # doctest: +SKIP</span>
<a id="__codelineno-0-3560" name="__codelineno-0-3560"></a><span class="sd">                   Band_1    Band_2                                           geometry</span>
<a id="__codelineno-0-3561" name="__codelineno-0-3561"></a><span class="sd">              0  0.886258  0.070519  POLYGON ((0.00000 0.00000, 0.05000 0.00000, 0....</span>
<a id="__codelineno-0-3562" name="__codelineno-0-3562"></a><span class="sd">              1  0.818043  0.676508  POLYGON ((0.05000 0.00000, 0.10000 0.00000, 0....</span>
<a id="__codelineno-0-3563" name="__codelineno-0-3563"></a><span class="sd">              2  0.993727  0.176250  POLYGON ((0.10000 0.00000, 0.15000 0.00000, 0....</span>
<a id="__codelineno-0-3564" name="__codelineno-0-3564"></a><span class="sd">              3  0.853331  0.412581  POLYGON ((0.00000 -0.05000, 0.05000 -0.05000, ...</span>
<a id="__codelineno-0-3565" name="__codelineno-0-3565"></a><span class="sd">              4  0.354482  0.383279  POLYGON ((0.05000 -0.05000, 0.10000 -0.05000, ...</span>
<a id="__codelineno-0-3566" name="__codelineno-0-3566"></a><span class="sd">              5  0.780793  0.187831  POLYGON ((0.10000 -0.05000, 0.15000 -0.05000, ...</span>
<a id="__codelineno-0-3567" name="__codelineno-0-3567"></a><span class="sd">              6  0.438871  0.837413  POLYGON ((0.00000 -0.10000, 0.05000 -0.10000, ...</span>
<a id="__codelineno-0-3568" name="__codelineno-0-3568"></a><span class="sd">              7  0.681662  0.704464  POLYGON ((0.05000 -0.10000, 0.10000 -0.10000, ...</span>
<a id="__codelineno-0-3569" name="__codelineno-0-3569"></a><span class="sd">              8  0.531710  0.649136  POLYGON ((0.10000 -0.10000, 0.15000 -0.10000, ...</span>
<a id="__codelineno-0-3570" name="__codelineno-0-3570"></a>
<a id="__codelineno-0-3571" name="__codelineno-0-3571"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3572" name="__codelineno-0-3572"></a>
<a id="__codelineno-0-3573" name="__codelineno-0-3573"></a><span class="sd">        - Use a mask to crop part of the dataset, and then convert the cropped part to a dataframe/geodataframe:</span>
<a id="__codelineno-0-3574" name="__codelineno-0-3574"></a>
<a id="__codelineno-0-3575" name="__codelineno-0-3575"></a><span class="sd">          - Create a mask that covers only the cell in the middle of the dataset.</span>
<a id="__codelineno-0-3576" name="__codelineno-0-3576"></a>
<a id="__codelineno-0-3577" name="__codelineno-0-3577"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3578" name="__codelineno-0-3578"></a><span class="sd">              &gt;&gt;&gt; import geopandas as gpd</span>
<a id="__codelineno-0-3579" name="__codelineno-0-3579"></a><span class="sd">              &gt;&gt;&gt; from shapely.geometry import Polygon</span>
<a id="__codelineno-0-3580" name="__codelineno-0-3580"></a><span class="sd">              &gt;&gt;&gt; poly = gpd.GeoDataFrame(</span>
<a id="__codelineno-0-3581" name="__codelineno-0-3581"></a><span class="sd">              ...             geometry=[Polygon([(0.05, -0.05), (0.05, -0.1), (0.1, -0.1), (0.1, -0.05)])], crs=4326</span>
<a id="__codelineno-0-3582" name="__codelineno-0-3582"></a><span class="sd">              ... )</span>
<a id="__codelineno-0-3583" name="__codelineno-0-3583"></a><span class="sd">              &gt;&gt;&gt; df = dataset.to_feature_collection(vector_mask=poly)</span>
<a id="__codelineno-0-3584" name="__codelineno-0-3584"></a><span class="sd">              &gt;&gt;&gt; print(df) # doctest: +SKIP</span>
<a id="__codelineno-0-3585" name="__codelineno-0-3585"></a><span class="sd">                   Band_1    Band_2</span>
<a id="__codelineno-0-3586" name="__codelineno-0-3586"></a><span class="sd">              0  0.354482  0.383279</span>
<a id="__codelineno-0-3587" name="__codelineno-0-3587"></a>
<a id="__codelineno-0-3588" name="__codelineno-0-3588"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3589" name="__codelineno-0-3589"></a>
<a id="__codelineno-0-3590" name="__codelineno-0-3590"></a><span class="sd">        - If you have a big dataset, and you want to convert it to dataframe in tiles (do not read the whole dataset</span>
<a id="__codelineno-0-3591" name="__codelineno-0-3591"></a><span class="sd">            at once but in tiles), you can use the `tile` and the `tile_size` parameters. The values will be the</span>
<a id="__codelineno-0-3592" name="__codelineno-0-3592"></a><span class="sd">            same as above; the difference is reading in chunks:</span>
<a id="__codelineno-0-3593" name="__codelineno-0-3593"></a>
<a id="__codelineno-0-3594" name="__codelineno-0-3594"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-3595" name="__codelineno-0-3595"></a><span class="sd">              &gt;&gt;&gt; gdf = dataset.to_feature_collection(tile=True, tile_size=1)</span>
<a id="__codelineno-0-3596" name="__codelineno-0-3596"></a><span class="sd">              &gt;&gt;&gt; print(gdf) # doctest: +SKIP</span>
<a id="__codelineno-0-3597" name="__codelineno-0-3597"></a><span class="sd">                   Band_1    Band_2</span>
<a id="__codelineno-0-3598" name="__codelineno-0-3598"></a><span class="sd">              0  0.886258  0.070519</span>
<a id="__codelineno-0-3599" name="__codelineno-0-3599"></a><span class="sd">              1  0.818043  0.676508</span>
<a id="__codelineno-0-3600" name="__codelineno-0-3600"></a><span class="sd">              2  0.993727  0.176250</span>
<a id="__codelineno-0-3601" name="__codelineno-0-3601"></a><span class="sd">              3  0.853331  0.412581</span>
<a id="__codelineno-0-3602" name="__codelineno-0-3602"></a><span class="sd">              4  0.354482  0.383279</span>
<a id="__codelineno-0-3603" name="__codelineno-0-3603"></a><span class="sd">              5  0.780793  0.187831</span>
<a id="__codelineno-0-3604" name="__codelineno-0-3604"></a><span class="sd">              6  0.438871  0.837413</span>
<a id="__codelineno-0-3605" name="__codelineno-0-3605"></a><span class="sd">              7  0.681662  0.704464</span>
<a id="__codelineno-0-3606" name="__codelineno-0-3606"></a><span class="sd">              8  0.531710  0.649136</span>
<a id="__codelineno-0-3607" name="__codelineno-0-3607"></a>
<a id="__codelineno-0-3608" name="__codelineno-0-3608"></a><span class="sd">              ```</span>
<a id="__codelineno-0-3609" name="__codelineno-0-3609"></a>
<a id="__codelineno-0-3610" name="__codelineno-0-3610"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-3611" name="__codelineno-0-3611"></a>    <span class="c1"># Get raster band names. open the dataset using gdal.Open</span>
<a id="__codelineno-0-3612" name="__codelineno-0-3612"></a>    <span class="n">band_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_names</span>
<a id="__codelineno-0-3613" name="__codelineno-0-3613"></a>
<a id="__codelineno-0-3614" name="__codelineno-0-3614"></a>    <span class="c1"># Create a mask from the pixels touched by the vector_mask.</span>
<a id="__codelineno-0-3615" name="__codelineno-0-3615"></a>    <span class="k">if</span> <span class="n">vector_mask</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3616" name="__codelineno-0-3616"></a>        <span class="n">src</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="n">vector_mask</span><span class="p">,</span> <span class="n">touch</span><span class="o">=</span><span class="n">touch</span><span class="p">)</span>
<a id="__codelineno-0-3617" name="__codelineno-0-3617"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3618" name="__codelineno-0-3618"></a>        <span class="n">src</span> <span class="o">=</span> <span class="bp">self</span>
<a id="__codelineno-0-3619" name="__codelineno-0-3619"></a>
<a id="__codelineno-0-3620" name="__codelineno-0-3620"></a>    <span class="k">if</span> <span class="n">tile</span><span class="p">:</span>
<a id="__codelineno-0-3621" name="__codelineno-0-3621"></a>        <span class="n">df_list</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># DataFrames of each tile.</span>
<a id="__codelineno-0-3622" name="__codelineno-0-3622"></a>        <span class="k">for</span> <span class="n">arr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_tile</span><span class="p">(</span><span class="n">tile_size</span><span class="p">):</span>
<a id="__codelineno-0-3623" name="__codelineno-0-3623"></a>            <span class="c1"># Assume multi-band</span>
<a id="__codelineno-0-3624" name="__codelineno-0-3624"></a>            <span class="n">idx</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-0-3625" name="__codelineno-0-3625"></a>            <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-3626" name="__codelineno-0-3626"></a>                <span class="c1"># Handle single band rasters</span>
<a id="__codelineno-0-3627" name="__codelineno-0-3627"></a>                <span class="n">idx</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-3628" name="__codelineno-0-3628"></a>
<a id="__codelineno-0-3629" name="__codelineno-0-3629"></a>            <span class="n">mask_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="n">idx</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="n">idx</span><span class="p">[</span><span class="mi">1</span><span class="p">]]))</span>
<a id="__codelineno-0-3630" name="__codelineno-0-3630"></a>            <span class="n">pixels</span> <span class="o">=</span> <span class="n">get_pixels</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">mask_arr</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<a id="__codelineno-0-3631" name="__codelineno-0-3631"></a>            <span class="n">df_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pixels</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">band_names</span><span class="p">))</span>
<a id="__codelineno-0-3632" name="__codelineno-0-3632"></a>
<a id="__codelineno-0-3633" name="__codelineno-0-3633"></a>        <span class="c1"># Merge all the tiles.</span>
<a id="__codelineno-0-3634" name="__codelineno-0-3634"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">df_list</span><span class="p">)</span>
<a id="__codelineno-0-3635" name="__codelineno-0-3635"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3636" name="__codelineno-0-3636"></a>        <span class="n">arr</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">read_array</span><span class="p">()</span>
<a id="__codelineno-0-3637" name="__codelineno-0-3637"></a>
<a id="__codelineno-0-3638" name="__codelineno-0-3638"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-3639" name="__codelineno-0-3639"></a>            <span class="n">pixels</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<a id="__codelineno-0-3640" name="__codelineno-0-3640"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3641" name="__codelineno-0-3641"></a>            <span class="n">pixels</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-3642" name="__codelineno-0-3642"></a>                <span class="n">arr</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<a id="__codelineno-0-3643" name="__codelineno-0-3643"></a>                <span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">band_count</span><span class="p">,</span> <span class="n">src</span><span class="o">.</span><span class="n">columns</span> <span class="o">*</span> <span class="n">src</span><span class="o">.</span><span class="n">rows</span><span class="p">)</span>
<a id="__codelineno-0-3644" name="__codelineno-0-3644"></a>                <span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<a id="__codelineno-0-3645" name="__codelineno-0-3645"></a>            <span class="p">)</span>
<a id="__codelineno-0-3646" name="__codelineno-0-3646"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pixels</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">band_names</span><span class="p">)</span>
<a id="__codelineno-0-3647" name="__codelineno-0-3647"></a>        <span class="c1"># mask no data values.</span>
<a id="__codelineno-0-3648" name="__codelineno-0-3648"></a>        <span class="k">if</span> <span class="n">src</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3649" name="__codelineno-0-3649"></a>            <span class="n">df</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-3650" name="__codelineno-0-3650"></a>        <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-3651" name="__codelineno-0-3651"></a>
<a id="__codelineno-0-3652" name="__codelineno-0-3652"></a>    <span class="k">if</span> <span class="n">add_geometry</span><span class="p">:</span>
<a id="__codelineno-0-3653" name="__codelineno-0-3653"></a>        <span class="k">if</span> <span class="n">add_geometry</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span>
<a id="__codelineno-0-3654" name="__codelineno-0-3654"></a>            <span class="n">coords</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">get_cell_points</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-3655" name="__codelineno-0-3655"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3656" name="__codelineno-0-3656"></a>            <span class="n">coords</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">get_cell_polygons</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-3657" name="__codelineno-0-3657"></a>
<a id="__codelineno-0-3658" name="__codelineno-0-3658"></a>    <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;burn_value&quot;</span><span class="p">,</span> <span class="s2">&quot;geometry&quot;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-3659" name="__codelineno-0-3659"></a>    <span class="k">if</span> <span class="n">add_geometry</span><span class="p">:</span>
<a id="__codelineno-0-3660" name="__codelineno-0-3660"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:],</span> <span class="n">geometry</span><span class="o">=</span><span class="n">coords</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">())</span>
<a id="__codelineno-0-3661" name="__codelineno-0-3661"></a>        <span class="n">df</span><span class="o">.</span><span class="n">set_crs</span><span class="p">(</span><span class="n">coords</span><span class="o">.</span><span class="n">crs</span><span class="o">.</span><span class="n">to_epsg</span><span class="p">())</span>
<a id="__codelineno-0-3662" name="__codelineno-0-3662"></a>
<a id="__codelineno-0-3663" name="__codelineno-0-3663"></a>    <span class="k">return</span> <span class="n">df</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.apply" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.apply" class="toclink">
            <code class="highlight language-python"><span class="n">apply</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.apply" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Apply a function to all domain cells.</p>
<ul>
<li>apply method executes a mathematical operation on the raster array.</li>
<li>The apply method executes the function only on one cell at a time.</li>
</ul>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>func</code>
            </td>
            <td>
                  <code><span title="function">function</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Defined function that takes one input (the cell value).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>band</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Band number.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Dataset</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;pyramids.dataset.Dataset&lt;/code&gt;" href="#pyramids.dataset.Dataset">Dataset</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dataset object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create a dataset from an array filled with values between -1 and 1:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">read_array</span><span class="p">())</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="p">[[</span> <span class="mf">0.94997539</span> <span class="o">-</span><span class="mf">0.80083622</span> <span class="o">-</span><span class="mf">0.30948769</span> <span class="o">-</span><span class="mf">0.77439961</span> <span class="o">-</span><span class="mf">0.83836424</span><span class="p">]</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a> <span class="p">[</span><span class="o">-</span><span class="mf">0.36810158</span> <span class="o">-</span><span class="mf">0.23979251</span>  <span class="mf">0.88051216</span> <span class="o">-</span><span class="mf">0.46882913</span>  <span class="mf">0.64511056</span><span class="p">]</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a> <span class="p">[</span> <span class="mf">0.50585374</span> <span class="o">-</span><span class="mf">0.46905902</span>  <span class="mf">0.67856589</span>  <span class="mf">0.2779605</span>   <span class="mf">0.05589759</span><span class="p">]</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a> <span class="p">[</span> <span class="mf">0.63382852</span> <span class="o">-</span><span class="mf">0.49259597</span>  <span class="mf">0.18471423</span> <span class="o">-</span><span class="mf">0.49308984</span> <span class="o">-</span><span class="mf">0.52840286</span><span class="p">]</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a> <span class="p">[</span><span class="o">-</span><span class="mf">0.34076174</span> <span class="o">-</span><span class="mf">0.53073014</span> <span class="o">-</span><span class="mf">0.18485789</span> <span class="o">-</span><span class="mf">0.40033474</span> <span class="o">-</span><span class="mf">0.38962938</span><span class="p">]]</span>
</code></pre></div>
<ul>
<li>Apply the absolute function to the dataset:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">abs_dataset</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">abs_dataset</span><span class="o">.</span><span class="n">read_array</span><span class="p">())</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="p">[[</span><span class="mf">0.94997539</span> <span class="mf">0.80083622</span> <span class="mf">0.30948769</span> <span class="mf">0.77439961</span> <span class="mf">0.83836424</span><span class="p">]</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a> <span class="p">[</span><span class="mf">0.36810158</span> <span class="mf">0.23979251</span> <span class="mf">0.88051216</span> <span class="mf">0.46882913</span> <span class="mf">0.64511056</span><span class="p">]</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a> <span class="p">[</span><span class="mf">0.50585374</span> <span class="mf">0.46905902</span> <span class="mf">0.67856589</span> <span class="mf">0.2779605</span>  <span class="mf">0.05589759</span><span class="p">]</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a> <span class="p">[</span><span class="mf">0.63382852</span> <span class="mf">0.49259597</span> <span class="mf">0.18471423</span> <span class="mf">0.49308984</span> <span class="mf">0.52840286</span><span class="p">]</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a> <span class="p">[</span><span class="mf">0.34076174</span> <span class="mf">0.53073014</span> <span class="mf">0.18485789</span> <span class="mf">0.40033474</span> <span class="mf">0.38962938</span><span class="p">]]</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3665">3665</a></span>
<span class="normal"><a href="#__codelineno-0-3666">3666</a></span>
<span class="normal"><a href="#__codelineno-0-3667">3667</a></span>
<span class="normal"><a href="#__codelineno-0-3668">3668</a></span>
<span class="normal"><a href="#__codelineno-0-3669">3669</a></span>
<span class="normal"><a href="#__codelineno-0-3670">3670</a></span>
<span class="normal"><a href="#__codelineno-0-3671">3671</a></span>
<span class="normal"><a href="#__codelineno-0-3672">3672</a></span>
<span class="normal"><a href="#__codelineno-0-3673">3673</a></span>
<span class="normal"><a href="#__codelineno-0-3674">3674</a></span>
<span class="normal"><a href="#__codelineno-0-3675">3675</a></span>
<span class="normal"><a href="#__codelineno-0-3676">3676</a></span>
<span class="normal"><a href="#__codelineno-0-3677">3677</a></span>
<span class="normal"><a href="#__codelineno-0-3678">3678</a></span>
<span class="normal"><a href="#__codelineno-0-3679">3679</a></span>
<span class="normal"><a href="#__codelineno-0-3680">3680</a></span>
<span class="normal"><a href="#__codelineno-0-3681">3681</a></span>
<span class="normal"><a href="#__codelineno-0-3682">3682</a></span>
<span class="normal"><a href="#__codelineno-0-3683">3683</a></span>
<span class="normal"><a href="#__codelineno-0-3684">3684</a></span>
<span class="normal"><a href="#__codelineno-0-3685">3685</a></span>
<span class="normal"><a href="#__codelineno-0-3686">3686</a></span>
<span class="normal"><a href="#__codelineno-0-3687">3687</a></span>
<span class="normal"><a href="#__codelineno-0-3688">3688</a></span>
<span class="normal"><a href="#__codelineno-0-3689">3689</a></span>
<span class="normal"><a href="#__codelineno-0-3690">3690</a></span>
<span class="normal"><a href="#__codelineno-0-3691">3691</a></span>
<span class="normal"><a href="#__codelineno-0-3692">3692</a></span>
<span class="normal"><a href="#__codelineno-0-3693">3693</a></span>
<span class="normal"><a href="#__codelineno-0-3694">3694</a></span>
<span class="normal"><a href="#__codelineno-0-3695">3695</a></span>
<span class="normal"><a href="#__codelineno-0-3696">3696</a></span>
<span class="normal"><a href="#__codelineno-0-3697">3697</a></span>
<span class="normal"><a href="#__codelineno-0-3698">3698</a></span>
<span class="normal"><a href="#__codelineno-0-3699">3699</a></span>
<span class="normal"><a href="#__codelineno-0-3700">3700</a></span>
<span class="normal"><a href="#__codelineno-0-3701">3701</a></span>
<span class="normal"><a href="#__codelineno-0-3702">3702</a></span>
<span class="normal"><a href="#__codelineno-0-3703">3703</a></span>
<span class="normal"><a href="#__codelineno-0-3704">3704</a></span>
<span class="normal"><a href="#__codelineno-0-3705">3705</a></span>
<span class="normal"><a href="#__codelineno-0-3706">3706</a></span>
<span class="normal"><a href="#__codelineno-0-3707">3707</a></span>
<span class="normal"><a href="#__codelineno-0-3708">3708</a></span>
<span class="normal"><a href="#__codelineno-0-3709">3709</a></span>
<span class="normal"><a href="#__codelineno-0-3710">3710</a></span>
<span class="normal"><a href="#__codelineno-0-3711">3711</a></span>
<span class="normal"><a href="#__codelineno-0-3712">3712</a></span>
<span class="normal"><a href="#__codelineno-0-3713">3713</a></span>
<span class="normal"><a href="#__codelineno-0-3714">3714</a></span>
<span class="normal"><a href="#__codelineno-0-3715">3715</a></span>
<span class="normal"><a href="#__codelineno-0-3716">3716</a></span>
<span class="normal"><a href="#__codelineno-0-3717">3717</a></span>
<span class="normal"><a href="#__codelineno-0-3718">3718</a></span>
<span class="normal"><a href="#__codelineno-0-3719">3719</a></span>
<span class="normal"><a href="#__codelineno-0-3720">3720</a></span>
<span class="normal"><a href="#__codelineno-0-3721">3721</a></span>
<span class="normal"><a href="#__codelineno-0-3722">3722</a></span>
<span class="normal"><a href="#__codelineno-0-3723">3723</a></span>
<span class="normal"><a href="#__codelineno-0-3724">3724</a></span>
<span class="normal"><a href="#__codelineno-0-3725">3725</a></span>
<span class="normal"><a href="#__codelineno-0-3726">3726</a></span>
<span class="normal"><a href="#__codelineno-0-3727">3727</a></span>
<span class="normal"><a href="#__codelineno-0-3728">3728</a></span>
<span class="normal"><a href="#__codelineno-0-3729">3729</a></span>
<span class="normal"><a href="#__codelineno-0-3730">3730</a></span>
<span class="normal"><a href="#__codelineno-0-3731">3731</a></span>
<span class="normal"><a href="#__codelineno-0-3732">3732</a></span>
<span class="normal"><a href="#__codelineno-0-3733">3733</a></span>
<span class="normal"><a href="#__codelineno-0-3734">3734</a></span>
<span class="normal"><a href="#__codelineno-0-3735">3735</a></span>
<span class="normal"><a href="#__codelineno-0-3736">3736</a></span>
<span class="normal"><a href="#__codelineno-0-3737">3737</a></span>
<span class="normal"><a href="#__codelineno-0-3738">3738</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-3665" name="__codelineno-0-3665"></a><span class="k">def</span><span class="w"> </span><span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-3666" name="__codelineno-0-3666"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Apply a function to all domain cells.</span>
<a id="__codelineno-0-3667" name="__codelineno-0-3667"></a>
<a id="__codelineno-0-3668" name="__codelineno-0-3668"></a><span class="sd">    - apply method executes a mathematical operation on the raster array.</span>
<a id="__codelineno-0-3669" name="__codelineno-0-3669"></a><span class="sd">    - The apply method executes the function only on one cell at a time.</span>
<a id="__codelineno-0-3670" name="__codelineno-0-3670"></a>
<a id="__codelineno-0-3671" name="__codelineno-0-3671"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-3672" name="__codelineno-0-3672"></a><span class="sd">        func (function):</span>
<a id="__codelineno-0-3673" name="__codelineno-0-3673"></a><span class="sd">            Defined function that takes one input (the cell value).</span>
<a id="__codelineno-0-3674" name="__codelineno-0-3674"></a><span class="sd">        band (int):</span>
<a id="__codelineno-0-3675" name="__codelineno-0-3675"></a><span class="sd">            Band number.</span>
<a id="__codelineno-0-3676" name="__codelineno-0-3676"></a>
<a id="__codelineno-0-3677" name="__codelineno-0-3677"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-3678" name="__codelineno-0-3678"></a><span class="sd">        Dataset:</span>
<a id="__codelineno-0-3679" name="__codelineno-0-3679"></a><span class="sd">            Dataset object.</span>
<a id="__codelineno-0-3680" name="__codelineno-0-3680"></a>
<a id="__codelineno-0-3681" name="__codelineno-0-3681"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-3682" name="__codelineno-0-3682"></a><span class="sd">        - Create a dataset from an array filled with values between -1 and 1:</span>
<a id="__codelineno-0-3683" name="__codelineno-0-3683"></a>
<a id="__codelineno-0-3684" name="__codelineno-0-3684"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-3685" name="__codelineno-0-3685"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-3686" name="__codelineno-0-3686"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.uniform(-1, 1, size=(5, 5))</span>
<a id="__codelineno-0-3687" name="__codelineno-0-3687"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-3688" name="__codelineno-0-3688"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-3689" name="__codelineno-0-3689"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-3690" name="__codelineno-0-3690"></a><span class="sd">          &gt;&gt;&gt; print(dataset.read_array()) # doctest: +SKIP</span>
<a id="__codelineno-0-3691" name="__codelineno-0-3691"></a><span class="sd">          [[ 0.94997539 -0.80083622 -0.30948769 -0.77439961 -0.83836424]</span>
<a id="__codelineno-0-3692" name="__codelineno-0-3692"></a><span class="sd">           [-0.36810158 -0.23979251  0.88051216 -0.46882913  0.64511056]</span>
<a id="__codelineno-0-3693" name="__codelineno-0-3693"></a><span class="sd">           [ 0.50585374 -0.46905902  0.67856589  0.2779605   0.05589759]</span>
<a id="__codelineno-0-3694" name="__codelineno-0-3694"></a><span class="sd">           [ 0.63382852 -0.49259597  0.18471423 -0.49308984 -0.52840286]</span>
<a id="__codelineno-0-3695" name="__codelineno-0-3695"></a><span class="sd">           [-0.34076174 -0.53073014 -0.18485789 -0.40033474 -0.38962938]]</span>
<a id="__codelineno-0-3696" name="__codelineno-0-3696"></a>
<a id="__codelineno-0-3697" name="__codelineno-0-3697"></a><span class="sd">          ```</span>
<a id="__codelineno-0-3698" name="__codelineno-0-3698"></a>
<a id="__codelineno-0-3699" name="__codelineno-0-3699"></a><span class="sd">        - Apply the absolute function to the dataset:</span>
<a id="__codelineno-0-3700" name="__codelineno-0-3700"></a>
<a id="__codelineno-0-3701" name="__codelineno-0-3701"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-3702" name="__codelineno-0-3702"></a><span class="sd">          &gt;&gt;&gt; abs_dataset = dataset.apply(np.abs)</span>
<a id="__codelineno-0-3703" name="__codelineno-0-3703"></a><span class="sd">          &gt;&gt;&gt; print(abs_dataset.read_array()) # doctest: +SKIP</span>
<a id="__codelineno-0-3704" name="__codelineno-0-3704"></a><span class="sd">          [[0.94997539 0.80083622 0.30948769 0.77439961 0.83836424]</span>
<a id="__codelineno-0-3705" name="__codelineno-0-3705"></a><span class="sd">           [0.36810158 0.23979251 0.88051216 0.46882913 0.64511056]</span>
<a id="__codelineno-0-3706" name="__codelineno-0-3706"></a><span class="sd">           [0.50585374 0.46905902 0.67856589 0.2779605  0.05589759]</span>
<a id="__codelineno-0-3707" name="__codelineno-0-3707"></a><span class="sd">           [0.63382852 0.49259597 0.18471423 0.49308984 0.52840286]</span>
<a id="__codelineno-0-3708" name="__codelineno-0-3708"></a><span class="sd">           [0.34076174 0.53073014 0.18485789 0.40033474 0.38962938]]</span>
<a id="__codelineno-0-3709" name="__codelineno-0-3709"></a>
<a id="__codelineno-0-3710" name="__codelineno-0-3710"></a><span class="sd">          ```</span>
<a id="__codelineno-0-3711" name="__codelineno-0-3711"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-3712" name="__codelineno-0-3712"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
<a id="__codelineno-0-3713" name="__codelineno-0-3713"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The second argument should be a function&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3714" name="__codelineno-0-3714"></a>
<a id="__codelineno-0-3715" name="__codelineno-0-3715"></a>    <span class="n">no_data_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="n">band</span><span class="p">]</span>
<a id="__codelineno-0-3716" name="__codelineno-0-3716"></a>    <span class="n">src_array</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-3717" name="__codelineno-0-3717"></a>    <span class="n">dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gdal_dtype</span><span class="p">[</span><span class="n">band</span><span class="p">]</span>
<a id="__codelineno-0-3718" name="__codelineno-0-3718"></a>
<a id="__codelineno-0-3719" name="__codelineno-0-3719"></a>    <span class="c1"># fill the new array with the nodata value</span>
<a id="__codelineno-0-3720" name="__codelineno-0-3720"></a>    <span class="n">new_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">rows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span> <span class="o">*</span> <span class="n">no_data_value</span>
<a id="__codelineno-0-3721" name="__codelineno-0-3721"></a>    <span class="c1"># execute the function on each cell</span>
<a id="__codelineno-0-3722" name="__codelineno-0-3722"></a>    <span class="c1"># TODO: optimize executing a function over a whole array</span>
<a id="__codelineno-0-3723" name="__codelineno-0-3723"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rows</span><span class="p">):</span>
<a id="__codelineno-0-3724" name="__codelineno-0-3724"></a>        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
<a id="__codelineno-0-3725" name="__codelineno-0-3725"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">src_array</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">no_data_value</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">):</span>
<a id="__codelineno-0-3726" name="__codelineno-0-3726"></a>                <span class="n">new_array</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">src_array</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span>
<a id="__codelineno-0-3727" name="__codelineno-0-3727"></a>
<a id="__codelineno-0-3728" name="__codelineno-0-3728"></a>    <span class="c1"># create the output raster</span>
<a id="__codelineno-0-3729" name="__codelineno-0-3729"></a>    <span class="n">dst</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_create_dataset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;MEM&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3730" name="__codelineno-0-3730"></a>    <span class="c1"># set the geotransform</span>
<a id="__codelineno-0-3731" name="__codelineno-0-3731"></a>    <span class="n">dst</span><span class="o">.</span><span class="n">SetGeoTransform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">)</span>
<a id="__codelineno-0-3732" name="__codelineno-0-3732"></a>    <span class="c1"># set the projection</span>
<a id="__codelineno-0-3733" name="__codelineno-0-3733"></a>    <span class="n">dst</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-0-3734" name="__codelineno-0-3734"></a>    <span class="n">dst_obj</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
<a id="__codelineno-0-3735" name="__codelineno-0-3735"></a>    <span class="n">dst_obj</span><span class="o">.</span><span class="n">_set_no_data_value</span><span class="p">(</span><span class="n">no_data_value</span><span class="o">=</span><span class="n">no_data_value</span><span class="p">)</span>
<a id="__codelineno-0-3736" name="__codelineno-0-3736"></a>    <span class="n">dst_obj</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="n">band</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">new_array</span><span class="p">)</span>
<a id="__codelineno-0-3737" name="__codelineno-0-3737"></a>
<a id="__codelineno-0-3738" name="__codelineno-0-3738"></a>    <span class="k">return</span> <span class="n">dst_obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.fill" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.fill" class="toclink">
            <code class="highlight language-python"><span class="n">fill</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.fill" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Fill the domain cells with a certain value.</p>
<div class="highlight"><pre><span></span><code>Fill takes a raster and fills it with one value
</code></pre></div>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="float">float</span> | <span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Numeric value to fill.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>inplace</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, the original dataset will be modified. If False, a new dataset will be created. Default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path including the extension (.tif).</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Dataset</code></td>            <td>
                  <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;pyramids.dataset.Dataset&lt;/code&gt;" href="#pyramids.dataset.Dataset">Dataset</a>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resulting dataset if inplace is False; otherwise None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create a Dataset with 1 band, 5 rows, 5 columns, at the point lon/lat (0, 0):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">read_array</span><span class="p">())</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="p">[[</span><span class="mi">1</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">]</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a> <span class="p">[</span><span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">]</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a> <span class="p">[</span><span class="mi">2</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a> <span class="p">[</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a> <span class="p">[</span><span class="mi">4</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">1</span><span class="p">]]</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">new_dataset</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">new_dataset</span><span class="o">.</span><span class="n">read_array</span><span class="p">())</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="p">[[</span><span class="mi">10</span> <span class="mi">10</span> <span class="mi">10</span> <span class="mi">10</span> <span class="mi">10</span><span class="p">]</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a> <span class="p">[</span><span class="mi">10</span> <span class="mi">10</span> <span class="mi">10</span> <span class="mi">10</span> <span class="mi">10</span><span class="p">]</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a> <span class="p">[</span><span class="mi">10</span> <span class="mi">10</span> <span class="mi">10</span> <span class="mi">10</span> <span class="mi">10</span><span class="p">]</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a> <span class="p">[</span><span class="mi">10</span> <span class="mi">10</span> <span class="mi">10</span> <span class="mi">10</span> <span class="mi">10</span><span class="p">]</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a> <span class="p">[</span><span class="mi">10</span> <span class="mi">10</span> <span class="mi">10</span> <span class="mi">10</span> <span class="mi">10</span><span class="p">]]</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3740">3740</a></span>
<span class="normal"><a href="#__codelineno-0-3741">3741</a></span>
<span class="normal"><a href="#__codelineno-0-3742">3742</a></span>
<span class="normal"><a href="#__codelineno-0-3743">3743</a></span>
<span class="normal"><a href="#__codelineno-0-3744">3744</a></span>
<span class="normal"><a href="#__codelineno-0-3745">3745</a></span>
<span class="normal"><a href="#__codelineno-0-3746">3746</a></span>
<span class="normal"><a href="#__codelineno-0-3747">3747</a></span>
<span class="normal"><a href="#__codelineno-0-3748">3748</a></span>
<span class="normal"><a href="#__codelineno-0-3749">3749</a></span>
<span class="normal"><a href="#__codelineno-0-3750">3750</a></span>
<span class="normal"><a href="#__codelineno-0-3751">3751</a></span>
<span class="normal"><a href="#__codelineno-0-3752">3752</a></span>
<span class="normal"><a href="#__codelineno-0-3753">3753</a></span>
<span class="normal"><a href="#__codelineno-0-3754">3754</a></span>
<span class="normal"><a href="#__codelineno-0-3755">3755</a></span>
<span class="normal"><a href="#__codelineno-0-3756">3756</a></span>
<span class="normal"><a href="#__codelineno-0-3757">3757</a></span>
<span class="normal"><a href="#__codelineno-0-3758">3758</a></span>
<span class="normal"><a href="#__codelineno-0-3759">3759</a></span>
<span class="normal"><a href="#__codelineno-0-3760">3760</a></span>
<span class="normal"><a href="#__codelineno-0-3761">3761</a></span>
<span class="normal"><a href="#__codelineno-0-3762">3762</a></span>
<span class="normal"><a href="#__codelineno-0-3763">3763</a></span>
<span class="normal"><a href="#__codelineno-0-3764">3764</a></span>
<span class="normal"><a href="#__codelineno-0-3765">3765</a></span>
<span class="normal"><a href="#__codelineno-0-3766">3766</a></span>
<span class="normal"><a href="#__codelineno-0-3767">3767</a></span>
<span class="normal"><a href="#__codelineno-0-3768">3768</a></span>
<span class="normal"><a href="#__codelineno-0-3769">3769</a></span>
<span class="normal"><a href="#__codelineno-0-3770">3770</a></span>
<span class="normal"><a href="#__codelineno-0-3771">3771</a></span>
<span class="normal"><a href="#__codelineno-0-3772">3772</a></span>
<span class="normal"><a href="#__codelineno-0-3773">3773</a></span>
<span class="normal"><a href="#__codelineno-0-3774">3774</a></span>
<span class="normal"><a href="#__codelineno-0-3775">3775</a></span>
<span class="normal"><a href="#__codelineno-0-3776">3776</a></span>
<span class="normal"><a href="#__codelineno-0-3777">3777</a></span>
<span class="normal"><a href="#__codelineno-0-3778">3778</a></span>
<span class="normal"><a href="#__codelineno-0-3779">3779</a></span>
<span class="normal"><a href="#__codelineno-0-3780">3780</a></span>
<span class="normal"><a href="#__codelineno-0-3781">3781</a></span>
<span class="normal"><a href="#__codelineno-0-3782">3782</a></span>
<span class="normal"><a href="#__codelineno-0-3783">3783</a></span>
<span class="normal"><a href="#__codelineno-0-3784">3784</a></span>
<span class="normal"><a href="#__codelineno-0-3785">3785</a></span>
<span class="normal"><a href="#__codelineno-0-3786">3786</a></span>
<span class="normal"><a href="#__codelineno-0-3787">3787</a></span>
<span class="normal"><a href="#__codelineno-0-3788">3788</a></span>
<span class="normal"><a href="#__codelineno-0-3789">3789</a></span>
<span class="normal"><a href="#__codelineno-0-3790">3790</a></span>
<span class="normal"><a href="#__codelineno-0-3791">3791</a></span>
<span class="normal"><a href="#__codelineno-0-3792">3792</a></span>
<span class="normal"><a href="#__codelineno-0-3793">3793</a></span>
<span class="normal"><a href="#__codelineno-0-3794">3794</a></span>
<span class="normal"><a href="#__codelineno-0-3795">3795</a></span>
<span class="normal"><a href="#__codelineno-0-3796">3796</a></span>
<span class="normal"><a href="#__codelineno-0-3797">3797</a></span>
<span class="normal"><a href="#__codelineno-0-3798">3798</a></span>
<span class="normal"><a href="#__codelineno-0-3799">3799</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-3740" name="__codelineno-0-3740"></a><span class="k">def</span><span class="w"> </span><span class="nf">fill</span><span class="p">(</span>
<a id="__codelineno-0-3741" name="__codelineno-0-3741"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-3742" name="__codelineno-0-3742"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Dataset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<a id="__codelineno-0-3743" name="__codelineno-0-3743"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Fill the domain cells with a certain value.</span>
<a id="__codelineno-0-3744" name="__codelineno-0-3744"></a>
<a id="__codelineno-0-3745" name="__codelineno-0-3745"></a><span class="sd">        Fill takes a raster and fills it with one value</span>
<a id="__codelineno-0-3746" name="__codelineno-0-3746"></a>
<a id="__codelineno-0-3747" name="__codelineno-0-3747"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-3748" name="__codelineno-0-3748"></a><span class="sd">        value (float | int):</span>
<a id="__codelineno-0-3749" name="__codelineno-0-3749"></a><span class="sd">            Numeric value to fill.</span>
<a id="__codelineno-0-3750" name="__codelineno-0-3750"></a><span class="sd">        inplace (bool):</span>
<a id="__codelineno-0-3751" name="__codelineno-0-3751"></a><span class="sd">            If True, the original dataset will be modified. If False, a new dataset will be created. Default is False.</span>
<a id="__codelineno-0-3752" name="__codelineno-0-3752"></a><span class="sd">        path (str):</span>
<a id="__codelineno-0-3753" name="__codelineno-0-3753"></a><span class="sd">            Path including the extension (.tif).</span>
<a id="__codelineno-0-3754" name="__codelineno-0-3754"></a>
<a id="__codelineno-0-3755" name="__codelineno-0-3755"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-3756" name="__codelineno-0-3756"></a><span class="sd">        Dataset:</span>
<a id="__codelineno-0-3757" name="__codelineno-0-3757"></a><span class="sd">            The resulting dataset if inplace is False; otherwise None.</span>
<a id="__codelineno-0-3758" name="__codelineno-0-3758"></a>
<a id="__codelineno-0-3759" name="__codelineno-0-3759"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-3760" name="__codelineno-0-3760"></a><span class="sd">        - Create a Dataset with 1 band, 5 rows, 5 columns, at the point lon/lat (0, 0):</span>
<a id="__codelineno-0-3761" name="__codelineno-0-3761"></a>
<a id="__codelineno-0-3762" name="__codelineno-0-3762"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-3763" name="__codelineno-0-3763"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-3764" name="__codelineno-0-3764"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.randint(1, 5, size=(5, 5))</span>
<a id="__codelineno-0-3765" name="__codelineno-0-3765"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-3766" name="__codelineno-0-3766"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-3767" name="__codelineno-0-3767"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-3768" name="__codelineno-0-3768"></a><span class="sd">          &gt;&gt;&gt; print(dataset.read_array()) # doctest: +SKIP</span>
<a id="__codelineno-0-3769" name="__codelineno-0-3769"></a><span class="sd">          [[1 1 3 1 2]</span>
<a id="__codelineno-0-3770" name="__codelineno-0-3770"></a><span class="sd">           [2 2 2 1 2]</span>
<a id="__codelineno-0-3771" name="__codelineno-0-3771"></a><span class="sd">           [2 2 3 1 3]</span>
<a id="__codelineno-0-3772" name="__codelineno-0-3772"></a><span class="sd">           [3 4 3 3 4]</span>
<a id="__codelineno-0-3773" name="__codelineno-0-3773"></a><span class="sd">           [4 4 2 1 1]]</span>
<a id="__codelineno-0-3774" name="__codelineno-0-3774"></a><span class="sd">          &gt;&gt;&gt; new_dataset = dataset.fill(10)</span>
<a id="__codelineno-0-3775" name="__codelineno-0-3775"></a><span class="sd">          &gt;&gt;&gt; print(new_dataset.read_array())</span>
<a id="__codelineno-0-3776" name="__codelineno-0-3776"></a><span class="sd">          [[10 10 10 10 10]</span>
<a id="__codelineno-0-3777" name="__codelineno-0-3777"></a><span class="sd">           [10 10 10 10 10]</span>
<a id="__codelineno-0-3778" name="__codelineno-0-3778"></a><span class="sd">           [10 10 10 10 10]</span>
<a id="__codelineno-0-3779" name="__codelineno-0-3779"></a><span class="sd">           [10 10 10 10 10]</span>
<a id="__codelineno-0-3780" name="__codelineno-0-3780"></a><span class="sd">           [10 10 10 10 10]]</span>
<a id="__codelineno-0-3781" name="__codelineno-0-3781"></a>
<a id="__codelineno-0-3782" name="__codelineno-0-3782"></a><span class="sd">          ```</span>
<a id="__codelineno-0-3783" name="__codelineno-0-3783"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-3784" name="__codelineno-0-3784"></a>    <span class="n">no_data_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-3785" name="__codelineno-0-3785"></a>    <span class="n">src_array</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
<a id="__codelineno-0-3786" name="__codelineno-0-3786"></a>
<a id="__codelineno-0-3787" name="__codelineno-0-3787"></a>    <span class="k">if</span> <span class="n">no_data_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-3788" name="__codelineno-0-3788"></a>        <span class="n">no_data_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<a id="__codelineno-0-3789" name="__codelineno-0-3789"></a>
<a id="__codelineno-0-3790" name="__codelineno-0-3790"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">no_data_value</span><span class="p">):</span>
<a id="__codelineno-0-3791" name="__codelineno-0-3791"></a>        <span class="n">src_array</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">src_array</span><span class="p">,</span> <span class="n">no_data_value</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.000001</span><span class="p">)]</span> <span class="o">=</span> <span class="n">value</span>
<a id="__codelineno-0-3792" name="__codelineno-0-3792"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3793" name="__codelineno-0-3793"></a>        <span class="n">src_array</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">src_array</span><span class="p">)]</span> <span class="o">=</span> <span class="n">value</span>
<a id="__codelineno-0-3794" name="__codelineno-0-3794"></a>
<a id="__codelineno-0-3795" name="__codelineno-0-3795"></a>    <span class="n">dst</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">dataset_like</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">src_array</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-3796" name="__codelineno-0-3796"></a>    <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
<a id="__codelineno-0-3797" name="__codelineno-0-3797"></a>        <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dst</span><span class="o">.</span><span class="n">raster</span><span class="p">)</span>
<a id="__codelineno-0-3798" name="__codelineno-0-3798"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-3799" name="__codelineno-0-3799"></a>        <span class="k">return</span> <span class="n">dst</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.resample" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.resample" class="toclink">
            <code class="highlight language-python"><span class="n">resample</span><span class="p">(</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;nearest neighbor&#39;</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.resample" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>resample.</p>
<p>resample method reprojects a raster to any projection (default the WGS84 web mercator projection,
without resampling). The function returns a GDAL in-memory file object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>cell_size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New cell size to resample the raster. If None, raster will not be resampled.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>method</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Resampling method: "nearest neighbor", "cubic", or "bilinear". Default is "nearest neighbor".</p>
              </div>
            </td>
            <td>
                  <code>&#39;nearest neighbor&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Dataset</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;pyramids.dataset.Dataset&lt;/code&gt;" href="#pyramids.dataset.Dataset">Dataset</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dataset object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create a Dataset with 4 bands, 10 rows, 10 columns, at lon/lat (0, 0):</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">0.05</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">10</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">4326</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">4</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_2&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_3&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_4&#39;</span><span class="p">]</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">9999.0</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">float64</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>            <span class="n">File</span><span class="p">:</span> <span class="o">...</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="p">(</span><span class="o">&lt;</span><span class="n">Figure</span> <span class="n">size</span> <span class="mi">800</span><span class="n">x800</span> <span class="k">with</span> <span class="mi">2</span> <span class="n">Axes</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Axes</span><span class="p">:</span> <span class="o">&gt;</span><span class="p">)</span>
</code></pre></div>
  <img alt="resample-source" src="../../_images/dataset/resample-source.png" /></p>
<ul>
<li>Resample the raster to a new cell size of 0.1:</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">new_dataset</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="n">cell_size</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">new_dataset</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">0.1</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">5</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">4326</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">4</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_2&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_3&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_4&#39;</span><span class="p">]</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">9999.0</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">float64</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>            <span class="n">File</span><span class="p">:</span><span class="o">...</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">new_dataset</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="p">(</span><span class="o">&lt;</span><span class="n">Figure</span> <span class="n">size</span> <span class="mi">800</span><span class="n">x800</span> <span class="k">with</span> <span class="mi">2</span> <span class="n">Axes</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Axes</span><span class="p">:</span> <span class="o">&gt;</span><span class="p">)</span>
</code></pre></div>
  <img alt="resample-new" src="../../_images/dataset/resample-new.png" /></p>
<ul>
<li>Resampling the dataset from cell_size 0.05 to 0.1 degrees reduced the number of cells to 5 in each dimension instead of 10.</li>
</ul>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-3801">3801</a></span>
<span class="normal"><a href="#__codelineno-0-3802">3802</a></span>
<span class="normal"><a href="#__codelineno-0-3803">3803</a></span>
<span class="normal"><a href="#__codelineno-0-3804">3804</a></span>
<span class="normal"><a href="#__codelineno-0-3805">3805</a></span>
<span class="normal"><a href="#__codelineno-0-3806">3806</a></span>
<span class="normal"><a href="#__codelineno-0-3807">3807</a></span>
<span class="normal"><a href="#__codelineno-0-3808">3808</a></span>
<span class="normal"><a href="#__codelineno-0-3809">3809</a></span>
<span class="normal"><a href="#__codelineno-0-3810">3810</a></span>
<span class="normal"><a href="#__codelineno-0-3811">3811</a></span>
<span class="normal"><a href="#__codelineno-0-3812">3812</a></span>
<span class="normal"><a href="#__codelineno-0-3813">3813</a></span>
<span class="normal"><a href="#__codelineno-0-3814">3814</a></span>
<span class="normal"><a href="#__codelineno-0-3815">3815</a></span>
<span class="normal"><a href="#__codelineno-0-3816">3816</a></span>
<span class="normal"><a href="#__codelineno-0-3817">3817</a></span>
<span class="normal"><a href="#__codelineno-0-3818">3818</a></span>
<span class="normal"><a href="#__codelineno-0-3819">3819</a></span>
<span class="normal"><a href="#__codelineno-0-3820">3820</a></span>
<span class="normal"><a href="#__codelineno-0-3821">3821</a></span>
<span class="normal"><a href="#__codelineno-0-3822">3822</a></span>
<span class="normal"><a href="#__codelineno-0-3823">3823</a></span>
<span class="normal"><a href="#__codelineno-0-3824">3824</a></span>
<span class="normal"><a href="#__codelineno-0-3825">3825</a></span>
<span class="normal"><a href="#__codelineno-0-3826">3826</a></span>
<span class="normal"><a href="#__codelineno-0-3827">3827</a></span>
<span class="normal"><a href="#__codelineno-0-3828">3828</a></span>
<span class="normal"><a href="#__codelineno-0-3829">3829</a></span>
<span class="normal"><a href="#__codelineno-0-3830">3830</a></span>
<span class="normal"><a href="#__codelineno-0-3831">3831</a></span>
<span class="normal"><a href="#__codelineno-0-3832">3832</a></span>
<span class="normal"><a href="#__codelineno-0-3833">3833</a></span>
<span class="normal"><a href="#__codelineno-0-3834">3834</a></span>
<span class="normal"><a href="#__codelineno-0-3835">3835</a></span>
<span class="normal"><a href="#__codelineno-0-3836">3836</a></span>
<span class="normal"><a href="#__codelineno-0-3837">3837</a></span>
<span class="normal"><a href="#__codelineno-0-3838">3838</a></span>
<span class="normal"><a href="#__codelineno-0-3839">3839</a></span>
<span class="normal"><a href="#__codelineno-0-3840">3840</a></span>
<span class="normal"><a href="#__codelineno-0-3841">3841</a></span>
<span class="normal"><a href="#__codelineno-0-3842">3842</a></span>
<span class="normal"><a href="#__codelineno-0-3843">3843</a></span>
<span class="normal"><a href="#__codelineno-0-3844">3844</a></span>
<span class="normal"><a href="#__codelineno-0-3845">3845</a></span>
<span class="normal"><a href="#__codelineno-0-3846">3846</a></span>
<span class="normal"><a href="#__codelineno-0-3847">3847</a></span>
<span class="normal"><a href="#__codelineno-0-3848">3848</a></span>
<span class="normal"><a href="#__codelineno-0-3849">3849</a></span>
<span class="normal"><a href="#__codelineno-0-3850">3850</a></span>
<span class="normal"><a href="#__codelineno-0-3851">3851</a></span>
<span class="normal"><a href="#__codelineno-0-3852">3852</a></span>
<span class="normal"><a href="#__codelineno-0-3853">3853</a></span>
<span class="normal"><a href="#__codelineno-0-3854">3854</a></span>
<span class="normal"><a href="#__codelineno-0-3855">3855</a></span>
<span class="normal"><a href="#__codelineno-0-3856">3856</a></span>
<span class="normal"><a href="#__codelineno-0-3857">3857</a></span>
<span class="normal"><a href="#__codelineno-0-3858">3858</a></span>
<span class="normal"><a href="#__codelineno-0-3859">3859</a></span>
<span class="normal"><a href="#__codelineno-0-3860">3860</a></span>
<span class="normal"><a href="#__codelineno-0-3861">3861</a></span>
<span class="normal"><a href="#__codelineno-0-3862">3862</a></span>
<span class="normal"><a href="#__codelineno-0-3863">3863</a></span>
<span class="normal"><a href="#__codelineno-0-3864">3864</a></span>
<span class="normal"><a href="#__codelineno-0-3865">3865</a></span>
<span class="normal"><a href="#__codelineno-0-3866">3866</a></span>
<span class="normal"><a href="#__codelineno-0-3867">3867</a></span>
<span class="normal"><a href="#__codelineno-0-3868">3868</a></span>
<span class="normal"><a href="#__codelineno-0-3869">3869</a></span>
<span class="normal"><a href="#__codelineno-0-3870">3870</a></span>
<span class="normal"><a href="#__codelineno-0-3871">3871</a></span>
<span class="normal"><a href="#__codelineno-0-3872">3872</a></span>
<span class="normal"><a href="#__codelineno-0-3873">3873</a></span>
<span class="normal"><a href="#__codelineno-0-3874">3874</a></span>
<span class="normal"><a href="#__codelineno-0-3875">3875</a></span>
<span class="normal"><a href="#__codelineno-0-3876">3876</a></span>
<span class="normal"><a href="#__codelineno-0-3877">3877</a></span>
<span class="normal"><a href="#__codelineno-0-3878">3878</a></span>
<span class="normal"><a href="#__codelineno-0-3879">3879</a></span>
<span class="normal"><a href="#__codelineno-0-3880">3880</a></span>
<span class="normal"><a href="#__codelineno-0-3881">3881</a></span>
<span class="normal"><a href="#__codelineno-0-3882">3882</a></span>
<span class="normal"><a href="#__codelineno-0-3883">3883</a></span>
<span class="normal"><a href="#__codelineno-0-3884">3884</a></span>
<span class="normal"><a href="#__codelineno-0-3885">3885</a></span>
<span class="normal"><a href="#__codelineno-0-3886">3886</a></span>
<span class="normal"><a href="#__codelineno-0-3887">3887</a></span>
<span class="normal"><a href="#__codelineno-0-3888">3888</a></span>
<span class="normal"><a href="#__codelineno-0-3889">3889</a></span>
<span class="normal"><a href="#__codelineno-0-3890">3890</a></span>
<span class="normal"><a href="#__codelineno-0-3891">3891</a></span>
<span class="normal"><a href="#__codelineno-0-3892">3892</a></span>
<span class="normal"><a href="#__codelineno-0-3893">3893</a></span>
<span class="normal"><a href="#__codelineno-0-3894">3894</a></span>
<span class="normal"><a href="#__codelineno-0-3895">3895</a></span>
<span class="normal"><a href="#__codelineno-0-3896">3896</a></span>
<span class="normal"><a href="#__codelineno-0-3897">3897</a></span>
<span class="normal"><a href="#__codelineno-0-3898">3898</a></span>
<span class="normal"><a href="#__codelineno-0-3899">3899</a></span>
<span class="normal"><a href="#__codelineno-0-3900">3900</a></span>
<span class="normal"><a href="#__codelineno-0-3901">3901</a></span>
<span class="normal"><a href="#__codelineno-0-3902">3902</a></span>
<span class="normal"><a href="#__codelineno-0-3903">3903</a></span>
<span class="normal"><a href="#__codelineno-0-3904">3904</a></span>
<span class="normal"><a href="#__codelineno-0-3905">3905</a></span>
<span class="normal"><a href="#__codelineno-0-3906">3906</a></span>
<span class="normal"><a href="#__codelineno-0-3907">3907</a></span>
<span class="normal"><a href="#__codelineno-0-3908">3908</a></span>
<span class="normal"><a href="#__codelineno-0-3909">3909</a></span>
<span class="normal"><a href="#__codelineno-0-3910">3910</a></span>
<span class="normal"><a href="#__codelineno-0-3911">3911</a></span>
<span class="normal"><a href="#__codelineno-0-3912">3912</a></span>
<span class="normal"><a href="#__codelineno-0-3913">3913</a></span>
<span class="normal"><a href="#__codelineno-0-3914">3914</a></span>
<span class="normal"><a href="#__codelineno-0-3915">3915</a></span>
<span class="normal"><a href="#__codelineno-0-3916">3916</a></span>
<span class="normal"><a href="#__codelineno-0-3917">3917</a></span>
<span class="normal"><a href="#__codelineno-0-3918">3918</a></span>
<span class="normal"><a href="#__codelineno-0-3919">3919</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-3801" name="__codelineno-0-3801"></a><span class="k">def</span><span class="w"> </span><span class="nf">resample</span><span class="p">(</span>
<a id="__codelineno-0-3802" name="__codelineno-0-3802"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">cell_size</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;nearest neighbor&quot;</span>
<a id="__codelineno-0-3803" name="__codelineno-0-3803"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-3804" name="__codelineno-0-3804"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;resample.</span>
<a id="__codelineno-0-3805" name="__codelineno-0-3805"></a>
<a id="__codelineno-0-3806" name="__codelineno-0-3806"></a><span class="sd">    resample method reprojects a raster to any projection (default the WGS84 web mercator projection,</span>
<a id="__codelineno-0-3807" name="__codelineno-0-3807"></a><span class="sd">    without resampling). The function returns a GDAL in-memory file object.</span>
<a id="__codelineno-0-3808" name="__codelineno-0-3808"></a>
<a id="__codelineno-0-3809" name="__codelineno-0-3809"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-3810" name="__codelineno-0-3810"></a><span class="sd">        cell_size (int):</span>
<a id="__codelineno-0-3811" name="__codelineno-0-3811"></a><span class="sd">            New cell size to resample the raster. If None, raster will not be resampled.</span>
<a id="__codelineno-0-3812" name="__codelineno-0-3812"></a><span class="sd">        method (str):</span>
<a id="__codelineno-0-3813" name="__codelineno-0-3813"></a><span class="sd">            Resampling method: &quot;nearest neighbor&quot;, &quot;cubic&quot;, or &quot;bilinear&quot;. Default is &quot;nearest neighbor&quot;.</span>
<a id="__codelineno-0-3814" name="__codelineno-0-3814"></a>
<a id="__codelineno-0-3815" name="__codelineno-0-3815"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-3816" name="__codelineno-0-3816"></a><span class="sd">        Dataset:</span>
<a id="__codelineno-0-3817" name="__codelineno-0-3817"></a><span class="sd">            Dataset object.</span>
<a id="__codelineno-0-3818" name="__codelineno-0-3818"></a>
<a id="__codelineno-0-3819" name="__codelineno-0-3819"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-3820" name="__codelineno-0-3820"></a><span class="sd">        - Create a Dataset with 4 bands, 10 rows, 10 columns, at lon/lat (0, 0):</span>
<a id="__codelineno-0-3821" name="__codelineno-0-3821"></a>
<a id="__codelineno-0-3822" name="__codelineno-0-3822"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-3823" name="__codelineno-0-3823"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-3824" name="__codelineno-0-3824"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.rand(4, 10, 10)</span>
<a id="__codelineno-0-3825" name="__codelineno-0-3825"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-3826" name="__codelineno-0-3826"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-3827" name="__codelineno-0-3827"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-3828" name="__codelineno-0-3828"></a><span class="sd">          &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-3829" name="__codelineno-0-3829"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-3830" name="__codelineno-0-3830"></a><span class="sd">                      Cell size: 0.05</span>
<a id="__codelineno-0-3831" name="__codelineno-0-3831"></a><span class="sd">                      Dimension: 10 * 10</span>
<a id="__codelineno-0-3832" name="__codelineno-0-3832"></a><span class="sd">                      EPSG: 4326</span>
<a id="__codelineno-0-3833" name="__codelineno-0-3833"></a><span class="sd">                      Number of Bands: 4</span>
<a id="__codelineno-0-3834" name="__codelineno-0-3834"></a><span class="sd">                      Band names: [&#39;Band_1&#39;, &#39;Band_2&#39;, &#39;Band_3&#39;, &#39;Band_4&#39;]</span>
<a id="__codelineno-0-3835" name="__codelineno-0-3835"></a><span class="sd">                      Mask: -9999.0</span>
<a id="__codelineno-0-3836" name="__codelineno-0-3836"></a><span class="sd">                      Data type: float64</span>
<a id="__codelineno-0-3837" name="__codelineno-0-3837"></a><span class="sd">                      File: ...</span>
<a id="__codelineno-0-3838" name="__codelineno-0-3838"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-3839" name="__codelineno-0-3839"></a><span class="sd">          &gt;&gt;&gt; dataset.plot(band=0)</span>
<a id="__codelineno-0-3840" name="__codelineno-0-3840"></a><span class="sd">          (&lt;Figure size 800x800 with 2 Axes&gt;, &lt;Axes: &gt;)</span>
<a id="__codelineno-0-3841" name="__codelineno-0-3841"></a>
<a id="__codelineno-0-3842" name="__codelineno-0-3842"></a><span class="sd">          ```</span>
<a id="__codelineno-0-3843" name="__codelineno-0-3843"></a><span class="sd">          ![resample-source](./../_images/dataset/resample-source.png)</span>
<a id="__codelineno-0-3844" name="__codelineno-0-3844"></a>
<a id="__codelineno-0-3845" name="__codelineno-0-3845"></a><span class="sd">        - Resample the raster to a new cell size of 0.1:</span>
<a id="__codelineno-0-3846" name="__codelineno-0-3846"></a>
<a id="__codelineno-0-3847" name="__codelineno-0-3847"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-3848" name="__codelineno-0-3848"></a><span class="sd">          &gt;&gt;&gt; new_dataset = dataset.resample(cell_size=0.1)</span>
<a id="__codelineno-0-3849" name="__codelineno-0-3849"></a><span class="sd">          &gt;&gt;&gt; print(new_dataset)</span>
<a id="__codelineno-0-3850" name="__codelineno-0-3850"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-3851" name="__codelineno-0-3851"></a><span class="sd">                      Cell size: 0.1</span>
<a id="__codelineno-0-3852" name="__codelineno-0-3852"></a><span class="sd">                      Dimension: 5 * 5</span>
<a id="__codelineno-0-3853" name="__codelineno-0-3853"></a><span class="sd">                      EPSG: 4326</span>
<a id="__codelineno-0-3854" name="__codelineno-0-3854"></a><span class="sd">                      Number of Bands: 4</span>
<a id="__codelineno-0-3855" name="__codelineno-0-3855"></a><span class="sd">                      Band names: [&#39;Band_1&#39;, &#39;Band_2&#39;, &#39;Band_3&#39;, &#39;Band_4&#39;]</span>
<a id="__codelineno-0-3856" name="__codelineno-0-3856"></a><span class="sd">                      Mask: -9999.0</span>
<a id="__codelineno-0-3857" name="__codelineno-0-3857"></a><span class="sd">                      Data type: float64</span>
<a id="__codelineno-0-3858" name="__codelineno-0-3858"></a><span class="sd">                      File:...</span>
<a id="__codelineno-0-3859" name="__codelineno-0-3859"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-3860" name="__codelineno-0-3860"></a><span class="sd">          &gt;&gt;&gt; new_dataset.plot(band=0)</span>
<a id="__codelineno-0-3861" name="__codelineno-0-3861"></a><span class="sd">          (&lt;Figure size 800x800 with 2 Axes&gt;, &lt;Axes: &gt;)</span>
<a id="__codelineno-0-3862" name="__codelineno-0-3862"></a>
<a id="__codelineno-0-3863" name="__codelineno-0-3863"></a><span class="sd">          ```</span>
<a id="__codelineno-0-3864" name="__codelineno-0-3864"></a><span class="sd">          ![resample-new](./../_images/dataset/resample-new.png)</span>
<a id="__codelineno-0-3865" name="__codelineno-0-3865"></a>
<a id="__codelineno-0-3866" name="__codelineno-0-3866"></a><span class="sd">        - Resampling the dataset from cell_size 0.05 to 0.1 degrees reduced the number of cells to 5 in each dimension instead of 10.</span>
<a id="__codelineno-0-3867" name="__codelineno-0-3867"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-3868" name="__codelineno-0-3868"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-3869" name="__codelineno-0-3869"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-3870" name="__codelineno-0-3870"></a>            <span class="s2">&quot;Please enter a correct method, for more information, see documentation&quot;</span>
<a id="__codelineno-0-3871" name="__codelineno-0-3871"></a>        <span class="p">)</span>
<a id="__codelineno-0-3872" name="__codelineno-0-3872"></a>    <span class="k">if</span> <span class="n">method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">INTERPOLATION_METHODS</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<a id="__codelineno-0-3873" name="__codelineno-0-3873"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-3874" name="__codelineno-0-3874"></a>            <span class="sa">f</span><span class="s2">&quot;The given interpolation method does not exist, existing methods are </span><span class="si">{</span><span class="n">INTERPOLATION_METHODS</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-3875" name="__codelineno-0-3875"></a>        <span class="p">)</span>
<a id="__codelineno-0-3876" name="__codelineno-0-3876"></a>
<a id="__codelineno-0-3877" name="__codelineno-0-3877"></a>    <span class="n">method</span> <span class="o">=</span> <span class="n">INTERPOLATION_METHODS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
<a id="__codelineno-0-3878" name="__codelineno-0-3878"></a>
<a id="__codelineno-0-3879" name="__codelineno-0-3879"></a>    <span class="n">sr_src</span> <span class="o">=</span> <span class="n">osr</span><span class="o">.</span><span class="n">SpatialReference</span><span class="p">(</span><span class="n">wkt</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-0-3880" name="__codelineno-0-3880"></a>
<a id="__codelineno-0-3881" name="__codelineno-0-3881"></a>    <span class="n">ulx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-3882" name="__codelineno-0-3882"></a>    <span class="n">uly</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-0-3883" name="__codelineno-0-3883"></a>    <span class="c1"># transform the right lower corner point</span>
<a id="__codelineno-0-3884" name="__codelineno-0-3884"></a>    <span class="n">lrx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span>
<a id="__codelineno-0-3885" name="__codelineno-0-3885"></a>    <span class="n">lry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span>
<a id="__codelineno-0-3886" name="__codelineno-0-3886"></a>
<a id="__codelineno-0-3887" name="__codelineno-0-3887"></a>    <span class="c1"># new geotransform</span>
<a id="__codelineno-0-3888" name="__codelineno-0-3888"></a>    <span class="n">new_geo</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-3889" name="__codelineno-0-3889"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-0-3890" name="__codelineno-0-3890"></a>        <span class="n">cell_size</span><span class="p">,</span>
<a id="__codelineno-0-3891" name="__codelineno-0-3891"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
<a id="__codelineno-0-3892" name="__codelineno-0-3892"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
<a id="__codelineno-0-3893" name="__codelineno-0-3893"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
<a id="__codelineno-0-3894" name="__codelineno-0-3894"></a>        <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">cell_size</span><span class="p">,</span>
<a id="__codelineno-0-3895" name="__codelineno-0-3895"></a>    <span class="p">)</span>
<a id="__codelineno-0-3896" name="__codelineno-0-3896"></a>    <span class="c1"># create a new raster</span>
<a id="__codelineno-0-3897" name="__codelineno-0-3897"></a>    <span class="n">cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">lrx</span> <span class="o">-</span> <span class="n">ulx</span><span class="p">)</span> <span class="o">/</span> <span class="n">cell_size</span><span class="p">))</span>
<a id="__codelineno-0-3898" name="__codelineno-0-3898"></a>    <span class="n">rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">uly</span> <span class="o">-</span> <span class="n">lry</span><span class="p">)</span> <span class="o">/</span> <span class="n">cell_size</span><span class="p">))</span>
<a id="__codelineno-0-3899" name="__codelineno-0-3899"></a>    <span class="n">dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gdal_dtype</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-3900" name="__codelineno-0-3900"></a>    <span class="n">bands</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span>
<a id="__codelineno-0-3901" name="__codelineno-0-3901"></a>
<a id="__codelineno-0-3902" name="__codelineno-0-3902"></a>    <span class="n">dst</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_create_dataset</span><span class="p">(</span><span class="n">cols</span><span class="p">,</span> <span class="n">rows</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">dtype</span><span class="p">)</span>
<a id="__codelineno-0-3903" name="__codelineno-0-3903"></a>    <span class="c1"># set the geotransform</span>
<a id="__codelineno-0-3904" name="__codelineno-0-3904"></a>    <span class="n">dst</span><span class="o">.</span><span class="n">SetGeoTransform</span><span class="p">(</span><span class="n">new_geo</span><span class="p">)</span>
<a id="__codelineno-0-3905" name="__codelineno-0-3905"></a>    <span class="c1"># set the projection</span>
<a id="__codelineno-0-3906" name="__codelineno-0-3906"></a>    <span class="n">dst</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">sr_src</span><span class="o">.</span><span class="n">ExportToWkt</span><span class="p">())</span>
<a id="__codelineno-0-3907" name="__codelineno-0-3907"></a>    <span class="n">dst_obj</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="s2">&quot;write&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3908" name="__codelineno-0-3908"></a>    <span class="c1"># set the no data value</span>
<a id="__codelineno-0-3909" name="__codelineno-0-3909"></a>    <span class="n">dst_obj</span><span class="o">.</span><span class="n">_set_no_data_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">)</span>
<a id="__codelineno-0-3910" name="__codelineno-0-3910"></a>    <span class="c1"># perform the projection &amp; resampling</span>
<a id="__codelineno-0-3911" name="__codelineno-0-3911"></a>    <span class="n">gdal</span><span class="o">.</span><span class="n">ReprojectImage</span><span class="p">(</span>
<a id="__codelineno-0-3912" name="__codelineno-0-3912"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span>
<a id="__codelineno-0-3913" name="__codelineno-0-3913"></a>        <span class="n">dst_obj</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span>
<a id="__codelineno-0-3914" name="__codelineno-0-3914"></a>        <span class="n">sr_src</span><span class="o">.</span><span class="n">ExportToWkt</span><span class="p">(),</span>
<a id="__codelineno-0-3915" name="__codelineno-0-3915"></a>        <span class="n">sr_src</span><span class="o">.</span><span class="n">ExportToWkt</span><span class="p">(),</span>
<a id="__codelineno-0-3916" name="__codelineno-0-3916"></a>        <span class="n">method</span><span class="p">,</span>
<a id="__codelineno-0-3917" name="__codelineno-0-3917"></a>    <span class="p">)</span>
<a id="__codelineno-0-3918" name="__codelineno-0-3918"></a>
<a id="__codelineno-0-3919" name="__codelineno-0-3919"></a>    <span class="k">return</span> <span class="n">dst_obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.fill_gaps" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.fill_gaps" class="toclink">
            <code class="highlight language-python"><span class="n">fill_gaps</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">src_array</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.fill_gaps" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Fill gaps in src_array using nearest neighbors where mask indicates valid cells.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>mask</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;pyramids.dataset.Dataset&lt;/code&gt;" href="#pyramids.dataset.Dataset">Dataset</a> | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Mask dataset or array used to determine valid cells.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>src_array</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source array whose gaps will be filled.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>np.ndarray: The source array with gaps filled where applicable.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4020">4020</a></span>
<span class="normal"><a href="#__codelineno-0-4021">4021</a></span>
<span class="normal"><a href="#__codelineno-0-4022">4022</a></span>
<span class="normal"><a href="#__codelineno-0-4023">4023</a></span>
<span class="normal"><a href="#__codelineno-0-4024">4024</a></span>
<span class="normal"><a href="#__codelineno-0-4025">4025</a></span>
<span class="normal"><a href="#__codelineno-0-4026">4026</a></span>
<span class="normal"><a href="#__codelineno-0-4027">4027</a></span>
<span class="normal"><a href="#__codelineno-0-4028">4028</a></span>
<span class="normal"><a href="#__codelineno-0-4029">4029</a></span>
<span class="normal"><a href="#__codelineno-0-4030">4030</a></span>
<span class="normal"><a href="#__codelineno-0-4031">4031</a></span>
<span class="normal"><a href="#__codelineno-0-4032">4032</a></span>
<span class="normal"><a href="#__codelineno-0-4033">4033</a></span>
<span class="normal"><a href="#__codelineno-0-4034">4034</a></span>
<span class="normal"><a href="#__codelineno-0-4035">4035</a></span>
<span class="normal"><a href="#__codelineno-0-4036">4036</a></span>
<span class="normal"><a href="#__codelineno-0-4037">4037</a></span>
<span class="normal"><a href="#__codelineno-0-4038">4038</a></span>
<span class="normal"><a href="#__codelineno-0-4039">4039</a></span>
<span class="normal"><a href="#__codelineno-0-4040">4040</a></span>
<span class="normal"><a href="#__codelineno-0-4041">4041</a></span>
<span class="normal"><a href="#__codelineno-0-4042">4042</a></span>
<span class="normal"><a href="#__codelineno-0-4043">4043</a></span>
<span class="normal"><a href="#__codelineno-0-4044">4044</a></span>
<span class="normal"><a href="#__codelineno-0-4045">4045</a></span>
<span class="normal"><a href="#__codelineno-0-4046">4046</a></span>
<span class="normal"><a href="#__codelineno-0-4047">4047</a></span>
<span class="normal"><a href="#__codelineno-0-4048">4048</a></span>
<span class="normal"><a href="#__codelineno-0-4049">4049</a></span>
<span class="normal"><a href="#__codelineno-0-4050">4050</a></span>
<span class="normal"><a href="#__codelineno-0-4051">4051</a></span>
<span class="normal"><a href="#__codelineno-0-4052">4052</a></span>
<span class="normal"><a href="#__codelineno-0-4053">4053</a></span>
<span class="normal"><a href="#__codelineno-0-4054">4054</a></span>
<span class="normal"><a href="#__codelineno-0-4055">4055</a></span>
<span class="normal"><a href="#__codelineno-0-4056">4056</a></span>
<span class="normal"><a href="#__codelineno-0-4057">4057</a></span>
<span class="normal"><a href="#__codelineno-0-4058">4058</a></span>
<span class="normal"><a href="#__codelineno-0-4059">4059</a></span>
<span class="normal"><a href="#__codelineno-0-4060">4060</a></span>
<span class="normal"><a href="#__codelineno-0-4061">4061</a></span>
<span class="normal"><a href="#__codelineno-0-4062">4062</a></span>
<span class="normal"><a href="#__codelineno-0-4063">4063</a></span>
<span class="normal"><a href="#__codelineno-0-4064">4064</a></span>
<span class="normal"><a href="#__codelineno-0-4065">4065</a></span>
<span class="normal"><a href="#__codelineno-0-4066">4066</a></span>
<span class="normal"><a href="#__codelineno-0-4067">4067</a></span>
<span class="normal"><a href="#__codelineno-0-4068">4068</a></span>
<span class="normal"><a href="#__codelineno-0-4069">4069</a></span>
<span class="normal"><a href="#__codelineno-0-4070">4070</a></span>
<span class="normal"><a href="#__codelineno-0-4071">4071</a></span>
<span class="normal"><a href="#__codelineno-0-4072">4072</a></span>
<span class="normal"><a href="#__codelineno-0-4073">4073</a></span>
<span class="normal"><a href="#__codelineno-0-4074">4074</a></span>
<span class="normal"><a href="#__codelineno-0-4075">4075</a></span>
<span class="normal"><a href="#__codelineno-0-4076">4076</a></span>
<span class="normal"><a href="#__codelineno-0-4077">4077</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4020" name="__codelineno-0-4020"></a><span class="k">def</span><span class="w"> </span><span class="nf">fill_gaps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">src_array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-4021" name="__codelineno-0-4021"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Fill gaps in src_array using nearest neighbors where mask indicates valid cells.</span>
<a id="__codelineno-0-4022" name="__codelineno-0-4022"></a>
<a id="__codelineno-0-4023" name="__codelineno-0-4023"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4024" name="__codelineno-0-4024"></a><span class="sd">        mask (Dataset | np.ndarray):</span>
<a id="__codelineno-0-4025" name="__codelineno-0-4025"></a><span class="sd">            Mask dataset or array used to determine valid cells.</span>
<a id="__codelineno-0-4026" name="__codelineno-0-4026"></a><span class="sd">        src_array (np.ndarray):</span>
<a id="__codelineno-0-4027" name="__codelineno-0-4027"></a><span class="sd">            Source array whose gaps will be filled.</span>
<a id="__codelineno-0-4028" name="__codelineno-0-4028"></a>
<a id="__codelineno-0-4029" name="__codelineno-0-4029"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-4030" name="__codelineno-0-4030"></a><span class="sd">        np.ndarray: The source array with gaps filled where applicable.</span>
<a id="__codelineno-0-4031" name="__codelineno-0-4031"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4032" name="__codelineno-0-4032"></a>    <span class="c1"># align function only equate the no of rows and columns only</span>
<a id="__codelineno-0-4033" name="__codelineno-0-4033"></a>    <span class="c1"># match no_data_value inserts no_data_value in src raster to all places like mask</span>
<a id="__codelineno-0-4034" name="__codelineno-0-4034"></a>    <span class="c1"># still places that has no_data_value in the src raster, but it is not no_data_value in the mask</span>
<a id="__codelineno-0-4035" name="__codelineno-0-4035"></a>    <span class="c1"># and now has to be filled with values</span>
<a id="__codelineno-0-4036" name="__codelineno-0-4036"></a>    <span class="c1"># compare no of element that is not no_data_value in both rasters to make sure they are matched</span>
<a id="__codelineno-0-4037" name="__codelineno-0-4037"></a>    <span class="c1"># if both inputs are rasters</span>
<a id="__codelineno-0-4038" name="__codelineno-0-4038"></a>    <span class="n">mask_array</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">read_array</span><span class="p">()</span>
<a id="__codelineno-0-4039" name="__codelineno-0-4039"></a>    <span class="n">row</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">rows</span>
<a id="__codelineno-0-4040" name="__codelineno-0-4040"></a>    <span class="n">col</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">columns</span>
<a id="__codelineno-0-4041" name="__codelineno-0-4041"></a>    <span class="n">mask_noval</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4042" name="__codelineno-0-4042"></a>
<a id="__codelineno-0-4043" name="__codelineno-0-4043"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">):</span>
<a id="__codelineno-0-4044" name="__codelineno-0-4044"></a>        <span class="c1"># there might be cells that are out of domain in the src but not out of domain in the mask</span>
<a id="__codelineno-0-4045" name="__codelineno-0-4045"></a>        <span class="c1"># so change all the src_noval to mask_noval in the src_array</span>
<a id="__codelineno-0-4046" name="__codelineno-0-4046"></a>        <span class="c1"># src_array[np.isclose(src_array, self.no_data_value[0], rtol=0.001)] = mask_noval</span>
<a id="__codelineno-0-4047" name="__codelineno-0-4047"></a>        <span class="c1"># then count them (out of domain cells) in the src_array</span>
<a id="__codelineno-0-4048" name="__codelineno-0-4048"></a>        <span class="n">elem_src</span> <span class="o">=</span> <span class="n">src_array</span><span class="o">.</span><span class="n">size</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span>
<a id="__codelineno-0-4049" name="__codelineno-0-4049"></a>            <span class="p">(</span><span class="n">src_array</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">src_array</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)])</span>
<a id="__codelineno-0-4050" name="__codelineno-0-4050"></a>        <span class="p">)</span>
<a id="__codelineno-0-4051" name="__codelineno-0-4051"></a>        <span class="c1"># count the out of domain cells in the mask</span>
<a id="__codelineno-0-4052" name="__codelineno-0-4052"></a>        <span class="n">elem_mask</span> <span class="o">=</span> <span class="n">mask_array</span><span class="o">.</span><span class="n">size</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span>
<a id="__codelineno-0-4053" name="__codelineno-0-4053"></a>            <span class="p">(</span><span class="n">mask_array</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">mask_array</span><span class="p">,</span> <span class="n">mask_noval</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)])</span>
<a id="__codelineno-0-4054" name="__codelineno-0-4054"></a>        <span class="p">)</span>
<a id="__codelineno-0-4055" name="__codelineno-0-4055"></a>
<a id="__codelineno-0-4056" name="__codelineno-0-4056"></a>        <span class="c1"># if not equal, then store indices of those cells that don&#39;t match</span>
<a id="__codelineno-0-4057" name="__codelineno-0-4057"></a>        <span class="k">if</span> <span class="n">elem_mask</span> <span class="o">&gt;</span> <span class="n">elem_src</span><span class="p">:</span>
<a id="__codelineno-0-4058" name="__codelineno-0-4058"></a>            <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-4059" name="__codelineno-0-4059"></a>                <span class="n">i</span>
<a id="__codelineno-0-4060" name="__codelineno-0-4060"></a>                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
<a id="__codelineno-0-4061" name="__codelineno-0-4061"></a>                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
<a id="__codelineno-0-4062" name="__codelineno-0-4062"></a>                <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">src_array</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>
<a id="__codelineno-0-4063" name="__codelineno-0-4063"></a>                <span class="ow">and</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">mask_array</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">mask_noval</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>
<a id="__codelineno-0-4064" name="__codelineno-0-4064"></a>            <span class="p">]</span>
<a id="__codelineno-0-4065" name="__codelineno-0-4065"></a>            <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-4066" name="__codelineno-0-4066"></a>                <span class="n">j</span>
<a id="__codelineno-0-4067" name="__codelineno-0-4067"></a>                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
<a id="__codelineno-0-4068" name="__codelineno-0-4068"></a>                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
<a id="__codelineno-0-4069" name="__codelineno-0-4069"></a>                <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">src_array</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>
<a id="__codelineno-0-4070" name="__codelineno-0-4070"></a>                <span class="ow">and</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">mask_array</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">mask_noval</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>
<a id="__codelineno-0-4071" name="__codelineno-0-4071"></a>            <span class="p">]</span>
<a id="__codelineno-0-4072" name="__codelineno-0-4072"></a>        <span class="c1"># interpolate those missing cells by the nearest neighbor</span>
<a id="__codelineno-0-4073" name="__codelineno-0-4073"></a>        <span class="k">if</span> <span class="n">elem_mask</span> <span class="o">&gt;</span> <span class="n">elem_src</span><span class="p">:</span>
<a id="__codelineno-0-4074" name="__codelineno-0-4074"></a>            <span class="n">src_array</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_nearest_neighbour</span><span class="p">(</span>
<a id="__codelineno-0-4075" name="__codelineno-0-4075"></a>                <span class="n">src_array</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rows</span><span class="p">,</span> <span class="n">cols</span>
<a id="__codelineno-0-4076" name="__codelineno-0-4076"></a>            <span class="p">)</span>
<a id="__codelineno-0-4077" name="__codelineno-0-4077"></a>        <span class="k">return</span> <span class="n">src_array</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.align" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.align" class="toclink">
            <code class="highlight language-python"><span class="n">align</span><span class="p">(</span><span class="n">alignment_src</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.align" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Align the current dataset (rows and columns) to match a given dataset.</p>


<details class="copies-spatial-properties-from-alignment_src-to-the-current-raster" open>
  <summary>Copies spatial properties from alignment_src to the current raster</summary>
  <ul>
<li>The coordinate system</li>
<li>The number of rows and columns</li>
<li>Cell size</li>
</ul>
</details>        <p>Then resamples values from the current dataset using the nearest neighbor interpolation.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>alignment_src</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;pyramids.dataset.Dataset&lt;/code&gt;" href="#pyramids.dataset.Dataset">Dataset</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Spatial information source raster to get the spatial information (coordinate system, number of rows and
columns). The data values of the current dataset are resampled to this alignment.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Dataset</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;pyramids.dataset.Dataset&lt;/code&gt;" href="#pyramids.dataset.Dataset">Dataset</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The aligned dataset.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>The source dataset has a <code>top_left_corner</code> at (0, 0) with a 5*5 alignment, and a 0.05 degree cell size.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">0.05</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">5</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">4326</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">1</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">]</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">9999.0</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">float64</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>            <span class="n">File</span><span class="p">:</span><span class="o">...</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
</code></pre></div>
<ul>
<li>The dataset to be aligned has a top_left_corner at (-0.1, 0.1) (i.e., it has two more rows on top of the
  dataset, and two columns on the left of the dataset).</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.07</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset_target</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="o">...</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset_target</span><span class="p">)</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">0.07</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">10</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">4326</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">1</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">]</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">9999.0</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">float64</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>            <span class="n">File</span><span class="p">:</span><span class="o">...</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
</code></pre></div>
<p><img alt="align-source-target" src="../../_images/dataset/align-source-target.png" /></p>
<ul>
<li>Now call the <code>align</code> method and use the dataset as the alignment source.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">aligned_dataset</span> <span class="o">=</span> <span class="n">dataset_target</span><span class="o">.</span><span class="n">align</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">aligned_dataset</span><span class="p">)</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">0.05</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">5</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">4326</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">1</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">]</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">9999.0</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">float64</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>            <span class="n">File</span><span class="p">:</span><span class="o">...</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
</code></pre></div>
<p><img alt="align-result" src="../../_images/dataset/align-result.png" /></p>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4203">4203</a></span>
<span class="normal"><a href="#__codelineno-0-4204">4204</a></span>
<span class="normal"><a href="#__codelineno-0-4205">4205</a></span>
<span class="normal"><a href="#__codelineno-0-4206">4206</a></span>
<span class="normal"><a href="#__codelineno-0-4207">4207</a></span>
<span class="normal"><a href="#__codelineno-0-4208">4208</a></span>
<span class="normal"><a href="#__codelineno-0-4209">4209</a></span>
<span class="normal"><a href="#__codelineno-0-4210">4210</a></span>
<span class="normal"><a href="#__codelineno-0-4211">4211</a></span>
<span class="normal"><a href="#__codelineno-0-4212">4212</a></span>
<span class="normal"><a href="#__codelineno-0-4213">4213</a></span>
<span class="normal"><a href="#__codelineno-0-4214">4214</a></span>
<span class="normal"><a href="#__codelineno-0-4215">4215</a></span>
<span class="normal"><a href="#__codelineno-0-4216">4216</a></span>
<span class="normal"><a href="#__codelineno-0-4217">4217</a></span>
<span class="normal"><a href="#__codelineno-0-4218">4218</a></span>
<span class="normal"><a href="#__codelineno-0-4219">4219</a></span>
<span class="normal"><a href="#__codelineno-0-4220">4220</a></span>
<span class="normal"><a href="#__codelineno-0-4221">4221</a></span>
<span class="normal"><a href="#__codelineno-0-4222">4222</a></span>
<span class="normal"><a href="#__codelineno-0-4223">4223</a></span>
<span class="normal"><a href="#__codelineno-0-4224">4224</a></span>
<span class="normal"><a href="#__codelineno-0-4225">4225</a></span>
<span class="normal"><a href="#__codelineno-0-4226">4226</a></span>
<span class="normal"><a href="#__codelineno-0-4227">4227</a></span>
<span class="normal"><a href="#__codelineno-0-4228">4228</a></span>
<span class="normal"><a href="#__codelineno-0-4229">4229</a></span>
<span class="normal"><a href="#__codelineno-0-4230">4230</a></span>
<span class="normal"><a href="#__codelineno-0-4231">4231</a></span>
<span class="normal"><a href="#__codelineno-0-4232">4232</a></span>
<span class="normal"><a href="#__codelineno-0-4233">4233</a></span>
<span class="normal"><a href="#__codelineno-0-4234">4234</a></span>
<span class="normal"><a href="#__codelineno-0-4235">4235</a></span>
<span class="normal"><a href="#__codelineno-0-4236">4236</a></span>
<span class="normal"><a href="#__codelineno-0-4237">4237</a></span>
<span class="normal"><a href="#__codelineno-0-4238">4238</a></span>
<span class="normal"><a href="#__codelineno-0-4239">4239</a></span>
<span class="normal"><a href="#__codelineno-0-4240">4240</a></span>
<span class="normal"><a href="#__codelineno-0-4241">4241</a></span>
<span class="normal"><a href="#__codelineno-0-4242">4242</a></span>
<span class="normal"><a href="#__codelineno-0-4243">4243</a></span>
<span class="normal"><a href="#__codelineno-0-4244">4244</a></span>
<span class="normal"><a href="#__codelineno-0-4245">4245</a></span>
<span class="normal"><a href="#__codelineno-0-4246">4246</a></span>
<span class="normal"><a href="#__codelineno-0-4247">4247</a></span>
<span class="normal"><a href="#__codelineno-0-4248">4248</a></span>
<span class="normal"><a href="#__codelineno-0-4249">4249</a></span>
<span class="normal"><a href="#__codelineno-0-4250">4250</a></span>
<span class="normal"><a href="#__codelineno-0-4251">4251</a></span>
<span class="normal"><a href="#__codelineno-0-4252">4252</a></span>
<span class="normal"><a href="#__codelineno-0-4253">4253</a></span>
<span class="normal"><a href="#__codelineno-0-4254">4254</a></span>
<span class="normal"><a href="#__codelineno-0-4255">4255</a></span>
<span class="normal"><a href="#__codelineno-0-4256">4256</a></span>
<span class="normal"><a href="#__codelineno-0-4257">4257</a></span>
<span class="normal"><a href="#__codelineno-0-4258">4258</a></span>
<span class="normal"><a href="#__codelineno-0-4259">4259</a></span>
<span class="normal"><a href="#__codelineno-0-4260">4260</a></span>
<span class="normal"><a href="#__codelineno-0-4261">4261</a></span>
<span class="normal"><a href="#__codelineno-0-4262">4262</a></span>
<span class="normal"><a href="#__codelineno-0-4263">4263</a></span>
<span class="normal"><a href="#__codelineno-0-4264">4264</a></span>
<span class="normal"><a href="#__codelineno-0-4265">4265</a></span>
<span class="normal"><a href="#__codelineno-0-4266">4266</a></span>
<span class="normal"><a href="#__codelineno-0-4267">4267</a></span>
<span class="normal"><a href="#__codelineno-0-4268">4268</a></span>
<span class="normal"><a href="#__codelineno-0-4269">4269</a></span>
<span class="normal"><a href="#__codelineno-0-4270">4270</a></span>
<span class="normal"><a href="#__codelineno-0-4271">4271</a></span>
<span class="normal"><a href="#__codelineno-0-4272">4272</a></span>
<span class="normal"><a href="#__codelineno-0-4273">4273</a></span>
<span class="normal"><a href="#__codelineno-0-4274">4274</a></span>
<span class="normal"><a href="#__codelineno-0-4275">4275</a></span>
<span class="normal"><a href="#__codelineno-0-4276">4276</a></span>
<span class="normal"><a href="#__codelineno-0-4277">4277</a></span>
<span class="normal"><a href="#__codelineno-0-4278">4278</a></span>
<span class="normal"><a href="#__codelineno-0-4279">4279</a></span>
<span class="normal"><a href="#__codelineno-0-4280">4280</a></span>
<span class="normal"><a href="#__codelineno-0-4281">4281</a></span>
<span class="normal"><a href="#__codelineno-0-4282">4282</a></span>
<span class="normal"><a href="#__codelineno-0-4283">4283</a></span>
<span class="normal"><a href="#__codelineno-0-4284">4284</a></span>
<span class="normal"><a href="#__codelineno-0-4285">4285</a></span>
<span class="normal"><a href="#__codelineno-0-4286">4286</a></span>
<span class="normal"><a href="#__codelineno-0-4287">4287</a></span>
<span class="normal"><a href="#__codelineno-0-4288">4288</a></span>
<span class="normal"><a href="#__codelineno-0-4289">4289</a></span>
<span class="normal"><a href="#__codelineno-0-4290">4290</a></span>
<span class="normal"><a href="#__codelineno-0-4291">4291</a></span>
<span class="normal"><a href="#__codelineno-0-4292">4292</a></span>
<span class="normal"><a href="#__codelineno-0-4293">4293</a></span>
<span class="normal"><a href="#__codelineno-0-4294">4294</a></span>
<span class="normal"><a href="#__codelineno-0-4295">4295</a></span>
<span class="normal"><a href="#__codelineno-0-4296">4296</a></span>
<span class="normal"><a href="#__codelineno-0-4297">4297</a></span>
<span class="normal"><a href="#__codelineno-0-4298">4298</a></span>
<span class="normal"><a href="#__codelineno-0-4299">4299</a></span>
<span class="normal"><a href="#__codelineno-0-4300">4300</a></span>
<span class="normal"><a href="#__codelineno-0-4301">4301</a></span>
<span class="normal"><a href="#__codelineno-0-4302">4302</a></span>
<span class="normal"><a href="#__codelineno-0-4303">4303</a></span>
<span class="normal"><a href="#__codelineno-0-4304">4304</a></span>
<span class="normal"><a href="#__codelineno-0-4305">4305</a></span>
<span class="normal"><a href="#__codelineno-0-4306">4306</a></span>
<span class="normal"><a href="#__codelineno-0-4307">4307</a></span>
<span class="normal"><a href="#__codelineno-0-4308">4308</a></span>
<span class="normal"><a href="#__codelineno-0-4309">4309</a></span>
<span class="normal"><a href="#__codelineno-0-4310">4310</a></span>
<span class="normal"><a href="#__codelineno-0-4311">4311</a></span>
<span class="normal"><a href="#__codelineno-0-4312">4312</a></span>
<span class="normal"><a href="#__codelineno-0-4313">4313</a></span>
<span class="normal"><a href="#__codelineno-0-4314">4314</a></span>
<span class="normal"><a href="#__codelineno-0-4315">4315</a></span>
<span class="normal"><a href="#__codelineno-0-4316">4316</a></span>
<span class="normal"><a href="#__codelineno-0-4317">4317</a></span>
<span class="normal"><a href="#__codelineno-0-4318">4318</a></span>
<span class="normal"><a href="#__codelineno-0-4319">4319</a></span>
<span class="normal"><a href="#__codelineno-0-4320">4320</a></span>
<span class="normal"><a href="#__codelineno-0-4321">4321</a></span>
<span class="normal"><a href="#__codelineno-0-4322">4322</a></span>
<span class="normal"><a href="#__codelineno-0-4323">4323</a></span>
<span class="normal"><a href="#__codelineno-0-4324">4324</a></span>
<span class="normal"><a href="#__codelineno-0-4325">4325</a></span>
<span class="normal"><a href="#__codelineno-0-4326">4326</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4203" name="__codelineno-0-4203"></a><span class="k">def</span><span class="w"> </span><span class="nf">align</span><span class="p">(</span>
<a id="__codelineno-0-4204" name="__codelineno-0-4204"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-4205" name="__codelineno-0-4205"></a>    <span class="n">alignment_src</span><span class="p">:</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4206" name="__codelineno-0-4206"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span>
<a id="__codelineno-0-4207" name="__codelineno-0-4207"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Align the current dataset (rows and columns) to match a given dataset.</span>
<a id="__codelineno-0-4208" name="__codelineno-0-4208"></a>
<a id="__codelineno-0-4209" name="__codelineno-0-4209"></a><span class="sd">    Copies spatial properties from alignment_src to the current raster:</span>
<a id="__codelineno-0-4210" name="__codelineno-0-4210"></a><span class="sd">        - The coordinate system</span>
<a id="__codelineno-0-4211" name="__codelineno-0-4211"></a><span class="sd">        - The number of rows and columns</span>
<a id="__codelineno-0-4212" name="__codelineno-0-4212"></a><span class="sd">        - Cell size</span>
<a id="__codelineno-0-4213" name="__codelineno-0-4213"></a><span class="sd">    Then resamples values from the current dataset using the nearest neighbor interpolation.</span>
<a id="__codelineno-0-4214" name="__codelineno-0-4214"></a>
<a id="__codelineno-0-4215" name="__codelineno-0-4215"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4216" name="__codelineno-0-4216"></a><span class="sd">        alignment_src (Dataset):</span>
<a id="__codelineno-0-4217" name="__codelineno-0-4217"></a><span class="sd">            Spatial information source raster to get the spatial information (coordinate system, number of rows and</span>
<a id="__codelineno-0-4218" name="__codelineno-0-4218"></a><span class="sd">            columns). The data values of the current dataset are resampled to this alignment.</span>
<a id="__codelineno-0-4219" name="__codelineno-0-4219"></a>
<a id="__codelineno-0-4220" name="__codelineno-0-4220"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-4221" name="__codelineno-0-4221"></a><span class="sd">        Dataset: The aligned dataset.</span>
<a id="__codelineno-0-4222" name="__codelineno-0-4222"></a>
<a id="__codelineno-0-4223" name="__codelineno-0-4223"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-4224" name="__codelineno-0-4224"></a><span class="sd">        - The source dataset has a `top_left_corner` at (0, 0) with a 5*5 alignment, and a 0.05 degree cell size.</span>
<a id="__codelineno-0-4225" name="__codelineno-0-4225"></a>
<a id="__codelineno-0-4226" name="__codelineno-0-4226"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-4227" name="__codelineno-0-4227"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-4228" name="__codelineno-0-4228"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.rand(5, 5)</span>
<a id="__codelineno-0-4229" name="__codelineno-0-4229"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-4230" name="__codelineno-0-4230"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-4231" name="__codelineno-0-4231"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-4232" name="__codelineno-0-4232"></a><span class="sd">          &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-4233" name="__codelineno-0-4233"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-4234" name="__codelineno-0-4234"></a><span class="sd">                      Cell size: 0.05</span>
<a id="__codelineno-0-4235" name="__codelineno-0-4235"></a><span class="sd">                      Dimension: 5 * 5</span>
<a id="__codelineno-0-4236" name="__codelineno-0-4236"></a><span class="sd">                      EPSG: 4326</span>
<a id="__codelineno-0-4237" name="__codelineno-0-4237"></a><span class="sd">                      Number of Bands: 1</span>
<a id="__codelineno-0-4238" name="__codelineno-0-4238"></a><span class="sd">                      Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-4239" name="__codelineno-0-4239"></a><span class="sd">                      Mask: -9999.0</span>
<a id="__codelineno-0-4240" name="__codelineno-0-4240"></a><span class="sd">                      Data type: float64</span>
<a id="__codelineno-0-4241" name="__codelineno-0-4241"></a><span class="sd">                      File:...</span>
<a id="__codelineno-0-4242" name="__codelineno-0-4242"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-4243" name="__codelineno-0-4243"></a>
<a id="__codelineno-0-4244" name="__codelineno-0-4244"></a><span class="sd">          ```</span>
<a id="__codelineno-0-4245" name="__codelineno-0-4245"></a>
<a id="__codelineno-0-4246" name="__codelineno-0-4246"></a><span class="sd">        - The dataset to be aligned has a top_left_corner at (-0.1, 0.1) (i.e., it has two more rows on top of the</span>
<a id="__codelineno-0-4247" name="__codelineno-0-4247"></a><span class="sd">          dataset, and two columns on the left of the dataset).</span>
<a id="__codelineno-0-4248" name="__codelineno-0-4248"></a>
<a id="__codelineno-0-4249" name="__codelineno-0-4249"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-4250" name="__codelineno-0-4250"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.rand(10, 10)</span>
<a id="__codelineno-0-4251" name="__codelineno-0-4251"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (-0.1, 0.1)</span>
<a id="__codelineno-0-4252" name="__codelineno-0-4252"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.07</span>
<a id="__codelineno-0-4253" name="__codelineno-0-4253"></a><span class="sd">          &gt;&gt;&gt; dataset_target = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,</span>
<a id="__codelineno-0-4254" name="__codelineno-0-4254"></a><span class="sd">          ... epsg=4326)</span>
<a id="__codelineno-0-4255" name="__codelineno-0-4255"></a><span class="sd">          &gt;&gt;&gt; print(dataset_target)</span>
<a id="__codelineno-0-4256" name="__codelineno-0-4256"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-4257" name="__codelineno-0-4257"></a><span class="sd">                      Cell size: 0.07</span>
<a id="__codelineno-0-4258" name="__codelineno-0-4258"></a><span class="sd">                      Dimension: 10 * 10</span>
<a id="__codelineno-0-4259" name="__codelineno-0-4259"></a><span class="sd">                      EPSG: 4326</span>
<a id="__codelineno-0-4260" name="__codelineno-0-4260"></a><span class="sd">                      Number of Bands: 1</span>
<a id="__codelineno-0-4261" name="__codelineno-0-4261"></a><span class="sd">                      Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-4262" name="__codelineno-0-4262"></a><span class="sd">                      Mask: -9999.0</span>
<a id="__codelineno-0-4263" name="__codelineno-0-4263"></a><span class="sd">                      Data type: float64</span>
<a id="__codelineno-0-4264" name="__codelineno-0-4264"></a><span class="sd">                      File:...</span>
<a id="__codelineno-0-4265" name="__codelineno-0-4265"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-4266" name="__codelineno-0-4266"></a>
<a id="__codelineno-0-4267" name="__codelineno-0-4267"></a><span class="sd">          ```</span>
<a id="__codelineno-0-4268" name="__codelineno-0-4268"></a>
<a id="__codelineno-0-4269" name="__codelineno-0-4269"></a><span class="sd">        ![align-source-target](./../_images/dataset/align-source-target.png)</span>
<a id="__codelineno-0-4270" name="__codelineno-0-4270"></a>
<a id="__codelineno-0-4271" name="__codelineno-0-4271"></a><span class="sd">        - Now call the `align` method and use the dataset as the alignment source.</span>
<a id="__codelineno-0-4272" name="__codelineno-0-4272"></a>
<a id="__codelineno-0-4273" name="__codelineno-0-4273"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-4274" name="__codelineno-0-4274"></a><span class="sd">          &gt;&gt;&gt; aligned_dataset = dataset_target.align(dataset)</span>
<a id="__codelineno-0-4275" name="__codelineno-0-4275"></a><span class="sd">          &gt;&gt;&gt; print(aligned_dataset)</span>
<a id="__codelineno-0-4276" name="__codelineno-0-4276"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-4277" name="__codelineno-0-4277"></a><span class="sd">                      Cell size: 0.05</span>
<a id="__codelineno-0-4278" name="__codelineno-0-4278"></a><span class="sd">                      Dimension: 5 * 5</span>
<a id="__codelineno-0-4279" name="__codelineno-0-4279"></a><span class="sd">                      EPSG: 4326</span>
<a id="__codelineno-0-4280" name="__codelineno-0-4280"></a><span class="sd">                      Number of Bands: 1</span>
<a id="__codelineno-0-4281" name="__codelineno-0-4281"></a><span class="sd">                      Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-4282" name="__codelineno-0-4282"></a><span class="sd">                      Mask: -9999.0</span>
<a id="__codelineno-0-4283" name="__codelineno-0-4283"></a><span class="sd">                      Data type: float64</span>
<a id="__codelineno-0-4284" name="__codelineno-0-4284"></a><span class="sd">                      File:...</span>
<a id="__codelineno-0-4285" name="__codelineno-0-4285"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-4286" name="__codelineno-0-4286"></a>
<a id="__codelineno-0-4287" name="__codelineno-0-4287"></a><span class="sd">          ```</span>
<a id="__codelineno-0-4288" name="__codelineno-0-4288"></a>
<a id="__codelineno-0-4289" name="__codelineno-0-4289"></a><span class="sd">        ![align-result](./../_images/dataset/align-result.png)</span>
<a id="__codelineno-0-4290" name="__codelineno-0-4290"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4291" name="__codelineno-0-4291"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alignment_src</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">):</span>
<a id="__codelineno-0-4292" name="__codelineno-0-4292"></a>        <span class="n">src</span> <span class="o">=</span> <span class="n">alignment_src</span>
<a id="__codelineno-0-4293" name="__codelineno-0-4293"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4294" name="__codelineno-0-4294"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-4295" name="__codelineno-0-4295"></a>            <span class="s2">&quot;First parameter should be a Dataset read using Dataset.openRaster or a path to the raster, &quot;</span>
<a id="__codelineno-0-4296" name="__codelineno-0-4296"></a>            <span class="sa">f</span><span class="s2">&quot;given </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">alignment_src</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-4297" name="__codelineno-0-4297"></a>        <span class="p">)</span>
<a id="__codelineno-0-4298" name="__codelineno-0-4298"></a>
<a id="__codelineno-0-4299" name="__codelineno-0-4299"></a>    <span class="c1"># reproject the raster to match the projection of alignment_src</span>
<a id="__codelineno-0-4300" name="__codelineno-0-4300"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">epsg</span> <span class="o">==</span> <span class="n">src</span><span class="o">.</span><span class="n">epsg</span><span class="p">:</span>
<a id="__codelineno-0-4301" name="__codelineno-0-4301"></a>        <span class="n">reprojected_RasterB</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">epsg</span><span class="p">)</span>
<a id="__codelineno-0-4302" name="__codelineno-0-4302"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4303" name="__codelineno-0-4303"></a>        <span class="n">reprojected_RasterB</span> <span class="o">=</span> <span class="bp">self</span>
<a id="__codelineno-0-4304" name="__codelineno-0-4304"></a>    <span class="c1"># create a new raster</span>
<a id="__codelineno-0-4305" name="__codelineno-0-4305"></a>    <span class="n">dst</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">_create_dataset</span><span class="p">(</span>
<a id="__codelineno-0-4306" name="__codelineno-0-4306"></a>        <span class="n">src</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">src</span><span class="o">.</span><span class="n">rows</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">,</span> <span class="n">src</span><span class="o">.</span><span class="n">gdal_dtype</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;MEM&quot;</span>
<a id="__codelineno-0-4307" name="__codelineno-0-4307"></a>    <span class="p">)</span>
<a id="__codelineno-0-4308" name="__codelineno-0-4308"></a>    <span class="c1"># set the geotransform</span>
<a id="__codelineno-0-4309" name="__codelineno-0-4309"></a>    <span class="n">dst</span><span class="o">.</span><span class="n">SetGeoTransform</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">geotransform</span><span class="p">)</span>
<a id="__codelineno-0-4310" name="__codelineno-0-4310"></a>    <span class="c1"># set the projection</span>
<a id="__codelineno-0-4311" name="__codelineno-0-4311"></a>    <span class="n">dst</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span>
<a id="__codelineno-0-4312" name="__codelineno-0-4312"></a>    <span class="c1"># set the no data value</span>
<a id="__codelineno-0-4313" name="__codelineno-0-4313"></a>    <span class="n">dst_obj</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
<a id="__codelineno-0-4314" name="__codelineno-0-4314"></a>    <span class="n">dst_obj</span><span class="o">.</span><span class="n">_set_no_data_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">)</span>
<a id="__codelineno-0-4315" name="__codelineno-0-4315"></a>    <span class="c1"># perform the projection &amp; resampling</span>
<a id="__codelineno-0-4316" name="__codelineno-0-4316"></a>    <span class="n">method</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GRA_NearestNeighbour</span>
<a id="__codelineno-0-4317" name="__codelineno-0-4317"></a>    <span class="c1"># resample the reprojected_RasterB</span>
<a id="__codelineno-0-4318" name="__codelineno-0-4318"></a>    <span class="n">gdal</span><span class="o">.</span><span class="n">ReprojectImage</span><span class="p">(</span>
<a id="__codelineno-0-4319" name="__codelineno-0-4319"></a>        <span class="n">reprojected_RasterB</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span>
<a id="__codelineno-0-4320" name="__codelineno-0-4320"></a>        <span class="n">dst_obj</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span>
<a id="__codelineno-0-4321" name="__codelineno-0-4321"></a>        <span class="n">src</span><span class="o">.</span><span class="n">crs</span><span class="p">,</span>
<a id="__codelineno-0-4322" name="__codelineno-0-4322"></a>        <span class="n">src</span><span class="o">.</span><span class="n">crs</span><span class="p">,</span>
<a id="__codelineno-0-4323" name="__codelineno-0-4323"></a>        <span class="n">method</span><span class="p">,</span>
<a id="__codelineno-0-4324" name="__codelineno-0-4324"></a>    <span class="p">)</span>
<a id="__codelineno-0-4325" name="__codelineno-0-4325"></a>
<a id="__codelineno-0-4326" name="__codelineno-0-4326"></a>    <span class="k">return</span> <span class="n">dst_obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.correct_wrap_cutline_error" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.correct_wrap_cutline_error" class="toclink">
            <code class="highlight language-python"><span class="n">correct_wrap_cutline_error</span><span class="p">(</span><span class="n">src</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.correct_wrap_cutline_error" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Correct wrap cutline error.</p>
<p>https://github.com/Serapieum-of-alex/pyramids/issues/74</p>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4403">4403</a></span>
<span class="normal"><a href="#__codelineno-0-4404">4404</a></span>
<span class="normal"><a href="#__codelineno-0-4405">4405</a></span>
<span class="normal"><a href="#__codelineno-0-4406">4406</a></span>
<span class="normal"><a href="#__codelineno-0-4407">4407</a></span>
<span class="normal"><a href="#__codelineno-0-4408">4408</a></span>
<span class="normal"><a href="#__codelineno-0-4409">4409</a></span>
<span class="normal"><a href="#__codelineno-0-4410">4410</a></span>
<span class="normal"><a href="#__codelineno-0-4411">4411</a></span>
<span class="normal"><a href="#__codelineno-0-4412">4412</a></span>
<span class="normal"><a href="#__codelineno-0-4413">4413</a></span>
<span class="normal"><a href="#__codelineno-0-4414">4414</a></span>
<span class="normal"><a href="#__codelineno-0-4415">4415</a></span>
<span class="normal"><a href="#__codelineno-0-4416">4416</a></span>
<span class="normal"><a href="#__codelineno-0-4417">4417</a></span>
<span class="normal"><a href="#__codelineno-0-4418">4418</a></span>
<span class="normal"><a href="#__codelineno-0-4419">4419</a></span>
<span class="normal"><a href="#__codelineno-0-4420">4420</a></span>
<span class="normal"><a href="#__codelineno-0-4421">4421</a></span>
<span class="normal"><a href="#__codelineno-0-4422">4422</a></span>
<span class="normal"><a href="#__codelineno-0-4423">4423</a></span>
<span class="normal"><a href="#__codelineno-0-4424">4424</a></span>
<span class="normal"><a href="#__codelineno-0-4425">4425</a></span>
<span class="normal"><a href="#__codelineno-0-4426">4426</a></span>
<span class="normal"><a href="#__codelineno-0-4427">4427</a></span>
<span class="normal"><a href="#__codelineno-0-4428">4428</a></span>
<span class="normal"><a href="#__codelineno-0-4429">4429</a></span>
<span class="normal"><a href="#__codelineno-0-4430">4430</a></span>
<span class="normal"><a href="#__codelineno-0-4431">4431</a></span>
<span class="normal"><a href="#__codelineno-0-4432">4432</a></span>
<span class="normal"><a href="#__codelineno-0-4433">4433</a></span>
<span class="normal"><a href="#__codelineno-0-4434">4434</a></span>
<span class="normal"><a href="#__codelineno-0-4435">4435</a></span>
<span class="normal"><a href="#__codelineno-0-4436">4436</a></span>
<span class="normal"><a href="#__codelineno-0-4437">4437</a></span>
<span class="normal"><a href="#__codelineno-0-4438">4438</a></span>
<span class="normal"><a href="#__codelineno-0-4439">4439</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4403" name="__codelineno-0-4403"></a><span class="nd">@staticmethod</span>
<a id="__codelineno-0-4404" name="__codelineno-0-4404"></a><span class="k">def</span><span class="w"> </span><span class="nf">correct_wrap_cutline_error</span><span class="p">(</span><span class="n">src</span><span class="p">:</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">):</span>
<a id="__codelineno-0-4405" name="__codelineno-0-4405"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Correct wrap cutline error.</span>
<a id="__codelineno-0-4406" name="__codelineno-0-4406"></a>
<a id="__codelineno-0-4407" name="__codelineno-0-4407"></a><span class="sd">    https://github.com/Serapieum-of-alex/pyramids/issues/74</span>
<a id="__codelineno-0-4408" name="__codelineno-0-4408"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4409" name="__codelineno-0-4409"></a>    <span class="n">big_array</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">read_array</span><span class="p">()</span>
<a id="__codelineno-0-4410" name="__codelineno-0-4410"></a>    <span class="n">value_to_remove</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4411" name="__codelineno-0-4411"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Remove rows and columns that are all filled with a certain value from a 2D array.&quot;&quot;&quot;</span>
<a id="__codelineno-0-4412" name="__codelineno-0-4412"></a>    <span class="c1"># Find rows and columns to be removed</span>
<a id="__codelineno-0-4413" name="__codelineno-0-4413"></a>    <span class="k">if</span> <span class="n">big_array</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-4414" name="__codelineno-0-4414"></a>        <span class="n">rows_to_remove</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">big_array</span> <span class="o">==</span> <span class="n">value_to_remove</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4415" name="__codelineno-0-4415"></a>        <span class="n">cols_to_remove</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">big_array</span> <span class="o">==</span> <span class="n">value_to_remove</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4416" name="__codelineno-0-4416"></a>        <span class="c1"># Use boolean indexing to remove rows and columns</span>
<a id="__codelineno-0-4417" name="__codelineno-0-4417"></a>        <span class="n">small_array</span> <span class="o">=</span> <span class="n">big_array</span><span class="p">[</span><span class="o">~</span><span class="n">rows_to_remove</span><span class="p">][:,</span> <span class="o">~</span><span class="n">cols_to_remove</span><span class="p">]</span>
<a id="__codelineno-0-4418" name="__codelineno-0-4418"></a>    <span class="k">elif</span> <span class="n">big_array</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
<a id="__codelineno-0-4419" name="__codelineno-0-4419"></a>        <span class="n">rows_to_remove</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">big_array</span> <span class="o">==</span> <span class="n">value_to_remove</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<a id="__codelineno-0-4420" name="__codelineno-0-4420"></a>        <span class="n">cols_to_remove</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">big_array</span> <span class="o">==</span> <span class="n">value_to_remove</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<a id="__codelineno-0-4421" name="__codelineno-0-4421"></a>        <span class="c1"># Use boolean indexing to remove rows and columns</span>
<a id="__codelineno-0-4422" name="__codelineno-0-4422"></a>        <span class="c1"># first remove the rows then the columns</span>
<a id="__codelineno-0-4423" name="__codelineno-0-4423"></a>        <span class="n">small_array</span> <span class="o">=</span> <span class="n">big_array</span><span class="p">[:,</span> <span class="o">~</span><span class="n">rows_to_remove</span><span class="p">,</span> <span class="p">:]</span>
<a id="__codelineno-0-4424" name="__codelineno-0-4424"></a>        <span class="n">small_array</span> <span class="o">=</span> <span class="n">small_array</span><span class="p">[:,</span> <span class="p">:,</span> <span class="o">~</span><span class="n">cols_to_remove</span><span class="p">]</span>
<a id="__codelineno-0-4425" name="__codelineno-0-4425"></a>        <span class="n">n_rows</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span><span class="o">~</span><span class="n">rows_to_remove</span><span class="p">)</span>
<a id="__codelineno-0-4426" name="__codelineno-0-4426"></a>        <span class="n">n_cols</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span><span class="o">~</span><span class="n">cols_to_remove</span><span class="p">)</span>
<a id="__codelineno-0-4427" name="__codelineno-0-4427"></a>        <span class="n">small_array</span> <span class="o">=</span> <span class="n">small_array</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="n">src</span><span class="o">.</span><span class="n">band_count</span><span class="p">,</span> <span class="n">n_rows</span><span class="p">,</span> <span class="n">n_cols</span><span class="p">))</span>
<a id="__codelineno-0-4428" name="__codelineno-0-4428"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4429" name="__codelineno-0-4429"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Array must be 2D or 3D&quot;</span><span class="p">)</span>
<a id="__codelineno-0-4430" name="__codelineno-0-4430"></a>
<a id="__codelineno-0-4431" name="__codelineno-0-4431"></a>    <span class="n">x_ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="o">~</span><span class="n">rows_to_remove</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4432" name="__codelineno-0-4432"></a>    <span class="n">y_ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="o">~</span><span class="n">cols_to_remove</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-4433" name="__codelineno-0-4433"></a>    <span class="n">new_x</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">y_ind</span><span class="p">]</span> <span class="o">-</span> <span class="n">src</span><span class="o">.</span><span class="n">cell_size</span> <span class="o">/</span> <span class="mi">2</span>
<a id="__codelineno-0-4434" name="__codelineno-0-4434"></a>    <span class="n">new_y</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="n">x_ind</span><span class="p">]</span> <span class="o">+</span> <span class="n">src</span><span class="o">.</span><span class="n">cell_size</span> <span class="o">/</span> <span class="mi">2</span>
<a id="__codelineno-0-4435" name="__codelineno-0-4435"></a>    <span class="n">new_gt</span> <span class="o">=</span> <span class="p">(</span><span class="n">new_x</span><span class="p">,</span> <span class="n">src</span><span class="o">.</span><span class="n">cell_size</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">new_y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">src</span><span class="o">.</span><span class="n">cell_size</span><span class="p">)</span>
<a id="__codelineno-0-4436" name="__codelineno-0-4436"></a>    <span class="n">new_src</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span>
<a id="__codelineno-0-4437" name="__codelineno-0-4437"></a>        <span class="n">small_array</span><span class="p">,</span> <span class="n">geo</span><span class="o">=</span><span class="n">new_gt</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="n">src</span><span class="o">.</span><span class="n">epsg</span><span class="p">,</span> <span class="n">no_data_value</span><span class="o">=</span><span class="n">src</span><span class="o">.</span><span class="n">no_data_value</span>
<a id="__codelineno-0-4438" name="__codelineno-0-4438"></a>    <span class="p">)</span>
<a id="__codelineno-0-4439" name="__codelineno-0-4439"></a>    <span class="k">return</span> <span class="n">new_src</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.crop" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.crop" class="toclink">
            <code class="highlight language-python"><span class="n">crop</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">touch</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.crop" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Crop dataset using dataset/feature collection.</p>
<div class="highlight"><pre><span></span><code>Crop/Clip the Dataset object using a polygon/raster.
</code></pre></div>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>mask</code>
            </td>
            <td>
                  <code><span title="geopandas.geodataframe.GeoDataFrame">GeoDataFrame</span> | <a class="autorefs autorefs-internal" title="&lt;code&gt;pyramids.dataset.Dataset&lt;/code&gt;" href="#pyramids.dataset.Dataset">Dataset</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>GeoDataFrame with a polygon geometry, or a Dataset object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>touch</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Include the cells that touch the polygon, not only those that lie entirely inside the polygon mask.
Default is True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>inplace</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, apply changes in place. Default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;pyramids.dataset.Dataset&lt;/code&gt;" href="#pyramids.dataset.Dataset">Dataset</a>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dataset | None:
The cropped raster. If inplace is True, the method will change the raster in place and return None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="hint" open>
  <summary>Hint</summary>
  <ul>
<li>If the mask is a dataset with multi-bands, the <code>crop</code> method will use the first band as the mask.</li>
</ul>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>
<p>Crop the raster using a polygon mask.</p>
</li>
<li>
<p>The polygon covers 4 cells in the 3rd and 4th rows and 3rd and 4th column <code>arr[2:4, 2:4]</code>, so the result
    dataset will have the same number of bands <code>4</code>, 2 rows and 2 columns.</p>
</li>
<li>First, create the dataset to have 4 bands, 10 rows and 10 columns; the dataset has a cell size of 0.05
    degree, the top left corner of the dataset is (0, 0).</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">shapely.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Polygon</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="o">...</span>         <span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="o">...</span> <span class="p">)</span>
</code></pre></div>
- Second, create the polygon using shapely polygon, and use the xmin, ymin, xmax, ymax = [0.1, -0.2, 0.2 -0.1]
    to cover the 4 cells.</p>
<div class="highlight"><pre><span></span><code>```python
&gt;&gt;&gt; mask = gpd.GeoDataFrame(geometry=[Polygon([(0.1, -0.1), (0.1, -0.2), (0.2, -0.2), (0.2, -0.1)])], crs=4326)

```
</code></pre></div>
<ul>
<li>Pass the <code>geodataframe</code> to the crop method using the <code>mask</code> parameter.</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cropped_dataset</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
</code></pre></div>
- Check the cropped dataset:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">cropped_dataset</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">cropped_dataset</span><span class="o">.</span><span class="n">geotransform</span><span class="p">)</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">)</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">cropped_dataset</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span><span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="p">[[</span><span class="mf">0.00921161</span> <span class="mf">0.90841171</span><span class="p">]</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a> <span class="p">[</span><span class="mf">0.355636</span>   <span class="mf">0.18650262</span><span class="p">]]</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">])</span><span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="p">[[</span><span class="mf">0.00921161</span> <span class="mf">0.90841171</span><span class="p">]</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a> <span class="p">[</span><span class="mf">0.355636</span>   <span class="mf">0.18650262</span><span class="p">]]</span>
</code></pre></div>
- Crop a raster using another raster mask:</p>
<ul>
<li>Create a mask dataset with the same extent of the polygon we used in the previous example.</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">geotransform</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">)</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">mask_dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">geo</span><span class="o">=</span><span class="n">geotransform</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
- Then use the mask dataset to crop the dataset.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cropped_dataset_2</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="n">mask_dataset</span><span class="p">)</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">cropped_dataset_2</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</code></pre></div>
- Check the cropped dataset:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">cropped_dataset_2</span><span class="o">.</span><span class="n">geotransform</span><span class="p">)</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">)</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">cropped_dataset_2</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span><span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="p">[[</span><span class="mf">0.00921161</span> <span class="mf">0.90841171</span><span class="p">]</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a> <span class="p">[</span><span class="mf">0.355636</span>   <span class="mf">0.18650262</span><span class="p">]]</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">])</span><span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a> <span class="p">[[</span><span class="mf">0.00921161</span> <span class="mf">0.90841171</span><span class="p">]</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a> <span class="p">[</span><span class="mf">0.355636</span>   <span class="mf">0.18650262</span><span class="p">]]</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4441">4441</a></span>
<span class="normal"><a href="#__codelineno-0-4442">4442</a></span>
<span class="normal"><a href="#__codelineno-0-4443">4443</a></span>
<span class="normal"><a href="#__codelineno-0-4444">4444</a></span>
<span class="normal"><a href="#__codelineno-0-4445">4445</a></span>
<span class="normal"><a href="#__codelineno-0-4446">4446</a></span>
<span class="normal"><a href="#__codelineno-0-4447">4447</a></span>
<span class="normal"><a href="#__codelineno-0-4448">4448</a></span>
<span class="normal"><a href="#__codelineno-0-4449">4449</a></span>
<span class="normal"><a href="#__codelineno-0-4450">4450</a></span>
<span class="normal"><a href="#__codelineno-0-4451">4451</a></span>
<span class="normal"><a href="#__codelineno-0-4452">4452</a></span>
<span class="normal"><a href="#__codelineno-0-4453">4453</a></span>
<span class="normal"><a href="#__codelineno-0-4454">4454</a></span>
<span class="normal"><a href="#__codelineno-0-4455">4455</a></span>
<span class="normal"><a href="#__codelineno-0-4456">4456</a></span>
<span class="normal"><a href="#__codelineno-0-4457">4457</a></span>
<span class="normal"><a href="#__codelineno-0-4458">4458</a></span>
<span class="normal"><a href="#__codelineno-0-4459">4459</a></span>
<span class="normal"><a href="#__codelineno-0-4460">4460</a></span>
<span class="normal"><a href="#__codelineno-0-4461">4461</a></span>
<span class="normal"><a href="#__codelineno-0-4462">4462</a></span>
<span class="normal"><a href="#__codelineno-0-4463">4463</a></span>
<span class="normal"><a href="#__codelineno-0-4464">4464</a></span>
<span class="normal"><a href="#__codelineno-0-4465">4465</a></span>
<span class="normal"><a href="#__codelineno-0-4466">4466</a></span>
<span class="normal"><a href="#__codelineno-0-4467">4467</a></span>
<span class="normal"><a href="#__codelineno-0-4468">4468</a></span>
<span class="normal"><a href="#__codelineno-0-4469">4469</a></span>
<span class="normal"><a href="#__codelineno-0-4470">4470</a></span>
<span class="normal"><a href="#__codelineno-0-4471">4471</a></span>
<span class="normal"><a href="#__codelineno-0-4472">4472</a></span>
<span class="normal"><a href="#__codelineno-0-4473">4473</a></span>
<span class="normal"><a href="#__codelineno-0-4474">4474</a></span>
<span class="normal"><a href="#__codelineno-0-4475">4475</a></span>
<span class="normal"><a href="#__codelineno-0-4476">4476</a></span>
<span class="normal"><a href="#__codelineno-0-4477">4477</a></span>
<span class="normal"><a href="#__codelineno-0-4478">4478</a></span>
<span class="normal"><a href="#__codelineno-0-4479">4479</a></span>
<span class="normal"><a href="#__codelineno-0-4480">4480</a></span>
<span class="normal"><a href="#__codelineno-0-4481">4481</a></span>
<span class="normal"><a href="#__codelineno-0-4482">4482</a></span>
<span class="normal"><a href="#__codelineno-0-4483">4483</a></span>
<span class="normal"><a href="#__codelineno-0-4484">4484</a></span>
<span class="normal"><a href="#__codelineno-0-4485">4485</a></span>
<span class="normal"><a href="#__codelineno-0-4486">4486</a></span>
<span class="normal"><a href="#__codelineno-0-4487">4487</a></span>
<span class="normal"><a href="#__codelineno-0-4488">4488</a></span>
<span class="normal"><a href="#__codelineno-0-4489">4489</a></span>
<span class="normal"><a href="#__codelineno-0-4490">4490</a></span>
<span class="normal"><a href="#__codelineno-0-4491">4491</a></span>
<span class="normal"><a href="#__codelineno-0-4492">4492</a></span>
<span class="normal"><a href="#__codelineno-0-4493">4493</a></span>
<span class="normal"><a href="#__codelineno-0-4494">4494</a></span>
<span class="normal"><a href="#__codelineno-0-4495">4495</a></span>
<span class="normal"><a href="#__codelineno-0-4496">4496</a></span>
<span class="normal"><a href="#__codelineno-0-4497">4497</a></span>
<span class="normal"><a href="#__codelineno-0-4498">4498</a></span>
<span class="normal"><a href="#__codelineno-0-4499">4499</a></span>
<span class="normal"><a href="#__codelineno-0-4500">4500</a></span>
<span class="normal"><a href="#__codelineno-0-4501">4501</a></span>
<span class="normal"><a href="#__codelineno-0-4502">4502</a></span>
<span class="normal"><a href="#__codelineno-0-4503">4503</a></span>
<span class="normal"><a href="#__codelineno-0-4504">4504</a></span>
<span class="normal"><a href="#__codelineno-0-4505">4505</a></span>
<span class="normal"><a href="#__codelineno-0-4506">4506</a></span>
<span class="normal"><a href="#__codelineno-0-4507">4507</a></span>
<span class="normal"><a href="#__codelineno-0-4508">4508</a></span>
<span class="normal"><a href="#__codelineno-0-4509">4509</a></span>
<span class="normal"><a href="#__codelineno-0-4510">4510</a></span>
<span class="normal"><a href="#__codelineno-0-4511">4511</a></span>
<span class="normal"><a href="#__codelineno-0-4512">4512</a></span>
<span class="normal"><a href="#__codelineno-0-4513">4513</a></span>
<span class="normal"><a href="#__codelineno-0-4514">4514</a></span>
<span class="normal"><a href="#__codelineno-0-4515">4515</a></span>
<span class="normal"><a href="#__codelineno-0-4516">4516</a></span>
<span class="normal"><a href="#__codelineno-0-4517">4517</a></span>
<span class="normal"><a href="#__codelineno-0-4518">4518</a></span>
<span class="normal"><a href="#__codelineno-0-4519">4519</a></span>
<span class="normal"><a href="#__codelineno-0-4520">4520</a></span>
<span class="normal"><a href="#__codelineno-0-4521">4521</a></span>
<span class="normal"><a href="#__codelineno-0-4522">4522</a></span>
<span class="normal"><a href="#__codelineno-0-4523">4523</a></span>
<span class="normal"><a href="#__codelineno-0-4524">4524</a></span>
<span class="normal"><a href="#__codelineno-0-4525">4525</a></span>
<span class="normal"><a href="#__codelineno-0-4526">4526</a></span>
<span class="normal"><a href="#__codelineno-0-4527">4527</a></span>
<span class="normal"><a href="#__codelineno-0-4528">4528</a></span>
<span class="normal"><a href="#__codelineno-0-4529">4529</a></span>
<span class="normal"><a href="#__codelineno-0-4530">4530</a></span>
<span class="normal"><a href="#__codelineno-0-4531">4531</a></span>
<span class="normal"><a href="#__codelineno-0-4532">4532</a></span>
<span class="normal"><a href="#__codelineno-0-4533">4533</a></span>
<span class="normal"><a href="#__codelineno-0-4534">4534</a></span>
<span class="normal"><a href="#__codelineno-0-4535">4535</a></span>
<span class="normal"><a href="#__codelineno-0-4536">4536</a></span>
<span class="normal"><a href="#__codelineno-0-4537">4537</a></span>
<span class="normal"><a href="#__codelineno-0-4538">4538</a></span>
<span class="normal"><a href="#__codelineno-0-4539">4539</a></span>
<span class="normal"><a href="#__codelineno-0-4540">4540</a></span>
<span class="normal"><a href="#__codelineno-0-4541">4541</a></span>
<span class="normal"><a href="#__codelineno-0-4542">4542</a></span>
<span class="normal"><a href="#__codelineno-0-4543">4543</a></span>
<span class="normal"><a href="#__codelineno-0-4544">4544</a></span>
<span class="normal"><a href="#__codelineno-0-4545">4545</a></span>
<span class="normal"><a href="#__codelineno-0-4546">4546</a></span>
<span class="normal"><a href="#__codelineno-0-4547">4547</a></span>
<span class="normal"><a href="#__codelineno-0-4548">4548</a></span>
<span class="normal"><a href="#__codelineno-0-4549">4549</a></span>
<span class="normal"><a href="#__codelineno-0-4550">4550</a></span>
<span class="normal"><a href="#__codelineno-0-4551">4551</a></span>
<span class="normal"><a href="#__codelineno-0-4552">4552</a></span>
<span class="normal"><a href="#__codelineno-0-4553">4553</a></span>
<span class="normal"><a href="#__codelineno-0-4554">4554</a></span>
<span class="normal"><a href="#__codelineno-0-4555">4555</a></span>
<span class="normal"><a href="#__codelineno-0-4556">4556</a></span>
<span class="normal"><a href="#__codelineno-0-4557">4557</a></span>
<span class="normal"><a href="#__codelineno-0-4558">4558</a></span>
<span class="normal"><a href="#__codelineno-0-4559">4559</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4441" name="__codelineno-0-4441"></a><span class="k">def</span><span class="w"> </span><span class="nf">crop</span><span class="p">(</span>
<a id="__codelineno-0-4442" name="__codelineno-0-4442"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-4443" name="__codelineno-0-4443"></a>    <span class="n">mask</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">GeoDataFrame</span><span class="p">,</span> <span class="n">FeatureCollection</span><span class="p">],</span>
<a id="__codelineno-0-4444" name="__codelineno-0-4444"></a>    <span class="n">touch</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-4445" name="__codelineno-0-4445"></a>    <span class="n">inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-4446" name="__codelineno-0-4446"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Dataset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<a id="__codelineno-0-4447" name="__codelineno-0-4447"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Crop dataset using dataset/feature collection.</span>
<a id="__codelineno-0-4448" name="__codelineno-0-4448"></a>
<a id="__codelineno-0-4449" name="__codelineno-0-4449"></a><span class="sd">        Crop/Clip the Dataset object using a polygon/raster.</span>
<a id="__codelineno-0-4450" name="__codelineno-0-4450"></a>
<a id="__codelineno-0-4451" name="__codelineno-0-4451"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4452" name="__codelineno-0-4452"></a><span class="sd">        mask (GeoDataFrame | Dataset):</span>
<a id="__codelineno-0-4453" name="__codelineno-0-4453"></a><span class="sd">            GeoDataFrame with a polygon geometry, or a Dataset object.</span>
<a id="__codelineno-0-4454" name="__codelineno-0-4454"></a><span class="sd">        touch (bool):</span>
<a id="__codelineno-0-4455" name="__codelineno-0-4455"></a><span class="sd">            Include the cells that touch the polygon, not only those that lie entirely inside the polygon mask.</span>
<a id="__codelineno-0-4456" name="__codelineno-0-4456"></a><span class="sd">            Default is True.</span>
<a id="__codelineno-0-4457" name="__codelineno-0-4457"></a><span class="sd">        inplace (bool):</span>
<a id="__codelineno-0-4458" name="__codelineno-0-4458"></a><span class="sd">            If True, apply changes in place. Default is False.</span>
<a id="__codelineno-0-4459" name="__codelineno-0-4459"></a>
<a id="__codelineno-0-4460" name="__codelineno-0-4460"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-4461" name="__codelineno-0-4461"></a><span class="sd">        Dataset | None:</span>
<a id="__codelineno-0-4462" name="__codelineno-0-4462"></a><span class="sd">            The cropped raster. If inplace is True, the method will change the raster in place and return None.</span>
<a id="__codelineno-0-4463" name="__codelineno-0-4463"></a>
<a id="__codelineno-0-4464" name="__codelineno-0-4464"></a><span class="sd">    Hint:</span>
<a id="__codelineno-0-4465" name="__codelineno-0-4465"></a><span class="sd">        - If the mask is a dataset with multi-bands, the `crop` method will use the first band as the mask.</span>
<a id="__codelineno-0-4466" name="__codelineno-0-4466"></a>
<a id="__codelineno-0-4467" name="__codelineno-0-4467"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-4468" name="__codelineno-0-4468"></a><span class="sd">        - Crop the raster using a polygon mask.</span>
<a id="__codelineno-0-4469" name="__codelineno-0-4469"></a>
<a id="__codelineno-0-4470" name="__codelineno-0-4470"></a><span class="sd">          - The polygon covers 4 cells in the 3rd and 4th rows and 3rd and 4th column `arr[2:4, 2:4]`, so the result</span>
<a id="__codelineno-0-4471" name="__codelineno-0-4471"></a><span class="sd">            dataset will have the same number of bands `4`, 2 rows and 2 columns.</span>
<a id="__codelineno-0-4472" name="__codelineno-0-4472"></a><span class="sd">          - First, create the dataset to have 4 bands, 10 rows and 10 columns; the dataset has a cell size of 0.05</span>
<a id="__codelineno-0-4473" name="__codelineno-0-4473"></a><span class="sd">            degree, the top left corner of the dataset is (0, 0).</span>
<a id="__codelineno-0-4474" name="__codelineno-0-4474"></a>
<a id="__codelineno-0-4475" name="__codelineno-0-4475"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-4476" name="__codelineno-0-4476"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-4477" name="__codelineno-0-4477"></a><span class="sd">          &gt;&gt;&gt; import geopandas as gpd</span>
<a id="__codelineno-0-4478" name="__codelineno-0-4478"></a><span class="sd">          &gt;&gt;&gt; from shapely.geometry import Polygon</span>
<a id="__codelineno-0-4479" name="__codelineno-0-4479"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.rand(4, 10, 10)</span>
<a id="__codelineno-0-4480" name="__codelineno-0-4480"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-4481" name="__codelineno-0-4481"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-4482" name="__codelineno-0-4482"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(</span>
<a id="__codelineno-0-4483" name="__codelineno-0-4483"></a><span class="sd">          ...         arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326</span>
<a id="__codelineno-0-4484" name="__codelineno-0-4484"></a><span class="sd">          ... )</span>
<a id="__codelineno-0-4485" name="__codelineno-0-4485"></a>
<a id="__codelineno-0-4486" name="__codelineno-0-4486"></a><span class="sd">          ```</span>
<a id="__codelineno-0-4487" name="__codelineno-0-4487"></a><span class="sd">        - Second, create the polygon using shapely polygon, and use the xmin, ymin, xmax, ymax = [0.1, -0.2, 0.2 -0.1]</span>
<a id="__codelineno-0-4488" name="__codelineno-0-4488"></a><span class="sd">            to cover the 4 cells.</span>
<a id="__codelineno-0-4489" name="__codelineno-0-4489"></a>
<a id="__codelineno-0-4490" name="__codelineno-0-4490"></a><span class="sd">            ```python</span>
<a id="__codelineno-0-4491" name="__codelineno-0-4491"></a><span class="sd">            &gt;&gt;&gt; mask = gpd.GeoDataFrame(geometry=[Polygon([(0.1, -0.1), (0.1, -0.2), (0.2, -0.2), (0.2, -0.1)])], crs=4326)</span>
<a id="__codelineno-0-4492" name="__codelineno-0-4492"></a>
<a id="__codelineno-0-4493" name="__codelineno-0-4493"></a><span class="sd">            ```</span>
<a id="__codelineno-0-4494" name="__codelineno-0-4494"></a><span class="sd">        - Pass the `geodataframe` to the crop method using the `mask` parameter.</span>
<a id="__codelineno-0-4495" name="__codelineno-0-4495"></a>
<a id="__codelineno-0-4496" name="__codelineno-0-4496"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-4497" name="__codelineno-0-4497"></a><span class="sd">          &gt;&gt;&gt; cropped_dataset = dataset.crop(mask=mask)</span>
<a id="__codelineno-0-4498" name="__codelineno-0-4498"></a>
<a id="__codelineno-0-4499" name="__codelineno-0-4499"></a><span class="sd">          ```</span>
<a id="__codelineno-0-4500" name="__codelineno-0-4500"></a><span class="sd">        - Check the cropped dataset:</span>
<a id="__codelineno-0-4501" name="__codelineno-0-4501"></a>
<a id="__codelineno-0-4502" name="__codelineno-0-4502"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-4503" name="__codelineno-0-4503"></a><span class="sd">          &gt;&gt;&gt; print(cropped_dataset.shape)</span>
<a id="__codelineno-0-4504" name="__codelineno-0-4504"></a><span class="sd">          (4, 2, 2)</span>
<a id="__codelineno-0-4505" name="__codelineno-0-4505"></a><span class="sd">          &gt;&gt;&gt; print(cropped_dataset.geotransform)</span>
<a id="__codelineno-0-4506" name="__codelineno-0-4506"></a><span class="sd">          (0.1, 0.05, 0.0, -0.1, 0.0, -0.05)</span>
<a id="__codelineno-0-4507" name="__codelineno-0-4507"></a><span class="sd">          &gt;&gt;&gt; print(cropped_dataset.read_array(band=0))# doctest: +SKIP</span>
<a id="__codelineno-0-4508" name="__codelineno-0-4508"></a><span class="sd">          [[0.00921161 0.90841171]</span>
<a id="__codelineno-0-4509" name="__codelineno-0-4509"></a><span class="sd">           [0.355636   0.18650262]]</span>
<a id="__codelineno-0-4510" name="__codelineno-0-4510"></a><span class="sd">          &gt;&gt;&gt; print(arr[0, 2:4, 2:4])# doctest: +SKIP</span>
<a id="__codelineno-0-4511" name="__codelineno-0-4511"></a><span class="sd">          [[0.00921161 0.90841171]</span>
<a id="__codelineno-0-4512" name="__codelineno-0-4512"></a><span class="sd">           [0.355636   0.18650262]]</span>
<a id="__codelineno-0-4513" name="__codelineno-0-4513"></a>
<a id="__codelineno-0-4514" name="__codelineno-0-4514"></a><span class="sd">          ```</span>
<a id="__codelineno-0-4515" name="__codelineno-0-4515"></a><span class="sd">        - Crop a raster using another raster mask:</span>
<a id="__codelineno-0-4516" name="__codelineno-0-4516"></a>
<a id="__codelineno-0-4517" name="__codelineno-0-4517"></a><span class="sd">          - Create a mask dataset with the same extent of the polygon we used in the previous example.</span>
<a id="__codelineno-0-4518" name="__codelineno-0-4518"></a>
<a id="__codelineno-0-4519" name="__codelineno-0-4519"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-4520" name="__codelineno-0-4520"></a><span class="sd">          &gt;&gt;&gt; geotransform = (0.1, 0.05, 0.0, -0.1, 0.0, -0.05)</span>
<a id="__codelineno-0-4521" name="__codelineno-0-4521"></a><span class="sd">          &gt;&gt;&gt; mask_dataset = Dataset.create_from_array(np.random.rand(2, 2), geo=geotransform, epsg=4326)</span>
<a id="__codelineno-0-4522" name="__codelineno-0-4522"></a>
<a id="__codelineno-0-4523" name="__codelineno-0-4523"></a><span class="sd">          ```</span>
<a id="__codelineno-0-4524" name="__codelineno-0-4524"></a><span class="sd">        - Then use the mask dataset to crop the dataset.</span>
<a id="__codelineno-0-4525" name="__codelineno-0-4525"></a>
<a id="__codelineno-0-4526" name="__codelineno-0-4526"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-4527" name="__codelineno-0-4527"></a><span class="sd">          &gt;&gt;&gt; cropped_dataset_2 = dataset.crop(mask=mask_dataset)</span>
<a id="__codelineno-0-4528" name="__codelineno-0-4528"></a><span class="sd">          &gt;&gt;&gt; print(cropped_dataset_2.shape)</span>
<a id="__codelineno-0-4529" name="__codelineno-0-4529"></a><span class="sd">          (4, 2, 2)</span>
<a id="__codelineno-0-4530" name="__codelineno-0-4530"></a>
<a id="__codelineno-0-4531" name="__codelineno-0-4531"></a><span class="sd">          ```</span>
<a id="__codelineno-0-4532" name="__codelineno-0-4532"></a><span class="sd">        - Check the cropped dataset:</span>
<a id="__codelineno-0-4533" name="__codelineno-0-4533"></a>
<a id="__codelineno-0-4534" name="__codelineno-0-4534"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-4535" name="__codelineno-0-4535"></a><span class="sd">          &gt;&gt;&gt; print(cropped_dataset_2.geotransform)</span>
<a id="__codelineno-0-4536" name="__codelineno-0-4536"></a><span class="sd">          (0.1, 0.05, 0.0, -0.1, 0.0, -0.05)</span>
<a id="__codelineno-0-4537" name="__codelineno-0-4537"></a><span class="sd">          &gt;&gt;&gt; print(cropped_dataset_2.read_array(band=0))# doctest: +SKIP</span>
<a id="__codelineno-0-4538" name="__codelineno-0-4538"></a><span class="sd">          [[0.00921161 0.90841171]</span>
<a id="__codelineno-0-4539" name="__codelineno-0-4539"></a><span class="sd">           [0.355636   0.18650262]]</span>
<a id="__codelineno-0-4540" name="__codelineno-0-4540"></a><span class="sd">          &gt;&gt;&gt; print(arr[0, 2:4, 2:4])# doctest: +SKIP</span>
<a id="__codelineno-0-4541" name="__codelineno-0-4541"></a><span class="sd">           [[0.00921161 0.90841171]</span>
<a id="__codelineno-0-4542" name="__codelineno-0-4542"></a><span class="sd">           [0.355636   0.18650262]]</span>
<a id="__codelineno-0-4543" name="__codelineno-0-4543"></a>
<a id="__codelineno-0-4544" name="__codelineno-0-4544"></a><span class="sd">          ```</span>
<a id="__codelineno-0-4545" name="__codelineno-0-4545"></a>
<a id="__codelineno-0-4546" name="__codelineno-0-4546"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4547" name="__codelineno-0-4547"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">GeoDataFrame</span><span class="p">):</span>
<a id="__codelineno-0-4548" name="__codelineno-0-4548"></a>        <span class="n">dst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_crop_with_polygon_warp</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">touch</span><span class="o">=</span><span class="n">touch</span><span class="p">)</span>
<a id="__codelineno-0-4549" name="__codelineno-0-4549"></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">):</span>
<a id="__codelineno-0-4550" name="__codelineno-0-4550"></a>        <span class="n">dst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_crop_with_raster</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>
<a id="__codelineno-0-4551" name="__codelineno-0-4551"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4552" name="__codelineno-0-4552"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-4553" name="__codelineno-0-4553"></a>            <span class="s2">&quot;The second parameter: mask could be either GeoDataFrame or Dataset object&quot;</span>
<a id="__codelineno-0-4554" name="__codelineno-0-4554"></a>        <span class="p">)</span>
<a id="__codelineno-0-4555" name="__codelineno-0-4555"></a>
<a id="__codelineno-0-4556" name="__codelineno-0-4556"></a>    <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
<a id="__codelineno-0-4557" name="__codelineno-0-4557"></a>        <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dst</span><span class="o">.</span><span class="n">raster</span><span class="p">)</span>
<a id="__codelineno-0-4558" name="__codelineno-0-4558"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4559" name="__codelineno-0-4559"></a>        <span class="k">return</span> <span class="n">dst</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.map_to_array_coordinates" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.map_to_array_coordinates" class="toclink">
            <code class="highlight language-python"><span class="n">map_to_array_coordinates</span><span class="p">(</span><span class="n">points</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.map_to_array_coordinates" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Convert coordinates of points to array indices.</p>
<ul>
<li>map_to_array_coordinates locates a point with real coordinates (x, y) or (lon, lat) on the array by finding
    the cell indices (row, column) of the nearest cell in the raster.</li>
<li>The point coordinate system of the raster has to be projected to be able to calculate the distance.</li>
</ul>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>points</code>
            </td>
            <td>
                  <code><span title="geopandas.geodataframe.GeoDataFrame">GeoDataFrame</span> | <span title="pandas.DataFrame">DataFrame</span> | <a class="autorefs autorefs-internal" title="&lt;code&gt;pyramids.featurecollection.FeatureCollection&lt;/code&gt;" href="../featurecollection/#pyramids.featurecollection.FeatureCollection">FeatureCollection</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>GeoDataFrame: GeoDataFrame with POINT geometry.</li>
<li>DataFrame: DataFrame with x, y columns.</li>
</ul>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>np.ndarray:
Array with shape (N, 2) containing the row and column indices in the array.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create <code>Dataset</code> consisting of 2 bands, 10 rows, 10 columns, at the point lon/lat (0, 0).</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
- DataFrame with x, y columns:</p>
<ul>
<li>We can give the function a DataFrame with x, y columns to array the coordinates of the points that are located within the dataset domain.</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">points</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.025</span><span class="p">,</span> <span class="mf">0.175</span><span class="p">,</span> <span class="mf">0.375</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.025</span><span class="p">,</span> <span class="mf">0.225</span><span class="p">,</span> <span class="mf">0.125</span><span class="p">]})</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">indices</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">map_to_array_coordinates</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="p">[[</span><span class="mi">0</span> <span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a> <span class="p">[</span><span class="mi">0</span> <span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a> <span class="p">[</span><span class="mi">0</span> <span class="mi">7</span><span class="p">]]</span>
</code></pre></div>
- GeoDataFrame with POINT geometry:</p>
<ul>
<li>We can give the function a GeoDataFrame with POINT geometry to array the coordinates of the points that locate within the dataset domain.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">shapely.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Point</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="kn">import</span> <span class="n">GeoDataFrame</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">points</span> <span class="o">=</span> <span class="n">GeoDataFrame</span><span class="p">({</span><span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="mf">0.025</span><span class="p">,</span> <span class="mf">0.025</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mf">0.175</span><span class="p">,</span> <span class="mf">0.225</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mf">0.375</span><span class="p">,</span> <span class="mf">0.125</span><span class="p">)]})</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">indices</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">map_to_array_coordinates</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="p">[[</span><span class="mi">0</span> <span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a> <span class="p">[</span><span class="mi">0</span> <span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a> <span class="p">[</span><span class="mi">0</span> <span class="mi">7</span><span class="p">]]</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4665">4665</a></span>
<span class="normal"><a href="#__codelineno-0-4666">4666</a></span>
<span class="normal"><a href="#__codelineno-0-4667">4667</a></span>
<span class="normal"><a href="#__codelineno-0-4668">4668</a></span>
<span class="normal"><a href="#__codelineno-0-4669">4669</a></span>
<span class="normal"><a href="#__codelineno-0-4670">4670</a></span>
<span class="normal"><a href="#__codelineno-0-4671">4671</a></span>
<span class="normal"><a href="#__codelineno-0-4672">4672</a></span>
<span class="normal"><a href="#__codelineno-0-4673">4673</a></span>
<span class="normal"><a href="#__codelineno-0-4674">4674</a></span>
<span class="normal"><a href="#__codelineno-0-4675">4675</a></span>
<span class="normal"><a href="#__codelineno-0-4676">4676</a></span>
<span class="normal"><a href="#__codelineno-0-4677">4677</a></span>
<span class="normal"><a href="#__codelineno-0-4678">4678</a></span>
<span class="normal"><a href="#__codelineno-0-4679">4679</a></span>
<span class="normal"><a href="#__codelineno-0-4680">4680</a></span>
<span class="normal"><a href="#__codelineno-0-4681">4681</a></span>
<span class="normal"><a href="#__codelineno-0-4682">4682</a></span>
<span class="normal"><a href="#__codelineno-0-4683">4683</a></span>
<span class="normal"><a href="#__codelineno-0-4684">4684</a></span>
<span class="normal"><a href="#__codelineno-0-4685">4685</a></span>
<span class="normal"><a href="#__codelineno-0-4686">4686</a></span>
<span class="normal"><a href="#__codelineno-0-4687">4687</a></span>
<span class="normal"><a href="#__codelineno-0-4688">4688</a></span>
<span class="normal"><a href="#__codelineno-0-4689">4689</a></span>
<span class="normal"><a href="#__codelineno-0-4690">4690</a></span>
<span class="normal"><a href="#__codelineno-0-4691">4691</a></span>
<span class="normal"><a href="#__codelineno-0-4692">4692</a></span>
<span class="normal"><a href="#__codelineno-0-4693">4693</a></span>
<span class="normal"><a href="#__codelineno-0-4694">4694</a></span>
<span class="normal"><a href="#__codelineno-0-4695">4695</a></span>
<span class="normal"><a href="#__codelineno-0-4696">4696</a></span>
<span class="normal"><a href="#__codelineno-0-4697">4697</a></span>
<span class="normal"><a href="#__codelineno-0-4698">4698</a></span>
<span class="normal"><a href="#__codelineno-0-4699">4699</a></span>
<span class="normal"><a href="#__codelineno-0-4700">4700</a></span>
<span class="normal"><a href="#__codelineno-0-4701">4701</a></span>
<span class="normal"><a href="#__codelineno-0-4702">4702</a></span>
<span class="normal"><a href="#__codelineno-0-4703">4703</a></span>
<span class="normal"><a href="#__codelineno-0-4704">4704</a></span>
<span class="normal"><a href="#__codelineno-0-4705">4705</a></span>
<span class="normal"><a href="#__codelineno-0-4706">4706</a></span>
<span class="normal"><a href="#__codelineno-0-4707">4707</a></span>
<span class="normal"><a href="#__codelineno-0-4708">4708</a></span>
<span class="normal"><a href="#__codelineno-0-4709">4709</a></span>
<span class="normal"><a href="#__codelineno-0-4710">4710</a></span>
<span class="normal"><a href="#__codelineno-0-4711">4711</a></span>
<span class="normal"><a href="#__codelineno-0-4712">4712</a></span>
<span class="normal"><a href="#__codelineno-0-4713">4713</a></span>
<span class="normal"><a href="#__codelineno-0-4714">4714</a></span>
<span class="normal"><a href="#__codelineno-0-4715">4715</a></span>
<span class="normal"><a href="#__codelineno-0-4716">4716</a></span>
<span class="normal"><a href="#__codelineno-0-4717">4717</a></span>
<span class="normal"><a href="#__codelineno-0-4718">4718</a></span>
<span class="normal"><a href="#__codelineno-0-4719">4719</a></span>
<span class="normal"><a href="#__codelineno-0-4720">4720</a></span>
<span class="normal"><a href="#__codelineno-0-4721">4721</a></span>
<span class="normal"><a href="#__codelineno-0-4722">4722</a></span>
<span class="normal"><a href="#__codelineno-0-4723">4723</a></span>
<span class="normal"><a href="#__codelineno-0-4724">4724</a></span>
<span class="normal"><a href="#__codelineno-0-4725">4725</a></span>
<span class="normal"><a href="#__codelineno-0-4726">4726</a></span>
<span class="normal"><a href="#__codelineno-0-4727">4727</a></span>
<span class="normal"><a href="#__codelineno-0-4728">4728</a></span>
<span class="normal"><a href="#__codelineno-0-4729">4729</a></span>
<span class="normal"><a href="#__codelineno-0-4730">4730</a></span>
<span class="normal"><a href="#__codelineno-0-4731">4731</a></span>
<span class="normal"><a href="#__codelineno-0-4732">4732</a></span>
<span class="normal"><a href="#__codelineno-0-4733">4733</a></span>
<span class="normal"><a href="#__codelineno-0-4734">4734</a></span>
<span class="normal"><a href="#__codelineno-0-4735">4735</a></span>
<span class="normal"><a href="#__codelineno-0-4736">4736</a></span>
<span class="normal"><a href="#__codelineno-0-4737">4737</a></span>
<span class="normal"><a href="#__codelineno-0-4738">4738</a></span>
<span class="normal"><a href="#__codelineno-0-4739">4739</a></span>
<span class="normal"><a href="#__codelineno-0-4740">4740</a></span>
<span class="normal"><a href="#__codelineno-0-4741">4741</a></span>
<span class="normal"><a href="#__codelineno-0-4742">4742</a></span>
<span class="normal"><a href="#__codelineno-0-4743">4743</a></span>
<span class="normal"><a href="#__codelineno-0-4744">4744</a></span>
<span class="normal"><a href="#__codelineno-0-4745">4745</a></span>
<span class="normal"><a href="#__codelineno-0-4746">4746</a></span>
<span class="normal"><a href="#__codelineno-0-4747">4747</a></span>
<span class="normal"><a href="#__codelineno-0-4748">4748</a></span>
<span class="normal"><a href="#__codelineno-0-4749">4749</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4665" name="__codelineno-0-4665"></a><span class="k">def</span><span class="w"> </span><span class="nf">map_to_array_coordinates</span><span class="p">(</span>
<a id="__codelineno-0-4666" name="__codelineno-0-4666"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-4667" name="__codelineno-0-4667"></a>    <span class="n">points</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">GeoDataFrame</span><span class="p">,</span> <span class="n">FeatureCollection</span><span class="p">,</span> <span class="n">DataFrame</span><span class="p">],</span>
<a id="__codelineno-0-4668" name="__codelineno-0-4668"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-4669" name="__codelineno-0-4669"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert coordinates of points to array indices.</span>
<a id="__codelineno-0-4670" name="__codelineno-0-4670"></a>
<a id="__codelineno-0-4671" name="__codelineno-0-4671"></a><span class="sd">    - map_to_array_coordinates locates a point with real coordinates (x, y) or (lon, lat) on the array by finding</span>
<a id="__codelineno-0-4672" name="__codelineno-0-4672"></a><span class="sd">        the cell indices (row, column) of the nearest cell in the raster.</span>
<a id="__codelineno-0-4673" name="__codelineno-0-4673"></a><span class="sd">    - The point coordinate system of the raster has to be projected to be able to calculate the distance.</span>
<a id="__codelineno-0-4674" name="__codelineno-0-4674"></a>
<a id="__codelineno-0-4675" name="__codelineno-0-4675"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4676" name="__codelineno-0-4676"></a><span class="sd">        points (GeoDataFrame | pandas.DataFrame | FeatureCollection):</span>
<a id="__codelineno-0-4677" name="__codelineno-0-4677"></a><span class="sd">            - GeoDataFrame: GeoDataFrame with POINT geometry.</span>
<a id="__codelineno-0-4678" name="__codelineno-0-4678"></a><span class="sd">            - DataFrame: DataFrame with x, y columns.</span>
<a id="__codelineno-0-4679" name="__codelineno-0-4679"></a>
<a id="__codelineno-0-4680" name="__codelineno-0-4680"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-4681" name="__codelineno-0-4681"></a><span class="sd">        np.ndarray:</span>
<a id="__codelineno-0-4682" name="__codelineno-0-4682"></a><span class="sd">            Array with shape (N, 2) containing the row and column indices in the array.</span>
<a id="__codelineno-0-4683" name="__codelineno-0-4683"></a>
<a id="__codelineno-0-4684" name="__codelineno-0-4684"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-4685" name="__codelineno-0-4685"></a><span class="sd">        - Create `Dataset` consisting of 2 bands, 10 rows, 10 columns, at the point lon/lat (0, 0).</span>
<a id="__codelineno-0-4686" name="__codelineno-0-4686"></a>
<a id="__codelineno-0-4687" name="__codelineno-0-4687"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-4688" name="__codelineno-0-4688"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-4689" name="__codelineno-0-4689"></a><span class="sd">          &gt;&gt;&gt; import pandas as pd</span>
<a id="__codelineno-0-4690" name="__codelineno-0-4690"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.randint(1, 3, size=(2, 10, 10))</span>
<a id="__codelineno-0-4691" name="__codelineno-0-4691"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-4692" name="__codelineno-0-4692"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-4693" name="__codelineno-0-4693"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-4694" name="__codelineno-0-4694"></a>
<a id="__codelineno-0-4695" name="__codelineno-0-4695"></a><span class="sd">          ```</span>
<a id="__codelineno-0-4696" name="__codelineno-0-4696"></a><span class="sd">        - DataFrame with x, y columns:</span>
<a id="__codelineno-0-4697" name="__codelineno-0-4697"></a>
<a id="__codelineno-0-4698" name="__codelineno-0-4698"></a><span class="sd">          - We can give the function a DataFrame with x, y columns to array the coordinates of the points that are located within the dataset domain.</span>
<a id="__codelineno-0-4699" name="__codelineno-0-4699"></a>
<a id="__codelineno-0-4700" name="__codelineno-0-4700"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-4701" name="__codelineno-0-4701"></a><span class="sd">          &gt;&gt;&gt; points = pd.DataFrame({&quot;x&quot;: [0.025, 0.175, 0.375], &quot;y&quot;: [0.025, 0.225, 0.125]})</span>
<a id="__codelineno-0-4702" name="__codelineno-0-4702"></a><span class="sd">          &gt;&gt;&gt; indices = dataset.map_to_array_coordinates(points)</span>
<a id="__codelineno-0-4703" name="__codelineno-0-4703"></a><span class="sd">          &gt;&gt;&gt; print(indices)</span>
<a id="__codelineno-0-4704" name="__codelineno-0-4704"></a><span class="sd">          [[0 0]</span>
<a id="__codelineno-0-4705" name="__codelineno-0-4705"></a><span class="sd">           [0 3]</span>
<a id="__codelineno-0-4706" name="__codelineno-0-4706"></a><span class="sd">           [0 7]]</span>
<a id="__codelineno-0-4707" name="__codelineno-0-4707"></a>
<a id="__codelineno-0-4708" name="__codelineno-0-4708"></a><span class="sd">          ```</span>
<a id="__codelineno-0-4709" name="__codelineno-0-4709"></a><span class="sd">        - GeoDataFrame with POINT geometry:</span>
<a id="__codelineno-0-4710" name="__codelineno-0-4710"></a>
<a id="__codelineno-0-4711" name="__codelineno-0-4711"></a><span class="sd">          - We can give the function a GeoDataFrame with POINT geometry to array the coordinates of the points that locate within the dataset domain.</span>
<a id="__codelineno-0-4712" name="__codelineno-0-4712"></a>
<a id="__codelineno-0-4713" name="__codelineno-0-4713"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-4714" name="__codelineno-0-4714"></a><span class="sd">          &gt;&gt;&gt; from shapely.geometry import Point</span>
<a id="__codelineno-0-4715" name="__codelineno-0-4715"></a><span class="sd">          &gt;&gt;&gt; from geopandas import GeoDataFrame</span>
<a id="__codelineno-0-4716" name="__codelineno-0-4716"></a><span class="sd">          &gt;&gt;&gt; points = GeoDataFrame({&quot;geometry&quot;: [Point(0.025, 0.025), Point(0.175, 0.225), Point(0.375, 0.125)]})</span>
<a id="__codelineno-0-4717" name="__codelineno-0-4717"></a><span class="sd">          &gt;&gt;&gt; indices = dataset.map_to_array_coordinates(points)</span>
<a id="__codelineno-0-4718" name="__codelineno-0-4718"></a><span class="sd">          &gt;&gt;&gt; print(indices)</span>
<a id="__codelineno-0-4719" name="__codelineno-0-4719"></a><span class="sd">          [[0 0]</span>
<a id="__codelineno-0-4720" name="__codelineno-0-4720"></a><span class="sd">           [0 3]</span>
<a id="__codelineno-0-4721" name="__codelineno-0-4721"></a><span class="sd">           [0 7]]</span>
<a id="__codelineno-0-4722" name="__codelineno-0-4722"></a>
<a id="__codelineno-0-4723" name="__codelineno-0-4723"></a><span class="sd">          ```</span>
<a id="__codelineno-0-4724" name="__codelineno-0-4724"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4725" name="__codelineno-0-4725"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">GeoDataFrame</span><span class="p">):</span>
<a id="__codelineno-0-4726" name="__codelineno-0-4726"></a>        <span class="n">points</span> <span class="o">=</span> <span class="n">FeatureCollection</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
<a id="__codelineno-0-4727" name="__codelineno-0-4727"></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">DataFrame</span><span class="p">):</span>
<a id="__codelineno-0-4728" name="__codelineno-0-4728"></a>        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">elem</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">points</span><span class="o">.</span><span class="n">columns</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">]):</span>
<a id="__codelineno-0-4729" name="__codelineno-0-4729"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-4730" name="__codelineno-0-4730"></a>                <span class="s2">&quot;If the input is a DataFrame, it should have two columns x, and y&quot;</span>
<a id="__codelineno-0-4731" name="__codelineno-0-4731"></a>            <span class="p">)</span>
<a id="__codelineno-0-4732" name="__codelineno-0-4732"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4733" name="__codelineno-0-4733"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">FeatureCollection</span><span class="p">):</span>
<a id="__codelineno-0-4734" name="__codelineno-0-4734"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<a id="__codelineno-0-4735" name="__codelineno-0-4735"></a>                <span class="s2">&quot;please check points input it should be GeoDataFrame/DataFrame/FeatureCollection - given&quot;</span>
<a id="__codelineno-0-4736" name="__codelineno-0-4736"></a>                <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">points</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-4737" name="__codelineno-0-4737"></a>            <span class="p">)</span>
<a id="__codelineno-0-4738" name="__codelineno-0-4738"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">DataFrame</span><span class="p">):</span>
<a id="__codelineno-0-4739" name="__codelineno-0-4739"></a>        <span class="c1"># get the x, y coordinates.</span>
<a id="__codelineno-0-4740" name="__codelineno-0-4740"></a>        <span class="n">points</span><span class="o">.</span><span class="n">xy</span><span class="p">()</span>
<a id="__codelineno-0-4741" name="__codelineno-0-4741"></a>        <span class="n">points</span> <span class="o">=</span> <span class="n">points</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>
<a id="__codelineno-0-4742" name="__codelineno-0-4742"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4743" name="__codelineno-0-4743"></a>        <span class="n">points</span> <span class="o">=</span> <span class="n">points</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>
<a id="__codelineno-0-4744" name="__codelineno-0-4744"></a>
<a id="__codelineno-0-4745" name="__codelineno-0-4745"></a>    <span class="c1"># since the first row is x-coords so the first column in the indices is the column index</span>
<a id="__codelineno-0-4746" name="__codelineno-0-4746"></a>    <span class="n">indices</span> <span class="o">=</span> <span class="n">locate_values</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<a id="__codelineno-0-4747" name="__codelineno-0-4747"></a>    <span class="c1"># rearrange the columns to make the row index first</span>
<a id="__codelineno-0-4748" name="__codelineno-0-4748"></a>    <span class="n">indices</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
<a id="__codelineno-0-4749" name="__codelineno-0-4749"></a>    <span class="k">return</span> <span class="n">indices</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.array_to_map_coordinates" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.array_to_map_coordinates" class="toclink">
            <code class="highlight language-python"><span class="n">array_to_map_coordinates</span><span class="p">(</span><span class="n">rows_index</span><span class="p">,</span> <span class="n">column_index</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.array_to_map_coordinates" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Convert array indices to map coordinates.</p>
<p>array_to_map_coordinates converts the array indices (rows, cols) to real coordinates (x, y) or (lon, lat).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>rows_index</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="numbers.Number">Number</span>] | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The row indices of the cells in the raster array.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>column_index</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="numbers.Number">Number</span>] | <span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The column indices of the cells in the raster array.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>center</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, the coordinates will be the center of the cell. Default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="typing.List">List</span>[<span title="numbers.Number">Number</span>], <span title="typing.List">List</span>[<span title="numbers.Number">Number</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tuple[List[Number], List[Number]]:
A tuple of two lists: the x coordinates and the y coordinates of the cells.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create <code>Dataset</code> consisting of 1 band, 10 rows, 10 columns, at the point lon/lat (0, 0):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>Now call the function with two lists of row and column indices:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">rows_index</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">column_index</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">coords</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">array_to_map_coordinates</span><span class="p">(</span><span class="n">rows_index</span><span class="p">,</span> <span class="n">column_index</span><span class="p">)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.25</span><span class="p">])</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4751">4751</a></span>
<span class="normal"><a href="#__codelineno-0-4752">4752</a></span>
<span class="normal"><a href="#__codelineno-0-4753">4753</a></span>
<span class="normal"><a href="#__codelineno-0-4754">4754</a></span>
<span class="normal"><a href="#__codelineno-0-4755">4755</a></span>
<span class="normal"><a href="#__codelineno-0-4756">4756</a></span>
<span class="normal"><a href="#__codelineno-0-4757">4757</a></span>
<span class="normal"><a href="#__codelineno-0-4758">4758</a></span>
<span class="normal"><a href="#__codelineno-0-4759">4759</a></span>
<span class="normal"><a href="#__codelineno-0-4760">4760</a></span>
<span class="normal"><a href="#__codelineno-0-4761">4761</a></span>
<span class="normal"><a href="#__codelineno-0-4762">4762</a></span>
<span class="normal"><a href="#__codelineno-0-4763">4763</a></span>
<span class="normal"><a href="#__codelineno-0-4764">4764</a></span>
<span class="normal"><a href="#__codelineno-0-4765">4765</a></span>
<span class="normal"><a href="#__codelineno-0-4766">4766</a></span>
<span class="normal"><a href="#__codelineno-0-4767">4767</a></span>
<span class="normal"><a href="#__codelineno-0-4768">4768</a></span>
<span class="normal"><a href="#__codelineno-0-4769">4769</a></span>
<span class="normal"><a href="#__codelineno-0-4770">4770</a></span>
<span class="normal"><a href="#__codelineno-0-4771">4771</a></span>
<span class="normal"><a href="#__codelineno-0-4772">4772</a></span>
<span class="normal"><a href="#__codelineno-0-4773">4773</a></span>
<span class="normal"><a href="#__codelineno-0-4774">4774</a></span>
<span class="normal"><a href="#__codelineno-0-4775">4775</a></span>
<span class="normal"><a href="#__codelineno-0-4776">4776</a></span>
<span class="normal"><a href="#__codelineno-0-4777">4777</a></span>
<span class="normal"><a href="#__codelineno-0-4778">4778</a></span>
<span class="normal"><a href="#__codelineno-0-4779">4779</a></span>
<span class="normal"><a href="#__codelineno-0-4780">4780</a></span>
<span class="normal"><a href="#__codelineno-0-4781">4781</a></span>
<span class="normal"><a href="#__codelineno-0-4782">4782</a></span>
<span class="normal"><a href="#__codelineno-0-4783">4783</a></span>
<span class="normal"><a href="#__codelineno-0-4784">4784</a></span>
<span class="normal"><a href="#__codelineno-0-4785">4785</a></span>
<span class="normal"><a href="#__codelineno-0-4786">4786</a></span>
<span class="normal"><a href="#__codelineno-0-4787">4787</a></span>
<span class="normal"><a href="#__codelineno-0-4788">4788</a></span>
<span class="normal"><a href="#__codelineno-0-4789">4789</a></span>
<span class="normal"><a href="#__codelineno-0-4790">4790</a></span>
<span class="normal"><a href="#__codelineno-0-4791">4791</a></span>
<span class="normal"><a href="#__codelineno-0-4792">4792</a></span>
<span class="normal"><a href="#__codelineno-0-4793">4793</a></span>
<span class="normal"><a href="#__codelineno-0-4794">4794</a></span>
<span class="normal"><a href="#__codelineno-0-4795">4795</a></span>
<span class="normal"><a href="#__codelineno-0-4796">4796</a></span>
<span class="normal"><a href="#__codelineno-0-4797">4797</a></span>
<span class="normal"><a href="#__codelineno-0-4798">4798</a></span>
<span class="normal"><a href="#__codelineno-0-4799">4799</a></span>
<span class="normal"><a href="#__codelineno-0-4800">4800</a></span>
<span class="normal"><a href="#__codelineno-0-4801">4801</a></span>
<span class="normal"><a href="#__codelineno-0-4802">4802</a></span>
<span class="normal"><a href="#__codelineno-0-4803">4803</a></span>
<span class="normal"><a href="#__codelineno-0-4804">4804</a></span>
<span class="normal"><a href="#__codelineno-0-4805">4805</a></span>
<span class="normal"><a href="#__codelineno-0-4806">4806</a></span>
<span class="normal"><a href="#__codelineno-0-4807">4807</a></span>
<span class="normal"><a href="#__codelineno-0-4808">4808</a></span>
<span class="normal"><a href="#__codelineno-0-4809">4809</a></span>
<span class="normal"><a href="#__codelineno-0-4810">4810</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4751" name="__codelineno-0-4751"></a><span class="k">def</span><span class="w"> </span><span class="nf">array_to_map_coordinates</span><span class="p">(</span>
<a id="__codelineno-0-4752" name="__codelineno-0-4752"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-4753" name="__codelineno-0-4753"></a>    <span class="n">rows_index</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Number</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">],</span>
<a id="__codelineno-0-4754" name="__codelineno-0-4754"></a>    <span class="n">column_index</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Number</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">],</span>
<a id="__codelineno-0-4755" name="__codelineno-0-4755"></a>    <span class="n">center</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-4756" name="__codelineno-0-4756"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Number</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Number</span><span class="p">]]:</span>
<a id="__codelineno-0-4757" name="__codelineno-0-4757"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert array indices to map coordinates.</span>
<a id="__codelineno-0-4758" name="__codelineno-0-4758"></a>
<a id="__codelineno-0-4759" name="__codelineno-0-4759"></a><span class="sd">    array_to_map_coordinates converts the array indices (rows, cols) to real coordinates (x, y) or (lon, lat).</span>
<a id="__codelineno-0-4760" name="__codelineno-0-4760"></a>
<a id="__codelineno-0-4761" name="__codelineno-0-4761"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4762" name="__codelineno-0-4762"></a><span class="sd">        rows_index (List[Number] | np.ndarray):</span>
<a id="__codelineno-0-4763" name="__codelineno-0-4763"></a><span class="sd">            The row indices of the cells in the raster array.</span>
<a id="__codelineno-0-4764" name="__codelineno-0-4764"></a><span class="sd">        column_index (List[Number] | np.ndarray):</span>
<a id="__codelineno-0-4765" name="__codelineno-0-4765"></a><span class="sd">            The column indices of the cells in the raster array.</span>
<a id="__codelineno-0-4766" name="__codelineno-0-4766"></a><span class="sd">        center (bool):</span>
<a id="__codelineno-0-4767" name="__codelineno-0-4767"></a><span class="sd">            If True, the coordinates will be the center of the cell. Default is False.</span>
<a id="__codelineno-0-4768" name="__codelineno-0-4768"></a>
<a id="__codelineno-0-4769" name="__codelineno-0-4769"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-4770" name="__codelineno-0-4770"></a><span class="sd">        Tuple[List[Number], List[Number]]:</span>
<a id="__codelineno-0-4771" name="__codelineno-0-4771"></a><span class="sd">            A tuple of two lists: the x coordinates and the y coordinates of the cells.</span>
<a id="__codelineno-0-4772" name="__codelineno-0-4772"></a>
<a id="__codelineno-0-4773" name="__codelineno-0-4773"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-4774" name="__codelineno-0-4774"></a><span class="sd">        - Create `Dataset` consisting of 1 band, 10 rows, 10 columns, at the point lon/lat (0, 0):</span>
<a id="__codelineno-0-4775" name="__codelineno-0-4775"></a>
<a id="__codelineno-0-4776" name="__codelineno-0-4776"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-4777" name="__codelineno-0-4777"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-4778" name="__codelineno-0-4778"></a><span class="sd">          &gt;&gt;&gt; import pandas as pd</span>
<a id="__codelineno-0-4779" name="__codelineno-0-4779"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.randint(1, 3, size=(10, 10))</span>
<a id="__codelineno-0-4780" name="__codelineno-0-4780"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-4781" name="__codelineno-0-4781"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-4782" name="__codelineno-0-4782"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-4783" name="__codelineno-0-4783"></a>
<a id="__codelineno-0-4784" name="__codelineno-0-4784"></a><span class="sd">          ```</span>
<a id="__codelineno-0-4785" name="__codelineno-0-4785"></a>
<a id="__codelineno-0-4786" name="__codelineno-0-4786"></a><span class="sd">        - Now call the function with two lists of row and column indices:</span>
<a id="__codelineno-0-4787" name="__codelineno-0-4787"></a>
<a id="__codelineno-0-4788" name="__codelineno-0-4788"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-4789" name="__codelineno-0-4789"></a><span class="sd">          &gt;&gt;&gt; rows_index = [1, 3, 5]</span>
<a id="__codelineno-0-4790" name="__codelineno-0-4790"></a><span class="sd">          &gt;&gt;&gt; column_index = [2, 4, 6]</span>
<a id="__codelineno-0-4791" name="__codelineno-0-4791"></a><span class="sd">          &gt;&gt;&gt; coords = dataset.array_to_map_coordinates(rows_index, column_index)</span>
<a id="__codelineno-0-4792" name="__codelineno-0-4792"></a><span class="sd">          &gt;&gt;&gt; print(coords) # doctest: +SKIP</span>
<a id="__codelineno-0-4793" name="__codelineno-0-4793"></a><span class="sd">          ([0.1, 0.2, 0.3], [-0.05, -0.15, -0.25])</span>
<a id="__codelineno-0-4794" name="__codelineno-0-4794"></a>
<a id="__codelineno-0-4795" name="__codelineno-0-4795"></a><span class="sd">          ```</span>
<a id="__codelineno-0-4796" name="__codelineno-0-4796"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4797" name="__codelineno-0-4797"></a>    <span class="n">top_left_x</span><span class="p">,</span> <span class="n">top_left_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">top_left_corner</span>
<a id="__codelineno-0-4798" name="__codelineno-0-4798"></a>    <span class="n">cell_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_size</span>
<a id="__codelineno-0-4799" name="__codelineno-0-4799"></a>    <span class="k">if</span> <span class="n">center</span><span class="p">:</span>
<a id="__codelineno-0-4800" name="__codelineno-0-4800"></a>        <span class="c1"># for the top left corner of the cell</span>
<a id="__codelineno-0-4801" name="__codelineno-0-4801"></a>        <span class="n">top_left_x</span> <span class="o">+=</span> <span class="n">cell_size</span> <span class="o">/</span> <span class="mi">2</span>
<a id="__codelineno-0-4802" name="__codelineno-0-4802"></a>        <span class="n">top_left_y</span> <span class="o">-=</span> <span class="n">cell_size</span> <span class="o">/</span> <span class="mi">2</span>
<a id="__codelineno-0-4803" name="__codelineno-0-4803"></a>
<a id="__codelineno-0-4804" name="__codelineno-0-4804"></a>    <span class="n">x_coord_fn</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">top_left_x</span> <span class="o">+</span> <span class="n">x</span> <span class="o">*</span> <span class="n">cell_size</span>
<a id="__codelineno-0-4805" name="__codelineno-0-4805"></a>    <span class="n">y_coord_fn</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="n">top_left_y</span> <span class="o">-</span> <span class="n">y</span> <span class="o">*</span> <span class="n">cell_size</span>
<a id="__codelineno-0-4806" name="__codelineno-0-4806"></a>
<a id="__codelineno-0-4807" name="__codelineno-0-4807"></a>    <span class="n">x_coords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">x_coord_fn</span><span class="p">,</span> <span class="n">column_index</span><span class="p">))</span>
<a id="__codelineno-0-4808" name="__codelineno-0-4808"></a>    <span class="n">y_coords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">y_coord_fn</span><span class="p">,</span> <span class="n">rows_index</span><span class="p">))</span>
<a id="__codelineno-0-4809" name="__codelineno-0-4809"></a>
<a id="__codelineno-0-4810" name="__codelineno-0-4810"></a>    <span class="k">return</span> <span class="n">x_coords</span><span class="p">,</span> <span class="n">y_coords</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.extract" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.extract" class="toclink">
            <code class="highlight language-python"><span class="n">extract</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exclude_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">feature</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.extract" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Extract.</p>
<ul>
<li>Extract method gets all the values in a raster, and excludes the values in the exclude_value parameter.</li>
<li>If the feature parameter is given, the raster will be clipped to the extent of the given feature and the
  values within the feature are extracted.</li>
</ul>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>band</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Band index. Default is None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exclude_value</code>
            </td>
            <td>
                  <code><span title="Numeric">Numeric</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Values to exclude from extracted values. If the dataset is multi-band, the values in <code>exclude_value</code>
will be filtered out from the first band only.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>feature</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;pyramids.featurecollection.FeatureCollection&lt;/code&gt;" href="../featurecollection/#pyramids.featurecollection.FeatureCollection">FeatureCollection</a> | <span title="geopandas.geodataframe.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Vector data containing point geometries at which to extract the values. Default is None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>np.ndarray:
The extracted values from each band in the dataset will be in one row in the returned array.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>
<p>Extract all values from the dataset:</p>
</li>
<li>
<p>First, create a dataset with 2 bands, 4 rows and 4 columns:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">0.05</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">4</span> <span class="o">*</span> <span class="mi">4</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">4326</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">2</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_2&#39;</span><span class="p">]</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">9999.0</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">int32</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>            <span class="n">File</span><span class="p">:</span><span class="o">...</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">read_array</span><span class="p">())</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="p">[[[</span><span class="mi">1</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>  <span class="p">[</span><span class="mi">1</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mi">4</span><span class="p">]</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>  <span class="p">[</span><span class="mi">2</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>  <span class="p">[</span><span class="mi">1</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]]</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a> <span class="p">[[</span><span class="mi">3</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>  <span class="p">[</span><span class="mi">4</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">]</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>  <span class="p">[</span><span class="mi">2</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>  <span class="p">[</span><span class="mi">1</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">4</span><span class="p">]]]</span>
</code></pre></div>
</li>
<li>
<p>Now, extract the values in the dataset:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">values</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="p">[[</span><span class="mi">1</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a> <span class="p">[</span><span class="mi">3</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">4</span><span class="p">]]</span>
</code></pre></div>
</li>
<li>
<p>Extract all the values except 2:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">values</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">exclude_value</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
</code></pre></div>
</li>
<li>
<p>Extract values at the location of the given point geometries:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">shapely.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Point</span>
</code></pre></div>
<ul>
<li>
<p>Create the points using shapely and GeoPandas to cover the 4 cells with xmin, ymin, xmax, ymax = [0.1, -0.2, 0.2, -0.1]:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">points</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">geometry</span><span class="o">=</span><span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">)],</span><span class="n">crs</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">values</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">feature</span><span class="o">=</span><span class="n">points</span><span class="p">)</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="p">[[</span><span class="mi">4</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a> <span class="p">[</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">4</span> <span class="mi">2</span><span class="p">]]</span>
</code></pre></div>
</li>
</ul>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4812">4812</a></span>
<span class="normal"><a href="#__codelineno-0-4813">4813</a></span>
<span class="normal"><a href="#__codelineno-0-4814">4814</a></span>
<span class="normal"><a href="#__codelineno-0-4815">4815</a></span>
<span class="normal"><a href="#__codelineno-0-4816">4816</a></span>
<span class="normal"><a href="#__codelineno-0-4817">4817</a></span>
<span class="normal"><a href="#__codelineno-0-4818">4818</a></span>
<span class="normal"><a href="#__codelineno-0-4819">4819</a></span>
<span class="normal"><a href="#__codelineno-0-4820">4820</a></span>
<span class="normal"><a href="#__codelineno-0-4821">4821</a></span>
<span class="normal"><a href="#__codelineno-0-4822">4822</a></span>
<span class="normal"><a href="#__codelineno-0-4823">4823</a></span>
<span class="normal"><a href="#__codelineno-0-4824">4824</a></span>
<span class="normal"><a href="#__codelineno-0-4825">4825</a></span>
<span class="normal"><a href="#__codelineno-0-4826">4826</a></span>
<span class="normal"><a href="#__codelineno-0-4827">4827</a></span>
<span class="normal"><a href="#__codelineno-0-4828">4828</a></span>
<span class="normal"><a href="#__codelineno-0-4829">4829</a></span>
<span class="normal"><a href="#__codelineno-0-4830">4830</a></span>
<span class="normal"><a href="#__codelineno-0-4831">4831</a></span>
<span class="normal"><a href="#__codelineno-0-4832">4832</a></span>
<span class="normal"><a href="#__codelineno-0-4833">4833</a></span>
<span class="normal"><a href="#__codelineno-0-4834">4834</a></span>
<span class="normal"><a href="#__codelineno-0-4835">4835</a></span>
<span class="normal"><a href="#__codelineno-0-4836">4836</a></span>
<span class="normal"><a href="#__codelineno-0-4837">4837</a></span>
<span class="normal"><a href="#__codelineno-0-4838">4838</a></span>
<span class="normal"><a href="#__codelineno-0-4839">4839</a></span>
<span class="normal"><a href="#__codelineno-0-4840">4840</a></span>
<span class="normal"><a href="#__codelineno-0-4841">4841</a></span>
<span class="normal"><a href="#__codelineno-0-4842">4842</a></span>
<span class="normal"><a href="#__codelineno-0-4843">4843</a></span>
<span class="normal"><a href="#__codelineno-0-4844">4844</a></span>
<span class="normal"><a href="#__codelineno-0-4845">4845</a></span>
<span class="normal"><a href="#__codelineno-0-4846">4846</a></span>
<span class="normal"><a href="#__codelineno-0-4847">4847</a></span>
<span class="normal"><a href="#__codelineno-0-4848">4848</a></span>
<span class="normal"><a href="#__codelineno-0-4849">4849</a></span>
<span class="normal"><a href="#__codelineno-0-4850">4850</a></span>
<span class="normal"><a href="#__codelineno-0-4851">4851</a></span>
<span class="normal"><a href="#__codelineno-0-4852">4852</a></span>
<span class="normal"><a href="#__codelineno-0-4853">4853</a></span>
<span class="normal"><a href="#__codelineno-0-4854">4854</a></span>
<span class="normal"><a href="#__codelineno-0-4855">4855</a></span>
<span class="normal"><a href="#__codelineno-0-4856">4856</a></span>
<span class="normal"><a href="#__codelineno-0-4857">4857</a></span>
<span class="normal"><a href="#__codelineno-0-4858">4858</a></span>
<span class="normal"><a href="#__codelineno-0-4859">4859</a></span>
<span class="normal"><a href="#__codelineno-0-4860">4860</a></span>
<span class="normal"><a href="#__codelineno-0-4861">4861</a></span>
<span class="normal"><a href="#__codelineno-0-4862">4862</a></span>
<span class="normal"><a href="#__codelineno-0-4863">4863</a></span>
<span class="normal"><a href="#__codelineno-0-4864">4864</a></span>
<span class="normal"><a href="#__codelineno-0-4865">4865</a></span>
<span class="normal"><a href="#__codelineno-0-4866">4866</a></span>
<span class="normal"><a href="#__codelineno-0-4867">4867</a></span>
<span class="normal"><a href="#__codelineno-0-4868">4868</a></span>
<span class="normal"><a href="#__codelineno-0-4869">4869</a></span>
<span class="normal"><a href="#__codelineno-0-4870">4870</a></span>
<span class="normal"><a href="#__codelineno-0-4871">4871</a></span>
<span class="normal"><a href="#__codelineno-0-4872">4872</a></span>
<span class="normal"><a href="#__codelineno-0-4873">4873</a></span>
<span class="normal"><a href="#__codelineno-0-4874">4874</a></span>
<span class="normal"><a href="#__codelineno-0-4875">4875</a></span>
<span class="normal"><a href="#__codelineno-0-4876">4876</a></span>
<span class="normal"><a href="#__codelineno-0-4877">4877</a></span>
<span class="normal"><a href="#__codelineno-0-4878">4878</a></span>
<span class="normal"><a href="#__codelineno-0-4879">4879</a></span>
<span class="normal"><a href="#__codelineno-0-4880">4880</a></span>
<span class="normal"><a href="#__codelineno-0-4881">4881</a></span>
<span class="normal"><a href="#__codelineno-0-4882">4882</a></span>
<span class="normal"><a href="#__codelineno-0-4883">4883</a></span>
<span class="normal"><a href="#__codelineno-0-4884">4884</a></span>
<span class="normal"><a href="#__codelineno-0-4885">4885</a></span>
<span class="normal"><a href="#__codelineno-0-4886">4886</a></span>
<span class="normal"><a href="#__codelineno-0-4887">4887</a></span>
<span class="normal"><a href="#__codelineno-0-4888">4888</a></span>
<span class="normal"><a href="#__codelineno-0-4889">4889</a></span>
<span class="normal"><a href="#__codelineno-0-4890">4890</a></span>
<span class="normal"><a href="#__codelineno-0-4891">4891</a></span>
<span class="normal"><a href="#__codelineno-0-4892">4892</a></span>
<span class="normal"><a href="#__codelineno-0-4893">4893</a></span>
<span class="normal"><a href="#__codelineno-0-4894">4894</a></span>
<span class="normal"><a href="#__codelineno-0-4895">4895</a></span>
<span class="normal"><a href="#__codelineno-0-4896">4896</a></span>
<span class="normal"><a href="#__codelineno-0-4897">4897</a></span>
<span class="normal"><a href="#__codelineno-0-4898">4898</a></span>
<span class="normal"><a href="#__codelineno-0-4899">4899</a></span>
<span class="normal"><a href="#__codelineno-0-4900">4900</a></span>
<span class="normal"><a href="#__codelineno-0-4901">4901</a></span>
<span class="normal"><a href="#__codelineno-0-4902">4902</a></span>
<span class="normal"><a href="#__codelineno-0-4903">4903</a></span>
<span class="normal"><a href="#__codelineno-0-4904">4904</a></span>
<span class="normal"><a href="#__codelineno-0-4905">4905</a></span>
<span class="normal"><a href="#__codelineno-0-4906">4906</a></span>
<span class="normal"><a href="#__codelineno-0-4907">4907</a></span>
<span class="normal"><a href="#__codelineno-0-4908">4908</a></span>
<span class="normal"><a href="#__codelineno-0-4909">4909</a></span>
<span class="normal"><a href="#__codelineno-0-4910">4910</a></span>
<span class="normal"><a href="#__codelineno-0-4911">4911</a></span>
<span class="normal"><a href="#__codelineno-0-4912">4912</a></span>
<span class="normal"><a href="#__codelineno-0-4913">4913</a></span>
<span class="normal"><a href="#__codelineno-0-4914">4914</a></span>
<span class="normal"><a href="#__codelineno-0-4915">4915</a></span>
<span class="normal"><a href="#__codelineno-0-4916">4916</a></span>
<span class="normal"><a href="#__codelineno-0-4917">4917</a></span>
<span class="normal"><a href="#__codelineno-0-4918">4918</a></span>
<span class="normal"><a href="#__codelineno-0-4919">4919</a></span>
<span class="normal"><a href="#__codelineno-0-4920">4920</a></span>
<span class="normal"><a href="#__codelineno-0-4921">4921</a></span>
<span class="normal"><a href="#__codelineno-0-4922">4922</a></span>
<span class="normal"><a href="#__codelineno-0-4923">4923</a></span>
<span class="normal"><a href="#__codelineno-0-4924">4924</a></span>
<span class="normal"><a href="#__codelineno-0-4925">4925</a></span>
<span class="normal"><a href="#__codelineno-0-4926">4926</a></span>
<span class="normal"><a href="#__codelineno-0-4927">4927</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4812" name="__codelineno-0-4812"></a><span class="k">def</span><span class="w"> </span><span class="nf">extract</span><span class="p">(</span>
<a id="__codelineno-0-4813" name="__codelineno-0-4813"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-4814" name="__codelineno-0-4814"></a>    <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-4815" name="__codelineno-0-4815"></a>    <span class="n">exclude_value</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-4816" name="__codelineno-0-4816"></a>    <span class="n">feature</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">FeatureCollection</span><span class="p">,</span> <span class="n">GeoDataFrame</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-4817" name="__codelineno-0-4817"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-4818" name="__codelineno-0-4818"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract.</span>
<a id="__codelineno-0-4819" name="__codelineno-0-4819"></a>
<a id="__codelineno-0-4820" name="__codelineno-0-4820"></a><span class="sd">    - Extract method gets all the values in a raster, and excludes the values in the exclude_value parameter.</span>
<a id="__codelineno-0-4821" name="__codelineno-0-4821"></a><span class="sd">    - If the feature parameter is given, the raster will be clipped to the extent of the given feature and the</span>
<a id="__codelineno-0-4822" name="__codelineno-0-4822"></a><span class="sd">      values within the feature are extracted.</span>
<a id="__codelineno-0-4823" name="__codelineno-0-4823"></a>
<a id="__codelineno-0-4824" name="__codelineno-0-4824"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4825" name="__codelineno-0-4825"></a><span class="sd">        band (int, optional):</span>
<a id="__codelineno-0-4826" name="__codelineno-0-4826"></a><span class="sd">            Band index. Default is None.</span>
<a id="__codelineno-0-4827" name="__codelineno-0-4827"></a><span class="sd">        exclude_value (Numeric, optional):</span>
<a id="__codelineno-0-4828" name="__codelineno-0-4828"></a><span class="sd">            Values to exclude from extracted values. If the dataset is multi-band, the values in `exclude_value`</span>
<a id="__codelineno-0-4829" name="__codelineno-0-4829"></a><span class="sd">            will be filtered out from the first band only.</span>
<a id="__codelineno-0-4830" name="__codelineno-0-4830"></a><span class="sd">        feature (FeatureCollection | GeoDataFrame, optional):</span>
<a id="__codelineno-0-4831" name="__codelineno-0-4831"></a><span class="sd">            Vector data containing point geometries at which to extract the values. Default is None.</span>
<a id="__codelineno-0-4832" name="__codelineno-0-4832"></a>
<a id="__codelineno-0-4833" name="__codelineno-0-4833"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-4834" name="__codelineno-0-4834"></a><span class="sd">        np.ndarray:</span>
<a id="__codelineno-0-4835" name="__codelineno-0-4835"></a><span class="sd">            The extracted values from each band in the dataset will be in one row in the returned array.</span>
<a id="__codelineno-0-4836" name="__codelineno-0-4836"></a>
<a id="__codelineno-0-4837" name="__codelineno-0-4837"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-4838" name="__codelineno-0-4838"></a><span class="sd">        - Extract all values from the dataset:</span>
<a id="__codelineno-0-4839" name="__codelineno-0-4839"></a>
<a id="__codelineno-0-4840" name="__codelineno-0-4840"></a><span class="sd">          - First, create a dataset with 2 bands, 4 rows and 4 columns:</span>
<a id="__codelineno-0-4841" name="__codelineno-0-4841"></a>
<a id="__codelineno-0-4842" name="__codelineno-0-4842"></a><span class="sd">            ```python</span>
<a id="__codelineno-0-4843" name="__codelineno-0-4843"></a><span class="sd">            &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-4844" name="__codelineno-0-4844"></a><span class="sd">            &gt;&gt;&gt; arr = np.random.randint(1, 5, size=(2, 4, 4))</span>
<a id="__codelineno-0-4845" name="__codelineno-0-4845"></a><span class="sd">            &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-4846" name="__codelineno-0-4846"></a><span class="sd">            &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-4847" name="__codelineno-0-4847"></a><span class="sd">            &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-4848" name="__codelineno-0-4848"></a><span class="sd">            &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-4849" name="__codelineno-0-4849"></a><span class="sd">            &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-4850" name="__codelineno-0-4850"></a><span class="sd">                        Cell size: 0.05</span>
<a id="__codelineno-0-4851" name="__codelineno-0-4851"></a><span class="sd">                        Dimension: 4 * 4</span>
<a id="__codelineno-0-4852" name="__codelineno-0-4852"></a><span class="sd">                        EPSG: 4326</span>
<a id="__codelineno-0-4853" name="__codelineno-0-4853"></a><span class="sd">                        Number of Bands: 2</span>
<a id="__codelineno-0-4854" name="__codelineno-0-4854"></a><span class="sd">                        Band names: [&#39;Band_1&#39;, &#39;Band_2&#39;]</span>
<a id="__codelineno-0-4855" name="__codelineno-0-4855"></a><span class="sd">                        Mask: -9999.0</span>
<a id="__codelineno-0-4856" name="__codelineno-0-4856"></a><span class="sd">                        Data type: int32</span>
<a id="__codelineno-0-4857" name="__codelineno-0-4857"></a><span class="sd">                        File:...</span>
<a id="__codelineno-0-4858" name="__codelineno-0-4858"></a><span class="sd">            &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-4859" name="__codelineno-0-4859"></a><span class="sd">            &gt;&gt;&gt; print(dataset.read_array()) # doctest: +SKIP</span>
<a id="__codelineno-0-4860" name="__codelineno-0-4860"></a><span class="sd">            [[[1 3 3 4]</span>
<a id="__codelineno-0-4861" name="__codelineno-0-4861"></a><span class="sd">              [1 4 2 4]</span>
<a id="__codelineno-0-4862" name="__codelineno-0-4862"></a><span class="sd">              [2 4 2 1]</span>
<a id="__codelineno-0-4863" name="__codelineno-0-4863"></a><span class="sd">              [1 3 2 3]]</span>
<a id="__codelineno-0-4864" name="__codelineno-0-4864"></a><span class="sd">             [[3 2 1 3]</span>
<a id="__codelineno-0-4865" name="__codelineno-0-4865"></a><span class="sd">              [4 3 2 2]</span>
<a id="__codelineno-0-4866" name="__codelineno-0-4866"></a><span class="sd">              [2 2 3 4]</span>
<a id="__codelineno-0-4867" name="__codelineno-0-4867"></a><span class="sd">              [1 4 1 4]]]</span>
<a id="__codelineno-0-4868" name="__codelineno-0-4868"></a>
<a id="__codelineno-0-4869" name="__codelineno-0-4869"></a><span class="sd">            ```</span>
<a id="__codelineno-0-4870" name="__codelineno-0-4870"></a>
<a id="__codelineno-0-4871" name="__codelineno-0-4871"></a><span class="sd">          - Now, extract the values in the dataset:</span>
<a id="__codelineno-0-4872" name="__codelineno-0-4872"></a>
<a id="__codelineno-0-4873" name="__codelineno-0-4873"></a><span class="sd">            ```python</span>
<a id="__codelineno-0-4874" name="__codelineno-0-4874"></a><span class="sd">            &gt;&gt;&gt; values = dataset.extract()</span>
<a id="__codelineno-0-4875" name="__codelineno-0-4875"></a><span class="sd">            &gt;&gt;&gt; print(values) # doctest: +SKIP</span>
<a id="__codelineno-0-4876" name="__codelineno-0-4876"></a><span class="sd">            [[1 3 3 4 1 4 2 4 2 4 2 1 1 3 2 3]</span>
<a id="__codelineno-0-4877" name="__codelineno-0-4877"></a><span class="sd">             [3 2 1 3 4 3 2 2 2 2 3 4 1 4 1 4]]</span>
<a id="__codelineno-0-4878" name="__codelineno-0-4878"></a>
<a id="__codelineno-0-4879" name="__codelineno-0-4879"></a><span class="sd">            ```</span>
<a id="__codelineno-0-4880" name="__codelineno-0-4880"></a>
<a id="__codelineno-0-4881" name="__codelineno-0-4881"></a><span class="sd">          - Extract all the values except 2:</span>
<a id="__codelineno-0-4882" name="__codelineno-0-4882"></a>
<a id="__codelineno-0-4883" name="__codelineno-0-4883"></a><span class="sd">            ```python</span>
<a id="__codelineno-0-4884" name="__codelineno-0-4884"></a><span class="sd">            &gt;&gt;&gt; values = dataset.extract(exclude_value=2)</span>
<a id="__codelineno-0-4885" name="__codelineno-0-4885"></a><span class="sd">            &gt;&gt;&gt; print(values) # doctest: +SKIP</span>
<a id="__codelineno-0-4886" name="__codelineno-0-4886"></a>
<a id="__codelineno-0-4887" name="__codelineno-0-4887"></a><span class="sd">            ```</span>
<a id="__codelineno-0-4888" name="__codelineno-0-4888"></a>
<a id="__codelineno-0-4889" name="__codelineno-0-4889"></a><span class="sd">        - Extract values at the location of the given point geometries:</span>
<a id="__codelineno-0-4890" name="__codelineno-0-4890"></a>
<a id="__codelineno-0-4891" name="__codelineno-0-4891"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-4892" name="__codelineno-0-4892"></a><span class="sd">          &gt;&gt;&gt; import geopandas as gpd</span>
<a id="__codelineno-0-4893" name="__codelineno-0-4893"></a><span class="sd">          &gt;&gt;&gt; from shapely.geometry import Point</span>
<a id="__codelineno-0-4894" name="__codelineno-0-4894"></a><span class="sd">          ```</span>
<a id="__codelineno-0-4895" name="__codelineno-0-4895"></a>
<a id="__codelineno-0-4896" name="__codelineno-0-4896"></a><span class="sd">          - Create the points using shapely and GeoPandas to cover the 4 cells with xmin, ymin, xmax, ymax = [0.1, -0.2, 0.2, -0.1]:</span>
<a id="__codelineno-0-4897" name="__codelineno-0-4897"></a>
<a id="__codelineno-0-4898" name="__codelineno-0-4898"></a><span class="sd">            ```python</span>
<a id="__codelineno-0-4899" name="__codelineno-0-4899"></a><span class="sd">            &gt;&gt;&gt; points = gpd.GeoDataFrame(geometry=[Point(0.1, -0.1), Point(0.1, -0.2), Point(0.2, -0.2), Point(0.2, -0.1)],crs=4326)</span>
<a id="__codelineno-0-4900" name="__codelineno-0-4900"></a><span class="sd">            &gt;&gt;&gt; values = dataset.extract(feature=points)</span>
<a id="__codelineno-0-4901" name="__codelineno-0-4901"></a><span class="sd">            &gt;&gt;&gt; print(values) # doctest: +SKIP</span>
<a id="__codelineno-0-4902" name="__codelineno-0-4902"></a><span class="sd">            [[4 3 3 4]</span>
<a id="__codelineno-0-4903" name="__codelineno-0-4903"></a><span class="sd">             [3 4 4 2]]</span>
<a id="__codelineno-0-4904" name="__codelineno-0-4904"></a>
<a id="__codelineno-0-4905" name="__codelineno-0-4905"></a><span class="sd">            ```</span>
<a id="__codelineno-0-4906" name="__codelineno-0-4906"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4907" name="__codelineno-0-4907"></a>    <span class="c1"># Optimize: make the read_array return only the array for inside the mask feature, and not to read the whole</span>
<a id="__codelineno-0-4908" name="__codelineno-0-4908"></a>    <span class="c1">#  raster</span>
<a id="__codelineno-0-4909" name="__codelineno-0-4909"></a>    <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-4910" name="__codelineno-0-4910"></a>    <span class="n">no_data_value</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-4911" name="__codelineno-0-4911"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<a id="__codelineno-0-4912" name="__codelineno-0-4912"></a>    <span class="p">)</span>
<a id="__codelineno-0-4913" name="__codelineno-0-4913"></a>    <span class="k">if</span> <span class="n">feature</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-4914" name="__codelineno-0-4914"></a>        <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-4915" name="__codelineno-0-4915"></a>            <span class="p">[</span><span class="n">no_data_value</span><span class="p">,</span> <span class="n">exclude_value</span><span class="p">]</span>
<a id="__codelineno-0-4916" name="__codelineno-0-4916"></a>            <span class="k">if</span> <span class="n">exclude_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-4917" name="__codelineno-0-4917"></a>            <span class="k">else</span> <span class="p">[</span><span class="n">no_data_value</span><span class="p">]</span>
<a id="__codelineno-0-4918" name="__codelineno-0-4918"></a>        <span class="p">)</span>
<a id="__codelineno-0-4919" name="__codelineno-0-4919"></a>        <span class="n">values</span> <span class="o">=</span> <span class="n">get_pixels2</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span>
<a id="__codelineno-0-4920" name="__codelineno-0-4920"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4921" name="__codelineno-0-4921"></a>        <span class="n">indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">map_to_array_coordinates</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
<a id="__codelineno-0-4922" name="__codelineno-0-4922"></a>        <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-4923" name="__codelineno-0-4923"></a>            <span class="n">values</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[:,</span> <span class="n">indices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">indices</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]]</span>
<a id="__codelineno-0-4924" name="__codelineno-0-4924"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-4925" name="__codelineno-0-4925"></a>            <span class="n">values</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">indices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">indices</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]]</span>
<a id="__codelineno-0-4926" name="__codelineno-0-4926"></a>
<a id="__codelineno-0-4927" name="__codelineno-0-4927"></a>    <span class="k">return</span> <span class="n">values</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.overlay" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.overlay" class="toclink">
            <code class="highlight language-python"><span class="n">overlay</span><span class="p">(</span><span class="n">classes_map</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">exclude_value</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.overlay" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Overlay.</p>
<p>Overlay method extracts all the values in the dataset for each class in the given class map.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>classes_map</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;pyramids.dataset.Dataset&lt;/code&gt;" href="#pyramids.dataset.Dataset">Dataset</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dataset object for the raster that has classes you want to overlay with the raster.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>band</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the raster is multi-band, choose the band you want to overlay with the classes map. Default is 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exclude_value</code>
            </td>
            <td>
                  <code><span title="Numeric">Numeric</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Values you want to exclude from extracted values. Default is None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Dict</code></td>            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="typing.List">List</span>[<span title="float">float</span>], <span title="typing.List">List</span>[<span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary with class values as keys (from the class map), and for each key a list of all the intersected
values in the base map.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Read the dataset:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&quot;examples/data/geotiff/raster-folder/MSWEP_1979.01.01.tif&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span> <span class="c1"># doctest: +SKIP</span>
</code></pre></div>
<p><img alt="rhine-rainfall" src="../../_images/dataset/rhine-rainfall.png" /></p>
<ul>
<li>Read the classes dataset:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">classes</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&quot;examples/data/geotiff/rhine-classes.tif&quot;</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">classes</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="n">color_scale</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span> <span class="c1"># doctest: +SKIP</span>
</code></pre></div>
<p><img alt="rhine-classes" src="../../_images/dataset/rhine-classes.png" /></p>
<ul>
<li>Overlay the dataset with the classes dataset:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">classes_dict</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">overlay</span><span class="p">(</span><span class="n">classes</span><span class="p">)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">classes_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="n">dict_keys</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
</code></pre></div>
<ul>
<li>You can use the key <code>1</code> to get the values that overlay class 1.</li>
</ul>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4929">4929</a></span>
<span class="normal"><a href="#__codelineno-0-4930">4930</a></span>
<span class="normal"><a href="#__codelineno-0-4931">4931</a></span>
<span class="normal"><a href="#__codelineno-0-4932">4932</a></span>
<span class="normal"><a href="#__codelineno-0-4933">4933</a></span>
<span class="normal"><a href="#__codelineno-0-4934">4934</a></span>
<span class="normal"><a href="#__codelineno-0-4935">4935</a></span>
<span class="normal"><a href="#__codelineno-0-4936">4936</a></span>
<span class="normal"><a href="#__codelineno-0-4937">4937</a></span>
<span class="normal"><a href="#__codelineno-0-4938">4938</a></span>
<span class="normal"><a href="#__codelineno-0-4939">4939</a></span>
<span class="normal"><a href="#__codelineno-0-4940">4940</a></span>
<span class="normal"><a href="#__codelineno-0-4941">4941</a></span>
<span class="normal"><a href="#__codelineno-0-4942">4942</a></span>
<span class="normal"><a href="#__codelineno-0-4943">4943</a></span>
<span class="normal"><a href="#__codelineno-0-4944">4944</a></span>
<span class="normal"><a href="#__codelineno-0-4945">4945</a></span>
<span class="normal"><a href="#__codelineno-0-4946">4946</a></span>
<span class="normal"><a href="#__codelineno-0-4947">4947</a></span>
<span class="normal"><a href="#__codelineno-0-4948">4948</a></span>
<span class="normal"><a href="#__codelineno-0-4949">4949</a></span>
<span class="normal"><a href="#__codelineno-0-4950">4950</a></span>
<span class="normal"><a href="#__codelineno-0-4951">4951</a></span>
<span class="normal"><a href="#__codelineno-0-4952">4952</a></span>
<span class="normal"><a href="#__codelineno-0-4953">4953</a></span>
<span class="normal"><a href="#__codelineno-0-4954">4954</a></span>
<span class="normal"><a href="#__codelineno-0-4955">4955</a></span>
<span class="normal"><a href="#__codelineno-0-4956">4956</a></span>
<span class="normal"><a href="#__codelineno-0-4957">4957</a></span>
<span class="normal"><a href="#__codelineno-0-4958">4958</a></span>
<span class="normal"><a href="#__codelineno-0-4959">4959</a></span>
<span class="normal"><a href="#__codelineno-0-4960">4960</a></span>
<span class="normal"><a href="#__codelineno-0-4961">4961</a></span>
<span class="normal"><a href="#__codelineno-0-4962">4962</a></span>
<span class="normal"><a href="#__codelineno-0-4963">4963</a></span>
<span class="normal"><a href="#__codelineno-0-4964">4964</a></span>
<span class="normal"><a href="#__codelineno-0-4965">4965</a></span>
<span class="normal"><a href="#__codelineno-0-4966">4966</a></span>
<span class="normal"><a href="#__codelineno-0-4967">4967</a></span>
<span class="normal"><a href="#__codelineno-0-4968">4968</a></span>
<span class="normal"><a href="#__codelineno-0-4969">4969</a></span>
<span class="normal"><a href="#__codelineno-0-4970">4970</a></span>
<span class="normal"><a href="#__codelineno-0-4971">4971</a></span>
<span class="normal"><a href="#__codelineno-0-4972">4972</a></span>
<span class="normal"><a href="#__codelineno-0-4973">4973</a></span>
<span class="normal"><a href="#__codelineno-0-4974">4974</a></span>
<span class="normal"><a href="#__codelineno-0-4975">4975</a></span>
<span class="normal"><a href="#__codelineno-0-4976">4976</a></span>
<span class="normal"><a href="#__codelineno-0-4977">4977</a></span>
<span class="normal"><a href="#__codelineno-0-4978">4978</a></span>
<span class="normal"><a href="#__codelineno-0-4979">4979</a></span>
<span class="normal"><a href="#__codelineno-0-4980">4980</a></span>
<span class="normal"><a href="#__codelineno-0-4981">4981</a></span>
<span class="normal"><a href="#__codelineno-0-4982">4982</a></span>
<span class="normal"><a href="#__codelineno-0-4983">4983</a></span>
<span class="normal"><a href="#__codelineno-0-4984">4984</a></span>
<span class="normal"><a href="#__codelineno-0-4985">4985</a></span>
<span class="normal"><a href="#__codelineno-0-4986">4986</a></span>
<span class="normal"><a href="#__codelineno-0-4987">4987</a></span>
<span class="normal"><a href="#__codelineno-0-4988">4988</a></span>
<span class="normal"><a href="#__codelineno-0-4989">4989</a></span>
<span class="normal"><a href="#__codelineno-0-4990">4990</a></span>
<span class="normal"><a href="#__codelineno-0-4991">4991</a></span>
<span class="normal"><a href="#__codelineno-0-4992">4992</a></span>
<span class="normal"><a href="#__codelineno-0-4993">4993</a></span>
<span class="normal"><a href="#__codelineno-0-4994">4994</a></span>
<span class="normal"><a href="#__codelineno-0-4995">4995</a></span>
<span class="normal"><a href="#__codelineno-0-4996">4996</a></span>
<span class="normal"><a href="#__codelineno-0-4997">4997</a></span>
<span class="normal"><a href="#__codelineno-0-4998">4998</a></span>
<span class="normal"><a href="#__codelineno-0-4999">4999</a></span>
<span class="normal"><a href="#__codelineno-0-5000">5000</a></span>
<span class="normal"><a href="#__codelineno-0-5001">5001</a></span>
<span class="normal"><a href="#__codelineno-0-5002">5002</a></span>
<span class="normal"><a href="#__codelineno-0-5003">5003</a></span>
<span class="normal"><a href="#__codelineno-0-5004">5004</a></span>
<span class="normal"><a href="#__codelineno-0-5005">5005</a></span>
<span class="normal"><a href="#__codelineno-0-5006">5006</a></span>
<span class="normal"><a href="#__codelineno-0-5007">5007</a></span>
<span class="normal"><a href="#__codelineno-0-5008">5008</a></span>
<span class="normal"><a href="#__codelineno-0-5009">5009</a></span>
<span class="normal"><a href="#__codelineno-0-5010">5010</a></span>
<span class="normal"><a href="#__codelineno-0-5011">5011</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4929" name="__codelineno-0-4929"></a><span class="k">def</span><span class="w"> </span><span class="nf">overlay</span><span class="p">(</span>
<a id="__codelineno-0-4930" name="__codelineno-0-4930"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-4931" name="__codelineno-0-4931"></a>    <span class="n">classes_map</span><span class="p">,</span>
<a id="__codelineno-0-4932" name="__codelineno-0-4932"></a>    <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-4933" name="__codelineno-0-4933"></a>    <span class="n">exclude_value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-4934" name="__codelineno-0-4934"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
<a id="__codelineno-0-4935" name="__codelineno-0-4935"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Overlay.</span>
<a id="__codelineno-0-4936" name="__codelineno-0-4936"></a>
<a id="__codelineno-0-4937" name="__codelineno-0-4937"></a><span class="sd">    Overlay method extracts all the values in the dataset for each class in the given class map.</span>
<a id="__codelineno-0-4938" name="__codelineno-0-4938"></a>
<a id="__codelineno-0-4939" name="__codelineno-0-4939"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-4940" name="__codelineno-0-4940"></a><span class="sd">        classes_map (Dataset):</span>
<a id="__codelineno-0-4941" name="__codelineno-0-4941"></a><span class="sd">            Dataset object for the raster that has classes you want to overlay with the raster.</span>
<a id="__codelineno-0-4942" name="__codelineno-0-4942"></a><span class="sd">        band (int):</span>
<a id="__codelineno-0-4943" name="__codelineno-0-4943"></a><span class="sd">            If the raster is multi-band, choose the band you want to overlay with the classes map. Default is 0.</span>
<a id="__codelineno-0-4944" name="__codelineno-0-4944"></a><span class="sd">        exclude_value (Numeric, optional):</span>
<a id="__codelineno-0-4945" name="__codelineno-0-4945"></a><span class="sd">            Values you want to exclude from extracted values. Default is None.</span>
<a id="__codelineno-0-4946" name="__codelineno-0-4946"></a>
<a id="__codelineno-0-4947" name="__codelineno-0-4947"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-4948" name="__codelineno-0-4948"></a><span class="sd">        Dict:</span>
<a id="__codelineno-0-4949" name="__codelineno-0-4949"></a><span class="sd">            Dictionary with class values as keys (from the class map), and for each key a list of all the intersected</span>
<a id="__codelineno-0-4950" name="__codelineno-0-4950"></a><span class="sd">            values in the base map.</span>
<a id="__codelineno-0-4951" name="__codelineno-0-4951"></a>
<a id="__codelineno-0-4952" name="__codelineno-0-4952"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-4953" name="__codelineno-0-4953"></a><span class="sd">        - Read the dataset:</span>
<a id="__codelineno-0-4954" name="__codelineno-0-4954"></a>
<a id="__codelineno-0-4955" name="__codelineno-0-4955"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-4956" name="__codelineno-0-4956"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.read_file(&quot;examples/data/geotiff/raster-folder/MSWEP_1979.01.01.tif&quot;)</span>
<a id="__codelineno-0-4957" name="__codelineno-0-4957"></a><span class="sd">          &gt;&gt;&gt; dataset.plot(figsize=(6, 8)) # doctest: +SKIP</span>
<a id="__codelineno-0-4958" name="__codelineno-0-4958"></a>
<a id="__codelineno-0-4959" name="__codelineno-0-4959"></a><span class="sd">          ```</span>
<a id="__codelineno-0-4960" name="__codelineno-0-4960"></a>
<a id="__codelineno-0-4961" name="__codelineno-0-4961"></a><span class="sd">          ![rhine-rainfall](./../_images/dataset/rhine-rainfall.png)</span>
<a id="__codelineno-0-4962" name="__codelineno-0-4962"></a>
<a id="__codelineno-0-4963" name="__codelineno-0-4963"></a><span class="sd">        - Read the classes dataset:</span>
<a id="__codelineno-0-4964" name="__codelineno-0-4964"></a>
<a id="__codelineno-0-4965" name="__codelineno-0-4965"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-4966" name="__codelineno-0-4966"></a><span class="sd">          &gt;&gt;&gt; classes = Dataset.read_file(&quot;examples/data/geotiff/rhine-classes.tif&quot;)</span>
<a id="__codelineno-0-4967" name="__codelineno-0-4967"></a><span class="sd">          &gt;&gt;&gt; classes.plot(figsize=(6, 8), color_scale=4, bounds=[1,2,3,4,5,6]) # doctest: +SKIP</span>
<a id="__codelineno-0-4968" name="__codelineno-0-4968"></a>
<a id="__codelineno-0-4969" name="__codelineno-0-4969"></a><span class="sd">          ```</span>
<a id="__codelineno-0-4970" name="__codelineno-0-4970"></a>
<a id="__codelineno-0-4971" name="__codelineno-0-4971"></a><span class="sd">          ![rhine-classes](./../_images/dataset/rhine-classes.png)</span>
<a id="__codelineno-0-4972" name="__codelineno-0-4972"></a>
<a id="__codelineno-0-4973" name="__codelineno-0-4973"></a><span class="sd">        - Overlay the dataset with the classes dataset:</span>
<a id="__codelineno-0-4974" name="__codelineno-0-4974"></a>
<a id="__codelineno-0-4975" name="__codelineno-0-4975"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-4976" name="__codelineno-0-4976"></a><span class="sd">          &gt;&gt;&gt; classes_dict = dataset.overlay(classes)</span>
<a id="__codelineno-0-4977" name="__codelineno-0-4977"></a><span class="sd">          &gt;&gt;&gt; print(classes_dict.keys()) # doctest: +SKIP</span>
<a id="__codelineno-0-4978" name="__codelineno-0-4978"></a><span class="sd">          dict_keys([1, 2, 3, 4, 5])</span>
<a id="__codelineno-0-4979" name="__codelineno-0-4979"></a>
<a id="__codelineno-0-4980" name="__codelineno-0-4980"></a><span class="sd">          ```</span>
<a id="__codelineno-0-4981" name="__codelineno-0-4981"></a>
<a id="__codelineno-0-4982" name="__codelineno-0-4982"></a><span class="sd">        - You can use the key `1` to get the values that overlay class 1.</span>
<a id="__codelineno-0-4983" name="__codelineno-0-4983"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-4984" name="__codelineno-0-4984"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_alignment</span><span class="p">(</span><span class="n">classes_map</span><span class="p">):</span>
<a id="__codelineno-0-4985" name="__codelineno-0-4985"></a>        <span class="k">raise</span> <span class="n">AlignmentError</span><span class="p">(</span>
<a id="__codelineno-0-4986" name="__codelineno-0-4986"></a>            <span class="s2">&quot;The class Dataset is not aligned with the current raster, please use the method &quot;</span>
<a id="__codelineno-0-4987" name="__codelineno-0-4987"></a>            <span class="s2">&quot;&#39;align&#39; to align both rasters.&quot;</span>
<a id="__codelineno-0-4988" name="__codelineno-0-4988"></a>        <span class="p">)</span>
<a id="__codelineno-0-4989" name="__codelineno-0-4989"></a>    <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-4990" name="__codelineno-0-4990"></a>    <span class="n">no_data_value</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-4991" name="__codelineno-0-4991"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<a id="__codelineno-0-4992" name="__codelineno-0-4992"></a>    <span class="p">)</span>
<a id="__codelineno-0-4993" name="__codelineno-0-4993"></a>    <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-4994" name="__codelineno-0-4994"></a>        <span class="p">[</span><span class="n">no_data_value</span><span class="p">,</span> <span class="n">exclude_value</span><span class="p">]</span>
<a id="__codelineno-0-4995" name="__codelineno-0-4995"></a>        <span class="k">if</span> <span class="n">exclude_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-4996" name="__codelineno-0-4996"></a>        <span class="k">else</span> <span class="p">[</span><span class="n">no_data_value</span><span class="p">]</span>
<a id="__codelineno-0-4997" name="__codelineno-0-4997"></a>    <span class="p">)</span>
<a id="__codelineno-0-4998" name="__codelineno-0-4998"></a>    <span class="n">ind</span> <span class="o">=</span> <span class="n">get_indices2</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span>
<a id="__codelineno-0-4999" name="__codelineno-0-4999"></a>    <span class="n">classes</span> <span class="o">=</span> <span class="n">classes_map</span><span class="o">.</span><span class="n">read_array</span><span class="p">()</span>
<a id="__codelineno-0-5000" name="__codelineno-0-5000"></a>    <span class="n">values</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<a id="__codelineno-0-5001" name="__codelineno-0-5001"></a>
<a id="__codelineno-0-5002" name="__codelineno-0-5002"></a>    <span class="c1"># extract values</span>
<a id="__codelineno-0-5003" name="__codelineno-0-5003"></a>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ind_i</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ind</span><span class="p">):</span>
<a id="__codelineno-0-5004" name="__codelineno-0-5004"></a>        <span class="c1"># first check if the sub-basin has a list in the dict if not create a list</span>
<a id="__codelineno-0-5005" name="__codelineno-0-5005"></a>        <span class="n">key</span> <span class="o">=</span> <span class="n">classes</span><span class="p">[</span><span class="n">ind_i</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ind_i</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
<a id="__codelineno-0-5006" name="__codelineno-0-5006"></a>        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
<a id="__codelineno-0-5007" name="__codelineno-0-5007"></a>            <span class="n">values</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<a id="__codelineno-0-5008" name="__codelineno-0-5008"></a>
<a id="__codelineno-0-5009" name="__codelineno-0-5009"></a>        <span class="n">values</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">ind_i</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ind_i</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
<a id="__codelineno-0-5010" name="__codelineno-0-5010"></a>
<a id="__codelineno-0-5011" name="__codelineno-0-5011"></a>    <span class="k">return</span> <span class="n">values</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.get_mask" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.get_mask" class="toclink">
            <code class="highlight language-python"><span class="n">get_mask</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.get_mask" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Get the mask array.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>band</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Band index. Default is 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>np.ndarray:
Array of the mask. 0 value for cells out of the domain, and 255 for cells in the domain.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-5013">5013</a></span>
<span class="normal"><a href="#__codelineno-0-5014">5014</a></span>
<span class="normal"><a href="#__codelineno-0-5015">5015</a></span>
<span class="normal"><a href="#__codelineno-0-5016">5016</a></span>
<span class="normal"><a href="#__codelineno-0-5017">5017</a></span>
<span class="normal"><a href="#__codelineno-0-5018">5018</a></span>
<span class="normal"><a href="#__codelineno-0-5019">5019</a></span>
<span class="normal"><a href="#__codelineno-0-5020">5020</a></span>
<span class="normal"><a href="#__codelineno-0-5021">5021</a></span>
<span class="normal"><a href="#__codelineno-0-5022">5022</a></span>
<span class="normal"><a href="#__codelineno-0-5023">5023</a></span>
<span class="normal"><a href="#__codelineno-0-5024">5024</a></span>
<span class="normal"><a href="#__codelineno-0-5025">5025</a></span>
<span class="normal"><a href="#__codelineno-0-5026">5026</a></span>
<span class="normal"><a href="#__codelineno-0-5027">5027</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-5013" name="__codelineno-0-5013"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_mask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-5014" name="__codelineno-0-5014"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the mask array.</span>
<a id="__codelineno-0-5015" name="__codelineno-0-5015"></a>
<a id="__codelineno-0-5016" name="__codelineno-0-5016"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-5017" name="__codelineno-0-5017"></a><span class="sd">        band (int):</span>
<a id="__codelineno-0-5018" name="__codelineno-0-5018"></a><span class="sd">            Band index. Default is 0.</span>
<a id="__codelineno-0-5019" name="__codelineno-0-5019"></a>
<a id="__codelineno-0-5020" name="__codelineno-0-5020"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-5021" name="__codelineno-0-5021"></a><span class="sd">        np.ndarray:</span>
<a id="__codelineno-0-5022" name="__codelineno-0-5022"></a><span class="sd">            Array of the mask. 0 value for cells out of the domain, and 255 for cells in the domain.</span>
<a id="__codelineno-0-5023" name="__codelineno-0-5023"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-5024" name="__codelineno-0-5024"></a>    <span class="c1"># TODO: there is a CreateMaskBand method in the gdal.Dataset class, it creates a mask band for the dataset</span>
<a id="__codelineno-0-5025" name="__codelineno-0-5025"></a>    <span class="c1">#   either internally or externally.</span>
<a id="__codelineno-0-5026" name="__codelineno-0-5026"></a>    <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">band</span><span class="p">)</span><span class="o">.</span><span class="n">GetMaskBand</span><span class="p">()</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
<a id="__codelineno-0-5027" name="__codelineno-0-5027"></a>    <span class="k">return</span> <span class="n">arr</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.footprint" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.footprint" class="toclink">
            <code class="highlight language-python"><span class="n">footprint</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">exclude_values</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.footprint" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Extract the real coverage of the values in a certain band.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>band</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Band index. Default is 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exclude_values</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If you want to exclude a certain value in the raster with another value inter the two values as a
list of tuples a [(value_to_be_exclude_valuesd, new_value)].</p>
<ul>
<li>Example of exclude_values usage:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">exclude_values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div>
<ul>
<li>This parameter is introduced particularly in the case of rasters that has the no_data_value stored in
  the <code>no_data_value</code> property does not match the value stored in the band, so this option can correct
  this behavior.</li>
</ul>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>GeoDataFrame</code></td>            <td>
                  <code><span title="typing.Union">Union</span>[<span title="geopandas.geodataframe.GeoDataFrame">GeoDataFrame</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>geodataframe containing the polygon representing the extent of the raster. the extent column should
  contain a value of 2 only.</li>
<li>if the dataset had separate polygons, each polygon will be in a separate row.</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>The following raster dataset has flood depth stored in its values, and the non-flooded cells are filled with
  zero, so to extract the flood extent, we need to exclude the zero flood depth cells.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&quot;examples/data/geotiff/rhine-flood.tif&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="p">(</span><span class="o">&lt;</span><span class="n">Figure</span> <span class="n">size</span> <span class="mi">800</span><span class="n">x800</span> <span class="k">with</span> <span class="mi">2</span> <span class="n">Axes</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Axes</span><span class="p">:</span> <span class="o">&gt;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="dataset-footprint-rhine-flood" src="../../_images/dataset/dataset-footprint-rhine-flood.png" /></p>
<ul>
<li>Now, to extract the footprint of the dataset band, we need to specify the <code>exclude_values</code> parameter with the
  value of the non-flooded cells.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">extent</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">footprint</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">exclude_values</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">extent</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>   <span class="n">Band_1</span>                                           <span class="n">geometry</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="mi">0</span>     <span class="mf">2.0</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">4070974.182</span> <span class="mf">3181069.473</span><span class="p">,</span> <span class="mf">4070974.182</span><span class="o">...</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="mi">1</span>     <span class="mf">2.0</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">4077674.182</span> <span class="mf">3181169.473</span><span class="p">,</span> <span class="mf">4077674.182</span><span class="o">...</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="mi">2</span>     <span class="mf">2.0</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">4091174.182</span> <span class="mf">3169169.473</span><span class="p">,</span> <span class="mf">4091174.182</span><span class="o">...</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="mi">3</span>     <span class="mf">2.0</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">4088574.182</span> <span class="mf">3176269.473</span><span class="p">,</span> <span class="mf">4088574.182</span><span class="o">...</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="mi">4</span>     <span class="mf">2.0</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">4082974.182</span> <span class="mf">3167869.473</span><span class="p">,</span> <span class="mf">4082974.182</span><span class="o">...</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="mi">5</span>     <span class="mf">2.0</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">4092274.182</span> <span class="mf">3168269.473</span><span class="p">,</span> <span class="mf">4092274.182</span><span class="o">...</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="mi">6</span>     <span class="mf">2.0</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">4072474.182</span> <span class="mf">3181169.473</span><span class="p">,</span> <span class="mf">4072474.182</span><span class="o">...</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">extent</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="o">&lt;</span><span class="n">Axes</span><span class="p">:</span> <span class="o">&gt;</span>
</code></pre></div>
<p><img alt="dataset-footprint-rhine-flood-extent" src="../../_images/dataset/dataset-footprint-rhine-flood-extent.png" /></p>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-5029">5029</a></span>
<span class="normal"><a href="#__codelineno-0-5030">5030</a></span>
<span class="normal"><a href="#__codelineno-0-5031">5031</a></span>
<span class="normal"><a href="#__codelineno-0-5032">5032</a></span>
<span class="normal"><a href="#__codelineno-0-5033">5033</a></span>
<span class="normal"><a href="#__codelineno-0-5034">5034</a></span>
<span class="normal"><a href="#__codelineno-0-5035">5035</a></span>
<span class="normal"><a href="#__codelineno-0-5036">5036</a></span>
<span class="normal"><a href="#__codelineno-0-5037">5037</a></span>
<span class="normal"><a href="#__codelineno-0-5038">5038</a></span>
<span class="normal"><a href="#__codelineno-0-5039">5039</a></span>
<span class="normal"><a href="#__codelineno-0-5040">5040</a></span>
<span class="normal"><a href="#__codelineno-0-5041">5041</a></span>
<span class="normal"><a href="#__codelineno-0-5042">5042</a></span>
<span class="normal"><a href="#__codelineno-0-5043">5043</a></span>
<span class="normal"><a href="#__codelineno-0-5044">5044</a></span>
<span class="normal"><a href="#__codelineno-0-5045">5045</a></span>
<span class="normal"><a href="#__codelineno-0-5046">5046</a></span>
<span class="normal"><a href="#__codelineno-0-5047">5047</a></span>
<span class="normal"><a href="#__codelineno-0-5048">5048</a></span>
<span class="normal"><a href="#__codelineno-0-5049">5049</a></span>
<span class="normal"><a href="#__codelineno-0-5050">5050</a></span>
<span class="normal"><a href="#__codelineno-0-5051">5051</a></span>
<span class="normal"><a href="#__codelineno-0-5052">5052</a></span>
<span class="normal"><a href="#__codelineno-0-5053">5053</a></span>
<span class="normal"><a href="#__codelineno-0-5054">5054</a></span>
<span class="normal"><a href="#__codelineno-0-5055">5055</a></span>
<span class="normal"><a href="#__codelineno-0-5056">5056</a></span>
<span class="normal"><a href="#__codelineno-0-5057">5057</a></span>
<span class="normal"><a href="#__codelineno-0-5058">5058</a></span>
<span class="normal"><a href="#__codelineno-0-5059">5059</a></span>
<span class="normal"><a href="#__codelineno-0-5060">5060</a></span>
<span class="normal"><a href="#__codelineno-0-5061">5061</a></span>
<span class="normal"><a href="#__codelineno-0-5062">5062</a></span>
<span class="normal"><a href="#__codelineno-0-5063">5063</a></span>
<span class="normal"><a href="#__codelineno-0-5064">5064</a></span>
<span class="normal"><a href="#__codelineno-0-5065">5065</a></span>
<span class="normal"><a href="#__codelineno-0-5066">5066</a></span>
<span class="normal"><a href="#__codelineno-0-5067">5067</a></span>
<span class="normal"><a href="#__codelineno-0-5068">5068</a></span>
<span class="normal"><a href="#__codelineno-0-5069">5069</a></span>
<span class="normal"><a href="#__codelineno-0-5070">5070</a></span>
<span class="normal"><a href="#__codelineno-0-5071">5071</a></span>
<span class="normal"><a href="#__codelineno-0-5072">5072</a></span>
<span class="normal"><a href="#__codelineno-0-5073">5073</a></span>
<span class="normal"><a href="#__codelineno-0-5074">5074</a></span>
<span class="normal"><a href="#__codelineno-0-5075">5075</a></span>
<span class="normal"><a href="#__codelineno-0-5076">5076</a></span>
<span class="normal"><a href="#__codelineno-0-5077">5077</a></span>
<span class="normal"><a href="#__codelineno-0-5078">5078</a></span>
<span class="normal"><a href="#__codelineno-0-5079">5079</a></span>
<span class="normal"><a href="#__codelineno-0-5080">5080</a></span>
<span class="normal"><a href="#__codelineno-0-5081">5081</a></span>
<span class="normal"><a href="#__codelineno-0-5082">5082</a></span>
<span class="normal"><a href="#__codelineno-0-5083">5083</a></span>
<span class="normal"><a href="#__codelineno-0-5084">5084</a></span>
<span class="normal"><a href="#__codelineno-0-5085">5085</a></span>
<span class="normal"><a href="#__codelineno-0-5086">5086</a></span>
<span class="normal"><a href="#__codelineno-0-5087">5087</a></span>
<span class="normal"><a href="#__codelineno-0-5088">5088</a></span>
<span class="normal"><a href="#__codelineno-0-5089">5089</a></span>
<span class="normal"><a href="#__codelineno-0-5090">5090</a></span>
<span class="normal"><a href="#__codelineno-0-5091">5091</a></span>
<span class="normal"><a href="#__codelineno-0-5092">5092</a></span>
<span class="normal"><a href="#__codelineno-0-5093">5093</a></span>
<span class="normal"><a href="#__codelineno-0-5094">5094</a></span>
<span class="normal"><a href="#__codelineno-0-5095">5095</a></span>
<span class="normal"><a href="#__codelineno-0-5096">5096</a></span>
<span class="normal"><a href="#__codelineno-0-5097">5097</a></span>
<span class="normal"><a href="#__codelineno-0-5098">5098</a></span>
<span class="normal"><a href="#__codelineno-0-5099">5099</a></span>
<span class="normal"><a href="#__codelineno-0-5100">5100</a></span>
<span class="normal"><a href="#__codelineno-0-5101">5101</a></span>
<span class="normal"><a href="#__codelineno-0-5102">5102</a></span>
<span class="normal"><a href="#__codelineno-0-5103">5103</a></span>
<span class="normal"><a href="#__codelineno-0-5104">5104</a></span>
<span class="normal"><a href="#__codelineno-0-5105">5105</a></span>
<span class="normal"><a href="#__codelineno-0-5106">5106</a></span>
<span class="normal"><a href="#__codelineno-0-5107">5107</a></span>
<span class="normal"><a href="#__codelineno-0-5108">5108</a></span>
<span class="normal"><a href="#__codelineno-0-5109">5109</a></span>
<span class="normal"><a href="#__codelineno-0-5110">5110</a></span>
<span class="normal"><a href="#__codelineno-0-5111">5111</a></span>
<span class="normal"><a href="#__codelineno-0-5112">5112</a></span>
<span class="normal"><a href="#__codelineno-0-5113">5113</a></span>
<span class="normal"><a href="#__codelineno-0-5114">5114</a></span>
<span class="normal"><a href="#__codelineno-0-5115">5115</a></span>
<span class="normal"><a href="#__codelineno-0-5116">5116</a></span>
<span class="normal"><a href="#__codelineno-0-5117">5117</a></span>
<span class="normal"><a href="#__codelineno-0-5118">5118</a></span>
<span class="normal"><a href="#__codelineno-0-5119">5119</a></span>
<span class="normal"><a href="#__codelineno-0-5120">5120</a></span>
<span class="normal"><a href="#__codelineno-0-5121">5121</a></span>
<span class="normal"><a href="#__codelineno-0-5122">5122</a></span>
<span class="normal"><a href="#__codelineno-0-5123">5123</a></span>
<span class="normal"><a href="#__codelineno-0-5124">5124</a></span>
<span class="normal"><a href="#__codelineno-0-5125">5125</a></span>
<span class="normal"><a href="#__codelineno-0-5126">5126</a></span>
<span class="normal"><a href="#__codelineno-0-5127">5127</a></span>
<span class="normal"><a href="#__codelineno-0-5128">5128</a></span>
<span class="normal"><a href="#__codelineno-0-5129">5129</a></span>
<span class="normal"><a href="#__codelineno-0-5130">5130</a></span>
<span class="normal"><a href="#__codelineno-0-5131">5131</a></span>
<span class="normal"><a href="#__codelineno-0-5132">5132</a></span>
<span class="normal"><a href="#__codelineno-0-5133">5133</a></span>
<span class="normal"><a href="#__codelineno-0-5134">5134</a></span>
<span class="normal"><a href="#__codelineno-0-5135">5135</a></span>
<span class="normal"><a href="#__codelineno-0-5136">5136</a></span>
<span class="normal"><a href="#__codelineno-0-5137">5137</a></span>
<span class="normal"><a href="#__codelineno-0-5138">5138</a></span>
<span class="normal"><a href="#__codelineno-0-5139">5139</a></span>
<span class="normal"><a href="#__codelineno-0-5140">5140</a></span>
<span class="normal"><a href="#__codelineno-0-5141">5141</a></span>
<span class="normal"><a href="#__codelineno-0-5142">5142</a></span>
<span class="normal"><a href="#__codelineno-0-5143">5143</a></span>
<span class="normal"><a href="#__codelineno-0-5144">5144</a></span>
<span class="normal"><a href="#__codelineno-0-5145">5145</a></span>
<span class="normal"><a href="#__codelineno-0-5146">5146</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-5029" name="__codelineno-0-5029"></a><span class="k">def</span><span class="w"> </span><span class="nf">footprint</span><span class="p">(</span>
<a id="__codelineno-0-5030" name="__codelineno-0-5030"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-5031" name="__codelineno-0-5031"></a>    <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-5032" name="__codelineno-0-5032"></a>    <span class="n">exclude_values</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-5033" name="__codelineno-0-5033"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">GeoDataFrame</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<a id="__codelineno-0-5034" name="__codelineno-0-5034"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract the real coverage of the values in a certain band.</span>
<a id="__codelineno-0-5035" name="__codelineno-0-5035"></a>
<a id="__codelineno-0-5036" name="__codelineno-0-5036"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-5037" name="__codelineno-0-5037"></a><span class="sd">        band (int):</span>
<a id="__codelineno-0-5038" name="__codelineno-0-5038"></a><span class="sd">            Band index. Default is 0.</span>
<a id="__codelineno-0-5039" name="__codelineno-0-5039"></a><span class="sd">        exclude_values (Optional[List[Any]]):</span>
<a id="__codelineno-0-5040" name="__codelineno-0-5040"></a><span class="sd">            If you want to exclude a certain value in the raster with another value inter the two values as a</span>
<a id="__codelineno-0-5041" name="__codelineno-0-5041"></a><span class="sd">            list of tuples a [(value_to_be_exclude_valuesd, new_value)].</span>
<a id="__codelineno-0-5042" name="__codelineno-0-5042"></a>
<a id="__codelineno-0-5043" name="__codelineno-0-5043"></a><span class="sd">            - Example of exclude_values usage:</span>
<a id="__codelineno-0-5044" name="__codelineno-0-5044"></a>
<a id="__codelineno-0-5045" name="__codelineno-0-5045"></a><span class="sd">              ```python</span>
<a id="__codelineno-0-5046" name="__codelineno-0-5046"></a><span class="sd">              &gt;&gt;&gt; exclude_values = [0]</span>
<a id="__codelineno-0-5047" name="__codelineno-0-5047"></a>
<a id="__codelineno-0-5048" name="__codelineno-0-5048"></a><span class="sd">              ```</span>
<a id="__codelineno-0-5049" name="__codelineno-0-5049"></a>
<a id="__codelineno-0-5050" name="__codelineno-0-5050"></a><span class="sd">            - This parameter is introduced particularly in the case of rasters that has the no_data_value stored in</span>
<a id="__codelineno-0-5051" name="__codelineno-0-5051"></a><span class="sd">              the `no_data_value` property does not match the value stored in the band, so this option can correct</span>
<a id="__codelineno-0-5052" name="__codelineno-0-5052"></a><span class="sd">              this behavior.</span>
<a id="__codelineno-0-5053" name="__codelineno-0-5053"></a>
<a id="__codelineno-0-5054" name="__codelineno-0-5054"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-5055" name="__codelineno-0-5055"></a><span class="sd">        GeoDataFrame:</span>
<a id="__codelineno-0-5056" name="__codelineno-0-5056"></a><span class="sd">            - geodataframe containing the polygon representing the extent of the raster. the extent column should</span>
<a id="__codelineno-0-5057" name="__codelineno-0-5057"></a><span class="sd">              contain a value of 2 only.</span>
<a id="__codelineno-0-5058" name="__codelineno-0-5058"></a><span class="sd">            - if the dataset had separate polygons, each polygon will be in a separate row.</span>
<a id="__codelineno-0-5059" name="__codelineno-0-5059"></a>
<a id="__codelineno-0-5060" name="__codelineno-0-5060"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-5061" name="__codelineno-0-5061"></a><span class="sd">        - The following raster dataset has flood depth stored in its values, and the non-flooded cells are filled with</span>
<a id="__codelineno-0-5062" name="__codelineno-0-5062"></a><span class="sd">          zero, so to extract the flood extent, we need to exclude the zero flood depth cells.</span>
<a id="__codelineno-0-5063" name="__codelineno-0-5063"></a>
<a id="__codelineno-0-5064" name="__codelineno-0-5064"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5065" name="__codelineno-0-5065"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.read_file(&quot;examples/data/geotiff/rhine-flood.tif&quot;)</span>
<a id="__codelineno-0-5066" name="__codelineno-0-5066"></a><span class="sd">          &gt;&gt;&gt; dataset.plot()</span>
<a id="__codelineno-0-5067" name="__codelineno-0-5067"></a><span class="sd">          (&lt;Figure size 800x800 with 2 Axes&gt;, &lt;Axes: &gt;)</span>
<a id="__codelineno-0-5068" name="__codelineno-0-5068"></a>
<a id="__codelineno-0-5069" name="__codelineno-0-5069"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5070" name="__codelineno-0-5070"></a>
<a id="__codelineno-0-5071" name="__codelineno-0-5071"></a><span class="sd">        ![dataset-footprint-rhine-flood](./../_images/dataset/dataset-footprint-rhine-flood.png)</span>
<a id="__codelineno-0-5072" name="__codelineno-0-5072"></a>
<a id="__codelineno-0-5073" name="__codelineno-0-5073"></a><span class="sd">        - Now, to extract the footprint of the dataset band, we need to specify the `exclude_values` parameter with the</span>
<a id="__codelineno-0-5074" name="__codelineno-0-5074"></a><span class="sd">          value of the non-flooded cells.</span>
<a id="__codelineno-0-5075" name="__codelineno-0-5075"></a>
<a id="__codelineno-0-5076" name="__codelineno-0-5076"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5077" name="__codelineno-0-5077"></a><span class="sd">          &gt;&gt;&gt; extent = dataset.footprint(band=0, exclude_values=[0])</span>
<a id="__codelineno-0-5078" name="__codelineno-0-5078"></a><span class="sd">          &gt;&gt;&gt; print(extent)</span>
<a id="__codelineno-0-5079" name="__codelineno-0-5079"></a><span class="sd">             Band_1                                           geometry</span>
<a id="__codelineno-0-5080" name="__codelineno-0-5080"></a><span class="sd">          0     2.0  POLYGON ((4070974.182 3181069.473, 4070974.182...</span>
<a id="__codelineno-0-5081" name="__codelineno-0-5081"></a><span class="sd">          1     2.0  POLYGON ((4077674.182 3181169.473, 4077674.182...</span>
<a id="__codelineno-0-5082" name="__codelineno-0-5082"></a><span class="sd">          2     2.0  POLYGON ((4091174.182 3169169.473, 4091174.182...</span>
<a id="__codelineno-0-5083" name="__codelineno-0-5083"></a><span class="sd">          3     2.0  POLYGON ((4088574.182 3176269.473, 4088574.182...</span>
<a id="__codelineno-0-5084" name="__codelineno-0-5084"></a><span class="sd">          4     2.0  POLYGON ((4082974.182 3167869.473, 4082974.182...</span>
<a id="__codelineno-0-5085" name="__codelineno-0-5085"></a><span class="sd">          5     2.0  POLYGON ((4092274.182 3168269.473, 4092274.182...</span>
<a id="__codelineno-0-5086" name="__codelineno-0-5086"></a><span class="sd">          6     2.0  POLYGON ((4072474.182 3181169.473, 4072474.182...</span>
<a id="__codelineno-0-5087" name="__codelineno-0-5087"></a>
<a id="__codelineno-0-5088" name="__codelineno-0-5088"></a><span class="sd">          &gt;&gt;&gt; extent.plot()</span>
<a id="__codelineno-0-5089" name="__codelineno-0-5089"></a><span class="sd">          &lt;Axes: &gt;</span>
<a id="__codelineno-0-5090" name="__codelineno-0-5090"></a>
<a id="__codelineno-0-5091" name="__codelineno-0-5091"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5092" name="__codelineno-0-5092"></a>
<a id="__codelineno-0-5093" name="__codelineno-0-5093"></a><span class="sd">        ![dataset-footprint-rhine-flood-extent](./../_images/dataset/dataset-footprint-rhine-flood-extent.png)</span>
<a id="__codelineno-0-5094" name="__codelineno-0-5094"></a>
<a id="__codelineno-0-5095" name="__codelineno-0-5095"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-5096" name="__codelineno-0-5096"></a>    <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-5097" name="__codelineno-0-5097"></a>    <span class="n">no_data_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span><span class="p">[</span><span class="n">band</span><span class="p">]</span>
<a id="__codelineno-0-5098" name="__codelineno-0-5098"></a>
<a id="__codelineno-0-5099" name="__codelineno-0-5099"></a>    <span class="k">if</span> <span class="n">no_data_val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-5100" name="__codelineno-0-5100"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">arr</span><span class="p">))</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
<a id="__codelineno-0-5101" name="__codelineno-0-5101"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-5102" name="__codelineno-0-5102"></a>                <span class="s2">&quot;The nodata value stored in the raster does not exist in the raster &quot;</span>
<a id="__codelineno-0-5103" name="__codelineno-0-5103"></a>                <span class="s2">&quot;so either the raster extent is all full of data, or the no_data_value stored in the raster is&quot;</span>
<a id="__codelineno-0-5104" name="__codelineno-0-5104"></a>                <span class="s2">&quot; not correct&quot;</span>
<a id="__codelineno-0-5105" name="__codelineno-0-5105"></a>            <span class="p">)</span>
<a id="__codelineno-0-5106" name="__codelineno-0-5106"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-5107" name="__codelineno-0-5107"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">no_data_val</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.00001</span><span class="p">))</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
<a id="__codelineno-0-5108" name="__codelineno-0-5108"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-5109" name="__codelineno-0-5109"></a>                <span class="s2">&quot;the nodata value stored in the raster does not exist in the raster &quot;</span>
<a id="__codelineno-0-5110" name="__codelineno-0-5110"></a>                <span class="s2">&quot;so either the raster extent is all full of data, or the no_data_value stored in the raster is&quot;</span>
<a id="__codelineno-0-5111" name="__codelineno-0-5111"></a>                <span class="s2">&quot; not correct&quot;</span>
<a id="__codelineno-0-5112" name="__codelineno-0-5112"></a>            <span class="p">)</span>
<a id="__codelineno-0-5113" name="__codelineno-0-5113"></a>    <span class="c1"># if you want to exclude_values any value in the raster</span>
<a id="__codelineno-0-5114" name="__codelineno-0-5114"></a>    <span class="k">if</span> <span class="n">exclude_values</span><span class="p">:</span>
<a id="__codelineno-0-5115" name="__codelineno-0-5115"></a>        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">exclude_values</span><span class="p">:</span>
<a id="__codelineno-0-5116" name="__codelineno-0-5116"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-5117" name="__codelineno-0-5117"></a>                <span class="c1"># in case the val2 is None, and the array is int type, the following line will give error as None</span>
<a id="__codelineno-0-5118" name="__codelineno-0-5118"></a>                <span class="c1"># is considered as float</span>
<a id="__codelineno-0-5119" name="__codelineno-0-5119"></a>                <span class="n">arr</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">val</span><span class="p">)]</span> <span class="o">=</span> <span class="n">no_data_val</span>
<a id="__codelineno-0-5120" name="__codelineno-0-5120"></a>            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
<a id="__codelineno-0-5121" name="__codelineno-0-5121"></a>                <span class="n">arr</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<a id="__codelineno-0-5122" name="__codelineno-0-5122"></a>                <span class="n">arr</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">val</span><span class="p">)]</span> <span class="o">=</span> <span class="n">no_data_val</span>
<a id="__codelineno-0-5123" name="__codelineno-0-5123"></a>
<a id="__codelineno-0-5124" name="__codelineno-0-5124"></a>    <span class="c1"># replace all the values with 2</span>
<a id="__codelineno-0-5125" name="__codelineno-0-5125"></a>    <span class="k">if</span> <span class="n">no_data_val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-5126" name="__codelineno-0-5126"></a>        <span class="c1"># check if the whole raster is full of no_data_value</span>
<a id="__codelineno-0-5127" name="__codelineno-0-5127"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">arr</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
<a id="__codelineno-0-5128" name="__codelineno-0-5128"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;the raster is full of no_data_value&quot;</span><span class="p">)</span>
<a id="__codelineno-0-5129" name="__codelineno-0-5129"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-5130" name="__codelineno-0-5130"></a>
<a id="__codelineno-0-5131" name="__codelineno-0-5131"></a>        <span class="n">arr</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">arr</span><span class="p">)]</span> <span class="o">=</span> <span class="mi">2</span>
<a id="__codelineno-0-5132" name="__codelineno-0-5132"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-5133" name="__codelineno-0-5133"></a>        <span class="c1"># check if the whole raster is full of no_data_value</span>
<a id="__codelineno-0-5134" name="__codelineno-0-5134"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">no_data_val</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.00001</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
<a id="__codelineno-0-5135" name="__codelineno-0-5135"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;the raster is full of no_data_value&quot;</span><span class="p">)</span>
<a id="__codelineno-0-5136" name="__codelineno-0-5136"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-5137" name="__codelineno-0-5137"></a>
<a id="__codelineno-0-5138" name="__codelineno-0-5138"></a>        <span class="n">arr</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">no_data_val</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">0.00001</span><span class="p">)]</span> <span class="o">=</span> <span class="mi">2</span>
<a id="__codelineno-0-5139" name="__codelineno-0-5139"></a>    <span class="n">new_dataset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span>
<a id="__codelineno-0-5140" name="__codelineno-0-5140"></a>        <span class="n">arr</span><span class="p">,</span> <span class="n">geo</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">geotransform</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">epsg</span><span class="p">,</span> <span class="n">no_data_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">no_data_value</span>
<a id="__codelineno-0-5141" name="__codelineno-0-5141"></a>    <span class="p">)</span>
<a id="__codelineno-0-5142" name="__codelineno-0-5142"></a>    <span class="c1"># then convert the raster into polygon</span>
<a id="__codelineno-0-5143" name="__codelineno-0-5143"></a>    <span class="n">gdf</span> <span class="o">=</span> <span class="n">new_dataset</span><span class="o">.</span><span class="n">cluster2</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-5144" name="__codelineno-0-5144"></a>    <span class="n">gdf</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Band_1&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_names</span><span class="p">[</span><span class="n">band</span><span class="p">]},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-5145" name="__codelineno-0-5145"></a>
<a id="__codelineno-0-5146" name="__codelineno-0-5146"></a>    <span class="k">return</span> <span class="n">gdf</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.normalize" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.normalize" class="toclink">
            <code class="highlight language-python"><span class="n">normalize</span><span class="p">(</span><span class="n">array</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</a><a href="#pyramids.dataset.Dataset.normalize" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Normalize numpy arrays into scale 0.01.0.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>array</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Numpy array to normalize.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>np.ndarray: Normalized array.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-5148">5148</a></span>
<span class="normal"><a href="#__codelineno-0-5149">5149</a></span>
<span class="normal"><a href="#__codelineno-0-5150">5150</a></span>
<span class="normal"><a href="#__codelineno-0-5151">5151</a></span>
<span class="normal"><a href="#__codelineno-0-5152">5152</a></span>
<span class="normal"><a href="#__codelineno-0-5153">5153</a></span>
<span class="normal"><a href="#__codelineno-0-5154">5154</a></span>
<span class="normal"><a href="#__codelineno-0-5155">5155</a></span>
<span class="normal"><a href="#__codelineno-0-5156">5156</a></span>
<span class="normal"><a href="#__codelineno-0-5157">5157</a></span>
<span class="normal"><a href="#__codelineno-0-5158">5158</a></span>
<span class="normal"><a href="#__codelineno-0-5159">5159</a></span>
<span class="normal"><a href="#__codelineno-0-5160">5160</a></span>
<span class="normal"><a href="#__codelineno-0-5161">5161</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-5148" name="__codelineno-0-5148"></a><span class="nd">@staticmethod</span>
<a id="__codelineno-0-5149" name="__codelineno-0-5149"></a><span class="k">def</span><span class="w"> </span><span class="nf">normalize</span><span class="p">(</span><span class="n">array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-5150" name="__codelineno-0-5150"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Normalize numpy arrays into scale 0.01.0.</span>
<a id="__codelineno-0-5151" name="__codelineno-0-5151"></a>
<a id="__codelineno-0-5152" name="__codelineno-0-5152"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-5153" name="__codelineno-0-5153"></a><span class="sd">        array (np.ndarray): Numpy array to normalize.</span>
<a id="__codelineno-0-5154" name="__codelineno-0-5154"></a>
<a id="__codelineno-0-5155" name="__codelineno-0-5155"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-5156" name="__codelineno-0-5156"></a><span class="sd">        np.ndarray: Normalized array.</span>
<a id="__codelineno-0-5157" name="__codelineno-0-5157"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-5158" name="__codelineno-0-5158"></a>    <span class="n">array_min</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
<a id="__codelineno-0-5159" name="__codelineno-0-5159"></a>    <span class="n">array_max</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<a id="__codelineno-0-5160" name="__codelineno-0-5160"></a>    <span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="n">array</span> <span class="o">-</span> <span class="n">array_min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">array_max</span> <span class="o">-</span> <span class="n">array_min</span><span class="p">)</span>
<a id="__codelineno-0-5161" name="__codelineno-0-5161"></a>    <span class="k">return</span> <span class="n">val</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.get_tile" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.get_tile" class="toclink">
            <code class="highlight language-python"><span class="n">get_tile</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">256</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.get_tile" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Get tile.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>size</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Size of the window in pixels. One value is required which is used for both the x and y size. e.g., 256
means a 256x256 window. Default is 256.</p>
              </div>
            </td>
            <td>
                  <code>256</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Yields:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>np.ndarray:
Dataset array with a shape <code>[band, y, x]</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>First, we will create a dataset with 3 rows and 5 columns.</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">0.05</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">5</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">4326</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">1</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">]</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">9999.0</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">float64</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>            <span class="n">File</span><span class="p">:</span><span class="o">...</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">read_array</span><span class="p">())</span>   <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="p">[[</span><span class="mf">0.55332314</span> <span class="mf">0.48364841</span> <span class="mf">0.67794589</span> <span class="mf">0.6901816</span>  <span class="mf">0.70516817</span><span class="p">]</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a> <span class="p">[</span><span class="mf">0.82518332</span> <span class="mf">0.75657103</span> <span class="mf">0.45693945</span> <span class="mf">0.44331782</span> <span class="mf">0.74677865</span><span class="p">]</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a> <span class="p">[</span><span class="mf">0.22231314</span> <span class="mf">0.96283065</span> <span class="mf">0.15201337</span> <span class="mf">0.03522544</span> <span class="mf">0.44616888</span><span class="p">]]</span>
</code></pre></div>
- The <code>get_tile</code> method splits the domain into tiles of the specified <code>size</code> using the <code>_window</code> function.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">tile_dimensions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">_window</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">tile_dimensions</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
</code></pre></div>
  <img alt="get_tile" src="../../_images/dataset/get_tile.png" /></p>
<ul>
<li>So the first two chunks are 2<em>2, 2</em>1 chunk, then two 1<em>2 chunks, and the last chunk is 1</em>1.</li>
<li>The <code>get_tile</code> method returns a generator object that can be used to iterate over the smaller chunks of
    the data.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">tiles_generator</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_tile</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">tiles_generator</span><span class="p">)</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="o">&lt;</span><span class="n">generator</span> <span class="nb">object</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">get_tile</span> <span class="n">at</span> <span class="mh">0x00000145AA39E680</span><span class="o">&gt;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">tiles_generator</span><span class="p">))</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="p">[</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>    <span class="n">array</span><span class="p">([[</span><span class="mf">0.55332314</span><span class="p">,</span> <span class="mf">0.48364841</span><span class="p">],</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>           <span class="p">[</span><span class="mf">0.82518332</span><span class="p">,</span> <span class="mf">0.75657103</span><span class="p">]]),</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>    <span class="n">array</span><span class="p">([[</span><span class="mf">0.67794589</span><span class="p">,</span> <span class="mf">0.6901816</span> <span class="p">],</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>           <span class="p">[</span><span class="mf">0.45693945</span><span class="p">,</span> <span class="mf">0.44331782</span><span class="p">]]),</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>    <span class="n">array</span><span class="p">([[</span><span class="mf">0.70516817</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.74677865</span><span class="p">]]),</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>    <span class="n">array</span><span class="p">([[</span><span class="mf">0.22231314</span><span class="p">,</span> <span class="mf">0.96283065</span><span class="p">]]),</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>    <span class="n">array</span><span class="p">([[</span><span class="mf">0.15201337</span><span class="p">,</span> <span class="mf">0.03522544</span><span class="p">]]),</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>    <span class="n">array</span><span class="p">([[</span><span class="mf">0.44616888</span><span class="p">]])</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="p">]</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-5203">5203</a></span>
<span class="normal"><a href="#__codelineno-0-5204">5204</a></span>
<span class="normal"><a href="#__codelineno-0-5205">5205</a></span>
<span class="normal"><a href="#__codelineno-0-5206">5206</a></span>
<span class="normal"><a href="#__codelineno-0-5207">5207</a></span>
<span class="normal"><a href="#__codelineno-0-5208">5208</a></span>
<span class="normal"><a href="#__codelineno-0-5209">5209</a></span>
<span class="normal"><a href="#__codelineno-0-5210">5210</a></span>
<span class="normal"><a href="#__codelineno-0-5211">5211</a></span>
<span class="normal"><a href="#__codelineno-0-5212">5212</a></span>
<span class="normal"><a href="#__codelineno-0-5213">5213</a></span>
<span class="normal"><a href="#__codelineno-0-5214">5214</a></span>
<span class="normal"><a href="#__codelineno-0-5215">5215</a></span>
<span class="normal"><a href="#__codelineno-0-5216">5216</a></span>
<span class="normal"><a href="#__codelineno-0-5217">5217</a></span>
<span class="normal"><a href="#__codelineno-0-5218">5218</a></span>
<span class="normal"><a href="#__codelineno-0-5219">5219</a></span>
<span class="normal"><a href="#__codelineno-0-5220">5220</a></span>
<span class="normal"><a href="#__codelineno-0-5221">5221</a></span>
<span class="normal"><a href="#__codelineno-0-5222">5222</a></span>
<span class="normal"><a href="#__codelineno-0-5223">5223</a></span>
<span class="normal"><a href="#__codelineno-0-5224">5224</a></span>
<span class="normal"><a href="#__codelineno-0-5225">5225</a></span>
<span class="normal"><a href="#__codelineno-0-5226">5226</a></span>
<span class="normal"><a href="#__codelineno-0-5227">5227</a></span>
<span class="normal"><a href="#__codelineno-0-5228">5228</a></span>
<span class="normal"><a href="#__codelineno-0-5229">5229</a></span>
<span class="normal"><a href="#__codelineno-0-5230">5230</a></span>
<span class="normal"><a href="#__codelineno-0-5231">5231</a></span>
<span class="normal"><a href="#__codelineno-0-5232">5232</a></span>
<span class="normal"><a href="#__codelineno-0-5233">5233</a></span>
<span class="normal"><a href="#__codelineno-0-5234">5234</a></span>
<span class="normal"><a href="#__codelineno-0-5235">5235</a></span>
<span class="normal"><a href="#__codelineno-0-5236">5236</a></span>
<span class="normal"><a href="#__codelineno-0-5237">5237</a></span>
<span class="normal"><a href="#__codelineno-0-5238">5238</a></span>
<span class="normal"><a href="#__codelineno-0-5239">5239</a></span>
<span class="normal"><a href="#__codelineno-0-5240">5240</a></span>
<span class="normal"><a href="#__codelineno-0-5241">5241</a></span>
<span class="normal"><a href="#__codelineno-0-5242">5242</a></span>
<span class="normal"><a href="#__codelineno-0-5243">5243</a></span>
<span class="normal"><a href="#__codelineno-0-5244">5244</a></span>
<span class="normal"><a href="#__codelineno-0-5245">5245</a></span>
<span class="normal"><a href="#__codelineno-0-5246">5246</a></span>
<span class="normal"><a href="#__codelineno-0-5247">5247</a></span>
<span class="normal"><a href="#__codelineno-0-5248">5248</a></span>
<span class="normal"><a href="#__codelineno-0-5249">5249</a></span>
<span class="normal"><a href="#__codelineno-0-5250">5250</a></span>
<span class="normal"><a href="#__codelineno-0-5251">5251</a></span>
<span class="normal"><a href="#__codelineno-0-5252">5252</a></span>
<span class="normal"><a href="#__codelineno-0-5253">5253</a></span>
<span class="normal"><a href="#__codelineno-0-5254">5254</a></span>
<span class="normal"><a href="#__codelineno-0-5255">5255</a></span>
<span class="normal"><a href="#__codelineno-0-5256">5256</a></span>
<span class="normal"><a href="#__codelineno-0-5257">5257</a></span>
<span class="normal"><a href="#__codelineno-0-5258">5258</a></span>
<span class="normal"><a href="#__codelineno-0-5259">5259</a></span>
<span class="normal"><a href="#__codelineno-0-5260">5260</a></span>
<span class="normal"><a href="#__codelineno-0-5261">5261</a></span>
<span class="normal"><a href="#__codelineno-0-5262">5262</a></span>
<span class="normal"><a href="#__codelineno-0-5263">5263</a></span>
<span class="normal"><a href="#__codelineno-0-5264">5264</a></span>
<span class="normal"><a href="#__codelineno-0-5265">5265</a></span>
<span class="normal"><a href="#__codelineno-0-5266">5266</a></span>
<span class="normal"><a href="#__codelineno-0-5267">5267</a></span>
<span class="normal"><a href="#__codelineno-0-5268">5268</a></span>
<span class="normal"><a href="#__codelineno-0-5269">5269</a></span>
<span class="normal"><a href="#__codelineno-0-5270">5270</a></span>
<span class="normal"><a href="#__codelineno-0-5271">5271</a></span>
<span class="normal"><a href="#__codelineno-0-5272">5272</a></span>
<span class="normal"><a href="#__codelineno-0-5273">5273</a></span>
<span class="normal"><a href="#__codelineno-0-5274">5274</a></span>
<span class="normal"><a href="#__codelineno-0-5275">5275</a></span>
<span class="normal"><a href="#__codelineno-0-5276">5276</a></span>
<span class="normal"><a href="#__codelineno-0-5277">5277</a></span>
<span class="normal"><a href="#__codelineno-0-5278">5278</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-5203" name="__codelineno-0-5203"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_tile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">256</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<a id="__codelineno-0-5204" name="__codelineno-0-5204"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get tile.</span>
<a id="__codelineno-0-5205" name="__codelineno-0-5205"></a>
<a id="__codelineno-0-5206" name="__codelineno-0-5206"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-5207" name="__codelineno-0-5207"></a><span class="sd">        size (int):</span>
<a id="__codelineno-0-5208" name="__codelineno-0-5208"></a><span class="sd">            Size of the window in pixels. One value is required which is used for both the x and y size. e.g., 256</span>
<a id="__codelineno-0-5209" name="__codelineno-0-5209"></a><span class="sd">            means a 256x256 window. Default is 256.</span>
<a id="__codelineno-0-5210" name="__codelineno-0-5210"></a>
<a id="__codelineno-0-5211" name="__codelineno-0-5211"></a><span class="sd">    Yields:</span>
<a id="__codelineno-0-5212" name="__codelineno-0-5212"></a><span class="sd">        np.ndarray:</span>
<a id="__codelineno-0-5213" name="__codelineno-0-5213"></a><span class="sd">            Dataset array with a shape `[band, y, x]`.</span>
<a id="__codelineno-0-5214" name="__codelineno-0-5214"></a>
<a id="__codelineno-0-5215" name="__codelineno-0-5215"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-5216" name="__codelineno-0-5216"></a><span class="sd">        - First, we will create a dataset with 3 rows and 5 columns.</span>
<a id="__codelineno-0-5217" name="__codelineno-0-5217"></a>
<a id="__codelineno-0-5218" name="__codelineno-0-5218"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5219" name="__codelineno-0-5219"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-5220" name="__codelineno-0-5220"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.rand(3, 5)</span>
<a id="__codelineno-0-5221" name="__codelineno-0-5221"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-5222" name="__codelineno-0-5222"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-5223" name="__codelineno-0-5223"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-5224" name="__codelineno-0-5224"></a><span class="sd">          &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-5225" name="__codelineno-0-5225"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-5226" name="__codelineno-0-5226"></a><span class="sd">                      Cell size: 0.05</span>
<a id="__codelineno-0-5227" name="__codelineno-0-5227"></a><span class="sd">                      Dimension: 3 * 5</span>
<a id="__codelineno-0-5228" name="__codelineno-0-5228"></a><span class="sd">                      EPSG: 4326</span>
<a id="__codelineno-0-5229" name="__codelineno-0-5229"></a><span class="sd">                      Number of Bands: 1</span>
<a id="__codelineno-0-5230" name="__codelineno-0-5230"></a><span class="sd">                      Band names: [&#39;Band_1&#39;]</span>
<a id="__codelineno-0-5231" name="__codelineno-0-5231"></a><span class="sd">                      Mask: -9999.0</span>
<a id="__codelineno-0-5232" name="__codelineno-0-5232"></a><span class="sd">                      Data type: float64</span>
<a id="__codelineno-0-5233" name="__codelineno-0-5233"></a><span class="sd">                      File:...</span>
<a id="__codelineno-0-5234" name="__codelineno-0-5234"></a><span class="sd">          &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-5235" name="__codelineno-0-5235"></a>
<a id="__codelineno-0-5236" name="__codelineno-0-5236"></a><span class="sd">          &gt;&gt;&gt; print(dataset.read_array())   # doctest: +SKIP</span>
<a id="__codelineno-0-5237" name="__codelineno-0-5237"></a><span class="sd">          [[0.55332314 0.48364841 0.67794589 0.6901816  0.70516817]</span>
<a id="__codelineno-0-5238" name="__codelineno-0-5238"></a><span class="sd">           [0.82518332 0.75657103 0.45693945 0.44331782 0.74677865]</span>
<a id="__codelineno-0-5239" name="__codelineno-0-5239"></a><span class="sd">           [0.22231314 0.96283065 0.15201337 0.03522544 0.44616888]]</span>
<a id="__codelineno-0-5240" name="__codelineno-0-5240"></a>
<a id="__codelineno-0-5241" name="__codelineno-0-5241"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5242" name="__codelineno-0-5242"></a><span class="sd">        - The `get_tile` method splits the domain into tiles of the specified `size` using the `_window` function.</span>
<a id="__codelineno-0-5243" name="__codelineno-0-5243"></a>
<a id="__codelineno-0-5244" name="__codelineno-0-5244"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5245" name="__codelineno-0-5245"></a><span class="sd">          &gt;&gt;&gt; tile_dimensions = list(dataset._window(2))</span>
<a id="__codelineno-0-5246" name="__codelineno-0-5246"></a><span class="sd">          &gt;&gt;&gt; print(tile_dimensions)</span>
<a id="__codelineno-0-5247" name="__codelineno-0-5247"></a><span class="sd">          [(0, 0, 2, 2), (2, 0, 2, 2), (4, 0, 1, 2), (0, 2, 2, 1), (2, 2, 2, 1), (4, 2, 1, 1)]</span>
<a id="__codelineno-0-5248" name="__codelineno-0-5248"></a>
<a id="__codelineno-0-5249" name="__codelineno-0-5249"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5250" name="__codelineno-0-5250"></a><span class="sd">          ![get_tile](./../_images/dataset/get_tile.png)</span>
<a id="__codelineno-0-5251" name="__codelineno-0-5251"></a>
<a id="__codelineno-0-5252" name="__codelineno-0-5252"></a><span class="sd">        - So the first two chunks are 2*2, 2*1 chunk, then two 1*2 chunks, and the last chunk is 1*1.</span>
<a id="__codelineno-0-5253" name="__codelineno-0-5253"></a><span class="sd">        - The `get_tile` method returns a generator object that can be used to iterate over the smaller chunks of</span>
<a id="__codelineno-0-5254" name="__codelineno-0-5254"></a><span class="sd">            the data.</span>
<a id="__codelineno-0-5255" name="__codelineno-0-5255"></a>
<a id="__codelineno-0-5256" name="__codelineno-0-5256"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5257" name="__codelineno-0-5257"></a><span class="sd">          &gt;&gt;&gt; tiles_generator = dataset.get_tile(size=2)</span>
<a id="__codelineno-0-5258" name="__codelineno-0-5258"></a><span class="sd">          &gt;&gt;&gt; print(tiles_generator)  # doctest: +SKIP</span>
<a id="__codelineno-0-5259" name="__codelineno-0-5259"></a><span class="sd">          &lt;generator object Dataset.get_tile at 0x00000145AA39E680&gt;</span>
<a id="__codelineno-0-5260" name="__codelineno-0-5260"></a><span class="sd">          &gt;&gt;&gt; print(list(tiles_generator))  # doctest: +SKIP</span>
<a id="__codelineno-0-5261" name="__codelineno-0-5261"></a><span class="sd">          [</span>
<a id="__codelineno-0-5262" name="__codelineno-0-5262"></a><span class="sd">              array([[0.55332314, 0.48364841],</span>
<a id="__codelineno-0-5263" name="__codelineno-0-5263"></a><span class="sd">                     [0.82518332, 0.75657103]]),</span>
<a id="__codelineno-0-5264" name="__codelineno-0-5264"></a><span class="sd">              array([[0.67794589, 0.6901816 ],</span>
<a id="__codelineno-0-5265" name="__codelineno-0-5265"></a><span class="sd">                     [0.45693945, 0.44331782]]),</span>
<a id="__codelineno-0-5266" name="__codelineno-0-5266"></a><span class="sd">              array([[0.70516817], [0.74677865]]),</span>
<a id="__codelineno-0-5267" name="__codelineno-0-5267"></a><span class="sd">              array([[0.22231314, 0.96283065]]),</span>
<a id="__codelineno-0-5268" name="__codelineno-0-5268"></a><span class="sd">              array([[0.15201337, 0.03522544]]),</span>
<a id="__codelineno-0-5269" name="__codelineno-0-5269"></a><span class="sd">              array([[0.44616888]])</span>
<a id="__codelineno-0-5270" name="__codelineno-0-5270"></a><span class="sd">          ]</span>
<a id="__codelineno-0-5271" name="__codelineno-0-5271"></a>
<a id="__codelineno-0-5272" name="__codelineno-0-5272"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5273" name="__codelineno-0-5273"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-5274" name="__codelineno-0-5274"></a>    <span class="k">for</span> <span class="n">xoff</span><span class="p">,</span> <span class="n">yoff</span><span class="p">,</span> <span class="n">xsize</span><span class="p">,</span> <span class="n">ysize</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">):</span>
<a id="__codelineno-0-5275" name="__codelineno-0-5275"></a>        <span class="c1"># read the array at certain indices</span>
<a id="__codelineno-0-5276" name="__codelineno-0-5276"></a>        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">(</span>
<a id="__codelineno-0-5277" name="__codelineno-0-5277"></a>            <span class="n">xoff</span><span class="o">=</span><span class="n">xoff</span><span class="p">,</span> <span class="n">yoff</span><span class="o">=</span><span class="n">yoff</span><span class="p">,</span> <span class="n">xsize</span><span class="o">=</span><span class="n">xsize</span><span class="p">,</span> <span class="n">ysize</span><span class="o">=</span><span class="n">ysize</span>
<a id="__codelineno-0-5278" name="__codelineno-0-5278"></a>        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.cluster" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.cluster" class="toclink">
            <code class="highlight language-python"><span class="n">cluster</span><span class="p">(</span><span class="n">lower_bound</span><span class="p">,</span> <span class="n">upper_bound</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.cluster" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Group all the connected values between two bounds.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lower_bound</code>
            </td>
            <td>
                  <code><span title="numbers.Number">Number</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Lower bound of the cluster.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>upper_bound</code>
            </td>
            <td>
                  <code><span title="numbers.Number">Number</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Upper bound of the cluster.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="numpy.ndarray">ndarray</span>, <span title="int">int</span>, <span title="list">list</span>, <span title="list">list</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[np.ndarray, int, list, list]:
- cluster (np.ndarray):
    Array with integers representing the cluster number per cell.
- count (int):
    Number of clusters in the array.
- position (list[list[int, int]]):
    List of [row, col] indices for the position of each value.
- values (list[Number]):
    Values stored in each cell in the cluster.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>First, we will create a dataset with 10 rows and 10 columns.</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="p">[[</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a> <span class="p">[</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a> <span class="p">[</span><span class="mi">1</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">]</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a> <span class="p">[</span><span class="mi">4</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">2</span><span class="p">]</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a> <span class="p">[</span><span class="mi">2</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">2</span><span class="p">]]</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="o">...</span>     <span class="n">color_scale</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.9</span><span class="p">,</span> <span class="mf">4.1</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">display_cell_value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">num_size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="o">...</span>     <span class="n">background_color_threshold</span><span class="o">=</span><span class="mi">5</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="o">...</span> <span class="p">)</span>  <span class="c1"># doctest: +SKIP</span>
</code></pre></div>
  <img alt="cluster" src="../../_images/dataset/cluster.png" /></p>
<ul>
<li>Now let's cluster the values in the dataset that are between 2 and 4.</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">lower_value</span> <span class="o">=</span> <span class="mi">2</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">upper_value</span> <span class="o">=</span> <span class="mi">4</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cluster_array</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">cluster</span><span class="p">(</span><span class="n">lower_value</span><span class="p">,</span> <span class="n">upper_value</span><span class="p">)</span>
</code></pre></div>
- The first returned output is a binary array with 1 indicating that the cell value is inside the cluster, and 0 is outside.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">cluster_array</span><span class="p">)</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="p">[[</span><span class="mf">1.</span> <span class="mf">1.</span> <span class="mf">1.</span> <span class="mf">1.</span> <span class="mf">1.</span><span class="p">]</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a> <span class="p">[</span><span class="mf">1.</span> <span class="mf">1.</span> <span class="mf">0.</span> <span class="mf">0.</span> <span class="mf">0.</span><span class="p">]</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a> <span class="p">[</span><span class="mf">0.</span> <span class="mf">1.</span> <span class="mf">1.</span> <span class="mf">1.</span> <span class="mf">1.</span><span class="p">]</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a> <span class="p">[</span><span class="mf">1.</span> <span class="mf">0.</span> <span class="mf">0.</span> <span class="mf">1.</span> <span class="mf">1.</span><span class="p">]</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a> <span class="p">[</span><span class="mf">1.</span> <span class="mf">1.</span> <span class="mf">1.</span> <span class="mf">1.</span> <span class="mf">1.</span><span class="p">]]</span>
</code></pre></div>
- The second returned value is the number of connected clusters.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="mi">2</span>
</code></pre></div>
- The third returned value is the indices of the cells that belong to the cluster.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
</code></pre></div>
- The fourth returned value is a list of the values that are in the cluster (extracted from these cells).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-5443">5443</a></span>
<span class="normal"><a href="#__codelineno-0-5444">5444</a></span>
<span class="normal"><a href="#__codelineno-0-5445">5445</a></span>
<span class="normal"><a href="#__codelineno-0-5446">5446</a></span>
<span class="normal"><a href="#__codelineno-0-5447">5447</a></span>
<span class="normal"><a href="#__codelineno-0-5448">5448</a></span>
<span class="normal"><a href="#__codelineno-0-5449">5449</a></span>
<span class="normal"><a href="#__codelineno-0-5450">5450</a></span>
<span class="normal"><a href="#__codelineno-0-5451">5451</a></span>
<span class="normal"><a href="#__codelineno-0-5452">5452</a></span>
<span class="normal"><a href="#__codelineno-0-5453">5453</a></span>
<span class="normal"><a href="#__codelineno-0-5454">5454</a></span>
<span class="normal"><a href="#__codelineno-0-5455">5455</a></span>
<span class="normal"><a href="#__codelineno-0-5456">5456</a></span>
<span class="normal"><a href="#__codelineno-0-5457">5457</a></span>
<span class="normal"><a href="#__codelineno-0-5458">5458</a></span>
<span class="normal"><a href="#__codelineno-0-5459">5459</a></span>
<span class="normal"><a href="#__codelineno-0-5460">5460</a></span>
<span class="normal"><a href="#__codelineno-0-5461">5461</a></span>
<span class="normal"><a href="#__codelineno-0-5462">5462</a></span>
<span class="normal"><a href="#__codelineno-0-5463">5463</a></span>
<span class="normal"><a href="#__codelineno-0-5464">5464</a></span>
<span class="normal"><a href="#__codelineno-0-5465">5465</a></span>
<span class="normal"><a href="#__codelineno-0-5466">5466</a></span>
<span class="normal"><a href="#__codelineno-0-5467">5467</a></span>
<span class="normal"><a href="#__codelineno-0-5468">5468</a></span>
<span class="normal"><a href="#__codelineno-0-5469">5469</a></span>
<span class="normal"><a href="#__codelineno-0-5470">5470</a></span>
<span class="normal"><a href="#__codelineno-0-5471">5471</a></span>
<span class="normal"><a href="#__codelineno-0-5472">5472</a></span>
<span class="normal"><a href="#__codelineno-0-5473">5473</a></span>
<span class="normal"><a href="#__codelineno-0-5474">5474</a></span>
<span class="normal"><a href="#__codelineno-0-5475">5475</a></span>
<span class="normal"><a href="#__codelineno-0-5476">5476</a></span>
<span class="normal"><a href="#__codelineno-0-5477">5477</a></span>
<span class="normal"><a href="#__codelineno-0-5478">5478</a></span>
<span class="normal"><a href="#__codelineno-0-5479">5479</a></span>
<span class="normal"><a href="#__codelineno-0-5480">5480</a></span>
<span class="normal"><a href="#__codelineno-0-5481">5481</a></span>
<span class="normal"><a href="#__codelineno-0-5482">5482</a></span>
<span class="normal"><a href="#__codelineno-0-5483">5483</a></span>
<span class="normal"><a href="#__codelineno-0-5484">5484</a></span>
<span class="normal"><a href="#__codelineno-0-5485">5485</a></span>
<span class="normal"><a href="#__codelineno-0-5486">5486</a></span>
<span class="normal"><a href="#__codelineno-0-5487">5487</a></span>
<span class="normal"><a href="#__codelineno-0-5488">5488</a></span>
<span class="normal"><a href="#__codelineno-0-5489">5489</a></span>
<span class="normal"><a href="#__codelineno-0-5490">5490</a></span>
<span class="normal"><a href="#__codelineno-0-5491">5491</a></span>
<span class="normal"><a href="#__codelineno-0-5492">5492</a></span>
<span class="normal"><a href="#__codelineno-0-5493">5493</a></span>
<span class="normal"><a href="#__codelineno-0-5494">5494</a></span>
<span class="normal"><a href="#__codelineno-0-5495">5495</a></span>
<span class="normal"><a href="#__codelineno-0-5496">5496</a></span>
<span class="normal"><a href="#__codelineno-0-5497">5497</a></span>
<span class="normal"><a href="#__codelineno-0-5498">5498</a></span>
<span class="normal"><a href="#__codelineno-0-5499">5499</a></span>
<span class="normal"><a href="#__codelineno-0-5500">5500</a></span>
<span class="normal"><a href="#__codelineno-0-5501">5501</a></span>
<span class="normal"><a href="#__codelineno-0-5502">5502</a></span>
<span class="normal"><a href="#__codelineno-0-5503">5503</a></span>
<span class="normal"><a href="#__codelineno-0-5504">5504</a></span>
<span class="normal"><a href="#__codelineno-0-5505">5505</a></span>
<span class="normal"><a href="#__codelineno-0-5506">5506</a></span>
<span class="normal"><a href="#__codelineno-0-5507">5507</a></span>
<span class="normal"><a href="#__codelineno-0-5508">5508</a></span>
<span class="normal"><a href="#__codelineno-0-5509">5509</a></span>
<span class="normal"><a href="#__codelineno-0-5510">5510</a></span>
<span class="normal"><a href="#__codelineno-0-5511">5511</a></span>
<span class="normal"><a href="#__codelineno-0-5512">5512</a></span>
<span class="normal"><a href="#__codelineno-0-5513">5513</a></span>
<span class="normal"><a href="#__codelineno-0-5514">5514</a></span>
<span class="normal"><a href="#__codelineno-0-5515">5515</a></span>
<span class="normal"><a href="#__codelineno-0-5516">5516</a></span>
<span class="normal"><a href="#__codelineno-0-5517">5517</a></span>
<span class="normal"><a href="#__codelineno-0-5518">5518</a></span>
<span class="normal"><a href="#__codelineno-0-5519">5519</a></span>
<span class="normal"><a href="#__codelineno-0-5520">5520</a></span>
<span class="normal"><a href="#__codelineno-0-5521">5521</a></span>
<span class="normal"><a href="#__codelineno-0-5522">5522</a></span>
<span class="normal"><a href="#__codelineno-0-5523">5523</a></span>
<span class="normal"><a href="#__codelineno-0-5524">5524</a></span>
<span class="normal"><a href="#__codelineno-0-5525">5525</a></span>
<span class="normal"><a href="#__codelineno-0-5526">5526</a></span>
<span class="normal"><a href="#__codelineno-0-5527">5527</a></span>
<span class="normal"><a href="#__codelineno-0-5528">5528</a></span>
<span class="normal"><a href="#__codelineno-0-5529">5529</a></span>
<span class="normal"><a href="#__codelineno-0-5530">5530</a></span>
<span class="normal"><a href="#__codelineno-0-5531">5531</a></span>
<span class="normal"><a href="#__codelineno-0-5532">5532</a></span>
<span class="normal"><a href="#__codelineno-0-5533">5533</a></span>
<span class="normal"><a href="#__codelineno-0-5534">5534</a></span>
<span class="normal"><a href="#__codelineno-0-5535">5535</a></span>
<span class="normal"><a href="#__codelineno-0-5536">5536</a></span>
<span class="normal"><a href="#__codelineno-0-5537">5537</a></span>
<span class="normal"><a href="#__codelineno-0-5538">5538</a></span>
<span class="normal"><a href="#__codelineno-0-5539">5539</a></span>
<span class="normal"><a href="#__codelineno-0-5540">5540</a></span>
<span class="normal"><a href="#__codelineno-0-5541">5541</a></span>
<span class="normal"><a href="#__codelineno-0-5542">5542</a></span>
<span class="normal"><a href="#__codelineno-0-5543">5543</a></span>
<span class="normal"><a href="#__codelineno-0-5544">5544</a></span>
<span class="normal"><a href="#__codelineno-0-5545">5545</a></span>
<span class="normal"><a href="#__codelineno-0-5546">5546</a></span>
<span class="normal"><a href="#__codelineno-0-5547">5547</a></span>
<span class="normal"><a href="#__codelineno-0-5548">5548</a></span>
<span class="normal"><a href="#__codelineno-0-5549">5549</a></span>
<span class="normal"><a href="#__codelineno-0-5550">5550</a></span>
<span class="normal"><a href="#__codelineno-0-5551">5551</a></span>
<span class="normal"><a href="#__codelineno-0-5552">5552</a></span>
<span class="normal"><a href="#__codelineno-0-5553">5553</a></span>
<span class="normal"><a href="#__codelineno-0-5554">5554</a></span>
<span class="normal"><a href="#__codelineno-0-5555">5555</a></span>
<span class="normal"><a href="#__codelineno-0-5556">5556</a></span>
<span class="normal"><a href="#__codelineno-0-5557">5557</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-5443" name="__codelineno-0-5443"></a><span class="k">def</span><span class="w"> </span><span class="nf">cluster</span><span class="p">(</span>
<a id="__codelineno-0-5444" name="__codelineno-0-5444"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">lower_bound</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">upper_bound</span><span class="p">:</span> <span class="n">Any</span>
<a id="__codelineno-0-5445" name="__codelineno-0-5445"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
<a id="__codelineno-0-5446" name="__codelineno-0-5446"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Group all the connected values between two bounds.</span>
<a id="__codelineno-0-5447" name="__codelineno-0-5447"></a>
<a id="__codelineno-0-5448" name="__codelineno-0-5448"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-5449" name="__codelineno-0-5449"></a><span class="sd">        lower_bound (Number):</span>
<a id="__codelineno-0-5450" name="__codelineno-0-5450"></a><span class="sd">            Lower bound of the cluster.</span>
<a id="__codelineno-0-5451" name="__codelineno-0-5451"></a><span class="sd">        upper_bound (Number):</span>
<a id="__codelineno-0-5452" name="__codelineno-0-5452"></a><span class="sd">            Upper bound of the cluster.</span>
<a id="__codelineno-0-5453" name="__codelineno-0-5453"></a>
<a id="__codelineno-0-5454" name="__codelineno-0-5454"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-5455" name="__codelineno-0-5455"></a><span class="sd">        tuple[np.ndarray, int, list, list]:</span>
<a id="__codelineno-0-5456" name="__codelineno-0-5456"></a><span class="sd">            - cluster (np.ndarray):</span>
<a id="__codelineno-0-5457" name="__codelineno-0-5457"></a><span class="sd">                Array with integers representing the cluster number per cell.</span>
<a id="__codelineno-0-5458" name="__codelineno-0-5458"></a><span class="sd">            - count (int):</span>
<a id="__codelineno-0-5459" name="__codelineno-0-5459"></a><span class="sd">                Number of clusters in the array.</span>
<a id="__codelineno-0-5460" name="__codelineno-0-5460"></a><span class="sd">            - position (list[list[int, int]]):</span>
<a id="__codelineno-0-5461" name="__codelineno-0-5461"></a><span class="sd">                List of [row, col] indices for the position of each value.</span>
<a id="__codelineno-0-5462" name="__codelineno-0-5462"></a><span class="sd">            - values (list[Number]):</span>
<a id="__codelineno-0-5463" name="__codelineno-0-5463"></a><span class="sd">                Values stored in each cell in the cluster.</span>
<a id="__codelineno-0-5464" name="__codelineno-0-5464"></a>
<a id="__codelineno-0-5465" name="__codelineno-0-5465"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-5466" name="__codelineno-0-5466"></a><span class="sd">        - First, we will create a dataset with 10 rows and 10 columns.</span>
<a id="__codelineno-0-5467" name="__codelineno-0-5467"></a>
<a id="__codelineno-0-5468" name="__codelineno-0-5468"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5469" name="__codelineno-0-5469"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-5470" name="__codelineno-0-5470"></a><span class="sd">          &gt;&gt;&gt; np.random.seed(10)</span>
<a id="__codelineno-0-5471" name="__codelineno-0-5471"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.randint(1, 5, size=(5, 5))</span>
<a id="__codelineno-0-5472" name="__codelineno-0-5472"></a><span class="sd">          &gt;&gt;&gt; print(arr) # doctest: +SKIP</span>
<a id="__codelineno-0-5473" name="__codelineno-0-5473"></a><span class="sd">          [[2 3 3 2 3]</span>
<a id="__codelineno-0-5474" name="__codelineno-0-5474"></a><span class="sd">           [3 4 1 1 1]</span>
<a id="__codelineno-0-5475" name="__codelineno-0-5475"></a><span class="sd">           [1 3 3 2 2]</span>
<a id="__codelineno-0-5476" name="__codelineno-0-5476"></a><span class="sd">           [4 1 1 3 2]</span>
<a id="__codelineno-0-5477" name="__codelineno-0-5477"></a><span class="sd">           [2 4 2 3 2]]</span>
<a id="__codelineno-0-5478" name="__codelineno-0-5478"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-5479" name="__codelineno-0-5479"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-5480" name="__codelineno-0-5480"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-5481" name="__codelineno-0-5481"></a><span class="sd">          &gt;&gt;&gt; dataset.plot(</span>
<a id="__codelineno-0-5482" name="__codelineno-0-5482"></a><span class="sd">          ...     color_scale=4, bounds=[1, 1.9, 4.1, 5], display_cell_value=True, num_size=12,</span>
<a id="__codelineno-0-5483" name="__codelineno-0-5483"></a><span class="sd">          ...     background_color_threshold=5</span>
<a id="__codelineno-0-5484" name="__codelineno-0-5484"></a><span class="sd">          ... )  # doctest: +SKIP</span>
<a id="__codelineno-0-5485" name="__codelineno-0-5485"></a>
<a id="__codelineno-0-5486" name="__codelineno-0-5486"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5487" name="__codelineno-0-5487"></a><span class="sd">          ![cluster](./../_images/dataset/cluster.png)</span>
<a id="__codelineno-0-5488" name="__codelineno-0-5488"></a>
<a id="__codelineno-0-5489" name="__codelineno-0-5489"></a><span class="sd">        - Now let&#39;s cluster the values in the dataset that are between 2 and 4.</span>
<a id="__codelineno-0-5490" name="__codelineno-0-5490"></a>
<a id="__codelineno-0-5491" name="__codelineno-0-5491"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5492" name="__codelineno-0-5492"></a><span class="sd">          &gt;&gt;&gt; lower_value = 2</span>
<a id="__codelineno-0-5493" name="__codelineno-0-5493"></a><span class="sd">          &gt;&gt;&gt; upper_value = 4</span>
<a id="__codelineno-0-5494" name="__codelineno-0-5494"></a><span class="sd">          &gt;&gt;&gt; cluster_array, count, position, values = dataset.cluster(lower_value, upper_value)</span>
<a id="__codelineno-0-5495" name="__codelineno-0-5495"></a>
<a id="__codelineno-0-5496" name="__codelineno-0-5496"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5497" name="__codelineno-0-5497"></a><span class="sd">        - The first returned output is a binary array with 1 indicating that the cell value is inside the cluster, and 0 is outside.</span>
<a id="__codelineno-0-5498" name="__codelineno-0-5498"></a>
<a id="__codelineno-0-5499" name="__codelineno-0-5499"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5500" name="__codelineno-0-5500"></a><span class="sd">          &gt;&gt;&gt; print(cluster_array)  # doctest: +SKIP</span>
<a id="__codelineno-0-5501" name="__codelineno-0-5501"></a><span class="sd">          [[1. 1. 1. 1. 1.]</span>
<a id="__codelineno-0-5502" name="__codelineno-0-5502"></a><span class="sd">           [1. 1. 0. 0. 0.]</span>
<a id="__codelineno-0-5503" name="__codelineno-0-5503"></a><span class="sd">           [0. 1. 1. 1. 1.]</span>
<a id="__codelineno-0-5504" name="__codelineno-0-5504"></a><span class="sd">           [1. 0. 0. 1. 1.]</span>
<a id="__codelineno-0-5505" name="__codelineno-0-5505"></a><span class="sd">           [1. 1. 1. 1. 1.]]</span>
<a id="__codelineno-0-5506" name="__codelineno-0-5506"></a>
<a id="__codelineno-0-5507" name="__codelineno-0-5507"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5508" name="__codelineno-0-5508"></a><span class="sd">        - The second returned value is the number of connected clusters.</span>
<a id="__codelineno-0-5509" name="__codelineno-0-5509"></a>
<a id="__codelineno-0-5510" name="__codelineno-0-5510"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5511" name="__codelineno-0-5511"></a><span class="sd">          &gt;&gt;&gt; print(count) # doctest: +SKIP</span>
<a id="__codelineno-0-5512" name="__codelineno-0-5512"></a><span class="sd">          2</span>
<a id="__codelineno-0-5513" name="__codelineno-0-5513"></a>
<a id="__codelineno-0-5514" name="__codelineno-0-5514"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5515" name="__codelineno-0-5515"></a><span class="sd">        - The third returned value is the indices of the cells that belong to the cluster.</span>
<a id="__codelineno-0-5516" name="__codelineno-0-5516"></a>
<a id="__codelineno-0-5517" name="__codelineno-0-5517"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5518" name="__codelineno-0-5518"></a><span class="sd">          &gt;&gt;&gt; print(position) # doctest: +SKIP</span>
<a id="__codelineno-0-5519" name="__codelineno-0-5519"></a><span class="sd">          [[1, 0], [2, 1], [2, 2], [3, 3], [4, 3], [4, 4], [3, 4], [2, 4], [2, 3], [4, 2], [4, 1], [3, 0], [4, 0], [1, 1], [0, 2], [0, 3], [0, 4], [0, 1], [0, 0]]</span>
<a id="__codelineno-0-5520" name="__codelineno-0-5520"></a>
<a id="__codelineno-0-5521" name="__codelineno-0-5521"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5522" name="__codelineno-0-5522"></a><span class="sd">        - The fourth returned value is a list of the values that are in the cluster (extracted from these cells).</span>
<a id="__codelineno-0-5523" name="__codelineno-0-5523"></a>
<a id="__codelineno-0-5524" name="__codelineno-0-5524"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5525" name="__codelineno-0-5525"></a><span class="sd">          &gt;&gt;&gt; print(values) # doctest: +SKIP</span>
<a id="__codelineno-0-5526" name="__codelineno-0-5526"></a><span class="sd">          [3, 3, 3, 3, 3, 2, 2, 2, 2, 2, 4, 4, 2, 4, 3, 2, 3, 3, 2]</span>
<a id="__codelineno-0-5527" name="__codelineno-0-5527"></a>
<a id="__codelineno-0-5528" name="__codelineno-0-5528"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5529" name="__codelineno-0-5529"></a>
<a id="__codelineno-0-5530" name="__codelineno-0-5530"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-5531" name="__codelineno-0-5531"></a>    <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_array</span><span class="p">()</span>
<a id="__codelineno-0-5532" name="__codelineno-0-5532"></a>    <span class="n">position</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-5533" name="__codelineno-0-5533"></a>    <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-5534" name="__codelineno-0-5534"></a>    <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-5535" name="__codelineno-0-5535"></a>    <span class="n">cluster</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
<a id="__codelineno-0-5536" name="__codelineno-0-5536"></a>
<a id="__codelineno-0-5537" name="__codelineno-0-5537"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
<a id="__codelineno-0-5538" name="__codelineno-0-5538"></a>        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
<a id="__codelineno-0-5539" name="__codelineno-0-5539"></a>            <span class="k">if</span> <span class="n">lower_bound</span> <span class="o">&lt;=</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">upper_bound</span> <span class="ow">and</span> <span class="n">cluster</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5540" name="__codelineno-0-5540"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_group_neighbours</span><span class="p">(</span>
<a id="__codelineno-0-5541" name="__codelineno-0-5541"></a>                    <span class="n">data</span><span class="p">,</span>
<a id="__codelineno-0-5542" name="__codelineno-0-5542"></a>                    <span class="n">i</span><span class="p">,</span>
<a id="__codelineno-0-5543" name="__codelineno-0-5543"></a>                    <span class="n">j</span><span class="p">,</span>
<a id="__codelineno-0-5544" name="__codelineno-0-5544"></a>                    <span class="n">lower_bound</span><span class="p">,</span>
<a id="__codelineno-0-5545" name="__codelineno-0-5545"></a>                    <span class="n">upper_bound</span><span class="p">,</span>
<a id="__codelineno-0-5546" name="__codelineno-0-5546"></a>                    <span class="n">position</span><span class="p">,</span>
<a id="__codelineno-0-5547" name="__codelineno-0-5547"></a>                    <span class="n">values</span><span class="p">,</span>
<a id="__codelineno-0-5548" name="__codelineno-0-5548"></a>                    <span class="n">count</span><span class="p">,</span>
<a id="__codelineno-0-5549" name="__codelineno-0-5549"></a>                    <span class="n">cluster</span><span class="p">,</span>
<a id="__codelineno-0-5550" name="__codelineno-0-5550"></a>                <span class="p">)</span>
<a id="__codelineno-0-5551" name="__codelineno-0-5551"></a>                <span class="k">if</span> <span class="n">cluster</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5552" name="__codelineno-0-5552"></a>                    <span class="n">position</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span>
<a id="__codelineno-0-5553" name="__codelineno-0-5553"></a>                    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span>
<a id="__codelineno-0-5554" name="__codelineno-0-5554"></a>                    <span class="n">cluster</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">count</span>
<a id="__codelineno-0-5555" name="__codelineno-0-5555"></a>                <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-5556" name="__codelineno-0-5556"></a>
<a id="__codelineno-0-5557" name="__codelineno-0-5557"></a>    <span class="k">return</span> <span class="n">cluster</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">values</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.cluster2" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.cluster2" class="toclink">
            <code class="highlight language-python"><span class="n">cluster2</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.cluster2" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Cluster the connected equal cells into polygons.</p>
<ul>
<li>Creates vector polygons for all connected regions of pixels in the raster sharing a common
    pixel value (group neighboring cells with the same value into one polygon).</li>
</ul>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>band</code>
            </td>
            <td>
                  <code><span title="int">int</span> | <span title="typing.List">List</span>[<span title="int">int</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Band index 0, 1, 2, 3, </p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>GeoDataFrame</code></td>            <td>
                  <code><span title="geopandas.geodataframe.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>GeodataFrame containing polygon geomtries for all connected regions.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>First, we will create a 10*10 dataset full of random integer between 1, and 5.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="p">[[</span><span class="mi">3</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a> <span class="p">[</span><span class="mi">4</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">4</span><span class="p">]</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a> <span class="p">[</span><span class="mi">4</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a> <span class="p">[</span><span class="mi">3</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">4</span><span class="p">]</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a> <span class="p">[</span><span class="mi">1</span> <span class="mi">4</span> <span class="mi">4</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a> <span class="p">[</span><span class="mi">1</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a> <span class="p">[</span><span class="mi">4</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a> <span class="p">[</span><span class="mi">2</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a> <span class="p">[</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">]]</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>Now, let's cluster the connected equal cells into polygons.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">gdf</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">cluster2</span><span class="p">()</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    <span class="n">Band_1</span>                                           <span class="n">geometry</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="mi">0</span>        <span class="mi">3</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mi">0</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.05</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.05</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">))</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="mi">1</span>        <span class="mi">1</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.1</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.2</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.2</span> <span class="mi">0</span><span class="p">,</span> <span class="o">...</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="mi">2</span>        <span class="mi">4</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.25</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.25</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.3</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.3</span> <span class="mf">0.</span><span class="o">..</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="mi">3</span>        <span class="mi">4</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.35</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.35</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.4</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.4</span> <span class="mf">0.</span><span class="o">..</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="mi">4</span>        <span class="mi">2</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.4</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.4</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.45</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.45</span> <span class="mf">0.</span><span class="o">..</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="mi">5</span>        <span class="mi">3</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.45</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.45</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.5</span> <span class="mf">0.</span><span class="o">..</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="mi">6</span>        <span class="mi">1</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.3</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.3</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.35</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.35</span> <span class="mi">0</span><span class="p">,</span> <span class="o">...</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="mi">7</span>        <span class="mi">4</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.15</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.15</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="o">...</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="mi">8</span>        <span class="mi">2</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.35</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.35</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.4</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.4</span><span class="o">...</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="mi">9</span>        <span class="mi">4</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mi">0</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mi">0</span> <span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.05</span> <span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.05</span> <span class="o">-...</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="mi">10</span>       <span class="mi">4</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.4</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.4</span> <span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.45</span> <span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.</span><span class="o">...</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="mi">11</span>       <span class="mi">4</span>  <span class="n">POLYGON</span> <span class="p">((</span><span class="mf">0.1</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span> <span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.15</span> <span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.1</span><span class="o">...</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-5559">5559</a></span>
<span class="normal"><a href="#__codelineno-0-5560">5560</a></span>
<span class="normal"><a href="#__codelineno-0-5561">5561</a></span>
<span class="normal"><a href="#__codelineno-0-5562">5562</a></span>
<span class="normal"><a href="#__codelineno-0-5563">5563</a></span>
<span class="normal"><a href="#__codelineno-0-5564">5564</a></span>
<span class="normal"><a href="#__codelineno-0-5565">5565</a></span>
<span class="normal"><a href="#__codelineno-0-5566">5566</a></span>
<span class="normal"><a href="#__codelineno-0-5567">5567</a></span>
<span class="normal"><a href="#__codelineno-0-5568">5568</a></span>
<span class="normal"><a href="#__codelineno-0-5569">5569</a></span>
<span class="normal"><a href="#__codelineno-0-5570">5570</a></span>
<span class="normal"><a href="#__codelineno-0-5571">5571</a></span>
<span class="normal"><a href="#__codelineno-0-5572">5572</a></span>
<span class="normal"><a href="#__codelineno-0-5573">5573</a></span>
<span class="normal"><a href="#__codelineno-0-5574">5574</a></span>
<span class="normal"><a href="#__codelineno-0-5575">5575</a></span>
<span class="normal"><a href="#__codelineno-0-5576">5576</a></span>
<span class="normal"><a href="#__codelineno-0-5577">5577</a></span>
<span class="normal"><a href="#__codelineno-0-5578">5578</a></span>
<span class="normal"><a href="#__codelineno-0-5579">5579</a></span>
<span class="normal"><a href="#__codelineno-0-5580">5580</a></span>
<span class="normal"><a href="#__codelineno-0-5581">5581</a></span>
<span class="normal"><a href="#__codelineno-0-5582">5582</a></span>
<span class="normal"><a href="#__codelineno-0-5583">5583</a></span>
<span class="normal"><a href="#__codelineno-0-5584">5584</a></span>
<span class="normal"><a href="#__codelineno-0-5585">5585</a></span>
<span class="normal"><a href="#__codelineno-0-5586">5586</a></span>
<span class="normal"><a href="#__codelineno-0-5587">5587</a></span>
<span class="normal"><a href="#__codelineno-0-5588">5588</a></span>
<span class="normal"><a href="#__codelineno-0-5589">5589</a></span>
<span class="normal"><a href="#__codelineno-0-5590">5590</a></span>
<span class="normal"><a href="#__codelineno-0-5591">5591</a></span>
<span class="normal"><a href="#__codelineno-0-5592">5592</a></span>
<span class="normal"><a href="#__codelineno-0-5593">5593</a></span>
<span class="normal"><a href="#__codelineno-0-5594">5594</a></span>
<span class="normal"><a href="#__codelineno-0-5595">5595</a></span>
<span class="normal"><a href="#__codelineno-0-5596">5596</a></span>
<span class="normal"><a href="#__codelineno-0-5597">5597</a></span>
<span class="normal"><a href="#__codelineno-0-5598">5598</a></span>
<span class="normal"><a href="#__codelineno-0-5599">5599</a></span>
<span class="normal"><a href="#__codelineno-0-5600">5600</a></span>
<span class="normal"><a href="#__codelineno-0-5601">5601</a></span>
<span class="normal"><a href="#__codelineno-0-5602">5602</a></span>
<span class="normal"><a href="#__codelineno-0-5603">5603</a></span>
<span class="normal"><a href="#__codelineno-0-5604">5604</a></span>
<span class="normal"><a href="#__codelineno-0-5605">5605</a></span>
<span class="normal"><a href="#__codelineno-0-5606">5606</a></span>
<span class="normal"><a href="#__codelineno-0-5607">5607</a></span>
<span class="normal"><a href="#__codelineno-0-5608">5608</a></span>
<span class="normal"><a href="#__codelineno-0-5609">5609</a></span>
<span class="normal"><a href="#__codelineno-0-5610">5610</a></span>
<span class="normal"><a href="#__codelineno-0-5611">5611</a></span>
<span class="normal"><a href="#__codelineno-0-5612">5612</a></span>
<span class="normal"><a href="#__codelineno-0-5613">5613</a></span>
<span class="normal"><a href="#__codelineno-0-5614">5614</a></span>
<span class="normal"><a href="#__codelineno-0-5615">5615</a></span>
<span class="normal"><a href="#__codelineno-0-5616">5616</a></span>
<span class="normal"><a href="#__codelineno-0-5617">5617</a></span>
<span class="normal"><a href="#__codelineno-0-5618">5618</a></span>
<span class="normal"><a href="#__codelineno-0-5619">5619</a></span>
<span class="normal"><a href="#__codelineno-0-5620">5620</a></span>
<span class="normal"><a href="#__codelineno-0-5621">5621</a></span>
<span class="normal"><a href="#__codelineno-0-5622">5622</a></span>
<span class="normal"><a href="#__codelineno-0-5623">5623</a></span>
<span class="normal"><a href="#__codelineno-0-5624">5624</a></span>
<span class="normal"><a href="#__codelineno-0-5625">5625</a></span>
<span class="normal"><a href="#__codelineno-0-5626">5626</a></span>
<span class="normal"><a href="#__codelineno-0-5627">5627</a></span>
<span class="normal"><a href="#__codelineno-0-5628">5628</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-5559" name="__codelineno-0-5559"></a><span class="k">def</span><span class="w"> </span><span class="nf">cluster2</span><span class="p">(</span>
<a id="__codelineno-0-5560" name="__codelineno-0-5560"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-5561" name="__codelineno-0-5561"></a>    <span class="n">band</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-5562" name="__codelineno-0-5562"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GeoDataFrame</span><span class="p">:</span>
<a id="__codelineno-0-5563" name="__codelineno-0-5563"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Cluster the connected equal cells into polygons.</span>
<a id="__codelineno-0-5564" name="__codelineno-0-5564"></a>
<a id="__codelineno-0-5565" name="__codelineno-0-5565"></a><span class="sd">    - Creates vector polygons for all connected regions of pixels in the raster sharing a common</span>
<a id="__codelineno-0-5566" name="__codelineno-0-5566"></a><span class="sd">        pixel value (group neighboring cells with the same value into one polygon).</span>
<a id="__codelineno-0-5567" name="__codelineno-0-5567"></a>
<a id="__codelineno-0-5568" name="__codelineno-0-5568"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-5569" name="__codelineno-0-5569"></a><span class="sd">        band (int | List[int] | None):</span>
<a id="__codelineno-0-5570" name="__codelineno-0-5570"></a><span class="sd">            Band index 0, 1, 2, 3, </span>
<a id="__codelineno-0-5571" name="__codelineno-0-5571"></a>
<a id="__codelineno-0-5572" name="__codelineno-0-5572"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-5573" name="__codelineno-0-5573"></a><span class="sd">        GeoDataFrame:</span>
<a id="__codelineno-0-5574" name="__codelineno-0-5574"></a><span class="sd">            GeodataFrame containing polygon geomtries for all connected regions.</span>
<a id="__codelineno-0-5575" name="__codelineno-0-5575"></a>
<a id="__codelineno-0-5576" name="__codelineno-0-5576"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-5577" name="__codelineno-0-5577"></a><span class="sd">        - First, we will create a 10*10 dataset full of random integer between 1, and 5.</span>
<a id="__codelineno-0-5578" name="__codelineno-0-5578"></a>
<a id="__codelineno-0-5579" name="__codelineno-0-5579"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5580" name="__codelineno-0-5580"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-5581" name="__codelineno-0-5581"></a><span class="sd">          &gt;&gt;&gt; np.random.seed(200)</span>
<a id="__codelineno-0-5582" name="__codelineno-0-5582"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.randint(1, 5, size=(10, 10))</span>
<a id="__codelineno-0-5583" name="__codelineno-0-5583"></a><span class="sd">          &gt;&gt;&gt; print(arr)  # doctest: +SKIP</span>
<a id="__codelineno-0-5584" name="__codelineno-0-5584"></a><span class="sd">          [[3 2 1 1 3 4 1 4 2 3]</span>
<a id="__codelineno-0-5585" name="__codelineno-0-5585"></a><span class="sd">           [4 2 2 4 3 3 1 2 4 4]</span>
<a id="__codelineno-0-5586" name="__codelineno-0-5586"></a><span class="sd">           [4 2 4 2 3 4 2 1 4 3]</span>
<a id="__codelineno-0-5587" name="__codelineno-0-5587"></a><span class="sd">           [3 2 1 4 3 3 4 1 1 4]</span>
<a id="__codelineno-0-5588" name="__codelineno-0-5588"></a><span class="sd">           [1 2 4 2 2 1 3 2 3 1]</span>
<a id="__codelineno-0-5589" name="__codelineno-0-5589"></a><span class="sd">           [1 4 4 4 1 1 4 2 1 1]</span>
<a id="__codelineno-0-5590" name="__codelineno-0-5590"></a><span class="sd">           [1 3 2 3 3 4 1 3 1 3]</span>
<a id="__codelineno-0-5591" name="__codelineno-0-5591"></a><span class="sd">           [4 1 3 3 3 4 1 4 1 1]</span>
<a id="__codelineno-0-5592" name="__codelineno-0-5592"></a><span class="sd">           [2 1 3 3 4 2 2 1 3 4]</span>
<a id="__codelineno-0-5593" name="__codelineno-0-5593"></a><span class="sd">           [2 3 2 2 4 2 1 3 2 2]]</span>
<a id="__codelineno-0-5594" name="__codelineno-0-5594"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-5595" name="__codelineno-0-5595"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-5596" name="__codelineno-0-5596"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-5597" name="__codelineno-0-5597"></a>
<a id="__codelineno-0-5598" name="__codelineno-0-5598"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5599" name="__codelineno-0-5599"></a>
<a id="__codelineno-0-5600" name="__codelineno-0-5600"></a><span class="sd">        - Now, let&#39;s cluster the connected equal cells into polygons.</span>
<a id="__codelineno-0-5601" name="__codelineno-0-5601"></a>
<a id="__codelineno-0-5602" name="__codelineno-0-5602"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5603" name="__codelineno-0-5603"></a><span class="sd">          &gt;&gt;&gt; gdf = dataset.cluster2()</span>
<a id="__codelineno-0-5604" name="__codelineno-0-5604"></a><span class="sd">          &gt;&gt;&gt; print(gdf)  # doctest: +SKIP</span>
<a id="__codelineno-0-5605" name="__codelineno-0-5605"></a><span class="sd">              Band_1                                           geometry</span>
<a id="__codelineno-0-5606" name="__codelineno-0-5606"></a><span class="sd">          0        3  POLYGON ((0 0, 0 -0.05, 0.05 -0.05, 0.05 0, 0 0))</span>
<a id="__codelineno-0-5607" name="__codelineno-0-5607"></a><span class="sd">          1        1  POLYGON ((0.1 0, 0.1 -0.05, 0.2 -0.05, 0.2 0, ...</span>
<a id="__codelineno-0-5608" name="__codelineno-0-5608"></a><span class="sd">          2        4  POLYGON ((0.25 0, 0.25 -0.05, 0.3 -0.05, 0.3 0...</span>
<a id="__codelineno-0-5609" name="__codelineno-0-5609"></a><span class="sd">          3        4  POLYGON ((0.35 0, 0.35 -0.05, 0.4 -0.05, 0.4 0...</span>
<a id="__codelineno-0-5610" name="__codelineno-0-5610"></a><span class="sd">          4        2  POLYGON ((0.4 0, 0.4 -0.05, 0.45 -0.05, 0.45 0...</span>
<a id="__codelineno-0-5611" name="__codelineno-0-5611"></a><span class="sd">          5        3  POLYGON ((0.45 0, 0.45 -0.05, 0.5 -0.05, 0.5 0...</span>
<a id="__codelineno-0-5612" name="__codelineno-0-5612"></a><span class="sd">          6        1  POLYGON ((0.3 0, 0.3 -0.1, 0.35 -0.1, 0.35 0, ...</span>
<a id="__codelineno-0-5613" name="__codelineno-0-5613"></a><span class="sd">          7        4  POLYGON ((0.15 -0.05, 0.15 -0.1, 0.2 -0.1, 0.2...</span>
<a id="__codelineno-0-5614" name="__codelineno-0-5614"></a><span class="sd">          8        2  POLYGON ((0.35 -0.05, 0.35 -0.1, 0.4 -0.1, 0.4...</span>
<a id="__codelineno-0-5615" name="__codelineno-0-5615"></a><span class="sd">          9        4  POLYGON ((0 -0.05, 0 -0.15, 0.05 -0.15, 0.05 -...</span>
<a id="__codelineno-0-5616" name="__codelineno-0-5616"></a><span class="sd">          10       4  POLYGON ((0.4 -0.05, 0.4 -0.15, 0.45 -0.15, 0....</span>
<a id="__codelineno-0-5617" name="__codelineno-0-5617"></a><span class="sd">          11       4  POLYGON ((0.1 -0.1, 0.1 -0.15, 0.15 -0.15, 0.1...</span>
<a id="__codelineno-0-5618" name="__codelineno-0-5618"></a>
<a id="__codelineno-0-5619" name="__codelineno-0-5619"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5620" name="__codelineno-0-5620"></a>
<a id="__codelineno-0-5621" name="__codelineno-0-5621"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-5622" name="__codelineno-0-5622"></a>    <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-5623" name="__codelineno-0-5623"></a>        <span class="n">band</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-5624" name="__codelineno-0-5624"></a>
<a id="__codelineno-0-5625" name="__codelineno-0-5625"></a>    <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_names</span><span class="p">[</span><span class="n">band</span><span class="p">]</span>
<a id="__codelineno-0-5626" name="__codelineno-0-5626"></a>    <span class="n">gdf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_band_to_polygon</span><span class="p">(</span><span class="n">band</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-5627" name="__codelineno-0-5627"></a>
<a id="__codelineno-0-5628" name="__codelineno-0-5628"></a>    <span class="k">return</span> <span class="n">gdf</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.create_overviews" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.create_overviews" class="toclink">
            <code class="highlight language-python"><span class="n">create_overviews</span><span class="p">(</span><span class="n">resampling_method</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">,</span> <span class="n">overview_levels</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.create_overviews" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Create overviews for the dataset.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>resampling_method</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The resampling method used to create the overviews. Possible values are
"NEAREST", "CUBIC", "AVERAGE", "GAUSS", "CUBICSPLINE", "LANCZOS", "MODE",
"AVERAGE_MAGPHASE", "RMS", "BILINEAR". Defaults to "nearest".</p>
              </div>
            </td>
            <td>
                  <code>&#39;nearest&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overview_levels</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The overview levels. Restricted to typical power-of-two reduction factors. Defaults to [2, 4, 8, 16,
32].</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>None</code></td>            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Creates internal or external overviews depending on the dataset access mode. See Notes.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>External (.ovr file): If the dataset is read with <code>read_only=True</code> then the overviews file will be created
  as an external .ovr file in the same directory of the dataset.</li>
<li>Internal: If the dataset is read with <code>read_only=False</code> then the overviews will be created internally in
  the dataset, and the dataset needs to be saved/flushed to persist the changes to disk.</li>
<li>You can check the count per band via the <code>overview_count</code> property.</li>
</ul>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create a Dataset with 4 bands, 10 rows, 10 columns, at the point lon/lat (0, 0):</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
- Now, create overviews using the default parameters:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">create_overviews</span><span class="p">()</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">overview_count</span><span class="p">)</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
</code></pre></div>
- For each band, there are 4 overview levels you can use to plot the bands:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">overview</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">overview_index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
</code></pre></div>
  <img alt="overviews-level-0" src="../../_images/dataset/overviews-level-0.png" /></p>
<ul>
<li>However, the dataset originally is 10*10, but the first overview level (2) displays half of the cells by
  aggregating all the cells using the nearest neighbor. The second level displays only 3 cells in each:</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">overview</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">overview_index</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>   <span class="c1"># doctest: +SKIP</span>
</code></pre></div>
  <img alt="overviews-level-1" src="../../_images/dataset/overviews-level-1.png" /></p>
<ul>
<li>For the third overview level:</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">overview</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">overview_index</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>       <span class="c1"># doctest: +SKIP</span>
</code></pre></div>
  <img alt="overviews-level-2" src="../../_images/dataset/overviews-level-2.png" /></p>


<details class="see-also" open>
  <summary>See Also</summary>
  <ul>
<li>Dataset.recreate_overviews: Recreate the dataset overviews if they exist</li>
<li>Dataset.get_overview: Get an overview of a band</li>
<li>Dataset.overview_count: Number of overviews</li>
<li>Dataset.read_overview_array: Read overview values</li>
<li>Dataset.plot: Plot a band</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-5639">5639</a></span>
<span class="normal"><a href="#__codelineno-0-5640">5640</a></span>
<span class="normal"><a href="#__codelineno-0-5641">5641</a></span>
<span class="normal"><a href="#__codelineno-0-5642">5642</a></span>
<span class="normal"><a href="#__codelineno-0-5643">5643</a></span>
<span class="normal"><a href="#__codelineno-0-5644">5644</a></span>
<span class="normal"><a href="#__codelineno-0-5645">5645</a></span>
<span class="normal"><a href="#__codelineno-0-5646">5646</a></span>
<span class="normal"><a href="#__codelineno-0-5647">5647</a></span>
<span class="normal"><a href="#__codelineno-0-5648">5648</a></span>
<span class="normal"><a href="#__codelineno-0-5649">5649</a></span>
<span class="normal"><a href="#__codelineno-0-5650">5650</a></span>
<span class="normal"><a href="#__codelineno-0-5651">5651</a></span>
<span class="normal"><a href="#__codelineno-0-5652">5652</a></span>
<span class="normal"><a href="#__codelineno-0-5653">5653</a></span>
<span class="normal"><a href="#__codelineno-0-5654">5654</a></span>
<span class="normal"><a href="#__codelineno-0-5655">5655</a></span>
<span class="normal"><a href="#__codelineno-0-5656">5656</a></span>
<span class="normal"><a href="#__codelineno-0-5657">5657</a></span>
<span class="normal"><a href="#__codelineno-0-5658">5658</a></span>
<span class="normal"><a href="#__codelineno-0-5659">5659</a></span>
<span class="normal"><a href="#__codelineno-0-5660">5660</a></span>
<span class="normal"><a href="#__codelineno-0-5661">5661</a></span>
<span class="normal"><a href="#__codelineno-0-5662">5662</a></span>
<span class="normal"><a href="#__codelineno-0-5663">5663</a></span>
<span class="normal"><a href="#__codelineno-0-5664">5664</a></span>
<span class="normal"><a href="#__codelineno-0-5665">5665</a></span>
<span class="normal"><a href="#__codelineno-0-5666">5666</a></span>
<span class="normal"><a href="#__codelineno-0-5667">5667</a></span>
<span class="normal"><a href="#__codelineno-0-5668">5668</a></span>
<span class="normal"><a href="#__codelineno-0-5669">5669</a></span>
<span class="normal"><a href="#__codelineno-0-5670">5670</a></span>
<span class="normal"><a href="#__codelineno-0-5671">5671</a></span>
<span class="normal"><a href="#__codelineno-0-5672">5672</a></span>
<span class="normal"><a href="#__codelineno-0-5673">5673</a></span>
<span class="normal"><a href="#__codelineno-0-5674">5674</a></span>
<span class="normal"><a href="#__codelineno-0-5675">5675</a></span>
<span class="normal"><a href="#__codelineno-0-5676">5676</a></span>
<span class="normal"><a href="#__codelineno-0-5677">5677</a></span>
<span class="normal"><a href="#__codelineno-0-5678">5678</a></span>
<span class="normal"><a href="#__codelineno-0-5679">5679</a></span>
<span class="normal"><a href="#__codelineno-0-5680">5680</a></span>
<span class="normal"><a href="#__codelineno-0-5681">5681</a></span>
<span class="normal"><a href="#__codelineno-0-5682">5682</a></span>
<span class="normal"><a href="#__codelineno-0-5683">5683</a></span>
<span class="normal"><a href="#__codelineno-0-5684">5684</a></span>
<span class="normal"><a href="#__codelineno-0-5685">5685</a></span>
<span class="normal"><a href="#__codelineno-0-5686">5686</a></span>
<span class="normal"><a href="#__codelineno-0-5687">5687</a></span>
<span class="normal"><a href="#__codelineno-0-5688">5688</a></span>
<span class="normal"><a href="#__codelineno-0-5689">5689</a></span>
<span class="normal"><a href="#__codelineno-0-5690">5690</a></span>
<span class="normal"><a href="#__codelineno-0-5691">5691</a></span>
<span class="normal"><a href="#__codelineno-0-5692">5692</a></span>
<span class="normal"><a href="#__codelineno-0-5693">5693</a></span>
<span class="normal"><a href="#__codelineno-0-5694">5694</a></span>
<span class="normal"><a href="#__codelineno-0-5695">5695</a></span>
<span class="normal"><a href="#__codelineno-0-5696">5696</a></span>
<span class="normal"><a href="#__codelineno-0-5697">5697</a></span>
<span class="normal"><a href="#__codelineno-0-5698">5698</a></span>
<span class="normal"><a href="#__codelineno-0-5699">5699</a></span>
<span class="normal"><a href="#__codelineno-0-5700">5700</a></span>
<span class="normal"><a href="#__codelineno-0-5701">5701</a></span>
<span class="normal"><a href="#__codelineno-0-5702">5702</a></span>
<span class="normal"><a href="#__codelineno-0-5703">5703</a></span>
<span class="normal"><a href="#__codelineno-0-5704">5704</a></span>
<span class="normal"><a href="#__codelineno-0-5705">5705</a></span>
<span class="normal"><a href="#__codelineno-0-5706">5706</a></span>
<span class="normal"><a href="#__codelineno-0-5707">5707</a></span>
<span class="normal"><a href="#__codelineno-0-5708">5708</a></span>
<span class="normal"><a href="#__codelineno-0-5709">5709</a></span>
<span class="normal"><a href="#__codelineno-0-5710">5710</a></span>
<span class="normal"><a href="#__codelineno-0-5711">5711</a></span>
<span class="normal"><a href="#__codelineno-0-5712">5712</a></span>
<span class="normal"><a href="#__codelineno-0-5713">5713</a></span>
<span class="normal"><a href="#__codelineno-0-5714">5714</a></span>
<span class="normal"><a href="#__codelineno-0-5715">5715</a></span>
<span class="normal"><a href="#__codelineno-0-5716">5716</a></span>
<span class="normal"><a href="#__codelineno-0-5717">5717</a></span>
<span class="normal"><a href="#__codelineno-0-5718">5718</a></span>
<span class="normal"><a href="#__codelineno-0-5719">5719</a></span>
<span class="normal"><a href="#__codelineno-0-5720">5720</a></span>
<span class="normal"><a href="#__codelineno-0-5721">5721</a></span>
<span class="normal"><a href="#__codelineno-0-5722">5722</a></span>
<span class="normal"><a href="#__codelineno-0-5723">5723</a></span>
<span class="normal"><a href="#__codelineno-0-5724">5724</a></span>
<span class="normal"><a href="#__codelineno-0-5725">5725</a></span>
<span class="normal"><a href="#__codelineno-0-5726">5726</a></span>
<span class="normal"><a href="#__codelineno-0-5727">5727</a></span>
<span class="normal"><a href="#__codelineno-0-5728">5728</a></span>
<span class="normal"><a href="#__codelineno-0-5729">5729</a></span>
<span class="normal"><a href="#__codelineno-0-5730">5730</a></span>
<span class="normal"><a href="#__codelineno-0-5731">5731</a></span>
<span class="normal"><a href="#__codelineno-0-5732">5732</a></span>
<span class="normal"><a href="#__codelineno-0-5733">5733</a></span>
<span class="normal"><a href="#__codelineno-0-5734">5734</a></span>
<span class="normal"><a href="#__codelineno-0-5735">5735</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-5639" name="__codelineno-0-5639"></a><span class="k">def</span><span class="w"> </span><span class="nf">create_overviews</span><span class="p">(</span>
<a id="__codelineno-0-5640" name="__codelineno-0-5640"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">resampling_method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;nearest&quot;</span><span class="p">,</span> <span class="n">overview_levels</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-5641" name="__codelineno-0-5641"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-5642" name="__codelineno-0-5642"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Create overviews for the dataset.</span>
<a id="__codelineno-0-5643" name="__codelineno-0-5643"></a>
<a id="__codelineno-0-5644" name="__codelineno-0-5644"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-5645" name="__codelineno-0-5645"></a><span class="sd">        resampling_method (str):</span>
<a id="__codelineno-0-5646" name="__codelineno-0-5646"></a><span class="sd">            The resampling method used to create the overviews. Possible values are</span>
<a id="__codelineno-0-5647" name="__codelineno-0-5647"></a><span class="sd">            &quot;NEAREST&quot;, &quot;CUBIC&quot;, &quot;AVERAGE&quot;, &quot;GAUSS&quot;, &quot;CUBICSPLINE&quot;, &quot;LANCZOS&quot;, &quot;MODE&quot;,</span>
<a id="__codelineno-0-5648" name="__codelineno-0-5648"></a><span class="sd">            &quot;AVERAGE_MAGPHASE&quot;, &quot;RMS&quot;, &quot;BILINEAR&quot;. Defaults to &quot;nearest&quot;.</span>
<a id="__codelineno-0-5649" name="__codelineno-0-5649"></a><span class="sd">        overview_levels (list, optional):</span>
<a id="__codelineno-0-5650" name="__codelineno-0-5650"></a><span class="sd">            The overview levels. Restricted to typical power-of-two reduction factors. Defaults to [2, 4, 8, 16,</span>
<a id="__codelineno-0-5651" name="__codelineno-0-5651"></a><span class="sd">            32].</span>
<a id="__codelineno-0-5652" name="__codelineno-0-5652"></a>
<a id="__codelineno-0-5653" name="__codelineno-0-5653"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-5654" name="__codelineno-0-5654"></a><span class="sd">        None:</span>
<a id="__codelineno-0-5655" name="__codelineno-0-5655"></a><span class="sd">            Creates internal or external overviews depending on the dataset access mode. See Notes.</span>
<a id="__codelineno-0-5656" name="__codelineno-0-5656"></a>
<a id="__codelineno-0-5657" name="__codelineno-0-5657"></a><span class="sd">    Notes:</span>
<a id="__codelineno-0-5658" name="__codelineno-0-5658"></a><span class="sd">        - External (.ovr file): If the dataset is read with `read_only=True` then the overviews file will be created</span>
<a id="__codelineno-0-5659" name="__codelineno-0-5659"></a><span class="sd">          as an external .ovr file in the same directory of the dataset.</span>
<a id="__codelineno-0-5660" name="__codelineno-0-5660"></a><span class="sd">        - Internal: If the dataset is read with `read_only=False` then the overviews will be created internally in</span>
<a id="__codelineno-0-5661" name="__codelineno-0-5661"></a><span class="sd">          the dataset, and the dataset needs to be saved/flushed to persist the changes to disk.</span>
<a id="__codelineno-0-5662" name="__codelineno-0-5662"></a><span class="sd">        - You can check the count per band via the `overview_count` property.</span>
<a id="__codelineno-0-5663" name="__codelineno-0-5663"></a>
<a id="__codelineno-0-5664" name="__codelineno-0-5664"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-5665" name="__codelineno-0-5665"></a><span class="sd">        - Create a Dataset with 4 bands, 10 rows, 10 columns, at the point lon/lat (0, 0):</span>
<a id="__codelineno-0-5666" name="__codelineno-0-5666"></a>
<a id="__codelineno-0-5667" name="__codelineno-0-5667"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5668" name="__codelineno-0-5668"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-5669" name="__codelineno-0-5669"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.rand(4, 10, 10)</span>
<a id="__codelineno-0-5670" name="__codelineno-0-5670"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-5671" name="__codelineno-0-5671"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-5672" name="__codelineno-0-5672"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-5673" name="__codelineno-0-5673"></a>
<a id="__codelineno-0-5674" name="__codelineno-0-5674"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5675" name="__codelineno-0-5675"></a><span class="sd">        - Now, create overviews using the default parameters:</span>
<a id="__codelineno-0-5676" name="__codelineno-0-5676"></a>
<a id="__codelineno-0-5677" name="__codelineno-0-5677"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5678" name="__codelineno-0-5678"></a><span class="sd">          &gt;&gt;&gt; dataset.create_overviews()</span>
<a id="__codelineno-0-5679" name="__codelineno-0-5679"></a><span class="sd">          &gt;&gt;&gt; print(dataset.overview_count)  # doctest: +SKIP</span>
<a id="__codelineno-0-5680" name="__codelineno-0-5680"></a><span class="sd">          [4, 4, 4, 4]</span>
<a id="__codelineno-0-5681" name="__codelineno-0-5681"></a>
<a id="__codelineno-0-5682" name="__codelineno-0-5682"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5683" name="__codelineno-0-5683"></a><span class="sd">        - For each band, there are 4 overview levels you can use to plot the bands:</span>
<a id="__codelineno-0-5684" name="__codelineno-0-5684"></a>
<a id="__codelineno-0-5685" name="__codelineno-0-5685"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5686" name="__codelineno-0-5686"></a><span class="sd">          &gt;&gt;&gt; dataset.plot(band=0, overview=True, overview_index=0) # doctest: +SKIP</span>
<a id="__codelineno-0-5687" name="__codelineno-0-5687"></a>
<a id="__codelineno-0-5688" name="__codelineno-0-5688"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5689" name="__codelineno-0-5689"></a><span class="sd">          ![overviews-level-0](./../_images/dataset/overviews-level-0.png)</span>
<a id="__codelineno-0-5690" name="__codelineno-0-5690"></a>
<a id="__codelineno-0-5691" name="__codelineno-0-5691"></a><span class="sd">        - However, the dataset originally is 10*10, but the first overview level (2) displays half of the cells by</span>
<a id="__codelineno-0-5692" name="__codelineno-0-5692"></a><span class="sd">          aggregating all the cells using the nearest neighbor. The second level displays only 3 cells in each:</span>
<a id="__codelineno-0-5693" name="__codelineno-0-5693"></a>
<a id="__codelineno-0-5694" name="__codelineno-0-5694"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5695" name="__codelineno-0-5695"></a><span class="sd">          &gt;&gt;&gt; dataset.plot(band=0, overview=True, overview_index=1)   # doctest: +SKIP</span>
<a id="__codelineno-0-5696" name="__codelineno-0-5696"></a>
<a id="__codelineno-0-5697" name="__codelineno-0-5697"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5698" name="__codelineno-0-5698"></a><span class="sd">          ![overviews-level-1](./../_images/dataset/overviews-level-1.png)</span>
<a id="__codelineno-0-5699" name="__codelineno-0-5699"></a>
<a id="__codelineno-0-5700" name="__codelineno-0-5700"></a><span class="sd">        - For the third overview level:</span>
<a id="__codelineno-0-5701" name="__codelineno-0-5701"></a>
<a id="__codelineno-0-5702" name="__codelineno-0-5702"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5703" name="__codelineno-0-5703"></a><span class="sd">          &gt;&gt;&gt; dataset.plot(band=0, overview=True, overview_index=2)       # doctest: +SKIP</span>
<a id="__codelineno-0-5704" name="__codelineno-0-5704"></a>
<a id="__codelineno-0-5705" name="__codelineno-0-5705"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5706" name="__codelineno-0-5706"></a><span class="sd">          ![overviews-level-2](./../_images/dataset/overviews-level-2.png)</span>
<a id="__codelineno-0-5707" name="__codelineno-0-5707"></a>
<a id="__codelineno-0-5708" name="__codelineno-0-5708"></a><span class="sd">    See Also:</span>
<a id="__codelineno-0-5709" name="__codelineno-0-5709"></a><span class="sd">        - Dataset.recreate_overviews: Recreate the dataset overviews if they exist</span>
<a id="__codelineno-0-5710" name="__codelineno-0-5710"></a><span class="sd">        - Dataset.get_overview: Get an overview of a band</span>
<a id="__codelineno-0-5711" name="__codelineno-0-5711"></a><span class="sd">        - Dataset.overview_count: Number of overviews</span>
<a id="__codelineno-0-5712" name="__codelineno-0-5712"></a><span class="sd">        - Dataset.read_overview_array: Read overview values</span>
<a id="__codelineno-0-5713" name="__codelineno-0-5713"></a><span class="sd">        - Dataset.plot: Plot a band</span>
<a id="__codelineno-0-5714" name="__codelineno-0-5714"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-5715" name="__codelineno-0-5715"></a>    <span class="k">if</span> <span class="n">overview_levels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-5716" name="__codelineno-0-5716"></a>        <span class="n">overview_levels</span> <span class="o">=</span> <span class="n">OVERVIEW_LEVELS</span>
<a id="__codelineno-0-5717" name="__codelineno-0-5717"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-5718" name="__codelineno-0-5718"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">overview_levels</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-5719" name="__codelineno-0-5719"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;overview_levels should be a list&quot;</span><span class="p">)</span>
<a id="__codelineno-0-5720" name="__codelineno-0-5720"></a>
<a id="__codelineno-0-5721" name="__codelineno-0-5721"></a>        <span class="c1"># if self.raster.HasArbitraryOverviews():</span>
<a id="__codelineno-0-5722" name="__codelineno-0-5722"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">elem</span> <span class="ow">in</span> <span class="n">OVERVIEW_LEVELS</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">overview_levels</span><span class="p">):</span>
<a id="__codelineno-0-5723" name="__codelineno-0-5723"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-5724" name="__codelineno-0-5724"></a>                <span class="s2">&quot;overview_levels are restricted to the typical power-of-two reduction factors &quot;</span>
<a id="__codelineno-0-5725" name="__codelineno-0-5725"></a>                <span class="s2">&quot;(like 2, 4, 8, 16, etc.)&quot;</span>
<a id="__codelineno-0-5726" name="__codelineno-0-5726"></a>            <span class="p">)</span>
<a id="__codelineno-0-5727" name="__codelineno-0-5727"></a>
<a id="__codelineno-0-5728" name="__codelineno-0-5728"></a>    <span class="k">if</span> <span class="n">resampling_method</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">RESAMPLING_METHODS</span><span class="p">:</span>
<a id="__codelineno-0-5729" name="__codelineno-0-5729"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;resampling_method should be one of </span><span class="si">{</span><span class="n">RESAMPLING_METHODS</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-5730" name="__codelineno-0-5730"></a>    <span class="c1"># Define the overview levels (the reduction factor).</span>
<a id="__codelineno-0-5731" name="__codelineno-0-5731"></a>    <span class="c1"># e.g., 2 means the overview will be half the resolution of the original dataset.</span>
<a id="__codelineno-0-5732" name="__codelineno-0-5732"></a>
<a id="__codelineno-0-5733" name="__codelineno-0-5733"></a>    <span class="c1"># Build overviews using nearest neighbor resampling</span>
<a id="__codelineno-0-5734" name="__codelineno-0-5734"></a>    <span class="c1"># NEAREST is the resampling method used. Other methods include AVERAGE, GAUSS, etc.</span>
<a id="__codelineno-0-5735" name="__codelineno-0-5735"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">BuildOverviews</span><span class="p">(</span><span class="n">resampling_method</span><span class="p">,</span> <span class="n">overview_levels</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.recreate_overviews" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.recreate_overviews" class="toclink">
            <code class="highlight language-python"><span class="n">recreate_overviews</span><span class="p">(</span><span class="n">resampling_method</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.recreate_overviews" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Recreate overviews for the dataset.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>resampling_method</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Resampling method used to recreate overviews. Possible values are
"NEAREST", "CUBIC", "AVERAGE", "GAUSS", "CUBICSPLINE", "LANCZOS", "MODE",
"AVERAGE_MAGPHASE", "RMS", "BILINEAR". Defaults to "nearest".</p>
              </div>
            </td>
            <td>
                  <code>&#39;nearest&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If resampling_method is not one of the allowed values above.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pyramids.base._errors.ReadOnlyError">ReadOnlyError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If overviews are internal and the dataset is opened read-only. Read with read_only=False.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="see-also" open>
  <summary>See Also</summary>
  <ul>
<li>Dataset.create_overviews: Recreate the dataset overviews if they exist.</li>
<li>Dataset.get_overview: Get an overview of a band.</li>
<li>Dataset.overview_count: Number of overviews.</li>
<li>Dataset.read_overview_array: Read overview values.</li>
<li>Dataset.plot: Plot a band.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-5737">5737</a></span>
<span class="normal"><a href="#__codelineno-0-5738">5738</a></span>
<span class="normal"><a href="#__codelineno-0-5739">5739</a></span>
<span class="normal"><a href="#__codelineno-0-5740">5740</a></span>
<span class="normal"><a href="#__codelineno-0-5741">5741</a></span>
<span class="normal"><a href="#__codelineno-0-5742">5742</a></span>
<span class="normal"><a href="#__codelineno-0-5743">5743</a></span>
<span class="normal"><a href="#__codelineno-0-5744">5744</a></span>
<span class="normal"><a href="#__codelineno-0-5745">5745</a></span>
<span class="normal"><a href="#__codelineno-0-5746">5746</a></span>
<span class="normal"><a href="#__codelineno-0-5747">5747</a></span>
<span class="normal"><a href="#__codelineno-0-5748">5748</a></span>
<span class="normal"><a href="#__codelineno-0-5749">5749</a></span>
<span class="normal"><a href="#__codelineno-0-5750">5750</a></span>
<span class="normal"><a href="#__codelineno-0-5751">5751</a></span>
<span class="normal"><a href="#__codelineno-0-5752">5752</a></span>
<span class="normal"><a href="#__codelineno-0-5753">5753</a></span>
<span class="normal"><a href="#__codelineno-0-5754">5754</a></span>
<span class="normal"><a href="#__codelineno-0-5755">5755</a></span>
<span class="normal"><a href="#__codelineno-0-5756">5756</a></span>
<span class="normal"><a href="#__codelineno-0-5757">5757</a></span>
<span class="normal"><a href="#__codelineno-0-5758">5758</a></span>
<span class="normal"><a href="#__codelineno-0-5759">5759</a></span>
<span class="normal"><a href="#__codelineno-0-5760">5760</a></span>
<span class="normal"><a href="#__codelineno-0-5761">5761</a></span>
<span class="normal"><a href="#__codelineno-0-5762">5762</a></span>
<span class="normal"><a href="#__codelineno-0-5763">5763</a></span>
<span class="normal"><a href="#__codelineno-0-5764">5764</a></span>
<span class="normal"><a href="#__codelineno-0-5765">5765</a></span>
<span class="normal"><a href="#__codelineno-0-5766">5766</a></span>
<span class="normal"><a href="#__codelineno-0-5767">5767</a></span>
<span class="normal"><a href="#__codelineno-0-5768">5768</a></span>
<span class="normal"><a href="#__codelineno-0-5769">5769</a></span>
<span class="normal"><a href="#__codelineno-0-5770">5770</a></span>
<span class="normal"><a href="#__codelineno-0-5771">5771</a></span>
<span class="normal"><a href="#__codelineno-0-5772">5772</a></span>
<span class="normal"><a href="#__codelineno-0-5773">5773</a></span>
<span class="normal"><a href="#__codelineno-0-5774">5774</a></span>
<span class="normal"><a href="#__codelineno-0-5775">5775</a></span>
<span class="normal"><a href="#__codelineno-0-5776">5776</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-5737" name="__codelineno-0-5737"></a><span class="k">def</span><span class="w"> </span><span class="nf">recreate_overviews</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resampling_method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;nearest&quot;</span><span class="p">):</span>
<a id="__codelineno-0-5738" name="__codelineno-0-5738"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Recreate overviews for the dataset.</span>
<a id="__codelineno-0-5739" name="__codelineno-0-5739"></a>
<a id="__codelineno-0-5740" name="__codelineno-0-5740"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-5741" name="__codelineno-0-5741"></a><span class="sd">        resampling_method (str): Resampling method used to recreate overviews. Possible values are</span>
<a id="__codelineno-0-5742" name="__codelineno-0-5742"></a><span class="sd">            &quot;NEAREST&quot;, &quot;CUBIC&quot;, &quot;AVERAGE&quot;, &quot;GAUSS&quot;, &quot;CUBICSPLINE&quot;, &quot;LANCZOS&quot;, &quot;MODE&quot;,</span>
<a id="__codelineno-0-5743" name="__codelineno-0-5743"></a><span class="sd">            &quot;AVERAGE_MAGPHASE&quot;, &quot;RMS&quot;, &quot;BILINEAR&quot;. Defaults to &quot;nearest&quot;.</span>
<a id="__codelineno-0-5744" name="__codelineno-0-5744"></a>
<a id="__codelineno-0-5745" name="__codelineno-0-5745"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-5746" name="__codelineno-0-5746"></a><span class="sd">        ValueError:</span>
<a id="__codelineno-0-5747" name="__codelineno-0-5747"></a><span class="sd">            If resampling_method is not one of the allowed values above.</span>
<a id="__codelineno-0-5748" name="__codelineno-0-5748"></a><span class="sd">        ReadOnlyError:</span>
<a id="__codelineno-0-5749" name="__codelineno-0-5749"></a><span class="sd">            If overviews are internal and the dataset is opened read-only. Read with read_only=False.</span>
<a id="__codelineno-0-5750" name="__codelineno-0-5750"></a>
<a id="__codelineno-0-5751" name="__codelineno-0-5751"></a><span class="sd">    See Also:</span>
<a id="__codelineno-0-5752" name="__codelineno-0-5752"></a><span class="sd">        - Dataset.create_overviews: Recreate the dataset overviews if they exist.</span>
<a id="__codelineno-0-5753" name="__codelineno-0-5753"></a><span class="sd">        - Dataset.get_overview: Get an overview of a band.</span>
<a id="__codelineno-0-5754" name="__codelineno-0-5754"></a><span class="sd">        - Dataset.overview_count: Number of overviews.</span>
<a id="__codelineno-0-5755" name="__codelineno-0-5755"></a><span class="sd">        - Dataset.read_overview_array: Read overview values.</span>
<a id="__codelineno-0-5756" name="__codelineno-0-5756"></a><span class="sd">        - Dataset.plot: Plot a band.</span>
<a id="__codelineno-0-5757" name="__codelineno-0-5757"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-5758" name="__codelineno-0-5758"></a>    <span class="k">if</span> <span class="n">resampling_method</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">RESAMPLING_METHODS</span><span class="p">:</span>
<a id="__codelineno-0-5759" name="__codelineno-0-5759"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;resampling_method should be one of </span><span class="si">{</span><span class="n">RESAMPLING_METHODS</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-5760" name="__codelineno-0-5760"></a>    <span class="c1"># Build overviews using nearest neighbor resampling</span>
<a id="__codelineno-0-5761" name="__codelineno-0-5761"></a>    <span class="c1"># nearest is the resampling method used. Other methods include AVERAGE, GAUSS, etc.</span>
<a id="__codelineno-0-5762" name="__codelineno-0-5762"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-5763" name="__codelineno-0-5763"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-5764" name="__codelineno-0-5764"></a>            <span class="n">band</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-0-5765" name="__codelineno-0-5765"></a>            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">overview_count</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
<a id="__codelineno-0-5766" name="__codelineno-0-5766"></a>                <span class="n">ovr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_overview</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
<a id="__codelineno-0-5767" name="__codelineno-0-5767"></a>                <span class="c1"># TODO: if this method takes a long time, we can use the gdal.RegenerateOverviews() method</span>
<a id="__codelineno-0-5768" name="__codelineno-0-5768"></a>                <span class="c1">#  which is faster but it does not give the option to choose the resampling method. and the</span>
<a id="__codelineno-0-5769" name="__codelineno-0-5769"></a>                <span class="c1">#  overviews has to be given to the function as a list.</span>
<a id="__codelineno-0-5770" name="__codelineno-0-5770"></a>                <span class="c1">#  overviews = [band.GetOverview(i) for i in range(band.GetOverviewCount())]</span>
<a id="__codelineno-0-5771" name="__codelineno-0-5771"></a>                <span class="c1">#  band.RegenerateOverviews(overviews) or gdal.RegenerateOverviews(overviews)</span>
<a id="__codelineno-0-5772" name="__codelineno-0-5772"></a>                <span class="n">gdal</span><span class="o">.</span><span class="n">RegenerateOverview</span><span class="p">(</span><span class="n">band</span><span class="p">,</span> <span class="n">ovr</span><span class="p">,</span> <span class="n">resampling_method</span><span class="p">)</span>
<a id="__codelineno-0-5773" name="__codelineno-0-5773"></a>    <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
<a id="__codelineno-0-5774" name="__codelineno-0-5774"></a>        <span class="k">raise</span> <span class="n">ReadOnlyError</span><span class="p">(</span>
<a id="__codelineno-0-5775" name="__codelineno-0-5775"></a>            <span class="s2">&quot;The Dataset is opened with a read only. Please read the dataset using read_only=False&quot;</span>
<a id="__codelineno-0-5776" name="__codelineno-0-5776"></a>        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.get_overview" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.get_overview" class="toclink">
            <code class="highlight language-python"><span class="n">get_overview</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">overview_index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.get_overview" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Get an overview of a band.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>band</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The band index. Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overview_index</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index of the overview. Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="osgeo.gdal.Band">Band</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>gdal.Band:
GDAL band object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create <code>Dataset</code> consisting of 4 bands, 10 rows, 10 columns, at lon/lat (0, 0):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:])</span> <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">array</span><span class="p">([[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>       <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>       <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>       <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>       <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>       <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>       <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>       <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>       <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>       <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int32</span><span class="p">)</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>Now, create overviews using the default parameters and inspect them:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">create_overviews</span><span class="p">()</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">overview_count</span><span class="p">)</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">ovr</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_overview</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">overview_index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">ovr</span><span class="p">)</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="o">&lt;</span><span class="n">osgeo</span><span class="o">.</span><span class="n">gdal</span><span class="o">.</span><span class="n">Band</span><span class="p">;</span> <span class="n">proxy</span> <span class="n">of</span> <span class="o">&lt;</span><span class="n">Swig</span> <span class="n">Object</span> <span class="n">of</span> <span class="nb">type</span> <span class="s1">&#39;GDALRasterBandShadow *&#39;</span> <span class="n">at</span> <span class="mh">0x0000017E2B5AF1B0</span><span class="o">&gt;</span> <span class="o">&gt;</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">ovr</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="n">array</span><span class="p">([[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>       <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>       <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>       <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>       <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int32</span><span class="p">)</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">ovr</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_overview</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">overview_index</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">ovr</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="n">array</span><span class="p">([[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>       <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>       <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int32</span><span class="p">)</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">ovr</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_overview</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">overview_index</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">ovr</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="n">array</span><span class="p">([[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>       <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int32</span><span class="p">)</span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">ovr</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_overview</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">overview_index</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">ovr</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="n">array</span><span class="p">([[</span><span class="mi">6</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int32</span><span class="p">)</span>
</code></pre></div>


<details class="see-also" open>
  <summary>See Also</summary>
  <ul>
<li>Dataset.create_overviews: Create the dataset overviews if they exist.</li>
<li>Dataset.create_overviews: Recreate the dataset overviews if they exist.</li>
<li>Dataset.overview_count: Number of overviews.</li>
<li>Dataset.read_overview_array: Read overview values.</li>
<li>Dataset.plot: Plot a band.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-5778">5778</a></span>
<span class="normal"><a href="#__codelineno-0-5779">5779</a></span>
<span class="normal"><a href="#__codelineno-0-5780">5780</a></span>
<span class="normal"><a href="#__codelineno-0-5781">5781</a></span>
<span class="normal"><a href="#__codelineno-0-5782">5782</a></span>
<span class="normal"><a href="#__codelineno-0-5783">5783</a></span>
<span class="normal"><a href="#__codelineno-0-5784">5784</a></span>
<span class="normal"><a href="#__codelineno-0-5785">5785</a></span>
<span class="normal"><a href="#__codelineno-0-5786">5786</a></span>
<span class="normal"><a href="#__codelineno-0-5787">5787</a></span>
<span class="normal"><a href="#__codelineno-0-5788">5788</a></span>
<span class="normal"><a href="#__codelineno-0-5789">5789</a></span>
<span class="normal"><a href="#__codelineno-0-5790">5790</a></span>
<span class="normal"><a href="#__codelineno-0-5791">5791</a></span>
<span class="normal"><a href="#__codelineno-0-5792">5792</a></span>
<span class="normal"><a href="#__codelineno-0-5793">5793</a></span>
<span class="normal"><a href="#__codelineno-0-5794">5794</a></span>
<span class="normal"><a href="#__codelineno-0-5795">5795</a></span>
<span class="normal"><a href="#__codelineno-0-5796">5796</a></span>
<span class="normal"><a href="#__codelineno-0-5797">5797</a></span>
<span class="normal"><a href="#__codelineno-0-5798">5798</a></span>
<span class="normal"><a href="#__codelineno-0-5799">5799</a></span>
<span class="normal"><a href="#__codelineno-0-5800">5800</a></span>
<span class="normal"><a href="#__codelineno-0-5801">5801</a></span>
<span class="normal"><a href="#__codelineno-0-5802">5802</a></span>
<span class="normal"><a href="#__codelineno-0-5803">5803</a></span>
<span class="normal"><a href="#__codelineno-0-5804">5804</a></span>
<span class="normal"><a href="#__codelineno-0-5805">5805</a></span>
<span class="normal"><a href="#__codelineno-0-5806">5806</a></span>
<span class="normal"><a href="#__codelineno-0-5807">5807</a></span>
<span class="normal"><a href="#__codelineno-0-5808">5808</a></span>
<span class="normal"><a href="#__codelineno-0-5809">5809</a></span>
<span class="normal"><a href="#__codelineno-0-5810">5810</a></span>
<span class="normal"><a href="#__codelineno-0-5811">5811</a></span>
<span class="normal"><a href="#__codelineno-0-5812">5812</a></span>
<span class="normal"><a href="#__codelineno-0-5813">5813</a></span>
<span class="normal"><a href="#__codelineno-0-5814">5814</a></span>
<span class="normal"><a href="#__codelineno-0-5815">5815</a></span>
<span class="normal"><a href="#__codelineno-0-5816">5816</a></span>
<span class="normal"><a href="#__codelineno-0-5817">5817</a></span>
<span class="normal"><a href="#__codelineno-0-5818">5818</a></span>
<span class="normal"><a href="#__codelineno-0-5819">5819</a></span>
<span class="normal"><a href="#__codelineno-0-5820">5820</a></span>
<span class="normal"><a href="#__codelineno-0-5821">5821</a></span>
<span class="normal"><a href="#__codelineno-0-5822">5822</a></span>
<span class="normal"><a href="#__codelineno-0-5823">5823</a></span>
<span class="normal"><a href="#__codelineno-0-5824">5824</a></span>
<span class="normal"><a href="#__codelineno-0-5825">5825</a></span>
<span class="normal"><a href="#__codelineno-0-5826">5826</a></span>
<span class="normal"><a href="#__codelineno-0-5827">5827</a></span>
<span class="normal"><a href="#__codelineno-0-5828">5828</a></span>
<span class="normal"><a href="#__codelineno-0-5829">5829</a></span>
<span class="normal"><a href="#__codelineno-0-5830">5830</a></span>
<span class="normal"><a href="#__codelineno-0-5831">5831</a></span>
<span class="normal"><a href="#__codelineno-0-5832">5832</a></span>
<span class="normal"><a href="#__codelineno-0-5833">5833</a></span>
<span class="normal"><a href="#__codelineno-0-5834">5834</a></span>
<span class="normal"><a href="#__codelineno-0-5835">5835</a></span>
<span class="normal"><a href="#__codelineno-0-5836">5836</a></span>
<span class="normal"><a href="#__codelineno-0-5837">5837</a></span>
<span class="normal"><a href="#__codelineno-0-5838">5838</a></span>
<span class="normal"><a href="#__codelineno-0-5839">5839</a></span>
<span class="normal"><a href="#__codelineno-0-5840">5840</a></span>
<span class="normal"><a href="#__codelineno-0-5841">5841</a></span>
<span class="normal"><a href="#__codelineno-0-5842">5842</a></span>
<span class="normal"><a href="#__codelineno-0-5843">5843</a></span>
<span class="normal"><a href="#__codelineno-0-5844">5844</a></span>
<span class="normal"><a href="#__codelineno-0-5845">5845</a></span>
<span class="normal"><a href="#__codelineno-0-5846">5846</a></span>
<span class="normal"><a href="#__codelineno-0-5847">5847</a></span>
<span class="normal"><a href="#__codelineno-0-5848">5848</a></span>
<span class="normal"><a href="#__codelineno-0-5849">5849</a></span>
<span class="normal"><a href="#__codelineno-0-5850">5850</a></span>
<span class="normal"><a href="#__codelineno-0-5851">5851</a></span>
<span class="normal"><a href="#__codelineno-0-5852">5852</a></span>
<span class="normal"><a href="#__codelineno-0-5853">5853</a></span>
<span class="normal"><a href="#__codelineno-0-5854">5854</a></span>
<span class="normal"><a href="#__codelineno-0-5855">5855</a></span>
<span class="normal"><a href="#__codelineno-0-5856">5856</a></span>
<span class="normal"><a href="#__codelineno-0-5857">5857</a></span>
<span class="normal"><a href="#__codelineno-0-5858">5858</a></span>
<span class="normal"><a href="#__codelineno-0-5859">5859</a></span>
<span class="normal"><a href="#__codelineno-0-5860">5860</a></span>
<span class="normal"><a href="#__codelineno-0-5861">5861</a></span>
<span class="normal"><a href="#__codelineno-0-5862">5862</a></span>
<span class="normal"><a href="#__codelineno-0-5863">5863</a></span>
<span class="normal"><a href="#__codelineno-0-5864">5864</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-5778" name="__codelineno-0-5778"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_overview</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">overview_index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Band</span><span class="p">:</span>
<a id="__codelineno-0-5779" name="__codelineno-0-5779"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get an overview of a band.</span>
<a id="__codelineno-0-5780" name="__codelineno-0-5780"></a>
<a id="__codelineno-0-5781" name="__codelineno-0-5781"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-5782" name="__codelineno-0-5782"></a><span class="sd">        band (int):</span>
<a id="__codelineno-0-5783" name="__codelineno-0-5783"></a><span class="sd">            The band index. Defaults to 0.</span>
<a id="__codelineno-0-5784" name="__codelineno-0-5784"></a><span class="sd">        overview_index (int):</span>
<a id="__codelineno-0-5785" name="__codelineno-0-5785"></a><span class="sd">            Index of the overview. Defaults to 0.</span>
<a id="__codelineno-0-5786" name="__codelineno-0-5786"></a>
<a id="__codelineno-0-5787" name="__codelineno-0-5787"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-5788" name="__codelineno-0-5788"></a><span class="sd">        gdal.Band:</span>
<a id="__codelineno-0-5789" name="__codelineno-0-5789"></a><span class="sd">            GDAL band object.</span>
<a id="__codelineno-0-5790" name="__codelineno-0-5790"></a>
<a id="__codelineno-0-5791" name="__codelineno-0-5791"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-5792" name="__codelineno-0-5792"></a><span class="sd">        - Create `Dataset` consisting of 4 bands, 10 rows, 10 columns, at lon/lat (0, 0):</span>
<a id="__codelineno-0-5793" name="__codelineno-0-5793"></a>
<a id="__codelineno-0-5794" name="__codelineno-0-5794"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5795" name="__codelineno-0-5795"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-5796" name="__codelineno-0-5796"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.randint(1, 10, size=(4, 10, 10))</span>
<a id="__codelineno-0-5797" name="__codelineno-0-5797"></a><span class="sd">          &gt;&gt;&gt; print(arr[0, :, :]) # doctest: +SKIP</span>
<a id="__codelineno-0-5798" name="__codelineno-0-5798"></a><span class="sd">          array([[6, 3, 3, 7, 4, 8, 4, 3, 8, 7],</span>
<a id="__codelineno-0-5799" name="__codelineno-0-5799"></a><span class="sd">                 [6, 7, 3, 7, 8, 6, 3, 4, 3, 8],</span>
<a id="__codelineno-0-5800" name="__codelineno-0-5800"></a><span class="sd">                 [5, 8, 9, 6, 7, 7, 5, 4, 6, 4],</span>
<a id="__codelineno-0-5801" name="__codelineno-0-5801"></a><span class="sd">                 [2, 9, 9, 5, 8, 4, 9, 6, 8, 7],</span>
<a id="__codelineno-0-5802" name="__codelineno-0-5802"></a><span class="sd">                 [5, 8, 3, 9, 1, 5, 7, 9, 5, 9],</span>
<a id="__codelineno-0-5803" name="__codelineno-0-5803"></a><span class="sd">                 [8, 3, 7, 2, 2, 5, 2, 8, 7, 7],</span>
<a id="__codelineno-0-5804" name="__codelineno-0-5804"></a><span class="sd">                 [1, 1, 4, 2, 2, 2, 6, 5, 9, 2],</span>
<a id="__codelineno-0-5805" name="__codelineno-0-5805"></a><span class="sd">                 [6, 3, 2, 9, 8, 8, 1, 9, 7, 7],</span>
<a id="__codelineno-0-5806" name="__codelineno-0-5806"></a><span class="sd">                 [4, 1, 3, 1, 6, 7, 5, 4, 8, 7],</span>
<a id="__codelineno-0-5807" name="__codelineno-0-5807"></a><span class="sd">                 [9, 7, 2, 1, 4, 6, 1, 2, 3, 3]], dtype=int32)</span>
<a id="__codelineno-0-5808" name="__codelineno-0-5808"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-5809" name="__codelineno-0-5809"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-5810" name="__codelineno-0-5810"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-5811" name="__codelineno-0-5811"></a>
<a id="__codelineno-0-5812" name="__codelineno-0-5812"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5813" name="__codelineno-0-5813"></a>
<a id="__codelineno-0-5814" name="__codelineno-0-5814"></a><span class="sd">        - Now, create overviews using the default parameters and inspect them:</span>
<a id="__codelineno-0-5815" name="__codelineno-0-5815"></a>
<a id="__codelineno-0-5816" name="__codelineno-0-5816"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5817" name="__codelineno-0-5817"></a><span class="sd">          &gt;&gt;&gt; dataset.create_overviews()</span>
<a id="__codelineno-0-5818" name="__codelineno-0-5818"></a><span class="sd">          &gt;&gt;&gt; print(dataset.overview_count)  # doctest: +SKIP</span>
<a id="__codelineno-0-5819" name="__codelineno-0-5819"></a><span class="sd">          [4, 4, 4, 4]</span>
<a id="__codelineno-0-5820" name="__codelineno-0-5820"></a>
<a id="__codelineno-0-5821" name="__codelineno-0-5821"></a><span class="sd">          &gt;&gt;&gt; ovr = dataset.get_overview(band=0, overview_index=0)</span>
<a id="__codelineno-0-5822" name="__codelineno-0-5822"></a><span class="sd">          &gt;&gt;&gt; print(ovr)  # doctest: +SKIP</span>
<a id="__codelineno-0-5823" name="__codelineno-0-5823"></a><span class="sd">          &lt;osgeo.gdal.Band; proxy of &lt;Swig Object of type &#39;GDALRasterBandShadow *&#39; at 0x0000017E2B5AF1B0&gt; &gt;</span>
<a id="__codelineno-0-5824" name="__codelineno-0-5824"></a><span class="sd">          &gt;&gt;&gt; ovr.ReadAsArray()  # doctest: +SKIP</span>
<a id="__codelineno-0-5825" name="__codelineno-0-5825"></a><span class="sd">          array([[6, 3, 4, 4, 8],</span>
<a id="__codelineno-0-5826" name="__codelineno-0-5826"></a><span class="sd">                 [5, 9, 7, 5, 6],</span>
<a id="__codelineno-0-5827" name="__codelineno-0-5827"></a><span class="sd">                 [5, 3, 1, 7, 5],</span>
<a id="__codelineno-0-5828" name="__codelineno-0-5828"></a><span class="sd">                 [1, 4, 2, 6, 9],</span>
<a id="__codelineno-0-5829" name="__codelineno-0-5829"></a><span class="sd">                 [4, 3, 6, 5, 8]], dtype=int32)</span>
<a id="__codelineno-0-5830" name="__codelineno-0-5830"></a><span class="sd">          &gt;&gt;&gt; ovr = dataset.get_overview(band=0, overview_index=1)</span>
<a id="__codelineno-0-5831" name="__codelineno-0-5831"></a><span class="sd">          &gt;&gt;&gt; ovr.ReadAsArray()  # doctest: +SKIP</span>
<a id="__codelineno-0-5832" name="__codelineno-0-5832"></a><span class="sd">          array([[6, 7, 3],</span>
<a id="__codelineno-0-5833" name="__codelineno-0-5833"></a><span class="sd">                 [2, 5, 6],</span>
<a id="__codelineno-0-5834" name="__codelineno-0-5834"></a><span class="sd">                 [6, 9, 9]], dtype=int32)</span>
<a id="__codelineno-0-5835" name="__codelineno-0-5835"></a><span class="sd">          &gt;&gt;&gt; ovr = dataset.get_overview(band=0, overview_index=2)</span>
<a id="__codelineno-0-5836" name="__codelineno-0-5836"></a><span class="sd">          &gt;&gt;&gt; ovr.ReadAsArray()  # doctest: +SKIP</span>
<a id="__codelineno-0-5837" name="__codelineno-0-5837"></a><span class="sd">          array([[6, 8],</span>
<a id="__codelineno-0-5838" name="__codelineno-0-5838"></a><span class="sd">                 [8, 5]], dtype=int32)</span>
<a id="__codelineno-0-5839" name="__codelineno-0-5839"></a><span class="sd">          &gt;&gt;&gt; ovr = dataset.get_overview(band=0, overview_index=3)</span>
<a id="__codelineno-0-5840" name="__codelineno-0-5840"></a><span class="sd">          &gt;&gt;&gt; ovr.ReadAsArray()  # doctest: +SKIP</span>
<a id="__codelineno-0-5841" name="__codelineno-0-5841"></a><span class="sd">          array([[6]], dtype=int32)</span>
<a id="__codelineno-0-5842" name="__codelineno-0-5842"></a>
<a id="__codelineno-0-5843" name="__codelineno-0-5843"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5844" name="__codelineno-0-5844"></a>
<a id="__codelineno-0-5845" name="__codelineno-0-5845"></a><span class="sd">    See Also:</span>
<a id="__codelineno-0-5846" name="__codelineno-0-5846"></a><span class="sd">        - Dataset.create_overviews: Create the dataset overviews if they exist.</span>
<a id="__codelineno-0-5847" name="__codelineno-0-5847"></a><span class="sd">        - Dataset.create_overviews: Recreate the dataset overviews if they exist.</span>
<a id="__codelineno-0-5848" name="__codelineno-0-5848"></a><span class="sd">        - Dataset.overview_count: Number of overviews.</span>
<a id="__codelineno-0-5849" name="__codelineno-0-5849"></a><span class="sd">        - Dataset.read_overview_array: Read overview values.</span>
<a id="__codelineno-0-5850" name="__codelineno-0-5850"></a><span class="sd">        - Dataset.plot: Plot a band.</span>
<a id="__codelineno-0-5851" name="__codelineno-0-5851"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-5852" name="__codelineno-0-5852"></a>    <span class="n">band</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-5853" name="__codelineno-0-5853"></a>    <span class="n">n_views</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">GetOverviewCount</span><span class="p">()</span>
<a id="__codelineno-0-5854" name="__codelineno-0-5854"></a>    <span class="k">if</span> <span class="n">n_views</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5855" name="__codelineno-0-5855"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-5856" name="__codelineno-0-5856"></a>            <span class="s2">&quot;The band has no overviews, please use the `create_overviews` method to build the overviews&quot;</span>
<a id="__codelineno-0-5857" name="__codelineno-0-5857"></a>        <span class="p">)</span>
<a id="__codelineno-0-5858" name="__codelineno-0-5858"></a>
<a id="__codelineno-0-5859" name="__codelineno-0-5859"></a>    <span class="k">if</span> <span class="n">overview_index</span> <span class="o">&gt;=</span> <span class="n">n_views</span><span class="p">:</span>
<a id="__codelineno-0-5860" name="__codelineno-0-5860"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;overview_level should be less than </span><span class="si">{</span><span class="n">n_views</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-5861" name="__codelineno-0-5861"></a>
<a id="__codelineno-0-5862" name="__codelineno-0-5862"></a>    <span class="c1"># TODO:find away to create a Dataset object from the overview band and to return the Dataset object instead</span>
<a id="__codelineno-0-5863" name="__codelineno-0-5863"></a>    <span class="c1">#  of the gdal band.</span>
<a id="__codelineno-0-5864" name="__codelineno-0-5864"></a>    <span class="k">return</span> <span class="n">band</span><span class="o">.</span><span class="n">GetOverview</span><span class="p">(</span><span class="n">overview_index</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.read_overview_array" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.read_overview_array" class="toclink">
            <code class="highlight language-python"><span class="n">read_overview_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overview_index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.read_overview_array" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Read overview values.</p>
<div class="highlight"><pre><span></span><code>- Read the values stored in a given band or overview.
</code></pre></div>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>band</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The band to read. If None and multiple bands exist, reads all bands at the given overview.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>overview_index</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Index of the overview. Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>np.ndarray:
Array with the values in the raster.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create <code>Dataset</code> consisting of 4 bands, 10 rows, 10 columns, at lon/lat (0, 0):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:])</span>     <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">array</span><span class="p">([[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>       <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>       <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>       <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>       <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>       <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>       <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>       <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>       <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>       <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int32</span><span class="p">)</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>Create overviews using the default parameters and read overview arrays:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">create_overviews</span><span class="p">()</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">overview_count</span><span class="p">)</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">read_overview_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">overview_index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="n">array</span><span class="p">([[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>       <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>       <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>       <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>       <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int32</span><span class="p">)</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">read_overview_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">overview_index</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="n">array</span><span class="p">([[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>       <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>       <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int32</span><span class="p">)</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">read_overview_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">overview_index</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="n">array</span><span class="p">([[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>       <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int32</span><span class="p">)</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">read_overview_array</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">overview_index</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="n">array</span><span class="p">([[</span><span class="mi">6</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int32</span><span class="p">)</span>
</code></pre></div>


<details class="see-also" open>
  <summary>See Also</summary>
  <ul>
<li>Dataset.create_overviews: Create the dataset overviews.</li>
<li>Dataset.create_overviews: Recreate the dataset overviews if they exist.</li>
<li>Dataset.get_overview: Get an overview of a band.</li>
<li>Dataset.overview_count: Number of overviews.</li>
<li>Dataset.plot: Plot a band.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-5866">5866</a></span>
<span class="normal"><a href="#__codelineno-0-5867">5867</a></span>
<span class="normal"><a href="#__codelineno-0-5868">5868</a></span>
<span class="normal"><a href="#__codelineno-0-5869">5869</a></span>
<span class="normal"><a href="#__codelineno-0-5870">5870</a></span>
<span class="normal"><a href="#__codelineno-0-5871">5871</a></span>
<span class="normal"><a href="#__codelineno-0-5872">5872</a></span>
<span class="normal"><a href="#__codelineno-0-5873">5873</a></span>
<span class="normal"><a href="#__codelineno-0-5874">5874</a></span>
<span class="normal"><a href="#__codelineno-0-5875">5875</a></span>
<span class="normal"><a href="#__codelineno-0-5876">5876</a></span>
<span class="normal"><a href="#__codelineno-0-5877">5877</a></span>
<span class="normal"><a href="#__codelineno-0-5878">5878</a></span>
<span class="normal"><a href="#__codelineno-0-5879">5879</a></span>
<span class="normal"><a href="#__codelineno-0-5880">5880</a></span>
<span class="normal"><a href="#__codelineno-0-5881">5881</a></span>
<span class="normal"><a href="#__codelineno-0-5882">5882</a></span>
<span class="normal"><a href="#__codelineno-0-5883">5883</a></span>
<span class="normal"><a href="#__codelineno-0-5884">5884</a></span>
<span class="normal"><a href="#__codelineno-0-5885">5885</a></span>
<span class="normal"><a href="#__codelineno-0-5886">5886</a></span>
<span class="normal"><a href="#__codelineno-0-5887">5887</a></span>
<span class="normal"><a href="#__codelineno-0-5888">5888</a></span>
<span class="normal"><a href="#__codelineno-0-5889">5889</a></span>
<span class="normal"><a href="#__codelineno-0-5890">5890</a></span>
<span class="normal"><a href="#__codelineno-0-5891">5891</a></span>
<span class="normal"><a href="#__codelineno-0-5892">5892</a></span>
<span class="normal"><a href="#__codelineno-0-5893">5893</a></span>
<span class="normal"><a href="#__codelineno-0-5894">5894</a></span>
<span class="normal"><a href="#__codelineno-0-5895">5895</a></span>
<span class="normal"><a href="#__codelineno-0-5896">5896</a></span>
<span class="normal"><a href="#__codelineno-0-5897">5897</a></span>
<span class="normal"><a href="#__codelineno-0-5898">5898</a></span>
<span class="normal"><a href="#__codelineno-0-5899">5899</a></span>
<span class="normal"><a href="#__codelineno-0-5900">5900</a></span>
<span class="normal"><a href="#__codelineno-0-5901">5901</a></span>
<span class="normal"><a href="#__codelineno-0-5902">5902</a></span>
<span class="normal"><a href="#__codelineno-0-5903">5903</a></span>
<span class="normal"><a href="#__codelineno-0-5904">5904</a></span>
<span class="normal"><a href="#__codelineno-0-5905">5905</a></span>
<span class="normal"><a href="#__codelineno-0-5906">5906</a></span>
<span class="normal"><a href="#__codelineno-0-5907">5907</a></span>
<span class="normal"><a href="#__codelineno-0-5908">5908</a></span>
<span class="normal"><a href="#__codelineno-0-5909">5909</a></span>
<span class="normal"><a href="#__codelineno-0-5910">5910</a></span>
<span class="normal"><a href="#__codelineno-0-5911">5911</a></span>
<span class="normal"><a href="#__codelineno-0-5912">5912</a></span>
<span class="normal"><a href="#__codelineno-0-5913">5913</a></span>
<span class="normal"><a href="#__codelineno-0-5914">5914</a></span>
<span class="normal"><a href="#__codelineno-0-5915">5915</a></span>
<span class="normal"><a href="#__codelineno-0-5916">5916</a></span>
<span class="normal"><a href="#__codelineno-0-5917">5917</a></span>
<span class="normal"><a href="#__codelineno-0-5918">5918</a></span>
<span class="normal"><a href="#__codelineno-0-5919">5919</a></span>
<span class="normal"><a href="#__codelineno-0-5920">5920</a></span>
<span class="normal"><a href="#__codelineno-0-5921">5921</a></span>
<span class="normal"><a href="#__codelineno-0-5922">5922</a></span>
<span class="normal"><a href="#__codelineno-0-5923">5923</a></span>
<span class="normal"><a href="#__codelineno-0-5924">5924</a></span>
<span class="normal"><a href="#__codelineno-0-5925">5925</a></span>
<span class="normal"><a href="#__codelineno-0-5926">5926</a></span>
<span class="normal"><a href="#__codelineno-0-5927">5927</a></span>
<span class="normal"><a href="#__codelineno-0-5928">5928</a></span>
<span class="normal"><a href="#__codelineno-0-5929">5929</a></span>
<span class="normal"><a href="#__codelineno-0-5930">5930</a></span>
<span class="normal"><a href="#__codelineno-0-5931">5931</a></span>
<span class="normal"><a href="#__codelineno-0-5932">5932</a></span>
<span class="normal"><a href="#__codelineno-0-5933">5933</a></span>
<span class="normal"><a href="#__codelineno-0-5934">5934</a></span>
<span class="normal"><a href="#__codelineno-0-5935">5935</a></span>
<span class="normal"><a href="#__codelineno-0-5936">5936</a></span>
<span class="normal"><a href="#__codelineno-0-5937">5937</a></span>
<span class="normal"><a href="#__codelineno-0-5938">5938</a></span>
<span class="normal"><a href="#__codelineno-0-5939">5939</a></span>
<span class="normal"><a href="#__codelineno-0-5940">5940</a></span>
<span class="normal"><a href="#__codelineno-0-5941">5941</a></span>
<span class="normal"><a href="#__codelineno-0-5942">5942</a></span>
<span class="normal"><a href="#__codelineno-0-5943">5943</a></span>
<span class="normal"><a href="#__codelineno-0-5944">5944</a></span>
<span class="normal"><a href="#__codelineno-0-5945">5945</a></span>
<span class="normal"><a href="#__codelineno-0-5946">5946</a></span>
<span class="normal"><a href="#__codelineno-0-5947">5947</a></span>
<span class="normal"><a href="#__codelineno-0-5948">5948</a></span>
<span class="normal"><a href="#__codelineno-0-5949">5949</a></span>
<span class="normal"><a href="#__codelineno-0-5950">5950</a></span>
<span class="normal"><a href="#__codelineno-0-5951">5951</a></span>
<span class="normal"><a href="#__codelineno-0-5952">5952</a></span>
<span class="normal"><a href="#__codelineno-0-5953">5953</a></span>
<span class="normal"><a href="#__codelineno-0-5954">5954</a></span>
<span class="normal"><a href="#__codelineno-0-5955">5955</a></span>
<span class="normal"><a href="#__codelineno-0-5956">5956</a></span>
<span class="normal"><a href="#__codelineno-0-5957">5957</a></span>
<span class="normal"><a href="#__codelineno-0-5958">5958</a></span>
<span class="normal"><a href="#__codelineno-0-5959">5959</a></span>
<span class="normal"><a href="#__codelineno-0-5960">5960</a></span>
<span class="normal"><a href="#__codelineno-0-5961">5961</a></span>
<span class="normal"><a href="#__codelineno-0-5962">5962</a></span>
<span class="normal"><a href="#__codelineno-0-5963">5963</a></span>
<span class="normal"><a href="#__codelineno-0-5964">5964</a></span>
<span class="normal"><a href="#__codelineno-0-5965">5965</a></span>
<span class="normal"><a href="#__codelineno-0-5966">5966</a></span>
<span class="normal"><a href="#__codelineno-0-5967">5967</a></span>
<span class="normal"><a href="#__codelineno-0-5968">5968</a></span>
<span class="normal"><a href="#__codelineno-0-5969">5969</a></span>
<span class="normal"><a href="#__codelineno-0-5970">5970</a></span>
<span class="normal"><a href="#__codelineno-0-5971">5971</a></span>
<span class="normal"><a href="#__codelineno-0-5972">5972</a></span>
<span class="normal"><a href="#__codelineno-0-5973">5973</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-5866" name="__codelineno-0-5866"></a><span class="k">def</span><span class="w"> </span><span class="nf">read_overview_array</span><span class="p">(</span>
<a id="__codelineno-0-5867" name="__codelineno-0-5867"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">overview_index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-5868" name="__codelineno-0-5868"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<a id="__codelineno-0-5869" name="__codelineno-0-5869"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Read overview values.</span>
<a id="__codelineno-0-5870" name="__codelineno-0-5870"></a>
<a id="__codelineno-0-5871" name="__codelineno-0-5871"></a><span class="sd">        - Read the values stored in a given band or overview.</span>
<a id="__codelineno-0-5872" name="__codelineno-0-5872"></a>
<a id="__codelineno-0-5873" name="__codelineno-0-5873"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-5874" name="__codelineno-0-5874"></a><span class="sd">        band (int | None):</span>
<a id="__codelineno-0-5875" name="__codelineno-0-5875"></a><span class="sd">            The band to read. If None and multiple bands exist, reads all bands at the given overview.</span>
<a id="__codelineno-0-5876" name="__codelineno-0-5876"></a><span class="sd">        overview_index (int):</span>
<a id="__codelineno-0-5877" name="__codelineno-0-5877"></a><span class="sd">            Index of the overview. Defaults to 0.</span>
<a id="__codelineno-0-5878" name="__codelineno-0-5878"></a>
<a id="__codelineno-0-5879" name="__codelineno-0-5879"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-5880" name="__codelineno-0-5880"></a><span class="sd">        np.ndarray:</span>
<a id="__codelineno-0-5881" name="__codelineno-0-5881"></a><span class="sd">            Array with the values in the raster.</span>
<a id="__codelineno-0-5882" name="__codelineno-0-5882"></a>
<a id="__codelineno-0-5883" name="__codelineno-0-5883"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-5884" name="__codelineno-0-5884"></a><span class="sd">        - Create `Dataset` consisting of 4 bands, 10 rows, 10 columns, at lon/lat (0, 0):</span>
<a id="__codelineno-0-5885" name="__codelineno-0-5885"></a>
<a id="__codelineno-0-5886" name="__codelineno-0-5886"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5887" name="__codelineno-0-5887"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-5888" name="__codelineno-0-5888"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.randint(1, 10, size=(4, 10, 10))</span>
<a id="__codelineno-0-5889" name="__codelineno-0-5889"></a><span class="sd">          &gt;&gt;&gt; print(arr[0, :, :])     # doctest: +SKIP</span>
<a id="__codelineno-0-5890" name="__codelineno-0-5890"></a><span class="sd">          array([[6, 3, 3, 7, 4, 8, 4, 3, 8, 7],</span>
<a id="__codelineno-0-5891" name="__codelineno-0-5891"></a><span class="sd">                 [6, 7, 3, 7, 8, 6, 3, 4, 3, 8],</span>
<a id="__codelineno-0-5892" name="__codelineno-0-5892"></a><span class="sd">                 [5, 8, 9, 6, 7, 7, 5, 4, 6, 4],</span>
<a id="__codelineno-0-5893" name="__codelineno-0-5893"></a><span class="sd">                 [2, 9, 9, 5, 8, 4, 9, 6, 8, 7],</span>
<a id="__codelineno-0-5894" name="__codelineno-0-5894"></a><span class="sd">                 [5, 8, 3, 9, 1, 5, 7, 9, 5, 9],</span>
<a id="__codelineno-0-5895" name="__codelineno-0-5895"></a><span class="sd">                 [8, 3, 7, 2, 2, 5, 2, 8, 7, 7],</span>
<a id="__codelineno-0-5896" name="__codelineno-0-5896"></a><span class="sd">                 [1, 1, 4, 2, 2, 2, 6, 5, 9, 2],</span>
<a id="__codelineno-0-5897" name="__codelineno-0-5897"></a><span class="sd">                 [6, 3, 2, 9, 8, 8, 1, 9, 7, 7],</span>
<a id="__codelineno-0-5898" name="__codelineno-0-5898"></a><span class="sd">                 [4, 1, 3, 1, 6, 7, 5, 4, 8, 7],</span>
<a id="__codelineno-0-5899" name="__codelineno-0-5899"></a><span class="sd">                 [9, 7, 2, 1, 4, 6, 1, 2, 3, 3]], dtype=int32)</span>
<a id="__codelineno-0-5900" name="__codelineno-0-5900"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-5901" name="__codelineno-0-5901"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-5902" name="__codelineno-0-5902"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-5903" name="__codelineno-0-5903"></a>
<a id="__codelineno-0-5904" name="__codelineno-0-5904"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5905" name="__codelineno-0-5905"></a>
<a id="__codelineno-0-5906" name="__codelineno-0-5906"></a><span class="sd">        - Create overviews using the default parameters and read overview arrays:</span>
<a id="__codelineno-0-5907" name="__codelineno-0-5907"></a>
<a id="__codelineno-0-5908" name="__codelineno-0-5908"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-5909" name="__codelineno-0-5909"></a><span class="sd">          &gt;&gt;&gt; dataset.create_overviews()</span>
<a id="__codelineno-0-5910" name="__codelineno-0-5910"></a><span class="sd">          &gt;&gt;&gt; print(dataset.overview_count)  # doctest: +SKIP</span>
<a id="__codelineno-0-5911" name="__codelineno-0-5911"></a><span class="sd">          [4, 4, 4, 4]</span>
<a id="__codelineno-0-5912" name="__codelineno-0-5912"></a>
<a id="__codelineno-0-5913" name="__codelineno-0-5913"></a><span class="sd">          &gt;&gt;&gt; arr = dataset.read_overview_array(band=0, overview_index=0)</span>
<a id="__codelineno-0-5914" name="__codelineno-0-5914"></a><span class="sd">          &gt;&gt;&gt; print(arr)  # doctest: +SKIP</span>
<a id="__codelineno-0-5915" name="__codelineno-0-5915"></a><span class="sd">          array([[6, 3, 4, 4, 8],</span>
<a id="__codelineno-0-5916" name="__codelineno-0-5916"></a><span class="sd">                 [5, 9, 7, 5, 6],</span>
<a id="__codelineno-0-5917" name="__codelineno-0-5917"></a><span class="sd">                 [5, 3, 1, 7, 5],</span>
<a id="__codelineno-0-5918" name="__codelineno-0-5918"></a><span class="sd">                 [1, 4, 2, 6, 9],</span>
<a id="__codelineno-0-5919" name="__codelineno-0-5919"></a><span class="sd">                 [4, 3, 6, 5, 8]], dtype=int32)</span>
<a id="__codelineno-0-5920" name="__codelineno-0-5920"></a><span class="sd">          &gt;&gt;&gt; arr = dataset.read_overview_array(band=0, overview_index=1)</span>
<a id="__codelineno-0-5921" name="__codelineno-0-5921"></a><span class="sd">          &gt;&gt;&gt; print(arr)  # doctest: +SKIP</span>
<a id="__codelineno-0-5922" name="__codelineno-0-5922"></a><span class="sd">          array([[6, 7, 3],</span>
<a id="__codelineno-0-5923" name="__codelineno-0-5923"></a><span class="sd">                 [2, 5, 6],</span>
<a id="__codelineno-0-5924" name="__codelineno-0-5924"></a><span class="sd">                 [6, 9, 9]], dtype=int32)</span>
<a id="__codelineno-0-5925" name="__codelineno-0-5925"></a><span class="sd">          &gt;&gt;&gt; arr = dataset.read_overview_array(band=0, overview_index=2)</span>
<a id="__codelineno-0-5926" name="__codelineno-0-5926"></a><span class="sd">          &gt;&gt;&gt; print(arr)  # doctest: +SKIP</span>
<a id="__codelineno-0-5927" name="__codelineno-0-5927"></a><span class="sd">          array([[6, 8],</span>
<a id="__codelineno-0-5928" name="__codelineno-0-5928"></a><span class="sd">                 [8, 5]], dtype=int32)</span>
<a id="__codelineno-0-5929" name="__codelineno-0-5929"></a><span class="sd">          &gt;&gt;&gt; arr = dataset.read_overview_array(band=0, overview_index=3)</span>
<a id="__codelineno-0-5930" name="__codelineno-0-5930"></a><span class="sd">          &gt;&gt;&gt; print(arr)  # doctest: +SKIP</span>
<a id="__codelineno-0-5931" name="__codelineno-0-5931"></a><span class="sd">          array([[6]], dtype=int32)</span>
<a id="__codelineno-0-5932" name="__codelineno-0-5932"></a>
<a id="__codelineno-0-5933" name="__codelineno-0-5933"></a><span class="sd">          ```</span>
<a id="__codelineno-0-5934" name="__codelineno-0-5934"></a>
<a id="__codelineno-0-5935" name="__codelineno-0-5935"></a><span class="sd">    See Also:</span>
<a id="__codelineno-0-5936" name="__codelineno-0-5936"></a><span class="sd">        - Dataset.create_overviews: Create the dataset overviews.</span>
<a id="__codelineno-0-5937" name="__codelineno-0-5937"></a><span class="sd">        - Dataset.create_overviews: Recreate the dataset overviews if they exist.</span>
<a id="__codelineno-0-5938" name="__codelineno-0-5938"></a><span class="sd">        - Dataset.get_overview: Get an overview of a band.</span>
<a id="__codelineno-0-5939" name="__codelineno-0-5939"></a><span class="sd">        - Dataset.overview_count: Number of overviews.</span>
<a id="__codelineno-0-5940" name="__codelineno-0-5940"></a><span class="sd">        - Dataset.plot: Plot a band.</span>
<a id="__codelineno-0-5941" name="__codelineno-0-5941"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-5942" name="__codelineno-0-5942"></a>    <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-5943" name="__codelineno-0-5943"></a>        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">elem</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">overview_count</span><span class="p">):</span>
<a id="__codelineno-0-5944" name="__codelineno-0-5944"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-5945" name="__codelineno-0-5945"></a>                <span class="s2">&quot;Some bands do not have overviews, please create overviews first&quot;</span>
<a id="__codelineno-0-5946" name="__codelineno-0-5946"></a>            <span class="p">)</span>
<a id="__codelineno-0-5947" name="__codelineno-0-5947"></a>        <span class="c1"># read the array from the first overview to get the size of the array.</span>
<a id="__codelineno-0-5948" name="__codelineno-0-5948"></a>        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_overview</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
<a id="__codelineno-0-5949" name="__codelineno-0-5949"></a>        <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span>
<a id="__codelineno-0-5950" name="__codelineno-0-5950"></a>            <span class="p">(</span>
<a id="__codelineno-0-5951" name="__codelineno-0-5951"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">,</span>
<a id="__codelineno-0-5952" name="__codelineno-0-5952"></a>                <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-0-5953" name="__codelineno-0-5953"></a>                <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<a id="__codelineno-0-5954" name="__codelineno-0-5954"></a>            <span class="p">),</span>
<a id="__codelineno-0-5955" name="__codelineno-0-5955"></a>            <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">numpy_dtype</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-0-5956" name="__codelineno-0-5956"></a>        <span class="p">)</span>
<a id="__codelineno-0-5957" name="__codelineno-0-5957"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="p">):</span>
<a id="__codelineno-0-5958" name="__codelineno-0-5958"></a>            <span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_overview</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">overview_index</span><span class="p">)</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
<a id="__codelineno-0-5959" name="__codelineno-0-5959"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-5960" name="__codelineno-0-5960"></a>        <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-5961" name="__codelineno-0-5961"></a>            <span class="n">band</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-5962" name="__codelineno-0-5962"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-5963" name="__codelineno-0-5963"></a>            <span class="k">if</span> <span class="n">band</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-5964" name="__codelineno-0-5964"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-5965" name="__codelineno-0-5965"></a>                    <span class="sa">f</span><span class="s2">&quot;band index should be between 0 and </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">band_count</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-5966" name="__codelineno-0-5966"></a>                <span class="p">)</span>
<a id="__codelineno-0-5967" name="__codelineno-0-5967"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">overview_count</span><span class="p">[</span><span class="n">band</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-5968" name="__codelineno-0-5968"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-5969" name="__codelineno-0-5969"></a>                    <span class="sa">f</span><span class="s2">&quot;band </span><span class="si">{</span><span class="n">band</span><span class="si">}</span><span class="s2"> has no overviews, please create overviews first&quot;</span>
<a id="__codelineno-0-5970" name="__codelineno-0-5970"></a>                <span class="p">)</span>
<a id="__codelineno-0-5971" name="__codelineno-0-5971"></a>        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_overview</span><span class="p">(</span><span class="n">band</span><span class="p">,</span> <span class="n">overview_index</span><span class="p">)</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
<a id="__codelineno-0-5972" name="__codelineno-0-5972"></a>
<a id="__codelineno-0-5973" name="__codelineno-0-5973"></a>    <span class="k">return</span> <span class="n">arr</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.get_band_by_color" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.get_band_by_color" class="toclink">
            <code class="highlight language-python"><span class="n">get_band_by_color</span><span class="p">(</span><span class="n">color_name</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.get_band_by_color" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Get the band associated with a given color.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>color_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>One of ['undefined', 'gray_index', 'palette_index', 'red', 'green', 'blue', 'alpha', 'hue',
'saturation', 'lightness', 'cyan', 'magenta', 'yellow', 'black', 'YCbCr_YBand', 'YCbCr_CbBand',
'YCbCr_CrBand'].</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Band index.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create <code>Dataset</code> consisting of 3 bands and assign RGB colors:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span><span class="o">.</span><span class="n">band_color</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;blue&#39;</span><span class="p">}</span>
</code></pre></div>
<ul>
<li>Now use <code>get_band_by_color</code> to know which band is the red band, for example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">band_index</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_band_by_color</span><span class="p">(</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">band_index</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="mi">0</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-6036">6036</a></span>
<span class="normal"><a href="#__codelineno-0-6037">6037</a></span>
<span class="normal"><a href="#__codelineno-0-6038">6038</a></span>
<span class="normal"><a href="#__codelineno-0-6039">6039</a></span>
<span class="normal"><a href="#__codelineno-0-6040">6040</a></span>
<span class="normal"><a href="#__codelineno-0-6041">6041</a></span>
<span class="normal"><a href="#__codelineno-0-6042">6042</a></span>
<span class="normal"><a href="#__codelineno-0-6043">6043</a></span>
<span class="normal"><a href="#__codelineno-0-6044">6044</a></span>
<span class="normal"><a href="#__codelineno-0-6045">6045</a></span>
<span class="normal"><a href="#__codelineno-0-6046">6046</a></span>
<span class="normal"><a href="#__codelineno-0-6047">6047</a></span>
<span class="normal"><a href="#__codelineno-0-6048">6048</a></span>
<span class="normal"><a href="#__codelineno-0-6049">6049</a></span>
<span class="normal"><a href="#__codelineno-0-6050">6050</a></span>
<span class="normal"><a href="#__codelineno-0-6051">6051</a></span>
<span class="normal"><a href="#__codelineno-0-6052">6052</a></span>
<span class="normal"><a href="#__codelineno-0-6053">6053</a></span>
<span class="normal"><a href="#__codelineno-0-6054">6054</a></span>
<span class="normal"><a href="#__codelineno-0-6055">6055</a></span>
<span class="normal"><a href="#__codelineno-0-6056">6056</a></span>
<span class="normal"><a href="#__codelineno-0-6057">6057</a></span>
<span class="normal"><a href="#__codelineno-0-6058">6058</a></span>
<span class="normal"><a href="#__codelineno-0-6059">6059</a></span>
<span class="normal"><a href="#__codelineno-0-6060">6060</a></span>
<span class="normal"><a href="#__codelineno-0-6061">6061</a></span>
<span class="normal"><a href="#__codelineno-0-6062">6062</a></span>
<span class="normal"><a href="#__codelineno-0-6063">6063</a></span>
<span class="normal"><a href="#__codelineno-0-6064">6064</a></span>
<span class="normal"><a href="#__codelineno-0-6065">6065</a></span>
<span class="normal"><a href="#__codelineno-0-6066">6066</a></span>
<span class="normal"><a href="#__codelineno-0-6067">6067</a></span>
<span class="normal"><a href="#__codelineno-0-6068">6068</a></span>
<span class="normal"><a href="#__codelineno-0-6069">6069</a></span>
<span class="normal"><a href="#__codelineno-0-6070">6070</a></span>
<span class="normal"><a href="#__codelineno-0-6071">6071</a></span>
<span class="normal"><a href="#__codelineno-0-6072">6072</a></span>
<span class="normal"><a href="#__codelineno-0-6073">6073</a></span>
<span class="normal"><a href="#__codelineno-0-6074">6074</a></span>
<span class="normal"><a href="#__codelineno-0-6075">6075</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-6036" name="__codelineno-0-6036"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_band_by_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-6037" name="__codelineno-0-6037"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the band associated with a given color.</span>
<a id="__codelineno-0-6038" name="__codelineno-0-6038"></a>
<a id="__codelineno-0-6039" name="__codelineno-0-6039"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-6040" name="__codelineno-0-6040"></a><span class="sd">        color_name (str):</span>
<a id="__codelineno-0-6041" name="__codelineno-0-6041"></a><span class="sd">            One of [&#39;undefined&#39;, &#39;gray_index&#39;, &#39;palette_index&#39;, &#39;red&#39;, &#39;green&#39;, &#39;blue&#39;, &#39;alpha&#39;, &#39;hue&#39;,</span>
<a id="__codelineno-0-6042" name="__codelineno-0-6042"></a><span class="sd">            &#39;saturation&#39;, &#39;lightness&#39;, &#39;cyan&#39;, &#39;magenta&#39;, &#39;yellow&#39;, &#39;black&#39;, &#39;YCbCr_YBand&#39;, &#39;YCbCr_CbBand&#39;,</span>
<a id="__codelineno-0-6043" name="__codelineno-0-6043"></a><span class="sd">            &#39;YCbCr_CrBand&#39;].</span>
<a id="__codelineno-0-6044" name="__codelineno-0-6044"></a>
<a id="__codelineno-0-6045" name="__codelineno-0-6045"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-6046" name="__codelineno-0-6046"></a><span class="sd">        int:</span>
<a id="__codelineno-0-6047" name="__codelineno-0-6047"></a><span class="sd">            Band index.</span>
<a id="__codelineno-0-6048" name="__codelineno-0-6048"></a>
<a id="__codelineno-0-6049" name="__codelineno-0-6049"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-6050" name="__codelineno-0-6050"></a><span class="sd">        - Create `Dataset` consisting of 3 bands and assign RGB colors:</span>
<a id="__codelineno-0-6051" name="__codelineno-0-6051"></a>
<a id="__codelineno-0-6052" name="__codelineno-0-6052"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-6053" name="__codelineno-0-6053"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.randint(1, 3, size=(3, 10, 10))</span>
<a id="__codelineno-0-6054" name="__codelineno-0-6054"></a><span class="sd">          &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-6055" name="__codelineno-0-6055"></a><span class="sd">          &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-6056" name="__codelineno-0-6056"></a><span class="sd">          &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-6057" name="__codelineno-0-6057"></a><span class="sd">          &gt;&gt;&gt; dataset.band_color = {0: &#39;red&#39;, 1: &#39;green&#39;, 2: &#39;blue&#39;}</span>
<a id="__codelineno-0-6058" name="__codelineno-0-6058"></a>
<a id="__codelineno-0-6059" name="__codelineno-0-6059"></a><span class="sd">          ```</span>
<a id="__codelineno-0-6060" name="__codelineno-0-6060"></a>
<a id="__codelineno-0-6061" name="__codelineno-0-6061"></a><span class="sd">        - Now use `get_band_by_color` to know which band is the red band, for example:</span>
<a id="__codelineno-0-6062" name="__codelineno-0-6062"></a>
<a id="__codelineno-0-6063" name="__codelineno-0-6063"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-6064" name="__codelineno-0-6064"></a><span class="sd">          &gt;&gt;&gt; band_index = dataset.get_band_by_color(&#39;red&#39;)</span>
<a id="__codelineno-0-6065" name="__codelineno-0-6065"></a><span class="sd">          &gt;&gt;&gt; print(band_index)</span>
<a id="__codelineno-0-6066" name="__codelineno-0-6066"></a><span class="sd">          0</span>
<a id="__codelineno-0-6067" name="__codelineno-0-6067"></a>
<a id="__codelineno-0-6068" name="__codelineno-0-6068"></a><span class="sd">          ```</span>
<a id="__codelineno-0-6069" name="__codelineno-0-6069"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-6070" name="__codelineno-0-6070"></a>    <span class="n">colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_color</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<a id="__codelineno-0-6071" name="__codelineno-0-6071"></a>    <span class="k">if</span> <span class="n">color_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
<a id="__codelineno-0-6072" name="__codelineno-0-6072"></a>        <span class="n">band_index</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-6073" name="__codelineno-0-6073"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-6074" name="__codelineno-0-6074"></a>        <span class="n">band_index</span> <span class="o">=</span> <span class="n">colors</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">color_name</span><span class="p">)</span>
<a id="__codelineno-0-6075" name="__codelineno-0-6075"></a>    <span class="k">return</span> <span class="n">band_index</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.get_histogram" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.get_histogram" class="toclink">
            <code class="highlight language-python"><span class="n">get_histogram</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">min_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">include_out_of_range</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">approx_ok</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.get_histogram" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Get histogram.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>band</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Band index. Default is 1.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bins</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of bins. Default is 6.</p>
              </div>
            </td>
            <td>
                  <code>6</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>min_value</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum value. Default is None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_value</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum value. Default is None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_out_of_range</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, add out-of-range values into the first and last buckets. Default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>approx_ok</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, compute an approximate histogram by using subsampling or overviews. Default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="list">list</span>, <span title="list">list</span>[<span title="tuple">tuple</span>[<span title="typing.Any">Any</span>, <span title="typing.Any">Any</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[list, list[tuple[Any, Any]]]:
Histogram values and bin edges.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="hint" open>
  <summary>Hint</summary>
  <ul>
<li>
<p>The value of the histogram will be stored in an xml file by the name of the raster file with the extension
    of .aux.xml.</p>
</li>
<li>
<p>The content of the file will be like the following:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="w">    </span><span class="nt">&lt;PAMDataset&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">      </span><span class="nt">&lt;PAMRasterBand</span><span class="w"> </span><span class="na">band=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">        </span><span class="nt">&lt;Description&gt;</span>Band_1<span class="nt">&lt;/Description&gt;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">        </span><span class="nt">&lt;Histograms&gt;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">          </span><span class="nt">&lt;HistItem&gt;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">            </span><span class="nt">&lt;HistMin&gt;</span>0<span class="nt">&lt;/HistMin&gt;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">            </span><span class="nt">&lt;HistMax&gt;</span>88<span class="nt">&lt;/HistMax&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">            </span><span class="nt">&lt;BucketCount&gt;</span>6<span class="nt">&lt;/BucketCount&gt;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">            </span><span class="nt">&lt;IncludeOutOfRange&gt;</span>0<span class="nt">&lt;/IncludeOutOfRange&gt;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">            </span><span class="nt">&lt;Approximate&gt;</span>0<span class="nt">&lt;/Approximate&gt;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">            </span><span class="nt">&lt;HistCounts&gt;</span>75|6|0|4|2|1<span class="nt">&lt;/HistCounts&gt;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">          </span><span class="nt">&lt;/HistItem&gt;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">        </span><span class="nt">&lt;/Histograms&gt;</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">      </span><span class="nt">&lt;/PAMRasterBand&gt;</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">    </span><span class="nt">&lt;/PAMDataset&gt;</span>
</code></pre></div></p>
</li>
</ul>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>Create <code>Dataset</code> consists of 4 bands, 10 rows, 10 columns, at the point lon/lat (0, 0).</li>
</ul>
<p>```python</p>
<blockquote>
<blockquote>
<blockquote>
<p>import numpy as np
arr = np.random.randint(1, 12, size=(10, 10))
print(arr)    # doctest: +SKIP
  [[ 4  1  1  2  6  9  2  5  1  8]
   [ 1 11  5  6  2  5  4  6  6  7]
   [ 5  2 10  4  8 11  4 11 11  1]
   [ 2  3  6  3  1  5 11 10 10  7]
   [ 8  2 11  3  1  3  5  4 10 10]
   [ 1  2  1  6 10  3  6  4  2  8]
   [ 9  5  7  9  7  8  1 11  4  4]
   [ 7  7  2  2  5  3  7  2  9  9]
   [ 2 10  3  2  1 11  5  9  8 11]
   [ 1  5  6 11  3  3  8  1  2  1]]
top_left_corner = (0, 0)
cell_size = 0.05
dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</p>
</blockquote>
</blockquote>
</blockquote>
<p>```</p>
<ul>
<li>Now, let's get the histogram of the first band using the <code>get_histogram</code> method with the default
    parameters:
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">hist</span><span class="p">,</span> <span class="n">ranges</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_histogram</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">hist</span><span class="p">)</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="p">[</span><span class="mi">28</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">ranges</span><span class="p">)</span>   <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="p">[(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.67</span><span class="p">),</span> <span class="p">(</span><span class="mf">2.67</span><span class="p">,</span> <span class="mf">4.34</span><span class="p">),</span> <span class="p">(</span><span class="mf">4.34</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">6.0</span><span class="p">,</span> <span class="mf">7.67</span><span class="p">),</span> <span class="p">(</span><span class="mf">7.67</span><span class="p">,</span> <span class="mf">9.34</span><span class="p">),</span> <span class="p">(</span><span class="mf">9.34</span><span class="p">,</span> <span class="mf">11.0</span><span class="p">)]</span>
</code></pre></div></li>
<li>we can also exclude values from the histogram by using the <code>min_value</code> and <code>max_value</code>:
    <div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">hist</span><span class="p">,</span> <span class="n">ranges</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_histogram</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">min_value</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">hist</span><span class="p">)</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">ranges</span><span class="p">)</span>   <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="p">[(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.835</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.835</span><span class="p">,</span> <span class="mf">2.67</span><span class="p">),</span> <span class="p">(</span><span class="mf">2.67</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">3.5</span><span class="p">,</span> <span class="mf">4.34</span><span class="p">),</span> <span class="p">(</span><span class="mf">4.34</span><span class="p">,</span> <span class="mf">5.167</span><span class="p">),</span> <span class="p">(</span><span class="mf">5.167</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">)]</span>
</code></pre></div></li>
<li>For datasets with big dimensions, computing the histogram can take some time; approximating the computation
    of the histogram can save a lot of computation time. When using the parameter <code>approx_ok</code> with a <code>True</code>
    value the histogram will be calculated from resampling the band or from the overviews if they exist.
    <div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">hist</span><span class="p">,</span> <span class="n">ranges</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_histogram</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">approx_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">hist</span><span class="p">)</span>  <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="p">[</span><span class="mi">28</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">ranges</span><span class="p">)</span>   <span class="c1"># doctest: +SKIP</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="p">[(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.67</span><span class="p">),</span> <span class="p">(</span><span class="mf">2.67</span><span class="p">,</span> <span class="mf">4.34</span><span class="p">),</span> <span class="p">(</span><span class="mf">4.34</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">6.0</span><span class="p">,</span> <span class="mf">7.67</span><span class="p">),</span> <span class="p">(</span><span class="mf">7.67</span><span class="p">,</span> <span class="mf">9.34</span><span class="p">),</span> <span class="p">(</span><span class="mf">9.34</span><span class="p">,</span> <span class="mf">11.0</span><span class="p">)]</span>
</code></pre></div></li>
<li>As you see for small datasets, the approximation of the histogram will be the same as without approximation.</li>
</ul>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-6310">6310</a></span>
<span class="normal"><a href="#__codelineno-0-6311">6311</a></span>
<span class="normal"><a href="#__codelineno-0-6312">6312</a></span>
<span class="normal"><a href="#__codelineno-0-6313">6313</a></span>
<span class="normal"><a href="#__codelineno-0-6314">6314</a></span>
<span class="normal"><a href="#__codelineno-0-6315">6315</a></span>
<span class="normal"><a href="#__codelineno-0-6316">6316</a></span>
<span class="normal"><a href="#__codelineno-0-6317">6317</a></span>
<span class="normal"><a href="#__codelineno-0-6318">6318</a></span>
<span class="normal"><a href="#__codelineno-0-6319">6319</a></span>
<span class="normal"><a href="#__codelineno-0-6320">6320</a></span>
<span class="normal"><a href="#__codelineno-0-6321">6321</a></span>
<span class="normal"><a href="#__codelineno-0-6322">6322</a></span>
<span class="normal"><a href="#__codelineno-0-6323">6323</a></span>
<span class="normal"><a href="#__codelineno-0-6324">6324</a></span>
<span class="normal"><a href="#__codelineno-0-6325">6325</a></span>
<span class="normal"><a href="#__codelineno-0-6326">6326</a></span>
<span class="normal"><a href="#__codelineno-0-6327">6327</a></span>
<span class="normal"><a href="#__codelineno-0-6328">6328</a></span>
<span class="normal"><a href="#__codelineno-0-6329">6329</a></span>
<span class="normal"><a href="#__codelineno-0-6330">6330</a></span>
<span class="normal"><a href="#__codelineno-0-6331">6331</a></span>
<span class="normal"><a href="#__codelineno-0-6332">6332</a></span>
<span class="normal"><a href="#__codelineno-0-6333">6333</a></span>
<span class="normal"><a href="#__codelineno-0-6334">6334</a></span>
<span class="normal"><a href="#__codelineno-0-6335">6335</a></span>
<span class="normal"><a href="#__codelineno-0-6336">6336</a></span>
<span class="normal"><a href="#__codelineno-0-6337">6337</a></span>
<span class="normal"><a href="#__codelineno-0-6338">6338</a></span>
<span class="normal"><a href="#__codelineno-0-6339">6339</a></span>
<span class="normal"><a href="#__codelineno-0-6340">6340</a></span>
<span class="normal"><a href="#__codelineno-0-6341">6341</a></span>
<span class="normal"><a href="#__codelineno-0-6342">6342</a></span>
<span class="normal"><a href="#__codelineno-0-6343">6343</a></span>
<span class="normal"><a href="#__codelineno-0-6344">6344</a></span>
<span class="normal"><a href="#__codelineno-0-6345">6345</a></span>
<span class="normal"><a href="#__codelineno-0-6346">6346</a></span>
<span class="normal"><a href="#__codelineno-0-6347">6347</a></span>
<span class="normal"><a href="#__codelineno-0-6348">6348</a></span>
<span class="normal"><a href="#__codelineno-0-6349">6349</a></span>
<span class="normal"><a href="#__codelineno-0-6350">6350</a></span>
<span class="normal"><a href="#__codelineno-0-6351">6351</a></span>
<span class="normal"><a href="#__codelineno-0-6352">6352</a></span>
<span class="normal"><a href="#__codelineno-0-6353">6353</a></span>
<span class="normal"><a href="#__codelineno-0-6354">6354</a></span>
<span class="normal"><a href="#__codelineno-0-6355">6355</a></span>
<span class="normal"><a href="#__codelineno-0-6356">6356</a></span>
<span class="normal"><a href="#__codelineno-0-6357">6357</a></span>
<span class="normal"><a href="#__codelineno-0-6358">6358</a></span>
<span class="normal"><a href="#__codelineno-0-6359">6359</a></span>
<span class="normal"><a href="#__codelineno-0-6360">6360</a></span>
<span class="normal"><a href="#__codelineno-0-6361">6361</a></span>
<span class="normal"><a href="#__codelineno-0-6362">6362</a></span>
<span class="normal"><a href="#__codelineno-0-6363">6363</a></span>
<span class="normal"><a href="#__codelineno-0-6364">6364</a></span>
<span class="normal"><a href="#__codelineno-0-6365">6365</a></span>
<span class="normal"><a href="#__codelineno-0-6366">6366</a></span>
<span class="normal"><a href="#__codelineno-0-6367">6367</a></span>
<span class="normal"><a href="#__codelineno-0-6368">6368</a></span>
<span class="normal"><a href="#__codelineno-0-6369">6369</a></span>
<span class="normal"><a href="#__codelineno-0-6370">6370</a></span>
<span class="normal"><a href="#__codelineno-0-6371">6371</a></span>
<span class="normal"><a href="#__codelineno-0-6372">6372</a></span>
<span class="normal"><a href="#__codelineno-0-6373">6373</a></span>
<span class="normal"><a href="#__codelineno-0-6374">6374</a></span>
<span class="normal"><a href="#__codelineno-0-6375">6375</a></span>
<span class="normal"><a href="#__codelineno-0-6376">6376</a></span>
<span class="normal"><a href="#__codelineno-0-6377">6377</a></span>
<span class="normal"><a href="#__codelineno-0-6378">6378</a></span>
<span class="normal"><a href="#__codelineno-0-6379">6379</a></span>
<span class="normal"><a href="#__codelineno-0-6380">6380</a></span>
<span class="normal"><a href="#__codelineno-0-6381">6381</a></span>
<span class="normal"><a href="#__codelineno-0-6382">6382</a></span>
<span class="normal"><a href="#__codelineno-0-6383">6383</a></span>
<span class="normal"><a href="#__codelineno-0-6384">6384</a></span>
<span class="normal"><a href="#__codelineno-0-6385">6385</a></span>
<span class="normal"><a href="#__codelineno-0-6386">6386</a></span>
<span class="normal"><a href="#__codelineno-0-6387">6387</a></span>
<span class="normal"><a href="#__codelineno-0-6388">6388</a></span>
<span class="normal"><a href="#__codelineno-0-6389">6389</a></span>
<span class="normal"><a href="#__codelineno-0-6390">6390</a></span>
<span class="normal"><a href="#__codelineno-0-6391">6391</a></span>
<span class="normal"><a href="#__codelineno-0-6392">6392</a></span>
<span class="normal"><a href="#__codelineno-0-6393">6393</a></span>
<span class="normal"><a href="#__codelineno-0-6394">6394</a></span>
<span class="normal"><a href="#__codelineno-0-6395">6395</a></span>
<span class="normal"><a href="#__codelineno-0-6396">6396</a></span>
<span class="normal"><a href="#__codelineno-0-6397">6397</a></span>
<span class="normal"><a href="#__codelineno-0-6398">6398</a></span>
<span class="normal"><a href="#__codelineno-0-6399">6399</a></span>
<span class="normal"><a href="#__codelineno-0-6400">6400</a></span>
<span class="normal"><a href="#__codelineno-0-6401">6401</a></span>
<span class="normal"><a href="#__codelineno-0-6402">6402</a></span>
<span class="normal"><a href="#__codelineno-0-6403">6403</a></span>
<span class="normal"><a href="#__codelineno-0-6404">6404</a></span>
<span class="normal"><a href="#__codelineno-0-6405">6405</a></span>
<span class="normal"><a href="#__codelineno-0-6406">6406</a></span>
<span class="normal"><a href="#__codelineno-0-6407">6407</a></span>
<span class="normal"><a href="#__codelineno-0-6408">6408</a></span>
<span class="normal"><a href="#__codelineno-0-6409">6409</a></span>
<span class="normal"><a href="#__codelineno-0-6410">6410</a></span>
<span class="normal"><a href="#__codelineno-0-6411">6411</a></span>
<span class="normal"><a href="#__codelineno-0-6412">6412</a></span>
<span class="normal"><a href="#__codelineno-0-6413">6413</a></span>
<span class="normal"><a href="#__codelineno-0-6414">6414</a></span>
<span class="normal"><a href="#__codelineno-0-6415">6415</a></span>
<span class="normal"><a href="#__codelineno-0-6416">6416</a></span>
<span class="normal"><a href="#__codelineno-0-6417">6417</a></span>
<span class="normal"><a href="#__codelineno-0-6418">6418</a></span>
<span class="normal"><a href="#__codelineno-0-6419">6419</a></span>
<span class="normal"><a href="#__codelineno-0-6420">6420</a></span>
<span class="normal"><a href="#__codelineno-0-6421">6421</a></span>
<span class="normal"><a href="#__codelineno-0-6422">6422</a></span>
<span class="normal"><a href="#__codelineno-0-6423">6423</a></span>
<span class="normal"><a href="#__codelineno-0-6424">6424</a></span>
<span class="normal"><a href="#__codelineno-0-6425">6425</a></span>
<span class="normal"><a href="#__codelineno-0-6426">6426</a></span>
<span class="normal"><a href="#__codelineno-0-6427">6427</a></span>
<span class="normal"><a href="#__codelineno-0-6428">6428</a></span>
<span class="normal"><a href="#__codelineno-0-6429">6429</a></span>
<span class="normal"><a href="#__codelineno-0-6430">6430</a></span>
<span class="normal"><a href="#__codelineno-0-6431">6431</a></span>
<span class="normal"><a href="#__codelineno-0-6432">6432</a></span>
<span class="normal"><a href="#__codelineno-0-6433">6433</a></span>
<span class="normal"><a href="#__codelineno-0-6434">6434</a></span>
<span class="normal"><a href="#__codelineno-0-6435">6435</a></span>
<span class="normal"><a href="#__codelineno-0-6436">6436</a></span>
<span class="normal"><a href="#__codelineno-0-6437">6437</a></span>
<span class="normal"><a href="#__codelineno-0-6438">6438</a></span>
<span class="normal"><a href="#__codelineno-0-6439">6439</a></span>
<span class="normal"><a href="#__codelineno-0-6440">6440</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-6310" name="__codelineno-0-6310"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_histogram</span><span class="p">(</span>
<a id="__codelineno-0-6311" name="__codelineno-0-6311"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-6312" name="__codelineno-0-6312"></a>    <span class="n">band</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-6313" name="__codelineno-0-6313"></a>    <span class="n">bins</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
<a id="__codelineno-0-6314" name="__codelineno-0-6314"></a>    <span class="n">min_value</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-6315" name="__codelineno-0-6315"></a>    <span class="n">max_value</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-6316" name="__codelineno-0-6316"></a>    <span class="n">include_out_of_range</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-6317" name="__codelineno-0-6317"></a>    <span class="n">approx_ok</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-6318" name="__codelineno-0-6318"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]:</span>
<a id="__codelineno-0-6319" name="__codelineno-0-6319"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get histogram.</span>
<a id="__codelineno-0-6320" name="__codelineno-0-6320"></a>
<a id="__codelineno-0-6321" name="__codelineno-0-6321"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-6322" name="__codelineno-0-6322"></a><span class="sd">        band (int, optional):</span>
<a id="__codelineno-0-6323" name="__codelineno-0-6323"></a><span class="sd">            Band index. Default is 1.</span>
<a id="__codelineno-0-6324" name="__codelineno-0-6324"></a><span class="sd">        bins (int, optional):</span>
<a id="__codelineno-0-6325" name="__codelineno-0-6325"></a><span class="sd">            Number of bins. Default is 6.</span>
<a id="__codelineno-0-6326" name="__codelineno-0-6326"></a><span class="sd">        min_value (float, optional):</span>
<a id="__codelineno-0-6327" name="__codelineno-0-6327"></a><span class="sd">            Minimum value. Default is None.</span>
<a id="__codelineno-0-6328" name="__codelineno-0-6328"></a><span class="sd">        max_value (float, optional):</span>
<a id="__codelineno-0-6329" name="__codelineno-0-6329"></a><span class="sd">            Maximum value. Default is None.</span>
<a id="__codelineno-0-6330" name="__codelineno-0-6330"></a><span class="sd">        include_out_of_range (bool, optional):</span>
<a id="__codelineno-0-6331" name="__codelineno-0-6331"></a><span class="sd">            If True, add out-of-range values into the first and last buckets. Default is False.</span>
<a id="__codelineno-0-6332" name="__codelineno-0-6332"></a><span class="sd">        approx_ok (bool, optional):</span>
<a id="__codelineno-0-6333" name="__codelineno-0-6333"></a><span class="sd">            If True, compute an approximate histogram by using subsampling or overviews. Default is False.</span>
<a id="__codelineno-0-6334" name="__codelineno-0-6334"></a>
<a id="__codelineno-0-6335" name="__codelineno-0-6335"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-6336" name="__codelineno-0-6336"></a><span class="sd">        tuple[list, list[tuple[Any, Any]]]:</span>
<a id="__codelineno-0-6337" name="__codelineno-0-6337"></a><span class="sd">            Histogram values and bin edges.</span>
<a id="__codelineno-0-6338" name="__codelineno-0-6338"></a>
<a id="__codelineno-0-6339" name="__codelineno-0-6339"></a><span class="sd">    Hint:</span>
<a id="__codelineno-0-6340" name="__codelineno-0-6340"></a><span class="sd">        - The value of the histogram will be stored in an xml file by the name of the raster file with the extension</span>
<a id="__codelineno-0-6341" name="__codelineno-0-6341"></a><span class="sd">            of .aux.xml.</span>
<a id="__codelineno-0-6342" name="__codelineno-0-6342"></a>
<a id="__codelineno-0-6343" name="__codelineno-0-6343"></a><span class="sd">        - The content of the file will be like the following:</span>
<a id="__codelineno-0-6344" name="__codelineno-0-6344"></a><span class="sd">          ```xml</span>
<a id="__codelineno-0-6345" name="__codelineno-0-6345"></a>
<a id="__codelineno-0-6346" name="__codelineno-0-6346"></a><span class="sd">              &lt;PAMDataset&gt;</span>
<a id="__codelineno-0-6347" name="__codelineno-0-6347"></a><span class="sd">                &lt;PAMRasterBand band=&quot;1&quot;&gt;</span>
<a id="__codelineno-0-6348" name="__codelineno-0-6348"></a><span class="sd">                  &lt;Description&gt;Band_1&lt;/Description&gt;</span>
<a id="__codelineno-0-6349" name="__codelineno-0-6349"></a><span class="sd">                  &lt;Histograms&gt;</span>
<a id="__codelineno-0-6350" name="__codelineno-0-6350"></a><span class="sd">                    &lt;HistItem&gt;</span>
<a id="__codelineno-0-6351" name="__codelineno-0-6351"></a><span class="sd">                      &lt;HistMin&gt;0&lt;/HistMin&gt;</span>
<a id="__codelineno-0-6352" name="__codelineno-0-6352"></a><span class="sd">                      &lt;HistMax&gt;88&lt;/HistMax&gt;</span>
<a id="__codelineno-0-6353" name="__codelineno-0-6353"></a><span class="sd">                      &lt;BucketCount&gt;6&lt;/BucketCount&gt;</span>
<a id="__codelineno-0-6354" name="__codelineno-0-6354"></a><span class="sd">                      &lt;IncludeOutOfRange&gt;0&lt;/IncludeOutOfRange&gt;</span>
<a id="__codelineno-0-6355" name="__codelineno-0-6355"></a><span class="sd">                      &lt;Approximate&gt;0&lt;/Approximate&gt;</span>
<a id="__codelineno-0-6356" name="__codelineno-0-6356"></a><span class="sd">                      &lt;HistCounts&gt;75|6|0|4|2|1&lt;/HistCounts&gt;</span>
<a id="__codelineno-0-6357" name="__codelineno-0-6357"></a><span class="sd">                    &lt;/HistItem&gt;</span>
<a id="__codelineno-0-6358" name="__codelineno-0-6358"></a><span class="sd">                  &lt;/Histograms&gt;</span>
<a id="__codelineno-0-6359" name="__codelineno-0-6359"></a><span class="sd">                &lt;/PAMRasterBand&gt;</span>
<a id="__codelineno-0-6360" name="__codelineno-0-6360"></a><span class="sd">              &lt;/PAMDataset&gt;</span>
<a id="__codelineno-0-6361" name="__codelineno-0-6361"></a>
<a id="__codelineno-0-6362" name="__codelineno-0-6362"></a><span class="sd">          ```</span>
<a id="__codelineno-0-6363" name="__codelineno-0-6363"></a>
<a id="__codelineno-0-6364" name="__codelineno-0-6364"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-6365" name="__codelineno-0-6365"></a><span class="sd">        - Create `Dataset` consists of 4 bands, 10 rows, 10 columns, at the point lon/lat (0, 0).</span>
<a id="__codelineno-0-6366" name="__codelineno-0-6366"></a>
<a id="__codelineno-0-6367" name="__codelineno-0-6367"></a><span class="sd">          ```python</span>
<a id="__codelineno-0-6368" name="__codelineno-0-6368"></a><span class="sd">          &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-6369" name="__codelineno-0-6369"></a><span class="sd">          &gt;&gt;&gt; arr = np.random.randint(1, 12, size=(10, 10))</span>
<a id="__codelineno-0-6370" name="__codelineno-0-6370"></a><span class="sd">          &gt;&gt;&gt; print(arr)    # doctest: +SKIP</span>
<a id="__codelineno-0-6371" name="__codelineno-0-6371"></a><span class="sd">          [[ 4  1  1  2  6  9  2  5  1  8]</span>
<a id="__codelineno-0-6372" name="__codelineno-0-6372"></a><span class="sd">           [ 1 11  5  6  2  5  4  6  6  7]</span>
<a id="__codelineno-0-6373" name="__codelineno-0-6373"></a><span class="sd">           [ 5  2 10  4  8 11  4 11 11  1]</span>
<a id="__codelineno-0-6374" name="__codelineno-0-6374"></a><span class="sd">           [ 2  3  6  3  1  5 11 10 10  7]</span>
<a id="__codelineno-0-6375" name="__codelineno-0-6375"></a><span class="sd">           [ 8  2 11  3  1  3  5  4 10 10]</span>
<a id="__codelineno-0-6376" name="__codelineno-0-6376"></a><span class="sd">           [ 1  2  1  6 10  3  6  4  2  8]</span>
<a id="__codelineno-0-6377" name="__codelineno-0-6377"></a><span class="sd">           [ 9  5  7  9  7  8  1 11  4  4]</span>
<a id="__codelineno-0-6378" name="__codelineno-0-6378"></a><span class="sd">           [ 7  7  2  2  5  3  7  2  9  9]</span>
<a id="__codelineno-0-6379" name="__codelineno-0-6379"></a><span class="sd">           [ 2 10  3  2  1 11  5  9  8 11]</span>
<a id="__codelineno-0-6380" name="__codelineno-0-6380"></a><span class="sd">           [ 1  5  6 11  3  3  8  1  2  1]]</span>
<a id="__codelineno-0-6381" name="__codelineno-0-6381"></a><span class="sd">           &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-6382" name="__codelineno-0-6382"></a><span class="sd">           &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-6383" name="__codelineno-0-6383"></a><span class="sd">           &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size, epsg=4326)</span>
<a id="__codelineno-0-6384" name="__codelineno-0-6384"></a>
<a id="__codelineno-0-6385" name="__codelineno-0-6385"></a><span class="sd">           ```</span>
<a id="__codelineno-0-6386" name="__codelineno-0-6386"></a>
<a id="__codelineno-0-6387" name="__codelineno-0-6387"></a><span class="sd">        - Now, let&#39;s get the histogram of the first band using the `get_histogram` method with the default</span>
<a id="__codelineno-0-6388" name="__codelineno-0-6388"></a><span class="sd">            parameters:</span>
<a id="__codelineno-0-6389" name="__codelineno-0-6389"></a><span class="sd">            ```python</span>
<a id="__codelineno-0-6390" name="__codelineno-0-6390"></a><span class="sd">            &gt;&gt;&gt; hist, ranges = dataset.get_histogram(band=0)</span>
<a id="__codelineno-0-6391" name="__codelineno-0-6391"></a><span class="sd">            &gt;&gt;&gt; print(hist)  # doctest: +SKIP</span>
<a id="__codelineno-0-6392" name="__codelineno-0-6392"></a><span class="sd">            [28, 17, 10, 15, 13, 7]</span>
<a id="__codelineno-0-6393" name="__codelineno-0-6393"></a><span class="sd">            &gt;&gt;&gt; print(ranges)   # doctest: +SKIP</span>
<a id="__codelineno-0-6394" name="__codelineno-0-6394"></a><span class="sd">            [(1.0, 2.67), (2.67, 4.34), (4.34, 6.0), (6.0, 7.67), (7.67, 9.34), (9.34, 11.0)]</span>
<a id="__codelineno-0-6395" name="__codelineno-0-6395"></a>
<a id="__codelineno-0-6396" name="__codelineno-0-6396"></a><span class="sd">            ```</span>
<a id="__codelineno-0-6397" name="__codelineno-0-6397"></a><span class="sd">        - we can also exclude values from the histogram by using the `min_value` and `max_value`:</span>
<a id="__codelineno-0-6398" name="__codelineno-0-6398"></a><span class="sd">            ```python</span>
<a id="__codelineno-0-6399" name="__codelineno-0-6399"></a><span class="sd">            &gt;&gt;&gt; hist, ranges = dataset.get_histogram(band=0, min_value=5, max_value=10)</span>
<a id="__codelineno-0-6400" name="__codelineno-0-6400"></a><span class="sd">            &gt;&gt;&gt; print(hist)  # doctest: +SKIP</span>
<a id="__codelineno-0-6401" name="__codelineno-0-6401"></a><span class="sd">            [10, 8, 7, 7, 6, 0]</span>
<a id="__codelineno-0-6402" name="__codelineno-0-6402"></a><span class="sd">            &gt;&gt;&gt; print(ranges)   # doctest: +SKIP</span>
<a id="__codelineno-0-6403" name="__codelineno-0-6403"></a><span class="sd">            [(1.0, 1.835), (1.835, 2.67), (2.67, 3.5), (3.5, 4.34), (4.34, 5.167), (5.167, 6.0)]</span>
<a id="__codelineno-0-6404" name="__codelineno-0-6404"></a>
<a id="__codelineno-0-6405" name="__codelineno-0-6405"></a><span class="sd">            ```</span>
<a id="__codelineno-0-6406" name="__codelineno-0-6406"></a><span class="sd">        - For datasets with big dimensions, computing the histogram can take some time; approximating the computation</span>
<a id="__codelineno-0-6407" name="__codelineno-0-6407"></a><span class="sd">            of the histogram can save a lot of computation time. When using the parameter `approx_ok` with a `True`</span>
<a id="__codelineno-0-6408" name="__codelineno-0-6408"></a><span class="sd">            value the histogram will be calculated from resampling the band or from the overviews if they exist.</span>
<a id="__codelineno-0-6409" name="__codelineno-0-6409"></a><span class="sd">            ```python</span>
<a id="__codelineno-0-6410" name="__codelineno-0-6410"></a><span class="sd">            &gt;&gt;&gt; hist, ranges = dataset.get_histogram(band=0, approx_ok=True)</span>
<a id="__codelineno-0-6411" name="__codelineno-0-6411"></a><span class="sd">            &gt;&gt;&gt; print(hist)  # doctest: +SKIP</span>
<a id="__codelineno-0-6412" name="__codelineno-0-6412"></a><span class="sd">            [28, 17, 10, 15, 13, 7]</span>
<a id="__codelineno-0-6413" name="__codelineno-0-6413"></a><span class="sd">            &gt;&gt;&gt; print(ranges)   # doctest: +SKIP</span>
<a id="__codelineno-0-6414" name="__codelineno-0-6414"></a><span class="sd">            [(1.0, 2.67), (2.67, 4.34), (4.34, 6.0), (6.0, 7.67), (7.67, 9.34), (9.34, 11.0)]</span>
<a id="__codelineno-0-6415" name="__codelineno-0-6415"></a>
<a id="__codelineno-0-6416" name="__codelineno-0-6416"></a><span class="sd">            ```</span>
<a id="__codelineno-0-6417" name="__codelineno-0-6417"></a><span class="sd">        - As you see for small datasets, the approximation of the histogram will be the same as without approximation.</span>
<a id="__codelineno-0-6418" name="__codelineno-0-6418"></a>
<a id="__codelineno-0-6419" name="__codelineno-0-6419"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-6420" name="__codelineno-0-6420"></a>    <span class="n">band</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iloc</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>
<a id="__codelineno-0-6421" name="__codelineno-0-6421"></a>    <span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ComputeRasterMinMax</span><span class="p">()</span>
<a id="__codelineno-0-6422" name="__codelineno-0-6422"></a>    <span class="k">if</span> <span class="n">min_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-6423" name="__codelineno-0-6423"></a>        <span class="n">min_value</span> <span class="o">=</span> <span class="n">min_val</span>
<a id="__codelineno-0-6424" name="__codelineno-0-6424"></a>    <span class="k">if</span> <span class="n">max_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-6425" name="__codelineno-0-6425"></a>        <span class="n">max_value</span> <span class="o">=</span> <span class="n">max_val</span>
<a id="__codelineno-0-6426" name="__codelineno-0-6426"></a>
<a id="__codelineno-0-6427" name="__codelineno-0-6427"></a>    <span class="n">bin_width</span> <span class="o">=</span> <span class="p">(</span><span class="n">max_value</span> <span class="o">-</span> <span class="n">min_value</span><span class="p">)</span> <span class="o">/</span> <span class="n">bins</span>
<a id="__codelineno-0-6428" name="__codelineno-0-6428"></a>    <span class="n">ranges</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-6429" name="__codelineno-0-6429"></a>        <span class="p">(</span><span class="n">min_val</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="n">bin_width</span><span class="p">,</span> <span class="n">min_val</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">bin_width</span><span class="p">)</span>
<a id="__codelineno-0-6430" name="__codelineno-0-6430"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">bins</span><span class="p">)</span>
<a id="__codelineno-0-6431" name="__codelineno-0-6431"></a>    <span class="p">]</span>
<a id="__codelineno-0-6432" name="__codelineno-0-6432"></a>
<a id="__codelineno-0-6433" name="__codelineno-0-6433"></a>    <span class="n">hist</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">GetHistogram</span><span class="p">(</span>
<a id="__codelineno-0-6434" name="__codelineno-0-6434"></a>        <span class="nb">min</span><span class="o">=</span><span class="n">min_value</span><span class="p">,</span>
<a id="__codelineno-0-6435" name="__codelineno-0-6435"></a>        <span class="nb">max</span><span class="o">=</span><span class="n">max_value</span><span class="p">,</span>
<a id="__codelineno-0-6436" name="__codelineno-0-6436"></a>        <span class="n">buckets</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span>
<a id="__codelineno-0-6437" name="__codelineno-0-6437"></a>        <span class="n">include_out_of_range</span><span class="o">=</span><span class="n">include_out_of_range</span><span class="p">,</span>
<a id="__codelineno-0-6438" name="__codelineno-0-6438"></a>        <span class="n">approx_ok</span><span class="o">=</span><span class="n">approx_ok</span><span class="p">,</span>
<a id="__codelineno-0-6439" name="__codelineno-0-6439"></a>    <span class="p">)</span>
<a id="__codelineno-0-6440" name="__codelineno-0-6440"></a>    <span class="k">return</span> <span class="n">hist</span><span class="p">,</span> <span class="n">ranges</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="pyramids.dataset.Dataset.to_xyz" class="doc doc-heading"><a href="#pyramids.dataset.Dataset.to_xyz" class="toclink">
            <code class="highlight language-python"><span class="n">to_xyz</span><span class="p">(</span><span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</a><a href="#pyramids.dataset.Dataset.to_xyz" class="headerlink" title="Permanent link">#</a></h4>


    <div class="doc doc-contents ">

        <p>Convert to XYZ.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>path to the file where the data will be saved. If None, the data will be returned as a DataFrame.
default is None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>bands</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>indices of the bands. If None, all bands will be used. default is None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="geopandas.geodataframe.DataFrame">DataFrame</span>, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame/File:
DataFrame with columns: lon, lat, band_1, band_2,... . If a path is provided the data will be saved to
disk as a .xyz file</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <ul>
<li>First we will create a dataset from a float32 array with values between 1 and 10, and then we will
    assign a scale of 0.1 to the dataset.
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span> <span class="p">[[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]]])</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">top_left_corner</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">cell_size</span> <span class="o">=</span> <span class="mf">0.05</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">create_from_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">top_left_corner</span><span class="o">=</span><span class="n">top_left_corner</span><span class="p">,</span> <span class="n">cell_size</span><span class="o">=</span><span class="n">cell_size</span><span class="p">,</span><span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>            <span class="n">Top</span> <span class="n">Left</span> <span class="n">Corner</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>            <span class="n">Cell</span> <span class="n">size</span><span class="p">:</span> <span class="mf">0.05</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>            <span class="n">Dimension</span><span class="p">:</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>            <span class="n">EPSG</span><span class="p">:</span> <span class="mi">4326</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>            <span class="n">Number</span> <span class="n">of</span> <span class="n">Bands</span><span class="p">:</span> <span class="mi">2</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>            <span class="n">Band</span> <span class="n">names</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Band_1&#39;</span><span class="p">,</span> <span class="s1">&#39;Band_2&#39;</span><span class="p">]</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>            <span class="n">Band</span> <span class="n">colors</span><span class="p">:</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;undefined&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;undefined&#39;</span><span class="p">}</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>            <span class="n">Band</span> <span class="n">units</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>            <span class="n">Scale</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>            <span class="n">Offset</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>            <span class="n">Mask</span><span class="p">:</span> <span class="o">-</span><span class="mf">9999.0</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>            <span class="n">Data</span> <span class="nb">type</span><span class="p">:</span> <span class="n">int64</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>            <span class="n">File</span><span class="p">:</span> <span class="o">...</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="o">&lt;</span><span class="n">BLANKLINE</span><span class="o">&gt;</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">df</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">to_xyz</span><span class="p">()</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>     <span class="n">lon</span>    <span class="n">lat</span>  <span class="n">Band_1</span>  <span class="n">Band_2</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="mi">0</span>  <span class="mf">0.025</span> <span class="o">-</span><span class="mf">0.025</span>       <span class="mi">1</span>       <span class="mi">5</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="mi">1</span>  <span class="mf">0.075</span> <span class="o">-</span><span class="mf">0.025</span>       <span class="mi">2</span>       <span class="mi">6</span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="mi">2</span>  <span class="mf">0.025</span> <span class="o">-</span><span class="mf">0.075</span>       <span class="mi">3</span>       <span class="mi">7</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="mi">3</span>  <span class="mf">0.075</span> <span class="o">-</span><span class="mf">0.075</span>       <span class="mi">4</span>       <span class="mi">8</span>
</code></pre></div></li>
</ul>


            <details class="quote">
              <summary>Source code in <code>pyramids/dataset.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-6465">6465</a></span>
<span class="normal"><a href="#__codelineno-0-6466">6466</a></span>
<span class="normal"><a href="#__codelineno-0-6467">6467</a></span>
<span class="normal"><a href="#__codelineno-0-6468">6468</a></span>
<span class="normal"><a href="#__codelineno-0-6469">6469</a></span>
<span class="normal"><a href="#__codelineno-0-6470">6470</a></span>
<span class="normal"><a href="#__codelineno-0-6471">6471</a></span>
<span class="normal"><a href="#__codelineno-0-6472">6472</a></span>
<span class="normal"><a href="#__codelineno-0-6473">6473</a></span>
<span class="normal"><a href="#__codelineno-0-6474">6474</a></span>
<span class="normal"><a href="#__codelineno-0-6475">6475</a></span>
<span class="normal"><a href="#__codelineno-0-6476">6476</a></span>
<span class="normal"><a href="#__codelineno-0-6477">6477</a></span>
<span class="normal"><a href="#__codelineno-0-6478">6478</a></span>
<span class="normal"><a href="#__codelineno-0-6479">6479</a></span>
<span class="normal"><a href="#__codelineno-0-6480">6480</a></span>
<span class="normal"><a href="#__codelineno-0-6481">6481</a></span>
<span class="normal"><a href="#__codelineno-0-6482">6482</a></span>
<span class="normal"><a href="#__codelineno-0-6483">6483</a></span>
<span class="normal"><a href="#__codelineno-0-6484">6484</a></span>
<span class="normal"><a href="#__codelineno-0-6485">6485</a></span>
<span class="normal"><a href="#__codelineno-0-6486">6486</a></span>
<span class="normal"><a href="#__codelineno-0-6487">6487</a></span>
<span class="normal"><a href="#__codelineno-0-6488">6488</a></span>
<span class="normal"><a href="#__codelineno-0-6489">6489</a></span>
<span class="normal"><a href="#__codelineno-0-6490">6490</a></span>
<span class="normal"><a href="#__codelineno-0-6491">6491</a></span>
<span class="normal"><a href="#__codelineno-0-6492">6492</a></span>
<span class="normal"><a href="#__codelineno-0-6493">6493</a></span>
<span class="normal"><a href="#__codelineno-0-6494">6494</a></span>
<span class="normal"><a href="#__codelineno-0-6495">6495</a></span>
<span class="normal"><a href="#__codelineno-0-6496">6496</a></span>
<span class="normal"><a href="#__codelineno-0-6497">6497</a></span>
<span class="normal"><a href="#__codelineno-0-6498">6498</a></span>
<span class="normal"><a href="#__codelineno-0-6499">6499</a></span>
<span class="normal"><a href="#__codelineno-0-6500">6500</a></span>
<span class="normal"><a href="#__codelineno-0-6501">6501</a></span>
<span class="normal"><a href="#__codelineno-0-6502">6502</a></span>
<span class="normal"><a href="#__codelineno-0-6503">6503</a></span>
<span class="normal"><a href="#__codelineno-0-6504">6504</a></span>
<span class="normal"><a href="#__codelineno-0-6505">6505</a></span>
<span class="normal"><a href="#__codelineno-0-6506">6506</a></span>
<span class="normal"><a href="#__codelineno-0-6507">6507</a></span>
<span class="normal"><a href="#__codelineno-0-6508">6508</a></span>
<span class="normal"><a href="#__codelineno-0-6509">6509</a></span>
<span class="normal"><a href="#__codelineno-0-6510">6510</a></span>
<span class="normal"><a href="#__codelineno-0-6511">6511</a></span>
<span class="normal"><a href="#__codelineno-0-6512">6512</a></span>
<span class="normal"><a href="#__codelineno-0-6513">6513</a></span>
<span class="normal"><a href="#__codelineno-0-6514">6514</a></span>
<span class="normal"><a href="#__codelineno-0-6515">6515</a></span>
<span class="normal"><a href="#__codelineno-0-6516">6516</a></span>
<span class="normal"><a href="#__codelineno-0-6517">6517</a></span>
<span class="normal"><a href="#__codelineno-0-6518">6518</a></span>
<span class="normal"><a href="#__codelineno-0-6519">6519</a></span>
<span class="normal"><a href="#__codelineno-0-6520">6520</a></span>
<span class="normal"><a href="#__codelineno-0-6521">6521</a></span>
<span class="normal"><a href="#__codelineno-0-6522">6522</a></span>
<span class="normal"><a href="#__codelineno-0-6523">6523</a></span>
<span class="normal"><a href="#__codelineno-0-6524">6524</a></span>
<span class="normal"><a href="#__codelineno-0-6525">6525</a></span>
<span class="normal"><a href="#__codelineno-0-6526">6526</a></span>
<span class="normal"><a href="#__codelineno-0-6527">6527</a></span>
<span class="normal"><a href="#__codelineno-0-6528">6528</a></span>
<span class="normal"><a href="#__codelineno-0-6529">6529</a></span>
<span class="normal"><a href="#__codelineno-0-6530">6530</a></span>
<span class="normal"><a href="#__codelineno-0-6531">6531</a></span>
<span class="normal"><a href="#__codelineno-0-6532">6532</a></span>
<span class="normal"><a href="#__codelineno-0-6533">6533</a></span>
<span class="normal"><a href="#__codelineno-0-6534">6534</a></span>
<span class="normal"><a href="#__codelineno-0-6535">6535</a></span>
<span class="normal"><a href="#__codelineno-0-6536">6536</a></span>
<span class="normal"><a href="#__codelineno-0-6537">6537</a></span>
<span class="normal"><a href="#__codelineno-0-6538">6538</a></span>
<span class="normal"><a href="#__codelineno-0-6539">6539</a></span>
<span class="normal"><a href="#__codelineno-0-6540">6540</a></span>
<span class="normal"><a href="#__codelineno-0-6541">6541</a></span>
<span class="normal"><a href="#__codelineno-0-6542">6542</a></span>
<span class="normal"><a href="#__codelineno-0-6543">6543</a></span>
<span class="normal"><a href="#__codelineno-0-6544">6544</a></span>
<span class="normal"><a href="#__codelineno-0-6545">6545</a></span>
<span class="normal"><a href="#__codelineno-0-6546">6546</a></span>
<span class="normal"><a href="#__codelineno-0-6547">6547</a></span>
<span class="normal"><a href="#__codelineno-0-6548">6548</a></span>
<span class="normal"><a href="#__codelineno-0-6549">6549</a></span>
<span class="normal"><a href="#__codelineno-0-6550">6550</a></span>
<span class="normal"><a href="#__codelineno-0-6551">6551</a></span>
<span class="normal"><a href="#__codelineno-0-6552">6552</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-6465" name="__codelineno-0-6465"></a><span class="k">def</span><span class="w"> </span><span class="nf">to_xyz</span><span class="p">(</span>
<a id="__codelineno-0-6466" name="__codelineno-0-6466"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">bands</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-6467" name="__codelineno-0-6467"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">DataFrame</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<a id="__codelineno-0-6468" name="__codelineno-0-6468"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert to XYZ.</span>
<a id="__codelineno-0-6469" name="__codelineno-0-6469"></a>
<a id="__codelineno-0-6470" name="__codelineno-0-6470"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-6471" name="__codelineno-0-6471"></a><span class="sd">        path (str, optional):</span>
<a id="__codelineno-0-6472" name="__codelineno-0-6472"></a><span class="sd">            path to the file where the data will be saved. If None, the data will be returned as a DataFrame.</span>
<a id="__codelineno-0-6473" name="__codelineno-0-6473"></a><span class="sd">            default is None.</span>
<a id="__codelineno-0-6474" name="__codelineno-0-6474"></a><span class="sd">        bands (List[int], optional):</span>
<a id="__codelineno-0-6475" name="__codelineno-0-6475"></a><span class="sd">            indices of the bands. If None, all bands will be used. default is None</span>
<a id="__codelineno-0-6476" name="__codelineno-0-6476"></a>
<a id="__codelineno-0-6477" name="__codelineno-0-6477"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-6478" name="__codelineno-0-6478"></a><span class="sd">        DataFrame/File:</span>
<a id="__codelineno-0-6479" name="__codelineno-0-6479"></a><span class="sd">            DataFrame with columns: lon, lat, band_1, band_2,... . If a path is provided the data will be saved to</span>
<a id="__codelineno-0-6480" name="__codelineno-0-6480"></a><span class="sd">            disk as a .xyz file</span>
<a id="__codelineno-0-6481" name="__codelineno-0-6481"></a>
<a id="__codelineno-0-6482" name="__codelineno-0-6482"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-6483" name="__codelineno-0-6483"></a><span class="sd">        - First we will create a dataset from a float32 array with values between 1 and 10, and then we will</span>
<a id="__codelineno-0-6484" name="__codelineno-0-6484"></a><span class="sd">            assign a scale of 0.1 to the dataset.</span>
<a id="__codelineno-0-6485" name="__codelineno-0-6485"></a><span class="sd">            ```python</span>
<a id="__codelineno-0-6486" name="__codelineno-0-6486"></a><span class="sd">            &gt;&gt;&gt; import numpy as np</span>
<a id="__codelineno-0-6487" name="__codelineno-0-6487"></a><span class="sd">            &gt;&gt;&gt; arr = np.array([[[1, 2], [3, 4]], [[5, 6], [7, 8]]])</span>
<a id="__codelineno-0-6488" name="__codelineno-0-6488"></a><span class="sd">            &gt;&gt;&gt; top_left_corner = (0, 0)</span>
<a id="__codelineno-0-6489" name="__codelineno-0-6489"></a><span class="sd">            &gt;&gt;&gt; cell_size = 0.05</span>
<a id="__codelineno-0-6490" name="__codelineno-0-6490"></a><span class="sd">            &gt;&gt;&gt; dataset = Dataset.create_from_array(arr, top_left_corner=top_left_corner, cell_size=cell_size,epsg=4326)</span>
<a id="__codelineno-0-6491" name="__codelineno-0-6491"></a><span class="sd">            &gt;&gt;&gt; print(dataset)</span>
<a id="__codelineno-0-6492" name="__codelineno-0-6492"></a><span class="sd">            &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-6493" name="__codelineno-0-6493"></a><span class="sd">                        Top Left Corner: (0.0, 0.0)</span>
<a id="__codelineno-0-6494" name="__codelineno-0-6494"></a><span class="sd">                        Cell size: 0.05</span>
<a id="__codelineno-0-6495" name="__codelineno-0-6495"></a><span class="sd">                        Dimension: 2 * 2</span>
<a id="__codelineno-0-6496" name="__codelineno-0-6496"></a><span class="sd">                        EPSG: 4326</span>
<a id="__codelineno-0-6497" name="__codelineno-0-6497"></a><span class="sd">                        Number of Bands: 2</span>
<a id="__codelineno-0-6498" name="__codelineno-0-6498"></a><span class="sd">                        Band names: [&#39;Band_1&#39;, &#39;Band_2&#39;]</span>
<a id="__codelineno-0-6499" name="__codelineno-0-6499"></a><span class="sd">                        Band colors: {0: &#39;undefined&#39;, 1: &#39;undefined&#39;}</span>
<a id="__codelineno-0-6500" name="__codelineno-0-6500"></a><span class="sd">                        Band units: [&#39;&#39;, &#39;&#39;]</span>
<a id="__codelineno-0-6501" name="__codelineno-0-6501"></a><span class="sd">                        Scale: [1.0, 1.0]</span>
<a id="__codelineno-0-6502" name="__codelineno-0-6502"></a><span class="sd">                        Offset: [0, 0]</span>
<a id="__codelineno-0-6503" name="__codelineno-0-6503"></a><span class="sd">                        Mask: -9999.0</span>
<a id="__codelineno-0-6504" name="__codelineno-0-6504"></a><span class="sd">                        Data type: int64</span>
<a id="__codelineno-0-6505" name="__codelineno-0-6505"></a><span class="sd">                        File: ...</span>
<a id="__codelineno-0-6506" name="__codelineno-0-6506"></a><span class="sd">            &lt;BLANKLINE&gt;</span>
<a id="__codelineno-0-6507" name="__codelineno-0-6507"></a><span class="sd">            &gt;&gt;&gt; df = dataset.to_xyz()</span>
<a id="__codelineno-0-6508" name="__codelineno-0-6508"></a><span class="sd">            &gt;&gt;&gt; print(df)</span>
<a id="__codelineno-0-6509" name="__codelineno-0-6509"></a><span class="sd">                 lon    lat  Band_1  Band_2</span>
<a id="__codelineno-0-6510" name="__codelineno-0-6510"></a><span class="sd">            0  0.025 -0.025       1       5</span>
<a id="__codelineno-0-6511" name="__codelineno-0-6511"></a><span class="sd">            1  0.075 -0.025       2       6</span>
<a id="__codelineno-0-6512" name="__codelineno-0-6512"></a><span class="sd">            2  0.025 -0.075       3       7</span>
<a id="__codelineno-0-6513" name="__codelineno-0-6513"></a><span class="sd">            3  0.075 -0.075       4       8</span>
<a id="__codelineno-0-6514" name="__codelineno-0-6514"></a><span class="sd">            ```</span>
<a id="__codelineno-0-6515" name="__codelineno-0-6515"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-6516" name="__codelineno-0-6516"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-6517" name="__codelineno-0-6517"></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">osgeo_utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">gdal2xyz</span>
<a id="__codelineno-0-6518" name="__codelineno-0-6518"></a>    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
<a id="__codelineno-0-6519" name="__codelineno-0-6519"></a>        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
<a id="__codelineno-0-6520" name="__codelineno-0-6520"></a>            <span class="s2">&quot;osgeo_utils is not installed. Install it using pip: pip install osgeo-utils&quot;</span>
<a id="__codelineno-0-6521" name="__codelineno-0-6521"></a>        <span class="p">)</span>
<a id="__codelineno-0-6522" name="__codelineno-0-6522"></a>
<a id="__codelineno-0-6523" name="__codelineno-0-6523"></a>    <span class="k">if</span> <span class="n">bands</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-6524" name="__codelineno-0-6524"></a>        <span class="n">bands</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-6525" name="__codelineno-0-6525"></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bands</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
<a id="__codelineno-0-6526" name="__codelineno-0-6526"></a>        <span class="n">bands</span> <span class="o">=</span> <span class="p">[</span><span class="n">bands</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-6527" name="__codelineno-0-6527"></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bands</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-6528" name="__codelineno-0-6528"></a>        <span class="n">bands</span> <span class="o">=</span> <span class="p">[</span><span class="n">band</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">band</span> <span class="ow">in</span> <span class="n">bands</span><span class="p">]</span>
<a id="__codelineno-0-6529" name="__codelineno-0-6529"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-6530" name="__codelineno-0-6530"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;bands must be an integer or a list of integers.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-6531" name="__codelineno-0-6531"></a>
<a id="__codelineno-0-6532" name="__codelineno-0-6532"></a>    <span class="n">band_nums</span> <span class="o">=</span> <span class="n">bands</span>
<a id="__codelineno-0-6533" name="__codelineno-0-6533"></a>    <span class="n">arr</span> <span class="o">=</span> <span class="n">gdal2xyz</span><span class="o">.</span><span class="n">gdal2xyz</span><span class="p">(</span>
<a id="__codelineno-0-6534" name="__codelineno-0-6534"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">raster</span><span class="p">,</span>
<a id="__codelineno-0-6535" name="__codelineno-0-6535"></a>        <span class="n">path</span><span class="p">,</span>
<a id="__codelineno-0-6536" name="__codelineno-0-6536"></a>        <span class="n">skip_nodata</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-6537" name="__codelineno-0-6537"></a>        <span class="n">return_np_arrays</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-6538" name="__codelineno-0-6538"></a>        <span class="n">band_nums</span><span class="o">=</span><span class="n">band_nums</span><span class="p">,</span>
<a id="__codelineno-0-6539" name="__codelineno-0-6539"></a>    <span class="p">)</span>
<a id="__codelineno-0-6540" name="__codelineno-0-6540"></a>    <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-6541" name="__codelineno-0-6541"></a>        <span class="n">band_names</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-6542" name="__codelineno-0-6542"></a>        <span class="k">if</span> <span class="n">bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-6543" name="__codelineno-0-6543"></a>            <span class="k">for</span> <span class="n">band</span> <span class="ow">in</span> <span class="n">bands</span><span class="p">:</span>
<a id="__codelineno-0-6544" name="__codelineno-0-6544"></a>                <span class="n">band_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band_names</span><span class="p">[</span><span class="n">band</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-6545" name="__codelineno-0-6545"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-6546" name="__codelineno-0-6546"></a>            <span class="n">band_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">band_names</span>
<a id="__codelineno-0-6547" name="__codelineno-0-6547"></a>
<a id="__codelineno-0-6548" name="__codelineno-0-6548"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;lon&quot;</span><span class="p">,</span> <span class="s2">&quot;lat&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">band_names</span><span class="p">)</span>
<a id="__codelineno-0-6549" name="__codelineno-0-6549"></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;lon&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-6550" name="__codelineno-0-6550"></a>        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-6551" name="__codelineno-0-6551"></a>        <span class="n">df</span><span class="p">[</span><span class="n">band_names</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<a id="__codelineno-0-6552" name="__codelineno-0-6552"></a>        <span class="k">return</span> <span class="n">df</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../architecture/diagrams/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Diagrams">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Diagrams
              </div>
            </div>
          </a>
        
        
          
          <a href="../featurecollection/" class="md-footer__link md-footer__link--next" aria-label="Next: Feature Collection">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Feature Collection
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Serapieum-of-alex/pyramids" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.expand", "navigation.indexes", "navigation.footer", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "content.code.copy", "content.code.annotate", "content.action.edit", "content.action.view", "content.tooltips", "search.highlight", "search.suggest", "toc.follow", "announce.dismiss"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../assets/javascripts/panzoom.min.js"></script>
      
        <script src="../../assets/javascripts/zoompan.js"></script>
      
    
  </body>
</html>